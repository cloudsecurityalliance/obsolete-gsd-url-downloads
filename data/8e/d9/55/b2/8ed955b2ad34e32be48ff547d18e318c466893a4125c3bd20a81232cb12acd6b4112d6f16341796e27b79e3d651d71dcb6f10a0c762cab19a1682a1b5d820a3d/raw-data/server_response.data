<!DOCTYPE html>
<html lang="en">
  <head>
    <title>85105 &ndash; CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/c60deb3d48830179eae269c9e65a7506.css?1462892334" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1462892331"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "85105 – CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)",
                             "show_bug.cgi?id=85105" );
        document.title = "85105 – CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "85105 – CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1462892334"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-freedesktop-org
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_dbus
                 bz_component_core
                 bz_bug_85105 yui-skin-sam">

  <div id="header"><div id="banner">
  </div>

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;85105</span>

        <span id="subtitle" class="subheader">CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)</span>

        <span id="information" class="header_addl_info">Last modified: 2014-11-10 17:04:40 UTC</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>


</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-11-10 17:04:40">
  <input type="hidden" name="id" value="85105">
  <input type="hidden" name="token" value="1635619163-mqNvyFe4HupyQasjBS6ZEZ3bq1WxOoq_O-uUVWq66ug">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=85105"><b>Bug&nbsp;85105</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span><span title="CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)">CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix fo...
        </span>
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >dbus

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=dbus"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >core

  (<a href="buglist.cgi?component=core&amp;product=dbus&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>
<td>1.8
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">Other
        All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>medium
       normal
      </td>
    </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Simon McVittie</span>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard"><span class="fn">D-Bus Maintainers</span>
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'dbus\x40maint.invalid',
        'dbus\x40maint.invalid');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >patch, security

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2014-10-16 19:05 UTC by <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-11-10 17:04 UTC
      (<a href="show_activity.cgi?id=85105">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>4 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="alban.crequy">alban.crequy</option>
                <option value="lennart">lennart</option>
                <option value="thiago">thiago</option>
                <option value="walters">walters</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 
<tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_i915_platform">


  <a 
      title="Intel platforms affected by the bug"
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_i915_platform"
  >i915 platform:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_i915_platform" >

</td>
    </tr>
    <tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_i915_features">


  <a 
      title="Features of the i915 driver affected by the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_i915_features"
  >i915 features:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_i915_features" >

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="2" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=107944"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Set fd rlimit to 64k for the system dbus-daemon</span></b></a>

          <span class="bz_attach_extra_info">
              (11.78 KB,
                patch)

            <br>
            <a href="#attach_107944"
               title="Go to the comment associated with the attachment">2014-10-16 19:07 UTC</a>,

            <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=107944&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=107944">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=108299"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">[PATCH] Set fd rlimit to 64k for the system dbus-daemon</span></b></a>

          <span class="bz_attach_extra_info">
              (11.77 KB,
                patch)

            <br>
            <a href="#attach_108299"
               title="Go to the comment associated with the attachment">2014-10-23 14:16 UTC</a>,

            <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108299&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108299">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=108848"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING</span></b></a>

          <span class="bz_attach_extra_info">
              (2.80 KB,
                patch)

            <br>
            <a href="#attach_108848"
               title="Go to the comment associated with the attachment">2014-11-03 16:23 UTC</a>,

            <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108848&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108848">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=108849"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon</span></b></a>

          <span class="bz_attach_extra_info">
              (12.34 KB,
                patch)

            <br>
            <a href="#attach_108849"
               title="Go to the comment associated with the attachment">2014-11-03 16:24 UTC</a>,

            <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108849&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108849">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a5" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=108853"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon</span></b></a>

          <span class="bz_attach_extra_info">
              (12.30 KB,
                patch)

            <br>
            <a href="#attach_108853"
               title="Go to the comment associated with the attachment">2014-11-03 17:15 UTC</a>,

            <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108853&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108853">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a6" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=108886"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon</span></b></a>

          <span class="bz_attach_extra_info">
              (12.35 KB,
                patch)

            <br>
            <a href="#attach_108886"
               title="Go to the comment associated with the attachment">2014-11-04 12:47 UTC</a>,

            <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108886&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108886">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a7" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=108896"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">[PATCH] Set fd rlimit to 64k for the system dbus-daemon</span></b></a>

          <span class="bz_attach_extra_info">
              (12.66 KB,
                patch)

            <br>
            <a href="#attach_108896"
               title="Go to the comment associated with the attachment">2014-11-04 14:52 UTC</a>,

            <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108896&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108896">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a8" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=108897"
               title="View the content of the attachment">
          <b>[PATCH 2/3 for 1.9] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING</b></a>

          <span class="bz_attach_extra_info">
              (2.80 KB,
                patch)

            <br>
            <a href="#attach_108897"
               title="Go to the comment associated with the attachment">2014-11-04 14:52 UTC</a>,

            <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108897&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108897">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a9" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=108898"
               title="View the content of the attachment">
          <b>[PATCH 3/3 for 1.9] Use DBUS_SYSTEM_LOG_WARNING for failure to alter  fd-limits</b></a>

          <span class="bz_attach_extra_info">
              (1.71 KB,
                patch)

            <br>
            <a href="#attach_108898"
               title="Go to the comment associated with the attachment">2014-11-04 14:53 UTC</a>,

            <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=108898&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108898">
      Splinter Review</a>
        </td>
      </tr>
      <tr id="a10" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=109054"
               title="View the content of the attachment">
          <b>CVE-2014-7824: set fd rlimit to 64k for the system  dbus-daemon</b></a>

          <span class="bz_attach_extra_info">
              (12.71 KB,
                patch)

            <br>
            <a href="#attach_109054"
               title="Go to the comment associated with the attachment">2014-11-06 16:51 UTC</a>,

            <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=109054&amp;action=edit">Details</a>&#x0020; |
    <a href="https://bugs.freedesktop.org/page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=109054">
      Splinter Review</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (7)
            <a id="view_all" href="attachment.cgi?bugid=85105&amp;action=viewall&amp;hide_obsolete=1">View All</a>
        </span>
    </td>
  </tr>
</table>
<br>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1462891770" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-16 19:05:15 UTC
        </span>

      </div>




<pre class="bz_comment_text">dbus-daemon should increase its fd limit, but not pass the increased limit on to its children. Otherwise, it's easier than intended to carry out a DoS attack like the one described in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-3636: using all available file descriptors in dbus-daemon: limit DEFAULT_MESSAGE_UNIX_FDS"
   href="show_bug.cgi?id=82820">Bug #82820</a>.

This completes a partial fix for CVE-2014-3636 (<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-3636: using all available file descriptors in dbus-daemon: limit DEFAULT_MESSAGE_UNIX_FDS"
   href="show_bug.cgi?id=82820">Bug #82820</a>): the justification given on <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-3636: using all available file descriptors in dbus-daemon: limit DEFAULT_MESSAGE_UNIX_FDS"
   href="show_bug.cgi?id=82820">Bug #82820</a> assumed a higher fd limit than what is actually present by default.

To avoid making it easier for system-activated services to DoS the system, we should also ensure that they do not inherit dbus-daemon's higher fd-limit.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-16 19:07:36 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=107944" name="attach_107944" title="Set fd rlimit to 64k for the system dbus-daemon">attachment 107944</a> <a href="attachment.cgi?id=107944&amp;action=edit" title="Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=107944'>[review]</a>
Set fd rlimit to 64k for the system dbus-daemon

Restore the original rlimit for activated services.

---

Yeah I know this needs a longer commit message. Ideas?

I used a hard-coded 64k fds rather than trying to calculate what we need, as Lennart suggested. If several uids collaborate to use up our fd limit then we lose anyway, afaics.</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-16 19:18:50 UTC
        </span>

      </div>




<pre class="bz_comment_text">I'm not sure to what extent it's worth handling this as a vulnerability, but I'm giving it the benefit of the doubt.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-16 19:23:44 UTC
        </span>

      </div>




<pre class="bz_comment_text">Debian with sysvinit or Upstart (but not systemd) as pid 1 also needs this patch, to start dbus-daemon with enough privileges that it can get the higher rlimit.

--- a/debian/dbus.init
+++ b/debian/dbus.init
&#64;&#64; -69,7 +69,7 &#64;&#64; start_it_up()
 
   log_daemon_msg &quot;Starting $DESC&quot; &quot;$NAME&quot;
   start-stop-daemon --start --quiet --pidfile $PIDFILE \
-    --user $DAEMONUSER --exec $DAEMON -- --system $PARAMS
+    --exec $DAEMON -- --system $PARAMS
   log_end_msg $?
 }</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Lennart Poettering</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-21 11:46:25 UTC
        </span>

      </div>




<pre class="bz_comment_text">Patch looks good in principle, but I probably wouldn't make it fatal if bumping the limit doesn't work...

BTW, the code that in systemd tries to make the best of the situation when bumping is here:

<a href="http://cgit.freedesktop.org/systemd/systemd/tree/src/shared/util.c#n5185">http://cgit.freedesktop.org/systemd/systemd/tree/src/shared/util.c#n5185</a></pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-21 12:12:04 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Lennart Poettering from <a href="show_bug.cgi?id=85105#c4">comment #4</a>)
<span class="quote">&gt; Patch looks good in principle, but I probably wouldn't make it fatal if
&gt; bumping the limit doesn't work...</span >

Where do you see it being fatal? My intention was that the library code raises a DBusError, and the dbus-daemon catches the DBusError, logs it to syslog and carries on as if nothing had happened.

The only place where it's fatal is if we fail to put the old limit back before activating a child service (without using systemd), in which case it's fatal to the child service. I think that's correct: we shouldn't start children with elevated fd-limits.

The one possible improvement I can see in that area is that raise_file_descriptor_limit() should probably clear context-&gt;initial_fd_limit if _dbus_rlimit_raise_fd_limit_if_privileged() fails, so that we can only call setrlimit() from child_setup() if a previous setrlimit() in _dbus_rlimit_raise_fd_limit_if_privileged() has already succeeded.

We should maybe also add a log-level WARNING, corresponding to syslog WARNING, above the current INFO (which is, confusingly, syslog NOTICE).</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Lennart Poettering</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-21 18:20:56 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Simon McVittie from <a href="show_bug.cgi?id=85105#c5">comment #5</a>)
<span class="quote">&gt; (In reply to Lennart Poettering from <a href="show_bug.cgi?id=85105#c4">comment #4</a>)
&gt; &gt; Patch looks good in principle, but I probably wouldn't make it fatal if
&gt; &gt; bumping the limit doesn't work...
&gt; 
&gt; Where do you see it being fatal? My intention was that the library code
&gt; raises a DBusError, and the dbus-daemon catches the DBusError, logs it to
&gt; syslog and carries on as if nothing had happened.
&gt; 
&gt; The only place where it's fatal is if we fail to put the old limit back
&gt; before activating a child service (without using systemd), in which case
&gt; it's fatal to the child service. I think that's correct: we shouldn't start
&gt; children with elevated fd-limits.</span >

yeah this is the occasion i meant. I'd still not make this fatal though. Limits are just, well, limits... and if they are higher than necessary that's certainly much less problematic then the other way round...</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-23 14:16:45 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=108299" name="attach_108299" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">attachment 108299</a> <a href="attachment.cgi?id=108299&amp;action=edit" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108299'>[review]</a>
[PATCH] Set fd rlimit to 64k for the system dbus-daemon

(In reply to Lennart Poettering from <a href="show_bug.cgi?id=85105#c6">comment #6</a>)
<span class="quote">&gt; (In reply to Simon McVittie from <a href="show_bug.cgi?id=85105#c5">comment #5</a>)
&gt; &gt; The only place where it's fatal is if we fail to put the old limit back
&gt; &gt; before activating a child service (without using systemd), in which case
&gt; &gt; it's fatal to the child service. I think that's correct: we shouldn't start
&gt; &gt; children with elevated fd-limits.
&gt; 
&gt; yeah this is the occasion i meant. I'd still not make this fatal though.
&gt; Limits are just, well, limits... and if they are higher than necessary
&gt; that's certainly much less problematic then the other way round...</span >

Here is Simon's patch edited to make it not fatal. I deleted the exit().</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-23 15:02:19 UTC
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=108299" name="attach_108299" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">attachment 108299</a> <a href="attachment.cgi?id=108299&amp;action=edit" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108299'>[review]</a>
[PATCH] Set fd rlimit to 64k for the system dbus-daemon

Review of <span class="bz_obsolete"><a href="attachment.cgi?id=108299" name="attach_108299" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">attachment 108299</a> <a href="attachment.cgi?id=108299&amp;action=edit" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108299'>[review]</a>:
-----------------------------------------------------------------

Your change seems good.

::: bus/activation.c
&#64;&#64; +1702,5 &#64;&#64;
<span class="quote">&gt; +      !_dbus_rlimit_restore_fd_limit (initial_fd_limit, &amp;error))
&gt; +    {
&gt; +      /* unfortunately we don't actually know the service name here */
&gt; +      bus_context_log (activation-&gt;context,
&gt; +                       DBUS_SYSTEM_LOG_INFO,</span >

This should probably be LOG_WARNING, if we had that, which we don't. Anyone want to write a patch?

::: bus/bus.c
&#64;&#64; +670,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +  if (context-&gt;initial_fd_limit == NULL)
&gt; +    {
&gt; +      bus_context_log (context, DBUS_SYSTEM_LOG_INFO,
&gt; +                       &quot;%s: %s&quot;, error.name, error.message);</span >

This too, at least #ifdef DBUS_UNIX?

(getrlimit/setrlimit are POSIX.1-2001, so I would regard Unixes without that functionality as being somewhat broken, even if we do our best to keep them working.)

Maybe this whole function should be #ifdef DBUS_UNIX.

child_setup() won't be called on Windows anyway.

&#64;&#64; +684,5 &#64;&#64;
<span class="quote">&gt; +   * anything short of multiple uids conspiring against us.
&gt; +   */
&gt; +  if (!_dbus_rlimit_raise_fd_limit_if_privileged (65536, &amp;error))
&gt; +    {
&gt; +      bus_context_log (context, DBUS_SYSTEM_LOG_INFO,</span >

And this.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-28 16:30:32 UTC
        </span>

      </div>




<pre class="bz_comment_text">FWIW, I tested this on a dbus 1.8.0 system and got the following /proc/*/limits stats:

  * Without the patch: dbus-daemon (for the system bus)
Max open files            2144                 2144                 files

  * Without the patch: a system service activated by dbus-daemon (not by systemd)
Max open files            2144                 2144                 files

  * With the patch: dbus-daemon (for the system bus)
Max open files            65536                65536                files

  * With the patch: a system service activated by dbus-daemon (not by systemd)
Max open files            1024                 4096                 files

This test results look good to me.</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-03 16:23:00 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=108848" name="attach_108848" title="[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">attachment 108848</a> <a href="attachment.cgi?id=108848&amp;action=edit" title="[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108848'>[review]</a>
[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING

(In reply to Simon McVittie from <a href="show_bug.cgi?id=85105#c8">comment #8</a>)
<span class="quote">&gt; This should probably be LOG_WARNING, if we had that, which we don't. Anyone
&gt; want to write a patch?</span >

This patch adds LOG_WARNING.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-03 16:24:51 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=108849" name="attach_108849" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108849</a> <a href="attachment.cgi?id=108849&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108849'>[review]</a>
[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon

Fixes after review from <a href="show_bug.cgi?id=85105#c8">Comment #8</a>:
- LOG_WARNING
- #ifdef DBUS_UNIX
- add bugzilla link in commit log</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-03 16:41:30 UTC
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=108848" name="attach_108848" title="[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">attachment 108848</a> <a href="attachment.cgi?id=108848&amp;action=edit" title="[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108848'>[review]</a>
[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING

Review of <span class="bz_obsolete"><a href="attachment.cgi?id=108848" name="attach_108848" title="[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">attachment 108848</a> <a href="attachment.cgi?id=108848&amp;action=edit" title="[PATCH 1/2] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108848'>[review]</a>:
-----------------------------------------------------------------

Looks good</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-03 16:45:26 UTC
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=108849" name="attach_108849" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108849</a> <a href="attachment.cgi?id=108849&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108849'>[review]</a>
[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon

Review of <span class="bz_obsolete"><a href="attachment.cgi?id=108849" name="attach_108849" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108849</a> <a href="attachment.cgi?id=108849&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108849'>[review]</a>:
-----------------------------------------------------------------

Looks good, but...

::: bus/activation.c
&#64;&#64; +1689,5 &#64;&#64;
<span class="quote">&gt;  }
&gt;  
&gt; +static void
&gt; +child_setup (void *user_data)
&gt; +{</span >

I was expecting the body of this function to be in #ifdef DBUS_UNIX too? (It isn't executed on Windows anyway.)

::: bus/bus.c
&#64;&#64; +657,4 &#64;&#64;
<span class="quote">&gt;    return FALSE;
&gt;  }
&gt;  
&gt; +#ifdef DBUS_UNIX</span >

If you move this inside the body, so the function exists but is a no-op on Windows, then the call to it does not need to be #ifdef'd (and will be inlined). We use that trick a lot.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-03 17:15:10 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=108853" name="attach_108853" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108853</a> <a href="attachment.cgi?id=108853&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108853'>[review]</a>
[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon

(In reply to Simon McVittie from <a href="show_bug.cgi?id=85105#c13">comment #13</a>)
<span class="quote">&gt; Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=108849" name="attach_108849" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108849</a> <a href="attachment.cgi?id=108849&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108849'>[review]</a> [review]
&gt; [PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon
&gt; 
&gt; Review of <span class="bz_obsolete"><a href="attachment.cgi?id=108849" name="attach_108849" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108849</a> <a href="attachment.cgi?id=108849&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108849'>[review]</a> [review]:
&gt; -----------------------------------------------------------------
&gt; 
&gt; Looks good, but...
&gt; 
&gt; ::: bus/activation.c
&gt; &#64;&#64; +1689,5 &#64;&#64;
&gt; &gt;  }
&gt; &gt;  
&gt; &gt; +static void
&gt; &gt; +child_setup (void *user_data)
&gt; &gt; +{
&gt; 
&gt; I was expecting the body of this function to be in #ifdef DBUS_UNIX too? (It
&gt; isn't executed on Windows anyway.)</span >

It is executed on Windows from a thread. But since its content is Unix-specific, I added the #ifdef.

<span class="quote">&gt; ::: bus/bus.c
&gt; &#64;&#64; +657,4 &#64;&#64;
&gt; &gt;    return FALSE;
&gt; &gt;  }
&gt; &gt;  
&gt; &gt; +#ifdef DBUS_UNIX
&gt; 
&gt; If you move this inside the body, so the function exists but is a no-op on
&gt; Windows, then the call to it does not need to be #ifdef'd (and will be
&gt; inlined). We use that trick a lot.</span >

Ok, done.</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 12:15:10 UTC
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=108853" name="attach_108853" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108853</a> <a href="attachment.cgi?id=108853&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108853'>[review]</a>
[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon

Review of <span class="bz_obsolete"><a href="attachment.cgi?id=108853" name="attach_108853" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108853</a> <a href="attachment.cgi?id=108853&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108853'>[review]</a>:
-----------------------------------------------------------------

::: bus/bus.c
&#64;&#64; +702,4 &#64;&#64;
<span class="quote">&gt;    DBusHashTable *service_context_table;
&gt;    DBusList *watched_dirs = NULL;
&gt;  
&gt; +#ifdef DBUS_UNIX</span >

This #ifdef is no longer necessary, and will provoke compiler warnings on Windows for the unused function raise_file_descriptor_limit().</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 12:47:35 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=108886" name="attach_108886" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108886</a> <a href="attachment.cgi?id=108886&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108886'>[review]</a>
[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon

Restore the original rlimit for activated services.

Bug: <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)"
   href="show_bug.cgi?id=85105">https://bugs.freedesktop.org/show_bug.cgi?id=85105</a>
Reviewed-by: Lennart Poettering
[Alban Crequy: make failure to restore original rlimit non-fatal]
Reviewed-by: Simon McVittie
[Alban Crequy: use new DBUS_SYSTEM_LOG_WARNING; skip if !DBUS_UNIX]
[Simon McVittie: adjust DBUS_UNIX, add stub _dbus_rlimit_free on Windows]
Signed-off-by: Simon McVittie &lt;<a href="mailto:simon.mcvittie&#64;collabora.co.uk">simon.mcvittie&#64;collabora.co.uk</a>&gt;

---

Two changes since <span class="bz_obsolete"><a href="attachment.cgi?id=108853" name="attach_108853" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">Attachment #108853</a> <a href="attachment.cgi?id=108853&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span>:

* what I said in my last comment

* dbus-sysdeps-util-win.c needs an implementation of _dbus_rlimit_free(),
  although it can be a trivial stub: it is not actually called, and
  it would be a bug for it to have a non-NULL argument</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 12:49:51 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Simon McVittie from <a href="show_bug.cgi?id=85105#c16">comment #16</a>)
<span class="quote">&gt; [Simon McVittie: adjust DBUS_UNIX, add stub _dbus_rlimit_free on Windows]</span >

I successfully cross-compiled this for Windows under mingw. I haven't tested the result, but if there's a problem, Windows users could skip this release anyway - this change is irrelevant for Windows.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 13:09:09 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Simon McVittie from <a href="show_bug.cgi?id=85105#c16">comment #16</a>)
<span class="quote">&gt; Created <span class="bz_obsolete"><a href="attachment.cgi?id=108886" name="attach_108886" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">attachment 108886</a> <a href="attachment.cgi?id=108886&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108886'>[review]</a> [review]
&gt; [PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon
&gt; 
&gt; Restore the original rlimit for activated services.
&gt; 
&gt; Bug: <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)"
   href="show_bug.cgi?id=85105">https://bugs.freedesktop.org/show_bug.cgi?id=85105</a>
&gt; Reviewed-by: Lennart Poettering
&gt; [Alban Crequy: make failure to restore original rlimit non-fatal]
&gt; Reviewed-by: Simon McVittie
&gt; [Alban Crequy: use new DBUS_SYSTEM_LOG_WARNING; skip if !DBUS_UNIX]
&gt; [Simon McVittie: adjust DBUS_UNIX, add stub _dbus_rlimit_free on Windows]
&gt; Signed-off-by: Simon McVittie &lt;<a href="mailto:simon.mcvittie&#64;collabora.co.uk">simon.mcvittie&#64;collabora.co.uk</a>&gt;
&gt; 
&gt; ---
&gt; 
&gt; Two changes since <span class="bz_obsolete"><a href="attachment.cgi?id=108853" name="attach_108853" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">Attachment #108853</a> <a href="attachment.cgi?id=108853&amp;action=edit" title="[PATCH 2/2] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span>:
&gt; 
&gt; * what I said in my last comment
&gt; 
&gt; * dbus-sysdeps-util-win.c needs an implementation of _dbus_rlimit_free(),
&gt;   although it can be a trivial stub: it is not actually called, and
&gt;   it would be a bug for it to have a non-NULL argument</span >

This new version looks good, except that we forgot to remove this prototype:

dbus/dbus-sysdeps.h:548:void _dbus_request_file_descriptor_limit (unsigned int limit);

Do you plan to backport the patch to the 1.8 branch? If so, should we use DBUS_SYSTEM_LOG_INFO or backport the _WARNING patch too?</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 14:39:09 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Alban Crequy from <a href="show_bug.cgi?id=85105#c18">comment #18</a>)
<span class="quote">&gt; This new version looks good, except that we forgot to remove this prototype:
&gt; 
&gt; dbus/dbus-sysdeps.h:548:void _dbus_request_file_descriptor_limit (unsigned
&gt; int limit);</span >

Will do.

<span class="quote">&gt; Do you plan to backport the patch to the 1.8 branch? If so, should we use
&gt; DBUS_SYSTEM_LOG_INFO or backport the _WARNING patch too?</span >

I was going to backport the _WARNING patch too (there is no actual backporting involved, it works as-is) but now you mention it, yes we'd be better off with a self-contained patch. We can s/WARNING/INFO/ in 1.9.</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 14:52:22 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=108896" name="attach_108896" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">attachment 108896</a> <a href="attachment.cgi?id=108896&amp;action=edit" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108896'>[review]</a>
[PATCH] Set fd rlimit to 64k for the system dbus-daemon

Restore the original rlimit for activated services.

Bug: <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)"
   href="show_bug.cgi?id=85105">https://bugs.freedesktop.org/show_bug.cgi?id=85105</a>
Reviewed-by: Lennart Poettering
[Alban Crequy: make failure to restore original rlimit non-fatal]
Reviewed-by: Simon McVittie
[Alban Crequy: use new DBUS_SYSTEM_LOG_WARNING; skip if !DBUS_UNIX]
[Simon McVittie: adjust DBUS_UNIX, add stub _dbus_rlimit_free on Windows]
Signed-off-by: Simon McVittie &lt;<a href="mailto:simon.mcvittie&#64;collabora.co.uk">simon.mcvittie&#64;collabora.co.uk</a>&gt;

---

Now self-contained for 1.8.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 14:52:53 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=108897" name="attach_108897" title="[PATCH 2/3 for 1.9] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">attachment 108897</a> <a href="attachment.cgi?id=108897&amp;action=edit" title="[PATCH 2/3 for 1.9] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108897'>[review]</a>
[PATCH 2/3 for 1.9] DBusSystemLogSeverity: add DBUS_SYSTEM_LOG_WARNING

From: Alban Crequy &lt;<a href="mailto:alban.crequy&#64;collabora.co.uk">alban.crequy&#64;collabora.co.uk</a>&gt;</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 14:53:25 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=108898" name="attach_108898" title="[PATCH 3/3 for 1.9] Use DBUS_SYSTEM_LOG_WARNING for failure to alter  fd-limits">attachment 108898</a> <a href="attachment.cgi?id=108898&amp;action=edit" title="[PATCH 3/3 for 1.9] Use DBUS_SYSTEM_LOG_WARNING for failure to alter  fd-limits">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=108898'>[review]</a>
[PATCH 3/3 for 1.9] Use DBUS_SYSTEM_LOG_WARNING for failure to alter  fd-limits</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 15:15:28 UTC
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; [Alban Crequy: use new DBUS_SYSTEM_LOG_WARNING; skip if !DBUS_UNIX]</span >

Alban pointed out that this line is no longer true. I'm going to do a new version of that commit message when I have a CVE ID.</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alban Crequy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-04 15:59:58 UTC
        </span>

      </div>




<pre class="bz_comment_text">The patches in <a href="show_bug.cgi?id=85105#c20">comment #20</a> to <a href="show_bug.cgi?id=85105#c22">comment #22</a> look good.</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-05 14:06:48 UTC
        </span>

      </div>




<pre class="bz_comment_text">Kurt Seifried gave us a CVE ID. Proposed advisory text below.

----

CVE: CVE-2014-7824
Tracked as: <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)"
   href="show_bug.cgi?id=85105">https://bugs.freedesktop.org/show_bug.cgi?id=85105</a>
Impact: local denial of service
Access required: local
Versions believed to be vulnerable: dbus &gt;= 1.3.0
Credit: discovered by Simon McVittie at Collabora Ltd.

D-Bus &lt;<a href="http://www.freedesktop.org/wiki/Software/dbus/">http://www.freedesktop.org/wiki/Software/dbus/</a>&gt; is an
asynchronous inter-process communication system, commonly used
for system services or within a desktop session on Linux and other
operating systems.

The patch issued by the D-Bus maintainers for CVE-2014-3636 was based on
incorrect reasoning, and does not fully prevent the attack described as
&quot;CVE-2014-3636 part A&quot;, which is repeated below. Preventing that attack
requires raising the system dbus-daemon's RLIMIT_NOFILE (ulimit -n) to a
higher value. CVE-2014-7824 has been allocated for this vulnerability.

To avoid propagating that higher limit to activatable system services,
it is desirable to start the system dbus-daemon as root so it can store
its previous limit, raise its limit, drop root privileges (which its
default configuration will do automatically), and restore the previous
limit before launching activatable services. Some operating system
distributions, such as anything using the upstream-supplied systemd
units, start the system dbus-daemon as root already; others, such as
Debian 7, currently start the system dbus-daemon under its less
privileged uid and will need minor modifications to their init scripts.

Attack details (repeating CVE-2014-3636 part A):

By queuing up the maximum allowed number of fds, a malicious sender
could reach the system dbus-daemon's RLIMIT_NOFILE (ulimit -n, typically
1024 on Linux). This would act as a denial of service in two ways:

* new clients would be unable to connect to the dbus-daemon
* when receiving a subsequent message from a non-malicious client that
  contained a fd, dbus-daemon would receive the MSG_CTRUNC flag,
  indicating that the list of fds was truncated; kernel fd-passing APIs
  do not provide any way to recover from that, so dbus-daemon responds
  to MSG_CTRUNC by disconnecting the sender, causing denial of service
  to that sender</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-06 16:51:47 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=109054" name="attach_109054" title="CVE-2014-7824: set fd rlimit to 64k for the system  dbus-daemon">attachment 109054</a> <a href="attachment.cgi?id=109054&amp;action=edit" title="CVE-2014-7824: set fd rlimit to 64k for the system  dbus-daemon">[details]</a></span> <a href='page.cgi?id=splinter.html&amp;bug=85105&amp;attachment=109054'>[review]</a>
CVE-2014-7824: set fd rlimit to 64k for the system  dbus-daemon

This ensures that our rlimit is actually high enough to avoid the
denial of service described in CVE-2014-3636 part A.
CVE-2014-7824 has been allocated for this incomplete fix.

Restore the original rlimit for activated services, to avoid
them getting undesired higher limits.

(Thanks to Alban Crequy for various adjustments which have been
included in this commit.)

Bug: <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - CVE-2014-7824: increase file descriptor limit to avoid DoS (incomplete fix for CVE-2014-3636)"
   href="show_bug.cgi?id=85105">https://bugs.freedesktop.org/show_bug.cgi?id=85105</a>
Reviewed-by: Alban Crequy &lt;<a href="mailto:alban.crequy&#64;collabora.co.uk">alban.crequy&#64;collabora.co.uk</a>&gt;

---

Same content as <span class="bz_obsolete"><a href="attachment.cgi?id=108896" name="attach_108896" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">Attachment #108896</a> <a href="attachment.cgi?id=108896&amp;action=edit" title="[PATCH] Set fd rlimit to 64k for the system dbus-daemon">[details]</a></span>, but a better commit message.</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-10 16:16:05 UTC
        </span>

      </div>




<pre class="bz_comment_text">unembargo</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=85105#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Simon McVittie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-10 17:04:40 UTC
        </span>

      </div>




<pre class="bz_comment_text">Fixed in 1.6.26, 1.8.10, 1.9.2.

Older branches are not supported by the D-Bus maintainers, but distribution maintainers who are still stuck on those versions are invited to use the upstream dbus-1.4, etc., branches to share backported patches.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=85105">Format For Printing</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>


</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>
<p align="center">
  Use of freedesktop.org services, including Bugzilla, is subject to our <a href="https://www.freedesktop.org/wiki/CodeOfConduct/">Code of Conduct</a>. How we collect and use information is described in our <a href="https://www.freedesktop.org/wiki/PrivacyPolicy">Privacy Policy</a>.
</p>
  </body>
</html>