<!DOCTYPE html>
<html lang="en">
  <head>
    <title>755896 &ndash; (CVE-2020-36420, CVE-2021-38614) net-proxy/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/1dee87cdc229fb032852e53a39a3c8b5.css?1635279638" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1635279638"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "755896 – (CVE-2020-36420, CVE-2021-38614) net-proxy\/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)",
                             "show_bug.cgi?id=755896" );
        document.title = "755896 – (CVE-2020-36420, CVE-2021-38614) net-proxy\/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "755896 – (CVE-2020-36420, CVE-2021-38614) net-proxy\/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1635279638"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Gentoo's Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico"><script language="JavaScript" src="extensions/Gentoo/web/gentoo.js"></script>
  </head>

  <body 
        class="bugs-gentoo-org
                 bz_bug
                 bz_status_IN_PROGRESS
                 bz_product_Gentoo_Security
                 bz_component_Vulnerabilities
                 bz_bug_755896 yui-skin-sam">
<div id="gentoo-bar">
	<a href="/" title="Go to the Gentoo Bugzilla homepage" class="home-link">
		<img src="extensions/Gentoo/web/gentoo_org.png" alt="Gentoo Websites Logo" />
	</a>

	<div>
		Go to: 
		<a href="https://www.gentoo.org/">Gentoo Home</a>
		<a href="https://www.gentoo.org/support/documentation/">Documentation</a>
		<a href="https://forums.gentoo.org/">Forums</a>
		<a href="https://www.gentoo.org/get-involved/mailing-lists/">Lists</a>
		<a href="/" class="active">Bugs</a>
		<a href="https://planet.gentoo.org/">Planet</a>
		<a href="https://www.gentoo.org/inside-gentoo/stores/">Store</a>
		<a href="https://wiki.gentoo.org/">Wiki</a>
		<strong><a href="https://www.gentoo.org/downloads/">Get Gentoo!</a></strong>
	</div>
</div>

  <div id="header"><div id="banner">
  </div>

    <div id="titles">
      <span id="title">Gentoo's Bugzilla &ndash; Bug&nbsp;755896</span>

        <span id="subtitle" class="subheader">net-proxy/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)</span>

        <span id="information" class="header_addl_info">Last modified: 2021-08-14 20:24:09 UTC node [gannet]</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi?format=guided">New</a>&ndash;<a href="enter_bug.cgi">[Ex]</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>
  <li><span class="separator">| </span><a href="https://wiki.gentoo.org/wiki/Foundation:Privacy_Policy">Privacy Policy</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_top">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=755896&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=755896" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>


  <li id="forgot_container_top">
    <span class="separator">| </span>
    <a id="forgot_link_top" href="show_bug.cgi?id=755896&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_top')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_top"
          class="mini_forgot bz_default_hidden">
      <label for="login_top">Login:</label>
      <input name="loginname" size="20" id="login_top" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_top" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_top" name="token"
             value="1635619206-N84SFjp_GRZVt58rIT3QkOt5_7xOtGU5rP5-_hMnsj8">
      <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
    </form>
  </li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body"><!--<div style="border: 1px solid #ebccd1; background-color: #f2dede; color: #a94442; padding: 0.4em; margin-bottom: 0.4em;">critical goes here ...</div>-->
<!--<div id="message">
Bugzilla DB migration completed. Please report issues to Infra team via email via infra@gentoo.org or IRC
</div>-->


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2021-08-14 20:24:09">
  <input type="hidden" name="id" value="755896">
  <input type="hidden" name="token" value="1635619206-_IxhmJYAFmbwJiLy2qOo0TMdUaJJWMktETK12oR7QZs">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=755896"><b>Bug&nbsp;755896</b></a> <span id="summary_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2020-36420, CVE-2021-38614</span>)
      - <span id="short_desc_nonedit_display">net-proxy/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>net-proxy/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'net-proxy\/polipo: multiple vulnerabilities (CVE-2020-36420, CVE-2021-38614)' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">IN_PROGRESS
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>CVE-2020-36420, CVE-2021-38614
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Gentoo Security

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Gentoo Security"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Vulnerabilities

  (<a href="buglist.cgi?component=Vulnerabilities&amp;product=Gentoo%20Security&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">All
        Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Normal
       minor<span id="votes_container">
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=755896#vote_755896">vote</a>)
  </span>
      </td>
    </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Gentoo Security</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'security\x40gentoo.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
          <a href="https://www.openwall.com/lists/oss-security/2020/11/18/1"
             rel="noreferrer"><span title="https://www.openwall.com/lists/oss-security/2020/11/18/1">https://www.openwall.com/lists/oss-se...
        </span></a>
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>B3 [glsa?]  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >PMASKED

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2020-11-21 00:23 UTC by <span class="vcard"><span class="fn">John Helmert III</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2021-08-14 20:24 UTC
      (<a href="show_activity.cgi?id=755896">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>4 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="bircoph">bircoph</option>
                <option value="qa">qa</option>
                <option value="sam">sam</option>
                <option value="treecleaner">treecleaner</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 
<tr>
      <th class="field_label "
    id="field_label_cf_stabilisation_atoms">


  <a 
      title="Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_stabilisation_atoms"
  >Package list:</a>

</th>
  <td class="field_value "
      id="field_container_cf_stabilisation_atoms" >
      <div class="uneditable_textarea"></div>

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_runtime_testing_required">


  <a 
      title="Indicate if runtime testing is required for this stabilisation request, or if it is sufficient to stabilised with a build/tests/qa test."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_runtime_testing_required"
  >Runtime testing required:</a>

</th>
  <td class="field_value "
      id="field_container_cf_runtime_testing_required" >---

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>



  <tr class="bz_attach_footer">
    <td colspan="3">
        <a href="attachment.cgi?bugid=755896&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=755896&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1635279621" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Helmert III</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2020-11-21 00:23:28 UTC
        </span>

      </div>




<pre class="bz_comment_text">From $URL:

RFC7233 states [4]:

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
A server that supports range requests MAY ignore or reject a Range
header field that consists of more than two overlapping ranges, or a
set of many small ranges that are not listed in ascending order,
since both are indications of either a broken client or a deliberate
denial-of-service attack (Section 6.1). ...
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Polipo doesn't ignore/reject the malformed header. Instead, it has
an assertion:

    server.c:1473: assert(from &gt;= 0 &amp;&amp; (to &lt; 0 || to &gt; from));

So, a malformed Range header (&quot;Range: bytes=3-2&quot; for example) will
cause an assertion failed.  This error handling allows an attacker
to cause a denial of service.



Polipo is unmaintained, so no patches available.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Conrad Kostecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-13 11:44:09 UTC
        </span>

      </div>




<pre class="bz_comment_text">Upstream project has been marked as archived / read-only.</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Helmert III</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2021-07-14 17:25:57 UTC
        </span>

      </div>




<pre class="bz_comment_text">CCing treecleaner, package is unmaintained upstream</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-14 19:08:15 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=6090311521594e454fd6366e5f453a1993512709">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=6090311521594e454fd6366e5f453a1993512709</a>

commit 6090311521594e454fd6366e5f453a1993512709
Author:     John Helmert III &lt;<a href="mailto:ajak&#64;gentoo.org">ajak&#64;gentoo.org</a>&gt;
AuthorDate: 2021-07-14 18:55:24 +0000
Commit:     John Helmert III &lt;<a href="mailto:ajak&#64;gentoo.org">ajak&#64;gentoo.org</a>&gt;
CommitDate: 2021-07-14 19:05:49 +0000

    package.mask: Last rite net-proxy/polipo
    
    Bug: <a href="https://bugs.gentoo.org/755896">https://bugs.gentoo.org/755896</a>
    Bug: <a href="https://bugs.gentoo.org/781467">https://bugs.gentoo.org/781467</a>
    Signed-off-by: John Helmert III &lt;<a href="mailto:ajak&#64;gentoo.org">ajak&#64;gentoo.org</a>&gt;

 profiles/package.mask | 5 +++++
 1 file changed, 5 insertions(+)</pre>
    </div>

    <div id="c4" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(4, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">NATTkA bot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-29 17:25:17 UTC
        </span>

          <span id="cr4" class="bz_comment_collapse_reason"
             title="NATTkA bot [2021-07-29 17:25:17 UTC]">
            Comment hidden (obsolete)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_4">Package list is empty or all packages have requested keywords.</pre>
    </div>

    <div id="c5" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(5, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">NATTkA bot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-29 17:33:50 UTC
        </span>

          <span id="cr5" class="bz_comment_collapse_reason"
             title="NATTkA bot [2021-07-29 17:33:50 UTC]">
            Comment hidden (obsolete)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_5">Package list is empty or all packages have requested keywords.</pre>
    </div>

    <div id="c6" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(6, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">NATTkA bot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-29 17:41:43 UTC
        </span>

          <span id="cr6" class="bz_comment_collapse_reason"
             title="NATTkA bot [2021-07-29 17:41:43 UTC]">
            Comment hidden (obsolete)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_6">Package list is empty or all packages have requested keywords.</pre>
    </div>

    <div id="c7" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(7, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">NATTkA bot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-29 17:49:52 UTC
        </span>

          <span id="cr7" class="bz_comment_collapse_reason"
             title="NATTkA bot [2021-07-29 17:49:52 UTC]">
            Comment hidden (obsolete)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_7">Package list is empty or all packages have requested keywords.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">NATTkA bot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-07-29 18:05:46 UTC
        </span>

      </div>




<pre class="bz_comment_text">Package list is empty or all packages have requested keywords.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-11 14:55:05 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=50377a1996dc8e19e54e1d7322733eff93b90938">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=50377a1996dc8e19e54e1d7322733eff93b90938</a>

commit 50377a1996dc8e19e54e1d7322733eff93b90938
Author:     Andrew Savchenko &lt;<a href="mailto:bircoph&#64;gentoo.org">bircoph&#64;gentoo.org</a>&gt;
AuthorDate: 2021-08-11 14:51:46 +0000
Commit:     Andrew Savchenko &lt;<a href="mailto:bircoph&#64;gentoo.org">bircoph&#64;gentoo.org</a>&gt;
CommitDate: 2021-08-11 14:54:55 +0000

    profiles: apply net-proxy/polipo mask only to vulnerable versions
    
    Bug: <a href="https://bugs.gentoo.org/755896">https://bugs.gentoo.org/755896</a>
    Bug: <a href="https://bugs.gentoo.org/781467">https://bugs.gentoo.org/781467</a>
    
    Signed-off-by: Andrew Savchenko &lt;<a href="mailto:bircoph&#64;gentoo.org">bircoph&#64;gentoo.org</a>&gt;

 profiles/package.mask | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=a6d841717c0d8a3cd1c56a88f0bd067551762384">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=a6d841717c0d8a3cd1c56a88f0bd067551762384</a>

commit a6d841717c0d8a3cd1c56a88f0bd067551762384
Author:     Andrew Savchenko &lt;<a href="mailto:bircoph&#64;gentoo.org">bircoph&#64;gentoo.org</a>&gt;
AuthorDate: 2021-08-11 14:47:20 +0000
Commit:     Andrew Savchenko &lt;<a href="mailto:bircoph&#64;gentoo.org">bircoph&#64;gentoo.org</a>&gt;
CommitDate: 2021-08-11 14:54:51 +0000

    net-proxy/polipo: fix CVE-2020-36420
    
    Discard packet with invalid range field instead of raising assert, this
    conforms to RFC7233. Return appropriate error message.
    
    Bug: <a href="https://bugs.gentoo.org/755896">https://bugs.gentoo.org/755896</a>
    Package-Manager: Portage-3.0.20, Repoman-3.0.3
    Signed-off-by: Andrew Savchenko &lt;<a href="mailto:bircoph&#64;gentoo.org">bircoph&#64;gentoo.org</a>&gt;

 .../polipo/files/polipo-1.1.1-cve-2020-36420.patch | 26 +++++++++
 net-proxy/polipo/polipo-1.1.1-r5.ebuild            | 61 ++++++++++++++++++++++
 net-proxy/polipo/polipo-9999.ebuild                |  7 +--
 3 files changed, 91 insertions(+), 3 deletions(-)</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrew Savchenko</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-11 14:58:49 UTC
        </span>

      </div>




<pre class="bz_comment_text">I fixed this CVE: quite trivial issue with minor impact anyway. Package mask is changed to apply to vulnerable versions only. No need to treeclean this package.

I'm not sure if there is a need to stabilize this package.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2021-08-11 21:14:06 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Andrew Savchenko from <a href="show_bug.cgi?id=755896#c10">comment #10</a>)
<span class="quote">&gt; I fixed this CVE: quite trivial issue with minor impact anyway. Package mask
&gt; is changed to apply to vulnerable versions only. No need to treeclean this
&gt; package.
&gt; </span >

It would've been appreciated if you could've given us a heads up / let us
in security&#64; and treecleaner&#64; know about your intentions.

This package isn't maintained upstream any longer (since 2016!)
and after doing some tests, ajak and I have reproduced another heap buffer
overflow *with* your patch.

I don't feel that adding piecework patches now will will fix the myriad issues
that seem present, given that ASAN blows up pretty quickly with *valid*
input (using an adapted version of the Perl script from the oss-security thread).

If you want to maintain a full fork, that's your perogative, but it will
require more than a few quick patches to get it up to any sort
of safe standard. I don't know if you want to make such a large
time commitment.

We suspect there's likely to be other issues given how simple
this one was, and its utility is rather diminished in 2021
anyway given the use of HTTPS. AFAIK, you may be able to
use Squid for this instead - which, while heavier, is
a lot more battle-hardened.

<span class="quote">&gt; I'm not sure if there is a need to stabilize this package.</span >

The previous version (1.1.1-r4, before your patch) in Gentoo has stable keywords
for both amd64 and x86, so stabilisation would be required if we were keeping
the package to protect users.

I'd also note that while you've unmasked the package, it still has QA issues:
* <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - net-proxy/polipo: migrate to GLEP 81"
   href="show_bug.cgi?id=781467">bug 781467</a> (GLEP 81 support) has not been resolved;
* seems to use DEPEND incorrectly (texinfo should be BDEPEND afaik?);
* unusual conditional installation of cron files based on USE=systemd (although
  there may be a few other cases of this in tree);
* still retains the live ebuild (even though upstream's repository is archived).

So, with all that said, I'm going to restore the mask. I don't think it's
in a suitable state for users and I don't see the issue as resolved.</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-11 21:14:55 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8dac54528398bcd32c75fedc037bbe388b192e1f">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8dac54528398bcd32c75fedc037bbe388b192e1f</a>

commit 8dac54528398bcd32c75fedc037bbe388b192e1f
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2021-08-11 21:14:20 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2021-08-11 21:14:46 +0000

    Revert &quot;profiles: apply net-proxy/polipo mask only to vulnerable versions&quot;
    
    See bug for explanation; package is still vulnerable.
    
    This reverts commit 50377a1996dc8e19e54e1d7322733eff93b90938.
    
    Bug: <a href="https://bugs.gentoo.org/755896">https://bugs.gentoo.org/755896</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 profiles/package.mask | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrew Savchenko</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-12 19:35:21 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Sam James from <a href="show_bug.cgi?id=755896#c11">comment #11</a>)
<span class="quote">&gt; (In reply to Andrew Savchenko from <a href="show_bug.cgi?id=755896#c10">comment #10</a>)
&gt; &gt; I fixed this CVE: quite trivial issue with minor impact anyway. Package mask
&gt; &gt; is changed to apply to vulnerable versions only. No need to treeclean this
&gt; &gt; package.
&gt; &gt; 
&gt; 
&gt; It would've been appreciated if you could've given us a heads up / let us
&gt; in security&#64; and treecleaner&#64; know about your intentions.</span >

I made so by stating that CVE is trivial:
<a href="https://bugs.gentoo.org/781467#c4">https://bugs.gentoo.org/781467#c4</a>
And fixing it within reasonable time before treecleaning deadline.

<span class="quote">&gt; This package isn't maintained upstream any longer (since 2016!)</span >

Some parts of kernel or glibc are not changed since 90-th. So if code works, this is fine and not an argument for packages mask or removal by itself.

<span class="quote">&gt; and after doing some tests, ajak and I have reproduced another heap buffer
&gt; overflow *with* your patch.</span >

What do you mean by *another*? CVE-2020-36420 is NOT a buffer overflow! Please read this CVE or my patch (or both). This CVE is about an assert working on invalid packet header field instead of discarding or ignoring such packet. As any assert it leads to controlled program termination, there are no overflows here. I can hardly call this vulnerability, but formally it may be called so of course: if local user decides to kill his own local polipo instance, they can do it this way.

If you have found another problem, please report it separately and register another CVE.

<span class="quote">&gt; I don't feel that adding piecework patches now will will fix the myriad
&gt; issues
&gt; that seem present, given that ASAN blows up pretty quickly with *valid*
&gt; input (using an adapted version of the Perl script from the oss-security
&gt; thread).</span >

Asan will blow up on half of the portage tree in one or other configuration. Furthermore asan is known to occasionally produce false or unrelated warnings.

<span class="quote">&gt; If you want to maintain a full fork, that's your perogative, but it will
&gt; require more than a few quick patches to get it up to any sort
&gt; of safe standard. I don't know if you want to make such a large
&gt; time commitment.</span >

Software doesn't need to be 100% perfect and 100% compatible with all possible standards in order to be usable.

<span class="quote">&gt; We suspect there's likely to be other issues given how simple
&gt; this one was, and its utility is rather diminished in 2021
&gt; anyway given the use of HTTPS.</span >

Unless someone uses it together with privoxy with https inspection.

<span class="quote">&gt; AFAIK, you may be able to
&gt; use Squid for this instead - which, while heavier, is
&gt; a lot more battle-hardened.</span >

This is not just question of being heavier (though such argument is valid concern by itself). In my opinion the Squid is less secure, because of much larger code size. Compare number of CVEs reported for squid and polipo over 10 years or so. This means that right now Squid is vulnerable, but these vulnerabilities are not yet disclosed or even reported, this will be done later with timeflow. The same is valid for polipo of course. But smaller code mean smaller attack surface and smaller number of mistakes. Of course lack of active maintenance hampers polipo security, but it is still at reasonable levels IMO.
 
<span class="quote">&gt; &gt; I'm not sure if there is a need to stabilize this package.
&gt; 
&gt; The previous version (1.1.1-r4, before your patch) in Gentoo has stable
&gt; keywords
&gt; for both amd64 and x86, so stabilisation would be required if we were keeping
&gt; the package to protect users.</span >

I'm fine with this. If package would not be masked, I would proceed this way without questions. Since it is already masked I decided that maybe stable version is not needed. I don't object to stable version to be available, of course.

<span class="quote">&gt; I'd also note that while you've unmasked the package, it still has QA issues:</span >

Let me note that this is security bug, not QA bug. Let's not mix different issues in the single bug. While unfixed CVE is valid reason for PMASK, minor QA issues are not. But CVE-2020-36420 is already fixed, so no justified reason for PMASK left.

<span class="quote">&gt; * <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - net-proxy/polipo: migrate to GLEP 81"
   href="show_bug.cgi?id=781467">bug 781467</a> (GLEP 81 support) has not been resolved;</span >

It was not resolved because of proposed commits being reverted due to this treecleaning. So we have chicken and the egg problem here. To unravel it I fixed CVE and propesed original author to reapply GLEP 81 changes, adding myself for fallback if there will be no activity or interest. See <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - net-proxy/polipo: migrate to GLEP 81"
   href="show_bug.cgi?id=781467">bug 781467</a> 

<span class="quote">&gt; * seems to use DEPEND incorrectly (texinfo should be BDEPEND afaik?);</span >

Yes, this is mistaken both myself and repoman full check overlooked. I'll fix it, but this is not a security issue.

<span class="quote">&gt; * unusual conditional installation of cron files based on USE=systemd
&gt; (although
&gt;   there may be a few other cases of this in tree);</span >

As far as I remember there was no need or requests for such cron job for systemd users, . I don't use systemd myself even on test setups (and will not recommend other people to use it), so I provide only third-party systemd support in my packages: either upstream, or user, or other dev contributed as long as they don't break non-systemd setups.

<span class="quote">&gt; * still retains the live ebuild (even though upstream's repository is
&gt; archived).</span >

It can be dropped or snapsoht can be made, this is not a problem at all.

<span class="quote">&gt; So, with all that said, I'm going to restore the mask. I don't think it's
&gt; in a suitable state for users and I don't see the issue as resolved.</span >

The main subject of this discussion — CVE-2020-36420 — is fixed. Anyone can verify this by running test perl script provided by CVE reporter: <a href="https://www.openwall.com/lists/oss-security/2020/11/18/1">https://www.openwall.com/lists/oss-security/2020/11/18/1</a>
on polipo-1.1.1-r5.

There are no open CVEs left for this package and hereby no reason for security team to mask package and ask for its removal. Please revert your latest commit with full PMASK.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Seifert</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-12 19:54:48 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Andrew Savchenko from <a href="show_bug.cgi?id=755896#c13">comment #13</a>)
<span class="quote">&gt; (In reply to Sam James from <a href="show_bug.cgi?id=755896#c11">comment #11</a>)
&gt; &gt; (In reply to Andrew Savchenko from <a href="show_bug.cgi?id=755896#c10">comment #10</a>)
&gt; &gt; &gt; I fixed this CVE: quite trivial issue with minor impact anyway. Package mask
&gt; &gt; &gt; is changed to apply to vulnerable versions only. No need to treeclean this
&gt; &gt; &gt; package.
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; It would've been appreciated if you could've given us a heads up / let us
&gt; &gt; in security&#64; and treecleaner&#64; know about your intentions.
&gt; 
&gt; I made so by stating that CVE is trivial:
&gt; <a href="https://bugs.gentoo.org/781467#c4">https://bugs.gentoo.org/781467#c4</a>
&gt; And fixing it within reasonable time before treecleaning deadline.
&gt; 
&gt; &gt; This package isn't maintained upstream any longer (since 2016!)
&gt; 
&gt; Some parts of kernel or glibc are not changed since 90-th. So if code works,
&gt; this is fine and not an argument for packages mask or removal by itself.
&gt; 
&gt; &gt; and after doing some tests, ajak and I have reproduced another heap buffer
&gt; &gt; overflow *with* your patch.
&gt; 
&gt; What do you mean by *another*? CVE-2020-36420 is NOT a buffer overflow!
&gt; Please read this CVE or my patch (or both). This CVE is about an assert
&gt; working on invalid packet header field instead of discarding or ignoring
&gt; such packet. As any assert it leads to controlled program termination, there
&gt; are no overflows here. I can hardly call this vulnerability, but formally it
&gt; may be called so of course: if local user decides to kill his own local
&gt; polipo instance, they can do it this way.
&gt; 
&gt; If you have found another problem, please report it separately and register
&gt; another CVE.
&gt; 
&gt; &gt; I don't feel that adding piecework patches now will will fix the myriad
&gt; &gt; issues
&gt; &gt; that seem present, given that ASAN blows up pretty quickly with *valid*
&gt; &gt; input (using an adapted version of the Perl script from the oss-security
&gt; &gt; thread).
&gt; 
&gt; Asan will blow up on half of the portage tree in one or other configuration.
&gt; Furthermore asan is known to occasionally produce false or unrelated
&gt; warnings.
&gt; 
&gt; &gt; If you want to maintain a full fork, that's your perogative, but it will
&gt; &gt; require more than a few quick patches to get it up to any sort
&gt; &gt; of safe standard. I don't know if you want to make such a large
&gt; &gt; time commitment.
&gt; 
&gt; Software doesn't need to be 100% perfect and 100% compatible with all
&gt; possible standards in order to be usable.
&gt; 
&gt; &gt; We suspect there's likely to be other issues given how simple
&gt; &gt; this one was, and its utility is rather diminished in 2021
&gt; &gt; anyway given the use of HTTPS.
&gt; 
&gt; Unless someone uses it together with privoxy with https inspection.
&gt; 
&gt; &gt; AFAIK, you may be able to
&gt; &gt; use Squid for this instead - which, while heavier, is
&gt; &gt; a lot more battle-hardened.
&gt; 
&gt; This is not just question of being heavier (though such argument is valid
&gt; concern by itself). In my opinion the Squid is less secure, because of much
&gt; larger code size. Compare number of CVEs reported for squid and polipo over
&gt; 10 years or so. This means that right now Squid is vulnerable, but these
&gt; vulnerabilities are not yet disclosed or even reported, this will be done
&gt; later with timeflow. The same is valid for polipo of course. But smaller
&gt; code mean smaller attack surface and smaller number of mistakes. Of course
&gt; lack of active maintenance hampers polipo security, but it is still at
&gt; reasonable levels IMO.
&gt;  
&gt; &gt; &gt; I'm not sure if there is a need to stabilize this package.
&gt; &gt; 
&gt; &gt; The previous version (1.1.1-r4, before your patch) in Gentoo has stable
&gt; &gt; keywords
&gt; &gt; for both amd64 and x86, so stabilisation would be required if we were keeping
&gt; &gt; the package to protect users.
&gt; 
&gt; I'm fine with this. If package would not be masked, I would proceed this way
&gt; without questions. Since it is already masked I decided that maybe stable
&gt; version is not needed. I don't object to stable version to be available, of
&gt; course.
&gt; 
&gt; &gt; I'd also note that while you've unmasked the package, it still has QA issues:
&gt; 
&gt; Let me note that this is security bug, not QA bug. Let's not mix different
&gt; issues in the single bug. While unfixed CVE is valid reason for PMASK, minor
&gt; QA issues are not. But CVE-2020-36420 is already fixed, so no justified
&gt; reason for PMASK left.
&gt; 
&gt; &gt; * <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - net-proxy/polipo: migrate to GLEP 81"
   href="show_bug.cgi?id=781467">bug 781467</a> (GLEP 81 support) has not been resolved;
&gt; 
&gt; It was not resolved because of proposed commits being reverted due to this
&gt; treecleaning. So we have chicken and the egg problem here. To unravel it I
&gt; fixed CVE and propesed original author to reapply GLEP 81 changes, adding
&gt; myself for fallback if there will be no activity or interest. See <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - net-proxy/polipo: migrate to GLEP 81"
   href="show_bug.cgi?id=781467">bug 781467</a> 
&gt; 
&gt; &gt; * seems to use DEPEND incorrectly (texinfo should be BDEPEND afaik?);
&gt; 
&gt; Yes, this is mistaken both myself and repoman full check overlooked. I'll
&gt; fix it, but this is not a security issue.
&gt; 
&gt; &gt; * unusual conditional installation of cron files based on USE=systemd
&gt; &gt; (although
&gt; &gt;   there may be a few other cases of this in tree);
&gt; 
&gt; As far as I remember there was no need or requests for such cron job for
&gt; systemd users, . I don't use systemd myself even on test setups (and will
&gt; not recommend other people to use it), so I provide only third-party systemd
&gt; support in my packages: either upstream, or user, or other dev contributed
&gt; as long as they don't break non-systemd setups.
&gt; 
&gt; &gt; * still retains the live ebuild (even though upstream's repository is
&gt; &gt; archived).
&gt; 
&gt; It can be dropped or snapsoht can be made, this is not a problem at all.
&gt; 
&gt; &gt; So, with all that said, I'm going to restore the mask. I don't think it's
&gt; &gt; in a suitable state for users and I don't see the issue as resolved.
&gt; 
&gt; The main subject of this discussion — CVE-2020-36420 — is fixed. Anyone can
&gt; verify this by running test perl script provided by CVE reporter:
&gt; <a href="https://www.openwall.com/lists/oss-security/2020/11/18/1">https://www.openwall.com/lists/oss-security/2020/11/18/1</a>
&gt; on polipo-1.1.1-r5.
&gt; 
&gt; There are no open CVEs left for this package and hereby no reason for
&gt; security team to mask package and ask for its removal. Please revert your
&gt; latest commit with full PMASK.</span >

I have looked at this package and spoken to members of security. This package will not be unmasked.</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andrew Savchenko</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-12 21:01:22 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to David Seifert from <a href="show_bug.cgi?id=755896#c14">comment #14</a>)
<span class="quote">&gt; I have looked at this package and spoken to members of security. This
&gt; package will not be unmasked.</span >

Explain your reasons please from security point of view.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Helmert III</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2021-08-12 21:05:47 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Andrew Savchenko from <a href="show_bug.cgi?id=755896#c13">comment #13</a>)
<span class="quote">&gt; (In reply to Sam James from <a href="show_bug.cgi?id=755896#c11">comment #11</a>)
&gt; &gt; (In reply to Andrew Savchenko from <a href="show_bug.cgi?id=755896#c10">comment #10</a>)
&gt; &gt; &gt; I fixed this CVE: quite trivial issue with minor impact anyway. Package mask
&gt; &gt; &gt; is changed to apply to vulnerable versions only. No need to treeclean this
&gt; &gt; &gt; package.
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; It would've been appreciated if you could've given us a heads up / let us
&gt; &gt; in security&#64; and treecleaner&#64; know about your intentions.
&gt; 
&gt; I made so by stating that CVE is trivial:
&gt; <a href="https://bugs.gentoo.org/781467#c4">https://bugs.gentoo.org/781467#c4</a>
&gt; And fixing it within reasonable time before treecleaning deadline.
&gt; 
&gt; &gt; This package isn't maintained upstream any longer (since 2016!)
&gt; 
&gt; Some parts of kernel or glibc are not changed since 90-th. So if code works,
&gt; this is fine and not an argument for packages mask or removal by itself.
&gt; 
&gt; &gt; and after doing some tests, ajak and I have reproduced another heap buffer
&gt; &gt; overflow *with* your patch.
&gt; 
&gt; What do you mean by *another*? CVE-2020-36420 is NOT a buffer overflow!
&gt; Please read this CVE or my patch (or both). This CVE is about an assert
&gt; working on invalid packet header field instead of discarding or ignoring
&gt; such packet. As any assert it leads to controlled program termination, there
&gt; are no overflows here. I can hardly call this vulnerability, but formally it
&gt; may be called so of course: if local user decides to kill his own local
&gt; polipo instance, they can do it this way.
&gt; 
&gt; If you have found another problem, please report it separately and register
&gt; another CVE.</span >

Sure. Requested. It will be added to this bug, and will be another reason to remove the package, and likely another reason for other distributions to start to remove the package.

<span class="quote">&gt; &gt; I don't feel that adding piecework patches now will will fix the myriad
&gt; &gt; issues
&gt; &gt; that seem present, given that ASAN blows up pretty quickly with *valid*
&gt; &gt; input (using an adapted version of the Perl script from the oss-security
&gt; &gt; thread).
&gt; 
&gt; Asan will blow up on half of the portage tree in one or other configuration.
&gt; Furthermore asan is known to occasionally produce false or unrelated
&gt; warnings.</span >

Is this one invalid?

<span class="quote">&gt; &gt; If you want to maintain a full fork, that's your perogative, but it will
&gt; &gt; require more than a few quick patches to get it up to any sort
&gt; &gt; of safe standard. I don't know if you want to make such a large
&gt; &gt; time commitment.
&gt; 
&gt; Software doesn't need to be 100% perfect and 100% compatible with all
&gt; possible standards in order to be usable.</span >

I think it's obvious why we should try to avoid shipping blatantly vulnerable packages.

<span class="quote">&gt; [snip]</span >
&gt;
<span class="quote">&gt; The main subject of this discussion — CVE-2020-36420 — is fixed. Anyone can
&gt; verify this by running test perl script provided by CVE reporter:
&gt; <a href="https://www.openwall.com/lists/oss-security/2020/11/18/1">https://www.openwall.com/lists/oss-security/2020/11/18/1</a>
&gt; on polipo-1.1.1-r5.
&gt; 
&gt; There are no open CVEs left for this package and hereby no reason for
&gt; security team to mask package and ask for its removal. Please revert your
&gt; latest commit with full PMASK.</span >

CVEs don't equate to vulnerabilities. There's an obvious heap overflow here that multiple people have reproduced. The fact that this vulnerability doesn't have a CVE doesn't mean it doesn't exist.

You can reproduce by modifying the Perl script to send a valid Range header.</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2021-08-14 19:13:04 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=58902da07474481bbbe106f55128e25fd9e5d1fa">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=58902da07474481bbbe106f55128e25fd9e5d1fa</a>

commit 58902da07474481bbbe106f55128e25fd9e5d1fa
Author:     Jakov Smolic &lt;<a href="mailto:jakov.smolic&#64;sartura.hr">jakov.smolic&#64;sartura.hr</a>&gt;
AuthorDate: 2021-08-14 19:12:29 +0000
Commit:     David Seifert &lt;<a href="mailto:soap&#64;gentoo.org">soap&#64;gentoo.org</a>&gt;
CommitDate: 2021-08-14 19:12:29 +0000

    net-proxy/polipo: Remove last-rited pkg
    
    Closes: <a href="https://bugs.gentoo.org/781467">https://bugs.gentoo.org/781467</a>
    Bug: <a href="https://bugs.gentoo.org/755896">https://bugs.gentoo.org/755896</a>
    Signed-off-by: Jakov Smolic &lt;<a href="mailto:jakov.smolic&#64;sartura.hr">jakov.smolic&#64;sartura.hr</a>&gt;
    Signed-off-by: David Seifert &lt;<a href="mailto:soap&#64;gentoo.org">soap&#64;gentoo.org</a>&gt;

 net-proxy/polipo/Manifest                          |  1 -
 net-proxy/polipo/files/config                      |  8 ---
 .../polipo/files/polipo-1.1.1-cve-2020-36420.patch | 26 ---------
 net-proxy/polipo/files/polipo.crond-2              | 22 --------
 net-proxy/polipo/files/polipo.initd-5              | 65 ----------------------
 net-proxy/polipo/files/polipo_at.service           | 11 ----
 net-proxy/polipo/metadata.xml                      |  7 ---
 net-proxy/polipo/polipo-1.1.1-r4.ebuild            | 60 --------------------
 net-proxy/polipo/polipo-1.1.1-r5.ebuild            | 61 --------------------
 net-proxy/polipo/polipo-9999.ebuild                | 61 --------------------
 profiles/package.mask                              |  5 --
 11 files changed, 327 deletions(-)</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=755896">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=755896">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=755896">Clone This Bug</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=755896&product=Gentoo%20Security">Clone In The Same 
                        Product</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi?format=guided">New</a>&ndash;<a href="enter_bug.cgi">[Ex]</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>
  <li><span class="separator">| </span><a href="https://wiki.gentoo.org/wiki/Foundation:Privacy_Policy">Privacy Policy</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_bottom">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=755896&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=755896" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>


  <li id="forgot_container_bottom">
    <span class="separator">| </span>
    <a id="forgot_link_bottom" href="show_bug.cgi?id=755896&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_bottom')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_bottom"
          class="mini_forgot bz_default_hidden">
      <label for="login_bottom">Login:</label>
      <input name="loginname" size="20" id="login_bottom" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_bottom" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_bottom" name="token"
             value="1635619206-N84SFjp_GRZVt58rIT3QkOt5_7xOtGU5rP5-_hMnsj8">
      <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
    </form>
  </li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>