<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1597154 “ecryptfs-setup-swap leaves swap unencrypted with G...” : Bugs : eCryptfs</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1597154" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1597154/bug.atom" title="Bug 1597154 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="CVE Request: http://openwall.com/lists/oss-security/2016/07/13/2


When GPT swap partitions are located on NVMe or MMC drives, ecryptfs-setup-swap fails to mark these swap partitions as &quot;no-auto&quot;.

As a consequence, when using encrypted home directory with an NVMe or MMC drive, the swap is left unencrypted. There's also a usability issue in that users are erroneously prompted to enter a pass-phrase to unlock their swap partition at boot.

I have a patch that I'll propose for merging shortly.
..." />
      <meta property="og:description" content="CVE Request: http://openwall.com/lists/oss-security/2016/07/13/2


When GPT swap partitions are located on NVMe or MMC drives, ecryptfs-setup-swap fails to mark these swap partitions as &quot;no-auto&quot;.

As a consequence, when using encrypted home directory with an NVMe or MMC drive, the swap is left unencrypted. There's also a usability issue in that users are erroneously prompted to enter a pass-phrase to unlock their swap partition at boot.

I have a patch that I'll propose for merging shortly.
..." />
    

    
    
      <meta property="og:title" content="Bug #1597154 “ecryptfs-setup-swap leaves swap unencrypted with G...” : Bugs : eCryptfs" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1597154" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["a11y", "appstream", "bionic", "bisect-done", "bitesize", "cherry-pick", "community-security", "desktop-file", "disco", "dist-upgrade", "focal", "ftbfs", "groovy", "hirsute", "hw-specific", "impish", "jammy", "kernel", "kernel-bug", "manpage", "metabug", "multiarch", "needs-bisect", "needs-design", "needs-packaging", "needs-reassignment", "package-conflict", "packaging", "patch", "patch-accepted-debian", "patch-accepted-upstream", "patch-forwarded-debian", "patch-forwarded-upstream", "patch-needswork", "patch-rejected", "patch-rejected-debian", "patch-rejected-upstream", "performing-bisect", "py2-removal", "qt4-removal", "regression-proposed", "regression-release", "regression-update", "string-fix", "suspend-resume", "systemd-boot", "testcase", "touch", "unmetdeps", "upgrade-software-version", "verification-done-bionic", "verification-done-focal", "verification-done-groovy", "verification-done-hirsute", "verification-done-impish", "verification-done-xenial", "verification-failed-bionic", "verification-failed-groovy", "verification-failed-impish", "verification-failed-xenial", "verification-needed-bionic", "verification-needed-focal", "verification-needed-groovy", "verification-needed-hirsute", "verification-needed-impish", "verification-needed-trusty", "verification-needed-xenial", "wayland", "xenial"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/ecryptfs"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/88108375/ecryptfs_64b.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/ecryptfs">eCryptfs</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/ecryptfs">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/ecryptfs">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/ecryptfs">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/ecryptfs">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/ecryptfs">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/ecryptfs">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning + NVMe/MMC drives
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1597154 reported by
      <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose</a>
      <time title="2016-06-29 01:21:32 UTC" datetime="2016-06-29T01:21:32.652263+00:00">on 2016-06-29</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">30</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 6 people</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr id="tasksummary2097246">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/system76/+bug/1597154/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2097246">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/system76">System76</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/system76/+bug/1597154/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/system76/+bug/1597154/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2097246">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~jderose">Jason Gerard DeRose</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2097246">
     <td colspan="7"><form action="/system76/+bug/1597154/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/system76">System76</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-06-29 01:37:15 UTC" datetime="2016-06-29T01:37:15.099262+00:00">2016-06-29</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2016-06-29 01:37:24 UTC" datetime="2016-06-29T01:37:24.396406+00:00">2016-06-29</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2016-06-29 01:37:43 UTC" datetime="2016-06-29T01:37:43.167426+00:00">2016-06-29</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2016-06-29 01:37:24 UTC" datetime="2016-06-29T01:37:24.396406+00:00">2016-06-29</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2016-07-14 16:10:23 UTC" datetime="2016-07-14T16:10:23.561497+00:00">2016-07-14</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="system76.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="system76.target.option.package" name="system76.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="system76.target.distribution" name="system76.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="system76.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="system76.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="system76.target.package"
                         name="system76.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;system76.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('system76.target.package');
              var select_menu = Y.DOM.byId('system76.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-system76-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "system76.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-system76-target-package", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-system76-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="system76.target.option.product" name="system76.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="system76" id="system76.target.product"
                         name="system76.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;system76.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('system76.target.product');
              var select_menu = Y.DOM.byId('system76.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-system76-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "system76.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-system76-target-product", "selected_value": "system76", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-system76-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="system76.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="system76.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="system76.status" name="system76.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="system76.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="system76.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="system76.assignee.assign_to_me" name="system76.assignee.option" value="system76.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="system76.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="system76.assignee.assigned_to" name="system76.assignee.option" value="system76.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="system76.assignee.assigned_to">
              Jason Gerard DeRose (jderose)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="system76.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="system76.comment_on_change" name="system76.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr class="highlight" id="tasksummary2097242">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2097242">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ecryptfs">eCryptfs</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+editstatus" style="float: left" class="value statusFIXCOMMITTED">Fix Committed</a>
          <a href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2097242">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~jderose">Jason Gerard DeRose</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2097242">
     <td colspan="7"><form action="/ecryptfs/+bug/1597154/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ecryptfs">eCryptfs</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-06-29 01:21:32 UTC" datetime="2016-06-29T01:21:32.652263+00:00">2016-06-29</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2016-07-02 00:27:24 UTC" datetime="2016-07-02T00:27:24.666406+00:00">2016-07-02</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2016-06-29 01:21:49 UTC" datetime="2016-06-29T01:21:49.322506+00:00">2016-06-29</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2016-07-07 00:33:15 UTC" datetime="2016-07-07T00:33:15.113943+00:00">2016-07-07</time>
      </td>
    </tr>
    
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ecryptfs.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ecryptfs.target.option.package" name="ecryptfs.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ecryptfs.target.distribution" name="ecryptfs.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ecryptfs.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ecryptfs.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ecryptfs.target.package"
                         name="ecryptfs.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ecryptfs.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ecryptfs.target.package');
              var select_menu = Y.DOM.byId('ecryptfs.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ecryptfs-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "ecryptfs.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-ecryptfs-target-package", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-ecryptfs-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ecryptfs.target.option.product" name="ecryptfs.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ecryptfs" id="ecryptfs.target.product"
                         name="ecryptfs.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ecryptfs.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ecryptfs.target.product');
              var select_menu = Y.DOM.byId('ecryptfs.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ecryptfs-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "ecryptfs.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-ecryptfs-target-product", "selected_value": "ecryptfs", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-ecryptfs-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ecryptfs.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ecryptfs.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ecryptfs.status" name="ecryptfs.status" size="1" >
<option selected="selected" value="Fix Committed">Fix Committed</option>
</select>
</div>
<input name="ecryptfs.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ecryptfs.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ecryptfs.assignee.assign_to_me" name="ecryptfs.assignee.option" value="ecryptfs.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ecryptfs.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ecryptfs.assignee.assigned_to" name="ecryptfs.assignee.option" value="ecryptfs.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ecryptfs.assignee.assigned_to">
              Jason Gerard DeRose (jderose)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ecryptfs.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ecryptfs.comment_on_change" name="ecryptfs.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary2105506">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ubuntu/+source/ecryptfs-utils/+bug/1597154/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2105506">
        <span class="yui3-activator-data-box">
            <a class="sprite package-source" href="https://bugs.launchpad.net/ubuntu/+source/ecryptfs-utils" title="Latest release: 111-5ubuntu1, uploaded to universe on 2020-11-23 11:11:07.828228+00:00 by Dimitri John Ledkov (xnox), maintained by Ubuntu Developers (ubuntu-devel-discuss-lists)">ecryptfs-utils (Ubuntu)</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ubuntu/+source/ecryptfs-utils/+bug/1597154/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ubuntu/+source/ecryptfs-utils/+bug/1597154/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2105506">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~tyhicks">Tyler Hicks</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2105506">
     <td colspan="7"><form action="/ubuntu/+source/ecryptfs-utils/+bug/1597154/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ubuntu/+source/ecryptfs-utils">ecryptfs-utils (Ubuntu)</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-07-14 16:43:31 UTC" datetime="2016-07-14T16:43:31.599407+00:00">2016-07-14</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2016-07-14 16:43:51 UTC" datetime="2016-07-14T16:43:51.800570+00:00">2016-07-14</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2016-07-14 16:43:51 UTC" datetime="2016-07-14T16:43:51.802159+00:00">2016-07-14</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2016-07-14 16:43:51 UTC" datetime="2016-07-14T16:43:51.800570+00:00">2016-07-14</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2016-07-14 16:43:51 UTC" datetime="2016-07-14T16:43:51.800570+00:00">2016-07-14</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ubuntu_ecryptfs-utils.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ubuntu_ecryptfs-utils.target.option.package" name="ubuntu_ecryptfs-utils.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ubuntu_ecryptfs-utils.target.distribution" name="ubuntu_ecryptfs-utils.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ubuntu_ecryptfs-utils.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ubuntu_ecryptfs-utils.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="ecryptfs-utils" id="ubuntu_ecryptfs-utils.target.package"
                         name="ubuntu_ecryptfs-utils.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_ecryptfs-utils.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_ecryptfs-utils.target.package');
              var select_menu = Y.DOM.byId('ubuntu_ecryptfs-utils.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_ecryptfs-utils-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "ubuntu_ecryptfs-utils.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-ubuntu_ecryptfs-utils-target-package", "selected_value": "ecryptfs-utils", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-ubuntu_ecryptfs-utils-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" id="ubuntu_ecryptfs-utils.target.option.product" name="ubuntu_ecryptfs-utils.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ubuntu_ecryptfs-utils.target.product"
                         name="ubuntu_ecryptfs-utils.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_ecryptfs-utils.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_ecryptfs-utils.target.product');
              var select_menu = Y.DOM.byId('ubuntu_ecryptfs-utils.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_ecryptfs-utils-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "ubuntu_ecryptfs-utils.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-ubuntu_ecryptfs-utils-target-product", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-ubuntu_ecryptfs-utils-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_ecryptfs-utils.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ubuntu_ecryptfs-utils.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ubuntu_ecryptfs-utils.status" name="ubuntu_ecryptfs-utils.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ubuntu_ecryptfs-utils.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_ecryptfs-utils.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ubuntu_ecryptfs-utils.assignee.assign_to_me" name="ubuntu_ecryptfs-utils.assignee.option" value="ubuntu_ecryptfs-utils.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_ecryptfs-utils.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ubuntu_ecryptfs-utils.assignee.assigned_to" name="ubuntu_ecryptfs-utils.assignee.option" value="ubuntu_ecryptfs-utils.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ubuntu_ecryptfs-utils.assignee.assigned_to">
              Tyler Hicks (tyhicks)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ubuntu_ecryptfs-utils.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ubuntu_ecryptfs-utils.comment_on_change" name="ubuntu_ecryptfs-utils.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>CVE Request: <a rel="nofollow" href="http://openwall.com/lists/oss-security/2016/07/13/2">http://<wbr />openwall.<wbr />com/lists/<wbr />oss-security/<wbr />2016/07/<wbr />13/2</a></p>
<p>When GPT swap partitions are located on NVMe or MMC drives, ecryptfs-setup-swap fails to mark these swap partitions as &quot;no-auto&quot;.</p>
<p>As a consequence, when using encrypted home directory with an NVMe or MMC drive, the swap is left unencrypted. There&#x27;s also a usability issue in that users are erroneously prompted to enter a pass-phrase to unlock their swap partition at boot.</p>
<p>I have a patch that I&#x27;ll propose for merging shortly.</p>
<p>==<br />
Aside:</p>
<p>Although not necessarily related, there&#x27;s another issue System76 encountered when investigating this for a customer using encrypted home directory with an NVMe drive and the proprietary NVDIA driver.</p>
<p>After doing a fresh install of 16.04.1 (choosing &quot;Encrypt my home directory&quot;) and then installing the proprietary NVDIA driver with:</p>
<p>sudo apt-get install nvidia-361</p>
<p>During the package installs, we were twice prompted to enter a pass-phrase to unlock the encrypted swap partition. This seemed to happen when installing dkms modules. We know this doesn&#x27;t happen when the swap partition is correctly marked as &quot;no-auto&quot;, but it&#x27;s still very curious behavior.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          <span>See <a href="comments/0">original description</a></span>
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            
          </span>
          <span id="tag-list">
          </span>
          <a href="+edit" title="Add tags" id="tags-trigger" class="sprite add">Add tags</a>
          
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          

            <div id="bug-branches">
              <h2>Related branches</h2>

              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~jderose/ecryptfs/fix-1597154" class="sprite branch">lp:~jderose/ecryptfs/fix-1597154</a>
  
  
  <div class="reviews">
    

  <div>
    

  <img src="/@@/merge-proposal-icon" />
  <a href="https://code.launchpad.net/~jderose/ecryptfs/fix-1597154/+merge/298591" title="">Merged</a>
  
  into
  
    <a href="https://code.launchpad.net/~ecryptfs/ecryptfs/trunk">lp:ecryptfs</a>
  
  
    
      at
      <a href="https://bazaar.launchpad.net/~ecryptfs/ecryptfs/trunk/revision/882">
        revision 882
      </a>
    
  


  </div>
  

  

<dl class="reviews">
  
  <dd>
    <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks</a>:
    <span class="voteAPPROVE">Approve</span>
    
    <time title="2016-07-07 00:01:05 UTC" datetime="2016-07-07T00:01:05.261629+00:00">on 2016-07-07</time>
  </dd>
  <dd>
    <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose</a>
    (community):
    <span class="voteNEEDS_RESUBMITTING">Needs Resubmitting</span>
    
    <time title="2016-07-03 18:52:23 UTC" datetime="2016-07-03T18:52:23.133495+00:00">on 2016-07-03</time>
  </dd>
  <dd class="popup-diff mp-298591">
    Diff: <a href="https://code.launchpad.net/~jderose/ecryptfs/fix-1597154/+merge/298591/+preview-diff/728531/+files/preview.diff" class="diff-link">20 lines (+8/-2)</a><div class="collapsible"><span>1 file modified</span><div>src/utils/ecryptfs-setup-swap (+8/-2)</div></div>
    <a class="api-ref hidden" href="/~jderose/ecryptfs/fix-1597154/+merge/298591/+preview-diff/728531">api</a>
  </dd>

</dl>





  </div>
</div>



              
              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ecryptfs/ecryptfs/trunk" class="sprite branch">lp:ecryptfs</a>
  
  
</div>



              
              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~tyhicks/ecryptfs/lp1597154-packaging" class="sprite branch">lp:~tyhicks/ecryptfs/lp1597154-packaging</a>
  
  
  <div class="reviews">
    

  <div>
    

  <img src="/@@/merge-proposal-icon" />
  <a href="https://code.launchpad.net/~tyhicks/ecryptfs/lp1597154-packaging/+merge/299605" title="">Merged</a>
  
  into
  
    <a href="https://code.launchpad.net/~ecryptfs/ecryptfs/trunk">lp:ecryptfs</a>
  
  
    
  


  </div>
  

  

<dl class="reviews">
  
  <dd>
    <a href="https://launchpad.net/~pitti" class="sprite person">Martin Pitt</a>
    (community):
    <span class="voteAPPROVE">Approve</span>
    
    <time title="2016-07-12 14:07:10 UTC" datetime="2016-07-12T14:07:10.582291+00:00">on 2016-07-12</time>
  </dd>
  <dd>
    <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose</a>
    (community):
    <span class="voteAPPROVE">Approve</span>
    
    <time title="2016-07-12 02:17:07 UTC" datetime="2016-07-12T02:17:07.634698+00:00">on 2016-07-12</time>
  </dd>
  <dd id="review-ecryptfs">
    <a href="https://launchpad.net/~ecryptfs" class="bg-image" style="background-image: url(https://launchpadlibrarian.net/88108046/ecryptfs_14.png)">eCryptfs</a>:

    <span class="votePENDING">Pending</span>
    
    requested
    <time title="2016-07-08 21:35:31 UTC" datetime="2016-07-08T21:35:31.831022+00:00">2016-07-08</time>
  </dd>
  <dd class="popup-diff mp-299605">
    Diff: <a href="https://code.launchpad.net/~tyhicks/ecryptfs/lp1597154-packaging/+merge/299605/+preview-diff/730122/+files/preview.diff" class="diff-link">84 lines (+52/-0)</a><div class="collapsible"><span>3 files modified</span><div>debian/changelog (+6/-0)<br/>debian/ecryptfs-utils.postinst (+42/-0)<br/>src/utils/ecryptfs-setup-swap (+4/-0)</div></div>
    <a class="api-ref hidden" href="/~tyhicks/ecryptfs/lp1597154-packaging/+merge/299605/+preview-diff/730122">api</a>
  </dd>

</dl>





  </div>
</div>



              
            </div>
          
        </div><!-- bug-branch-container -->

        

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
    
    <time title="2016-06-29 01:21:48 UTC" datetime="2016-06-29T01:21:48.997168+00:00">on 2016-06-29</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ecryptfs: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Jason Gerard DeRose (jderose)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
    
    <time title="2016-06-29 01:37:24 UTC" datetime="2016-06-29T01:37:24.196155+00:00">on 2016-06-29</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in system76: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Jason Gerard DeRose (jderose)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
    
    <time title="2016-06-29 04:43:50 UTC" datetime="2016-06-29T04:43:50.023073+00:00">on 2016-06-29</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-30T18:39:12.253867+00:00" title="2016-06-30 18:39:12 UTC">on 2016-06-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Re the curious &quot;Aside&quot; I mentioned in the bug description, we&#x27;ve narrowed it down a bit: in this scenario, it seems installing/<wbr />upgrading/<wbr />reinstalling any packages that have systemd services will result in the user getting prompted for a passphrase to unlock their cryptoswap partition. I filed a bug against systemd for this:</p>
<p><a rel="nofollow" href="https://bugs.launchpad.net/ubuntu/+source/systemd/+bug/1597876">https:/<wbr />/bugs.launchpad<wbr />.net/ubuntu/<wbr />+source/<wbr />systemd/<wbr />+bug/1597876</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Re the curious "Aside" I mentioned in the bug description, we've narrowed it down a bit: in this scenario, it seems installing/upgrading/reinstalling any packages that have systemd services will result in the user getting prompted for a passphrase to unlock their cryptoswap partition. I filed a bug against systemd for this:

https://bugs.launchpad.net/ubuntu/+source/systemd/+bug/1597876</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-30T20:19:41.063853+00:00" title="2016-06-30 20:19:41 UTC">on 2016-06-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+attachment/4693058/+files/fix-1597154.patch">fix-1597154.patch</a>
        <a class="sprite edit action-icon" href="/ecryptfs/+bug/1597154/+attachment/4693058">Edit</a>
        (775 bytes,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Because this effects such a large number of System76 customers, we&#x27;re now delivering a patched ecryptfs-utils package in our Stable PPA (which is pre-installed and up-to-date in our golden images):</p>
<p><a rel="nofollow" href="https://launchpad.net/~system76-dev/+archive/ubuntu/stable">https:/<wbr />/launchpad.<wbr />net/~system76-<wbr />dev/+archive/<wbr />ubuntu/<wbr />stable</a></p>
<p>In case it helps facilitates more quickly getting a fix for this into xenial-updates, I&#x27;ve attached a debian patch ready to be applied against ecryptfs-utils 111-0ubuntu1.</p>
<p>For what it&#x27;s worth, System76 is extremely keen on getting a fix for this into the 16.04.1 ISO as our customers are still faced with this problem when doing a re-install.</p>
<p>Please let me know if there&#x27;s anything we can do to help facilitate this!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Because this effects such a large number of System76 customers, we're now delivering a patched ecryptfs-utils package in our Stable PPA (which is pre-installed and up-to-date in our golden images):

https://launchpad.net/~system76-dev/+archive/ubuntu/stable

In case it helps facilitates more quickly getting a fix for this into xenial-updates, I've attached a debian patch ready to be applied against ecryptfs-utils 111-0ubuntu1.

For what it's worth, System76 is extremely keen on getting a fix for this into the 16.04.1 ISO as our customers are still faced with this problem when doing a re-install.

Please let me know if there's anything we can do to help facilitate this!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
    
    <time title="2016-07-02 00:27:24 UTC" datetime="2016-07-02T00:27:24.495115+00:00">on 2016-07-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ecryptfs: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Triaged
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
    
    <time title="2016-07-02 00:56:52 UTC" datetime="2016-07-02T00:56:52.992805+00:00">on 2016-07-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - ecryptfs-setup-swap fails with GPT partitioning + NVMe/MMC drives<br />+ ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning +<br />+ NVMe/MMC drives
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~loyeyoung" class="sprite person">Loye Young (loyeyoung)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-02T23:04:28.500141+00:00" title="2016-07-02 23:04:28 UTC">on 2016-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Does the problem remain if you change the GPT partition type of the encrypted swap partition to 8300 or 0700 instead of 8200?</p>
<p>I suspect systemd is mounting the swap partition as an unencrypted swap before cryptsetup does its magic.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Does the problem remain if you change the GPT partition type of the encrypted swap partition to 8300 or 0700 instead of 8200?

I suspect systemd is mounting the swap partition as an unencrypted swap before cryptsetup does its magic.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~loyeyoung" class="sprite person">Loye Young (loyeyoung)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-02T23:37:05.588840+00:00" title="2016-07-02 23:37:05 UTC">on 2016-07-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Re: Comment #3 above.</p>
<p>The partition type numbers I described are those using gdisk.</p>
<p>Ontologically, an encrypted swap partition is not the same thing as a regular swap partition, at least from the partition table&#x27;s view. They perform the same function from the viewpoint of the system, but the partition table is concerned with the way the partitions are formatted.</p>
<p>Consequently, systemd is currently performing as it should, IMHO. The problem more fundamentally is that the partition is mislabeled.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Re: Comment #3 above. 

The partition type numbers I described are those using gdisk. 

Ontologically, an encrypted swap partition is not the same thing as a regular swap partition, at least from the partition table's view. They perform the same function from the viewpoint of the system, but the partition table is concerned with the way the partitions are formatted. 

Consequently, systemd is currently performing as it should, IMHO. The problem more fundamentally is that the partition is mislabeled.

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~xavier-gnata-gmail" class="sprite person">Xavier Gnata (xavier-gnata-gmail)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-04T06:43:48.753324+00:00" title="2016-07-04 06:43:48 UTC">on 2016-07-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I have installed a fresh 16.04.<br />
I have these partitions</p>
<p>Device            Start      End  Sectors   Size Type<br />
/dev/nvme0n1p1        6    76805    76800   300M EFI System<br />
/dev/nvme0n1p2    76806 19691128 19614323  74,8G Apple Core storage<br />
/dev/nvme0n1p3 19691129 19849820   158692 619,9M Apple boot<br />
/dev/nvme0n1p4 19849984 20850687  1000704   3,8G Linux swap<br />
/dev/nvme0n1p5 20850688 61279231 40428544 154,2G Linux filesystem</p>
<p>During the install/update process, I add to enter the password for the swap partition about 10 times.<br />
After this tedious process, the system is still asking for the password for the swap at each boot. I have patched ecryptfs-setup-swap as mentioned above but I still have to enter the password at each boot. Should I relaunch/update something having patched ecryptfs-<wbr />setup-swap?<wbr />? Should I try to change the swap  GPT partition type??</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I have installed a fresh 16.04.
I have these partitions

Device            Start      End  Sectors   Size Type
/dev/nvme0n1p1        6    76805    76800   300M EFI System
/dev/nvme0n1p2    76806 19691128 19614323  74,8G Apple Core storage
/dev/nvme0n1p3 19691129 19849820   158692 619,9M Apple boot
/dev/nvme0n1p4 19849984 20850687  1000704   3,8G Linux swap
/dev/nvme0n1p5 20850688 61279231 40428544 154,2G Linux filesystem

During the install/update process, I add to enter the password for the swap partition about 10 times.
After this tedious process, the system is still asking for the password for the swap at each boot. I have patched ecryptfs-setup-swap as mentioned above but I still have to enter the password at each boot. Should I relaunch/update something having patched ecryptfs-setup-swap?? Should I try to change the swap  GPT partition type??
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-04T16:02:01.431853+00:00" title="2016-07-04 16:02:01 UTC">on 2016-07-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Xavier: this patched ecryptfs-utils package can only help you correctly create a new setup, wont help when trying to fix existing setups. So it&#x27;s basically only useful once there&#x27;s a new 16.04.1 (daily) ISO that incorporates the fix, or likewise for an up-to-date OEM mode install (where this patched ecryptfs-utils package is installed prior to clicking &quot;Prepare for shipping to end user&quot;).</p>
<p>To fix an existing setup, you might try this script that I added to the system76-driver:<br />
<a rel="nofollow" href="http://bazaar.launchpad.net/~system76-dev/system76-driver/trunk/view/head:/system76-fix-ecryptfs-swap">http://<wbr />bazaar.<wbr />launchpad.<wbr />net/~system76-<wbr />dev/system76-<wbr />driver/<wbr />trunk/view/<wbr />head:/system76-<wbr />fix-ecryptfs-<wbr />swap</a></p>
<p>Download it locally then:</p>
<p>sudo python3 system76-<wbr />fix-ecryptfs-<wbr />swap</p>
<p>Fair warning: when needed this script does something fairly invasive, but it likewise went through obsessive enough testing to make me feel comfortable pushing it out to all System76 customers. So in theory everything should be a-okay if you run this script :)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Xavier: this patched ecryptfs-utils package can only help you correctly create a new setup, wont help when trying to fix existing setups. So it's basically only useful once there's a new 16.04.1 (daily) ISO that incorporates the fix, or likewise for an up-to-date OEM mode install (where this patched ecryptfs-utils package is installed prior to clicking "Prepare for shipping to end user").

To fix an existing setup, you might try this script that I added to the system76-driver:
http://bazaar.launchpad.net/~system76-dev/system76-driver/trunk/view/head:/system76-fix-ecryptfs-swap

Download it locally then:

sudo python3 system76-fix-ecryptfs-swap

Fair warning: when needed this script does something fairly invasive, but it likewise went through obsessive enough testing to make me feel comfortable pushing it out to all System76 customers. So in theory everything should be a-okay if you run this script :)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~xavier-gnata-gmail" class="sprite person">Xavier Gnata (xavier-gnata-gmail)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-04T18:27:36.480870+00:00" title="2016-07-04 18:27:36 UTC">on 2016-07-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>No blue smoke :) but:</p>
<p>root@macaron:~# python3 ./system76-<wbr />fix-ecryptfs-<wbr />swap<br />
A hybrid GPT was detected. You have to sync the hybrid MBR manually (expert command &#x27;M&#x27;).<br />
system76-fix-swap: INFO: toggling no-auto bit on partition &#x27;4&#x27; of &#x27;/dev/nvme0n1&#x27;<br />
A hybrid GPT was detected. You have to sync the hybrid MBR manually (expert command &#x27;M&#x27;).<br />
The device contains hybrid MBR -- writing GPT only. You have to sync the MBR manually.<br />
Re-reading the partition table failed.: Device or resource busy</p>
<p>It&#x27;s a dual boot on a fresh macbook air. I used the macOS command lineto resize the macOS partition and then installed kubuntu in a very standard way.<br />
What do you recommand?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">No blue smoke :) but:

root@macaron:~# python3 ./system76-fix-ecryptfs-swap
A hybrid GPT was detected. You have to sync the hybrid MBR manually (expert command 'M').
system76-fix-swap: INFO: toggling no-auto bit on partition '4' of '/dev/nvme0n1'
A hybrid GPT was detected. You have to sync the hybrid MBR manually (expert command 'M').
The device contains hybrid MBR -- writing GPT only. You have to sync the MBR manually.
Re-reading the partition table failed.: Device or resource busy


It's a dual boot on a fresh macbook air. I used the macOS command lineto resize the macOS partition and then installed kubuntu in a very standard way.
What do you recommand?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~xavier-gnata-gmail" class="sprite person">Xavier Gnata (xavier-gnata-gmail)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-04T18:43:29.072749+00:00" title="2016-07-04 18:43:29 UTC">on 2016-07-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>but...it works thanks to your script!<br />
I haven&#x27;t understood why setting it to no_auto helps but it works :)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">but...it works thanks to your script!
I haven't understood why setting it to no_auto helps but it works :)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-04T21:57:47.794092+00:00" title="2016-07-04 21:57:47 UTC">on 2016-07-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Xavier: glad it worked!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Xavier: glad it worked!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rockorequin" class="sprite person">Rocko (rockorequin)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-05T09:04:28.145110+00:00" title="2016-07-05 09:04:28 UTC">on 2016-07-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Jason: your script worked for me too, many thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Jason: your script worked for me too, many thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-05T17:51:55.759454+00:00" title="2016-07-05 17:51:55 UTC">on 2016-07-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Rocko: awesome, so glad to hear my script helped you!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Rocko: awesome, so glad to hear my script helped you!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
    
    <time title="2016-07-07 00:33:14 UTC" datetime="2016-07-07T00:33:14.802569+00:00">on 2016-07-07</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ecryptfs: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Triaged &#8594; Fix Committed
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in system76: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
    
    <time title="2016-07-14 14:56:40 UTC" datetime="2016-07-14T14:56:40.621186+00:00">on 2016-07-14</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~jderose" class="sprite person">Jason Gerard DeRose (jderose)</a>
    
    <time title="2016-07-14 16:10:22 UTC" datetime="2016-07-14T16:10:22.970606+00:00">on 2016-07-14</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in system76: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ecryptfs/+bug/1597154/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tyhicks" class="sprite person">Tyler Hicks (tyhicks)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-07-14T16:42:56.235043+00:00" title="2016-07-14 16:42:56 UTC">on 2016-07-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ecryptfs/+bug/1597154/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><a rel="nofollow" href="http://www.ubuntu.com/usn/usn-3032-1">http://<wbr />www.ubuntu.<wbr />com/usn/<wbr />usn-3032-<wbr />1</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">http://www.ubuntu.com/usn/usn-3032-1</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ecryptfs: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Released &#8594; Fix Committed
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in ecryptfs-utils (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Tyler Hicks (tyhicks)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/ecryptfs/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/ecryptfs/+bug/1597154/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/ecryptfs/+bug/1597154/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/ecryptfs/+bug/1597154/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/ecryptfs/+bug/1597154/+attachment/4693058/+files/fix-1597154.patch">fix-1597154.patch</a>
        <small>
          (<a href="/ecryptfs/+bug/1597154/+attachment/4693058">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/ecryptfs/+bug/1597154/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"bug_is_private": false, "information_type_data": {"PUBLICSECURITY": {"name": "Public Security", "description_css_class": "choice-description", "is_private": false, "value": "PUBLICSECURITY", "description": "Everyone can see this security related information.\n", "order": 1}, "PRIVATESECURITY": {"name": "Private Security", "description_css_class": "choice-description", "is_private": true, "value": "PRIVATESECURITY", "description": "Only the security group can see this information.\n ", "order": 2}, "PUBLIC": {"name": "Public", "description_css_class": "choice-description", "is_private": false, "value": "PUBLIC", "description": "Everyone can see this information.\n", "order": 0}, "USERDATA": {"name": "Private", "description_css_class": "choice-description", "is_private": true, "value": "USERDATA", "description": "Only shared with users permitted to see private user information.\n", "order": 3}}, "initial_comment_batch_offset": 41, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1597154", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1597154"}, "first visible_recent_comment": -28, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1597154", "web_link": "https://bugs.launchpad.net/bugs/1597154", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1597154, "private": false, "information_type": "Public", "name": null, "title": "ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning + NVMe/MMC drives", "description": "CVE Request: http://openwall.com/lists/oss-security/2016/07/13/2\n\n\nWhen GPT swap partitions are located on NVMe or MMC drives, ecryptfs-setup-swap fails to mark these swap partitions as \"no-auto\".\n\nAs a consequence, when using encrypted home directory with an NVMe or MMC drive, the swap is left unencrypted. There's also a usability issue in that users are erroneously prompted to enter a pass-phrase to unlock their swap partition at boot.\n\nI have a patch that I'll propose for merging shortly.\n\n==\nAside:\n\nAlthough not necessarily related, there's another issue System76 encountered when investigating this for a customer using encrypted home directory with an NVMe drive and the proprietary NVDIA driver.\n\nAfter doing a fresh install of 16.04.1 (choosing \"Encrypt my home directory\") and then installing the proprietary NVDIA driver with:\n\nsudo apt-get install nvidia-361\n\nDuring the package installs, we were twice prompted to enter a pass-phrase to unlock the encrypted swap partition. This seemed to happen when installing dkms modules. We know this doesn't happen when the swap partition is correctly marked as \"no-auto\", but it's still very curious behavior.", "owner_link": "https://bugs.launchpad.net/api/devel/~jderose", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/bug_tasks", "duplicate_of_link": null, "date_created": "2016-06-29T01:21:32.652263+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/subscriptions", "date_last_updated": "2016-07-14T16:43:53.804704+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 30, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/attachments", "security_related": false, "latest_patch_uploaded": "2016-06-30T20:19:41.063853+00:00", "tags": [], "date_last_message": "2016-07-14T16:42:56.235043+00:00", "number_of_duplicates": 0, "message_count": 13, "users_affected_count": 6, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/users_unaffected", "users_affected_count_with_dupes": 6, "other_users_affected_count_with_dupes": 6, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1597154/linked_merge_proposals", "http_etag": "\"3d259d5f86608cf5a7c4d3e88eceaafc60d27a9f-9bd6489f9b67e8d3629af323d190318d3c0e2457\""}, "total_comments_and_activity": 38, "related_features": {}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/ecryptfs/+bug/1597154", "web_link": "https://bugs.launchpad.net/ecryptfs/+bug/1597154", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1597154", "milestone_link": null, "status": "Fix Committed", "importance": "Critical", "assignee_link": "https://bugs.launchpad.net/api/devel/~jderose", "bug_target_display_name": "eCryptfs", "bug_target_name": "ecryptfs", "bug_watch_link": null, "date_assigned": "2016-06-29T01:21:49.322506+00:00", "date_created": "2016-06-29T01:21:32.652263+00:00", "date_confirmed": "2016-07-02T00:27:24.666406+00:00", "date_incomplete": null, "date_in_progress": "2016-07-07T00:33:15.113943+00:00", "date_closed": null, "date_left_new": "2016-07-02T00:27:24.666406+00:00", "date_triaged": "2016-07-02T00:27:24.666406+00:00", "date_fix_committed": "2016-07-07T00:33:15.113943+00:00", "date_fix_released": null, "date_left_closed": "2016-07-14T16:43:15.651147+00:00", "owner_link": "https://bugs.launchpad.net/api/devel/~jderose", "target_link": "https://bugs.launchpad.net/api/devel/ecryptfs", "title": "Bug #1597154 in eCryptfs: \"ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning + NVMe/MMC drives\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/ecryptfs/+bug/1597154/related_tasks", "is_complete": false, "http_etag": "\"d10d98486de008a6055f0a60922a8a9a1475933e-dff81a5b4f8174a2761dbb46a995ac0ffdd89c86\""}, "bugtask_data": {"2097242": {"bugtask_path": "/ecryptfs/+bug/1597154", "bug_title": "ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning + NVMe/MMC drives", "user_can_delete": false, "milestone_value": null, "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "eCryptfs", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/ecryptfs/+bug/1597154/+delete", "row_id": "tasksummary2097242", "target_is_product": true, "id": 2097242, "form_row_id": "task2097242", "assignee_vocabulary_filters": [], "prefix": "ecryptfs", "importance_value": "Critical", "status_value": "Fix Committed", "assignee_value": "jderose", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}, "2105506": {"bugtask_path": "/ubuntu/+source/ecryptfs-utils/+bug/1597154", "bug_title": "ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning + NVMe/MMC drives", "user_can_delete": false, "milestone_value": null, "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "ecryptfs-utils (Ubuntu)", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/ubuntu/+source/ecryptfs-utils/+bug/1597154/+delete", "row_id": "tasksummary2105506", "target_is_product": false, "id": 2105506, "form_row_id": "task2105506", "assignee_vocabulary_filters": [], "prefix": "ubuntu_ecryptfs-utils", "importance_value": "Critical", "status_value": "Fix Released", "assignee_value": "tyhicks", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}, "2097246": {"bugtask_path": "/system76/+bug/1597154", "bug_title": "ecryptfs-setup-swap leaves swap unencrypted with GPT partitioning + NVMe/MMC drives", "user_can_delete": false, "milestone_value": null, "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "System76", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/system76/+bug/1597154/+delete", "row_id": "tasksummary2097246", "target_is_product": true, "id": 2097246, "form_row_id": "task2097246", "assignee_vocabulary_filters": [], "prefix": "system76", "importance_value": "Critical", "status_value": "Fix Released", "assignee_value": "jderose", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}}};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 100 queries/external actions issued in 1.26 seconds

    Features: {'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'bugs.affected_count_includes_dupes.disabled': None, 'baselayout.careers_link.disabled': None, 'js.yui_version': None, 'profiling.enabled': None, 'visible_render_time': None, 'hard_timeout': '9000', 'bugs.nominations.bug_supervisors_can_target': 'on', 'app.maintenance_message': None}

    r0d8de2b

    -->

</html>

