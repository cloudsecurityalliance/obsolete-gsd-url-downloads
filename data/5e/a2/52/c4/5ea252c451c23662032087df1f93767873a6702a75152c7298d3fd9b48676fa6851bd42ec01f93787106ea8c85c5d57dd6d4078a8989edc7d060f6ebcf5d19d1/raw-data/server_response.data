<!DOCTYPE html>
<html lang="en">
  <head>
    <title>12495 &ndash; Crash in Corba auto generated files with MSVC2013 Update 5 x64</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link href="data/assets/64b49332a92937374625c24ed9a89c85.css?1635022386" rel="stylesheet" type="text/css">

<link href="data/assets/f6911ed8e5a97f108734d9324cb6bd67.css?1635022386" rel="stylesheet" type="text/css">

    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1635022386"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "12495 – Crash in Corba auto generated files with MSVC2013 Update 5 x64",
                             "show_bug.cgi?id=12495" );
        document.title = "12495 – Crash in Corba auto generated files with MSVC2013 Update 5 x64";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "12495 – Crash in Corba auto generated files with MSVC2013 Update 5 x64", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1635022386"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-wireshark-org-bugzilla
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_Wireshark
                 bz_component_Qt_UI
                 bz_bug_12495 yui-skin-sam">

  <div id="header"><div id="banner">
      <a href="/bugzilla/"><img id="badge" src="/image/wsbadge-bug@186x57.png"></a>
      <span id="banner-text">
        Wireshark Bug Database &ndash; Bug&nbsp;12495
      </span>
      <div id="subtitle">
        <p class="subheader">Crash in Corba auto generated files with MSVC2013 Update 5 x64</p>
      </div>

       <div id="motd_yellow">

<p>
This Bugzilla instance was migrated to <a href="https://gitlab.com/wireshark/wireshark">GitLab</a> on Sunday, August 23.
</p>


<p>
This bug has been migrated to <a href="https://gitlab.com/wireshark/wireshark/-/issues/12495">issue 12495</a> in the <a href="https://gitlab.com/wireshark/wireshark/-/issues">GitLab issue tracker</a>.
It can be viewed and updated there.
</p>


</p>

<p>
See the <a href="https://gitlab.com/wireshark/gitlab-migration/wikis/home">migration wiki</a> for more details.
</p>

       </div>


    </div>

<!-- WS: Title info is in the banner
    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;12495</span>
  
        <span id="subtitle" class="subheader">Crash in Corba auto generated files with MSVC2013 Update 5 x64</span>

        <span id="information" class="header_addl_info">Last modified: 2016-06-15 01:53:06 UTC</span>
    </div>
  -->


    <div id="common_links"><ul class="links">
  <li><a href="https://www.wireshark.org/">Wireshark Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=12495&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=12495" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>


  <li id="forgot_container_top">
    <span class="separator">| </span>
    <a id="forgot_link_top" href="show_bug.cgi?id=12495&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_top')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_top"
          class="mini_forgot bz_default_hidden">
      <label for="login_top">Login:</label>
      <input name="loginname" size="20" id="login_top" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_top" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_top" name="token"
             value="1635621109-Kb5mqFAaOJkEpo3ovk6xClhZbTH8sBH9sbFe_TY-rS0">
      <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
    </form>
  </li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2016-06-15 01:53:06">
  <input type="hidden" name="id" value="12495">
  <input type="hidden" name="token" value="1635621109-WwEKrhkaRlY1w8Hknry1kiSEoaipUYS-6hZs5cOIu5A">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=12495"><b>Bug&nbsp;12495</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">Crash in Corba auto generated files with MSVC2013 Update 5 x64</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>Crash in Corba auto generated files with MSVC2013 Update 5 x64
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'Crash in Corba auto generated files with MSVC2013 Update 5 x64' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Wireshark

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Wireshark"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Qt UI

  (<a href="buglist.cgi?component=Qt%20UI&amp;product=Wireshark&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>
<td>2.0.3
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">x86-64
        Windows 8.1
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Low
       Major<span id="votes_container">
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=12495#vote_12495">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th><td>---
  </td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Bugzilla Administrator</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'bugzilla-admin\x40wireshark.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2016-06-07 11:51 UTC by <span class="vcard"><span class="fn">Igor</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2016-06-15 01:53 UTC
      (<a href="show_activity.cgi?id=12495">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>2 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="pascal">pascal</option>
                <option value="peter">peter</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="2" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_vnd.tcpdump.pcap">
        <td>
            <a href="attachment.cgi?id=14617"
               title="View the content of the attachment">
          <b>GIOP capture</b></a>

          <span class="bz_attach_extra_info">
              (2.46 KB,
                application/vnd.tcpdump.pcap)

            <br>
            <a href="#attach_14617"
               title="Go to the comment associated with the attachment">2016-06-07 11:51 UTC</a>,

            <span class="vcard"><span class="fn">Igor</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=14617&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
        </span>
        <a href="attachment.cgi?bugid=12495&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=12495&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1490378926" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Igor</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-07 11:51:31 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=14617" name="attach_14617" title="GIOP capture">attachment 14617</a> <a href="attachment.cgi?id=14617&amp;action=edit" title="GIOP capture">[details]</a></span>
GIOP capture

Build Information:
Version 2.0.3 (<a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=eed34f0">v2.0.3-0-geed34f0</a> from master-2.0)

Copyright 1998-2016 Gerald Combs &lt;<a href="/cdn-cgi/l/email-protection#583f3d2a39343c7e7b6e6c632f312a3d2b30392a3376372a3f">gerald&#64;wireshark.org</a>&gt; and contributors.
License GPLv2+: GNU GPL version 2 or later &lt;<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">http://www.gnu.org/licenses/old-licenses/gpl-2.0.html</a>&gt;
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Compiled (64-bit) with Qt 5.3.2, with WinPcap (4_1_3), with libz 1.2.8, with
GLib 2.42.0, with SMI 0.4.8, with c-ares 1.9.1, with Lua 5.2, with GnuTLS
3.2.15, with Gcrypt 1.6.2, with MIT Kerberos, with GeoIP, with QtMultimedia,
with AirPcap.

Running on 64-bit Windows 8.1, build 9600, with locale C, without WinPcap, with
GnuTLS 3.2.15, with Gcrypt 1.6.2, without AirPcap.
       Intel(R) Core(TM) i5-2520M CPU &#64; 2.50GHz (with SSE4.2), with 16334MB of
physical memory.


Built using Microsoft Visual C++ 12.0 build 40629

Wireshark is Open Source Software released under the GNU General Public License.

Check the man page and <a href="http://www.wireshark.org">http://www.wireshark.org</a> for more information.
--
Crash after opening file</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Guy Harris</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-08 00:10:55 UTC
        </span>

      </div>




<pre class="bz_comment_text">Doesn't happen on my Windows 7 (virtual) machine with the same version of Wireshark.

Is your machine a Dell machine and, if so, does it have Dell Backup installed?

If so, this might be <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Wireshark crashes when use with DBAR (Dell Backup)"
   href="show_bug.cgi?id=12036">bug 12036</a>; uninstalling Dell Backup may fix things.</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Igor</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-08 09:16:01 UTC
        </span>

      </div>




<pre class="bz_comment_text">No, my PC is HP 8460p and I don't know what is Dell backup.
Your system is 64 bit, right?
I have other files which also crash. I think it is same issue.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Igor</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-08 09:30:55 UTC
        </span>

      </div>




<pre class="bz_comment_text">I have installed old version on the same PC and issue not reproducing.
Old wireshark version:
Version 1.12.11 (<a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=c74c83c">v1.12.11-0-gc74c83c</a> from master-1.12)

Compiled (64-bit) with GTK+ 2.24.23, with Cairo 1.10.2, with Pango 1.34.0, with
GLib 2.38.0, with WinPcap (4_1_3), with libz 1.2.5, with SMI 0.4.8, with c-ares
1.9.1, with Lua 5.2, without Python, with GnuTLS 3.2.15, with Gcrypt 1.6.2,
without Kerberos, with GeoIP, with PortAudio V19-devel (built Apr 22 2016), with
AirPcap.

Running on 64-bit Windows 8.1, build 9600, without WinPcap, GnuTLS 3.2.15,
Gcrypt 1.6.2, without AirPcap.
       Intel(R) Core(TM) i5-2520M CPU &#64; 2.50GHz, with 16334MB of physical
memory.


Built using Microsoft Visual C++ 10.0 build 40219</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Pascal Quantin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-08 09:43:20 UTC
        </span>

      </div>




<pre class="bz_comment_text">It sounds like a MSVC 2013 build 40629 64bits bug:
- when using <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=74484c6">v2.1.0rc0-3311-g74484c6</a> compiled in 32 bits, no crash
- when using <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=74484c6">v2.1.0rc0-3311-g74484c6</a> compiled in 64 bits release mode, it crashes on packet 11
- when using <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=74484c6">v2.1.0rc0-3311-g74484c6</a> compiled in 64 bits debug mode, no crash

When using MSVC debugger, I can see that when entering decode_user_exception() function in packet-cosnaming.c, header pointer is NULL and the call to (!header-&gt;exception_id) triggers an exception. But when doing step by step debugging, we can see that in the caller function header is not NULL...

Checking that header is not NULL removes the crash, but gets a wrong dissection (compared to the 32 bits version). No idea on how to progress further...</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Peter Wu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-13 16:38:54 UTC
        </span>

      </div>




<pre class="bz_comment_text">FWIW, opening this capture file in <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=2a2955d">v2.0.5rc0-15-g2a2955d</a> and <a href="https://code.wireshark.org/review/gitweb?p=wireshark.git;a=commit;h=4cab051">v2.1.1rc0-26-g4cab051</a> on Linux does not crash (ASAN build).</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Peter Wu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-13 18:02:54 UTC
        </span>

      </div>




<pre class="bz_comment_text">It looks like an optimization issue on MSVC2013 with /Oxs. Based on the disassemblies provided by Pascal, I see the following:

decode_user_exception:
  0000000000000000: 48 89 6C 24 08     mov         qword ptr [rsp+8],rbp
  0000000000000005: 48 89 74 24 10     mov         qword ptr [rsp+10h],rsi
  000000000000000A: 48 89 7C 24 18     mov         qword ptr [rsp+18h],rdi
  000000000000000F: 4C 89 74 24 20     mov         qword ptr [rsp+20h],r14
  0000000000000014: 41 57              push       <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=15">r15</a>
  0000000000000016: 48 83 EC 40        sub         rsp,40h
# MessageHeader *header at offset 28h + 8h + 40h = 30h + 40h = 70h
# this matches the expected value in dissect_cosnaming
  000000000000001A: 48 8B 7C 24 70     mov         rdi,qword ptr [rsp+70h]
  000000000000001F: 49 8B F1           mov         rsi,r9
  0000000000000022: 4D 8B F8           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=15">r15</a>,r8
if (!header-&gt;exception_id)
  0000000000000025: 48 83 7F 18 00     cmp         qword ptr [rdi+18h],0
  000000000000002A: 48 8B EA           mov         rbp,rdx
  000000000000002D: 4C 8B F1           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=14">r14</a>,rcx
  0000000000000030: 0F 84 AE 00 00 00  je          00000000000000E4

if (strcmp(header-&gt;exception_id, &quot;IDL:omg.org/CosNaming/NamingContext/NotFound:1.0&quot;) == 0)
  0000000000000036: 48 8B 4F 18        mov         rcx,qword ptr [rdi+18h]
  000000000000003A: 48 8D 15 00 00 00  lea         rdx,[??_C&#64;_0DB&#64;PBHKNMGI&#64;IDL?3omg?4org?1CosNaming?1NamingCont&#64;]
                    00
  0000000000000041: E8 00 00 00 00     call        strcmp
  0000000000000046: 85 C0              test        eax,eax
  0000000000000048: 75 43              jne         000000000000008D
  000000000000004A: 4C 8B CE           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=9">r9</a>,rsi
  000000000000004D: 4D 8B C7           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=8">r8</a>,r15
  0000000000000050: 48 8B D5           mov         rdx,rbp
  0000000000000053: 49 8B CE           mov         rcx,r14
  0000000000000056: E8 00 00 00 00     call        start_dissecting
  000000000000005B: 8B 8C 24 80 00 00  mov         ecx,dword ptr [rsp+80h]
                    00
  0000000000000062: 4C 8B CE           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=9">r9</a>,rsi
  0000000000000065: 89 4C 24 30        mov         dword ptr [rsp+30h],ecx
  0000000000000069: 48 8B 4C 24 78     mov         rcx,qword ptr [rsp+78h]
  000000000000006E: 4C 8B C0           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=8">r8</a>,rax
  0000000000000071: 48 89 4C 24 28     mov         qword ptr [rsp+28h],rcx
  0000000000000076: 49 8B CE           mov         rcx,r14
  0000000000000079: 48 8B D5           mov         rdx,rbp
  000000000000007C: 48 89 7C 24 20     mov         qword ptr [rsp+20h],rdi
  0000000000000081: E8 00 00 00 00     call        decode_ex_CosNaming_NamingContext_NotFound
  0000000000000086: B8 01 00 00 00     mov         eax,1
  000000000000008B: EB 59              jmp         00000000000000E6

f (strcmp(header-&gt;exception_id, &quot;IDL:omg.org/CosNaming/NamingContext/CannotProceed:1.0&quot;) == 0) {
  000000000000008D: 48 8B 4F 18        mov         rcx,qword ptr [rdi+18h]
  0000000000000091: 48 8D 15 00 00 00  lea         rdx,[??_C&#64;_0DG&#64;MLOOGHPH&#64;IDL?3omg?4org?1CosNaming?1NamingCont&#64;]
                    00
  0000000000000098: E8 00 00 00 00     call        strcmp
  000000000000009D: 85 C0              test        eax,eax
  000000000000009F: 75 43              jne         00000000000000E4
  00000000000000A1: 4C 8B CE           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=9">r9</a>,rsi
  00000000000000A4: 4D 8B C7           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=8">r8</a>,r15
  00000000000000A7: 48 8B D5           mov         rdx,rbp
  00000000000000AA: 49 8B CE           mov         rcx,r14
  00000000000000AD: E8 00 00 00 00     call        start_dissecting
  00000000000000B2: 8B 8C 24 80 00 00  mov         ecx,dword ptr [rsp+80h]
                    00
  00000000000000B9: 4C 8B CE           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=9">r9</a>,rsi
  00000000000000BC: 89 4C 24 30        mov         dword ptr [rsp+30h],ecx
  00000000000000C0: 48 8B 4C 24 78     mov         rcx,qword ptr [rsp+78h]
  00000000000000C5: 4C 8B C0           mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=8">r8</a>,rax
  00000000000000C8: 48 89 4C 24 28     mov         qword ptr [rsp+28h],rcx
  00000000000000CD: 49 8B CE           mov         rcx,r14
  00000000000000D0: 48 8B D5           mov         rdx,rbp
  00000000000000D3: 48 89 7C 24 20     mov         qword ptr [rsp+20h],rdi
  00000000000000D8: E8 00 00 00 00     call        decode_ex_CosNaming_NamingContext_CannotProceed
  00000000000000DD: B8 01 00 00 00     mov         eax,1
  00000000000000E2: EB 02              jmp         00000000000000E6

  00000000000000E4: 33 C0              xor         eax,eax
  00000000000000E6: 48 8B 6C 24 50     mov         rbp,qword ptr [rsp+50h]
  00000000000000EB: 48 8B 74 24 58     mov         rsi,qword ptr [rsp+58h]
  00000000000000F0: 48 8B 7C 24 60     mov         rdi,qword ptr [rsp+60h]
  00000000000000F5: 4C 8B 74 24 68     mov        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=14">r14</a>,qword ptr [rsp+68h]
  00000000000000FA: 48 83 C4 40        add         rsp,40h
  00000000000000FE: 41 5F              pop        <a href="http://anonsvn.wireshark.org/viewvc?view=revision&revision=15">r15</a>
  0000000000000100: C3                 ret

Above you can see rdi+18h three times for exception_id, but that is off by four:

    typedef struct MessageHeader {  // offsets
      guint8 magic[4];              // 00
      Version GIOP_version;         // 04
      guint8 flags;                 // 06
      guint8 message_type;          // 07
      guint32 message_size;         // 08

      guint32 req_id;               // 0c
      guint32 rep_status;           // 10
      gchar *exception_id;          // 14
    } MessageHeader;</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Pascal Quantin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-13 18:08:00 UTC
        </span>

      </div>




<pre class="bz_comment_text">There is a small typo in <a href="show_bug.cgi?id=12495#c6">comment 6</a>. Issue happens with optimization level /O2 for x64. Compiling those files with /Ox instead makes the issue disappear.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gerrit Code Review</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-13 22:55:14 UTC
        </span>

      </div>




<pre class="bz_comment_text">Change 15884 had a related patch set uploaded by Pascal Quantin:
CORBA IDL: compile dissectors with /Ox when using MSVC2013 x64

<a href="https://code.wireshark.org/review/15884">https://code.wireshark.org/review/15884</a></pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gerrit Code Review</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-14 21:57:44 UTC
        </span>

      </div>




<pre class="bz_comment_text">Change 15884 merged by Peter Wu:
CORBA IDL: compile dissectors with /Ox when using MSVC2013 x64

<a href="https://code.wireshark.org/review/15884">https://code.wireshark.org/review/15884</a></pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gerrit Code Review</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-14 23:23:36 UTC
        </span>

      </div>




<pre class="bz_comment_text">Change 15910 had a related patch set uploaded by Pascal Quantin:
CORBA IDL: compile dissectors with /Ox when using MSVC2013 x64

<a href="https://code.wireshark.org/review/15910">https://code.wireshark.org/review/15910</a></pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=12495#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gerrit Code Review</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2016-06-15 01:53:06 UTC
        </span>

      </div>




<pre class="bz_comment_text">Change 15910 merged by Michael Mann:
CORBA IDL: compile dissectors with /Ox when using MSVC2013 x64

<a href="https://code.wireshark.org/review/15910">https://code.wireshark.org/review/15910</a></pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=12495">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=12495">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=12495">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="https://www.wireshark.org/">Wireshark Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=12495&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=12495" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>


  <li id="forgot_container_bottom">
    <span class="separator">| </span>
    <a id="forgot_link_bottom" href="show_bug.cgi?id=12495&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_bottom')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_bottom"
          class="mini_forgot bz_default_hidden">
      <label for="login_bottom">Login:</label>
      <input name="loginname" size="20" id="login_bottom" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_bottom" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_bottom" name="token"
             value="1635621110-j1yfWXJPdnsw0roHc1vgqwYCFncD0sU04og69v2iLWo">
      <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
    </form>
  </li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>