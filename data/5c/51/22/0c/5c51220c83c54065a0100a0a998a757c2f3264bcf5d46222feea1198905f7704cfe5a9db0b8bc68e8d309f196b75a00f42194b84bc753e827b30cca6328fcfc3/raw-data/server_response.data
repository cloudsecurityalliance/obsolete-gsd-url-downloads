<!DOCTYPE html SYSTEM "about:legacy-compat">
<html xmlns:dita2html="http://dita-ot.sourceforge.net/ns/200801/dita2html" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Cloudera Security Bulletins | 5.x | Cloudera Documentation</title>
<link rel="stylesheet" type="text/css" media="screen, projection" href="../themes/html5-cloudera/css/screen.css?v=20200319">
<link rel="stylesheet" media="print" type="text/css" href="../themes/html5-cloudera/css/print.css">
<script src="../themes/html5-cloudera/js/script.js?v=20200319"></script>
<script type="text/javascript">
var d4p = {"relativePath":"..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"","previousTopicHref":"","ext":".html","root":false,"topic":{"chunked":"to-content"},"map":{"title":"Cloudera Security Bulletins","version":"5.x","chunked":false},"search":{"minlength":2},"l":{"hideNav":"Hide Navigation","showNav":"Show Navigation","previousTopic":"Previous Topic","nextTopic":"Next Topic","twitter":"Twitter","facebook":"Facebook","mail":"Mail","print":"Print"}}
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta name="theme-color" content="#ffffff">
<link rel="shortcut icon" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" sizes="57x57" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-57x57.png.pagespeed.ic.7qhPBJC5Sj.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-60x60.png.pagespeed.ic.sImIF3tY-R.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-72x72.png.pagespeed.ic.0CTaASwISN.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-76x76.png.pagespeed.ic.S-76mcAPom.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-114x114.png.pagespeed.ic.jXlRtsy-N_.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-120x120.png.pagespeed.ic.dHI07F41v8.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-144x144.png.pagespeed.ic.3NDSH7pD0r.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-152x152.png.pagespeed.ic.NcR1CKMzoV.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xapple-touch-icon-180x180.png.pagespeed.ic.lV6N23lMsh.png">
<link rel="icon" type="image/png" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xfavicon-32x32.png.pagespeed.ic.HEYWa6CcJx.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xandroid-chrome-192x192.png.pagespeed.ic.O4thMQeH5v.png" sizes="192x192">
<link rel="icon" type="image/png" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xfavicon-96x96.png.pagespeed.ic.Cz9fbezTfp.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/xfavicon-16x16.png.pagespeed.ic.j8GaKd5x8f.png" sizes="16x16">
<link rel="manifest" href="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="https://www.cloudera.com/etc/designs/www/clientlibs/css/assets/icons/favicon/mstile-144x144.png">
<link rel="schema.DC" href="http://purl.org/dc/terms/">
<meta name="DC.Type" content="concept">
<meta name="prodname" content="none">
<meta name="version" content="5.x">
<meta name="release" content="March 3, 2016">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="security_issues_all_products">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Enterprise">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Data Science Workbench">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Apache Hadoop">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="HBase">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Hive">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Hue">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Impala">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Impala">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Manager">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Navigator">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Navigator Key Trustee">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Oozie">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Search">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Sentry">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Spark">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="Cloudera Distribution of Apache Spark 2">
<meta name="Category" content="Vulnerabilities">
<meta name="Category" content="Security bulletins">
<meta name="Category" content="ZooKeeper">
<meta name="Category" content="Vulnerabilities">
<meta name="facet" content="Content Type|Documentation"/>
<meta name="facet" content="Component|Cloudera Data Science Workbench"/>
<meta name="facet" content="Component|HBase"/>
<meta name="facet" content="Component|Hive"/>
<meta name="facet" content="Component|Hue"/>
<meta name="facet" content="Component|Impala"/>
<meta name="facet" content="Component|Impala"/>
<meta name="facet" content="Component|Cloudera Manager"/>
<meta name="facet" content="Component|Cloudera Navigator"/>
<meta name="facet" content="Component|Oozie"/>
<meta name="facet" content="Component|Cloudera Search"/>
<meta name="facet" content="Component|Sentry"/>
<meta name="facet" content="Component|CDS Powered By Apache Spark"/>
<meta name="facet" content="Component|ZooKeeper"/>
</head>
<body class="en-us">
<!--BEGIN_HEADER-->
<header id="site-head">
<nav class="mk-navigation">
<div class="container main-menu"><span class="cloudera-brand"><a href="https://www.cloudera.com" title="Cloudera Product Documentation"></a></span> <a class="title" href="https://www.cloudera.com/documentation.html"><span>Documentation</span></a>
<div id="side-nav">
<ul>
<li><a href="http://www.cloudera.com/products.html" data-link="external">Products</a></li>
<li><a href="http://www.cloudera.com/services-support.html" data-link="external">Services & Support</a></li>
<li><a href="http://www.cloudera.com/solutions.html/" data-link="external">Solutions</a></li>
</ul>
</div>
</div>
</nav>
<div id="subnav">
<div id="version_message_outer">
<div id="version_message">
<div id="version_message_inner" class="container">
<div id="version_message_text"><span id="hamburger_container"></span>
<p class="lines">This is supplemental documentation pertaining to all Cloudera products and releases.</p>
</div>
<div id="breadcrumbs_search"><span class="form-holder" id="form-holder"></span></div>
</div>
</div>
</div>
<div id="breadcrumbs" class="container"><!--generate-inline-breadcrumbs--></div>
</div>
</header>
<!--END_HEADER-->
<div id="main-container">
<div class="container">
<div class="row">
<div id="leftbar" class="hidden-xs col-sm-3">
<nav id="local-navigation" class="toc current" role="navigation" aria-label="Main navigation"><!--CATEGORY_BTN_PLACEHOLDER-->
<div class="category_button taxonomy"><a title="Navigate by Component, Job Role, Task, Feature" href="../categories/hub.html">View All Categories</a></div>
<ul>
<li class="collapsible active"><a href="Security-Bulletin.html" class="selected">Cloudera Security Bulletins</a>
<ul>
<li><a href="#cloudera_enterprise">Cloudera Enterprise</a></li>
<li><a href="#cdsw">Cloudera Data Science Workbench</a></li>
<li><a href="#hadoop">Apache Hadoop</a></li>
<li><a href="#hbase">Apache HBase</a></li>
<li><a href="#hive">Apache Hive</a></li>
<li><a href="#hue">Hue</a></li>
<li><a href="#impala">Apache Impala</a></li>
<li><a href="#unique_1508076424">Apache Kafka</a></li>
<li><a href="#cloudera_manager">Cloudera Manager</a></li>
<li><a href="#cloudera_navigator">Cloudera Navigator</a></li>
<li><a href="#nav_key_trustee">Cloudera Navigator Key Trustee</a></li>
<li><a href="#unique_1804028388">Apache Oozie</a></li>
<li><a href="#search">Cloudera Search</a></li>
<li><a href="#sentry">Apache Sentry</a></li>
<li><a href="#spark">Apache Spark</a></li>
<li><a href="#spark2">Cloudera Distribution of Apache Spark 2</a></li>
<li><a href="#zookeeper">Apache ZooKeeper</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div id="section-container" class="col-xs-12 col-sm-8">
<section id="main-section"><noscript>
<p>To read this documentation, you must turn JavaScript on.</p>
</noscript>
<article id="article">
<div id="beta_message"></div>
<div class="main_topic" id="security_issues_all_products_div"><a id="security_issues_all_products" class="anchor level-1"></a>
<h1 class="title topictitle1">Cloudera Security Bulletins</h1>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This topic lists the security bulletins that have been released to address vulnerabilities in Cloudera Enterprise and its components.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#cloudera_enterprise">Cloudera Enterprise</a></li>
<li class="minitoc-entry"><a href="#cdsw">Cloudera Data Science Workbench</a></li>
<li class="minitoc-entry"><a href="#hadoop">Apache Hadoop</a></li>
<li class="minitoc-entry"><a href="#hbase">Apache HBase</a></li>
<li class="minitoc-entry"><a href="#hive">Apache Hive</a></li>
<li class="minitoc-entry"><a href="#hue">Hue</a></li>
<li class="minitoc-entry"><a href="#impala">Apache Impala</a></li>
<li class="minitoc-entry"><a href="#unique_1508076424">Apache Kafka</a></li>
<li class="minitoc-entry"><a href="#cloudera_manager">Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#cloudera_navigator">Cloudera Navigator</a></li>
<li class="minitoc-entry"><a href="#nav_key_trustee">Cloudera Navigator Key Trustee</a></li>
<li class="minitoc-entry"><a href="#unique_1804028388">Apache Oozie</a></li>
<li class="minitoc-entry"><a href="#search">Cloudera Search</a></li>
<li class="minitoc-entry"><a href="#sentry">Apache Sentry</a></li>
<li class="minitoc-entry"><a href="#spark">Apache Spark</a></li>
<li class="minitoc-entry"><a href="#spark2">Cloudera Distribution of Apache Spark 2</a></li>
<li class="minitoc-entry"><a href="#zookeeper">Apache ZooKeeper</a></li>
</ul>
<p></p></div>
</div>
<section class="nested1" id="cloudera_enterprise_section"><a id="cloudera_enterprise" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Enterprise</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists security bulletins for vulnerabilities that potentially affect the entire Cloudera Enterprise product suite. Bulletins specific to a component, such as
Cloudera Manager, Impala, Spark etc., can be found in the sections that follow.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#tsb-166">Potentially Sensitive Information in Cloudera Diagnostic Support Bundles</a></li>
<li class="minitoc-entry"><a href="#concept_tsb_2015-98">Apache Commons Collections Deserialization Vulnerability</a></li>
<li class="minitoc-entry"><a href="#concept_p3m_pcf_tn">Heartbleed Vulnerability in OpenSSL</a></li>
<li class="minitoc-entry"><a href="#concept_ckc_4j5_1q">“POODLE” Vulnerability on SSL/TLS enabled ports</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="tsb-166_section"><a id="tsb-166" class="anchor"></a>
<h3 class="title topictitle3">Potentially Sensitive Information in Cloudera Diagnostic Support Bundles</h3>
<div class="body conbody">
<p class="p">Cloudera Manager transmits certain diagnostic data (or "bundles") to Cloudera. These diagnostic bundles are used by the Cloudera support team to reproduce, debug, and address technical
issues for customers.</p>
<p class="p">Cloudera support discovered that potentially sensitive data may be included in diagnostic bundles and transmitted to Cloudera. This sensitive data cannot be used by Cloudera for any
purpose.</p>
<p class="p">Cloudera has modified Cloudera Manager so that known sensitive data is redacted from the bundles before transmission to Cloudera. Work is in progress in Cloudera CDH components to remove
logging and output of known potentially sensitive properties and configurations.</p>
<p class="p">See Cloudera Manager Release Notes, specifically, <a class="xref" href="http://www.cloudera.com/documentation/enterprise/release-notes/topics/cm_rn_new_changed_features.html#concept_j1m_5dn_dx" target="_blank">What's New in Cloudera Manager 5.9.0</a> for more
information (scroll to <strong class="ph b">Diagnostic Bundles</strong>). Also see <a class="xref" href="http://www.cloudera.com/documentation/enterprise/latest/topics/sg_redaction.html" target=
"_blank">Sensitive Data Redaction</a> in the Cloudera Security Guide for more information about bundles and redaction.</p>
<p class="p">Cloudera strives to establish and follow best practices for the protection of customer information. Cloudera continually reviews and improves security practices, infrastructure, and
data-handling policies.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera CDH and Enterprise Editions</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All Cloudera CDH and Enterprise Edition releases lower than 5.9.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 20th, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Possible logging and transmission of sensitive data</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-5724</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to Cloudera CDH and Enterprise Editions 5.9</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera CDH and Enterprise Editions 5.9 and higher</p>
<p class="p">For updates about this issue, see the Cloudera Knowledge article, <a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2016-166?popup=false&amp;navBack=H4sIAAAAAAAAAIuuVipWslLyzssvz0lNSU_1yM9NVdJRygaKFSSmp4ZkluSA-KVAvn58aaZ-NkyhPpCDosu-ODWxKDnDNiTYSdfQzEypNhYA788_FVwAAAA"
target="_blank">TSB 2016-166: Potentially Sensitive Information in Cloudera Diagnostic Support Bundles</a>.</p>
</div>
</section>
<section class="nested2" id="concept_tsb_2015-98_section"><a id="concept_tsb_2015-98" class="anchor"></a>
<h3 class="title topictitle3">Apache Commons Collections Deserialization Vulnerability</h3>
<div class="body conbody">
<p class="p">Cloudera has learned of a potential security vulnerability in a third-party library called the <a class="xref" href="https://commons.apache.org/proper/commons-collections/" target=
"_blank">Apache Commons Collections</a>. This library is used in products distributed and supported by Cloudera (“Cloudera Products”), including core Apache Hadoop. The Apache Commons Collections
library is also in widespread use beyond the Hadoop ecosystem. At this time, no specific attack vector for this vulnerability has been identified as present in Cloudera Products.</p>
<p class="p">In an abundance of caution, we are currently in the process of incorporating a version of the Apache Commons Collections library with a fix into the Cloudera Products. In most cases,
this will require coordination with the projects in the Apache community. One example of this is tracked by <a class="xref" href="https://issues.apache.org/jira/browse/HADOOP-12577" target=
"_blank">HADOOP-12577</a>.</p>
<p class="p">The Apache Commons Collections potential security vulnerability is titled “Arbitrary remote code execution with InvokerTransformer” and is tracked by <a class="xref" href="https://issues.apache.org/jira/browse/COLLECTIONS-580" target="_blank">COLLECTIONS-580</a>. MITRE has not issued a CVE, but related <a class="xref" href="http://www.oracle.com/technetwork/topics/security/alert-cve-2015-4852-2763333.html" target="_blank">CVE-2015-4852</a> has been filed for the vulnerability. CERT has issued <a class="xref" href="https://www.kb.cert.org/vuls/id/576313" target="_blank">Vulnerability Note #576313</a> for this issue.</p>
<p class="p"><strong class="ph b">Cloudera Products affected:</strong>Cloudera Manager, Cloudera Navigator, Cloudera Director, CDH</p>
<p class="p"><strong class="ph b">Releases affected:</strong>CDH 5.5.0, CDH 5.4.8 and lower, Cloudera Manager 5.5.0, Cloudera Manager 5.4.8 and lower, Cloudera Navigator 2.4.0, Cloudera Navigator
2.3.8 and lower, Director 1.5.1 and lower</p>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Nov 7, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> This potential vulnerability might enable an attacker to run arbitrary code from a remote machine without requiring authentication.</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to the latest suitable version containing this fix when it is available.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Beginning with CDH 5.5.1, 5.4.9, and 5.3.9, Cloudera Manager 5.5.1, 5.4.9, and 5.3.9, Cloudera Navigator 2.4.1, 2.3.9
and 2.2.9, and Director 1.5.2, the new Apache Commons Collections library version is included in all Cloudera products.</p>
</div>
</section>
<section class="nested2" id="concept_p3m_pcf_tn_section"><a id="concept_p3m_pcf_tn" class="anchor"></a>
<h3 class="title topictitle3">Heartbleed Vulnerability in OpenSSL</h3>
<div class="body conbody">
<p class="p">The Heartbleed vulnerability is a serious vulnerability in OpenSSL as described at <a class="xref" href="http://heartbleed.com/" target="_blank">http://heartbleed.com/</a> (<a class=
"xref" href="https://www.openssl.org/news/secadv_20140407.txt" target="_blank">OpenSSL TLS heartbeat read overrun, CVE-2014-0160</a>). Cloudera products do not ship with OpenSSL, but some components
use this library. Customers using OpenSSL with Cloudera products need to update their OpenSSL library to one that doesn’t contain the vulnerability.</p>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="concept_p3m_pcf_tn__ul_lyv_4df_tn">
<li class="li" id="concept_p3m_pcf_tn__li_qyv_4df_tn">All versions of OpenSSL 1.0.1 prior to 1.0.1g</li>
</ul>
</div>
<div class="p"><strong class="ph b">Components affected:</strong>
<ul class="ul" id="concept_p3m_pcf_tn__ul_gw5_rdf_tn">
<li class="li" id="concept_p3m_pcf_tn__li_xwy_cyf_tn">Hadoop Pipes uses OpenSSL.</li>
<li class="li" id="concept_p3m_pcf_tn__li_iw5_rdf_tn">If SSL encryption is enabled for Impala's RPC implementation (by setting <samp class="ph codeph">--ssl_server_certificate</samp>). This applies
to any of the three Impala demon processes: <samp class="ph codeph">impalad</samp>, <samp class="ph codeph">catalogd</samp> and <samp class="ph codeph">statestored</samp>.</li>
<li class="li" id="concept_p3m_pcf_tn__li_tx5_sdf_tn">If HTTPS is enabled for Impala’s debug web server pages (by setting <samp class="ph codeph">--webserver_certificate_file</samp>). This applies to
any of the three Impala demon processes: <samp class="ph codeph">impalad</samp>, <samp class="ph codeph">catalogd</samp> and <samp class="ph codeph">statestored</samp>.</li>
<li class="li" id="concept_p3m_pcf_tn__li_qcc_tdf_tn">If HTTPS is used with Hue.</li>
<li class="li" id="concept_p3m_pcf_tn__li_ct3_sdf_tn">Cloudera Manager agents, with TLS turned on, will use OpenSSL.</li>
</ul>
</div>
<div class="p"><strong class="ph b">Users affected:</strong>
<ul class="ul" id="concept_p3m_pcf_tn__ul_uhy_5df_tn">
<li class="li" id="concept_p3m_pcf_tn__li_why_5df_tn">All users of the above scenarios.</li>
</ul>
</div>
<p class="p"><strong class="ph b">Severity:</strong> High (If using the scenarios above)</p>
<p class="p"><strong class="ph b">CVE:</strong> <a class="xref" href="https://www.openssl.org/news/secadv_20140407.txt" target="_blank">CVE-2014-0160</a></p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ul class="ul" id="concept_p3m_pcf_tn__ul_ctz_c2f_tn">
<li class="li" id="concept_p3m_pcf_tn__li_ftz_c2f_tn">Ensure your Linux distribution version does not have the vulnerability.</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="concept_ckc_4j5_1q_section"><a id="concept_ckc_4j5_1q" class="anchor"></a>
<h3 class="title topictitle3">“POODLE” Vulnerability on SSL/TLS enabled ports</h3>
<div class="body conbody">
<p dir="ltr" class="p">The POODLE (Padding Oracle On Downgraded Legacy Encryption) attack, announced by Bodo Möller, Thai Duong, and Krzysztof Kotowicz at Google, forces the use of the obsolete SSLv3
protocol and then exploits a cryptographic flaw in SSLv3. The result is that an attacker on the same network as the victim can potentially decrypt parts of an otherwise encrypted channel.</p>
<p dir="ltr" class="p">SSLv3 has been obsolete, and known to have vulnerabilities, for many years now, but its retirement has been slow because of backward-compatibility concerns. SSLv3 has in the
meantime been replaced by TLSv1, TLSv1.1, and TLSv1.2. Under normal circumstances, the strongest protocol version that both sides support is negotiated at the start of the connection. However, an
attacker can introduce errors into this negotiation and force a fallback to the weakest protocol version -- SSLv3.</p>
<p dir="ltr" class="p">The only solution to the POODLE attack is to completely disable SSLv3. This requires changes across a wide variety of components of CDH, and in Cloudera Manager.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager and CDH.</p>
<div class="p"><strong class="ph b">Releases affected:</strong> All CDH and Cloudera Manager versions earlier than the versions listed below:
<ul class="ul" id="concept_ckc_4j5_1q__ul_sx5_hk5_1q">
<li class="li">Cloudera Manager and CDH 5.2.1</li>
<li class="li">Cloudera Manager and CDH 5.1.4</li>
<li class="li">Cloudera Manager and CDH 5.0.5</li>
<li class="li">CDH 4.7.1</li>
<li class="li">Cloudera Manager 4.8.5</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All users</p>
<p class="p"><strong class="ph b">Date and time of detection:</strong> October 14th, 2014.</p>
<p class="p"><strong class="ph b">Severity:</strong> (Low/Medium/High): Medium. NIST rates the severity at 4.3 out of 10 .</p>
<p class="p"><strong class="ph b">Impact:</strong> Allows unauthorized disclosure of information; allows component impersonation.</p>
<p class="p"><strong class="ph b">CVE:</strong> <a class="xref" href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-3566" target="_blank">CVE-2014-3566</a></p>
<div class="p"><strong class="ph b">Immediate action required:</strong>Upgrade CDH and Cloudera Manager as follows:
<ul class="ul" id="concept_ckc_4j5_1q__ul_hcz_1l5_1q">
<li class="li">If you are running Cloudera Manager and CDH 5.2.0, upgrade to Cloudera Manager and CDH 5.2.1</li>
<li class="li">If you are running Cloudera Manager and CDH 5.1.0 through 5.1.3, upgrade to Cloudera Manager and CDH 5.1.4</li>
<li class="li">If you are running Cloudera Manager and CDH 5.0.0 through 5.0.4, upgrade to Cloudera Manager and CDH 5.0.5</li>
<li class="li">If you are running a CDH version earlier than 4.7.1, upgrade to CDH 4.7.1</li>
<li class="li">If you are running a Cloudera Manager version earlier than 4.8.5, upgrade to Cloudera Manager 4.8.5</li>
</ul>
</div>
</div>
</section>
</section>
<section class="nested1" id="cdsw_section"><a id="cdsw" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Data Science Workbench</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Cloudera Data Science Workbench.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#TSB-349">TSB-349: SQL Injection Vulnerability in Cloudera Data Science Workbench</a></li>
<li class="minitoc-entry"><a href="#TSB-350">TSB-350: Risk of Data Loss During Cloudera Data Science Workbench (CDSW) Shutdown and Restart</a></li>
<li class="minitoc-entry"><a href="#TSB-351">TSB-351: Unauthorized Project Access in Cloudera Data Science Workbench</a></li>
<li class="minitoc-entry"><a href="#TSB-346">TSB-346: Risk of Data Loss During Cloudera Data Science Workbench (CDSW) Shutdown and Restart</a></li>
<li class="minitoc-entry"><a href="#TSB-328">TSB-328: Unauthenticated User Enumeration in Cloudera Data Science Workbench</a></li>
<li class="minitoc-entry"><a href="#TSB-313">TSB-313: Remote Command Execution and Information Disclosure in Cloudera Data Science Workbench</a></li>
<li class="minitoc-entry"><a href="#TSB-248">TSB-248: Privilege Escalation and Database Exposure in Cloudera Data Science Workbench</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="TSB-349_section"><a id="TSB-349" class="anchor"></a>
<h3 class="title topictitle3">TSB-349: SQL Injection Vulnerability in Cloudera Data Science Workbench</h3>
<div class="body conbody">
<p dir="ltr" class="p">An SQL injection vulnerability was found in Cloudera Data Science Workbench. This would allow any authenticated user to run arbitrary queries against CDSW’s internal database.
The database contains user contact information, bcrypt-hashed CDSW passwords (in the case of local authentication), API keys, and stored Kerberos keytabs.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench (CDSW)</p>
<p dir="ltr" class="p"><strong class="ph b">Releases affected:</strong> CDSW 1.4.0, 1.4.1, 1.4.2</p>
<p dir="ltr" class="p"><strong class="ph b">Users affected:</strong> All</p>
<p dir="ltr" class="p"><strong class="ph b">Date/time of detection:</strong> 2018-10-18</p>
<p dir="ltr" class="p"><strong class="ph b">Detected by:</strong> Milan Magyar (Cloudera)</p>
<p dir="ltr" class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Critical (9.9): <a class="xref" href="https://www.first.org/cvss/specification-document" target="_blank"><u class=
"ph u">CVSS</u></a>:3.0/AV:N/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H</p>
<p dir="ltr" class="p"><strong class="ph b">Impact:</strong> An authenticated CDSW user can arbitrarily access and modify the CDSW internal database. This allows privilege escalation in CDSW,
kubernetes, and the linux host; creation, deletion, modification, and exfiltration of data, code, and credentials; denial of service; and data loss.</p>
<p dir="ltr" class="p"><strong class="ph b">CVE:</strong> CVE-2018-20091</p>
<p dir="ltr" class="p"><strong class="ph b">Immediate action required:</strong></p>
<ol class="ol">
<li dir="ltr" class="li">
<p dir="ltr" class="p">Strongly consider performing a backup before beginning. We advise you to have a <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_bdr.html" target="_blank"><u class="ph u">backup</u></a> before performing any upgrade and before beginning this
remediation work.</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p"><a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/1-4-x/topics/cdsw_install.html" target="_blank">Upgrade to Cloudera Data Science Workbench
1.4.3 (or higher).</a></p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">In an abundance of caution Cloudera recommends that you revoke credentials and secrets stored by CDSW. To revoke these credentials:</p>
<ol class="ol" type="a">
<li dir="ltr" class="li">
<p dir="ltr" class="p">Change the password for any account with a keytab or kerberos credential that has been stored in CDSW. This includes the Kerberos principals for the associated CDH cluster if
entered on the CDSW “Hadoop Authentication” user settings page.</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">With Cloudera Data Science Workbench 1.4.3 running, run the following remediation script <em class="ph i">on each CDSW node</em>, including the master and all workers:
<a class="xref" href="https://www.cloudera.com/documentation/other/shared/tsb-349.sh" target="_blank">Remediation Script for TSB-349</a></p>
<p class="p"><strong class="ph b">Note: Cloudera Data Science Workbench will become unavailable during this time.</strong></p>
</li>
<li dir="ltr" class="li">The script performs the following actions:
<ol class="ol" type="i">
<li dir="ltr" class="li">
<p dir="ltr" class="p">If using local user authentication, logs out every user and resets their CDSW password.</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">Regenerates or deletes various keys for every user.</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">Resets secrets used for internal communications.</p>
</li>
</ol>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">Fully stop and start Cloudera Data Science Workbench (a restart is not sufficient).</p>
<ul class="ul">
<li dir="ltr" class="li">
<p dir="ltr" class="p">For CSD-based deployments, <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_cm.html#start_stop" target="_blank"><u class=
"ph u">restart the CDSW service</u></a> in Cloudera Manager.</p>
<p class="p"><strong class="ph b"><em class="ph i">OR</em></strong></p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">For RPM-based deployments, run <samp class="ph codeph"><strong class="ph b">cdsw stop</strong></samp> followed by <samp class="ph codeph"><strong class="ph b">cdsw
start</strong></samp> on the CDSW master node.</p>
</li>
</ul>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">If using internal TLS termination: <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_tls_ssl.html#key_cert_requirements__create_csr" target="_blank">revoke and regenerate the CDSW TLS certificate and
key</a>.</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">For each user, revoke the previous CDSW-generated <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_ssh_keys.html#add_key_to_github" target="_blank"><u class="ph u">SSH public key for git integration on the git
side</u></a> (the private key in CDSW has already been deleted). A new SSH key pair has already been generated and should be installed in the old key’s place.</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">Revoke and regenerate any credential stored within a CDSW project, including any passwords stored in projects’ environment variables.</p>
</li>
</ol>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">Verify all CDSW settings to ensure they are unchanged (e.g. SMTP server, authentication settings, custom docker images, host mounts, etc).</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">Treat all CDSW hosts as potentially compromised with root access. Remediate per your policy.</p>
</li>
</ol>
<p dir="ltr" class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Data Science Workbench 1.4.3</p>
<p dir="ltr" class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p dir="ltr" class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-349?id=85423" target="_blank">TSB 2019-349: CDSW SQL Injection Vulnerability</a></p>
</div>
</section>
<section class="nested2" id="TSB-350_section"><a id="TSB-350" class="anchor"></a>
<h3 class="title topictitle3">TSB-350: Risk of Data Loss During Cloudera Data Science Workbench (CDSW) Shutdown and Restart</h3>
<div class="body conbody">
<p class="p">Stopping Cloudera Data Science Workbench involves unmounting the NFS volumes that store CDSW project directories and then cleaning up a folder where CDSW stores its temporary state.
However, due to a race condition, this NFS unmount process can take too long or fail altogether. If this happens, any CDSW projects that remain mounted will be deleted.</p>
<p class="p">TSB-2018-346 was released in the time-frame of CDSW 1.4.2 to fix this issue, but it only turned out to be a partial fix. With CDSW 1.4.3, we have fixed the issue permanently. However,
the <a class="xref" href="https://www.cloudera.com/documentation/other/shared/cdsw_protect_stop_restart.sh" target="_blank">script</a> that was provided with TSB-2018-346 still ensures that data loss
is prevented and must be used to shutdown/restart all the affected CDSW released listed below. The same script is also available under the <strong class="ph b">Immediate Action Required</strong>
section below.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench</p>
<div class="p"><strong class="ph b">Releases affected:</strong> Cloudera Data Science Workbench versions
<ul class="ul">
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.0.x</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.1.x</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.2.x</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.3.0, 1.3.1</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.4.0, 1.4.1, 1.4.2</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> This potentially affects all CDSW users.</p>
<p class="p"><strong class="ph b">Detected by:</strong> Nehmé Tohmé (Cloudera)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b" id="TSB-350__docs-internal-guid-053d4222-7fff-2c8a-9de4-19a5d16c7db4">Impact:</strong> Potential data loss.</p>
<p class="p"><strong class="ph b">CVE:</strong> N/A</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> If you are running any of the affected Cloudera Data Science Workbench versions, you must run the following script on the CDSW
master node every time before you stop or restart Cloudera Data Science Workbench. Failure to do so can result in data loss.</p>
<p class="p">This script should also be run before initiating a Cloudera Data Science Workbench upgrade. As always, we recommend <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_bdr.html" target="_blank">creating a full backup</a> prior to beginning an upgrade.</p>
<p class="p"><strong class="ph b">cdsw_protect_stop_restart.sh</strong> - Available for download at: <a class="xref" href="https://www.cloudera.com/documentation/other/shared/cdsw_protect_stop_restart.sh" target="_blank">cdsw_protect_stop_restart.sh</a>.</p>
<pre class="pre codeblock cdoc-input-file">#!/bin/bash

set -e

cat &lt;&lt; EXPLANATION


This script is a workaround for Cloudera TSB-346 and TSB-350. It protects your
CDSW projects from a rare race condition that can result in data loss.
Run this script before stopping the CDSW service, irrespective of whether
the stop precedes a restart, upgrade, or any other task.

Run this script only on the master node of your CDSW cluster.

You will be asked to specify a target folder on the master node where the
script will save a backup of all your project files. Make sure the target
folder has enough free space to accommodate all of your project files. To
determine how much space is required, run 'du -hs /var/lib/cdsw/current/projects'
on the CDSW master node.

This script will first back up your project files to the specified target
folder. It will then temporarily move your project files aside to protect
against the data loss condition. At that point, it is safe to stop the CDSW
service. After CDSW has stopped, the script will move the project files back
into place.

Note: This workaround is not required for CDSW 1.4.3 and higher.



EXPLANATION

read -p "Enter target folder for backups: " backup_target

echo "Backing up to $backup_target..."
rsync -azp /var/lib/cdsw/current/projects "$backup_target"

read -n 1 -p "Backup complete. Press enter when you are ready to stop CDSW: "

echo "Deleting all Kubernetes resources..."
kubectl delete configmaps,deployments,daemonsets,replicasets,services,ingress,secrets,persistentvolumes,persistentvolumeclaims,jobs --all
kubectl delete pods --all

echo "Temporarily saving project files to /var/lib/cdsw/current/projects_tmp..."
mkdir /var/lib/cdsw/current/projects_tmp
mv /var/lib/cdsw/current/projects/* /var/lib/cdsw/current/projects_tmp

echo -e "Please stop the CDSW service."

read -n 1 -p "Press enter when CDSW has stopped: "

echo "Moving projects back into place..."
mv /var/lib/cdsw/current/projects_tmp/* /var/lib/cdsw/current/projects
rm -rf /var/lib/cdsw/current/projects_tmp

echo -e "Done. You may now upgrade or start the CDSW service."
echo -e "When CDSW is running, if desired, you may delete the backup data at $backup_target"</pre>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> This issue is fixed in Cloudera Data Science Workbench 1.4.3.</p>
<p class="p">Note that you are required to run the workaround script above when you upgrade from an affected version to a release with the fix. This helps guard against data loss when the affected
version needs to be shut down during the upgrade process.</p>
<p dir="ltr" class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-350?id=86166" target="_blank">TSB 2019-350: Risk of Data Loss During Cloudera Data Science Workbench (CDSW) Shutdown and
Restart</a></p>
</div>
</section>
<section class="nested2" id="TSB-351_section"><a id="TSB-351" class="anchor"></a>
<h3 class="title topictitle3">TSB-351: Unauthorized Project Access in Cloudera Data Science Workbench</h3>
<div class="body conbody">
<p dir="ltr" class="p">Malicious CDSW users can bypass project permission checks and gain read-write access to any project folder in CDSW.</p>
<p dir="ltr" class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench</p>
<p dir="ltr" class="p"><strong class="ph b">Releases affected:</strong> Cloudera Data Science Workbench 1.4.0, 1.4.1, 1.4.2</p>
<p dir="ltr" class="p"><strong class="ph b">Users affected:</strong> All CDSW Users</p>
<p dir="ltr" class="p"><strong class="ph b">Date/time of detection:</strong> 10/29/2018</p>
<p dir="ltr" class="p"><strong class="ph b">Detected by:</strong> Che-Yuan Liang (Cloudera)</p>
<p dir="ltr" class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High (8.3: <a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:L" target="_blank"><u class="ph u">CVSS</u></a>:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:L)</p>
<p dir="ltr" class="p"><strong class="ph b">Impact:</strong> Project data can be read or written (changed, destroyed) by any Cloudera Data Science Workbench user.</p>
<p dir="ltr" class="p"><strong class="ph b">CVE:</strong> CVE-2018-20090</p>
<p dir="ltr" class="p"><strong class="ph b">Immediate action required:</strong></p>
<p dir="ltr" class="p">Upgrade to a version of Cloudera Data Science Workbench with the fix (version 1.4.3, 1.5.0, or higher).</p>
<p dir="ltr" class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Data Science Workbench 1.4.3 (and higher)</p>
<p dir="ltr" class="p"><em class="ph i">For the latest update on this issue see the corresponding Knowledge article:</em></p>
<p dir="ltr" class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-351-Unauthorized-Project-Access-in-Cloudera-Data?id=86168" target="_blank">TSB 2019-351: Unauthorized Project
Access in Cloudera Data Science Workbench</a></p>
</div>
</section>
<section class="nested2" id="TSB-346_section"><a id="TSB-346" class="anchor"></a>
<h3 class="title topictitle3">TSB-346: Risk of Data Loss During Cloudera Data Science Workbench (CDSW) Shutdown and Restart</h3>
<div class="body conbody">
<p class="p">Stopping Cloudera Data Science Workbench involves unmounting the NFS volumes that store CDSW project directories and then cleaning up a folder where the kubelet stores its temporary
state. However, due to a race condition, this NFS unmount process can take too long or fail altogether. If this happens, CDSW projects that remain mounted will be deleted by the cleanup step.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench</p>
<div class="p"><strong class="ph b">Releases affected:</strong> Cloudera Data Science Workbench versions -
<ul class="ul">
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.0.x</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.1.x</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.2.x</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.3.0, 1.3.1</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">1.4.0, 1.4.1</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> This potentially affects all CDSW users.</p>
<p class="p"><strong class="ph b">Detected by:</strong> Nehmé Tohmé (Cloudera)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> If the NFS unmount fails during shutdown, data loss can occur. All CDSW project files might be deleted.</p>
<p class="p"><strong class="ph b">CVE:</strong> N/A</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> If you are running any of the affected Cloudera Data Science Workbench versions, you must run the following script on the CDSW
master node every time before you stop or restart Cloudera Data Science Workbench. Failure to do so can result in data loss.</p>
<p class="p">This script should also be run before initiating a Cloudera Data Science Workbench upgrade. As always, we recommend creating a full backup prior to beginning an upgrade.</p>
<p class="p"><strong class="ph b">cdsw_protect_stop_restart.sh</strong> - Available for download at: <a class="xref" href="https://www.cloudera.com/documentation/other/shared/cdsw_protect_stop_restart.sh" target="_blank">cdsw_protect_stop_restart.sh</a>.</p>
<pre class="pre codeblock cdoc-input-file">#!/bin/bash

set -e

cat &lt;&lt; EXPLANATION


This script is a workaround for Cloudera TSB-346. It protects your
CDSW projects from a rare race condition that can result in data loss.
Run this script before stopping the CDSW service, irrespective of whether
the stop precedes a restart, upgrade, or any other task.

Run this script only on the master node of your CDSW cluster.

You will be asked to specify a target folder on the master node where the
script will save a backup of all your project files. Make sure the target
folder has enough free space to accommodate all of your project files. To
determine how much space is required, run 'du -hs /var/lib/cdsw/current/projects'
on the CDSW master node.

This script will first back up your project files to the specified target
folder. It will then temporarily move your project files aside to protect
against the data loss condition. At that point, it is safe to stop the CDSW
service. After CDSW has stopped, the script will move the project files back
into place.

Note: This workaround is not required for CDSW 1.4.2 and higher.



EXPLANATION

read -p "Enter target folder for backups: " backup_target

echo "Backing up to $backup_target..."
rsync -azp /var/lib/cdsw/current/projects "$backup_target"

read -n 1 -p "Backup complete. Press enter when you are ready to stop CDSW: "

echo "Deleting all Kubernetes resources..."
kubectl delete configmaps,deployments,daemonsets,replicasets,services,ingress,secrets,persistentvolumes,persistentvolumeclaims,jobs --all
kubectl delete pods --all

echo "Temporarily saving project files to /var/lib/cdsw/current/projects_tmp..."
mkdir /var/lib/cdsw/current/projects_tmp
mv /var/lib/cdsw/current/projects/* /var/lib/cdsw/current/projects_tmp

echo -e "Please stop the CDSW service."

read -n 1 -p "Press enter when CDSW has stopped: "

echo "Moving projects back into place..."
mv /var/lib/cdsw/current/projects_tmp/* /var/lib/cdsw/current/projects
rm -rf /var/lib/cdsw/current/projects_tmp

echo -e "Done. You may now upgrade or start the CDSW service."
echo -e "When CDSW is running, if desired, you may delete the backup data at $backup_target"</pre>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> This issue is fixed in Cloudera Data Science Workbench 1.4.2.</p>
<p class="p">Note that you are required to run the workaround script above when you upgrade from an affected version to a release with the fix. This helps guard against data loss when the affected
version needs to be shut down during the upgrade process.</p>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p dir="ltr" class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-346?id=80986" target="_blank">TSB 2018-346: Risk of Data Loss During Cloudera Data Science Workbench (CDSW)
Shutdown and Restart</a></p>
</div>
</section>
<section class="nested2" id="TSB-328_section"><a id="TSB-328" class="anchor"></a>
<h3 class="title topictitle3">TSB-328: Unauthenticated User Enumeration in Cloudera Data Science Workbench</h3>
<div class="body conbody">
<p dir="ltr" class="p">Unauthenticated users can get a list of user accounts of Cloudera Data Science Workbench.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench</p>
<p dir="ltr" class="p"><strong class="ph b">Releases affected:</strong> Cloudera Data Science Workbench 1.4.0 (and lower)</p>
<p dir="ltr" class="p"><strong class="ph b">Users affected:</strong> All users of Cloudera Data Science Workbench 1.4.0 (and lower)</p>
<p dir="ltr" class="p"><strong class="ph b">Date/time of detection:</strong> June 11, 2018</p>
<p dir="ltr" class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 5.3 (Medium) <a class="xref" href="https://www.first.org/cvss/calculator/3.0" target="_blank"><u class=
"ph u">CVSS</u></a>:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:N</p>
<p dir="ltr" class="p"><strong class="ph b">Impact:</strong> Unauthenticated user enumeration in Cloudera Data Science Workbench.</p>
<p dir="ltr" class="p"><strong class="ph b">CVE:</strong> CVE-2018-15665</p>
<p dir="ltr" class="p"><strong class="ph b">Immediate action required:</strong> <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_install.html#upgrade_paths" target="_blank">Upgrade</a> to the latest version of Cloudera Data Science Workbench
(1.4.2 or higher).</p>
<p dir="ltr" class="p">Note that Cloudera Data Science Workbench 1.4.1 is no longer publicly available due to <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-346?id=80986" target=
"_blank">TSB 2018-346: Risk of Data Loss During Cloudera Data Science Workbench (CDSW) Shutdown and Restart</a>.</p>
<p dir="ltr" class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Data Science Workbench 1.4.2 (and higher)</p>
<p dir="ltr" class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p dir="ltr" class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-328?id=81294" target="_blank">TSB 2018-318: Unauthenticated User Enumeration in Cloudera Data Science
Workbench</a></p>
</div>
</section>
<section class="nested2" id="TSB-313_section"><a id="TSB-313" class="anchor"></a>
<h3 class="title topictitle3">TSB-313: Remote Command Execution and Information Disclosure in Cloudera Data Science Workbench</h3>
<div class="body conbody">
<p class="p">A configuration issue in Kubernetes used by Cloudera Data Science Workbench can allow remote command execution and privilege escalation in CDSW. A separate information permissions issue
can cause the LDAP bind password to be exposed to authenticated CDSW users when LDAP bind search is enabled.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench</p>
<p class="p"><strong class="ph b">Releases affected:</strong> Cloudera Data Science Workbench 1.3.0 (and lower)</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users of Cloudera Data Science Workbench 1.3.0 (and lower)</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 16, 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Remote command execution and information disclosure</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-11215</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_install.html#upgrade_paths" target="_blank">Upgrade</a> to the latest version of Cloudera Data Science Workbench
(1.3.1 or higher) and <a class="xref" href="https://www.cloudera.com/documentation/data-science-workbench/latest/topics/cdsw_external_authentication.html#ldap" target="_blank">change the LDAP bind
password</a> if previously configured in Cloudera Data Science Workbench.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Data Science Workbench 1.3.1 (and higher)</p>
<p class="p">For the latest update on this issue see the corresponding Knowledge Base article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-313?id=78191" target="_blank">TSB: 2018-313: Remote Command Execution and Information</a></p>
</div>
</section>
<section class="nested2" id="TSB-248_section"><a id="TSB-248" class="anchor"></a>
<h3 class="title topictitle3">TSB-248: Privilege Escalation and Database Exposure in Cloudera Data Science Workbench</h3>
<div class="body conbody">
<p class="p">Several web application vulnerabilities allow malicious authenticated Cloudera Data Science Workbench (CDSW) users to escalate privileges in CDSW. In combination, such users can exploit
these vulnerabilities to gain root access to CDSW nodes, gain access to the CDSW database which includes Kerberos keytabs of CDSW users and bcrypt hashed passwords, and obtain other privileged
information such as session tokens, invitations tokens, and environmental variables.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Data Science Workbench</p>
<p class="p"><strong class="ph b">Releases affected:</strong> Cloudera Data Science Workbench 1.0.0, 1.0.1, 1.1.0, 1.1.1</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users of Cloudera Data Science Workbench 1.0.0, 1.0.1, 1.1.0, 1.1.1</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> September 1, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> NCC Group</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Privilege escalation and database exposure.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-15536</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to the latest version of Cloudera Data Science Workbench.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Data Science Workbench 1.2.0 or higher.</p>
</div>
</section>
</section>
<section class="nested1" id="hadoop_section"><a id="hadoop" class="anchor"></a>
<h2 class="title topictitle2">Apache Hadoop</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache Hadoop.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_sky_fq1_cjb">XSS Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#concept_e1y_sf1_cjb">CVE-2018-1296 Permissive Apache Hadoop HDFS listXAttr Authorization Exposes Extended Attribute Key/Value Pairs</a></li>
<li class="minitoc-entry"><a href="#concept_qb3_3qy_m2b">Hadoop YARN Privilege Escalation</a></li>
<li class="minitoc-entry"><a href="#concept_rds_c4y_m2b">Zip Slip Vulnerability</a></li>
<li class="minitoc-entry"><a href="#tsb-270-cve-2018">Apache Hadoop MapReduce Job History Server (JHS) vulnerability</a></li>
<li class="minitoc-entry"><a href="#concept_xbl_v4z_ycb">No security exposure due to CVE-2017-3162 for Cloudera Hadoop clusters</a></li>
<li class="minitoc-entry"><a href="#tsb-cve-2017-3161-non-issue">Cross-site scripting exposure (CVE-2017-3161) not an issue for Cloudera Hadoop</a></li>
<li class="minitoc-entry"><a href="#tsb_133">Apache YARN NodeManager Password Exposure</a></li>
<li class="minitoc-entry"><a href="#tsb-157">Short-Circuit Read Vulnerability</a></li>
<li class="minitoc-entry"><a href="#tsb_175">Apache Hadoop Privilege Escalation Vulnerability</a></li>
<li class="minitoc-entry"><a href="#tsb_114">Encrypted MapReduce spill data on the local file system is vulnerable to unauthorized disclosure</a></li>
<li class="minitoc-entry"><a href="#id_ffb_b4r_1cb">Critical Security Related Files in YARN NodeManager Configuration Directories Accessible to Any User</a></li>
<li class="minitoc-entry"><a href="#concept_x25_jyz_gq">Apache Hadoop Distributed Cache Vulnerability</a></li>
<li class="minitoc-entry"><a href="#concept_i1q_xvk_2r">Some DataNode Admin Commands Do Not Check If Caller Is An HDFS Admin</a></li>
<li class="minitoc-entry"><a href="#concept_mfb_qpm_4n">JobHistory Server Does Not Enforce ACLs When Web Authentication is Enabled</a></li>
<li class="minitoc-entry"><a href="#concept_lfx_1w1_5k">Apache Hadoop and Apache HBase "Man-in-the-Middle" Vulnerability</a></li>
<li class="minitoc-entry"><a href="#topic_1_0_1">DataNode Client Authentication Disabled After NameNode Restart or HA Enable</a></li>
<li class="minitoc-entry"><a href="#topic_1_0">Several Authentication Token Types Use Secret Key of Insufficient Length</a></li>
<li class="minitoc-entry"><a href="#topic_1_0_2">MapReduce with Security</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_sky_fq1_cjb_section"><a id="concept_sky_fq1_cjb" class="anchor"></a>
<h3 class="title topictitle3"><strong class="ph b"><strong class="ph b"><strong class="ph b">XSS Cloudera Manager</strong></strong></strong></h3>
<div class="body conbody">
<p class="p">Malicious Impala queries can result in Cross Site Scripting (XSS) when viewed in Cloudera Manager.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala</p>
<p class="p">Releases affected:</p>
<ul class="ul" id="concept_sky_fq1_cjb__ul_tky_fq1_cjb">
<li class="li">Cloudera Manager 5.13.x, 5.14.x, 5.15.1, 5.15.2, 5.16.1</li>
<li class="li">Cloudera Manager 6.0.0, 6.0.1, 6.1.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All Cloudera Manager Users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> November 2018</p>
<p class="p"><strong class="ph b">Severity:</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> When a malicious user generates a piece of JavaScript in the impala-shell and then goes to the Queries tab of the Impala service in Cloudera
Manager, that piece of JavaScript code gets evaluated, resulting in an XSS.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2019-14449</p>
<p class="p"><strong class="ph b">Upgrade:</strong> Update to a version of CDH containing the fix.</p>
<p class="p"><strong class="ph b">Workaround:</strong> There is no workaround, upgrade to the latest available maintenance release.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="concept_sky_fq1_cjb__ul_uky_fq1_cjb">
<li class="li">Cloudera Manager 5.16.2</li>
<li class="li">Cloudera Manager 6.0.2, 6.1.1, 6.2.0, 6.3.0</li>
</ul>
</div>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-356?id=269029" target="_blank">TSB 2019-356: XSS Cloudera Manager</a></p>
</div>
</section>
<section class="nested2" id="concept_e1y_sf1_cjb_section"><a id="concept_e1y_sf1_cjb" class="anchor"></a>
<h3 class="title topictitle3"><strong class="ph b" id="docs-internal-guid-33da9242-7fff-696a-b16d-19307b353413"><strong class="ph b">CVE-2018-1296 Permissive Apache Hadoop HDFS listXAttr
Authorization Exposes Extended Attribute Key/Value Pairs</strong></strong></h3>
<div class="body conbody">
<p class="p">HDFS exposes extended attribute key/value pairs during listXAttrs, verifying only path-level search access to the directory rather than path-level read permission to the referent.</p>
<p class="p"><strong class="ph b">Products affected:</strong> HDFS</p>
<p class="p">Releases affected:</p>
<ul class="ul" id="concept_e1y_sf1_cjb__ul_f1y_sf1_cjb">
<li class="li">CDH 5.4.1-5.15.1, 5.16.0</li>
<li class="li">CDH 6.0.0, 6.0.1, 6.1.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> Users who store sensitive data in extended attributes, such as users of HDFS encryption.</p>
<p class="p"><strong class="ph b">Detected by:</strong> Rushabh Shah, Yahoo! Inc., Hadoop committer</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> December 12, 2017</p>
<p class="p"><strong class="ph b">Severity:</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> HDFS exposes extended attribute key/value pairs during listXAttrs, verifying only path-level search access to the directory rather than path-level
read permission to the referent. This affects features that store sensitive data in extended attributes.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-1296</p>
<p class="p"><strong class="ph b">Upgrade:</strong> Update to a version of CDH containing the fix.</p>
<p class="p"><strong class="ph b">Workaround:</strong> If a file contains sensitive data in extended attributes, users and admins need to change the permission to prevent others from listing the
directory that contains the file.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="concept_e1y_sf1_cjb__ul_g1y_sf1_cjb">
<li class="li">CDH 5.16.2, 5.16.1</li>
<li class="li">CDH 6.0.1, CDH 6.1.0 and higher</li>
</ul>
</div>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-302?id=269058" target="_blank">TSB 2019-302: CVE-2018-1296 Permissive Apache Hadoop HDFS listXAttr Authorization Exposes
Extended Attribute Key/Value Pairs</a></p>
</div>
</section>
<section class="nested2" id="concept_qb3_3qy_m2b_section"><a id="concept_qb3_3qy_m2b" class="anchor"></a>
<h3 class="title topictitle3">Hadoop YARN Privilege Escalation</h3>
<div class="body conbody">
<p class="p">A vulnerability in Hadoop YARN allows a user who can escalate to the yarn user to possibly run arbitrary commands as the root user.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hadoop YARN</p>
<p class="p">Releases affected:</p>
<ul class="ul">
<li class="li">All releases prior to CDH 5.16.0</li>
<li class="li">CDH 5.16.0 and CDH 5.16.1</li>
<li class="li">CDH 6.0.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> Users running the Hadoop YARN service.</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> 05/07/2018</p>
<p class="p"><strong class="ph b">Severity:</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> The vulnerability allows a user who has access to a node in the cluster running a YARN NodeManager and who can escalate to the yarn user to run
arbitrary commands as the root user even if the user is not allowed to escalate directly to the root user.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-8029</p>
<p class="p"><strong class="ph b">Upgrade:</strong> Upgrade to a release where the issue is fixed.</p>
<p class="p"><strong class="ph b">Workaround:</strong> The vulnerability can be mitigated by restricting access to the nodes where the YARN NodeManagers are deployed, and by ensuring that only the
yarn user is a member of the yarn group and can sudo to yarn. Please consult with your internal system administration team and adhere to your internal security policy when evaluating the feasibility
of the above mitigation steps.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="concept_qb3_3qy_m2b__ul_s3v_bcm_33b">
<li class="li">CDH 5.16.2</li>
<li class="li">CDH 6.0.1, CDH 6.1.0 and higher</li>
</ul>
</div>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-318?id=92138" target="_blank">TSB 2019-318: CVE-2018-8029 Hadoop YARN privilege escalation</a></p>
</div>
</section>
<section class="nested2" id="concept_rds_c4y_m2b_section"><a id="concept_rds_c4y_m2b" class="anchor"></a>
<h3 class="title topictitle3">Zip Slip Vulnerability</h3>
<div class="body conbody">
<p class="p">“Zip Slip” is a widespread arbitrary file overwrite critical vulnerability, which typically results in remote command execution. It was discovered and responsibly disclosed by the Snyk
Security team ahead of a public disclosure on June 5, 2018, and affects thousands of projects.</p>
<p class="p">Cloudera has analyzed our use of zip-related software, and has determined that only Apache Hadoop is vulnerable to this class of vulnerability in CDH 5. This has been fixed in upstream
Hadoop as CVE-2018-8009.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hadoop</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">CDH 5.12.x and all prior releases</li>
<li class="li">CDH 5.13.0, 5.13.1, 5.13.2, 5.13.3</li>
<li class="li">CDH 5.14.0, 5.14.2, 5.14.3</li>
<li class="li">CDH 5.15.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date of detection:</strong> April 19, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Snyk</p>
<p class="p"><strong class="ph b">Severity:</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Zip Slip is a form of directory traversal that can be exploited by extracting files from an archive. The premise of the directory traversal
vulnerability is that an attacker can gain access to parts of the file system outside of the target folder in which they should reside. The attacker can then overwrite executable files and either
invoke them remotely or wait for the system or user to call them, thus achieving remote command execution on the victim’s machine. The vulnerability can also cause damage by overwriting configuration
files or other sensitive resources, and can be exploited on both client (user) machines and servers.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-8009</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a version that contains the fix.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.14.4</p>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p">TSB: 2018-307: Zip Slip Vulnerability</p>
</div>
</section>
<section class="nested2" id="tsb-270-cve-2018_section"><a id="tsb-270-cve-2018" class="anchor"></a>
<h3 class="title topictitle3">Apache Hadoop MapReduce Job History Server (JHS) vulnerability</h3>
<div class="body conbody">
<p class="p">A vulnerability in Hadoop’s Job History Server allows a cluster user to expose private files owned by the user running the MapReduce Job History Server (JHS) process. See <a class="xref"
href="http://seclists.org/oss-sec/2018/q1/79" target="_blank">http://seclists.org/oss-sec/2018/q1/79</a> for reference.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Apache Hadoop MapReduce</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases prior to CDH 5.12.0. CDH 5.12.0, CDH 5.12.1, CDH 5.12.2, CDH 5.13.0, CDH 5.13.1, CDH 5.14.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users running the MapReduce Job History Server (JHS) daemon</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> November 8, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Man Yue Mo of lgtm.com</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> The vulnerability allows a cluster user to expose private files owned by the user running the MapReduce Job History Server (JHS) process. The
malicious user can construct a configuration file containing XML directives that reference sensitive files on the MapReduce Job History Server (JHS) host.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-15713</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a release where the issue is fixed.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.13.2</p>
</div>
</section>
<section class="nested2" id="concept_xbl_v4z_ycb_section"><a id="concept_xbl_v4z_ycb" class="anchor"></a>
<h3 class="title topictitle3">No security exposure due to CVE-2017-3162 for Cloudera Hadoop clusters</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Information only. No action required.</strong> In the spirit of being overly cautious, CVE-2017-3162 was filed by the Apache Hadoop community to document the ability
of the HDFS client (in the CDH 5.x code base) to browse the HDFS namespace without validating the NameNode as a query parameter.</p>
<p class="p">This benign exposure was discovered independently by Cloudera (as well as other members of the Hadoop community) during regular routine static source code analyses. It is considered
benign because there are no known attack vectors from this vulnerability.</p>
<p class="p"><strong class="ph b">Products affected:</strong> N/A</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 5.x and prior.</p>
<p class="p"><strong class="ph b">Users affected:</strong> None</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> None</p>
<p class="p"><strong class="ph b">Impact:</strong> No impact to Cloudera customers or others running Hadoop clusters.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-3162</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> No action required.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Not applicable.</p>
</div>
</section>
<section class="nested2" id="tsb-cve-2017-3161-non-issue_section"><a id="tsb-cve-2017-3161-non-issue" class="anchor"></a>
<h3 class="title topictitle3">Cross-site scripting exposure (CVE-2017-3161) not an issue for Cloudera Hadoop</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Information only: No action required.</strong> A vulnerability recently uncovered by the wider security community had already been caught and resolved by
Cloudera.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hadoop</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH prior to 5.2.6 specifically the HDFS web UI would have been exposed to this vulnerability.</p>
<p class="p"><strong class="ph b">Users affected:</strong> None</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> N/A</p>
<p class="p"><strong class="ph b">Impact:</strong> No impact to Cloudera customers or others running Hadoop clusters.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-3161</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> No action required.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> The vulnerability described by CVE-2017-3161 was previously caught and patched in the CDH code base back to 5.2.x. The
following Cloudera Hadoop clusters are safe from this vulnerability.
<ul class="ul" id="tsb-cve-2017-3161-non-issue__ul_w14_3bj_xbb">
<li class="li">CDH5.2.6</li>
<li class="li">CDH5.3.4, CDH5.3.5, CDH5.3.6, CDH5.3.8, CDH5.3.9, CDH5.3.10</li>
<li class="li">CDH5.4.3, CDH5.4.4, CDH5.4.5, CDH5.4.7, CDH5.4.8, CDH5.4.9, CDH5.4.10, CDH5.4.11</li>
<li class="li">CDH5.5.0 and all higher releases</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="tsb_133_section"><a id="tsb_133" class="anchor"></a>
<h3 class="title topictitle3">Apache YARN NodeManager Password Exposure</h3>
<div class="body conbody">
<p class="p">The YARN NodeManager in Apache Hadoop may leak the password for its credential store. This credential store is created by Cloudera Manager and contains sensitive information used by the
NodeManager. Any container launched by that NodeManager can gain access to the password that protects the credential store.</p>
<p class="p">Examples of sensitive information inside the credential store include a keystore password and an LDAP bind user password.</p>
<p class="p">The credential store is also protected by Unix file permissions. When managed by Cloudera Manager, the credential store is readable only by the yarn user and the hadoop group. As a
result, the scope of this leak is mitigated, making this a Low severity issue.</p>
<p class="p"><strong class="ph b">Products affected</strong>: YARN</p>
<div class="p"><strong class="ph b">Releases affected</strong>:
<ul class="ul" id="tsb_133__ul_gy5_ky3_xbb">
<li class="li">CDH 5.4.0, 5.4.1, 5.4.2, 5.4.3, 5.4.4, 5.4.5, 5.4.7, 5.4.8, 5.4.9, 5.4.10</li>
<li class="li">CDH 5.5.0, 5.5.1, 5.5.2, 5.5.3, 5.5.4</li>
<li class="li">CDH 5.6.0, 5.6.1</li>
<li class="li">CDH 5.7.0, 5.7.1, 5.7.2</li>
<li class="li">CDH 5.8.0, 5.8.1</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected</strong>: Cloudera Manager users who configure YARN to connect to external services (such as LDAP) that require a password, or who have enabled TLS
for YARN.</p>
<p class="p"><strong class="ph b">Date/time of detection</strong>: March 15, 2016</p>
<p class="p"><strong class="ph b">Detected by</strong>: Robert Kanter</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High)</strong>: Low (The credential store itself has restrictive permissions.)</p>
<p class="p"><strong class="ph b">Impact</strong>: Potential sensitive data exposure</p>
<p class="p"><strong class="ph b">CVE</strong>: CVE-2016-3086</p>
<p class="p"><strong class="ph b">Immediate action required</strong>: Upgrade to a release in which this has been addressed or higher.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch</strong>: CDH 5.4.11, CDH 5.5.5, CDH 5.6.2, CDH 5.7.3, CDH 5.8.2</p>
</div>
</section>
<section class="nested2" id="tsb-157_section"><a id="tsb-157" class="anchor"></a>
<h3 class="title topictitle3">Short-Circuit Read Vulnerability</h3>
<div class="body conbody">
<p class="p">In HDFS short-circuit reads, a local user on an HDFS DataNode may be able to create a block token that grants unauthorized read access to random files by guessing certain fields in the
token.</p>
<p class="p"><strong class="ph b">Products affected:</strong> HDFS</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb-157__ul_fxx_tbj_xbb">
<li class="li">CDH 5.0.0, 5.0.1, 5.0.2, 5.0.3, 5.0.4, 5.0.5, 5.0.6</li>
<li class="li">CDH 5.1.0, 5.1.2, 5.1.3, 5.1.4, 5.1.5</li>
<li class="li">CDH 5.2.0, 5.2.1, 5.2.3, 5.2.4, 5.2.5, 5.2.6</li>
<li class="li">CDH 5.3.0, 5.3.2, 5.3.3, 5.3.4, 5.3.5, 5.3.6, 5.3.8, 5.3.9, 5.3.10</li>
<li class="li">CDH 5.4.0, 5.4.1, 5.4.3, 5.4.4, 5.4.5, 5.4.7, 5.4.8, 5.4.9, 5.4.10, 5.4.11</li>
<li class="li">CDH 5.5.0, 5.5.1, 5.5.2, 5.5.4, 5.5.5, 5.5.6</li>
<li class="li">CDH 5.6.0, 5.6.1</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All HDFS users</p>
<p class="p"><strong class="ph b">Detected by:</strong> This issue was reported by Kihwal Lee of Yahoo Inc.</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> A local user may be able to gain unauthorized read access to block data.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-5001</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a fixed version.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> 5.7.0 and higher, 5.8.0 and higher, 5.9.0 and higher.</p>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2016-157" target="_blank">TSB 2016-157: Short-Circuit Read Vulnerability</a></p>
</div>
</section>
<section class="nested2" id="tsb_175_section"><a id="tsb_175" class="anchor"></a>
<h3 class="title topictitle3">Apache Hadoop Privilege Escalation Vulnerability</h3>
<div class="body conbody">
<p class="p">A remote user who can authenticate with the HDFS NameNode can possibly run arbitrary commands as the hdfs user.</p>
<p class="p">See CVE-2016-5393 Apache Hadoop Privilege escalation vulnerability</p>
<p class="p"><strong class="ph b">Products affected:</strong> HDFS and YARN</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 5.0.0, 5.0.1, 5.0.2, 5.0.3, 5.0.4, 5.0.5, 5.0.6</p>
<p class="p">CDH 5.1.0, 5.1.2, 5.1.3, 5.1.4, 5.1.5</p>
<p class="p">CDH 5.2.0, 5.2.1, 5.2.3, 5.2.4, 5.2.5, 5.2.6</p>
<p class="p">CDH 5.3.0, 5.3.2, 5.3.3, 5.3.4, 5.3.5, 5.3.6, 5.3.8, 5.3.9, 5.3.10</p>
<p class="p">CDH 5.4.0, 5.4.1, 5.4.3, 5.4.4, 5.4.5, 5.4.7, 5.4.8, 5.4.9, 5.4.10</p>
<p class="p">CDH 5.5.0, 5.5.1, 5.5.2, 5.5.4</p>
<p class="p">CDH 5.6.0, 5.6.1</p>
<p class="p">CDH 5.7.0, 5.7.1, 5.7.2</p>
<p class="p">CDH 5.8.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> July 26th, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> A remote user who can authenticate with the HDFS NameNode can possibly run arbitrary commands with the same privileges as the HDFS service.</p>
<p class="p">This vulnerability is critical because it is easy to exploit and compromises system-wide security. As a result, a remote user can potentially run any arbitrary command as the hdfs user.
This bypasses all Hadoop security. There is no mitigation for this vulnerability.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-5393</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade immediately.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.4.11, CDH 5.5.5, CDH 5.7.3, CDH 5.8.2, CDH 5.9.0 and higher.</p>
</div>
</section>
<section class="nested2" id="tsb_114_section"><a id="tsb_114" class="anchor"></a>
<h3 class="title topictitle3">Encrypted MapReduce spill data on the local file system is vulnerable to unauthorized disclosure</h3>
<div class="body conbody">
<p class="p">MapReduce spills intermediate data to the local disk. The encryption key used to encrypt this spill data is stored in clear text on the local filesystem along with the encrypted data
itself. A malicious user with access to the file with these credentials can load the tokens from the file, read the key, and then decrypt the spill data.</p>
<p class="p">See the <a class="xref" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-1776" target="_blank">upstream announcement on the Mitre site</a>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> MapReduce</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 5.2.0, CDH 5.2.1, CDH 5.2.3, CDH 5.2.4, CDH 5.2.5, CDH 5.2.6</p>
<p class="p">CDH 5.3.0, CDH 5.3.2, CDH 5.3.3, CDH 5.3.4, CDH 5.3.5, CDH 5.3.6, CDH 5.3.8, CDH 5.3.9</p>
<p class="p">CDH 5.4.0, CDH 5.4.1, CDH 5.4.3, CDH 5.4.4, CDH 5.4.5, CDH 5.4.7, CDH 5.4.8, CDH 5.4.9</p>
<p class="p">CDH 5.5.0, CDH 5.5.1, CDH 5.5.2</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users who have enabled encryption of MapReduce intermediate/spilled data to the local filesystem</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-1776</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.3.10, CDH 5.4.10, CDH 5.5.4; CDH 5.6.0 and higher</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to one of the above releases if you use spill data encryption. This security fix causes MapReduce ApplicationMaster
failures to not be tolerated when spill data is encrypted; post-upgrade, individual MapReduce jobs might fail if the ApplicationMaster goes down.</p>
</div>
</section>
<section class="nested2" id="id_ffb_b4r_1cb_section"><a id="id_ffb_b4r_1cb" class="anchor"></a>
<h3 class="title topictitle3">Critical Security Related Files in YARN NodeManager Configuration Directories Accessible to Any User</h3>
<div class="body conbody">
<p class="p">When Cloudera Manager starts a YARN NodeManager, it makes all files in its configuration directory (typically /var/run/cloudera-scm-agent/process) readable by all users. This includes
the file containing the Kerberos keytabs (yarn.keytab) and the file containing passwords for the SSL keystore (ssl-server.xml).</p>
<p class="p">Global read permissions must be removed on the NodeManager’s security-related files.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases of Cloudera Manager 4.0 and higher.</p>
<p class="p"><strong class="ph b">Users affected:</strong> Customers who are using YARN in environments where Kerberos or SSL is enabled.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> March 8, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Any user who can log in to a host where the YARN NodeManager is running can get access to the keytab file, use it to authenticate to the cluster,
and perform unauthorized operations. If SSL is enabled, the user can also decrypt data transmitted over the network.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-2263</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ol class="ol" id="id_ffb_b4r_1cb__d22e1043">
<li class="li">If you are running YARN with Kerberos/SSL with Cloudera Manager 5.x, upgrade to the maintenance release with the security fix. If you are running YARN with Kerberos with Cloudera
Manager 4.x, upgrade to any Cloudera Manager 5.x release with the security fix.</li>
<li class="li">Delete all “yarn” and “HTTP” principals from KDC/Active Directory. After deleting them, regenerate them using Cloudera Manager.</li>
<li class="li">Regenerate SSL keystores that you are using with the YARN service, using a new password.</li>
</ol>
</div>
<p class="p"><strong class="ph b">ETA for resolution:</strong> Patches are available immediately with the release of this TSB.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager releases 5.0.6, 5.1.5, 5.2.5, 5.3.3, and 5.4.0 have the fix for this bug.</p>
<p class="p">For further updates on this issue see the corresponding Knowledge article:</p>
<p class="p"><strong class="ph b" id="id_ffb_b4r_1cb__d22e1071"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2015-48?elq=2b33f39a36e24943ae41b085a78d369a&amp;elqCampaignId=" target="_blank">Critical Security related Files in the YARN NodeManager
Configuration Directories can be Accessed by any User</a></strong></p>
</div>
</section>
<section class="nested2" id="concept_x25_jyz_gq_section"><a id="concept_x25_jyz_gq" class="anchor"></a>
<h3 class="title topictitle3">Apache Hadoop Distributed Cache Vulnerability</h3>
<div class="body conbody">
<p dir="ltr" class="p">The Distributed Cache Vulnerability allows a malicious cluster user to expose private files owned by the user running the YARN NodeManager process. The malicious user can
create a public tar archive containing a symbolic link to a local file on the host running the YARN NodeManager process.</p>
<p class="p"><strong class="ph b">Products affected:</strong> YARN in CDH 5.</p>
<div class="p"><strong class="ph b">Releases affected:</strong> All CDH and Cloudera Manager versions earlier than the versions listed below:
<ul class="ul" id="concept_x25_jyz_gq__ul_ukg_jc1_hq">
<li class="li">Cloudera Manager and CDH 5.2.1</li>
<li class="li">Cloudera Manager and CDH 5.1.4</li>
<li class="li">Cloudera Manager and CDH 5.0.5</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Users running the YARN NodeManager daemon with Kerberos authentication.</p>
<p class="p"><strong class="ph b">Severity:</strong> (Low/Medium/High): High.</p>
<p class="p"><strong class="ph b">Impact:</strong> Allows unauthorized disclosure of information.</p>
<p class="p"><strong class="ph b">CVE:</strong> <a class="xref" href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-3627" target="_blank">CVE-2014-3627</a></p>
<div class="p"><strong class="ph b">Immediate action required:</strong>Upgrade CDH and Cloudera Manager as follows:
<ul class="ul" id="concept_x25_jyz_gq__ul_emg_jc1_hq">
<li class="li">If you are running Cloudera Manager and CDH 5.2.0, upgrade to Cloudera Manager and CDH 5.2.1</li>
<li class="li">If you are running Cloudera Manager and CDH 5.1.0 through 5.1.3, upgrade to Cloudera Manager and CDH 5.1.4</li>
<li class="li">If you are running Cloudera Manager and CDH 5.0.0 through 5.0.4, upgrade to Cloudera Manager and CDH 5.0.5</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="concept_i1q_xvk_2r_section"><a id="concept_i1q_xvk_2r" class="anchor"></a>
<h3 class="title topictitle3">Some DataNode Admin Commands Do Not Check If Caller Is An HDFS Admin</h3>
<div class="body conbody">
<p class="p">Three HDFS admin commands—<samp class="ph codeph">refreshNamenodes</samp>, <samp class="ph codeph">deleteBlockPool</samp>, and <samp class="ph codeph">shutdownDatanode</samp>—lack proper
privilege checks in Apache Hadoop 0.23.x prior to 0.23.11 and 2.x prior to 2.4.1, allowing arbitrary users to make DataNodes unnecessarily refresh their federated NameNode configs, delete inactive
block pools, or shut down. The <samp class="ph codeph">shutdownDatanode</samp> command was first introduced in 2.4.0 and <samp class="ph codeph">refreshNamenodes</samp> and <samp class=
"ph codeph">deleteBlockPool</samp> were added in 0.23.0. The <samp class="ph codeph">deleteBlockPool</samp> command does not actually remove any underlying data from affected DataNodes, so there is
no data loss possibility due to this vulnerability, although cluster operations can be severely disrupted.</p>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="concept_i1q_xvk_2r__ul_gjf_vwk_2r">
<li class="li">Hadoop HDFS</li>
</ul>
<strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_i1q_xvk_2r__ul_i52_nxk_2r">
<li class="li">CDH 5.0.0 and CDH 5.0.1</li>
</ul>
<strong class="ph b">Users affected:</strong>
<ul class="ul" id="concept_i1q_xvk_2r__ul_lvd_qxk_2r">
<li class="li">All users running an HDFS cluster configured with Kerberos security</li>
</ul>
<strong class="ph b">Date/time of detection:</strong>
<ul class="ul" id="concept_i1q_xvk_2r__ul_urg_vxk_2r">
<li class="li">April 30, 2014</li>
</ul>
<strong class="ph b">Severity:</strong> Medium</div>
<p class="p"><strong class="ph b">Impact:</strong> Through HDFS admin command-line tools, non-admin users can shut down DataNodes or force them to perform unnecessary operations.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2014-0229</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to CDH 5.0.2 or higher.</p>
</div>
</section>
<section class="nested2" id="concept_mfb_qpm_4n_section"><a id="concept_mfb_qpm_4n" class="anchor"></a>
<h3 class="title topictitle3">JobHistory Server Does Not Enforce ACLs When Web Authentication is Enabled</h3>
<div class="body conbody">
<p class="p">The JobHistory Server does not enforce job ACLs when web authentication is enabled. This means that any user can see details of all jobs. This only affects users who are using MRv2/YARN
with HTTP authentication enabled.</p>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="concept_mfb_qpm_4n__ul_q22_vpm_4n">
<li class="li">Hadoop</li>
</ul>
</div>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_mfb_qpm_4n__ul_wpp_1qm_4n">
<li class="li">All versions of CDH 4.5.x up to 4.5.0</li>
<li class="li">All versions of CDH 4.4.x up to 4.4.0</li>
<li class="li">All versions of CDH 4.3.x up to 4.3.1</li>
<li class="li">All versions of CDH 4.2.x up to 4.2.2</li>
<li class="li">All versions of CDH 4.1.x up to 4.1.5</li>
<li class="li">All versions of CDH 4.0.x</li>
<li class="li">CDH 5.0.0 Beta 1</li>
</ul>
</div>
<div class="p"><strong class="ph b">Users affected:</strong>
<ul class="ul" id="concept_mfb_qpm_4n__ul_w22_vpm_4n">
<li class="li">Users of YARN who have web authentication enabled.</li>
</ul>
</div>
<p class="p"><strong class="ph b">Date/time of detection:</strong> October 14, 2013</p>
<div class="p"><strong class="ph b">Severity:</strong> Low
<aside class="note note"><span class="title">Note:</span> YARN is an experimental feature in CDH 4; it is no longer experimental in CDH 5.</aside>
</div>
<p class="p"><strong class="ph b">Impact:</strong> Low</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2013-6446</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ul class="ul" id="concept_mfb_qpm_4n__ul_y22_vpm_4n">
<li class="li">None, if you are not using MRv2/YARN with HTTP authentication.</li>
<li class="li">If you are using MRv2/YARN with HTTP authentication, upgrade to CDH 4.6.0 or CDH 5.0.0 Beta 2 or contact Cloudera for a patch.</li>
</ul>
</div>
<p class="p"><strong class="ph b">ETA for resolution:</strong> Fixed in CDH 5.0.0 Beta 2 released on 2/10/2014 and CDH 4.6.0 released on 2/27/2014.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 4.6.0 and CDH 5.0.0 Beta 2.</p>
<p class="p"><strong class="ph b">Verification:</strong></p>
<p class="p">This vulnerability affects the JobHistory Server Web Services; it does not affect the JobHistory Server Web UI.</p>
<aside class="note important"><span class="title">Important:</span>
<p class="p">The vulnerability is exposed only when the JobHistory Server HTTP endpoint is configured with an authentication filter (such as Hadoop's built-in AuthenticationFilter or a custom filter)
that populates the <samp class="ph codeph">HttpServletRequest.getRemoteUser()</samp> that is propagated to the JobHistory Server. This configuration is independent of the Hadoop cluster being
configured with Kerberos security.</p>
</aside>
<div class="p">To verify that the vulnerability has been fixed, do the following steps:
<ol class="ol" id="concept_mfb_qpm_4n__ol_hlm_jsm_4n">
<li class="li">Create two non-admin users: 'A' and 'B'</li>
<li class="li">Submit a MapReduce job as user 'A'. For example:
<pre class="pre codeblock">$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.0.0-SNAPSHOT.jar pi 2 2</pre></li>
<li class="li">From the output of the above submission, copy the job ID, for example: <samp class="ph codeph">job_1389847214537_0001</samp></li>
<li class="li">With a browser logged in to the JobHistory Server Web UI as user 'B', access the following URL:
<p class="p"><samp class="ph codeph">http://&lt;JHS_HOST&gt;:19888/ws/v1/history/mapreduce/jobs/job_1389847214537_0001</samp></p>
</li>
</ol>
</div>
<p class="p">If the vulnerability has been fixed, you should get an <samp class="ph codeph">HTTP UNAUTHORIZED</samp> response; if the vulnerability has not been fixed, you should get an XML output
with basic information about the job.</p>
</div>
</section>
<section class="nested2" id="concept_lfx_1w1_5k_section"><a id="concept_lfx_1w1_5k" class="anchor"></a>
<h3 class="title topictitle3">Apache Hadoop and Apache HBase "Man-in-the-Middle" Vulnerability</h3>
<div class="body conbody">
<p class="p">The Apache Hadoop and HBase RPC protocols are intended to provide bi-directional authentication between clients and servers. However, a malicious server or network attacker can
unilaterally disable these authentication checks. This allows for potential reduction in the configured quality of protection of the RPC traffic, and privilege escalation if authentication
credentials are passed over RPC.</p>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="concept_lfx_1w1_5k__ul_y5k_fw1_5k">
<li class="li">Hadoop</li>
<li class="li">HBase</li>
</ul>
</div>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_lfx_1w1_5k__ul_gvk_fw1_5k">
<li class="li">All versions of CDH 4.3.x prior to 4.3.1</li>
<li class="li">All versions of CDH 4.2.x prior to 4.2.2</li>
<li class="li">All versions of CDH 4.1.x prior to 4.1.5</li>
<li class="li">All versions of CDH 4.0.x</li>
</ul>
</div>
<div class="p"><strong class="ph b">Users affected:</strong>
<ul class="ul" id="concept_lfx_1w1_5k__ul_vwk_fw1_5k">
<li class="li">Users of HDFS who have enabled Hadoop Kerberos security features and HDFS data encryption features.</li>
<li class="li">Users of MapReduce or YARN who have enabled Hadoop Kerberos security features.</li>
<li class="li">Users of HBase who have enabled HBase Kerberos security features and who run HBase co-located on a cluster with MapReduce or YARN.</li>
</ul>
</div>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 10th, 2013</p>
<p class="p"><strong class="ph b">Severity:</strong> Severe</p>
<p class="p"><strong class="ph b">Impact:</strong></p>
<p class="p">RPC traffic from Hadoop clients, potentially including authentication credentials, may be intercepted by any user who can submit jobs to Hadoop. RPC traffic from HBase clients to Region
Servers may be intercepted by any user who can submit jobs to Hadoop.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2013-2192 (Hadoop) and CVE-2013-2193 (HBase)</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ul class="ul" id="concept_lfx_1w1_5k__ul_axk_fw1_5k">
<li class="li">
<p class="p">Users of CDH 4.3.0 should immediately upgrade to CDH 4.3.1 or higher.</p>
</li>
<li class="li">
<p class="p">Users of CDH 4.2.x should immediately upgrade to CDH 4.2.2 or higher.</p>
</li>
<li class="li">
<p class="p">Users of CDH 4.1.x should immediately upgrade to CDH 4.1.5 or higher.</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">ETA for resolution:</strong> August 23, 2013</p>
<p class="p"><strong class="ph b" id="concept_lfx_1w1_5k__docs-internal-guid-1f578e98-c4f1-9f03-41b0-916e83f976e2">Addressed in release/refresh/patch:</strong> CDH 4.1.5, CDH 4.2.2, and CDH
4.3.1.</p>
<p class="p"><strong class="ph b" id="concept_lfx_1w1_5k__docs-internal-guid-1f578e98-c4f1-2284-8493-3781035340d6">Verification:</strong></p>
<p class="p">To verify that you are not affected by this vulnerability, ensure that you are running a version of CDH at or higher than the aforementioned versions. To verify that this is true,
proceed as follows.</p>
<div class="p">On all of the cluster hosts, run one of the following commands:
<ul class="ul" id="concept_lfx_1w1_5k__ul_ghq_mtc_gl">
<li class="li">
<pre class="pre codeblock">On RPM-based systems (RHEL, SLES) rpm -qi hadoop | grep -i version</pre></li>
<li class="li">On Debian-based systems
<pre class="pre codeblock">dpkg -s hadoop | grep -i version</pre></li>
</ul>
Make sure that the version listed is greater than or equal to 4.1.5 for the 4.1.x line, 4.2.2 for the 4.2.x line, and 4.3.1 for the 4.3.x line. The 4.4.x and higher lines of releases are
unaffected.</div>
</div>
</section>
<section class="nested2" id="topic_1_0_1_section"><a id="topic_1_0_1" class="anchor"></a>
<h3 class="title topictitle3">DataNode Client Authentication Disabled After NameNode Restart or HA Enable</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected</strong>: HDFS</p>
<p class="p"><strong class="ph b">Releases affected</strong>: CDH 4.0.0</p>
<p class="p"><strong class="ph b">Users affected</strong>: Users of HDFS who have enabled HDFS Kerberos security features.</p>
<p class="p"><strong class="ph b">Date vulnerability discovered</strong>: June 26, 2012</p>
<p class="p"><strong class="ph b">Date vulnerability analysis and validation complete:</strong> June 29, 2012</p>
<p class="p"><strong class="ph b">Severity</strong>: Severe</p>
<p class="p"><strong class="ph b">Impact</strong>: Malicious clients may gain write access to data for which they have read-only permission, or gain read access to any data blocks whose IDs they can
determine.</p>
<p class="p"><strong class="ph b">Mechanism</strong>: When Hadoop security features are enabled, clients authenticate to DataNodes using BlockTokens issued by the NameNode to the client. The
DataNodes are able to verify the validity of a BlockToken, and will reject BlockTokens that were not issued by the NameNode. The DataNode determines whether or not it should check for BlockTokens
when it registers with the NameNode.</p>
<p class="p">Due to a bug in the DataNode/NameNode registration process, a DataNode which registers more than once for the same block pool will conclude that it thereafter no longer needs to check
for BlockTokens sent by clients. That is, the client will continue to send BlockTokens as part of its communication with DataNodes, but the DataNodes will not check the validity of the tokens. A
DataNode will register more than once for the same block pool whenever the NameNode restarts, or when HA is enabled.</p>
<p class="p"><strong class="ph b">Immediate action required</strong>:</p>
<ol class="ol" id="topic_1_0_1__ol_q2g_1w1_5k">
<li class="li">Understand the vulnerability introduced by restarting the NameNode, or enabling HA.</li>
<li class="li">Upgrade to CDH 4.0.1 as soon as it becomes available.</li>
</ol>
<p class="p"><strong class="ph b">Resolution</strong>: July 6, 2012</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch</strong>: CDH 4.0.1 This release addresses the vulnerability identified by CVE-2012-3376.</p>
<p class="p"><strong class="ph b">Verification</strong>: On the NameNode run one of the following:</p>
<ul class="ul" id="topic_1_0_1__ul_efg_1w1_5k">
<li class="li"><samp class="ph codeph">yum list hadoop-hdfs-namenode</samp> on RPM-based systems</li>
<li class="li"><samp class="ph codeph">dpkg -l | hadoop-hdfs-namenode</samp> on Debian-based systems</li>
<li class="li"><samp class="ph codeph">zypper info hadoop-hdfs-namenode</samp> for SLES11</li>
</ul>
<p class="p">On all DataNodes run one of the following:</p>
<ul class="ul" id="topic_1_0_1__ul_ugg_1w1_5k">
<li class="li"><samp class="ph codeph">yum list hadoop-hdfs-datanode</samp> on RPM-based systems</li>
<li class="li"><samp class="ph codeph">dpkg -l | grep hadoop-hdfs-datanode</samp> on Debian-base</li>
<li class="li"><samp class="ph codeph">zypper info hadoop-hdfs-datanode</samp> for SLES11</li>
</ul>
<p class="p">The reported version should be &gt;= 2.0.0+91-1.cdh4.0.1</p>
</div>
</section>
<section class="nested2" id="topic_1_0_section"><a id="topic_1_0" class="anchor"></a>
<h3 class="title topictitle3">Several Authentication Token Types Use Secret Key of Insufficient Length</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products Affected:</strong> HDFS, MapReduce, YARN, Hive, HBase</p>
<p class="p"><strong class="ph b">Releases Affected:</strong> If you use MapReduce, HDFS, HBase, or YARN, CDH4.0.x and all CDH3 versions between CDH3 Beta 3 and CDH3u5 refresh 1.</p>
<p class="p"><strong class="ph b">Users Affected:</strong> Users who have enabled Hadoop Kerberos security features.</p>
<p class="p"><strong class="ph b">Date/Time of Announcement:</strong> 10/12/2012 2:00pm PDT (upstream)</p>
<p class="p"><strong class="ph b">Verification:</strong> Verified upstream</p>
<p class="p"><strong class="ph b">Severity:</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Malicious users may crack the secret keys used to sign security tokens, granting access to modify data stored in HDFS, HBase, or Hive without
authorization. HDFS Transport Encryption may also be brute-forced.</p>
<p class="p"><strong class="ph b">Mechanism:</strong> This vulnerability impacts a piece of security infrastructure in Hadoop Common, which affects the security of authentication tokens used by HDFS,
MapReduce, YARN, HBase, and Hive.</p>
<p class="p">Several components in Hadoop issue authentication tokens to clients in order to authenticate and authorize later access to a secured resource. These tokens consist of an identifier and a
signature generated using the well-known HMAC scheme. The HMAC algorithm is based on a secret key shared between multiple server-side components.</p>
<p class="p">For example, the HDFS NameNode issues block access tokens, which authorize a client to access a particular block with either read or write access. These tokens are then verified using a
rotating secret key, which is shared between the NameNode and DataNodes. Similarly, MapReduce issues job-specific tokens, which allow reducer tasks to retrieve map output. HBase similarly issues
authentication tokens to MapReduce tasks, allowing those tasks to access HBase data. Hive uses the same token scheme to authenticate access from MapReduce tasks to the Hive metastore.</p>
<p class="p">The HMAC scheme relies on a shared secret key unknown to the client. In currently released versions of Hadoop, this key was created with an insufficient length (20 bits), which allows an
attacker to obtain the secret key by brute force. This may allow an attacker to perform several actions without authorization, including accessing other users' data.</p>
<p class="p"><strong class="ph b">Immediate action required</strong>: If Security is enabled, upgrade to the latest CDH release.</p>
<p class="p"><strong class="ph b">ETA for resolution</strong>: As of 10/12/2012, this is patched in CDH4.1.0 and CDH3u5 refresh 2. Both are available now.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch</strong>: CDH4.1.0 and CDH3u5 refresh 2</p>
<p class="p"><strong class="ph b">Details</strong>: <a class="xref" href="http://www.cloudera.com/content/support/en/downloads.html" target="_blank">CDH Downloads</a></p>
</div>
</section>
<section class="nested2" id="topic_1_0_2_section"><a id="topic_1_0_2" class="anchor"></a>
<h3 class="title topictitle3">MapReduce with Security</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected:</strong> MapReduce</p>
<p class="p"><strong class="ph b">Releases affected:</strong> Hadoop 1.0.1 and below, Hadoop 0.23, CDH3u0-CDH3u2, CDH3u3 containing the hadoop-0.20-sbin package, version 0.20.2+923.195 and below.</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users who have enabled Hadoop Kerberos/MapReduce security features.</p>
<p class="p"><strong class="ph b">Severity:</strong> Critical</p>
<p class="p"><strong class="ph b">Impact:</strong> Vulnerability allows an authenticated malicious user to impersonate any other user on the cluster.</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade the <samp class="ph codeph">hadoop-0.20-sbin</samp> package to version to 0.20.2+923.<strong class="ph b">197</strong> or
higher on all TaskTrackers to address the vulnerability. Upgrading <samp class="ph codeph">hadoop-0.20-sbin</samp> causes upgrade of several related (but unchanged) hadoop packages. If using Cloudera
Manager versions 3.7.3 and below, you will also need to upgrade to Cloudera Manager 3.7.4 or higher before you can successfully run jobs with Kerberos enabled after upgrading the <samp class=
"ph codeph">hadoop-0.20-sbin</samp> package.</p>
<p class="p"><strong class="ph b">Resolution:</strong> 3/21/2012</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> hadoop-0.20-sbin package, version 0.20.2+923.<strong class="ph b">197</strong> This release addresses the vulnerability
identified by CVE-2012-1574.</p>
<p class="p"><strong class="ph b">Remediation verification:</strong> On all TaskTrackers run one of the following:</p>
<ul class="ul" id="topic_1_0_2__ul_ohz_zv1_5k">
<li class="li"><samp class="ph codeph">yum list hadoop-0.20-sbin</samp> on RPM-based systems</li>
<li class="li"><samp class="ph codeph">dpkg -l | grep hadoop-0.20-sbin</samp> on Debian-based systems</li>
<li class="li"><samp class="ph codeph">zypper info hadoop-0.20-sbin</samp> for SLES11</li>
</ul>
<p class="p">The reported version should be &gt;=&nbsp;0.20.2+923.197.</p>
<p class="p">If you are a Cloudera Enterprise customer and have further questions or need assistance, log a ticket with Cloudera Support through <a class="xref" href="http://support.cloudera.com"
target="_blank">http://support.cloudera.com</a>.</p>
</div>
</section>
</section>
<section class="nested1" id="hbase_section"><a id="hbase" class="anchor"></a>
<h2 class="title topictitle2">Apache HBase</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache HBase.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#tsb-2019-367">Incorrect User Authorization Applied by HBase REST Server</a></li>
<li class="minitoc-entry"><a href="#tsb_2018-315">Potential Privilege Escalation for User of HBase “Thrift 1” API Server over HTTP</a></li>
<li class="minitoc-entry"><a href="#concept_zym_nlm_js">HBase Metadata in ZooKeeper Can Lack Proper Authorization Controls</a></li>
<li class="minitoc-entry"><a href="#id_e4y_c4r_1cb">Apache Hadoop and Apache HBase "Man-in-the-Middle" Vulnerability</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="tsb-2019-367_section"><a id="tsb-2019-367" class="anchor"></a>
<h3 class="title topictitle3">Incorrect User Authorization Applied by HBase REST Server</h3>
<div class="body conbody">
<p class="p">In CDH versions 6.0 to 6.1.1, authorization was incorrectly applied to users of the HBase REST server. Requests sent to the HBase REST server were executed with the permissions of the
REST server itself, not with the permissions of the end-user. This problem does not affect previous CDH 5 releases.</p>
<p class="p"><strong class="ph b">Products affected:</strong> HBase</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 6.0.x, 6.1.0, 6.1.1</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> March, 2019</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users of the HBase REST server with authentication and authorization enabled</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 7.3 (High) <a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:L/A:L" target=
"_blank">CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:L/A:L</a></p>
<p class="p"><strong class="ph b">Impact:</strong> Authorization was incorrectly applied to users of the HBase REST server. Requests sent to the HBase REST server were executed with the permissions
of the REST server itself, instead of the permissions of the end-user. This issue is only relevant when HBase is configured with Kerberos authentication, HBase authorization is enabled, and the REST
server is configured with SPNEGO authentication. This issue does not extend beyond the HBase REST server. The impact of this vulnerability is dependent on the authorizations granted to the HBase REST
service user, but, typically, this user has significant authorization in HBase.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2019-0212</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Stop the HBase REST server to prevent any access of HBase with incorrect authorizations. Upgrade to a version of CDH with the
vulnerability fixed, and restart the HBase REST service.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 6.1.2, 6.2.0</p>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-367-Incorrect-user-authorization-applied-by-HBase?id=88895" target="_blank">TSB 2019-367: Incorrect user authorization applied by HBase REST Server</a></p>
</div>
</section>
<section class="nested2" id="tsb_2018-315_section"><a id="tsb_2018-315" class="anchor"></a>
<h3 class="title topictitle3">Potential Privilege Escalation for User of HBase “Thrift 1” API Server over HTTP</h3>
<div class="body conbody">
<p class="p">CVE-2018-8025 describes an issue in Apache HBase that affects the optional "Thrift 1" API server when running over HTTP. There is a race-condition that could lead to authenticated
sessions being incorrectly applied to users, e.g. one authenticated user would be considered a different user or an unauthenticated user would be treated as an authenticated user.</p>
<p class="p"><strong class="ph b">Products affected:</strong> HBase Thrift Server</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb_2018-315__ul_phz_zjz_m2b">
<li class="li">CDH 5.4.x - 5.12.x</li>
<li class="li">CDH 5.13.0, 5.13.1, 5.13.2, 5.13.3</li>
<li class="li">CDH 5.14.0, 5.14.2, 5.14.3</li>
<li class="li">CDH 5.15.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Fixed versions:</strong> CDH 5.14.4</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users with the HBase Thrift 1 service role installed and configured to work in “thrift over HTTP” mode. For example, those using Hue with
HBase impersonation enabled.</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p">Potential privilege escalation.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-8025</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a CDH version with the fix, or, disable the HBase Thrift-over-HTTP service. Disabling the HBase Thrift-over-HTTP
service will render Hue impersonation inoperable and all HBase access via Hue will be performed using the “hue” user instead of the authenticated user.</p>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-315-Potential-privilege-escalation-for-user-of-HBase?id=77131" target="_blank">TSB: 2018-315: Potential privilege escalation for user of HBase “Thrift 1”
API Server over HTTP</a></p>
</div>
</section>
<section class="nested2" id="concept_zym_nlm_js_section"><a id="concept_zym_nlm_js" class="anchor"></a>
<h3 class="title topictitle3">HBase Metadata in ZooKeeper Can Lack Proper Authorization Controls</h3>
<div class="body conbody">
<p class="p">In certain circumstances, HBase does not properly set up access control in ZooKeeper. As a result, any user can modify this metadata and perform attacks, including service denial, or
cause data loss in a replica cluster. Clusters configured using Cloudera Manager are not vulnerable.</p>
<p class="p"><strong class="ph b">Products affected:</strong> HBase</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All CDH 4 and CDH 5 versions prior to 4.7.2 , 5.0.7, 5.1.6, 5.2.6, 5.3.4, 5.4.3</p>
<p class="p"><strong class="ph b">Users affected:</strong> HBase users with security set up to use Kerberos</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 15, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> An attacker could cause potential data loss in a replica cluster, or denial of service.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-1836</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> To determine if your cluster is affected by this problem, open a ZooKeeper shell using <samp class="ph codeph">hbase zkcli</samp>
and check the permission on the <samp class="ph codeph">/hbase znode</samp>, using <samp class="ph codeph">getAcl /hbase</samp>.</p>
<p class="p">If the output reads: <samp class="ph codeph">'world,'anyone : cdrwa</samp>, any unauthenticated user can delete or modify HBase znodes.</p>
<div class="p">To manually fix the problem:
<ol class="ol" id="concept_zym_nlm_js__ol_mrx_24m_js">
<li class="li">Change the configuration to use <samp class="ph codeph">hbase.zookeeper.client.keytab.file</samp> on Master and RegionServers.
<ul class="ul" id="concept_zym_nlm_js__ul_pjs_m4m_js">
<li class="li">Edit <span class="ph filepath">hbase-site.xml</span> (which should be in <span class="ph filepath">/etc/hbase/</span>) and add:
<pre class="pre codeblock">&lt;property&gt;
  &lt;name&gt;hbase.zookeeper.client.keytab.file&lt;/name&gt;
  &lt;value&gt;hbase.keytab&lt;/value&gt;
&lt;/property&gt;</pre></li>
</ul>
</li>
<li class="li">Do a rolling restart of HBase (Master and RegionServers), and wait until it has completed.</li>
<li class="li">To manually fix the ACLs, form a zkcli running as hbase user to have world with only read, and sasl/hbase with cdrwa.
<p class="p">(Some znodes in the list might not be present in your setup, so ignore the "node not found" exceptions.)</p>
<pre class="pre codeblock">$ hbase zkcli
setAcl /hbase world:anyone:r,sasl:hbase:cdrwa
setAcl /hbase/backup-masters sasl:hbase:cdrwa
setAcl /hbase/draining sasl:hbase:cdrwa
setAcl /hbase/flush-table-proc sasl:hbase:cdrwa
setAcl /hbase/hbaseid world:anyone:r,sasl:hbase:cdrwa
setAcl /hbase/master world:anyone:r,sasl:hbase:cdrwa
setAcl /hbase/meta-region-server world:anyone:r,sasl:hbase:cdrwa
setAcl /hbase/namespace sasl:hbase:cdrwa
setAcl /hbase/online-snapshot sasl:hbase:cdrwa
setAcl /hbase/region-in-transition sasl:hbase:cdrwa
setAcl /hbase/recovering-regions sasl:hbase:cdrwa
setAcl /hbase/replication sasl:hbase:cdrwa
setAcl /hbase/rs sasl:hbase:cdrwa
setAcl /hbase/running sasl:hbase:cdrwa
setAcl /hbase/splitWAL sasl:hbase:cdrwa
setAcl /hbase/table sasl:hbase:cdrwa
setAcl /hbase/table-lock sasl:hbase:cdrwa
setAcl /hbase/tokenauth sasl:hbase:cdrwa</pre></li>
</ol>
</div>
<aside class="note note"><span class="title">Note:</span>
<p class="p">Release-based solutions are currently under investigation.</p>
</aside>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> An update will be provided when solutions are in place.</p>
<p class="p">For updates on this issue, see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2015-65?elq=2b33f39a36e24943ae41b085a78d369a&amp;elqCampaignId=" target="_blank">TSB 2015-65: HBase
Metadata in ZooKeeper can lack proper Authorization Controls</a></p>
</div>
</section>
<section class="nested2" id="id_e4y_c4r_1cb_section"><a id="id_e4y_c4r_1cb" class="anchor"></a>
<h3 class="title topictitle3">Apache Hadoop and Apache HBase "Man-in-the-Middle" Vulnerability</h3>
<div class="body conbody">
<p class="p">The Apache Hadoop and HBase RPC protocols are intended to provide bi-directional authentication between clients and servers. However, a malicious server or network attacker can
unilaterally disable these authentication checks. This allows for potential reduction in the configured quality of protection of the RPC traffic, and privilege escalation if authentication
credentials are passed over RPC.</p>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="id_e4y_c4r_1cb__d219e1244">
<li class="li">Hadoop</li>
<li class="li">HBase</li>
</ul>
</div>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="id_e4y_c4r_1cb__d219e1256">
<li class="li">All versions of CDH 4.3.x prior to 4.3.1</li>
<li class="li">All versions of CDH 4.2.x prior to 4.2.2</li>
<li class="li">All versions of CDH 4.1.x prior to 4.1.5</li>
<li class="li">All versions of CDH 4.0.x</li>
</ul>
</div>
<div class="p"><strong class="ph b">Users affected:</strong>
<ul class="ul" id="id_e4y_c4r_1cb__d219e1274">
<li class="li">Users of HDFS who have enabled Hadoop Kerberos security features and HDFS data encryption features.</li>
<li class="li">Users of MapReduce or YARN who have enabled Hadoop Kerberos security features.</li>
<li class="li">Users of HBase who have enabled HBase Kerberos security features and who run HBase co-located on a cluster with MapReduce or YARN.</li>
</ul>
</div>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 10th, 2013</p>
<p class="p"><strong class="ph b">Severity:</strong> Severe</p>
<p class="p"><strong class="ph b">Impact:</strong></p>
<p class="p">RPC traffic from Hadoop clients, potentially including authentication credentials, may be intercepted by any user who can submit jobs to Hadoop. RPC traffic from HBase clients to Region
Servers may be intercepted by any user who can submit jobs to Hadoop.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2013-2192 (Hadoop) and CVE-2013-2193 (HBase)</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ul class="ul" id="id_e4y_c4r_1cb__d219e1312">
<li class="li">
<p class="p">Users of CDH 4.3.0 should immediately upgrade to CDH 4.3.1 or higher.</p>
</li>
<li class="li">
<p class="p">Users of CDH 4.2.x should immediately upgrade to CDH 4.2.2 or higher.</p>
</li>
<li class="li">
<p class="p">Users of CDH 4.1.x should immediately upgrade to CDH 4.1.5 or higher.</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">ETA for resolution:</strong> August 23, 2013</p>
<p class="p"><strong class="ph b" id="id_e4y_c4r_1cb__d219e1340">Addressed in release/refresh/patch:</strong> CDH 4.1.5, CDH 4.2.2, and CDH 4.3.1.</p>
<p class="p"><strong class="ph b" id="id_e4y_c4r_1cb__d219e1345">Verification:</strong></p>
<p class="p">To verify that you are not affected by this vulnerability, ensure that you are running a version of CDH at or higher than the aforementioned versions. To verify that this is true,
proceed as follows.</p>
<div class="p">On all of the cluster hosts, run one of the following commands:
<ul class="ul" id="id_e4y_c4r_1cb__d219e1353">
<li class="li">
<pre class="pre codeblock">On RPM-based systems (RHEL, SLES) rpm -qi hadoop | grep -i version</pre></li>
<li class="li">On Debian-based systems
<pre class="pre codeblock">dpkg -s hadoop | grep -i version</pre></li>
</ul>
Make sure that the version listed is greater than or equal to 4.1.5 for the 4.1.x line, 4.2.2 for the 4.2.x line, and 4.3.1 for the 4.3.x line. The 4.4.x and higher lines of releases are
unaffected.</div>
</div>
</section>
</section>
<section class="nested1" id="hive_section"><a id="hive" class="anchor"></a>
<h2 class="title topictitle2">Apache Hive</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache Hive.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#tsb-299">Apache Hive Vulnerabilities CVE-2018-1282 and CVE-2018-1284</a></li>
<li class="minitoc-entry"><a href="#tsb-238">Apache Hive SSL Vulnerability Bug Disclosure</a></li>
<li class="minitoc-entry"><a href="#tsb_97">Hive built-in functions “reflect”, “reflect2”, and “java_method” not blocked by default in Sentry</a></li>
<li class="minitoc-entry"><a href="#topic_tsb_2015-15">HiveServer2 LDAP Provider May Allow Authentication with Blank Password</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="tsb-299_section"><a id="tsb-299" class="anchor"></a>
<h3 class="title topictitle3">Apache Hive Vulnerabilities CVE-2018-1282 and CVE-2018-1284</h3>
<div class="body conbody">
<p class="p">This security bulletin covers two vulnerabilities discovered in Hive.</p>
</div>
<section class="nested3" id="cve-2018-1282_section"><a id="cve-2018-1282" class="anchor"></a>
<h4 class="title topictitle4">CVE-2018-1282: JDBC driver is susceptible to SQL injection attack if the input parameters are not properly cleaned</h4>
<div class="body conbody">
<p class="p">This vulnerability allows carefully crafted arguments to be used to bypass the argument-escaping and clean-up that the Apache Hive JDBC driver does with <samp class=
"ph codeph">PreparedStatement</samp> objects.</p>
<p class="p">If you use Hive in CDH, you have the option of using the Apache Hive JDBC driver or the Cloudera Hive JDBC driver, which is distributed by Cloudera for use with your JDBC applications.
Cloudera strongly recommends that you use the Cloudera Hive JDBC driver and offers only limited support for the Apache Hive JDBC driver. If you use the Cloudera Hive JDBC driver you are <em class=
"ph i">not</em> affected by this vulnerability.</p>
<p class="p"><strong class="ph b">Mitigation:</strong> Upgrade to use the <a class="xref" href="https://www.cloudera.com/downloads/connectors/hive/jdbc/2-5-20.html" target="_blank">Cloudera Hive JDBC
driver</a>, or perform the following actions in your Apache Hive JDBC client code or application when dealing with user provided input in <samp class="ph codeph">PreparedStatement</samp> objects:</p>
<ul class="ul">
<li class="li">Avoid passing user input with the <samp class="ph codeph">PreparedStatement.setBinaryStream</samp> method, and</li>
<li class="li">Sanitize user input for the <samp class="ph codeph">PreparedStatement.setString</samp> method by replacing all occurrences of <samp class="ph codeph">\'</samp> (backslash, single
quotation mark) to <samp class="ph codeph">'</samp> (single quotation mark).</li>
</ul>
<p class="p"><strong class="ph b">Detected by:</strong> CVE-2018-1282 was detected by Bear Giles of Snaplogic</p>
</div>
</section>
<section class="nested3" id="cve-2018-1284_section"><a id="cve-2018-1284" class="anchor"></a>
<h4 class="title topictitle4">CVE-2018-1284: Hive UDF series <samp class="ph codeph">UDFXPathXXXX</samp> allows users to pass carefully crafted XML to access arbitrary files</h4>
<div class="body conbody">
<p class="p">If Hive impersonation is disabled and / or Apache Sentry is used, a malicious user might use any of the Hive <samp class="ph codeph">xpath</samp> UDFs to expose the contents of a file on
the node that is running HiveServer2 which is owned by the HiveServer2 user (usually <samp class="ph codeph">hive</samp>).</p>
<p class="p"><strong class="ph b">Mitigation:</strong> Upgrade to a release where this is fixed. If <samp class="ph codeph">xpath</samp> functions are not currently used, disable them with Cloudera
Manager by setting the <samp class="ph codeph">hive.server2.builtin.udf.blacklist</samp> property to <kbd class=
"ph userinput">xpath,xpath_short,xpath_int,xpath_long,xpath_float,xpath_double,xpath_number,xpath_string</kbd> in the <span class="ph uicontrol">HiveServer2 Advanced Configuration Snippet (Safety
Valve) for hive-site.xml</span>. For more information about setting this property to blacklist Hive UDFs, see <a class="xref" href="https://www.cloudera.com/documentation/enterprise/latest/topics/cm_mc_hive_udf.html#section_krl_rzy_nv" target="_blank">the Cloudera Documentation</a>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hive</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">CDH 5.12 and earlier</li>
<li class="li">CDH 5.13.0, 5.13.1, 5.13.2, 5.13.3</li>
<li class="li">CDH 5.14.0, 5.14.1, 5.14.2</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> SQL injection, compromise of the <samp class="ph codeph">hive</samp> user account</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-1282, CVE-2018-1284</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a CDH release with the fix or perform the above mitigations.</p>
<p class="p"><strong class="ph b">Addressed release/refresh/patch:</strong> This will be fixed in a future release.</p>
<p class="p">For the latest update on these issues, see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2018-299" target="_blank">TSB 2018-299: Hive Vulnerabilities CVE-2018-1282 and CVE-2018-1284</a></p>
</div>
</section>
</section>
<section class="nested2" id="tsb-238_section"><a id="tsb-238" class="anchor"></a>
<h3 class="title topictitle3">Apache Hive SSL Vulnerability Bug Disclosure</h3>
<div class="body conbody">
<div class="p">If you use Cloudera Hive JDBC drivers to connect your applications with HiveServer2, you are <em class="ph i">not affected</em> if:
<ul class="ul" id="tsb-238__ul_dqx_mbj_xbb">
<li class="li">SSL is <em class="ph i">not</em> turned on, or</li>
<li class="li">SSL <em class="ph i">is</em> turned on but only <em class="ph i">non-self-signed</em> certificates are used.</li>
</ul>
</div>
<p class="p">If neither of the above statements describe your deployment, please read on.</p>
<p class="p">In CDH 5.2 and later releases, the <a class="xref" href="http://seclists.org/oss-sec/2017/q2/337" target="_blank">CVE-2016-3083: Apache Hive SSL vulnerability bug disclosure</a> impacts
applications and tools that use:</p>
<ul class="ul" id="tsb-238__ul_eqx_mbj_xbb">
<li class="li">Apache JDBC driver <strong class="ph b">with SSL enabled</strong>, or</li>
<li class="li">
<p class="p">Cloudera Hive JDBC drivers <strong class="ph b">with <a class="xref" href="https://www.cloudera.com/documentation/enterprise/latest/topics/sg_self_signed_tls.html" target=
"_blank">self-signed certificates</a> and SSL enabled</strong></p>
<p class="p">The certificate must be self-signed. A certificate signed by a trusted (or untrusted) Certificate Authority (CA) is not impacted by this vulnerability.</p>
</li>
</ul>
<p class="p">Cloudera does not recommend the use of self-signed certificates.</p>
<p class="p">The <a class="xref" href="http://seclists.org/oss-sec/2017/q2/337" target="_blank">CVE-2016-3083: Apache Hive SSL vulnerability</a> is fixed by <a class="xref" href="https://issues.apache.org/jira/browse/HIVE-13390" target="_blank">HIVE-13390</a> and is documented in the Apache community as follows:</p>
<p class="p"><em class="ph i">"Apache Hive (JDBC + HiveServer2) implements SSL for plain TCP and HTTP connections (it supports both transport modes). While validating the server's certificate during
the connection setup, the client doesn't seem to be verifying the common name attribute of the certificate. In this way, if a JDBC client sends an SSL request to server abc.example.com, and the
server responds with a valid certificate (certified by CA) but issued to xyz.example.com, the client will accept that as a valid certificate and the SSL handshake will go through."</em></p>
<p class="p">This means that it would be possible to set up a man-in-the-middle attack to intercept all SSL-protected JDBC communication.</p>
<p class="p">CDH Hive users have the option of deploying either the Apache Hive JDBC driver or the Cloudera Hive JDBC driver that is distributed by Cloudera for use with their JDBC applications.
Traditionally, Cloudera has <strong class="ph b">strongly recommended use of the Cloudera Hive JDBC driver</strong> — and offers limited support for the Apache Hive JDBC driver. The JDBC jars in the
CLASSPATH environment variable can be examined to determine which JDBC driver is in use. If the <samp class="ph codeph">hive-jdbc-1.1.0-cdh&lt;<var class=
"keyword varname">CDH_VERSION</var>&gt;.jar</samp> is included in the CLASSPATH, the Apache JDBC driver is being used. If the <samp class="ph codeph">HiveJDBC4.jar</samp> or the <samp class=
"ph codeph">HiveJDBC41.jar</samp> is in the CLASSPATH, that indicates the Cloudera Hive JDBC driver is being used.</p>
<p class="p">JDBC drivers can also be used in an embedded mode. For example, when connecting to HiveServer2 by way of tools such as Beeline, the JDBC Client is invoked internally over the Thrift API.
The JDBC driver in use by Beeline can also be determined by examining the driver version information printed after the connection is established.</p>
<p class="p">If the output shows:</p>
<ul class="ul" id="tsb-238__ul_fqx_mbj_xbb">
<li class="li"><samp class="ph codeph">Hive JDBC (version 1.1.0-cdh&lt;<var class="keyword varname">CDH_VERSION</var>&gt;)</samp>, the Apache JDBC driver is being used.</li>
<li class="li"><samp class="ph codeph">Driver: HiveJDBC (version 02.05.18.1050)</samp>, the Cloudera Hive JDBC Driver is being used.</li>
</ul>
<div class="p">Enabling SSL is controlled by the following configuration parameter in Hive:
<pre class="pre codeblock">
hive.server2.use.SSL=true
        </pre></div>
<div class="p">Or by the deprecated version of the configuration parameter:
<pre class="pre codeblock">
hive.server2.enable.SSL=true
      </pre></div>
<p class="p">This information can be used to decide whether a tool or application is impacted by this vulnerability.</p>
<p class="p"><strong class="ph b">For Cloudera Hive JDBC drivers with self-signed certificates and SSL enabled:</strong> Generate non-self-signed certificates according to the following
documentation: <a class="xref" href="https://www.cloudera.com/documentation/enterprise/latest/topics/cm_sg_create_deploy_certs.html" target=
"_blank">https://www.cloudera.com/documentation/enterprise/latest/topics/cm_sg_create_deploy_certs.html</a></p>
<p class="p"><strong class="ph b">For Apache JDBC drivers with SSL enabled:</strong> You can switch to use the Cloudera Hive JDBC driver. Note that the Cloudera Hive JDBC driver only displays query
results and skips displaying informational messages such as those logged by MapReduce jobs (that are invoked as part of executing the JDBC command). For example:</p>
<pre class="pre codeblock">
INFO : Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1
INFO : 2017-06-06 14:19:41,115 Stage-1 map = 0%, reduce = 0%
INFO : 2017-06-06 14:19:48,427 Stage-1 map = 100%, reduce = 0%, Cumulative CPU 1.87 sec
INFO : 2017-06-06 14:19:55,845 Stage-1 map = 100%, reduce = 100%, Cumulative CPU 3.75 sec
INFO : MapReduce Total cumulative CPU time: 3 seconds 750 msec
INFO : Ended Job = job_1496750846200_0001
INFO : MapReduce Jobs Launched: 
INFO : Stage-Stage-1: Map: 1 Reduce: 1 Cumulative CPU: 3.75 sec HDFS Read: 31539 HDFS Write: 3 SUCCESS
INFO : Total MapReduce CPU Time Spent: 3 seconds 750 msec
      </pre>
<p class="p">The steps required to switch to using the Cloudera Hive JDBC driver for Beeline are:</p>
<ol class="ol" id="tsb-238__ol_gqx_mbj_xbb">
<li class="li">Download the latest Cloudera Hive JDBC driver from: <a class="xref" href="https://www.cloudera.com/downloads/connectors/hive/jdbc/2-5-18.html" target=
"_blank">https://www.cloudera.com/downloads/connectors/hive/jdbc/2-5-18.html</a></li>
<li class="li">
<p class="p">Unzip the archive:</p>
<pre class="pre codeblock">
unzip Cloudera_HiveJDBC41_2.5.18.1050.zip
          </pre></li>
<li class="li">
<p class="p">Add the <samp class="ph codeph">HiveJDBC41.jar</samp> to the beginning of the CLASSPATH:</p>
<pre class="pre codeblock">
export HIVE_CLASSPATH=/root/HiveJDBC41.jar:$HIVE_CLASSPATH
          </pre></li>
<li class="li">Execute Beeline, but change the connection URL according to the Cloudera driver documentation at the following location: <a class="xref" href="http://www.cloudera.com/documentation/other/connectors/hive-jdbc/latest/Cloudera-JDBC-Driver-for-Apache-Hive-Install-Guide.pdf" target=
"_blank">http://www.cloudera.com/documentation/other/connectors/hive-jdbc/latest/Cloudera-JDBC-Driver-for-Apache-Hive-Install-Guide.pdf</a></li>
<li class="li">Confirm the change by checking the driver version when connecting to HiveServer2 with Beeline:
<pre class="pre codeblock">
Connecting to jdbc:hive2:://<var class="keyword varname">&lt;HOST&gt;</var>:10000
Connected to: Apache Hive (version 1.1.0-cdh<var class="keyword varname">&lt;CDH_VERSION&gt;</var>)
<strong class="ph b">Driver: HiveJDBC (version 02.05.18.1050)</strong>
          </pre></li>
<li class="li">The following error message that is displayed can be ignored:
<pre class="pre codeblock">
Error: [Cloudera] [JDBC] (11975) Unsupported transaction isolation
level: 4. (state=HY000,code=11975)
          </pre></li>
</ol>
<p class="p">For other third-party tools and applications, replace the Apache JDBC driver as follows:</p>
<ol class="ol" id="tsb-238__ol_hqx_mbj_xbb">
<li class="li">
<p class="p">Add the <samp class="ph codeph">HiveJDBC41.jar</samp> to the beginning of the CLASSPATH for the application:</p>
<pre class="pre codeblock">
export CLASSPATH=/root/hiveJDBC41.jar:$CLASSPATH
          </pre></li>
<li class="li">
<p class="p">Change the JDBC connection URL according to the Cloudera driver documentation located at:</p>
<a class="xref" href="http://www.cloudera.com/documentation/other/connectors/hive-jdbc/latest/Cloudera-JDBC-Driver-for-Apache-Hive-Install-Guide.pdf" target=
"_blank">http://www.cloudera.com/documentation/other/connectors/hive-jdbc/latest/Cloudera-JDBC-Driver-for-Apache-Hive-Install-Guide.pdf</a>
<aside class="note note"><span class="title">Note:</span> These steps might differ based on the operating system and the third-party tool.</aside>
</li>
</ol>
<p class="p"><strong class="ph b">Products affected:</strong> Hive</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb-238__ul_iqx_mbj_xbb">
<li class="li">CDH 5.2.0, 5.2.1, 5.2.3, 5.2.4, 5.2.5, 5.2.6</li>
<li class="li">CDH 5.3.0, 5.3.1, 5.3.2, 5.3.3, 5.3.4, 5.3.5, 5.3.6, 5.3.8, 5.3.9, 5.3.10</li>
<li class="li">CDH 5.4.0, 5.4.1, 5.4.2, 5.4.3, 5.4.4, 5.4.5, 5.4.7, 5.4.8, 5.4.9, 5.4.10, 5.4.11</li>
<li class="li">CDH 5.5.0, 5.5.1, 5.5.2, 5.5.4, 5.5.5, 5.5.6</li>
<li class="li">CDH 5.6.0, 5.6.1</li>
<li class="li">CDH 5.7.0, 5.7.1, 5.7.2, 5,7.3, 5.7.4, 5.7.5, 5.7.6</li>
<li class="li">CDH 5.8.0, 5.8.2, 5.8.3, 5.8.4, 5.8.5</li>
<li class="li">CDH 5.9.0, 5.9.1, 5.9.2</li>
<li class="li">CDH 5.10.0, 5.10.1</li>
<li class="li">CDH 5.11.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> JDBC (Apache Hive JDBC driver using SSL or Cloudera Hive JDBC driver with self-signed certificates) and HiveServer2 users</p>
<p class="p"><strong class="ph b">Detected by:</strong> Branden Crawford from Inteco Systems Limited</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> As discussed above.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-3083</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ul class="ul" id="tsb-238__ul_jqx_mbj_xbb">
<li class="li">For non-Beeline clients (including third-party tools or applications): If Apache Hive JDBC drivers are being used, switch to Cloudera JDBC drivers (and use externally signed CA certs
as always recommended for production use).</li>
<li class="li">For Beeline (or Beeline-based clients, e.g. Oozie): Update Beeline’s embedded Apache JDBC driver to Cloudera JDBC driver as shown above. Alternatively, if these JDBC-based clients are
invoked within a CDH cluster, upgrade the cluster to a release where the issue has been addressed.</li>
</ul>
</div>
<p class="p"><strong class="ph b">Addressed release/refresh/patch:</strong> CDH5.11.1 and later</p>
<p class="p">For the latest update on this issue, see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2017-238" target="_blank">TSB 2017-238: Hive SSL vulnerability bug disclosure</a></p>
</div>
</section>
<section class="nested2" id="tsb_97_section"><a id="tsb_97" class="anchor"></a>
<h3 class="title topictitle3">Hive built-in functions “reflect”, “reflect2”, and “java_method” not blocked by default in Sentry</h3>
<div class="body conbody">
<p class="p">Sentry does not block the execution of Hive built-in functions “reflect”, “reflect2”, and “java_method” by default in some CDH versions. These functions allow the execution of arbitrary
user code, which is a security issue.</p>
<p class="p">This issue is documented in <a class="xref" href="https://issues.apache.org/jira/browse/SENTRY-960" target="_blank">SENTRY-960</a>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hive, Sentry</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<p class="p">CDH 5.4.0, CDH 5.4.1, CDH 5.4.2, CDH 5.4.3, CDH 5.4.4, CDH 5.4.5, CDH 5.4.6, CDH 5.4.7, CDH 5.4.8, CDH 5.5.0, CDH 5.5.1</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users running Sentry with Hive.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> November 13, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> This potential vulnerability may enable an authenticated user to execute arbitrary code as a Hive superuser.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-0760</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Explicitly add the following to the blacklist property in hive-site.xml of Hive Server2:</p>
<pre class="pre codeblock">
 &lt;property&gt;
    &lt;name&gt;hive.server2.builtin.udf.blacklist&lt;/name&gt;
    &lt;value&gt;reflect,reflect2,java_method &lt;/value&gt;
  &lt;/property&gt;
 </pre>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.4.9, CDH 5.5.2, CDH 5.6.0 and higher</p>
</div>
</section>
<section class="nested2" id="topic_tsb_2015-15_section"><a id="topic_tsb_2015-15" class="anchor"></a>
<h3 class="title topictitle3">HiveServer2 LDAP Provider May Allow Authentication with Blank Password</h3>
<div class="body conbody">
<p class="p">Hive may allow a user to authenticate without entering a password, depending on the order in which classes are loaded.</p>
<p class="p">Specifically, Hive's SaslPlainServerFactory checks passwords, but the same class provided in Hadoop does not. Therefore, if the Hadoop class is loaded first, users can authenticate with
HiveServer2 without specifying the password.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hive</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul" id="topic_tsb_2015-15__ul_n53_s3m_js">
<li class="li">
<p class="p">CDH 5.0, 5.0.1, 5.0.2, 5.0.3, 5.0.4, 5.0.5</p>
</li>
<li class="li">
<p class="p">CDH 5.1, 5.1.2, 5.1.3, 5.1.4</p>
</li>
<li class="li">
<p class="p">CDH 5.2, 5.2.1, 5.2.3, 5.2.4</p>
</li>
<li class="li">
<p class="p">CDH 5.3, 5.3.1, 5.3.2</p>
</li>
<li class="li">
<p class="p">CDH 5.4.1, 5.4.2, 5.4.3</p>
<div class="p">
<aside class="note note"><span class="title">Note:</span> CDH 5.4.0 is not affected by this issue.</aside>
</div>
</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All users using Hive with LDAP authentication.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> March 11, 2015</p>
<p class="p"><strong class="ph b">Severity: (Low/Medium/High)</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> A malicious user may be able to authenticate with HiveServer2 without specifying a password.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-1772</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to CDH 5.4.4, 5.3.3, 5.2.5, 5.1.5, or 5.0.6</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.4.4, 5.3.3, 5.2.5, 5.1.5, or 5.0.6</p>
<p class="p">For more updates on this issue, see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2015-50?elq=2b33f39a36e24943ae41b085a78d369a&amp;elqCampaignId=" target="_blank">HiveServer2 LDAP Provider
may Allow Authentication with Blank Password</a></p>
</div>
</section>
</section>
<section class="nested1" id="hue_section"><a id="hue" class="anchor"></a>
<h2 class="title topictitle2">Hue</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Hue.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_o2p_hjm_33b">Hue external users granted super user priviliges in C6</a></li>
<li class="minitoc-entry"><a href="#tsb-154">Access control issue on /desktop/api endpoints on Hue</a></li>
<li class="minitoc-entry"><a href="#concept_gd2_r25_2v">Hue Document Privilege Escalation</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_o2p_hjm_33b_section"><a id="concept_o2p_hjm_33b" class="anchor"></a>
<h3 class="title topictitle3">Hue external users granted super user priviliges in C6</h3>
<div class="body conbody">
<p class="p">When using either the <span class="keyword apiname">LdapBackend</span> or the <span class="keyword apiname">SAML2Backend</span> authentication backends in Hue, users that are created on
login when logging in for the first time are granted superuser privileges in CDH 6. This does not apply to users that are created through the User Admin application in Hue.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hue</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 6.0.0, CDH 6.0.1, CDH 6.1.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All user</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Dec/12/18</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong></p>
<p class="p">The superuser privilege is granted to any user that logs in to Hue when LDAP or SAML authentication is used. For example, if you have the create_users_on_login property set to true in
the <strong class="ph b">Hue Service Advanced Configuration Snippet (Safety Valve) for hue_safety_valve.ini</strong>, and you are using LDAP or SAML authentication, a user that logs in to Hue for the
first time is created with superuser privileges and can perform the following actions:</p>
<div class="p">When the <span class="keyword apiname">SAML2Backend</span> is used, Hue accounts that have superuser privileges can:
<ul class="ul" id="concept_o2p_hjm_33b__ul_rwc_rjm_33b">
<li class="li">Create/Delete users and groups</li>
<li class="li">Assign users to groups</li>
<li class="li">Alter group permissions</li>
</ul>
However, when the <span class="keyword apiname">SAML2Backend</span> is used, users can only log in to Hue using SAML authentication.</div>
<div class="p">When the LdapBackend is used, Hue accounts that have superuser privileges can:
<ul class="ul" id="concept_o2p_hjm_33b__ul_cp1_5jm_33b">
<li class="li">Synchronize Hue users with your LDAP server</li>
<li class="li">Create local users and groups (these local users can login to Hue only if the mode of multi-backend authentication is set up as <span class="keyword apiname">LdapBackend</span> and
<span class="keyword apiname">AllowFirstUserDjangoBackend</span>)</li>
<li class="li">Assign users to groups</li>
<li class="li">Alter group permissios</li>
</ul>
</div>
<div class="p">This impact <em class="ph i">does not</em> apply to the following other scenarios:
<ul class="ul" id="concept_o2p_hjm_33b__ul_hrz_ckm_33b">
<li class="li">When users are synced with your LDAP server manually by using the User Admin page in Hue.</li>
<li class="li">When you are using other authentication methods. For example:
<ul class="ul" id="concept_o2p_hjm_33b__ul_osm_2km_33b">
<li class="li">AllowFirstUserDjangoBackend</li>
<li class="li">Spnego</li>
<li class="li">PAM</li>
<li class="li">Oauth</li>
</ul>
</li>
</ul>
</div>
<div class="p">When the <span class="keyword apiname">LdapBackend</span> and <span class="keyword apiname">AllowFirstUserDjangoBackend</span> are used, administrators should note:
<ul class="ul" id="concept_o2p_hjm_33b__ul_hgq_jkm_33b">
<li class="li">Local users, including users created by unexpected superusers, can login throug <span class="keyword apiname">AllowFirstUserDjangoBackend</span>.</li>
<li class="li">Local users in Hue that created as hive, hdfs, or solr have privileges to access protected data and alter permissions in security app.</li>
<li class="li">Removing the <span class="keyword apiname">AllowFirstUserDjangoBackend</span> authentication backend can stop local users login to Hue, but it requires the administrator to have
Cloudera Manager access</li>
</ul>
</div>
<div class="p">
<aside class="note note"><span class="title">Note:</span> Regardless of the authentication backend in use, the Hue superuser cannot perform the following tasks:
<ul class="ul" id="concept_o2p_hjm_33b__ul_cwr_qkm_33b">
<li class="li">Make any changes related to Sentry if the user has not been granted any privileges in Sentry. The Hue superuser can only view the Security app in the Hue UI.</li>
<li class="li">Change the authentication backends. This task requires access to Cloudera Manager.</li>
</ul>
</aside>
</div>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2019-7319</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade and follow the instructions below.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 6.1.1 and CDH 6.2.0</p>
<div class="p">After upgrading to 6.1.1 or later, you must run the following update statement in the Hue database:
<pre class="pre codeblock">UPDATE useradmin_userprofile SET `creation_method` = 'EXTERNAL' WHERE `creation_method` = 'CreationMethod.EXTERNAL';</pre>
<aside class="note important"><span class="title">Important:</span> If the Hue database is using MySQL, before you run this UPDATE statement, check if safe mode is on by using the following query:
<pre class="pre codeblock">SELECT @@SQL_SAFE_UPDATES;</pre>
<div class="p">If the safe mode is turned on, it returns '1'. You can tempirarily set it to off by using the following SET statement:
<pre class="pre codeblock">SET SQL_SAFE_UPDATES = 0;</pre></div>
<div class="p">After running the update statement, to re-enable safe mode:
<pre class="pre codeblock">SET SQL_SAFE_UPDATES = 1; </pre></div>
</aside>
</div>
<p class="p">After executing the UPDATE statement, new Hue users are no longer automatically created as superusers.</p>
<p class="p">To find out the list of superusers, run SQL query:</p>
<pre class="pre codeblock">SELECT username FROM auth_user WHERE superuser = 1;</pre>
<div class="p">Users who obtained superuser privilege due to this issue need to be revoked manually by using the following steps:
<ol class="ol" id="concept_o2p_hjm_33b__ol_cz5_qyt_33b">
<li class="li">Log in to the Hue UI as an administrator.</li>
<li class="li">In the upper right corner of the page, click the user drop-down list and select <span class="ph uicontrol">Manage User</span>:
<div class="fig fignone" id="concept_o2p_hjm_33b__fig_ocp_5yt_33b"><br>
<div class="block wide"><img class="break" id="concept_o2p_hjm_33b__image_qvl_1h5_33b" src="../images/user_drop_down_list.png"></div>
<br></div>
</li>
<li class="li">In the User Admin page, make sure that the <span class="ph uicontrol">Users</span> tab is selected and click the name of the user in the list that you want to edit:
<div class="fig fignone" id="concept_o2p_hjm_33b__fig_tj4_zyt_33b"><br>
<div class="block wide"><img class="break" id="concept_o2p_hjm_33b__image_fp3_bh5_33b" src="../images/users_tab.png"></div>
<br></div>
</li>
<li class="li">In the Hue Users - Edit user page, click <span class="ph uicontrol">Step 3: Advanced</span>:
<div class="fig fignone" id="concept_o2p_hjm_33b__fig_djh_bzt_33b"><br>
<div class="block wide"><img class="break" id="concept_o2p_hjm_33b__image_i5w_bh5_33b" src="../images/step_3_advanced.png"></div>
<br></div>
</li>
<li class="li">Clear the checkbox for <span class="ph uicontrol">Superuser status</span>:
<div class="fig fignone" id="concept_o2p_hjm_33b__fig_ssk_czt_33b"><br>
<div class="block wide"><img class="break" id="concept_o2p_hjm_33b__image_adl_ch5_33b" src="../images/clear_superuser_status.png"></div>
<br></div>
</li>
<li class="li">At the bottom of the page, click <span class="ph uicontrol">Update user</span> to save the change.</li>
</ol>
</div>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-318?id=92350" target="_blank">TSB 2019-360: Hue external users granted super user privileges in C6</a></p>
</div>
</section>
<section class="nested2" id="tsb-154_section"><a id="tsb-154" class="anchor"></a>
<h3 class="title topictitle3">Access control issue on /desktop/api endpoints on Hue</h3>
<div class="body conbody">
<p class="p">Hue, as shipped with the <a class="xref" href="Security-Bulletin.html#tsb-154__tsb_154_releases_affected">releases affected</a> below, allows remote attackers to enumerate user accounts
via a request to <samp class="ph codeph">desktop/api/users/autocomplete</samp>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hue</p>
<div class="p" id="tsb-154__tsb_154_releases_affected"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb-154__ul_n5p_hy3_xbb">
<li class="li">CDH 5.0.0, 5.0.1, 5.0.2, 5.0.3, 5.0.4, 5.0.5, 5.0.6</li>
<li class="li">CDH 5.1.0, 5.1.2, 5.1.3, 5.1.4, 5.1.5</li>
<li class="li">CDH 5.2.0, 5.2.1, 5.2.3, 5.2.4, 5.2.5, 5.2.6</li>
<li class="li">CDH 5.3.0, 5.3.1, 5.3.2, 5.3.3, 5.3.4, 5.3.5, 5.3.7, 5.3.8, 5.3.9, 5.3.10</li>
<li class="li">CDH 5.4.0, 5.4.1, 5.4.2, 5.4.3, 5.4.4, 5.4.5, 5.4.7, 5.4.8, 5.4.9, 5.4.10, 5.4.11</li>
<li class="li">CDH 5.5.0, 5.5.1, 5.5.2, 5.5.3, 5.5.4, 5.5.5, 5.5.6</li>
<li class="li">CDH 5.6.0, 5.6.1</li>
<li class="li">CDH 5.7.0, 5.7.1, 5,7.3, 5.7.4, 5.7.5, 5.7.6</li>
<li class="li">CDH 5.8.0, 5.8.1, 5.8.2</li>
<li class="li">CDH 5.9.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All Cloudera Hue users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 20, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> An attacker can leverage this issue to harvest valid user accounts and attempt to use the accounts in brute-force attacks.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-4947</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to any of the <a class="xref" href="Security-Bulletin.html#tsb-154__tsb_154_fixed_in">following releases</a>, which
resolve this issue.</p>
<div class="p" id="tsb-154__tsb_154_fixed_in"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="tsb-154__ul_o5p_hy3_xbb">
<li class="li">CDH 5.8.3 and higher</li>
<li class="li">CDH 5.9.1 and higher</li>
<li class="li">CDH 5.10.0 and higher</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="concept_gd2_r25_2v_section"><a id="concept_gd2_r25_2v" class="anchor"></a>
<h3 class="title topictitle3">Hue Document Privilege Escalation</h3>
<div class="body conbody">
<p class="p">A user with read-only access to a document in Hue can grant oneself write access to that document, and change that document’s privileges for other users. If the document is a Hive,
Impala, or Oozie job, the user can inject arbitrary code that runs with the permissions of the next user that runs the job.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hue</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 5.0.0, CDH 5.0.1, CDH 5.0.2, CDH 5.0.3, CDH 5.0.4, CDH 5.0.5, CDH 5.0.6, CDH 5.1.0, CDH 5.1.2, CDH 5.1.3, CDH 5.1.4, CDH 5.1.5, CDH
5.2.0, CDH 5.2.1, CDH 5.2.3, CDH 5.2.4, CDH 5.2.5, CDH 5.2.6, CDH 5.3.0, CDH 5.3.2, CDH 5.3.3, CDH 5.3.4, CDH 5.3.5, CDH 5.3.6, CDH 5.3.8, CDH 5.3.9, CDH 5.4.0, CDH 5.4.1, CDH 5.4.3, CDH 5.4.4, CDH
5.4.5, CDH 5.4.7, CDH 5.4.8</p>
<p class="p"><strong class="ph b">Users affected:</strong> Customers using Hue</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> October 9, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Malicious users may be able to run arbitrary code with the permissions of another user.</p>
<p class="p"><strong class="ph b">CVE:</strong> <a class="xref" href="https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2015-7831" target="_blank">CVE-2015-7831</a></p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to CDH 5.4.9 or CDH 5.5.0.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.4.9 or CDH 5.5.0</p>
</div>
</section>
</section>
<section class="nested1" id="impala_section"><a id="impala" class="anchor"></a>
<h2 class="title topictitle2">Apache Impala</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache Impala.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_ipw_h4w_glb">Impala/Sentry security roles mismatch after Catalog Server restart</a></li>
<li class="minitoc-entry"><a href="#tsb-341">Using Impala with Sentry enabled, revoking ALL privilege from server with grant option does not revoke</a></li>
<li class="minitoc-entry"><a href="#tsb-338">Missing authorization in Apache Impala may allow data injection</a></li>
<li class="minitoc-entry"><a href="#tsb-226">Impala Statestore exposes plaintext data with SSL TLS enabled</a></li>
<li class="minitoc-entry"><a href="#concept_ebl_yv1_x1b">Malicious server can cause Impala server to skip authentication checks</a></li>
<li class="minitoc-entry"><a href="#tsb_174">Read Access to Impala Views in queries with WHERE-clause Subqueries</a></li>
<li class="minitoc-entry"><a href="#tsb_148">Impala issued REVOKE ALL ON SERVER does not revoke all privileges</a></li>
<li class="minitoc-entry"><a href="#tsb_120">Impala does not authorize authenticated Kerberos users who access internal APIs</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_ipw_h4w_glb_section"><a id="concept_ipw_h4w_glb" class="anchor"></a>
<h3 class="title topictitle3"><strong class="ph b" id="docs-internal-guid-52641b1c-7fff-c8b2-ad60-179a0a0364bf">Impala/Sentry security roles mismatch after Catalog Server restart</strong></h3>
<div class="body conbody">
<p class="p">This issue occurs when Impala’s Catalog Server is restarted without also restarting all the Impala Daemons.</p>
<p class="p">Impala uses generated numeric identifiers for roles. These identifiers are regenerated during catalogd restarts, and the same role can get a different identifier, possibly used by a
different role before restart. An impalad’s metadata cache can contain old id + role pairs, and when it is updated with privileges with new role ids from the catalog, the privilege will be added to
the wrong role; the one that previously had the same role id.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Apache Impala</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_ipw_h4w_glb__ul_m5q_k4w_glb">
<li class="li">CDH 5.14.4 and all prior releases</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Impala users with authorization enabled.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> 5th October, 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 3.8 "Low"; <a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:L/A:L" target=
"_blank">CVSS</a>:3.0/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:L/A:L</p>
<p class="p"><strong class="ph b">Impact:</strong> Users may get privileges of unrelated users.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2019-16381</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Update to a version of CDH containing the fix.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.15.0</p>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2020-348--ImpalaSentry-security-roles-mismatch-after?id=284078" target="_blank">TSB 2020-348: Impala/Sentry security roles mismatch after Catalog Server
restart</a></p>
</div>
</section>
<section class="nested2" id="tsb-341_section"><a id="tsb-341" class="anchor"></a>
<h3 class="title topictitle3">Using Impala with Sentry enabled, revoking ALL privilege from server with grant option does not revoke</h3>
<div class="body conbody">
<p class="p">If you grant a role the ALL privilege at the SERVER scope and use the WITH GRANT OPTION clause, you cannot revoke the privilege. Although the <samp class="ph codeph">show grant
role</samp> command will show that the privilege has been revoked immediately after you run the command, the privilege has not been revoked.</p>
<p class="p">For example, if you use the following command to grant the ALL privilege: <samp class="ph codeph">grant all on server to role &lt;role name&gt; with grant option;</samp></p>
<p class="p">And you revoke the privilege with this command: <samp class="ph codeph">revoke all on server from role &lt;role name&gt;;</samp></p>
<p class="p">Sentry will not revoke the ALL privilege from the role.</p>
<p class="p">If you run the following command immediately after you revoke the privilege: <samp class="ph codeph">show grant role &lt;role name&gt;;</samp></p>
<p class="p">The ALL privilege will not appear as a privilege granted to the role. However, after Sentry refreshes, the ALL privilege will reappear when you run the <samp class="ph codeph">show grant
role</samp> command.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Apache Impala when used with Apache Sentry</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb-341__ul_zrm_rcx_thb">
<li class="li">CDH 5.14.x and all prior releases</li>
<li class="li">CDH 5.15.0, CDH 5.15.1</li>
<li class="li">CDH 6.0.0, CDH 6.0.1</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Impala users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Sep 5, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 3.9 "Low"; <a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:L/A:L" target=
"_blank">CVSS</a>:3.0/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:L/A:L</p>
<p class="p"><strong class="ph b">Impact:</strong> Running the <samp class="ph codeph">revoke</samp> command does not revoke privileges</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-17860</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a CDH release with the fix. Once the privilege has been granted, the only way to remove it is to delete the role.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.15.2, CDH 6.0.2</p>
<aside class="note note"><span class="title">Note:</span> Once the privilege has been granted, the only way to remove it is to delete the role.</aside>
</div>
</section>
<section class="nested2" id="tsb-338_section"><a id="tsb-338" class="anchor"></a>
<h3 class="title topictitle3">Missing authorization in Apache Impala may allow data injection</h3>
<div class="body conbody">
<p class="p">A malicious user who is authenticated with Kerberos may have unauthorized access to internal services used by Impala to transfer intermediate data during query execution. If details of a
running query (e.g. query ID, query plan) are available, a user can craft some RPC requests with custom software to inject data into a running query or end query execution prematurely, leading to
wrong results of the query.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Apache Impala</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH 5.15.0, CDH 5.15.1</p>
<p class="p"><strong class="ph b">Users affected:</strong> Any users of Impala who have configured Kerberos security</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Aug 21, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 4.5 "Medium"; <a class="xref" href="https://www.first.org/cvss/calculator/3.0" target=
"_blank">CVSS</a>:3.0/AV:A/AC:H/PR:L/UI:R/S:U/C:N/I:H/A:N/E:P/RL:T/RC:C/IR:H/MAV:A/MAC:H/MPR:L/MUI:R</p>
<p class="p"><strong class="ph b">Impact:</strong> Data injection may lead to wrong results of queries.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-11785</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a version which contains the fix or as a workaround, disable KRPC by setting --use_krpc=false in the “Impala Command
Line Argument Advanced Configuration Snippet (Safety Valve)”. The workaround will disable some improvements in stability and performance implemented in CDH 5.15.0 for highly concurrent workloads.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.15.2, CDH 5.16.1 and higher</p>
</div>
</section>
<section class="nested2" id="tsb-226_section"><a id="tsb-226" class="anchor"></a>
<h3 class="title topictitle3">Impala Statestore exposes plaintext data with SSL TLS enabled</h3>
<div class="body conbody">
<p class="p">During a security analysis, Cloudera found that despite TLS being enabled for “internal” Impala ports, the Statestore thrift port did not actually use TLS. This gap would allow an
adversary with network access to eavesdrop and potentially modify the packets going to and coming from that port.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul" id="tsb-226__ul_nsc_xkc_hbb">
<li class="li">CDH 5.7 and lower</li>
<li class="li">CDH 5.8.0, 5.8.1, 5.8.2, 5.8.3, 5.8.4</li>
<li class="li">CDH 5.9.0, 5.9.1, 5.9.2</li>
<li class="li">CDH 5.10.0, 5.10.1</li>
<li class="li">CDH 5.11.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> Deployments that use “internal” TLS (TLS between Impala daemons).</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> April 27, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Data on the wire may be intercepted by a malicious server.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-5652</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Affected customers should upgrade to latest maintenance version with the fix.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.8.5, CDH 5.9.3, CDH 5.10.2, CDH 5.11.1, CDH 5.12.0</p>
</div>
</section>
<section class="nested2" id="concept_ebl_yv1_x1b_section"><a id="concept_ebl_yv1_x1b" class="anchor"></a>
<h3 class="title topictitle3">Malicious server can cause Impala server to skip authentication checks</h3>
<div class="body conbody">
<p class="p">A malicious server which impersonates an Impala service (either Impala daemon, Catalog Server or Statestore) can cause a client (Impala daemon or Statestore) to skip its authentication
checks when Kerberos is enabled. That malicious server may then intercept sensitive data intended for the Impala service.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_ebl_yv1_x1b__ul_u34_1bj_xbb">
<li class="li">CDH 5.7 and lower</li>
<li class="li">CDH 5.8.0, 5.8.1, 5.8.2, 5.8.3, 5.8.4</li>
<li class="li">CDH 5.9.0, 5.9.1</li>
<li class="li">CDH 5.10.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Deployments that use Kerberos, but not TLS, for authentication between Impala daemons. Deployments that use TLS to secure communication
between services are not affected by the same issue.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> February 27, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Data on the wire may be intercepted by a malicious server.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-5640</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Affected customers should upgrade to latest version, or enable TLS for connections between Impala services.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.8.5, CDH 5.9.2, CDH 5.10.1, CDH 5.11.0.</p>
</div>
</section>
<section class="nested2" id="tsb_174_section"><a id="tsb_174" class="anchor"></a>
<h3 class="title topictitle3">Read Access to Impala Views in queries with WHERE-clause Subqueries</h3>
<div class="body conbody">
<p class="p">Impala bypasses Sentry authorization for views if the query or the view itself contains a subquery in any WHERE clause. This gives read access to the views to any user that would
otherwise have insufficient privileges.</p>
<p class="p">The underlying base tables of views are unaffected. Queries that do not have subqueries in the WHERE clause are unaffected (unless the view itself contains such a subquery).</p>
<p class="p">Other operations, like accessing the view definition or altering the view, are unaffected.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb_174__ul_vwm_ly3_xbb">
<li class="li">CDH 5.2.0 and higher</li>
<li class="li">CDH 5.3.0 and higher</li>
<li class="li">CDH 5.4.0 and higher</li>
<li class="li">CDH 5.5.0 and higher</li>
<li class="li">CDH 5.6.0, 5.6.1</li>
<li class="li">CDH 5.7.0, 5.7.1, 5.7.2</li>
<li class="li">CDH 5.8.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Users who run Impala + Sentry and use views</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> July 26, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Users can bypass Sentry authorization for Impala views.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-6605</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a CDH version containing the fix.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.9.0 and higher, CDH 5.8.2 and higher, CDH 5.7.3 and higher</p>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2017-174" target="_blank">Read Access to Impala Views in the Presence of WHERE-clause Subqueries</a></p>
</div>
</section>
<section class="nested2" id="tsb_148_section"><a id="tsb_148" class="anchor"></a>
<h3 class="title topictitle3">Impala issued REVOKE ALL ON SERVER does not revoke all privileges</h3>
<div class="body conbody">
<p class="p">For Impala users that use Sentry for authorization, issuing a REVOKE ALL ON SERVER FROM &lt;ROLE&gt; statement does not remove all server-level privileges from the &lt;ROLE&gt;.
Specifically, Sentry fails to revoke privileges that were issued to &lt;ROLE&gt; through a GRANT ALL ON SERVER TO &lt;ROLE&gt; statement. All other privileges are revoked, but &lt;ROLE&gt; still has
ALL privileges at SERVER scope after the REVOKE ALL ON SERVER statement has been executed. The privileges are shown in the output of a SHOW GRANT statement.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala, Sentry</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<p class="p">CDH 5.5.0, CDH 5.5.1, CDH 5.5.2, CDH 5.5.4</p>
<p class="p">CDH 5.6.0, CDH 5.6.1</p>
<p class="p">CDH 5.7.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Customers who use Sentry authorization in Impala</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> April 25, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Inability to revoke ALL SERVER privileges from a specific role using Impala if they have been granted through a GRANT ALL SERVER statement.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-4572</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> If the affected role has ALL privileges on SERVER, you can remove these privileges by dropping and re-creating the role.
Alternatively, upgrade to 5.7.1, or 5.8.0 or higher.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.7.1, CDH 5.8.0 and higher.</p>
</div>
</section>
<section class="nested2" id="tsb_120_section"><a id="tsb_120" class="anchor"></a>
<h3 class="title topictitle3">Impala does not authorize authenticated Kerberos users who access internal APIs</h3>
<div class="body conbody">
<p class="p">In an Impala deployment secured with Kerberos, a malicious authenticated user can create a program that bypasses Impala and Sentry authorization mechanisms to issue internal API calls
directly. That user can then query tables to which they should not have access, or alter table metadata.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All versions of CDH 5, except for those indicated in the ‘Addressed in release/refresh/patch’ section below.</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users of Impala and Sentry with Kerberos enabled.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> February 4, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-3131</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to most recent maintenance release.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.3.10 and higher, 5.4.10 and higher, 5.5.4 and higher, 5.6.1 and higher, 5.7.0 and higher</p>
</div>
</section>
</section>
<section class="nested1" id="unique_1508076424_section"><a id="unique_1508076424" class="anchor"></a>
<h2 class="title topictitle2">Apache Kafka</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache Kafka.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_jwl_z4w_glb">Potential to bypass transaction and idempotent ACL checks in Apache Kafka</a></li>
<li class="minitoc-entry"><a href="#id_hy1_zs1_hfb">Authenticated Kafka clients may impersonate other users</a></li>
<li class="minitoc-entry"><a href="#concept_fl5_1t1_hfb">Authenticated clients may interfere with data replication</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_jwl_z4w_glb_section"><a id="concept_jwl_z4w_glb" class="anchor"></a>
<h3 class="title topictitle3">Potential to bypass transaction and idempotent ACL checks in Apache Kafka</h3>
<div class="body conbody">
<p class="p">It is possible to manually craft a Produce request which bypasses transaction and idempotent ACL validation. Only authenticated clients with Write permission on the respective topics are
able to exploit this vulnerability.</p>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="concept_jwl_z4w_glb__ul_ev3_bpw_glb">
<li class="li">CDH</li>
<li class="li">CDK Powered by Apache Kafka</li>
</ul>
</div>
<div class="p"><strong class="ph b">Releases affected</strong>:
<ul class="ul" id="concept_jwl_z4w_glb__ul_z3g_tvw_glb">
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH versions 6.0.x, 6.1.x, 6.2.0</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDK versions 3.0.x, 3.1.x, 4.0.x</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All users who run Kafka in CDH and CDK.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> September, 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong>7.1 (High) (<a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:H/A:H" target=
"_blank">CVSS</a>:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:H/A:H)</p>
<p class="p"><strong class="ph b">Impact:</strong> Attackers can exploit this issue to bypass certain security restrictions to perform unauthorized actions. This can aid in further attacks.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-17196</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Update to a version of CDH containing the fix.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="concept_jwl_z4w_glb__ul_asd_xvw_glb">
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH 6.2.1, 6.3.2</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDK 4.1.0</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2020-378-Potential-to-bypass-transaction-and-idempotent?id=284068" target="_blank">TSB 2020-378: Potential to bypass transaction and idempotent ACL checks in
Apache Kafka</a></p>
</div>
</section>
<section class="nested2" id="id_hy1_zs1_hfb_section"><a id="id_hy1_zs1_hfb" class="anchor"></a>
<h3 class="title topictitle3">Authenticated Kafka clients may impersonate other users</h3>
<div class="body conbody">
<p class="p">Authenticated Kafka clients may impersonate any other user via a manually crafted protocol message with SASL/PLAIN or SASL/SCRAM authentication when using the built-in PLAIN or SCRAM
server implementations in Apache Kafka.</p>
<p class="p">Note that the SASL authentication mechanisms that apply to this issue are neither recommended nor supported by Cloudera. In Cloudera Manager (CM) there are <a class="xref" href="https://www.cloudera.com/documentation/kafka/latest/topics/kafka_security.html#concept_v2d_dhm_s5" target="_blank">four choices</a>: PLAINTEXT, SSL, SASL_PLAINTEXT, and SASL_SSL. The SASL/PLAIN
option described in this issue is not the same as SASL_PLAINTEXT option in CM. That option uses Kerberos and is not affected. As a result it is highly unlikely that Kafka is susceptible to this issue
when managed by CM unless the authentication protocol is overridden by an Advanced Configuration Snippet (Safety Valve).</p>
<p class="p"><strong class="ph b">Products affected:</strong> CDK Powered by Apache Kafka</p>
<p class="p"><strong class="ph b">Releases affected</strong>: CDK 2.1.0 to 2.2.0, CDK 3.0.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users</p>
<p class="p"><strong class="ph b">Detected by:</strong> Rajini Sivaram (rsivaram@apache.org)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong>8.3 (High) (<a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:H/A:H" target=
"_blank">CVSS</a>:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:H/A:H)</p>
<p class="p"><strong class="ph b">Impact:</strong>Privilege escalation.</p>
<p class="p"><strong class="ph b">CVE:</strong>CVE-2017-12610</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a newer version of CDK Powered by Apache Kafka where the issue has been fixed.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDK 3.1, CDH 6.0 and higher</p>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-332?id=79943" target="_blank">TSB 2018-332: Two Kafka Security Vulnerabilities: Authenticated Kafka clients may impersonate other users and and may
interfere with data replication</a></p>
</div>
</section>
<section class="nested2" id="concept_fl5_1t1_hfb_section"><a id="concept_fl5_1t1_hfb" class="anchor"></a>
<h3 class="title topictitle3">Authenticated clients may interfere with data replication</h3>
<div class="body conbody">
<div class="section"><a class="anchor" id="concept_fl5_1t1_hfb__d384e5632"></a>
<p class="p">Authenticated Kafka users may perform an action reserved for the Broker via a manually created fetch request interfering with data replication, resulting in data loss.</p>
<p class="p"><strong class="ph b">Products affected:</strong> CDK Powered by Apache Kafka</p>
<p class="p"><strong class="ph b">Releases affected</strong>: CDK 2.0.0 to 2.2.0, CDK 3.0.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users</p>
<p class="p"><strong class="ph b">Detected by:</strong> Rajini Sivaram (rsivaram@apache.org)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong>6.3 (Medium) (<a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:L"
target="_blank">CVSS</a>:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:L)</p>
<p class="p"><strong class="ph b">Impact:</strong>Potential data loss due to improper replication.</p>
<p class="p"><strong class="ph b">CVE:</strong>CVE-2018-1288</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a newer version of CDK Powered by Apache Kafka where the issue has been fixed.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDK 3.1, CDH 6.0 and higher</p>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <a class="xref" href="https://my.cloudera.com/knowledge/TSB-2018-332?id=79943" target="_blank">TSB 2018-332: Two Kafka Security Vulnerabilities: Authenticated Kafka clients may impersonate other users and and may
interfere with data replication</a></p>
</div>
</div>
</section>
</section>
<section class="nested1" id="cloudera_manager_section"><a id="cloudera_manager" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Manager</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Cloudera Manager.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#id_fgv_skr_1cb">ZooKeeper JMX did not support TLS when managed by Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#TSB-321">Open Redirect and XSS in Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#concept_d5v_jpy_m2b">Hard Restart of Cloudera Manager Agents May Cause Subsequent Service Errors</a></li>
<li class="minitoc-entry"><a href="#concept_hvs_dny_m2b">Cloudera Manager read-only user can access sensitive cluster information</a></li>
<li class="minitoc-entry"><a href="#DOCS-3186">Cross-site scripting vulnerability in Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#concept_r1r_z2f_kcb">Cloudera Manager can inadvertently delete YARN's cgroup directory for container isolation</a></li>
<li class="minitoc-entry"><a href="#concept_tvf_34r_1cb">Privilege Escalation in Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#concept_jfh_lj4_x1b">Sensitive data of processes managed by Cloudera Manager are not secured by file permissions</a></li>
<li class="minitoc-entry"><a href="#tsb_210">Local Script Injection Vulnerability In Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#tsb_153">Cross Site Scripting (XSS) Vulnerability in Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#tsb_134">Sensitive Data Exposed in Plain-Text Readable Files</a></li>
<li class="minitoc-entry"><a href="#concept_alalsdfkl4320_lfsk30f__l2k3jfsw34__39">Sensitive Information in Cloudera Manager Diagnostic Support Bundles</a></li>
<li class="minitoc-entry"><a href="#concept_c1c_zbn_js">Cross Site Scripting Vulnerabilities in Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#topic_1_0_3">Critical Security Related Files in YARN NodeManager Configuration Directories Accessible to Any User</a></li>
<li class="minitoc-entry"><a href="#concept_nvb_3jv_wq">Cloudera Manager exposes sensitive data</a></li>
<li class="minitoc-entry"><a href="#concept_mnt_vwx_g4">Sensitive configuration values exposed in Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#topic_2_0">Cloudera Manager installs taskcontroller.cfg in insecure mode</a></li>
<li class="minitoc-entry"><a href="#topic_2_0_1">Two links in the Cloudera Manager Admin Console allow read-only access to arbitrary files on managed hosts.</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="id_fgv_skr_1cb_section"><a id="id_fgv_skr_1cb" class="anchor"></a>
<h3 class="title topictitle3">ZooKeeper JMX did not support TLS when managed by Cloudera Manager</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected:</strong> ZooKeeper, Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> Cloudera Manager 6.1.0 and lower, Cloudera Manager 5.16 and lower</p>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 7, 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> The ZooKeeper service optionally exposes a JMX port used for reporting and metrics. By default, Cloudera Manager enables this port, but prior to
Cloudera Manager 6.1.0, it did not support mutual TLS authentication on this connection. While JMX has a password-based authentication mechanism that Cloudera Manager enables by default, weaknesses
have been found in the authentication mechanism, and Oracle now advises JMX connections to enable mutual TLS authentication in addition to password-based authentication. A successful attack may leak
data, cause denial of service, or even allow arbitrary code execution on the Java process that exposes a JMX port. Starting in Cloudera Manager 6.1.0, it is possible to configure mutual TLS
authentication on ZooKeeper’s JMX port.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-11744</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to Cloudera Manager 6.1.0 and enable TLS for the ZooKeeper JMX port by turning on the configuration settings “Enable
TLS/SSL for ZooKeeper JMX” and “Enable TLS client authentication for JMX port” on the ZooKeeper service and configuring the appropriate TLS settings. Alternatively, disable the ZooKeeper JMX port via
the configuration setting “Enable JMX Agent” on the ZooKeeper service.</p>
<aside class="note note"><span class="title">Note:</span> Disabling the ZooKeeper JMX port prevents Cloudera Manager from performing health checks on the ZooKeeper service.</aside>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 6.1.0</p>
</div>
</section>
<section class="nested2" id="TSB-321_section"><a id="TSB-321" class="anchor"></a>
<h3 class="title topictitle3">Open Redirect and XSS in Cloudera Manager</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Technical Service Bulletin 2018-321 (TSB)</strong></p>
<p class="p">One type of page in Cloudera Manager uses a <samp class="ph codeph">returnUrl</samp> parameter to redirect the user to another page in Cloudera Manager once a wizard is completed. The
validity of this parameter was not checked. As a result, the user could be automatically redirected to an attacker’s external site or perform a malicious JavaScript function that results in
cross-site scripting (XSS).</p>
<p class="p">With this fix, Cloudera Manager no longer allows any value in the <samp class="ph codeph">returnUrl</samp> parameter with patterns such as <samp class="ph codeph">http://</samp>,
<samp class="ph codeph">https://</samp>, <samp class="ph codeph">//</samp>, or <samp class="ph codeph">javascript</samp>. The only exceptions to this rule are the SAML login/logout URLs, since they
are explicitly configured and are not passed via the <samp class="ph codeph">returnUrl</samp> parameter.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">5.15.0 and all earlier releases</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> The following Cloudera Manager roles: “cluster administrator”, “full administrators”, and “configurators”.</p>
<p class="p"><strong class="ph b">Date/time of detection</strong>: June 20, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Mohit Rawat & Ekta Mittal</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 8.8 High (<a class="xref" href="http://app.go.cloudera.com/e/er?elq_id=CCLOU000000130610&amp;elq_email=proactive-support%40cloudera.com&amp;s=1465054361&amp;lid=29388&amp;elqTrackId=41ffe8b2fef943969edbd19f2cfa16c1&amp;elq=b590af26ea0e4e38a7056527530a00d9&amp;elqaid=7017&amp;elqat=1"
target="_blank">CVSS</a>:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:H)</p>
<p class="p"><strong class="ph b">Impact:</strong> <a class="xref" href="http://app.go.cloudera.com/e/er?elq_id=CCLOU000000130610&amp;elq_email=proactive-support%40cloudera.com&amp;s=1465054361&amp;lid=29397&amp;elqTrackId=7d4297aafc56436895ce9911ba9da1cb&amp;elq=b590af26ea0e4e38a7056527530a00d9&amp;elqaid=7017&amp;elqat=1"
target="_blank">Open redirects</a> can silently redirect a victim to an attacker’s site. XSS vulnerabilities can be used to steal credentials or to perform arbitrary actions as the targeted user.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-15913</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to Cloudera Manager 5.15.1 or higher</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong></p>
<ul class="ul">
<li class="li">Cloudera Manager 5.15.1 and higher</li>
<li class="li">Cloudera Manager 6.0.0</li>
</ul>
</div>
</section>
<section class="nested2" id="concept_d5v_jpy_m2b_section"><a id="concept_d5v_jpy_m2b" class="anchor"></a>
<h3 class="title topictitle3">Hard Restart of Cloudera Manager Agents May Cause Subsequent Service Errors</h3>
<div class="body conbody">
<p class="p">If a “hard restart” or “hard stop” operation is performed on a Cloudera Manager Agent, the restarted agent will erroneously restart roles that existed prior to the restart and,
subsequently, 60 days later these roles may experience errors or be killed.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases of Cloudera Manager 5</p>
<p class="p">For the latest update on this issue, see the corresponding Knowledge article:</p>
<p class="p">TSB 2018-308: Hard Restart of Cloudera Manager Agents May Cause Subsequent Service Errors</p>
</div>
</section>
<section class="nested2" id="concept_hvs_dny_m2b_section"><a id="concept_hvs_dny_m2b" class="anchor"></a>
<h3 class="title topictitle3">Cloudera Manager read-only user can access sensitive cluster information</h3>
<div class="body conbody">
<p class="p">Fixed an issue where, due to a security vulnerability, a Cloudera Manager read-only user can access sensitive cluster information.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul">
<li class="li">Cloudera Manager 5.12 and all prior releases</li>
<li class="li">Cloudera Manager 5.13.0, 5.13.1, 5.13.2, 5.13.3</li>
<li class="li">Cloudera Manager 5.14.0, 5.14.1, 5.14.2, 5.14.3</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date of detection:</strong> April 18th, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity:</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Sensitive Information Disclosure</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE: CVE-2018-10815</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade Cloudera Manager to a release with the fix.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.15.0 and higher, 5.14.4</p>
<p class="p">For the latest update on this issue, see the corresponding Knowledge article:</p>
<p class="p">TSB 2018-306: Cloudera Manager Information Disclosure</p>
</div>
</section>
<section class="nested2" id="DOCS-3186_section"><a id="DOCS-3186" class="anchor"></a>
<h3 class="title topictitle3">Cross-site scripting vulnerability in Cloudera Manager</h3>
<div class="body conbody">
<p class="p">Several pages in the Cloudera Manager Admin console are vulnerable to a cross-site scripting attack.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager Admin Console</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul">
<li class="li">Cloudera Manager releases lower than 5.12</li>
<li class="li">Cloudera Manager 5.12.0, 5.12.1, 5.12.2</li>
<li class="li">Cloudera Manager 5.13.0, 5.13.1</li>
<li class="li">Cloudera Manager 5.14.0, 5.14.1</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users roles affected:</strong> Cluster Administrator, Full Administrator</p>
<p class="p"><strong class="ph b">Date of detection:</strong> January 19, 2018</p>
<p dir="ltr" class="p"><strong class="ph b">Detected by:</strong> Shafeeque Olassery Kunnikkal of Ingram Micro Asia Ltd, Security Consulting & Services</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> A cross-site scripting vulnerability can be used by an attacker to perform malicious actions. One probable form of attack is to steal the
credentials of a victim’s Cloudera Manager account.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-5798</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a release in which this issue has been fixed.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong></p>
<div class="p">
<ul class="ul">
<li class="li">Cloudera Manager 5.13.2 and higher</li>
<li class="li">Cloudera Manager 5.14.2 and higher</li>
</ul>
</div>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2018-285" target="_blank">XSS Scripting Vulnerability in Cloudera Manager</a></p>
</div>
</section>
<section class="nested2" id="concept_r1r_z2f_kcb_section"><a id="concept_r1r_z2f_kcb" class="anchor"></a>
<h3 class="title topictitle3">Cloudera Manager can inadvertently delete YARN's cgroup directory for container isolation</h3>
<div class="body conbody">
<p class="p">On systems that are using YARN’s cgroup-based mechanism for CPU isolation, when a YARN NodeManager with active YARN workload (YARN containers running on the host) is started by Cloudera
Manager within 30 seconds of being stopped, the NodeManager may be missing its root container cgroup directory, leaving that node unable to launch new YARN containers. In this case, however, YARN
reschedules the containers to other hosts, and the affected hosts will not be able to do any further processing, which slows the overall progress of existing workloads and potentially blocks new or
existing YARN workloads from completing when many hosts are affected.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">Cloudera Manager 5.8 and lower</li>
<li class="li">Cloudera Manager 5.9.0, 5.9.1, 5.9.2, 5.9.3</li>
<li class="li">Cloudera Manager 5.10.0, 5.10.1, 5.10.2</li>
<li class="li">Cloudera Manager 5.11.0, 5.11.1, 5.11.2</li>
<li class="li">Cloudera Manager 5.12.0, 5.12.1</li>
<li class="li">Cloudera Manager 5.13.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All users of Cloudera Manager who manage CDH clusters configured to use YARN’s cgroup-based CPU isolation. This is a non-default
configuration. To check whether you are using this configuration, visit the YARN service configuration page in Cloudera Manager and check whether “use cgroups for resource management” is
selected.</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Depending on the number of affected hosts, this can potentially slow or pause all YARN workloads on the cluster until resolved.</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> If you experience this issue, restart the individual NodeManagers on the affected hosts using Cloudera Manager. The restart
should be performed as a stop, wait 60 seconds, and then start. Additionally, performing restarts as “stop, wait 60 seconds, start” rather than using “restart” directly prevents this from
occurring.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.12.2, 5.13.1 and higher.</p>
</div>
</section>
<section class="nested2" id="concept_tvf_34r_1cb_section"><a id="concept_tvf_34r_1cb" class="anchor"></a>
<h3 class="title topictitle3">Privilege Escalation in Cloudera Manager</h3>
<div class="body conbody">
<p class="p">Under certain circumstances, a read-only Cloudera Manager user can discover the usernames of other users and elevate the privileges of another user. A user cannot elevate their own
privilege.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">Cloudera Manager 5.0.0, 5.0.1, 5.0.2, 5.0.5, 5.0.6, 5.0.7</li>
<li class="li">Cloudera Manager 5.1.0, 5.1.1, 5.1.2, 5.1.3, 5.1.4, 5.1.5, 5.1.6</li>
<li class="li">Cloudera Manager 5.2.0, 5.2.1, 5.2.2, 5.2.4, 5.2.5, 5.2.6, 5.2.7</li>
<li class="li">Cloudera Manager 5.3.0, 5.3.1, 5.3.2, 5.3.3, 5.3.4, 5.3.6, 5.3.7, 5.3.8, 5.3.9, 5.3.10</li>
<li class="li">Cloudera Manager 5.4.0, 5.4.1, 5.4.3, 5.4.5, 5.4.6, 5.4.7, 5.4.8, 5.4.9, 5.4.10</li>
<li class="li">Cloudera Manager 5.5.0, 5.5.1, 5.5.2, 5.5.3, 5.5.4, 5.5.6</li>
<li class="li">Cloudera Manager 5.6.0, 5.6.1</li>
<li class="li">Cloudera Manager 5.7.0, 5.7.1, 5.7.2, 5.7.4, 5.7.5</li>
<li class="li">Cloudera Manager 5.8.0, 5.8.1, 5.8.3, 5.8.4</li>
<li class="li">Cloudera Manager 5.9.0, 5.9.1</li>
<li class="li">Cloudera Manager 5.10.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All Cloudera Manager users.</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-7399</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade Cloudera Manager to 5.8.5, 5.9.2, 5.10.1, 5.11.0 or higher.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.8.5, 5.9.2, 5.10.1, 5.11.0 or higher.</p>
</div>
</section>
<section class="nested2" id="concept_jfh_lj4_x1b_section"><a id="concept_jfh_lj4_x1b" class="anchor"></a>
<h3 class="title topictitle3">Sensitive data of processes managed by Cloudera Manager are not secured by file permissions</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> 5.9.2, 5.10.1, 5.11.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users of Cloudera Manager on 5.9.2, 5.10.1, 5.11.0</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Sensitive data (such as passwords) might be exposed to users with direct access to cluster hosts due to overly-permissive local file system
permissions for certain files created by Cloudera Manager.</p>
<p class="p">The password is also visible in the Cloudera Manager Admin Console in the configuration files for the Spark History Server process.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-9327</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade Cloudera Manager to 5.9.3, 5.10.2, 5.11.1, 5.12.0 or higher</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.9.3, 5.10.2, 5.11.1, 5.12.0 or higher</p>
</div>
</section>
<section class="nested2" id="tsb_210_section"><a id="tsb_210" class="anchor"></a>
<h3 class="title topictitle3">Local Script Injection Vulnerability In Cloudera Manager</h3>
<div class="body conbody">
<p class="p">There is a script injection vulnerability in Cloudera Manager’s help search box. The user of Cloudera Manager can enter a script but there is no way for an attacker to inject a script
externally. Furthermore, the script entered into the search box has to actually return valid search results for the script to execute.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb_210__ul_asv_31j_xbb">
<li class="li">Cloudera Manager 5.0.0, 5.0.1, 5.0.2, 5.0.5, 5.0.6, 5.0.7</li>
<li class="li">Cloudera Manager 5.1.0, 5.1.1, 5.1.2, 5.1.3, 5.1.4, 5.1.5, 5.1.6</li>
<li class="li">Cloudera Manager 5.2.0, 5.2.1, 5.2.2, 5.2.4, 5.2.5, 5.2.6, 5.2.7</li>
<li class="li">Cloudera Manager 5.3.0, 5.3.1, 5.3.2, 5.3.3, 5.3.4, 5.3.6, 5.3.7, 5.3.8, 5.3.9, 5.3.10</li>
<li class="li">Cloudera Manager 5.4.0, 5.4.1, 5.4.3, 5.4.5, 5.4.6, 5.4.7, 5.4.8, 5.4.9, 5.4.10</li>
<li class="li">Cloudera Manager 5.5.0, 5.5.1, 5.5.2, 5.5.3, 5.5.4, 5.5.6</li>
<li class="li">Cloudera Manager 5.6.0, 5.6.1</li>
<li class="li">Cloudera Manager 5.7.0, 5.7.1, 5.7.2, 5.7.4, 5.7.5</li>
<li class="li">Cloudera Manager 5.8.0, 5.8.1, 5.8.2, 5.8.3</li>
<li class="li">Cloudera Manager 5.9.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All Cloudera Manager users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> November 10th, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Low</p>
<p class="p"><strong class="ph b">Impact:</strong> Possible override of client-side JavaScript controls.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-9271</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to one of the releases below</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="tsb_210__ul_bsv_31j_xbb">
<li class="li">Cloudera Manager 5.7.6 and higher</li>
<li class="li">Cloudera Manager 5.8.4 and higher</li>
<li class="li">Cloudera Manager 5.9.1 and higher</li>
<li class="li">Cloudera Manager 5.10.0 and higher</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="tsb_153_section"><a id="tsb_153" class="anchor"></a>
<h3 class="title topictitle3">Cross Site Scripting (XSS) Vulnerability in Cloudera Manager</h3>
<div class="body conbody">
<p class="p">Several pages in the Cloudera Manager UI are vulnerable to a XSS attack.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All versions of Cloudera Manager 5 except for those indicated in the ‘Addressed in release/refresh/patch’ section below.</p>
<p class="p"><strong class="ph b">Users affected:</strong> All customers who use Cloudera Manager.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 19, 2016</p>
<p class="p"><strong class="ph b">Detected by:</strong> Solucom Advisory</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> A XSS vulnerability can be used by an attacker to perform malicious actions. One probable form of attack is to steal the credentials for a victim
Cloudera Manager account.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-4948</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade Cloudera Manager to version 5.7.2 or higher or 5.8.x</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.7.2 and higher and 5.8.x.</p>
</div>
</section>
<section class="nested2" id="tsb_134_section"><a id="tsb_134" class="anchor"></a>
<h3 class="title topictitle3">Sensitive Data Exposed in Plain-Text Readable Files</h3>
<div class="body conbody">
<p class="p">Cloudera Manager Agent stores configuration information in various configuration files that are world-readable. Some of this configuration information may involve sensitive user data,
including credentials values used for authentication with other services. These files are located in <samp class="ph codeph">/var/run/cloudera-scm-agent/supervisor/include</samp> on every host.
Cloudera Manager passes information such as credentials to Hadoop processes it manages via environment variables, which are written in configuration files in this directory.</p>
<p class="p">Additionally, the response from Cloudera Manager Server to heartbeat messages sent by the Cloudera Manager Agent is stored in a world-readable file (<samp class=
"ph codeph">/var/lib/cloudera-scm-agent/response.avro</samp>) on every host. This file may contain sensitive data.</p>
<p class="p">These files and directories have been restricted to being readable only by the user running Cloudera Manager Agent, which by default is root.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All versions of Cloudera Manager 5, except for those indicated in the <a class="xref" href="Security-Bulletin.html#tsb_134__addressed_release">Addressed in release/refresh/patch</a> section below.</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users of Cloudera Manager using the releases affected above.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> March 16, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> An unauthorized user that gains access to an affected system may be able to leverage that access to subsequently authenticate with other
services.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-3192</p>
<p class="p"><strong class="ph b">Immediate action required:</strong></p>
<ul class="ul" id="tsb_134__ul_csv_31j_xbb">
<li class="li">Upgrade Cloudera Manager to one of the maintenance releases indicated below.</li>
<li class="li">Regenerate Kerberos principals used by all the services in the cluster.</li>
<li class="li">Regenerate SSL keystores used by all the services in the cluster, with a new password.</li>
<li class="li">If you are using a version of Cloudera Manager lower than 5.5.0, change the database passwords for all the CDH services, wherever applicable.</li>
</ul>
<p class="p" id="tsb_134__addressed_release"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.5.4 and higher, 5.6.1 and higher, 5.7.1 and higher</p>
</div>
</section>
<section class="nested2" id="concept_alalsdfkl4320_lfsk30f__l2k3jfsw34__39_section"><a id="concept_alalsdfkl4320_lfsk30f__l2k3jfsw34__39" class="anchor"></a>
<h3 class="title topictitle3">Sensitive Information in Cloudera Manager Diagnostic Support Bundles</h3>
<div class="body conbody">
<p class="p">Cloudera Manager is designed to transmit certain diagnostic data (or "bundles") to Cloudera. These diagnostic bundles are used by the Cloudera support team to reproduce, debug, and
address technical issues for our customers. Cloudera internally discovered a potential vulnerability in this feature, which could cause any sensitive data stored as "advanced configuration snippets
(ACS)" (formerly called "safety valves") to be included in diagnostic bundles and transmitted to Cloudera. Notwithstanding any possible transmission, such sensitive data is not used by Cloudera for
any purpose.</p>
<p class="p">Cloudera has taken the following actions:</p>
<ol class="ol" id="concept_alalsdfkl4320_lfsk30f__l2k3jfsw34__39__ol_dsv_31j_xbb">
<li class="li">Modified Cloudera Manager so that it no longer transmits advanced configuration snippets containing the sensitive data, and</li>
<li class="li">Modified Cloudera Manager SSL configuration to increase the protection level of the encrypted communication.</li>
</ol>
<p class="p">Cloudera strives to follow and also help establish best practices for the protection of customer information. In this effort, we continually review and improve our security practices,
infrastructure, and data handling policies.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_alalsdfkl4320_lfsk30f__l2k3jfsw34__39__ul_esv_31j_xbb">
<li class="li">All Cloudera Manager releases prior to 4.8.6</li>
<li class="li">Cloudera Manager 5.0.x prior to Cloudera Manager 5.0.7</li>
<li class="li">Cloudera Manager 5.1.x prior to Cloudera Manager 5.1.6</li>
<li class="li">Cloudera Manager 5.2.x prior to Cloudera Manager 5.2.7</li>
<li class="li">Cloudera Manager 5.3.x prior to Cloudera Manager 5.3.7</li>
<li class="li">Cloudera Manager 5.4.x prior to Cloudera Manager 5.4.6</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Users storing sensitive data in advanced configuration snippets</p>
<p class="p"><strong class="ph b">Severity:</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Possible transmission of sensitive data</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-6495</p>
<p class="p"><strong class="ph b">Immediate Action Required:</strong> Upgrade Cloudera Manager to one of the releases listed below.</p>
<p class="p"><strong class="ph b">ETA for resolution:</strong> September 1st, 2015</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="concept_alalsdfkl4320_lfsk30f__l2k3jfsw34__39__ul_fsv_31j_xbb">
<li class="li">Cloudera Manager 4.8.6</li>
<li class="li">Cloudera Manager 5.0.7</li>
<li class="li">Cloudera Manager 5.1.6</li>
<li class="li">Cloudera Manager 5.2.7</li>
<li class="li">Cloudera Manager 5.3.7</li>
<li class="li">Cloudera Manager 5.4.6</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="concept_c1c_zbn_js_section"><a id="concept_c1c_zbn_js" class="anchor"></a>
<h3 class="title topictitle3">Cross Site Scripting Vulnerabilities in Cloudera Manager</h3>
<div class="body conbody">
<p class="p">Multiple cross-site scripting (XSS) vulnerabilities in the Cloudera Manager UI before version 5.4.3 allow remote attackers to inject arbitrary web script or HTML using unspecified
vectors. Authentication to Cloudera Manager is required to exploit these vulnerabilities.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases prior to 5.4.3</p>
<p class="p"><strong class="ph b">Users affected:</strong> All Cloudera Manager users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 8th, 2015</p>
<p class="p"><strong class="ph b">Severity: (Low/Medium/High)</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Allows unauthorized modification.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-4457</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to Cloudera Manager 5.4.3.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 5.4.3</p>
</div>
</section>
<section class="nested2" id="topic_1_0_3_section"><a id="topic_1_0_3" class="anchor"></a>
<h3 class="title topictitle3">Critical Security Related Files in YARN NodeManager Configuration Directories Accessible to Any User</h3>
<div class="body conbody">
<p class="p">When Cloudera Manager starts a YARN NodeManager, it makes all files in its configuration directory (typically /var/run/cloudera-scm-agent/process) readable by all users. This includes
the file containing the Kerberos keytabs (yarn.keytab) and the file containing passwords for the SSL keystore (ssl-server.xml).</p>
<p class="p">Global read permissions must be removed on the NodeManager’s security-related files.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases of Cloudera Manager 4.0 and higher.</p>
<p class="p"><strong class="ph b">Users affected:</strong> Customers who are using YARN in environments where Kerberos or SSL is enabled.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> March 8, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Any user who can log in to a host where the YARN NodeManager is running can get access to the keytab file, use it to authenticate to the cluster,
and perform unauthorized operations. If SSL is enabled, the user can also decrypt data transmitted over the network.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-2263</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ol class="ol" id="topic_1_0_3__ol_lkw_pcj_xbb">
<li class="li">If you are running YARN with Kerberos/SSL with Cloudera Manager 5.x, upgrade to the maintenance release with the security fix. If you are running YARN with Kerberos with Cloudera
Manager 4.x, upgrade to any Cloudera Manager 5.x release with the security fix.</li>
<li class="li">Delete all “yarn” and “HTTP” principals from KDC/Active Directory. After deleting them, regenerate them using Cloudera Manager.</li>
<li class="li">Regenerate SSL keystores that you are using with the YARN service, using a new password.</li>
</ol>
</div>
<p class="p"><strong class="ph b">ETA for resolution:</strong> Patches are available immediately with the release of this TSB.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager releases 5.0.6, 5.1.5, 5.2.5, 5.3.3, and 5.4.0 have the fix for this bug.</p>
<p class="p">For further updates on this issue see the corresponding Knowledge article:</p>
<p class="p"><strong class="ph b" id="topic_1_0_3__docs-internal-guid-7decd6a1-1198-3395-33eb-b449027ba61c"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2015-48?elq=2b33f39a36e24943ae41b085a78d369a&amp;elqCampaignId=" target="_blank">Critical Security related Files in the YARN NodeManager
Configuration Directories can be Accessed by any User</a></strong></p>
</div>
</section>
<section class="nested2" id="concept_nvb_3jv_wq_section"><a id="concept_nvb_3jv_wq" class="anchor"></a>
<h3 class="title topictitle3">Cloudera Manager exposes sensitive data</h3>
<div class="body conbody">
<p class="p">In the Cloudera Manager 5.2 release, the LDAP bind password was erroneously marked such that it would be written to the world-readable files in /etc/hadoop, in addition to the more
private files in /var/run. Thus, any user on any host of a Cloudera Manager managed cluster could read the LDAP bind password.</p>
<p class="p">The fix to this issue removes the LDAP bind password from the files in /etc/hadoop; it is only written to configuration files in /var/run. Those files are owned by and only readable by
the appropriate service.</p>
<p class="p">Cloudera Manager writes configuration parameters to several locations. Each service gets every parameter that it requires in a directory in /var/run, and the files in those directories
are not world-readable. Clients (for example, the “hdfs” command) obtain their configuration parameters from files in /etc/hadoop. The files in /etc/hadoop are world-readable. Cloudera Manager keeps
track of where each configuration parameter is to be written so as to expose each parameter only in the location where it is required.</p>
<p class="p"><strong class="ph b">Products affected</strong>: Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected</strong>: Cloudera Manager 5.2.0, Cloudera Manager 5.2.1, Cloudera Manager 5.3.0</p>
<p class="p"><strong class="ph b">Users Affected</strong>: All users</p>
<p class="p"><strong class="ph b">Date/time of detection</strong>: December 30, 2014</p>
<p class="p"><strong class="ph b">Severity</strong>: High</p>
<p class="p"><strong class="ph b">Impact</strong>: Exposure of sensitive data</p>
<p class="p"><strong class="ph b">CVE</strong>: CVE-2014-8733</p>
<p class="p"><strong class="ph b">Immediate action required</strong>: Upgrade to Cloudera Manager 5.2.2 or higher, or Cloudera Manager 5.3.1 or higher.</p>
</div>
</section>
<section class="nested2" id="concept_mnt_vwx_g4_section"><a id="concept_mnt_vwx_g4" class="anchor"></a>
<h3 class="title topictitle3">Sensitive configuration values exposed in Cloudera Manager</h3>
<div class="body conbody">
<p class="p">Certain configuration values that are stored in Cloudera Manager are considered "sensitive", such as database passwords. These configuration values are expected to be inaccessible to
non-admin users, and this is enforced in the Cloudera Manager Admin Console. However, these configuration values are not redacted when reading them through the API, possibly making them accessible to
users who should not have such access.</p>
<p class="p"><strong class="ph b">Products affected</strong>: Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected</strong>: Cloudera Manager 4.8.2 and lower, Cloudera Manager 5.0.0</p>
<p class="p"><strong class="ph b">Users Affected</strong>: Cloudera Manager installations with non-admin users</p>
<p class="p"><strong class="ph b">Date/time of detection</strong>: May 7, 2014</p>
<p class="p"><strong class="ph b">Severity</strong>: High</p>
<p class="p"><strong class="ph b">Impact</strong>: Through the API only, non-admin users can access potentially sensitive configuration information</p>
<p class="p"><strong class="ph b">CVE</strong>: CVE-2014-0220</p>
<p class="p"><strong class="ph b">Immediate action required</strong>: Upgrade to Cloudera Manager 4.8.3 or Cloudera Manager 5.0.1 or disable non-admin users if you do not want them to have this
access.</p>
<p class="p"><strong class="ph b">ETA for resolution</strong>: May 13, 2014</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch</strong>: Cloudera Manager 4.8.3 and Cloudera Manager 5.0.1</p>
</div>
</section>
<section class="nested2" id="topic_2_0_section"><a id="topic_2_0" class="anchor"></a>
<h3 class="title topictitle3">Cloudera Manager installs taskcontroller.cfg in insecure mode</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected</strong>: Cloudera Manager and Service and Configuration Manager</p>
<p class="p"><strong class="ph b">Releases affected</strong>: Cloudera Manager 3.7.0-3.7.4, Service and Configuration Manager 3.5 (in certain cases)</p>
<p class="p"><strong class="ph b">Users affected</strong>: Users on multi-user systems who have not enabled Hadoop Kerberos features. Users using the Hadoop security features are not affected.</p>
<p class="p"><strong class="ph b">Severity</strong>: Critical</p>
<p class="p"><strong class="ph b">Impact</strong>: Vulnerability allows a malicious user to impersonate other users on the systems running the Hadoop cluster.</p>
<p class="p"><strong class="ph b">Immediate action required</strong>: Upgrade to Cloudera Manager 3.7.5 and subsequently restart the MapReduce service.</p>
<p class="p"><strong class="ph b">Workarounds are available</strong>: Any of these workarounds is sufficient.</p>
<ul class="ul" id="topic_2_0__ul_gsv_31j_xbb">
<li class="li">For CM 3.7.x (Enterprise Edition), edit the configuration "Minimum user ID for job submission" to a number higher than any UIDs on the system. 65535 is the largest value that Cloudera
Manager will accept, and is typically sufficient. Restart the MapReduce service. To find the current maximum UID on your system, run</li>
</ul>
<pre class="pre codeblock">getent passwd | awk -F: '{ if ($3 &gt; max) { max = $3; name = $1 } } END { print name, max }' </pre>
<ul class="ul" id="topic_2_0__ul_hsv_31j_xbb">
<li class="li">For CM 3.7.x Free Edition, remove the file <samp class="ph codeph">/usr/lib/hadoop-0.20/sbin/Linux-amd64-64/task-controller</samp>. This file is part of the <samp class=
"ph codeph">hadoop-0.20-sbin</samp> package and is re-installed by upgrades.</li>
<li class="li">For SCM 3.5, if the cluster has been run in both secure and non-secure configurations, remove <samp class="ph codeph">/etc/hadoop/conf/taskcontroller.cfg</samp> from all TaskTrackers.
Repeat this in the future if you reconfigure the cluster from a Kerberized to a non-Kerberized configuration.</li>
</ul>
<p class="p"><strong class="ph b">Resolution</strong>: Mar 27, 2012</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch</strong>: Cloudera Manager 3.7.5</p>
<p class="p"><strong class="ph b">Verification</strong>: Verify that, in non-secure clusters, <samp class="ph codeph">/etc/hadoop/conf/taskcontroller.cfg</samp> is unconfigured on all TaskTrackers.
(A file with only lines starting with <samp class="ph codeph">#</samp> is unconfigured.)</p>
<p class="p">If you are a Cloudera Enterprise customer and have further questions or need assistance, log a ticket with Cloudera Support through <a class="xref" href="http://support.cloudera.com"
target="_blank">http://support.cloudera.com</a>.</p>
</div>
</section>
<section class="nested2" id="topic_2_0_1_section"><a id="topic_2_0_1" class="anchor"></a>
<h3 class="title topictitle3">Two links in the Cloudera Manager Admin Console allow read-only access to arbitrary files on managed hosts.</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected</strong>: Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected</strong>: Cloudera Manager 3.7.0 through 3.7.6, 4.0.0 (beta), and 4.0.1 (GA)</p>
<p class="p"><strong class="ph b">Users affected</strong>: All Cloudera Manager Users</p>
<p class="p"><strong class="ph b">Date vulnerability discovered</strong>: June 6, 2012</p>
<p class="p"><strong class="ph b">Date vulnerability analysis and validation complete:</strong> June 15, 2012</p>
<p class="p"><strong class="ph b">Severity</strong>: Medium</p>
<p class="p"><strong class="ph b">Impact</strong>: Any user, including non-admin users, logged in to the Cloudera Manager Admin Console can access any file on any host managed by Cloudera
Manager.</p>
<p class="p"><strong class="ph b">Immediate action required</strong>:</p>
<p class="p"><strong class="ph b">Solution:</strong></p>
<p class="p">Upgrade to Cloudera Manager or Cloudera Manager Free Edition, version 3.7.7 or higher, or version 4.0.2 or higher.</p>
<p class="p"><strong class="ph b">Work Around:</strong></p>
<p class="p">If immediate upgrade is not possible, disable non-admin user access to Cloudera Manager to limit the vulnerability to Cloudera Manager admins.</p>
<p class="p"><strong class="ph b">Resolution</strong>: June 25th</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch</strong>: Cloudera Manager or Cloudera Manager Free Edition 3.7.7 or higher and 4.0.2 or higher.</p>
<p class="p"><strong class="ph b">Verification</strong>: Check the Cloudera Manager version number in the <span class="ph menucascade"><span class="ph uicontrol">Help</span> &gt; <span class=
"ph uicontrol">About</span></span></p>
<p class="p">If you are a Cloudera Enterprise customer and have further questions or need assistance, log a ticket with Cloudera Support at <a class="xref" href="http://support.cloudera.com" target=
"_blank">http://support.cloudera.com</a>.</p>
</div>
</section>
</section>
<section class="nested1" id="cloudera_navigator_section"><a id="cloudera_navigator" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Navigator</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Cloudera Navigator.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_o1q_wrm_js">Cloudera Navigator Vulnerable to the POODLE Attack</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_o1q_wrm_js_section"><a id="concept_o1q_wrm_js" class="anchor"></a>
<h3 class="title topictitle3">Cloudera Navigator Vulnerable to the POODLE Attack</h3>
<div class="body conbody">
<p class="p">Cloudera Navigator 2.2.0 through 2.2.3, and 2.3.0 and 2.3.1 includes SSL/TLS support; however, SSLv3 protocol support, which is vulnerable to the <a class="xref" href="https://www.openssl.org/~bodo/ssl-poodle.pdf" target="_blank">POODLE</a> (CVE-2014-3566) attack, was erroneously not removed.</p>
<p class="p">This vulnerability affects only those installations of Cloudera Navigator that are configured to use SSL/TLS.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Navigator</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<table cellpadding="4" cellspacing="0" summary="" id="concept_o1q_wrm_js__simpletable_mwj_lsm_js" border="1" class="simpletable">
<tr class="sthead">
<th valign="bottom" align="left" id="d384e7228" class="stentry" width="50%">Cloudera Navigator</th>
<th valign="bottom" align="left" id="d384e7231" class="stentry" width="50%">Corresponding Cloudera Manager</th>
</tr>
<tr class="strow">
<td valign="top" headers="d384e7228" class="stentry">2.2.0</td>
<td valign="top" headers="d384e7231" class="stentry">5.3.0</td>
</tr>
<tr class="strow">
<td valign="top" headers="d384e7228" class="stentry">2.2.1</td>
<td valign="top" headers="d384e7231" class="stentry">5.3.1</td>
</tr>
<tr class="strow">
<td valign="top" headers="d384e7228" class="stentry">2.2.2</td>
<td valign="top" headers="d384e7231" class="stentry">5.3.2</td>
</tr>
<tr class="strow">
<td valign="top" headers="d384e7228" class="stentry">2.2.3</td>
<td valign="top" headers="d384e7231" class="stentry">5.3.3</td>
</tr>
<tr class="strow">
<td valign="top" headers="d384e7228" class="stentry">2.3.0</td>
<td valign="top" headers="d384e7231" class="stentry">5.4.0</td>
</tr>
<tr class="strow">
<td valign="top" headers="d384e7228" class="stentry">2.3.1</td>
<td valign="top" headers="d384e7231" class="stentry">5.4.1</td>
</tr>
</table>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All web users and API clients of Cloudera Navigator when SSL/TLS is enabled.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong></p>
<p class="p"><strong class="ph b">Severity: (Low/Medium/High)</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Allows unauthorized disclosure of information; allows component impersonation.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-4078</p>
<div class="p"><strong class="ph b">Immediate action required:</strong>
<ul class="ul" id="concept_o1q_wrm_js__ul_okd_xsm_js">
<li class="li">Cloudera Navigator 2.2.x (packaged with Cloudera Manager 5.3.x): upgrade to Cloudera Navigator 2.2.4 (packaged with Cloudera Manager 5.3.4) or higher.</li>
<li class="li">Cloudera Navigator 2.3.x (packaged with Cloudera Manager 5.4.x): upgrade to Cloudera Navigator 2.3.3 (packaged with Cloudera Manager 5.4.3) or higher.</li>
<li class="li"><strong class="ph b">Please note:</strong> if you are upgrading from Cloudera Navigator 2.2.x to 2.3.3 or higher (that is, upgrading from Cloudera Manager 5.3.x to 5.4.3 or higher) and
are impacted by this issue, you must remove the Advanced Configuration (safety value) SSL settings and reconfigure SSL using the new configuration, as specified at:
<p class="p"><a class="xref" href="http://www.cloudera.com/content/cloudera/en/documentation/core/latest/topics/sg_nav_ssl.html" target=
"_blank">http://www.cloudera.com/content/cloudera/en/documentation/core/latest/topics/sg_nav_ssl.html</a>.</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong></p>
<ul class="ul" id="concept_o1q_wrm_js__ul_r2l_hwm_js">
<li class="li">
<p class="p">Cloudera Navigator 2.2.4 (packaged with Cloudera Manager 5.3.4)</p>
</li>
<li class="li">
<p class="p">Cloudera Navigator 2.3.3 (packaged with Cloudera Manager 5.4.3)</p>
</li>
</ul>
</div>
</section>
</section>
<section class="nested1" id="nav_key_trustee_section"><a id="nav_key_trustee" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Navigator Key Trustee</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Navigator Key Trustee.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_jpc_mwm_js">Key Trustee Server Passive Not Storing Keys Synchronously</a></li>
<li class="minitoc-entry"><a href="#concept_vyn_kd2_4cb">Malicious User Can Access Database Used to Store HDFS Encryption Zone Keys</a></li>
<li class="minitoc-entry"><a href="#concept_ndv_ssz_rcb">Incorrect Default KMS ACL Values Allow Remote Access to Purge and Undelete API Calls on Encryption Zone Keys</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_jpc_mwm_js_section"><a id="concept_jpc_mwm_js" class="anchor"></a>
<h3 class="title topictitle3">Key Trustee Server Passive Not Storing Keys Synchronously</h3>
<div class="body conbody">
<p class="p">Under normal operations, the active Key Trustee Server rejects key creation requests when a passive server is down. However, due to lack of synchronous replication on the active server,
the following scenario can occur, causing key loss:</p>
<ul class="ul">
<li class="li">Passive server goes down</li>
<li class="li">Encryption zone is created generating a new key stored only in the active server</li>
</ul>
<ul class="ul">
<li class="li">Active server suffers catastrophic, unrecoverable failure before passive server is restored</li>
<li class="li">Passive server restored and promoted to active without new key</li>
<li class="li">New passive server is created</li>
</ul>
<p class="p">This scenario is an extreme edge case, but the consequence of losing an encryption key can be severe. The immediate action documented below addresses this issue by turning on synchronous
replication.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Key Trustee Server 5.4.0</p>
<p class="p"><strong class="ph b">Releases affected:</strong> Key Trustee Server 5.4.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users using Key Trustee 5.4.0 in High Availability mode.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Friday, May 29, 2015</p>
<p class="p"><strong class="ph b">Severity: (Low/Medium/High)</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Key data loss.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2015-4166</p>
<div class="p"><strong class="ph b">Immediate action required:</strong> Apply workaround documented below:
<ol class="ol" id="concept_jpc_mwm_js__ol_w2c_cym_js">
<li class="li">Run the following commands on the active server:
<pre class="pre codeblock">$ echo synchronous_standby_names=ztslave 
&gt;&gt;/var/lib/keytrustee/db/postgres.conf.include
$ echo synchronous_commit=on 
&gt;&gt;/var/lib/keytrustee/db/postgres.conf.include</pre>
<p class="p">The commands above assume a default path to the database. If you modified the default database location, replace <span class="ph filepath">/var/lib/keytrustee/db</span> with the modified
path.</p>
</li>
<li class="li">Restart the active database server
<ol class="ol" type="a" id="concept_jpc_mwm_js__ol_nc1_p1n_js">
<li class="li">Using packages, on the active Key Trustee server restart the database server with the following commands.
<pre class="pre codeblock">
$ sudo -u keytrustee ktadmin db --stop --pg-rootdir /var/lib/keytrustee/db
$ sudo -u keytrustee ktadmin db --start --pg-rootdir /var/lib/keytrustee/db --background</pre>
<p class="p">The commands above assume a default path to the database. If you modified the default database location, replace <span class="ph filepath">/var/lib/keytrustee/db</span> with the modified
path.</p>
</li>
<li class="li">Using Cloudera Manager
<p class="p">Restart the active database role, following the instructions in <a class="xref" href="http://www.cloudera.com/content/cloudera/en/documentation/core/latest/topics/cm_mc_role_instances.html#cmug_topic_5_2__section_k3v_fnq_gn" target="_blank">Starting, Stopping, and Restarting Role
Instances</a>.</p>
</li>
</ol>
</li>
</ol>
</div>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Key Trustee Server 5.4.3</p>
</div>
</section>
<section class="nested2" id="concept_vyn_kd2_4cb_section"><a id="concept_vyn_kd2_4cb" class="anchor"></a>
<h3 class="title topictitle3">Malicious User Can Access Database Used to Store HDFS Encryption Zone Keys</h3>
<div class="body conbody">
<p class="p">This vulnerability, which impacts Key Trustee Server, allows anyone with access to the host on which Key Trustee Server is running to use a non-libpq based connection driver to connect
to the Postgres database used by Key Trustee Server without specifying a password.</p>
<p class="p">The keys stored in the database are encrypted, which means access to data cannot be gained by this method. However, the vulnerability could provide a way for someone to alter encryption
zone key metadata, delete the encryption zone keys, or delete the contents of the entire database.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Key Trustee Server</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases prior to 5.14.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users who have a cluster with HDFS encryption using Navigator Key Trustee Server to manage encryption zone keys.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> August 10, 2017</p>
<p class="p"><strong class="ph b">Severity: (Low/Medium/High)</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Potential loss of access to all data in encryption zones.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-7546</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> To remove the connection capability to Postgres (via the local network from all Key Trustee Server roles):</p>
<div class="p">
<ol class="ol">
<li class="li">Log in as root to the host running Key Trustee Server.</li>
<li class="li">Make a backup of the original Postgres configuration file:
<pre class="pre codeblock">cp /var/lib/keytrustee/db/pg_hba.conf \ /var/lib/keytrustee/db/pg_hba.conf.bak</pre></li>
<li class="li">Edit the Postgres configuration file to comment out the use of network connections for Postgres.</li>
<li class="li">Using a preferred editor, edit <samp class="ph codeph">/var/lib/keytrustee/db/pg_hba.conf</samp>, and add a <samp class="ph codeph">#</samp> character to the beginning of the following
lines in the file:
<pre class="pre codeblock">host keytrustee keytrustee 127.0.0.1/32 md5
host keytrustee keytrustee ::1/128 md5

After editing, the files should appear as:

#host keytrustee keytrustee 127.0.0.1/32 md5
#host keytrustee keytrustee ::1/128 md5</pre></li>
<li class="li">Save the file.</li>
<li class="li">Perform a rolling restart of Key Trustee Server service.
<aside class="note note"><span class="title">Note:</span> While Key Trustee Server is restarting, new keys cannot be created and keys cannot be rolled. The restart should complete in under five
minutes.</aside>
<aside class="note note"><span class="title">Note:</span> If there is only one instance of Key Trustee Server, restarting the Key Trustee Service may result in delayed or failed jobs waiting on an
encryption zone key. If a job fails, rerun the job after the single instance of Key Trustee Server has restarted.</aside>
</li>
</ol>
<strong class="ph b">Addressed in release/refresh/patch:</strong> Key Trustee Server 5.14.0.</div>
</div>
</section>
<section class="nested2" id="concept_ndv_ssz_rcb_section"><a id="concept_ndv_ssz_rcb" class="anchor"></a>
<h3 class="title topictitle3">Incorrect Default KMS ACL Values Allow Remote Access to Purge and Undelete API Calls on Encryption Zone Keys</h3>
<div class="body conbody">
<p class="p">The Navigator Key Trustee KMS includes two API calls in addition to those in Apache Hadoop KMS: purge and undelete. The KMS ACL values for these commands are <samp class=
"ph codeph">keytrustee.kms.acl.PURGE</samp> and <samp class="ph codeph">keytrustee.kms.acl.UNDELETE</samp>, respectively. The default value for the ACLs in Key Trustee KMS 5.12.0 and 5.13.0 is "*",
which allows anyone who knows the name of an encryption zone key and has network access to the Key Trustee KMS to make those calls against known encryption zone keys. The <samp class=
"ph codeph">UNDELETE</samp> command will result in the recovery of a previously deleted, but not purged, key. The key will still be protected by normal ACLs and is not exposed. The <samp class=
"ph codeph">PURGE</samp> command will permanently delete a key in active use, resulting in loss of access to encrypted HDFS data.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Navigator Key Trustee KMS, Cloudera Manager</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul">
<li class="li">Navigator Key Trustee KMS 5.12.0, 5.13.0</li>
</ul>
</div>
<div class="p">
<ul class="ul">
<li class="li">Cloudera Manager 5.12.0, 5.12.1, 5.12.2</li>
</ul>
</div>
<div class="p">
<ul class="ul">
<li class="li">Cloudera Manager 5.13.0, 5.13.1</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Users who have a cluster with HDFS encryption using Navigator Key Trustee KMS to manage encryption zone keys.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Reported on October 25, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Potential loss of access to all data in HDFS encryption zones. The loss of access is permanent if a backup of the deleted key is not available.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-6185</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Use Cloudera Manager to set the values of the ACLs for purge (<samp class="ph codeph">keytrustee.kms.acl.PURGE</samp>) and
undelete (<samp class="ph codeph">keytrustee.kms.acl.UNDELETE</samp>) to be empty; this denies access to all calls to those functions.</p>
<p class="p">To set the values:</p>
<div class="p">
<ol class="ol">
<li class="li">Log into Cloudera Manager as an administrative user.</li>
<li class="li">Click on the <strong class="ph b">Key Trustee KMS</strong> service.</li>
<li class="li">Click on <strong class="ph b">Configuration</strong>.</li>
<li class="li">In the Search box, type “ACL”.</li>
<li class="li">At the bottom of the section <strong class="ph b">Key Management Server Proxy Advanced Configuration Snippet (Safety Valve) for kms-acls.xml</strong> add a new ACL by clicking the
<strong class="ph b">+</strong> icon.</li>
<li class="li">In the <strong class="ph b">Name</strong> field add “keytrustee.kms.acl.PURGE”.</li>
<li class="li">Repeat step 5, and in the <strong class="ph b">Name</strong> field add “keytrustee.kms.acl.UNDELETE”.</li>
<li class="li">Scroll to the bottom of the page and click <strong class="ph b">Save</strong>.</li>
<li class="li">Use Cloudera Manager to perform a rolling restart of the Navigator Key Trustee KMS service.</li>
</ol>
</div>
<div class="p">
<aside class="note note"><span class="title">Note:</span> If there is only one instance of Navigator Key Trustee KMS, then restarting the service may result in delayed or failed jobs waiting on an
encryption zone key. If a job fails, then rerun the job after the single instance of Navigator Key Trustee KMS has restarted.</aside>
</div>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Navigator Key Trustee KMS 5.14.0 and higher and Cloudera Manager 5.14.0 and higher</p>
</div>
</section>
</section>
<section class="nested1" id="unique_1804028388_section"><a id="unique_1804028388" class="anchor"></a>
<h2 class="title topictitle2">Apache Oozie</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache Oozie.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#oozie_tsb_2018-274">Apache Oozie Server Vulnerability</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="oozie_tsb_2018-274_section"><a id="oozie_tsb_2018-274" class="anchor"></a>
<h3 class="title topictitle3">Apache Oozie Server Vulnerability</h3>
<div class="body conbody">
<p class="p">A vulnerability in the Oozie Server allows a cluster user to read private files owned by the user running the Oozie Server process.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Oozie</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All releases prior to CDH 5.12.0, CDH 5.12.0, CDH 5.12.1, CDH 5.12.2, CDH 5.13.0, CDH 5.13.1, CDH 5.14.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users running the Oozie Server</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> November 13, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Daryn Sharp and Jason Lowe of Oath (formerly Yahoo! Inc)</p>
<p class="p"><strong class="ph b">Severity: (Low/Medium/High)</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> The vulnerability allows a cluster user to read private files owned by the user running the Oozie Server process. The malicious user can construct a
workflow XML file containing XML directives and configuration that reference sensitive files on the Oozie server host.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-15712</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to release where the issue is fixed.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul">
<li class="li">CDH 5.13.2 and higher</li>
<li class="li">CDH 5.14.2 and higher</li>
<li class="li">CDH 5.15.0 and higher</li>
</ul>
</div>
</div>
</section>
</section>
<section class="nested1" id="search_section"><a id="search" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Search</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Cloudera Search.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_pm2_4cm_33b">SSRF issue in Apache Solr</a></li>
<li class="minitoc-entry"><a href="#concept_s4c_zsd_dbb">Sample solrconfig.xml file for enabling Solr/Sentry Authorization is missing critical attribute</a></li>
<li class="minitoc-entry"><a href="#tsb-222">Apache Solr ReplicationHandler Path Traversal Attack</a></li>
<li class="minitoc-entry"><a href="#tsb_165">Solr Queries by document id can bypass Sentry document-level security via the RealTimeGetHandler</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_pm2_4cm_33b_section"><a id="concept_pm2_4cm_33b" class="anchor"></a>
<h3 class="title topictitle3">SSRF issue in Apache Solr</h3>
<div class="body conbody">
<p class="p"><strong class="ph b" id="concept_pm2_4cm_33b__docs-internal-guid-2ddc1722-7fff-41ae-a9d8-7feffa1d00ce">The "shards" parameter in the query URL does not have a corresponding whitelist
mechanism,so it can request any URL.</strong>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Apache Solr in CDH</p>
<p class="p"><strong class="ph b">Releases affected:</strong> CDH versions before 5.16.2 and 6.2.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Every Solr user</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> 12th February 2019</p>
<p class="p"><strong class="ph b">Detected by:</strong> dk from Chaitin Tech</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> The "shards" parameter in Solr queries does not have a corresponding whitelist mechanism. A remote attacker with access to the server could make
Solr perform an HTTP GET request to any reachable URL.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-3164</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to latest C5 and C6 maintenance releases. Ensure your network settings are configured so that only trusted traffic is
allowed to ingress/egress your hosts running Solr.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 6.2.0, CDH 5.16.2</p>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2019-365?id=92140" target="_blank">TSB 2019-365: CVE-2017-3164 SSRF issue in Apache Solr</a></p>
</div>
</section>
<section class="nested2" id="concept_s4c_zsd_dbb_section"><a id="concept_s4c_zsd_dbb" class="anchor"></a>
<h3 class="title topictitle3">Sample solrconfig.xml file for enabling Solr/Sentry Authorization is missing critical attribute</h3>
<div class="body conbody">
<p class="p">The solrconfig.xml.secure sample configuration which was provided with CDH, if used to create solrconfig.xml, does not enforce Sentry authorization on the request URI /update/json/docs
because it is missing a necessary attribute.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Solr (if Sentry enabled)</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_s4c_zsd_dbb__ul_t4c_zsd_dbb">
<li class="li">CDH 5.8 and lower</li>
<li class="li">CDH 5.9.2 and lower</li>
<li class="li">CDH 5.10.1 and lower</li>
<li class="li">CDH 5.11.1 and lower</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Those who are using Sentry authorization with Cloudera Search and who have used the provided sample configuration and have not specified the
below attributes in their solrconfig.xml file.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 18, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> István Farkas, Hrishikesh Gadre</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Unauthorized users using the request URI /update/json/docs may insert, update, or delete documents.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-9325</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Every solrconfig.xml of a collection protected by Sentry should be updated in Zookeeper.</p>
<div class="p">Line of:
<pre class="pre codeblock">&lt;updateRequestProcessorChain name="updateIndexAuthorization"&gt;</pre></div>
<div class="p">Must be replaced with:
<pre class="pre codeblock">&lt;updateRequestProcessorChain name="updateIndexAuthorization" default="true"&gt;</pre></div>
<p class="p">After updating the configuration in Zookeeper, the collections must be reloaded.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> The following releases will contain the fixed sample configuration file:
<ul class="ul" id="concept_s4c_zsd_dbb__ul_r5w_l5d_dbb">
<li class="li">CDH 5.9.3 and higher</li>
<li class="li">CDH 5.10.2 and higher</li>
<li class="li">CDH 5.11.2 and higher</li>
<li class="li">CDH 5.12.0 and higher
<p class="p">Upgrading will only correct the sample configuration file. The fix mentioned above will still need to be applied on the affected cluster.</p>
</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="tsb-222_section"><a id="tsb-222" class="anchor"></a>
<h3 class="title topictitle3">Apache Solr ReplicationHandler Path Traversal Attack</h3>
<div class="body conbody">
<p class="p">When using the Index Replication feature, Solr nodes can pull index files from a master/leader node using an HTTP API that accepts a file name. However, Solr did not validate the file
name, hence it was possible to craft a special request involving path traversal, leaving any file readable to the Solr server process exposed. Solr servers using Kerberos authentication are at less
risk since only authenticated users can gain direct HTTP access.</p>
<p class="p">See <a class="xref" href="https://issues.apache.org/jira/browse/SOLR-10031" target="_blank">SOLR-10031</a> for details. Here is the <a class="xref" href="http://mail-archives.apache.org/mod_mbox/www-announce/201702.mbox/%3C73692BD4-E68A-48AC-895D-4A84B3EA4EF6%40apache.org%3E" target="_blank">relevant public announcement</a>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Search</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="tsb-222__ul_k53_qbj_xbb">
<li class="li">CDH 5.0.0, 5.0.1, 5.0.2, 5.0.3, 5.0.4, 5.0.5, 5.0.6</li>
<li class="li">CDH 5.1.0, 5.1.2, 5.1.3, 5.1.4, 5.1.5</li>
<li class="li">CDH 5.2.0, 5.2.1, 5.2.3, 5.2.4, 5.2.5, 5.2.6</li>
<li class="li">CDH 5.3.0, 5.3.2, 5.3.3, 5.3.4, 5.3.5, 5.3.6, 5.3.8, 5.3.9, 5.3.10</li>
<li class="li">CDH 5.4.0, 5.4.1, 5.4.3, 5.4.4, 5.4.5, 5.4.7, 5.4.8, 5.4.9, 5.4.10, 5.4.11</li>
<li class="li">CDH 5.5.0, 5.5.1, 5.5.2, 5.5.4, 5.5.5, 5.5.6</li>
<li class="li">CDH 5.6.0, 5.6.1</li>
<li class="li">CDH 5.7.0, 5.7.1, 5.7.2, 5.7.3, 5.7.4, 5.7.5</li>
<li class="li">CDH 5.8.0, 5.8.1, 5.8.2, 5.8.3</li>
<li class="li">CDH 5.9.0, 5.9.1</li>
<li class="li">CDH 5.10.0</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All users using Cloudera Search</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> January 25, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Hrishikesh Gadre (Cloudera Inc.)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Moderate. This vulnerability will allow an authenticated remote user to read arbitrary files as the <samp class="ph codeph">solr</samp> user.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-3163</p>
<p class="p"><strong class="ph b">Immediate action required:</strong></p>
<p class="p">Upgrade to a release that addresses this issue. Also consider enabling Kerberos authentication and TLS for Solr.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="tsb-222__ul_l53_qbj_xbb">
<li class="li">5.7.6, 5.8.4, 5.9.2, 5.10.1, 5.11.0 (and higher releases).</li>
</ul>
</div>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2017-222" target="_blank">TSB 2017-222: Apache Solr ReplicationHandler path traversal attack</a></p>
</div>
</section>
<section class="nested2" id="tsb_165_section"><a id="tsb_165" class="anchor"></a>
<h3 class="title topictitle3">Solr Queries by document id can bypass Sentry document-level security via the RealTimeGetHandler</h3>
<div class="body conbody">
<p class="p">Solr RealTimeGet queries with the <samp class="ph codeph">id</samp> or <samp class="ph codeph">ids</samp> parameters are not checked by Sentry document-level security in versions prior
to CDH5.7.0. The <samp class="ph codeph">id</samp> or <samp class="ph codeph">ids</samp> parameters must be exact matches for document ids (wild-carding is not supported) and the document ids are not
otherwise visible to users who are denied access by document-level security. However, a user with internal knowledge of the document id structure or who is able to guess document ids is able to
access unauthorized documents. This issue is documented in <a class="xref" href="https://issues.apache.org/jira/browse/SENTRY-989" target="_blank">SENTRY-989</a>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Search</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All versions of CDH 5, except for those indicated in the <a class="xref" href="Security-Bulletin.html#tsb_165__version_fix_info">Addressed in release/refresh/patch</a> section below.</p>
<p class="p"><strong class="ph b">Users affected:</strong> Cloudera Search users implementing document-level security</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> December 17, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-6353</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to CDH 5.7.0 or higher.</p>
<p class="p" id="tsb_165__version_fix_info"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.7.0 and higher.</p>
</div>
</section>
</section>
<section class="nested1" id="sentry_section"><a id="sentry" class="anchor"></a>
<h2 class="title topictitle2">Apache Sentry</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Cloudera Search.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_vp4_q2x_thb">Using Impala with Sentry enabled, revoking ALL privilege from server with grant option does not revoke</a></li>
<li class="minitoc-entry"><a href="#TSB2018-312">Sentry allows the ALTER TABLE EXCHANGE PARTITION operation on a restricted database</a></li>
<li class="minitoc-entry"><a href="#unique_1616930223">Sample solrconfig.xml file for enabling Solr/Sentry Authorization is missing critical attribute</a></li>
<li class="minitoc-entry"><a href="#id_nd4_xkr_1cb">Impala issued REVOKE ALL ON SERVER does not revoke all privileges</a></li>
<li class="minitoc-entry"><a href="#id_lp5_ykr_1cb">Hive built-in functions “reflect”, “reflect2”, and “java_method” not blocked by default in Sentry</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_vp4_q2x_thb_section"><a id="concept_vp4_q2x_thb" class="anchor"></a>
<h3 class="title topictitle3">Using Impala with Sentry enabled, revoking ALL privilege from server with grant option does not revoke</h3>
<div class="body conbody">
<p class="p">If you grant a role the ALL privilege at the SERVER scope and use the WITH GRANT OPTION clause, you cannot revoke the privilege. Although the <samp class="ph codeph">show grant
role</samp> command will show that the privilege has been revoked immediately after you run the command, the privilege has not been revoked.</p>
<p class="p">For example, if you use the following command to grant the ALL privilege: <samp class="ph codeph">grant all on server to role &lt;role name&gt; with grant option;</samp></p>
<p class="p">And you revoke the privilege with this command: <samp class="ph codeph">revoke all on server from role &lt;role name&gt;;</samp></p>
<p class="p">Sentry will not revoke the ALL privilege from the role.</p>
<p class="p">If you run the following command immediately after you revoke the privilege: <samp class="ph codeph">show grant role &lt;role name&gt;;</samp></p>
<p class="p">The ALL privilege will not appear as a privilege granted to the role. However, after Sentry refreshes, the ALL privilege will reappear when you run the <samp class="ph codeph">show grant
role</samp> command.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Apache Impala when used with Apache Sentry</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_vp4_q2x_thb__d529e153">
<li class="li">CDH 5.14.x and all prior releases</li>
<li class="li">CDH 5.15.0, CDH 5.15.1</li>
<li class="li">CDH 6.0.0, CDH 6.0.1</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Impala users</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> Sep 5, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Cloudera</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 3.9 "Low"; <a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:L/A:L" target=
"_blank">CVSS</a>:3.0/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:L/A:L</p>
<p class="p"><strong class="ph b">Impact:</strong> Running the <samp class="ph codeph">revoke</samp> command does not revoke privileges</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-17860</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a CDH release with the fix. Once the privilege has been granted, the only way to remove it is to delete the role.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.15.2, CDH 6.0.2</p>
<aside class="note note"><span class="title">Note:</span> Once the privilege has been granted, the only way to remove it is to delete the role.</aside>
</div>
</section>
<section class="nested2" id="TSB2018-312_section"><a id="TSB2018-312" class="anchor"></a>
<h3 class="title topictitle3">Sentry allows the ALTER TABLE EXCHANGE PARTITION operation on a restricted database</h3>
<div class="body conbody">
<p class="p">If a user has ALL permissions on a database, the <a class="xref" href="http://app.go.cloudera.com/e/er?elq_id=CCLOU000000725354&amp;elq_email=fce%40cloudera.com&amp;s=1465054361&amp;lid=29389&amp;elqTrackId=25fdd65899574ea18373c7e4d5e13f1e&amp;elq=582c521e25b0459990d54cdbb3af130e&amp;elqaid=7005&amp;elqat=1"
target="_blank">ALTER TABLE EXCHANGE PARTITION</a> command allows the user to move partitions from a table that the user does not have access to. For example, if a user has ALL permissions on
database A, but no permissions on database B, the user can create a table with a schema in database A that is identical to a table in database B. The user can then move partitions from database B
into database A, which allows the user to view restricted data and remove that data from the source database.</p>
<p class="p">After you upgrade to a version of CDH listed in the "Addressed in release" section below, a user that tries to use the EXCHANGE PARTITION command to move a partition from a restricted
database will receive a "No valid privileges" error.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hive services running Sentry</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul" id="TSB2018-312__ul_gkj_vnx_cfb">
<li class="li">CDH 5.13.x and below</li>
<li class="li">CDH 5.14.0, 5.14.2, 5.14.3</li>
<li class="li">CDH 5.15.0</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> Hive users running Sentry</p>
<p class="p"><strong class="ph b">Date/time of detection</strong>: May 10, 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 8.1 High (<a class="xref" href="http://app.go.cloudera.com/e/er?elq_id=CCLOU000000725354&amp;elq_email=fce%40cloudera.com&amp;s=1465054361&amp;lid=29388&amp;elqTrackId=1717b939b07943a9aadb20e51495e057&amp;elq=582c521e25b0459990d54cdbb3af130e&amp;elqaid=7005&amp;elqat=1"
target="_blank">CVSS</a>:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:N)</p>
<p class="p"><strong class="ph b">Impact:</strong> Sensitive data exposure</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-8028</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a version of CDH with the fix.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong></p>
<ul class="ul" id="TSB2018-312__ul_hkj_vnx_cfb">
<li class="li">CDH 5.14.4</li>
<li class="li">CDH 5.15.1</li>
<li class="li">CDH 6.0.0</li>
</ul>
<p class="p">For the latest update on this issue see the corresponding Knowledge article:</p>
<p class="p"><a class="xref" href="http://app.go.cloudera.com/e/er?elq_id=CCLOU000000725354&amp;elq_email=fce%40cloudera.com&amp;s=1465054361&amp;lid=29387&amp;elqTrackId=4290325ca5e84b3c8477ca335eb8ebdd&amp;elq=582c521e25b0459990d54cdbb3af130e&amp;elqaid=7005&amp;elqat=1"
target="_blank">TSB 2018-312: Sentry allows the "ALTER TABLE EXCHANGE PARTITION" operation on a restricted database</a></p>
</div>
</section>
<section class="nested2" id="unique_1616930223_section"><a id="unique_1616930223" class="anchor"></a>
<h3 class="title topictitle3">Sample solrconfig.xml file for enabling Solr/Sentry Authorization is missing critical attribute</h3>
<div class="body conbody">
<p class="p">The solrconfig.xml.secure sample configuration which was provided with CDH, if used to create solrconfig.xml, does not enforce Sentry authorization on the request URI /update/json/docs
because it is missing a necessary attribute.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Solr (if Sentry enabled)</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="unique_1616930223__d565e121">
<li class="li">CDH 5.8 and lower</li>
<li class="li">CDH 5.9.2 and lower</li>
<li class="li">CDH 5.10.1 and lower</li>
<li class="li">CDH 5.11.1 and lower</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Those who are using Sentry authorization with Cloudera Search and who have used the provided sample configuration and have not specified the
below attributes in their solrconfig.xml file.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 18, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> István Farkas, Hrishikesh Gadre</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> Unauthorized users using the request URI /update/json/docs may insert, update, or delete documents.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-9325</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Every solrconfig.xml of a collection protected by Sentry should be updated in Zookeeper.</p>
<div class="p">Line of:
<pre class="pre codeblock">&lt;updateRequestProcessorChain name="updateIndexAuthorization"&gt;</pre></div>
<div class="p">Must be replaced with:
<pre class="pre codeblock">&lt;updateRequestProcessorChain name="updateIndexAuthorization" default="true"&gt;</pre></div>
<p class="p">After updating the configuration in Zookeeper, the collections must be reloaded.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> The following releases will contain the fixed sample configuration file:
<ul class="ul" id="unique_1616930223__d565e190">
<li class="li">CDH 5.9.3 and higher</li>
<li class="li">CDH 5.10.2 and higher</li>
<li class="li">CDH 5.11.2 and higher</li>
<li class="li">CDH 5.12.0 and higher
<p class="p">Upgrading will only correct the sample configuration file. The fix mentioned above will still need to be applied on the affected cluster.</p>
</li>
</ul>
</div>
</div>
</section>
<section class="nested2" id="id_nd4_xkr_1cb_section"><a id="id_nd4_xkr_1cb" class="anchor"></a>
<h3 class="title topictitle3">Impala issued REVOKE ALL ON SERVER does not revoke all privileges</h3>
<div class="body conbody">
<p class="p">For Impala users that use Sentry for authorization, issuing a REVOKE ALL ON SERVER FROM &lt;ROLE&gt; statement does not remove all server-level privileges from the &lt;ROLE&gt;.
Specifically, Sentry fails to revoke privileges that were issued to &lt;ROLE&gt; through a GRANT ALL ON SERVER TO &lt;ROLE&gt; statement. All other privileges are revoked, but &lt;ROLE&gt; still has
ALL privileges at SERVER scope after the REVOKE ALL ON SERVER statement has been executed. The privileges are shown in the output of a SHOW GRANT statement.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Impala, Sentry</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<p class="p">CDH 5.5.0, CDH 5.5.1, CDH 5.5.2, CDH 5.5.4</p>
<p class="p">CDH 5.6.0, CDH 5.6.1</p>
<p class="p">CDH 5.7.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> Customers who use Sentry authorization in Impala</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> April 25, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Inability to revoke ALL SERVER privileges from a specific role using Impala if they have been granted through a GRANT ALL SERVER statement.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-4572</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> If the affected role has ALL privileges on SERVER, you can remove these privileges by dropping and re-creating the role.
Alternatively, upgrade to 5.7.1, or 5.8.0 or higher.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.7.1, CDH 5.8.0 and higher.</p>
</div>
</section>
<section class="nested2" id="id_lp5_ykr_1cb_section"><a id="id_lp5_ykr_1cb" class="anchor"></a>
<h3 class="title topictitle3">Hive built-in functions “reflect”, “reflect2”, and “java_method” not blocked by default in Sentry</h3>
<div class="body conbody">
<p class="p">Sentry does not block the execution of Hive built-in functions “reflect”, “reflect2”, and “java_method” by default in some CDH versions. These functions allow the execution of arbitrary
user code, which is a security issue.</p>
<p class="p">This issue is documented in <a class="xref" href="https://issues.apache.org/jira/browse/SENTRY-960" target="_blank">SENTRY-960</a>.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Hive, Sentry</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<p class="p">CDH 5.4.0, CDH 5.4.1, CDH 5.4.2, CDH 5.4.3, CDH 5.4.4, CDH 5.4.5, CDH 5.4.6, CDH 5.4.7, CDH 5.4.8, CDH 5.5.0, CDH 5.5.1</p>
<p class="p"><strong class="ph b">Users affected:</strong> Users running Sentry with Hive.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> November 13, 2015</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> This potential vulnerability may enable an authenticated user to execute arbitrary code as a Hive superuser.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-0760</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Explicitly add the following to the blacklist property in hive-site.xml of Hive Server2:</p>
<pre class="pre codeblock">
 &lt;property&gt;
    &lt;name&gt;hive.server2.builtin.udf.blacklist&lt;/name&gt;
    &lt;value&gt;reflect,reflect2,java_method &lt;/value&gt;
  &lt;/property&gt;
 </pre>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.4.9, CDH 5.5.2, CDH 5.6.0 and higher</p>
</div>
</section>
</section>
<section class="nested1" id="spark_section"><a id="spark" class="anchor"></a>
<h2 class="title topictitle2">Apache Spark</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache Spark.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_a5q_jww_glb">Apache Spark local files left unencrypted</a></li>
<li class="minitoc-entry"><a href="#tsb-317">Apache Spark XSS vulnerability in UI</a></li>
<li class="minitoc-entry"><a href="#TSB-249">Unsafe deserialization in Apache Spark launcher API</a></li>
<li class="minitoc-entry"><a href="#TSB-237">Keystore password for Spark History Server not properly secured</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_a5q_jww_glb_section"><a id="concept_a5q_jww_glb" class="anchor"></a>
<h3 class="title topictitle3">Apache Spark local files left unencrypted</h3>
<div class="body conbody">
<p class="p">Certain operations in Spark leave local files unencrypted on disk, even when local file encryption is enabled with “spark.io.encryption.enabled”.</p>
<div class="p">This includes cached blocks that are fetched to disk (controlled by <samp class="ph codeph">spark.maxRemoteBlockSizeFetchToMem</samp>) in the following cases:
<ul class="ul" id="concept_a5q_jww_glb__ul_o2r_kww_glb">
<li dir="ltr" class="li">
<p dir="ltr" class="p">In SparkR when parallelize is used</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">In Pyspark when broadcast and parallelize are used</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">In Pyspark when python udfs is used</p>
</li>
</ul>
</div>
<div class="p"><strong class="ph b">Products affected:</strong>
<ul class="ul" id="concept_a5q_jww_glb__ul_lxf_sww_glb">
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS Powered by Apache Spark</p>
</li>
</ul>
</div>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul" id="concept_a5q_jww_glb__ul_e4y_sww_glb">
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH 5.15.1 and earlier</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH 6.0.0</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.0.0 releases</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.1.0 release 1 and 2</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.2.0 release 1 and 2</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.3.0 release 3</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> All users who run Spark on CDH and CDS in a multi-user environment. .</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> July 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> 6.3 Medium (<a class="xref" href="https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:L/AC:H/PR:N/UI:R/S:U/C:H/I:H/A:N"
target="_blank"><u class="ph u">CVSS AV:L/AC:H/PR:N/UI:R/S:U/C:H/I:H/A:N</u></a>)</p>
<p class="p"><strong class="ph b">Impact:</strong> Unencrypted data accessible.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2019-10099</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Update to a version of CDH containing the fix.</p>
<p class="p"><strong class="ph b">Workaround:</strong> Do not use of pyspark and the fetch-to-disk options.</p>
<div class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong>
<ul class="ul" id="concept_a5q_jww_glb__ul_yk5_yww_glb">
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH 5.15.2</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH 5.16.0</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDH 6.0.1</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.1.0 release 3</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.2.0 release 3</p>
</li>
<li dir="ltr" class="li">
<p dir="ltr" class="p">CDS 2.3.0 release 4</p>
</li>
</ul>
</div>
<p class="p"><strong class="ph b">Knowledge article:</strong> For the latest update on this issue see the corresponding Knowledge article: <strong class="ph b" id=
"concept_a5q_jww_glb__docs-internal-guid-5873843f-7fff-765e-f909-1c2e6dfaf320"><a class="xref" href="https://my.cloudera.com/knowledge/TSB-2020-336-Apache-Spark-local-files-left-unencrypted?id=285558" target="_blank"><u class="ph u">TSB 2020-336: Apache Spark local files left
unencrypted</u></a></strong></p>
</div>
</section>
<section class="nested2" id="tsb-317_section"><a id="tsb-317" class="anchor"></a>
<h3 class="title topictitle3">Apache Spark XSS vulnerability in UI</h3>
<div class="body conbody">
<p class="p">A malicious user can construct a URL pointing to a Spark UI's job and stage info pages that can be used to execute arbitrary scripts and expose user information, if this URL is accessed
by another user who is unaware of the malicious intent.</p>
<p class="p"><strong class="ph b">Products affected:</strong> CDS Powered By Apache Spark</p>
<div class="p"><strong class="ph b">Releases affected:</strong>
<ul class="ul">
<li class="li">CDS 2.1.0 release 1 and release 2</li>
<li class="li">CDS 2.2.0 release 1 and release 2</li>
<li class="li">CDS 2.3.0 release 2</li>
</ul>
</div>
<p class="p"><strong class="ph b">Users affected:</strong> Potentially any user who uses the Spark UI.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> May 28, 2018</p>
<p class="p"><strong class="ph b">Detected by:</strong> Spencer Gietzen (Rhino Security Labs)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> XSS vulnerabilities can be used to steal credentials or to perform arbitrary actions as the targeted user.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-8024</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to a version of CDS Powered by Apache Spark where this issue is fixed, or as a workaround, disable the Spark UI for jobs
and the Spark History Server.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDS 2.3.0 release 3</p>
</div>
</section>
<section class="nested2" id="TSB-249_section"><a id="TSB-249" class="anchor"></a>
<h3 class="title topictitle3">Unsafe deserialization in Apache Spark launcher API</h3>
<div class="body conbody">
<p class="p">In Apache Spark 1.6.0 until 2.1.1, the launcher API performs unsafe deserialization of data received by its socket. This makes applications launched programmatically using the
SparkLauncher#startApplication() API potentially vulnerable to arbitrary code execution by an attacker with access to any user account on the local machine. It does not affect apps run by
spark-submit or spark-shell. The attacker would be able to execute code as the user that ran the Spark application. Users are encouraged to update to Spark version 2.2.0 or later.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Distribution of Apache Spark 2 and Spark in CDH.</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">CDH: all 5.7.x, all 5.8.x, 5.9.0-5.9.2, 5.10.0-5.10.1, 5.11.0-5.11.1</li>
<li class="li">Cloudera's Distribution of Apache Spark: 2.0 Release 1, 2.0 Release 2, 2.1 Release 1</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 1, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Aditya Sharad (Semmle)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Privilege escalation to the user who ran the Spark application.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-12612</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Affected customers should upgrade to latest maintenance version with the fix:</p>
<ul class="ul">
<li class="li">Spark 1.x users: Update to CDH 5.9.3, 5.10.2, 5.11.2, or 5.12.0 or later</li>
<li class="li">Spark 2.x users: Update to Cloudera's Distribution of Apache Spark 2.1 Release 2 or later, or 2.2 Release 1 or later</li>
<li class="li">Or, discontinue use of the programmatic launcher API.</li>
</ul>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong></p>
<ul class="ul">
<li class="li">CDH: 5.9.3, CDH 5.10.2, CDH 5.11.2, CDH 5.12.0</li>
<li class="li">Cloudera's Distribution of Apache Spark: 2.1 Release 2, 2.2 Release 1</li>
</ul>
</div>
</section>
<section class="nested2" id="TSB-237_section"><a id="TSB-237" class="anchor"></a>
<h3 class="title topictitle3">Keystore password for Spark History Server not properly secured</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Manager, Spark</p>
<p class="p"><strong class="ph b">Releases affected:</strong> 5.11.0</p>
<p class="p"><strong class="ph b">Users affected:</strong> All users with TLS enabled for the Spark History Server.</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> April 18, 2017</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> The keystore password for the Spark History Server is exposed in a world-readable file on the machine running the Spark History Server. The keystore
file itself is not exposed.</p>
<p class="p">The password is also visible in the Cloudera Manager Admin Console in the configuration files for the Spark History Server process.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-9326</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to Cloudera Manager 5.11.1.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> 5.11.1 or higher.</p>
<p class="p">For the latest update on this issue see the Cloudera Knowledge article, <a class="xref" href="https://cloudera-portal.force.com/articles/KB_Article/TSB-2017-237" target="_blank">TSB
2017-237: Keystore password for the Spark History Server not properly secured</a>.</p>
</div>
</section>
</section>
<section class="nested1" id="spark2_section"><a id="spark2" class="anchor"></a>
<h2 class="title topictitle2">Cloudera Distribution of Apache Spark 2</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Cloudera Distribution of Apache Spark 2.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#id_e2z_jkr_1cb">Unsafe deserialization in Apache Spark launcher API</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="id_e2z_jkr_1cb_section"><a id="id_e2z_jkr_1cb" class="anchor"></a>
<h3 class="title topictitle3">Unsafe deserialization in Apache Spark launcher API</h3>
<div class="body conbody">
<p class="p">In Apache Spark 1.6.0 until 2.1.1, the launcher API performs unsafe deserialization of data received by its socket. This makes applications launched programmatically using the
SparkLauncher#startApplication() API potentially vulnerable to arbitrary code execution by an attacker with access to any user account on the local machine. It does not affect apps run by
spark-submit or spark-shell. The attacker would be able to execute code as the user that ran the Spark application. Users are encouraged to update to Spark version 2.2.0 or later.</p>
<p class="p"><strong class="ph b">Products affected:</strong> Cloudera Distribution of Apache Spark 2 and Spark in CDH.</p>
<p class="p"><strong class="ph b">Releases affected:</strong></p>
<ul class="ul">
<li class="li">CDH: all 5.7.x, all 5.8.x, 5.9.0-5.9.2, 5.10.0-5.10.1, 5.11.0-5.11.1</li>
<li class="li">Cloudera's Distribution of Apache Spark: 2.0 Release 1, 2.0 Release 2, 2.1 Release 1</li>
</ul>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 1, 2017</p>
<p class="p"><strong class="ph b">Detected by:</strong> Aditya Sharad (Semmle)</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Medium</p>
<p class="p"><strong class="ph b">Impact:</strong> Privilege escalation to the user who ran the Spark application.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2017-12612</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Affected customers should upgrade to latest maintenance version with the fix:</p>
<ul class="ul">
<li class="li">Spark 1.x users: Update to CDH 5.9.3, 5.10.2, 5.11.2, or 5.12.0 or later</li>
<li class="li">Spark 2.x users: Update to Cloudera's Distribution of Apache Spark 2.1 Release 2 or later, or 2.2 Release 1 or later</li>
<li class="li">Or, discontinue use of the programmatic launcher API.</li>
</ul>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong></p>
<ul class="ul">
<li class="li">CDH: 5.9.3, CDH 5.10.2, CDH 5.11.2, CDH 5.12.0</li>
<li class="li">Cloudera's Distribution of Apache Spark: 2.1 Release 2, 2.2 Release 1</li>
</ul>
</div>
</section>
</section>
<section class="nested1" id="zookeeper_section"><a id="zookeeper" class="anchor"></a>
<h2 class="title topictitle2">Apache ZooKeeper</h2>
<div class="body conbody">
<div class="minitoc">
<p class="p toc inpage">This section lists the security bulletins that have been released for Apache ZooKeeper.</p>
<ul class="ul">
<li class="minitoc-entry"><a href="#concept_j3b_zl2_wgb">ZooKeeper JMX did not support TLS when managed by Cloudera Manager</a></li>
<li class="minitoc-entry"><a href="#tsb_188">Buffer Overflow Vulnerability in ZooKeeper C Command-Line Interface (CLI)</a></li>
</ul>
<p></p></div>
</div>
<section class="nested2" id="concept_j3b_zl2_wgb_section"><a id="concept_j3b_zl2_wgb" class="anchor"></a>
<h3 class="title topictitle3">ZooKeeper JMX did not support TLS when managed by Cloudera Manager</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected:</strong> ZooKeeper, Cloudera Manager</p>
<p class="p"><strong class="ph b">Releases affected:</strong> Cloudera Manager 6.1.0 and lower, Cloudera Manager 5.16 and lower</p>
<p class="p"><strong class="ph b">Users affected:</strong> All</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> June 7, 2018</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> High</p>
<p class="p"><strong class="ph b">Impact:</strong> The ZooKeeper service optionally exposes a JMX port used for reporting and metrics. By default, Cloudera Manager enables this port, but prior to
Cloudera Manager 6.1.0, it did not support mutual TLS authentication on this connection. While JMX has a password-based authentication mechanism that Cloudera Manager enables by default, weaknesses
have been found in the authentication mechanism, and Oracle now advises JMX connections to enable mutual TLS authentication in addition to password-based authentication. A successful attack may leak
data, cause denial of service, or even allow arbitrary code execution on the Java process that exposes a JMX port. Starting in Cloudera Manager 6.1.0, it is possible to configure mutual TLS
authentication on ZooKeeper’s JMX port.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2018-11744</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Upgrade to Cloudera Manager 6.1.0 and enable TLS for the ZooKeeper JMX port by turning on the configuration settings “Enable
TLS/SSL for ZooKeeper JMX” and “Enable TLS client authentication for JMX port” on the ZooKeeper service and configuring the appropriate TLS settings. Alternatively, disable the ZooKeeper JMX port via
the configuration setting “Enable JMX Agent” on the ZooKeeper service.</p>
<aside class="note note"><span class="title">Note:</span> Disabling the ZooKeeper JMX port prevents Cloudera Manager from performing health checks on the ZooKeeper service.</aside>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> Cloudera Manager 6.1.0</p>
</div>
</section>
<section class="nested2" id="tsb_188_section"><a id="tsb_188" class="anchor"></a>
<h3 class="title topictitle3">Buffer Overflow Vulnerability in ZooKeeper C Command-Line Interface (CLI)</h3>
<div class="body conbody">
<p class="p"><strong class="ph b">Products affected:</strong> ZooKeeper</p>
<p class="p"><strong class="ph b">Releases affected:</strong> All CDH 5.x versions lower than CDH 5.9.</p>
<p class="p"><strong class="ph b">Users affected:</strong> ZooKeeper users using the C CLI</p>
<p class="p"><strong class="ph b">Date/time of detection:</strong> September 21, 2016</p>
<p class="p"><strong class="ph b">Severity (Low/Medium/High):</strong> Low</p>
<p class="p"><strong class="ph b">Impact:</strong> The ZooKeeper C client shells <samp class="ph codeph">cli_st</samp> and <samp class="ph codeph">cli_mt</samp> have a buffer overflow vulnerability
associated with parsing of the input command when using the <samp class="ph codeph">cmd:&lt;cmd&gt;</samp> batch mode syntax. If the command string exceeds 1024 characters, a buffer overflow occurs.
There is no known compromise that takes advantage of this vulnerability, and if security is enabled, the attacker is limited by client-level security constraints.</p>
<p class="p"><strong class="ph b">CVE:</strong> CVE-2016-5017</p>
<p class="p"><strong class="ph b">Immediate action required:</strong> Use the fully featured/supported Java CLI rather than the C CLI. This can be accomplished by executing the <samp class=
"ph codeph">zookeeper-client</samp> command on hosts running the ZooKeeper server role.</p>
<p class="p"><strong class="ph b">Addressed in release/refresh/patch:</strong> CDH 5.9.0</p>
</div>
</section>
</section>
</div>
<div id="categories_footer_div" class="categories_in_topic"><p><b>Categories:</b> <a href="../categories/hub_apache_hadoop.html">Apache Hadoop</a> <span>|</span> <a href="../categories/hub_cloudera_data_science_workbench.html">Cloudera Data Science Workbench</a> <span>|</span> <a href="../categories/hub_cloudera_distribution_of_apache_spark_2.html">Cloudera Distribution of Apache Spark 2</a> <span>|</span> <a href="../categories/hub_cloudera_enterprise.html">Cloudera Enterprise</a> <span>|</span> <a href="../categories/hub_cloudera_manager.html">Cloudera Manager</a> <span>|</span> <a href="../categories/hub_cloudera_navigator.html">Cloudera Navigator</a> <span>|</span> <a href="../categories/hub_cloudera_navigator_key_trustee.html">Cloudera Navigator Key Trustee</a> <span>|</span> <a href="../categories/hub_cloudera_search.html">Cloudera Search</a> <span>|</span> <a href="../categories/hub_hbase.html">HBase</a> <span>|</span> <a href="../categories/hub_hive.html">Hive</a> <span>|</span> <a href="../categories/hub_hue.html">Hue</a> <span>|</span> <a href="../categories/hub_impala.html">Impala</a> <span>|</span> <a href="../categories/hub_oozie.html">Oozie</a> <span>|</span> <a href="../categories/hub_security_bulletins.html">Security bulletins</a> <span>|</span> <a href="../categories/hub_sentry.html">Sentry</a> <span>|</span> <a href="../categories/hub_spark.html">Spark</a> <span>|</span> <a href="../categories/hub_vulnerabilities.html">Vulnerabilities</a> <span>|</span> <a href="../categories/hub_zookeeper.html">ZooKeeper</a> <span>|</span> <a href="../categories/hub.html">All Categories</a></p></div>
<!--CATEGORY_DIV_PLACEHOLDER-->
<div class="row" id="topicsNPLinks">
<div class="col-xs-6">
<div class="previousLink"></div>
</div>
<div class="col-xs-6">
<div class="nextLink pull-right"></div>
</div>
</div>
</article>
</section>
</div>
<div class="hidden-xs col-sm-1" id="topbutton_container">
<div id="topbuttons"></div>
</div>
</div>
</div>
</div>
<!--BEGIN_FOOTER-->
<footer>
<div class="container">
<div class="col-sm-8 footer-left">
<div class="section">
<div id="footer-contact-info">
<ul>
<li><a href="https://www.cloudera.com/about-cloudera.html">About Cloudera</a></li>
<li><a href="https://www.cloudera.com/resources.html">Resources</a></li>
<li><a href="https://www.cloudera.com/contact-us.html">Contact</a></li>
<li><a href="https://www.cloudera.com/about-cloudera/careers.html">Careers</a></li>
<li><a href="https://www.cloudera.com/about-cloudera/press-center.html">Press</a></li>
<li><a href="https://www.cloudera.com/documentation.html">Documentation</a></li>
</ul>
<p>United States: +1 888 789 1488<br>
Outside the US: +1 650 362 0488</p>
</div>
</div>
<div class="section">
<p><span class="byline">© 2020 Cloudera, Inc. All rights reserved. <a href="http://hadoop.apache.org">Apache Hadoop</a> and associated open source project names are trademarks of the <a href="http://apache.org">Apache Software Foundation</a>. For a complete list of trademarks, <a href="https://www.cloudera.com/legal/terms-and-conditions.html#trademarks">click here.</a></span></p>
<p>If this documentation includes code, including but not limited to, code examples, Cloudera makes this available to you under the terms of the Apache License, Version 2.0, including any required
notices. A copy of the Apache License Version 2.0 can be found <a href="https://opensource.org/licenses/Apache-2.0">here</a>.</p>
</div>
</div>
<div class="col-sm-4 footer-right">
<ul>
<li><a href="https://www.linkedin.com/company/cloudera"><img src="https://www.cloudera.com/etc/designs/www/clientlibs/icons/xicon-linkedin.png.pagespeed.ic.dwQqthP6pF.png"></a></li>
<li><a href="https://www.facebook.com/cloudera"><img src="https://www.cloudera.com/etc/designs/www/clientlibs/icons/xicon-facebook.png.pagespeed.ic.Ri6ukB0SDX.png"></a></li>
<li><a href="https://twitter.com/cloudera"><img src="https://www.cloudera.com/etc/designs/www/clientlibs/icons/xicon-twitter.png.pagespeed.ic.2X_OrA7wsp.png"></a></li>
<li><a href="https://www.cloudera.com/contact-us.html"><img src="https://www.cloudera.com/etc/designs/www/clientlibs/icons/xicon-mail.png.pagespeed.ic.ASrwNyaYc6.png"></a></li>
</ul>
<div class="text parbase section">
<p><a href="https://www.cloudera.com/legal/terms-and-conditions.html">Terms & Conditions</a>&nbsp; | &nbsp;<a href="https://www.cloudera.com/legal/policies.html">Privacy Policy</a></p>
</div>
<div id="page_creation_message">Page generated April&nbsp;7,&nbsp;2020.</div>
</div>
</div>
</footer>
<!--END_FOOTER-->
<script type="text/javascript">
document.getElementById('form-holder').innerHTML = '<form action="https://my.cloudera.com/search" id="docs-search" method="get" novalidate="" name="docs-search">'
        + '<label for="q" class="visuallyhidden">Search</label>'
        + '<input name= "q" id="q" placeholder="Search Documentation" type="search"/>'
        + '<input name="fq" id="fq1" type="hidden" value=\'all_facet_hier:\"Content Type|Documentation\"\'/>'+ '<button type="submit"><span class="fa fa-search" aria-hidden="true"></span></button></form>';
</script>
<script type="text/javascript">

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2275969-4', 'auto');
            ga('send', 'pageview');
</script>
<script type="text/javascript" src="../themes/html5-cloudera/js/cdoc-utils.js?v=20200319"></script>
<script type="text/javascript">

        if(document.domain == 'www.cloudera.com'){
            document.write('<script type="text/javascript" src="//assets.adobedtm.com/98a3a1c24ee5de4297f8ae77cf444e0c86ff2f04/satelliteLib-2b934fee5c4cb90dad47c223f80ea9c99e9761b2.js"></scr' + 'ipt>')
          }else{
            document.write('<script type="text/javascript" src="//assets.adobedtm.com/98a3a1c24ee5de4297f8ae77cf444e0c86ff2f04/satelliteLib-2b934fee5c4cb90dad47c223f80ea9c99e9761b2-staging.js"></scr' + 'ipt>')
          }
</script>
<script type="text/javascript">
_satellite.pageBottom();
</script>
<script type="text/javascript" src="../themes/html5-cloudera/js/cdoc-filter.js?v=20200319"></script>
</body>
</html>
