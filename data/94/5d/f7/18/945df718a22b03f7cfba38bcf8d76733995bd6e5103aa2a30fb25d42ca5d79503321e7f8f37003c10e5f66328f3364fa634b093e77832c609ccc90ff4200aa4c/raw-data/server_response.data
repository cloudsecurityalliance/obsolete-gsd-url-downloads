<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777 - platform/frameworks/av - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/frameworks/av/%2B/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/frameworks/">frameworks</a> / <a class="Breadcrumbs-crumb" href="/platform/frameworks/av/">av</a> / <span class="Breadcrumbs-crumb">b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777</td><td><span>[<a href="/platform/frameworks/av/+log/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777">log</a>]</span> <span>[<a href="/platform/frameworks/av/+archive/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Pawin Vongmasa &lt;pawin@google.com&gt;</td><td>Wed Apr 20 15:51:48 2016 -0700</td></tr><tr><th class="Metadata-title">committer</th><td>The Android Automerger &lt;android-build@android.com&gt;</td><td>Thu Apr 21 19:19:47 2016 -0700</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/">98ea2cd94c1e9ed03951fd9d35ff6b594c324bea</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777%5E">45737cb776625f17384540523674761e6313e6d4</a> <span>[<a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">SampleTable.cpp: Fixed a regression caused by a fix for bug
28076789.

Detail: Before the original fix
(<a href="https://android-review.googlesource.com/#/q/Id207f369ab7b27787d83f5d8fc48dc53ed9fcdc9">Id207f369ab7b27787d83f5d8fc48dc53ed9fcdc9</a>) for 28076789, the
code allowed a time-to-sample table size to be 0. The change
made in that fix disallowed such situation, which in fact should
be allowed. This current patch allows it again while maintaining
the security of the previous fix.

Bug: 28288202
Bug: 28076789
Change-Id: <a href="https://android-review.googlesource.com/#/q/I1c9a60c7f0cfcbd3d908f24998dde15d5136a295">I1c9a60c7f0cfcbd3d908f24998dde15d5136a295</a>
</pre><ul class="DiffTree"><li><a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/media/libstagefright/SampleTable.cpp">media/libstagefright/SampleTable.cpp</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777%5E%21/#F0">diff</a>]</span></li><li><a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/media/libstagefright/include/SampleTable.h">media/libstagefright/include/SampleTable.h</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777%5E%21/#F1">diff</a>]</span></li></ul><div class="DiffSummary">2 files changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 98ea2cd94c1e9ed03951fd9d35ff6b594c324bea</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - CleanSpec.mk"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/CleanSpec.mk">CleanSpec.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - MODULE_LICENSE_APACHE2"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/MODULE_LICENSE_APACHE2">MODULE_LICENSE_APACHE2</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NOTICE"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/NOTICE">NOTICE</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - camera/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/camera/">camera/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - cmds/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/cmds/">cmds/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - drm/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/drm/">drm/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - include/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/include/">include/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - media/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/media/">media/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - radio/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/radio/">radio/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - services/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/services/">services/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - soundtrigger/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/soundtrigger/">soundtrigger/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tools/"><a class="FileList-itemLink" href="/platform/frameworks/av/+/b57b3967b1a42dd505dbe4fcf1e1d810e3ae3777/tools/">tools/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>