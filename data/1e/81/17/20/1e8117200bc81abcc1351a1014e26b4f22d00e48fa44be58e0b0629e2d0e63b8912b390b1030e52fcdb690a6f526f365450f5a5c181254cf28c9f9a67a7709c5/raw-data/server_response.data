<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">

      <meta name="referrer" content="origin">
<script type="text/javascript" src="page.cgi?1635509207&amp;id=bayotbase/fielddefs.js"></script>




<script type="text/javascript">var BB_CONFIG = ({"defaults":{"bugentry_fields":["summary","product","component","rh_sub_components","severity","priority","comment"],"platform":"Unspecified","priority":"Unspecified","op_sys":"Unspecified","severity":"Unspecified"},"user":{"groups":[],"enterable_products":[],"logged_in":false}});</script><script type="text/javascript">
var classifications = '[ { "name": "Red Hat", "description": "Red Hat Products"},{ "name": "Workflows", "description": "User driven workflows"},{ "name": "JBoss", "description": "JBoss Products"},{ "name": "CentOS", "description": "CentOS Projects"},{ "name": "Fedora", "description": "Fedora Products"},{ "name": "Community", "description": "Community Projects"},{ "name": "oVirt", "description": "oVirt Virtualization Management Projects"},{ "name": "Internal", "description": "Internal Projects."},{ "name": "Other", "description": "Other Miscellaneous Products"},{ "name": "Unclassified", "description": "Not assigned to any classification"},{ "name": "Retired", "description": "Products that have reached end of life, or were never released."} ]';
var c_optgroups = JSON.parse(classifications);
</script>
    <title>524520 &ndash; (CVE-2009-3286) CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="js/yui/assets/skins/sam/autocomplete.css" rel="stylesheet" type="text/css"><link href="js/yui/assets/skins/sam/calendar.css" rel="stylesheet" type="text/css"><link href="skins/standard/global.css" rel="stylesheet" type="text/css"><link href="extensions/BayotBase/web/css/base.css" rel="stylesheet" type="text/css"><link href="extensions/BayotBase/web/jquery-ui-1.12.1.custom/jquery-ui.min.css" rel="stylesheet" type="text/css"><link href="skins/standard/bug.css" rel="stylesheet" type="text/css"><link href="extensions/Voting/web/style.css" rel="stylesheet" type="text/css"><link href="extensions/ExternalBugs/web/css/global.css" rel="stylesheet" type="text/css"><link href="extensions/FontAwesome/web/css/all.min.css" rel="stylesheet" type="text/css"><link href="extensions/RedHat/web/css/redhat.css" rel="stylesheet" type="text/css"><link href="extensions/RedHat/web/DataTables/datatables.min.css" rel="stylesheet" type="text/css"><link href="extensions/RedHat/web/alertify/css/alertify.min.css" rel="stylesheet" type="text/css"><link href="extensions/RedHat/web/alertify/css/themes/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="extensions/SelectizeJS/web/css/selectize.bootstrap3.css" rel="stylesheet" type="text/css"><link href="extensions/SelectizeJS/web/css/SelectizeJS.css" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js"></script><script type="text/javascript" src="extensions/BayotBase/web/js/jquery-3.6.0.min.js"></script><script type="text/javascript" src="extensions/BayotBase/web/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script><script type="text/javascript" src="extensions/BayotBase/web/js/jquery.cookie.js"></script><script type="text/javascript" src="extensions/BayotBase/web/js/jquery.jsonrpc.js"></script><script type="text/javascript" src="extensions/BayotBase/web/js/Base.js"></script><script type="text/javascript" src="extensions/BayotBase/web/js/bayot.util.js"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js"></script><script type="text/javascript" src="js/yui/connection/connection-min.js"></script><script type="text/javascript" src="js/yui/json/json-min.js"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js"></script><script type="text/javascript" src="js/global.js"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 5,
                maxattachmentsize: 20000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug.",
                group_required:
                    "You must select at least one group for bugs in this product."
            }
            
              , api_token: ''
            
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "524520 – (CVE-2009-3286) CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken",
                             "show_bug.cgi?id=524520" );
        document.title = "524520 – (CVE-2009-3286) CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "524520 – (CVE-2009-3286) CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js"></script><script type="text/javascript" src="js/field.js"></script><script type="text/javascript" src="extensions/ExternalBugs/web/js/external_bugs.js"></script><script type="text/javascript" src="extensions/RedHat/web/DataTables/datatables.min.js"></script><script type="text/javascript" src="extensions/RedHat/web/alertify/alertify.min.js"></script><script type="text/javascript" src="extensions/RedHat/web/colResize/dataTables.colResize.js"></script><script type="text/javascript" src="extensions/RedHat/web/js/redhat.js"></script><script type="text/javascript" src="extensions/SelectizeJS/web/js/standalone/selectize.min.js"></script><script type="text/javascript" src="extensions/SelectizeJS/web/js/SelectizeJS.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Red Hat Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="/extensions/RedHat/web/css/favicons/production.ico?v=0">
  </head>

  <body 
        class="bugzilla-redhat-com status_colours_pastel
                 bz_bug
                 bz_status_CLOSED
                 bz_product_Security_Response
                 bz_component_vulnerability
                 bz_bug_524520 yui-skin-sam">

  <div id="header"><div id="banner">
   <ul id="loginin_launcher"><a href="#" onclick="$('#loginin_launcher').addClass('bz_default_hidden');$('#login_container').removeClass('bz_default_hidden');"><i class="fa fa-user" aria-hidden="true"></i>&nbsp;&nbsp;Login</a></ul>
   <ul id="login_container" class="bz_default_hidden">
    <a href="#" id="hide_mini_login" onclick="$('#login_container').addClass('bz_default_hidden');$('#loginin_launcher').removeClass('bz_default_hidden');">[x]</a>
     
    <li id="mini_login_container"><div id="saml2_container">
    Log in using an account from:
  <div id="saml2auth_login_Fedora Account System">
    <a href="saml2_login.cgi?idp=Fedora%20Account%20System&amp;target=show_bug.cgi%3Fid%3D524520"><i class="fa fa-cogs" aria-hidden="true"></i>&nbsp;&nbsp;Fedora Account System</a>
  </div>
  <div id="saml2auth_login_Red Hat Associate">
    <a href="saml2_login.cgi?idp=Red%20Hat%20Associate&amp;target=show_bug.cgi%3Fid%3D524520"><i class="fa fa-user-secret" aria-hidden="true"></i>&nbsp;&nbsp;Red Hat Associate</a>
  </div>
  <div id="saml2auth_login_Red Hat Customer">
    <a href="saml2_login.cgi?idp=Red%20Hat%20Customer&amp;target=show_bug.cgi%3Fid%3D524520"><i class="fa fa-user" aria-hidden="true"></i>&nbsp;&nbsp;Red Hat Customer</a>
  </div>
  Or login using a Red Hat Bugzilla account
  <div>

  <form action="show_bug.cgi?id=524520" method="POST"
        class="mini_login "
        id="mini_login">
    <input id="Bugzilla_login" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in">
  </form>
</li>
<li id="forgot_container">
  <a id="forgot_link" href="#forgot"
     onclick="return show_forgot_form('')"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;&nbsp;Forgot&nbsp;Password</a>
  <form action="token.cgi" method="post" id="forgot_form"
        class="mini_forgot bz_default_hidden">
    <label for="login">Login:</label>
    <input name="loginname" size="20" id="login" required
        type="email" placeholder="Your Email Address">
    <input id="forgot_button" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token" name="token"
           value="1635627301--rWjdekkpJLBcF97TpwnAtG3f7BBvuLxt_dqMYMjbCg">
    <p>
    <a href="#" onclick="return hide_forgot_form('')"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;&nbsp;Hide Forgot</a>
  </form>
</li>
<li>
  <a href="createaccount.cgi"><span><i class="fas fa-plus" aria-hidden="true"></i>&nbsp;&nbsp;Create an Account</span></a>
</li>
    
   </ul>
  </div>

    <div id="titles">
      <span id="title">Red Hat Bugzilla &ndash; Bug&nbsp;524520</span>


    </div>


    <div id="common_links"><ul class="links">
  <li class="form">
    
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>
  <li><a href="./" title="Home"><i class="fas fa-home"></i></a></li>
  <li><a href="enter_bug.cgi">New</a></li>
  <li class="submenu">
    <a href="#" title="Search"><i class="fas fa-search"></i> <span class="fa fa-caret-down"></span></a>
    <div>
      <ul>
        <li><a href="query.cgi?format=specific">Simple Search</a></li>
        <li><a href="query.cgi?format=advanced">Advanced Search</a></li>
      </ul>
    </div>
  </li>
  <li class="submenu">
   <a href="#">My Links <span class="fa fa-caret-down"></span></a>
   <div>
    <ul>
      <li><a href="describecomponents.cgi">Browse</a></li>
      <li>
            <a href="request.cgi">Requests</a></li>
      <li class="submenu">
        <a  href="report.cgi">Reports <span class="fa fa-caret-right"></span></a>
        <div>
          <ul>
            </li>
            <li class="submenu">
              <a  href="#">Current State <span class="fa fa-caret-right"></span></a>
              <div>
                <ul>
                  <li id="report_search">
                    <a href="query.cgi">Search</a>
                  </li>
                  <li id="report_tabular">
                      <a href="query.cgi?format=report-table">Tabular reports</a>
                  </li>
                    <li id="report_graphical">
                        <a href="query.cgi?format=report-graph">Graphical reports</a>
                    </li>
                  <li id="report_duplicates">
                    <a href="duplicates.cgi">Duplicates</a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="submenu">
              <a  href="#">Other Reports <span class="fa fa-caret-right"></span></a>
              <div>
                <ul>
                  <li>
                      <a href="https://bugzilla.redhat.com/page.cgi?id=user_activity.html">User Changes</a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="submenu">
              <a  href="#">Plotly Reports <span class="fa fa-caret-right"></span></a>
              <div>
                <ul>
                  <li>
                      <a href="https://bugzilla.redhat.com/page.cgi?id=bug_status.html">Bug Status</a>
                  </li>
                  <li>
                      <a href="https://bugzilla.redhat.com/page.cgi?id=bug_severity.html">Bug Severity</a>
                  </li>
                  <li>
                      <a href="https://bugzilla.redhat.com/page.cgi?id=non_defaults.html">Non-Defaults</a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
      </li><li><span class="separator"> | </span><a href="page.cgi?id=productdashboard.html">Product Dashboard</a></li>
    </ul>
   </div>
  </li>

  <li class="submenu">
   <a href="#">Help <span class="fa fa-caret-down"></span></a>
   <div>
    <ul><li><a href="docs/en/html/using/understanding.html" >Page Help!</a></li>
      <li><a href="page.cgi?id=bug-writing.html">Bug Writing Guidelines</a></li> 
      <li><a href="page.cgi?id=whats-new.html">What's new</a></li>
      <li><a href="https://access.redhat.com/help/browsers">Browser Support Policy</a></li>
      <li><a href="page.cgi?id=release-notes.html">5.0.4.rh64 Release notes</a></li>
      <li><a href="page.cgi?id=faq.html">FAQ</a></li>
      <li><a href="docs/en/html/index.html">Guides index</a></li>
      <li><a href="docs/en/html/using/index.html">User guide</a></li>
      <li><a href="docs/en/html/integrating/api/Bugzilla/WebService/Bug.html">Web Services</a></li>
      <li><a href="page.cgi?id=redhat/contact.html" >Contact</a></li> 
      <li><a href="page.cgi?id=terms-conditions.html" >Legal</a></li> 
    </ul>
   </div>
  </li>



</ul>
    </div>
  </div>


  <div id="bugzilla-body">



<noscript>
      <div id="no-js-message">This site requires JavaScript to be enabled to function correctly, please enable it.</div>
</noscript>

<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=524520" title="Format For Printing"><i class="fa fa-print"></i></a></li>
    <li><a href="show_bug.cgi?ctype=xml&amp;id=524520" title="Export as XML"><i class="far fa-file-excel"></i></a></li>
    <li><a href="enter_bug.cgi?cloned_bug_id=524520" title="Clone This Bug"><i class="fa fa-clone"></i></a></li>
    <li>
      <a href="enter_bug.cgi?cloned_bug_id=524520&lite=1" title="Copy is a lite weight clone that only copies the summary &amp; description">
       <i class="far fa-clone"></i>
      </a>
    </li>


          
    <li>
      <a href="#c39" title="Last Comment">
         <i class="fas fa-arrow-down" aria-hidden="true"></i>
      </a>
    </li><li>
  <a href="buglist.cgi?bug_id=524520&amp;bug_id_type=anddependson&amp;format=tvp" title="TreeView+">
    <i class="fa fa-tree"></i>
  </a>
</li>
    </ul>
<script type="text/javascript">
<!--

//-->
</script>




<form name="changeform" id="changeform" method="post" action="process_bug.cgi">





  <input type="hidden" name="delta_ts" value="2019-09-29 12:32:27">
  <input type="hidden" name="id" value="524520">
  <input type="hidden" name="token" value="1635627301-g8sz9bkv0s5idBtlq5zeZwOp7Qk7fnVkWJMxA-_ac80">
<div class="bz_short_desc_container edit_form">
    
    

     <a href="show_bug.cgi?id=524520"><b>Bug&nbsp;524520</b></a> <span id="summary_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2009-3286</span>)
      - <span id="short_desc_nonedit_display"><a href="https://access.redhat.com/security/cve/CVE-2009-3286">CVE-2009-3286</a> kernel: O_EXCL creates on NFSv4 are broken</span>
     </span>

    
    

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

  
  
</span>CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
      <th class="field_label">
        <a href="describekeywords.cgi">Keywords</a>:
      </th>
      <td>
        <div class="keywords_select">
          <select id="keywords" name="keywords"  disabled="disabled" multiple="multiple">
              <option value="Security"
                      title="Bugs with the &quot;Security&quot; keyword are those that relate to a security vulnerability with a Red Hat product or service. For further information on how to report a security vulnerability to Red Hat please see the &quot;Security Contacts and Procedures&quot; page at http://www.redhat.com/security/team/contact/"
                      selected="selected"
              >Security
              </option>
          </select>
        </div>
      </td>
    </tr>

  <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">CLOSED
          ERRATA
      </span>
    </td>
  </tr>

<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

  
  
</th>
    <td>CVE-2009-3286
    </td>
  </tr>

<tr>

<th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

  
  
</th>
  <td class="field_value "
      id="field_container_product" >Security Response

</td>


    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

  
  
</th>
  <td class="field_value "
      id="field_container_classification" >Other

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Security Response"
  >Component:</a>

  
  
</th>
      <td>
        

            <input type="hidden" id="component" name="component" value="vulnerability">vulnerability
        
        
        <span class="show_others">
          <a href="buglist.cgi?component=vulnerability&amp;product=Security%20Response"
            title="Show other bugs for this component"><i class="fas fa-th-list"></i></a>
        
        
          <a href="enter_bug.cgi?component=vulnerability&amp;product=Security%20Response&amp;version=unspecified"
            title="Create a new bug for this component"><i class="fas fa-plus-circle"></i></a>
        
        </span>
      </td>
    </tr>
    <tr>
        <th id="bz_rh_sub_component_input_th"
            class="field_label bz_default_hidden">
          <label for="rh_sub_component">
            <a class="field_help_link" href="page.cgi?id=fields.html#rh_sub_components" title="The sub component of a specific component">Sub Component:</a>
          </label>
        </th>
        <td id="bz_rh_sub_component_input_td" class="bz_default_hidden">
          <input type="hidden" name="defined_rh_sub_component" id="defined_rh_sub_component" value="0">
          <select name="rh_sub_component" id="rh_sub_component"  disabled="disabled" onchange="assign_to_default();" >
            <option value="">---</option>
          </select>
          <script>
            $(document).ready(function () {
              init_sub_components();
            });
          </script>
        
          <span class="show_others">
            <a href="buglist.cgi?component=vulnerability&amp;product=Security%20Response" title="Show other bugs for this sub-component"><i class="fas fa-th-list"></i></a>
          
          </span>
        </td>
      </tr>

<script>
  function rh_check_sub_components () {
    var ret = '';
      var sub_comp_obj = document.getElementById('rh_sub_component');
        if ($('#defined_rh_sub_component').val() == 1 && !$("#rh_sub_component").selectize()[0].selectize.getValue()) {
          if (!ret) ret = sub_comp_obj;
          _sub_comps_errorFor(
            sub_comp_obj,
            "You must specify the sub component"
          );
      }

    return ret;
  }

  function _sub_comps_errorFor(field, error_text) {
      var new_node = document.createElement('div');
      YAHOO.util.Dom.addClass(new_node, 'validation_error_text');
      new_node.innerHTML = error_text;
      YAHOO.util.Dom.insertAfter(new_node, field);
      YAHOO.util.Dom.addClass(field, 'validation_error_field');
      new_node.scrollIntoView();
  }
</script>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

  
  
</th>
<td>
      <span id="version">unspecified
      </span></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

  
  
</th>
      <td class="field_value">All
      </td>
    </tr>
    <tr><th class="field_label "
    id="field_label_op_sys">


  <a 
      title="The operating system the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#op_sys"
  >OS:</a>

  
  
</th>
      <td class="field_value">
        Linux
      </td>
    </tr>
          
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#priority">Priority:</a></label>
      </th>
      <td>urgent
      </td>
    </tr>
    <tr>
      <th class="field_label">
        <label ><a href="page.cgi?id=fields.html#bug_severity">Severity:</a>
        </label>
      </th>
      <td>
       high
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

  
  
</th><td>
      <span id="target_milestone">---
      </span></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

  
  
</th>
      <td><span class="vcard redhat_user"><span class="fn">Red Hat Product Security</span>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

  
  
</th>
      <td><span class="vcard ">
</span>
      </td>
    </tr>
    
    <tr><th class="field_label "
    id="field_label_docs_contact">

    <label for="docs_contact" accesskey="q">

  <a 
      title="The person responsible for documenting once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#docs_contact"
  >Docs Contact:</a>
</label>
  
  
</th>
      <td><span class="vcard ">
</span>
      </td>
    </tr>
    
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'security-response-team\x40redhat.com',
        '',
        '');
    </script>
          
          
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

  
  
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

  
  
</th><td>  
  </td>
    </tr>
          

          <tr>
    <th class="field_label">
      <label>Duplicates (1)</label>:
    </th>
    <td class="field_value">
      <span id="duplicates"><a class="bz_bug_link
          
          bz_status_CLOSED  bz_closed
                              
    "
   title="CLOSED DUPLICATE - RHEL5.4 kernel (2.6.18-164.el5) breaks nfsv4 file locking"
   href="show_bug.cgi?id=523797">523797</a> 
      </span>
      (<a href="buglist.cgi?bug_id=523797">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends On:</a>

  
  
</th>

  <td>
    <span id="dependson_input_area">
    </span>
<a class="bz_bug_link
          bz_secure
    "
   title=""
   href="show_bug.cgi?id=522163">522163</a> <a class="bz_bug_link
          bz_secure
    "
   title=""
   href="show_bug.cgi?id=524521">524521</a> <a class="bz_bug_link
          bz_secure
    "
   title=""
   href="show_bug.cgi?id=537293">537293</a> <a class="bz_bug_link
          bz_secure
    "
   title=""
   href="show_bug.cgi?id=621428">621428</a> 
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

  
  
</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>

          <tr>
    <th class="field_label">TreeView+</th>
    <td>
        <a href="buglist.cgi?bug_id=524520&amp;bug_id_type=anddependson&amp;format=tvp">
        depends on</a> /
        <a href="buglist.cgi?bug_id=524520&amp;bug_id_type=andblocked&amp;format=tvp&amp;tvp_dir=blocked">
        blocked</a>
    </td>
    <td></td>
</tr>
          
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#reporter">Reported:</a>
    </th>
    <td>2009-09-21 03:02 UTC by <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#modified">Modified:</a>
    </th>
    <td>2019-09-29 12:32 UTC
      (<a href="show_activity.cgi?id=524520">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          <a href="page.cgi?id=fields.html#cclist">CC List:</a>
        </label>
      </th>
      <td>42 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="aca21">aca21</option>
                <option value="adam">adam</option>
                <option value="ajb2">ajb2</option>
                <option value="amtaylor">amtaylor</option>
                <option value="arozansk">arozansk</option>
                <option value="Bert.Deknuydt">Bert.Deknuydt</option>
                <option value="bfields">bfields</option>
                <option value="bloch">bloch</option>
                <option value="blocke">blocke</option>
                <option value="bmr">bmr</option>
                <option value="cebbert">cebbert</option>
                <option value="davej">davej</option>
                <option value="dhoward">dhoward</option>
                <option value="dijuremo">dijuremo</option>
                <option value="eparis">eparis</option>
                <option value="flakrat">flakrat</option>
                <option value="herrold">herrold</option>
                <option value="igeorgex">igeorgex</option>
                <option value="james.brown">james.brown</option>
                <option value="james.l.perrin">james.l.perrin</option>
                <option value="jburke">jburke</option>
                <option value="jlayton">jlayton</option>
                <option value="joshua.bakerlepain">joshua.bakerlepain</option>
                <option value="jpirko">jpirko</option>
                <option value="jwest">jwest</option>
                <option value="kaneva">kaneva</option>
                <option value="kmcmartin">kmcmartin</option>
                <option value="lampe">lampe</option>
                <option value="luc_daels">luc_daels</option>
                <option value="lwang">lwang</option>
                <option value="mmcgrath">mmcgrath</option>
                <option value="prgarcial">prgarcial</option>
                <option value="rik.theys">rik.theys</option>
                <option value="rjm002">rjm002</option>
                <option value="robh">robh</option>
                <option value="rudd-o">rudd-o</option>
                <option value="rwheeler">rwheeler</option>
                <option value="spanjikk">spanjikk</option>
                <option value="steved">steved</option>
                <option value="tao">tao</option>
                <option value="tru">tru</option>
                <option value="waananen">waananen</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>


 
<tr>
      <th class="field_label "
    id="field_label_cf_fixed_in">


  <a 
      title="The full package version. PGM uses to check if brew ..."
  >Fixed In Version:</a>

  
  
</th>
  <td class="field_value "
      id="field_container_cf_fixed_in"  colspan="2">

</td>
    </tr>
    
    

    <tr>
      <th class="field_label "
    id="field_label_cf_doc_type">


  <a 
      title="Click the information icon to the right to see the description"
  >Doc Type:</a>

  
  <i class="fas fa-info-circle pop-text" onclick="alertify.alert('Doc Type', BB_FIELDS['cf_doc_type'].long_desc)" title="Click to see full description"></i>

  
</th>
  <td class="field_value "
      id="field_container_cf_doc_type"  colspan="2">Bug Fix

<span id="cf_doc_warn"></span></td>
    </tr>
    
    

    <tr>
      <th class="field_label "
    id="field_label_cf_release_notes">


  <a 
      title="Click the information icon to the right to see the description"
  >Doc Text:</a>

  
  <i class="fas fa-info-circle pop-text" onclick="alertify.alert('Doc Text', BB_FIELDS['cf_release_notes'].long_desc)" title="Click to see full description"></i>

  
</th>
  <td class="field_value "
      id="field_container_cf_release_notes"  colspan="2">
      <div class="uneditable_textarea"></div>

</td>
    </tr>
    
    

    
    

    <tr>
      <th class="field_label "
    id="field_label_cf_clone_of">


  <a 
      title="The bug listed here was the bug cloned to create thi..."
  >Clone Of:</a>

  
  
</th>
  <td class="field_value "
      id="field_container_cf_clone_of"  colspan="2">

</td>
    </tr>
    
    

    <tr>
      <th class="field_label "
    id="field_label_cf_environment">


  <a 
      title="This field is used for unformatted text that helps t..."
  >Environment:</a>

  
  
</th>
  <td class="field_value "
      id="field_container_cf_environment"  colspan="2">
      <div class="uneditable_textarea"></div>

</td>
    </tr>
    
    

    <tr>
      <th class="field_label "
    id="field_label_cf_last_closed">


  <a 
      title="When this bug was last marked as closed. Used for st..."
  >Last Closed:</a>

  
  
</th>
  <td class="field_value "
      id="field_container_cf_last_closed"  colspan="2">2010-12-21 17:03:48 UTC
    

</td>
    </tr>




        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    
    <th align="left">
      Attachments
    </th>
    <th colspan="2" align="right">
      <a href="page.cgi?id=terms-conditions.html">(Terms of Use)</a>
    </th>
    
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch">
        <td>
            <a href="attachment.cgi?id=361856"
               title="View the content of the attachment">
          <b>Proposed patch</b></a>

          <span class="bz_attach_extra_info">
              (7.58 KB,
                patch)

            <br>
            <a href="#attach_361856"
               title="Go to the comment associated with the attachment">2009-09-21 03:12 UTC</a>,

            <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=361856&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=361856&amp;action=diff">Diff</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=524520&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=524520&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>

    

    <script>
  YAHOO.ExternalBugs.sUrlYUI = 'https://bugzilla.redhat.com/jsonrpc.cgi';
  YAHOO.ExternalBugs.sUrlRPC = 'https://bugzilla.redhat.com/xmlrpc.cgi';
  YAHOO.ExternalBugs.extRefreshList = [];
function _extbz_errorFor(field, error_text) {
    var new_node = document.createElement('div');
    YAHOO.util.Dom.addClass(new_node, 'validation_error_text');
    new_node.innerHTML = error_text;
    YAHOO.util.Dom.insertAfter(new_node, field);
    YAHOO.util.Dom.addClass(field, 'validation_error_field');
    return new_node;
}

function check_external_bugs (f) {
    var focus_me;
    var external_bugs = YAHOO.util.Dom.getElementsByClassName(
        'external_bug_id', null, f);
    for (var i = 0; i < external_bugs.length; i++) {
        var bug_id_key   = external_bugs[i].name;
        var bug_type_key = 'external_' + bug_id_key.substr(13);
        if($('#' + bug_id_key).length > 0) {
            var bug_id       = document.getElementById(bug_id_key).value;
            var bug_type     = document.getElementById(bug_type_key).value;
            if ((bug_type == '' || bug_type == '0') && bug_id != '') {
                focus_me = _extbz_errorFor(
                    document.getElementById(bug_type_key),
                    'You specified the external tracker id, but not the type'
                );
            }
            else if (bug_type != '' && bug_type != '0' && bug_id == '') {
                focus_me = _extbz_errorFor(
                    external_bugs[i],
                    'You specified the external tracker type, but not the id'
                );
            }
            else if (bug_type != '' && bug_id != '') {
            }
        }
    }

    return focus_me;
}

var bz_no_validate_enter_bug = false;
function validateChangeBug(changeform) {
    // This is for the "bookmarkable templates" button.
    if (bz_no_validate_enter_bug) {
        // Set it back to false for people who hit the "back" button
        bz_no_validate_enter_bug = false;
        return true;
    }

    var current_errors = YAHOO.util.Dom.getElementsByClassName(
        'validation_error_text', null, changeform);
    for (var i = 0; i < current_errors.length; i++) {
        current_errors[i].parentNode.removeChild(current_errors[i]);
    }
    var current_error_fields = YAHOO.util.Dom.getElementsByClassName(
        'validation_error_field', null, changeform);
    for (var i = 0; i < current_error_fields.length; i++) {
        var field = current_error_fields[i];
        YAHOO.util.Dom.removeClass(field, 'validation_error_field');
    }

    var focus_me;

    // REDHAT EXTENSION 1000743
    focus_me = check_external_bugs(changeform);

    if (focus_me) {
        focus_me.scrollIntoView(false);
        return false;
    }

    return true;
}

changeform.onsubmit = function() { return validateChangeBug(changeform)};
</script>

<br>
<table id="external_bugs_table" cellspacing="0" cellpadding="4">
  <caption name="et0" id="et0">Links</caption>
    <tr>
      <th>System</th>
      <th>ID</th>
      <th>Private</th>
      <th>Priority</th>
      <th>Status</th>
      <th>Summary</th>
      <th>Last Updated</th>
    </tr>

    
    <tr id="ext_row_683194" >
      <td>Red Hat Product Errata
      </td>
      <td>
        <a href="https://access.redhat.com/errata/RHSA-2009:1548">RHSA-2009:1548</a>
      </td>
      <td>
        <span id="ext_is_private_683194">0
        </span>
      </td>
      <td>
        <span id="ext_priority_683194">normal
        </span>
      </td>
      <td>
        <span id="ext_status_683194">SHIPPED_LIVE
        </span>
      </td>
      <td>
        <span id="ext_description_683194"
              title="Important: kernel security and bug fix update">Important: kernel security and bug fix update
        </span>
      </td>
      <td>
        <span id="ext_last_updated_683194">2009-11-03 19:33:33 UTC
        </span>
      </td>
    </tr>

</table>

<br>
    

  </td>

  <td class="groups">
  </td>
  </tr></table>

  
  <div id="comments"><script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>






<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment
            "
    >

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-21 03:02:27 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Description of problem:
   Description From  Eric Paris (<a href="mailto:eparis&#64;redhat.com">eparis&#64;redhat.com</a>)  2009-09-09 12:02:22 EDT   (-) [reply] [edit]     Private

nfs-utils-1.0.9-42.el5
kernel-2.6.18-164.el5
nfs-utils-lib-1.0.8-7.6.el5

Install RHEL 5.4
Create a directory /export
chown user:user /export
clone a git tree into /export (as user)

Put an entry in /etc/exports like:
/export  *(rw,all_squash,fsid=0,anonuid=500,anongid=500,nohide)

mount the export at /import like so:
mount -t nfs4 -o rw,noatime,nodiratime 127.0.0.1:/ /import

Run a git command in /import
cd /import; git status

Watch the command fail.  Files created by git have very odd metadata.  I
managed to get files that looked like:

----------. 1 paris paris 0 1970-05-27 18:50 .git/index.lock
or like
-r-s-wxr-- 1 paris paris 0 Jan 18  2038 .git/objects/tmp_obj_JVIlCu

Obviously the metadata is totally screwed up....

If i add 'nohide' to the export everything seems to be working correctly. 
Something should be done to keep me from getting into this 'broken'
situation...  

<a href="show_bug.cgi?id=524520#c1">Comment #1</a> From  Eric Paris (<a href="mailto:eparis&#64;redhat.com">eparis&#64;redhat.com</a>)  2009-09-09 12:54:16 EDT   (-) [reply] [edit] -------      Private

Actually it looks like nohide only fixed the problem when I mounted from
another machine.  When I actually mount 127.0.0.1 using NFSv4 even the nohide
doesn't seem to fix the problem..... 

<a href="show_bug.cgi?id=524520#c2">Comment #2</a> From  dijuremo (<a href="mailto:dijuremo&#64;gatech.edu">dijuremo&#64;gatech.edu</a>)  2009-09-11 12:08:12 EDT   (-) [reply] [edit] -------      Private

I can confirm this same problem, I originally found the issue on my file
servers serving nfs and samba along with drbd after updating to 5.4. It all
seems related to the kernel 2.6.18-164.el5. Having all the rpms from 5.4 and
using the older kernel 2.6.18-128.7.1.el5 fixed the problem, so this is most
likely a kernel issue.

I actually kickstarted a new machine, configured it as an nfs server and was
able to reproduce the problem.

I think the priority and severity of this request should be elevated to HIGH!!!

On the server:

[root&#64;phys-ha01 ~]# cat /etc/exports
/              
phys41012.physics.gatech.edu(fsid=0,rw,sync,no_root_squash,nohide)
/web            phys41012.physics.gatech.edu(rw,sync,no_root_squash,nohide)
/tmp            phys41012.physics.gatech.edu(rw,sync,no_root_squash,nohide)
/tmp/test       phys41012.physics.gatech.edu(rw,sync,no_root_squash,nohide)
/              
phys-ha01.physics.gatech.edu(fsid=0,rw,sync,no_root_squash,nohide)
/web            phys-ha01.physics.gatech.edu(rw,sync,no_root_squash,nohide)
/tmp            phys-ha01.physics.gatech.edu(rw,sync,no_root_squash,nohide)
/tmp/test       phys-ha01.physics.gatech.edu(rw,sync,no_root_squash,nohide)

On the client:
[root&#64;phys41012 ~]# mount -t nfs4 -v -o
rw,nosuid,rsize=32768,wsize=32768,hard,intr
phys-ha01.physics.gatech.edu:/tmp/test /tmp/non-drbd/
[dr126&#64;phys41012 tmp]$ cd /tmp/non-drbd/
[dr126&#64;phys41012 non-drbd]$ mount | grep drbd
phys-ha01.physics.gatech.edu:/tmp/test on /tmp/non-drbd type nfs4
(rw,nosuid,rsize=32768,wsize=
[dr126&#64;phys41012 non-drbd]$ ls -la
total 24
drwxr-xr-x  3 root  root 4096 Sep 11 11:30 .
drwxrwxrwt 28 root  root 4096 Sep 11 11:30 ..
drwx------  2 dr126 root 4096 Sep 11 11:38 dr126
[dr126&#64;phys41012 non-drbd]$ cd dr126/
[dr126&#64;phys41012 dr126]$ ls -la
total 16
drwx------ 2 dr126 root   4096 Sep 11 11:38 .
drwxr-xr-x 3 root  root   4096 Sep 11 11:30 ..
-rw------- 1 dr126 nobody    0 Sep 11 11:38 test
---------- 1 dr126 nobody    0 Mar 18  1973 .test2.swo
--wSrwSrwT 1 dr126 nobody    0 Mar 18  1973 .test2.swp
---------- 1 dr126 nobody    0 Mar 18  1973 .test.swo
--wSrwS-wt 1 dr126 nobody    0 Mar 18  1973 .test.swp
[dr126&#64;phys41012 dr126]$ rm -rf test .test*
[dr126&#64;phys41012 dr126]$ touch testfile
[dr126&#64;phys41012 dr126]$ ls -la testfile
-rw------- 1 dr126 nobody 0 Sep 11 11:43 testfile
[dr126&#64;phys41012 dr126]$ vi test
[dr126&#64;phys41012 dr126]$ ls -la
total 16
drwx------ 2 dr126 root   4096 Sep 11 11:43 .
drwxr-xr-x 3 root  root   4096 Sep 11 11:30 ..
-rw------- 1 dr126 nobody    0 Sep 11 11:43 testfile
---------- 1 dr126 nobody    0 Mar 22  1973 .test.swo
---------- 1 dr126 nobody    0 Mar 22  1973 .test.swp  

<a href="show_bug.cgi?id=524520#c3">Comment #3</a> From  dijuremo (<a href="mailto:dijuremo&#64;gatech.edu">dijuremo&#64;gatech.edu</a>)  2009-09-11 13:53:44 EDT   (-) [reply] [edit] -------      Private

Not sure whether or not this helps, but if you are writing as root from the
nfs4 client, then the writes work correctly. If you are writing as a non-root
user then the problem manifests.

[root&#64;phys41012 dr126]# cd /
[root&#64;phys41012 /]# cd /tmp/non-drbd/dr126/
[root&#64;phys41012 dr126]# mount | grep non-drbd
phys-ha01.physics.gatech.edu:/tmp/test on /tmp/non-drbd type nfs4
(rw,nosuid,rsize=32768,wsize=32768,hard,intr,addr=130.207.139.16)
[root&#64;phys41012 dr126]# vi test-root
[root&#64;phys41012 dr126]# ls -l
total 4
-rw-r--r-- 1 root root 23 Sep 11 13:49 test-root
[root&#64;phys41012 dr126]# cat test-root
This is a test by root

Now a regular user with the echo command (this works)

[root&#64;phys41012 dr126]# su dr126
id: cannot find name for group ID 2626
[dr126&#64;phys41012 dr126]$ echo &quot;This is a test by a user&quot; &gt; test-dr126
[dr126&#64;phys41012 dr126]$ ls -la
total 24
drwx------ 2 dr126 root   4096 Sep 11 13:50 .
drwxr-xr-x 4 root  root   4096 Sep 11 11:54 ..
-rw------- 1 dr126 nobody   25 Sep 11 13:50 test-dr126
-rw-r--r-- 1 root  root     23 Sep 11 13:49 test-root

Now a regular user with vi (I assume the way vi handles the open and writing of
the files is different to the way echo does it, that may also give you more
clues as to how to identify the problem).

[dr126&#64;phys41012 dr126]$ vi test-dr126-using-vi

At this point vi warns of an already existing swap file, I abort and:

[dr126&#64;phys41012 dr126]$ ls -la
total 24
drwx------ 2 dr126 root   4096 Sep 11 13:51 .
drwxr-xr-x 4 root  root   4096 Sep 11 11:54 ..
-rw------- 1 dr126 nobody   25 Sep 11 13:50 test-dr126
---------- 1 dr126 nobody    0 Jun 19  1973 .test-dr126-using-vi.swo
---------- 1 dr126 nobody    0 Jun 19  1973 .test-dr126-using-vi.swp
-rw-r--r-- 1 root  root     23 Sep 11 13:49 test-root

Here are the files with the wrong timestamps.  

<a href="show_bug.cgi?id=524520#c4">Comment #4</a> From  Anders Wäänänen (<a href="mailto:waananen&#64;nbi.dk">waananen&#64;nbi.dk</a>)  2009-09-13 17:04:37 EDT   (-) [reply] [edit] -------      Private

I can also confirm this. I do believe that the problem is related to O_EXCL
flag to open(2). Try to run mktemp (user of open(2) with O_EXCL) and try to
generate a temporary file on the filesystem. It seems that creating files
without
O_EXCL is ok.

Anders  

<a href="show_bug.cgi?id=524520#c5">Comment #5</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-14 09:45:44 EDT   (-) [reply] [edit] -------      Private

Going ahead and marking this a regression based on <a href="show_bug.cgi?id=524520#c2">comment #2</a>  

<a href="show_bug.cgi?id=524520#c6">Comment #6</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-14 11:57:12 EDT   (-) [reply] [edit] -------      Private

I've narrowed it down as far as do_open_permission returning error. We had some
changes in that area in 5.4 (<a class="bz_bug_link
          bz_secure
    "
   title=""
   href="show_bug.cgi?id=502244">bug 502244</a>) that may be at fault. Still trying to
narrow down the exact problem at this point and how upstream kernels behave.  

<a href="show_bug.cgi?id=524520#c7">Comment #7</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-14 13:10:57 EDT   (-) [reply] [edit] -------      Private

Here are the results of some of the creates:

---------- 1 testuser testuser         0 Aug 23  1981 testfile_aj6852
---------- 1 testuser testuser         0 Oct  6  1981 testfile_Am8373
---------- 1 testuser testuser         0 Sep 10  1981 testfile_Bf7622
---S-wS--x 1 testuser testuser         0 Sep  2  1981 testfile_ee7185
---------- 1 testuser testuser         0 Sep 10  1981 testfile_ej7627
-rw------- 1 testuser testuser         0 Sep 15 21:42 testfile_EV7164
---------- 1 testuser testuser         0 Sep 16  1981 testfile_hL8008
-rw------- 1 testuser testuser         0 Sep 15 21:55 testfile_Lp7607
---------- 1 testuser testuser         0 Oct  6  1981 testfile_mb8365
---------- 1 testuser testuser         0 Feb 22  1982 testfile_qy9525
--wSrw-r-x 1 testuser testuser         0 Aug 17  1981 testfile_Tt6325
---Sr---w- 1 testuser testuser         0 Aug  2  1981 testfile_Ub6178
---s-wxr-- 1 testuser testuser         0 Aug  4  1981 testfile_vd6236
---------- 1 testuser testuser         0 Jul 31  1981 testfile_VW6132

With an exclusive create, we the file should be getting created with some sort
of sane &quot;default&quot; permissions, and the verifier gets stored in the atime and
mtime fields of the inode. The client is then supposed to go back and reset
those values with a SETATTR call if the create was successful.

What's happening here is that the inital create is occurring, but then the
permission check for the open fails. This short-circuits the rest of the
process, causes the open to return an error and leaves the inode in this funky
state. That also explains why we don't see this problem with root...the
permission check is always passing there (provided we're not root squashing).

The modes are a little disturbing too actually. I believe nfsd is generally
passing an uninitialized value for the mode to the vfs_create call. In some
cases, the mode just happens to end up allowing the permission check to pass.
Those are shown by testfile_Lp7607 and testfile_EV7164 in the above list.

If this hypothesis is correct there are 2 possibilties for fixing it:

1) ensure that the create mode is set in such a way that the subsequent
permission check succeeds

2) always allow the permission check to succeed in this case

It's not clear to me whether and how this was fixed upstream, so I may need to
do some similar investigation there.  

<a href="show_bug.cgi?id=524520#c8">Comment #8</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-14 13:12:12 EDT   (-) [reply] [edit] -------      Private

So to be clear...while this is technically a regression from 5.3, I think the
patch that went into 5.4 is actually correct and just ended up exposing another
bug in this code.  

<a href="show_bug.cgi?id=524520#c9">Comment #9</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-14 15:34:43 EDT   (-) [reply] [edit] -------      Private

Ok, I see part of the problem...

In the nfsd4_open struct, the verifier and the iattrs are a union. For
exclusive creates, the verifier field is intended to be used. For other
creates, the iattr piece may be used.

The bogus modes come about because we're setting the verifier, and then later
dereferencing the iattr part of that union. This gives us crazy ia_valid values
and possibly modes as well...

This seems to have been inadvertantly fixed upstream as part of the NFSv4.1
code merge with commit 79fb54abd285b442e1f30f851902f3ddf58e7704. That patch
separated the union into 2 fields for other reasons, but probably fixed this as
well.

That should fix the bogus modes by making it so that the mode is set to S_IFREG
on create. That will probably not completely fix the problem though...it will
probably still fail the following permission check, but that should at least
make things consistent.  

<a href="show_bug.cgi?id=524520#c11">Comment #11</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-15 09:13:10 EDT   (-) [reply] [edit] -------      Private

Created an attachment (id=361079) [details]
patchset #2

This set of patches should be a complete fix. It includes the patch that I
posted yesterday, plus two other patches. One is a cosmetic patch to clean up
the indentation in do_open_lookup, and the other makes the permissions check
conditional on whether the file was actually created.

All 3 patches are backports from upstream, and fix the reproducer I have for
this. Working on building a test kernel now that I'll have up on my people page
later today.  

<a href="show_bug.cgi?id=524520#c12">Comment #12</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-15 15:49:46 EDT   (-) [reply] [edit] -------      Private

I've added these patches to my test kernels here:

    <a href="http://people.redhat.com/jlayton/">http://people.redhat.com/jlayton/</a>

...could those who have reported seeing these issues test them and report
whether they fix the problems for you too?  

<a href="show_bug.cgi?id=524520#c17">Comment #17</a> From  dijuremo (<a href="mailto:dijuremo&#64;gatech.edu">dijuremo&#64;gatech.edu</a>)  2009-09-16 09:52:25 EDT   (-) [reply] [edit] -------      Private

Yep, the patches fixe the problem.

Server
[root&#64;phys-ha01 ~]# uname -a
Linux phys-ha01.physics.gatech.edu 2.6.18-165.el5.jtltest.87 #1 SMP Tue Sep 15
09:37:44 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux


Client still using the broken kernel (which means the problem was only server
side).
[dr126&#64;phys41012 dr126]$ uname -a
Linux phys41012.physics.gatech.edu 2.6.18-164.el5 #1 SMP Tue Aug 18 15:51:48
EDT 2009 x86_64 x86_64 x86_64 GNU/Linux
[dr126&#64;phys41012 ~]$ cd /tmp/drbd/
[dr126&#64;phys41012 drbd]$ mount | grep drbd
phys-ha01.physics.gatech.edu:/web on /tmp/drbd type nfs4
(rw,nosuid,rsize=32768,wsize=32768,hard,intr,addr=130.207.139.16)
[dr126&#64;phys41012 drbd]$ ls -la
total 48
drwxr-xr-x  4 root  root  4096 Sep 16 08:58 .
drwxrwxrwt 25 root  root  4096 Sep 16 09:46 ..
-rw-------  1 root  root  6144 Sep 11 15:10 aquota.group
-rw-------  1 root  root  7168 Sep 16 08:41 aquota.user
drwx------  2 dr126 root  4096 Sep 16 08:59 dr126
drwx------  2 root  root 16384 Sep 10 15:16 lost+found
[dr126&#64;phys41012 drbd]$ cd dr126/
[dr126&#64;phys41012 dr126]$ ls -la
total 8
drwx------ 2 dr126 root 4096 Sep 16 08:59 .
drwxr-xr-x 4 root  root 4096 Sep 16 08:58 ..
[dr126&#64;phys41012 dr126]$ touch test
[dr126&#64;phys41012 dr126]$ ls -la test
-rw------- 1 dr126 nobody 0 Sep 16  2009 test
[dr126&#64;phys41012 dr126]$ vi test2
[dr126&#64;phys41012 dr126]$ ls -la
total 12
drwx------ 2 dr126 root   4096 Sep 16  2009 .
drwxr-xr-x 4 root  root   4096 Sep 16 08:58 ..
-rw------- 1 dr126 nobody    0 Sep 16 09:48 test
-rw------- 1 dr126 nobody   20 Sep 16  2009 test2
[dr126&#64;phys41012 dr126]$ cat test2
This is a test file

Thanks for the fix, when do you think this patch will be released to
production?  

<a href="show_bug.cgi?id=524520#c18">Comment #18</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-17 07:36:44 EDT   (-) [reply] [edit] -------      Private

Thanks for testing it.

It's currently on the proposed list for RHEL5.5.  

<a href="show_bug.cgi?id=524520#c19">Comment #19</a> From  dijuremo (<a href="mailto:dijuremo&#64;gatech.edu">dijuremo&#64;gatech.edu</a>)  2009-09-17 07:47:04 EDT   (-) [reply] [edit] -------      Private

This does not make any sense, RHEL5.5 is months away, and this is a major flaw
that will prevent anybody from using the kernel in 5.4 as an nfs server.  Are
you not planning to release an updated kernel for 5.4 with the nfs fixes before
5.5?  

<a href="show_bug.cgi?id=524520#c21">Comment #21</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-17 08:04:14 EDT   (-) [reply] [edit] -------      Private

(In reply to <a href="show_bug.cgi?id=524520#c19">comment #19</a>)
<span class="quote">&gt; This does not make any sense, RHEL5.5 is months away, and this is a major flaw
&gt; that will prevent anybody from using the kernel in 5.4 as an nfs server.  Are
&gt; you not planning to release an updated kernel for 5.4 with the nfs fixes before
&gt; 5.5?  </span >

I'm not opposed to seeing this fix ship sooner, but in order for that to happen
someone will need to open a support case and request a more immediate fix. If
you do so, please be sure to reference this BZ so that the support folks know
that this is a known problem and that there is a patch that seems to fix it.  

<a href="show_bug.cgi?id=524520#c22">Comment #22</a> From  Jim Perrin (<a href="mailto:james.l.perrin&#64;us.army.mil">james.l.perrin&#64;us.army.mil</a>)  2009-09-17 13:35:59 EDT   (-) [reply] [edit] -------      Private

Global support services ticket filed. #1953510

I'd very much like to see this fix pushed sooner than 5.5  

<a href="show_bug.cgi?id=524520#c23">Comment #23</a> From  Bruce A. Locke (<a href="mailto:blocke&#64;newpaltz.edu">blocke&#64;newpaltz.edu</a>)  2009-09-17 13:38:41 EDT   (-) [reply] [edit] -------      Private

I'm afraid I can't open a direct support case as we're using academic licensing
and I'd rather chew off my arm then deal with our hardware vendor's support
team.

What I can say is that I saw a related issue on our systems and the test kernel
above fixes our issue.

We didn't notice the randomized permissions.  In our case many calls in java to
java.io.UnixFileSystem.createFileExclusively failed and rolling the kernel back
or using your test kernel fixes the issue.

In your example it shows a major security issue with DAC permissions being
randomized with a good chance of a file being uploaded through a webapp being
granted SUID and execute.  That isn't enough of a reason?

Thanks for all your efforts so far.  

<a href="show_bug.cgi?id=524520#c24">Comment #24</a> From  Rob Marti (<a href="mailto:rjm002&#64;shsu.edu">rjm002&#64;shsu.edu</a>)  2009-09-17 13:40:24 EDT   (-) [reply] [edit] -------      Private

Global support services ticket filed. #1953526

I'd very much like to see this fix pushed sooner than 5.5 as well  

<a href="show_bug.cgi?id=524520#c25">Comment #25</a> From  Tru Huynh (<a href="mailto:tru&#64;pasteur.fr">tru&#64;pasteur.fr</a>)  2009-09-17 15:43:46 EDT   (-) [reply] [edit] -------      Private

#1953582 added  

<a href="show_bug.cgi?id=524520#c26">Comment #26</a> From  Levente Farkas (<a href="mailto:lfarkas&#64;lfarkas.org">lfarkas&#64;lfarkas.org</a>)  2009-09-18 06:05:05 EDT   (-) [reply] [edit] -------      Private

are you kidding?
that you only plan to fix this only in 5.5? rhn support said they can't do
anything:-(
imho it's a serious regression so you should have to push a new update. the fix
is already found. imho rh has two choice:
- push a new update kernel update for 5.3 which contains all security fix which
is already in 5.4's kernel or
- push an updated kernel for 5.4 which fix nfs bug asap.  

<a href="show_bug.cgi?id=524520#c27">Comment #27</a> From  Jeff Layton (<a href="mailto:jlayton&#64;redhat.com">jlayton&#64;redhat.com</a>)  2009-09-18 06:21:55 EDT   (-) [reply] [edit] -------      Private

It looks like several people are being affected by this bug. I'm going to see
what can be done to get it fixed sooner than 5.5. Stay tuned...  

<a href="show_bug.cgi?id=524520#c30">Comment #30</a> From  dijuremo (<a href="mailto:dijuremo&#64;gatech.edu">dijuremo&#64;gatech.edu</a>)  2009-09-18 07:35:00 EDT   (-) [reply] [edit] -------      Private

(In reply to <a href="show_bug.cgi?id=524520#c27">comment #27</a>)
<span class="quote">&gt; It looks like several people are being affected by this bug. I'm going to see
&gt; what can be done to get it fixed sooner than 5.5. Stay tuned...  </span >

Isn't it obvious that anybody running nfs4 on RHEL 5.4 will have this problem?
I guess that 5.4 being so new, it has not yet made it into big commercial
installations as they seem to hold off updating, but this is just such a
critical problem with a very commonly used service that as soon as the big
companies start deploying 5.4 they are going to find themselves in a huge mess
with all their nfs servers broken if this is not fixed. I guess at least we can
run with your patched kernel -165, but that one is not really &quot;official&quot;.

I have asked my campus fellows with support contracts to open tickets, add
1953460 and 1953404 to the list.  

<a href="show_bug.cgi?id=524520#c31">Comment #31</a> From  Levente Farkas (<a href="mailto:lfarkas&#64;lfarkas.org">lfarkas&#64;lfarkas.org</a>)  2009-09-18 08:37:24 EDT   (-) [reply] [edit] -------      Private

i add 1953458 to the list.

</pre>
    </div>

    <div id="c2" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-21 03:12:39 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=361856&amp;action=diff" name="attach_361856" title="Proposed patch">attachment 361856</a> <a href="attachment.cgi?id=361856&amp;action=edit" title="Proposed patch">[details]</a></span>
Proposed patch

</pre>
    </div>

    <div id="c4" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Levente Farkas</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-23 09:37:10 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">can we get a testing src.rpm?
is the attached patch the final patch?
thanks

</pre>
    </div>

    <div id="c5" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Andrew C Aitchison</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-29 16:41:11 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Every release of RHEL 5 seesm to include a new serious NFS kernel bug and very few NFS bugs are fixed between releases. Would I be right to assume that no one who pays for RHEL uses NFS seriously, or perhaps that no one who uses NFS seriously buys RHEL ?

</pre>
    </div>

    <div id="c6" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Jim Perrin</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-29 18:49:05 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">The response to my paid support ticket said that the fix was planned for release the first week of November. I'm not entirely sure why it has to be another month from now before we see a fix for this. Any other paid support tickets see movement, similar or otherwise?

</pre>
    </div>

    <div id="c7" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">dijuremo</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-29 18:59:32 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">After getting the notification about the patch having to wait until november, we have requested a &quot;hotfix&quot;. However, we have not heard back in almost a week. 

Even with paid support this is getting ridiculous, such a critical issue not being addressed faster even when the appropriate fix is already known...

23-SEP-2009 16:17:50 	**RH Support**
I've requested the hotfix for you and will try to find out an ETA on when it could be fulfilled.

Regards,
**RH Support**

23-SEP-2009 15:09:57 	**Our Support Requestor**
I would like to request a hotfix. This issue is breaking our nfs servers, and another 7 weeks seems an awfully long time to wait for a critical patch. When can I tell my users to expect the hotfix kernel?

</pre>
    </div>

    <div id="c8" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Rob Marti</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-29 19:20:36 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">I've gotten the exact same response - first week of November.  Its been updated every 4 days, so I guess I'm due for an update today. :)  Seriously though - a workaround/hotfix or kernel needs to be released sooner than that.

</pre>
    </div>

    <div id="c9" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Arkady Kanevsky</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 14:27:36 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Jeff,
I would like to get a patch ASUP.
And also I would like to add my voice for hotfix.
Arkady

</pre>
    </div>

    <div id="c10" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard redhat_user"><span class="fn">Jeff Layton</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 14:46:21 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Hotfixes are generally handled by our support organization. If you need a hotfix in the interim before this is released, then please file a support ticket and request one.

</pre>
    </div>

    <div id="c11" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Bruce A. Locke</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 17:20:43 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">So is it common for Red Hat to sit on a completely broken protocol with nasty security issues for three months?  November?  Seriously?

</pre>
    </div>

    <div id="c12" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Jim Perrin</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 17:49:39 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">I'm actually a little shocked by this one, since other fixes involving regression issues have been patched much sooner. 

RH also just released another kernel the other day for a KVM issue, so it's not like they appear to be holding off for consolidation here. 

Folks in this bug are actively vocal and generally appear to be paying customers given the quantity of support ticket numbers listed, so what's going on? 

Could someone from RH explain what the delay is about? If there's a legitimate explanation then it should clear up some of the hostility floating around in this bug. 

I'm not asking for a complete disclosure of practices, but a small peak behind the curtain would certainly go a long way to ease some of the tension here.

</pre>
    </div>

    <div id="c13" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Ric Wheeler</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 18:11:41 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">As Jeff said in <a class="bz_bug_link
          
          bz_status_CLOSED  bz_closed
                              
    "
   title="CLOSED ERRATA - CVE-2009-3286 kernel: O_EXCL creates on NFSv4 are broken"
   href="show_bug.cgi?id=524520#c10">https://bugzilla.redhat.com/show_bug.cgi?id=524520#c10</a>, please open a specific ticket with Red Hat support if you want/need a hotfix before we do another minor release.

</pre>
    </div>

    <div id="c14" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Jim Perrin</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 18:40:17 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">I have. Mine is the original paid support ticket listed in the post at the top. (original <a href="show_bug.cgi?id=524520#c22">comment #22</a>)

via paid support I was told November. I asked there why it was taking so long and was offered the hotfix early. That's great, but doesn't help other folks. I'm simply asking here why it's taking so long. 

Would you like me to open a separate paid support ticket to ask why it taking 3 months and lots of pushing to get this fixed?

All I'm asking for is an explanation for the delay. I don't think that's asking for anything overly unreasonable. As I said before, if there's a good reason it should allay the hostility that appears to be in this BZ entry.

</pre>
    </div>

    <div id="c15" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">dijuremo</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 18:45:53 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">We have also requested a hot fix via paid support and have not heard anything since Sep 23 as shown in our previous posting:

23-SEP-2009 16:17:50  **RH Support**
I've requested the hotfix for you and will try to find out an ETA on when it
could be fulfilled.

Regards,
**RH Support**

</pre>
    </div>

    <div id="c16" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Levente Farkas</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-01 18:48:04 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">many of us already open a ticket. and we just waiting. in most other case rh can release a kernel update in a much faster way, but as most of us don't understand how can it happened that such a basic service bug not fixed for months?

</pre>
    </div>

    <div id="c19" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">dijuremo</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-02 12:12:34 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">The following hotfix packages have been made available to us via our support
ticket:

kernel-2.6.18-164.3.1.el5.x86_64.rpm
kernel-2.6.18-164.3.1.el5.i686.rpm

If you have a support contract I assume you can get those as well until
everyone gets the patched kernel in the first week of November.

</pre>
    </div>

    <div id="c20" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Jim Perrin</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-02 22:01:34 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Via paid support, the word I got on the delay was that they were going to release a roll-up kernel to fix this and several other issues, and that they try to do this monthly. This bug missed the cycle for the last monthly update.


This to me is a workable explanation that is a middle ground between inundating folks with new kernels and not releasing updates at all. Given that the hotfix is available for those who request it, I'm satisfied with this explanation. 

No idea why this couldn't have been explained here in the BZ though.

</pre>
    </div>

    <div id="c21" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard redhat_user"><span class="fn">Jeff Layton</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-08 18:34:12 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">*** <a class="bz_bug_link
          
          bz_status_CLOSED  bz_closed
                              
    "
   title="CLOSED DUPLICATE - RHEL5.4 kernel (2.6.18-164.el5) breaks nfsv4 file locking"
   href="show_bug.cgi?id=523797">Bug 523797</a> has been marked as a duplicate of this bug. ***

</pre>
    </div>

    <div id="c23" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-13 01:34:28 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=524520#c20">comment #20</a>)
<span class="quote">&gt; Via paid support, the word I got on the delay was that they were going to
&gt; release a roll-up kernel to fix this and several other issues, and that they
&gt; try to do this monthly. This bug missed the cycle for the last monthly update.
&gt; 
&gt; 
&gt; This to me is a workable explanation that is a middle ground between inundating
&gt; folks with new kernels and not releasing updates at all. Given that the hotfix
&gt; is available for those who request it, I'm satisfied with this explanation. 
&gt; 
&gt; No idea why this couldn't have been explained here in the BZ though.  </span >

Jim, this bug was reported to us during the QE phase in the last kernel update, so we can only fix it in the next update. I could have explained this in the bug in response to c#5, but I was already on vacation then. Sorry about it. As mentioned in c#19, hotfixes are available, kindly contact Red Hat Support for them. Thanks.

</pre>
    </div>

    <div id="c24" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Levente Farkas</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-14 08:50:08 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">can we know the the hotfix mentioned in #13 and the coming kernel update in november will contain the same patch as attached in #2?
thanks.

</pre>
    </div>

    <div id="c25" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-14 09:02:57 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=524520#c24">comment #24</a>)
<span class="quote">&gt; can we know the the hotfix mentioned in #13 and the coming kernel update in
&gt; november will contain the same patch as attached in #2?
&gt; thanks.  </span >

Yes, of course.

</pre>
    </div>

    <div id="c28" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Mike Hanby</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-10-27 17:49:39 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">I'd like to add that I experienced the metadata issues on my 5.4 NFSv4 server (5.4 clients as well). In addition I also got a lot of reports from users where applications couldn't establish a file lock (/home is NFSv4 mounted):

$ ssh -X wkstation01
/usr/bin/xauth:  error in locking authority file /home/mhanby/.Xauthority

As suggested above, booting to kernel 2.6.18-128.7.1 appears to have resolved the issue.

I haven't tried the patched kernel yet. Just figured I'd add the locking issue in case someone searches for it since I did a good bit of searching before an IRC user directed me to this bug.

</pre>
    </div>

    <div id="c29" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard redhat_user"><span class="fn">errata-xmlrpc</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-11-03 19:33:38 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">This issue has been addressed in following products:

  Red Hat Enterprise Linux 5

Via RHSA-2009:1548 <a href="https://rhn.redhat.com/errata/RHSA-2009-1548.html">https://rhn.redhat.com/errata/RHSA-2009-1548.html</a>

</pre>
    </div>

    <div id="c33" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Rudd-O DragonFear</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-04 08:53:32 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">This problem happens in Fedora 13, kernel 2.6.33.6-147.2.4.fc13.x86_64 and earlier kernels, if the exported file system is a FUSE file system (REGARDLESS of the kernel in the exporter server) in NFS versions 2 and 3.

Details here:

<a href="http://groups.google.com/group/zfs-fuse/tree/browse_frm/thread/767dec5dd628d839/45d14c213613741f?rnum=11&amp;q=nfs+problems&amp;_done=%2Fgroup%2Fzfs-fuse%2Fbrowse_frm%2Fthread%2F767dec5dd628d839%2F45d14c213613741f%3Flnk%3Dgst%26q%3Dnfs%2Bproblems%26#doc_230660389d18e348">http://groups.google.com/group/zfs-fuse/tree/browse_frm/thread/767dec5dd628d839/45d14c213613741f?rnum=11&amp;q=nfs+problems&amp;_done=%2Fgroup%2Fzfs-fuse%2Fbrowse_frm%2Fthread%2F767dec5dd628d839%2F45d14c213613741f%3Flnk%3Dgst%26q%3Dnfs%2Bproblems%26#doc_230660389d18e348</a>

</pre>
    </div>

    <div id="c34" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Rudd-O DragonFear</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-04 08:54:58 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">Sorry, my last comment should be NFS4.  NFS3 and NFS2 only produce a metric ton of ESTALE errors in the client.

</pre>
    </div>

    <div id="c36" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Eugene Teo (Security Response)</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-05 05:27:02 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=524520#c33">comment #33</a>)
<span class="quote">&gt; This problem happens in Fedora 13, kernel 2.6.33.6-147.2.4.fc13.x86_64 and
&gt; earlier kernels, if the exported file system is a FUSE file system (REGARDLESS
&gt; of the kernel in the exporter server) in NFS versions 2 and 3.
&gt; 
&gt; Details here:
&gt; 
&gt; <a href="http://groups.google.com/group/zfs-fuse/tree/browse_frm/thread/767dec5dd628d839/45d14c213613741f?rnum=11&amp;q=nfs+problems&amp;_done=%2Fgroup%2Fzfs-fuse%2Fbrowse_frm%2Fthread%2F767dec5dd628d839%2F45d14c213613741f%3Flnk%3Dgst%26q%3Dnfs%2Bproblems%26#doc_230660389d18e348">http://groups.google.com/group/zfs-fuse/tree/browse_frm/thread/767dec5dd628d839/45d14c213613741f?rnum=11&amp;q=nfs+problems&amp;_done=%2Fgroup%2Fzfs-fuse%2Fbrowse_frm%2Fthread%2F767dec5dd628d839%2F45d14c213613741f%3Flnk%3Dgst%26q%3Dnfs%2Bproblems%26#doc_230660389d18e348</a>    </span >

Rudd, please file a new bug for this. If you can provide the steps to reproduce the issue, even better. Thanks.

</pre>
    </div>

    <div id="c38" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard redhat_user"><span class="fn">Jeff Layton</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-05 11:59:25 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">This bug was due to a bug introduced in a backport to RHEL5. It should be a problem only in a small subset of RHEL5 kernels and was fixed quite some time ago. I suspect that any problems in Fedora are unrelated to this, even if the symptoms look the same.

</pre>
    </div>

    <div id="c39" class="bz_comment
            "
    >

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=524520#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard "><span class="fn">Rudd-O DragonFear</span>
</span>
        </span>

        
        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-08-06 05:43:27 UTC
        </span>

      </div>

      


      
      



<pre class="bz_comment_text">OK.

</pre>
    </div>


  <script>
$(document).ready(function() {
  var mysel = document.getElementsByClassName('flag_type-415')[0];
  var relnotes = document.getElementById('cf_release_notes');
  if ( mysel && relnotes &&
      relnotes.value != '' &&
      relnotes.value != cf_doc_type_text[document.getElementById('cf_doc_type').value] &&
      mysel.options[mysel.selectedIndex].value != '+'
    )
      document.getElementById('cf_doc_warn').innerHTML = '<div class="warning "><b>Warning: Doc Text is not yet verified as correct</b></div>';
});
</script>

</td>
<td>
</td>
</tr></table>
  </div>

    <hr><div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=524520&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=524520" title="Format For Printing"><i class="fa fa-print"></i></a></li>
    <li><a href="show_bug.cgi?ctype=xml&amp;id=524520" title="Export as XML"><i class="far fa-file-excel"></i></a></li>
    <li><a href="enter_bug.cgi?cloned_bug_id=524520" title="Clone This Bug"><i class="fa fa-clone"></i></a></li>
    <li>
      <a href="enter_bug.cgi?cloned_bug_id=524520&lite=1" title="Copy is a lite weight clone that only copies the summary &amp; description">
       <i class="far fa-clone"></i>
      </a>
    </li><li>
  <a href="buglist.cgi?bug_id=524520&amp;bug_id_type=anddependson&amp;format=tvp" title="TreeView+">
    <i class="fa fa-tree"></i>
  </a>
</li>
    <li>
      <a href="#" title="Top of page">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
      </a>
    </li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li class="form">
    
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>
<script type="text/javascript">
function dt_submit() {
  var tables = $.fn.dataTable.tables( { visible: true, api: true } );
  $.each(tables.context, function() {
    var $myform = this.nTable.closest('form');

    // Checked checkboxes
    $.each(this.oInstance.$('input:checked'), function() {
      add_hidden(this.name, this.value, $myform)
    });

    // Inputs in selected rows
    $.each(this.oInstance.$('tr.selected'), function() {
      $(this).find('input').each( function() {
        add_hidden(this.name, this.value, $myform)
      });
    });

    // select boxes
    $.each(this.oInstance.$('select'), function() {
      if(($(this).val()!=="") && ($(this).val() !== 0)) {
        add_hidden(this.name, this.value, $myform);
      }
    });
  });
}

function add_hidden(nm, val, $frm) {
        $('<input />').attr('type', 'hidden')
          .attr('name', nm)
          .attr('value', val)
          .appendTo($frm);
}

$(document).ready(function() {
    $('form').submit(function( event ) {
        dt_submit();
        if( $(this).attr('id') === 'changeform') {
          return(validateEnterBug(this));
        }
    });
});

if (window.self !== window.top) {
    $('#header').addClass('bz_default_hidden');
    $('#footer').addClass('bz_default_hidden');
    $('.navigation').addClass('bz_default_hidden');
    $('body').css('background-image', 'none');
}
</script><script type="text/javascript">
$(document).ready(function() {
    $('select').not('.custom_search_condition select, #member_template select, #available_columns, #p2_component, #select_user_verify_class, #inclusion_to_remove, #exclusion_to_remove, #cc, #hide, #ack_col_edit #show, .noselectize, #j_top').each(function() {
        if(! $(this).hasClass('selectized')) {
            $(this).selectize({
                plugins: ['remove_button', 'minimum_search_length', 'extra_keys_control', 'related_fields', 'load_from_js'],
                selectOnTab: true,
                maxOptions: 'nolimit',
                minimum_search_length: 2,
                render: {
                    option: function(item, escape) {
                        var classes = "option";
                        var selected = this.items.indexOf(item.value) !== -1;
                        if(item.disabled) {
                            classes = classes + " bz_default_hidden" ;
                        }

                        return '<div class="' +  classes  + '" title="' + escape(item.title) + '" id="' + escape(item.id) + '" data-value="' + escape(item.value) + '">' +
                                    '<span>' + escape(item.text) + '</span>' +
                                '</div>';
                    }
                },
            });
        }
    });
});
</script>
  </body>
</html>