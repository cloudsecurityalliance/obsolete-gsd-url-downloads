<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    
        <link rel='alternate' type='application/rss+xml' title='ODBC related Bug #69975 - RDF' href='rss/bug.php?id=69975'>
        <link rel='alternate' type='application/rss+xml' title='ODBC related Bug #69975 - RSS 2.0' href='rss/bug.php?id=69975&format=rss2'>
        <base href="https://bugs.php.net/">
    <title>PHP :: Bug #69975 :: PHP segfaults when accessing nvarchar(max) defined columns </title>
    <link rel="shortcut icon" href="https://bugs.php.net/images/favicon.ico">
    <link rel="stylesheet" href="https://bugs.php.net/css/style.css">
</head>

<body>

<table id="top" class="head" cellspacing="0" cellpadding="0">
    <tr>
        <td class="head-logo">
            <a href="/"><img src="images/logo.png" alt="Bugs" vspace="2" hspace="2"></a>
        </td>

        <td class="head-menu">
            <a href="https://php.net/">php.net</a>&nbsp;|&nbsp;
            <a href="https://php.net/support.php">support</a>&nbsp;|&nbsp;
            <a href="https://php.net/docs.php">documentation</a>&nbsp;|&nbsp;
            <a href="report.php">report a bug</a>&nbsp;|&nbsp;
            <a href="search.php">advanced search</a>&nbsp;|&nbsp;
            <a href="search-howto.php">search howto</a>&nbsp;|&nbsp;
            <a href="stats.php">statistics</a>&nbsp;|&nbsp;
            <a href="random">random bug</a>&nbsp;|&nbsp;
            <a href="login.php">login</a>
        </td>
    </tr>

    <tr>
        <td class="head-search" colspan="2">
            <form method="get" action="search.php">
                <p class="head-search">
                    <input type="hidden" name="cmd" value="display">
                    <small>go to bug id or search bugs for</small>
                    <input class="small" type="text" name="search_for" value="" size="30">
                    <input type="image" src="images/small_submit_white.gif" alt="search" style="vertical-align: middle;">
                </p>
            </form>
        </td>
    </tr>
</table>

<table class="middle" cellspacing="0" cellpadding="0">
    <tr>
        <td class="content">
<div id="bugheader">
    <table id="details">
        <tr id="title">
            <th class="details" id="number"><a href="bug.php?id=69975">Bug</a>&nbsp;#69975</th>
            <td id="summary" colspan="5">PHP segfaults when accessing nvarchar(max) defined columns </td>
        </tr>
        <tr id="submission">
            <th class="details">Submitted:</th>
            <td style="white-space: nowrap;">2015-07-01 08:38 UTC</td>
            <th class="details">Modified:</th>
            <td style="white-space: nowrap;">2016-07-05 09:12 UTC</td>
            <td rowspan="6">


            </td>
        </tr>

        <tr id="submitter">
            <th class="details">From:</th>
            <td>jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</td>
            <th class="details">Assigned:</th>
            <td><a href="search.php?cmd=display&amp;assign=cmb">cmb</a> (<a href="https://people.php.net/cmb">profile</a>)</td>
        </tr>

        <tr id="categorization">
            <th class="details">Status:</th>
            <td>Closed</td>
            <th class="details">Package:</th>
            <td><a href="search.php?cmd=display&amp;package_name[]=ODBC+related">ODBC related</a></td>
        </tr>

        <tr id="situation">
            <th class="details">PHP Version:</th>
            <td>5.5.26</td>
            <th class="details">OS:</th>
            <td>Windows Server 2012R2</td>
        </tr>

        <tr id="private">
            <th class="details">Private report:</th>
            <td>No</td>
            <th class="details">CVE-ID:</th>
            <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-8879" target="_blank">2015-8879</a></td>
        </tr>
    </table>
</div>

<div class="controls">
<span id='control_0' class='control active'>View</span>
<span id='control_3' class='control'><a href='bug.php?id=69975&amp;edit=3'>Add Comment</a></span>
<span id='control_1' class='control'><a href='bug.php?id=69975&amp;edit=1'>Developer</a></span>
<span id='control_2' class='control'><a href='bug.php?id=69975&amp;edit=2'>Edit</a></span>
</div>
<div class="clear"></div>



<div class='comment type_comment' ><a name="1435739915">&nbsp;</a><strong>[2015-07-01 08:38 UTC] jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</strong>
<pre class='note'>Description:
------------
if you have a MS SQL Database with a table that contains columns defined as NVARCHAR(MAX), PHP will crash Apache when executing the odbc_fetch_array function.

Error noted in the Windows Event viewer:

Faulting application name: httpd.exe, version: 2.4.9.0, time stamp: 0x53258cd5
Faulting module name: MSVCR110.dll, version: 11.0.51106.1, time stamp: 0x5098826e
Exception code: 0xc0000005
Fault offset: 0x000000000003c664
Faulting process id: 0x5c4
Faulting application start time: 0x01d0b31ba3eb507f
Faulting application path: D:\wamp\bin\apache\apache2.4.9\bin\httpd.exe
Faulting module path: C:\windows\system32\MSVCR110.dll
Report Id: 2d47d2ee-1f12-11e5-943b-005056915a28

Additional info:
The ODBC driver sees the NVARCHAR(MAX) column as a NVARCHAR(0) column. Probably the zero is causing the odbc driver to loop and consume all available memory.

As a workaround I've changed the DSN to use &quot;SQL Server&quot; instead of &quot;SQL Server Native Client 10.0&quot;. This is an &quot;old&quot; driver (version 6) which does not support MARS but at least does not cause Apache to crash. It sees the NVARCHAR(MAX) columns as NTEXT columns with a maximum (maxint)size.




Test script:
---------------
$dbs = odbc_connect(&quot;Driver={SQL Server Native Client 10.0&quot;}&quot;;Server=MYSERVER1;Database=MYDBS;MARS_Connection=Yes;,&quot;username&quot;,&quot;password&quot;,SQL_CUR_USE_ODBC);
$result = odbc_exec($dbs, &quot;select * from Table1&quot;);
// Table1 should have a column defined as &quot;NVARCHAR(MAX)&quot;

$row = odbc_fetch_array($result);

// Apache is crashing when executing the odbc_fetch_array

Expected result:
----------------
Please provide support for NVARCHAR(MAX) columns in all odbc implementations for PHP. I did the test with all recent versions of PHP (except version 7) but all of them crash when accessing this type of column though odbc.

I know this has been reported many times before, but it has never been finally resolved by putting the support into the binaries for all versions of php.

Actual result:
--------------
Crash of Apache.

</pre>
</div><h2>Patches</h2>
<a href="patch-display.php?bug_id=69975&amp;patch=odbc-wvarchar-native-draft&amp;revision=latest" >odbc-wvarchar-native-draft</a>
(last revision 2015-07-02 14:17 UTC by cmb@php.net)
<br><p><a href='patch-add.php?bug_id=69975'>Add a Patch</a></p><h2>Pull Requests</h2>
<p><a href='gh-pull-add.php?bug_id=69975'>Add a Pull Request</a></p><h2 style="border-bottom:2px solid #666;margin-bottom:0;padding:5px 0;">History</h2><div id='comment_filter' class='controls comments'><span id='type_all' class='control active' onclick='do_comment(this);'>All</span><span id='type_comment' class='control ' onclick='do_comment(this);'>Comments</span><span id='type_log' class='control ' onclick='do_comment(this);'>Changes</span><span id='type_svn' class='control ' onclick='do_comment(this);'>Git/SVN commits</span><span id='type_related' class='control ' onclick='do_comment(this);'>Related reports</span>            </div>
            <div id='comments_view' style='clear:both;'>
<div class='comment type_log' ><a name="1435761709">&nbsp;</a><strong>[2015-07-01 14:41 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Status: Open</span>
<span class="added">+Status: Feedback</span>
</div></div></div><div class='comment type_comment' ><a name="1435761709">&nbsp;</a><strong>[2015-07-01 14:41 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>Thanks for the report. 

What you say is not quite correct, a lot of ext/odbc related bugs was fixed in the last PHP5 releases, please check the changelog.

Could you please also check #68964? As I didn't have the final response there, while the patch was already in releases.

What ODBCVER does your phpinfo() show? Which is the SqlServer version?

You should probably know also, that nvarchar and others are long deprecated <a href="https://msdn.microsoft.com/en-us/library/ms187993%28v=sql.90%29.aspx" rel="nofollow">https://msdn.microsoft.com/en-us/library/ms187993%28v=sql.90%29.aspx</a> so should not be used. We depend on the underlying library here, it's not about us making decisions supporting them or not. However it shouldn't crash, that's clear.

Thanks.
</pre>
</div><div class='comment type_log' ><a name="1435761778">&nbsp;</a><strong>[2015-07-01 14:42 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Package: PDO ODBC</span>
<span class="added">+Package: ODBC related</span>
</div></div></div><div class='comment type_comment' ><a name="1435761778">&nbsp;</a><strong>[2015-07-01 14:42 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>fix category
</pre>
</div><div class='comment type_log' ><a name="1435822039">&nbsp;</a><strong>[2015-07-02 07:27 UTC] jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Status: Feedback</span>
<span class="added">+Status: Open</span>
</div></div></div><div class='comment type_comment' ><a name="1435822039">&nbsp;</a><strong>[2015-07-02 07:27 UTC] jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</strong>
<pre class='note'>Thanks for your fast reply.
Don't get me wrong here, I'm really satisfied with the work that you guys are doing here. And I'm even impressed by the quality of it.

I just looked at #68964 and yes it's almost the same issue. I also had that same error in the beginning (memory exhausted), but when I changed the max memory limit in php.ini to 1024M, the error did not show up again, instead Apache started crashing as a result of it.

The database server (seperate system) is running SQL Server 11.0.5058 (SQL Server 2012). The ODBC driver I'm using is &quot;SQL Server Native Client 11.0&quot; (2011.110.2100.60).

The database is using some tables with columns defined as &quot;nvarchar(max)&quot;, this type is not deprecated as you've mentioned, it's even recommended to use them (&quot;ntext&quot;, &quot;text&quot; and &quot;image&quot; types are deprecated).

When I'm using the &quot;SQL Server Native Client 11.0&quot; odbc driver, I notice that the columns are reported (using the odbc_columns calls) as &quot;nvarchar(0)&quot;. But when I'm using the &quot;SQL Server&quot; odbc server, these same columns are reported as &quot;ntext&quot; with a size of 2147483646 eventhough it's the same column in the database wich is indeed defined as &quot;nvarchar(max)&quot;.

Anyway if there's anything I can (investigate,test,..), just let me know as I really would like this to be resolved.

Currenlty I'm using the 64-bit versions of Apache and PHP.

Thanks.
</pre>
</div><div class='comment type_comment' ><a name="1435835523">&nbsp;</a><strong>[2015-07-02 11:12 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>&gt; Anyway if there's anything I can (investigate,test,..), just let
&gt; me know as I really would like this to be resolved.

It might be helpful if you can post an ODBC trace for the given
test script. If the trace is large, it might be best to put it on
&lt;<a href="https://gist.github.com/" rel="nofollow">https://gist.github.com/</a>&gt; or someone else, but not directly in
this ticket. How to create an ODBC trace is described on
&lt;<a href="https://support.microsoft.com/en-us/kb/274551" rel="nofollow">https://support.microsoft.com/en-us/kb/274551</a>&gt;. And please make
sure there is no confidential information contained in the trace
(password etc.)
</pre>
</div><div class='comment type_comment' ><a name="1435838706">&nbsp;</a><strong>[2015-07-02 12:05 UTC] jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</strong>
<pre class='note'>The odbc trace can be found here:
<a href="https://gist.githubusercontent.com/anonymous/761c084d36f586862f08/raw/SQLLOG" rel="nofollow">https://gist.githubusercontent.com/anonymous/761c084d36f586862f08/raw/SQLLOG</a>
Thanks.
</pre>
</div><div class='comment type_comment' ><a name="1435842078">&nbsp;</a><strong>[2015-07-02 13:01 UTC] jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</strong>
<pre class='note'>This is the testscript I've used:
     $db_datastage = odbc_connect($dsn,$user,$pwd,SQL_CUR_USE_ODBC);	
     $res = odbc_exec($db_datastage,&quot;select top 10 * from SN.cmdb_ci&quot;);
     while ($row = odbc_fetch_array($res)) {
	var_dump($row);
     }
     odbc_close($db_datastage);

This trace is the failing one (using &quot;SQL Server Native Client 11.0&quot; as driver):
<a href="https://gist.githubusercontent.com/anonymous/757e0f1fabeefbbb1abb/raw/SQLLOG1" rel="nofollow">https://gist.githubusercontent.com/anonymous/757e0f1fabeefbbb1abb/raw/SQLLOG1</a>

This trace is the successful one (using &quot;SQL Server&quot; as driver):
<a href="https://gist.githubusercontent.com/anonymous/6d59f9903ca76d43095d/raw/sqllog2" rel="nofollow">https://gist.githubusercontent.com/anonymous/6d59f9903ca76d43095d/raw/sqllog2</a>

It looks like it's having an issue when fetching the result (2nd result) as it's displaying: 
DIAG [01004] [Microsoft][SQL Server Native Client 11.0]String data, right truncation (0) 

Looks like a small buffer problem somewhere?
</pre>
</div><div class='comment type_comment' ><a name="1435846589">&nbsp;</a><strong>[2015-07-02 14:16 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>Thanks for the traces.

At a first glance the problem is that SQLColAttributes()
requesting SQL_COLUMN_DISPLAY_SIZE for column 5 yields 0 for the
Native Driver, but 1073741823 (0x3fffffff) for the SQL Server
driver, whereby the column type is reported as SQL_WVARCHAR (-9)
and SQL_WLONGVARCHAR (-10), respectively. This results in a buffer
of only 1 byte to be emalloc'd()[1], what's likely to cause
problems.

However, I'm confused, because SQL_WVARCHAR is supposed to request
SQL_DESC_OCTET_LENGTH instead of SQL_COLUMN_DISPLAY_SIZE[2]. Maybe
a driver mapping?

Maybe the attached patch &quot;odbc-wvarchar-native-draft&quot; points in
the right direction?

[1] &lt;<a href="https://github.com/php/php-src/blob/PHP-5.5.26/ext/odbc/php_odbc.c#L1020" rel="nofollow">https://github.com/php/php-src/blob/PHP-5.5.26/ext/odbc/php_odbc.c#L1020</a>&gt;
[2] &lt;<a href="https://github.com/php/php-src/blob/PHP-5.5.26/ext/odbc/php_odbc.c#L995" rel="nofollow">https://github.com/php/php-src/blob/PHP-5.5.26/ext/odbc/php_odbc.c#L995</a>&gt;
</pre>
</div><div class='comment type_patch' ><a name="1435846631">&nbsp;</a><strong>[2015-07-02 14:17 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>The following patch has been added/updated:

Patch Name: odbc-wvarchar-native-draft
Revision:   1435846631
URL:        <a href="https://bugs.php.net/patch-display.php?bug=69975&amp;patch=odbc-wvarchar-native-draft&amp;revision=1435846631" rel="nofollow">https://bugs.php.net/patch-display.php?bug=69975&amp;patch=odbc-wvarchar-native-draft&amp;revision=1435846631</a>
</pre>
</div><div class='comment type_comment' ><a name="1435847045">&nbsp;</a><strong>[2015-07-02 14:24 UTC] jgeert1 &#x61;&#116; its &#x64;&#111;&#x74; jnj &#x64;&#111;&#x74; com</strong>
<pre class='note'>Wow that was fast :-)
What do I need to do to get a compiled version for Windows 64-bit?
Thanks.
</pre>
</div><div class='comment type_log' ><a name="1435856363">&nbsp;</a><strong>[2015-07-02 16:59 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Status:      Open</span>
<span class="added">+Status:      Verified</span>
<span class="removed">-Assigned To:</span>
<span class="added">+Assigned To: cmb</span>
</div></div></div><div class='comment type_comment' ><a name="1435856363">&nbsp;</a><strong>[2015-07-02 16:59 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>I have now set up a testing environment with SQL Server 2014 and
can reproduce the issue. My patch was way too short-sighted (it
prevents the segfault, but does return empty strings). I'll have
to investigate further.
</pre>
</div><div class='comment type_log' ><a name="1435867395">&nbsp;</a><strong>[2015-07-02 20:03 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Summary: PHP is causing Apache to crash when accessing
          nvarchar(max) defined columns</span>
<span class="added">+Summary: PHP segfaults when accessing nvarchar(max) defined
          columns</span>
</div></div></div><div class='comment type_log' ><a name="1435867484">&nbsp;</a><strong>[2015-07-02 20:04 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Summary: PHP segfaults when accessing nvarchar(max) defined
          columns</span>
<span class="added">+Summary: PHP is causing Apache to crash when accessing
          nvarchar(max) defined columns</span>
</div></div></div><div class='comment type_comment' ><a name="1435867484">&nbsp;</a><strong>[2015-07-02 20:04 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>@jgeert1, ahh, you're right. Still, it could be a driver mess.

@cmb, have you tried to raise the ODBCVER? See ext/odbc/config.w32, IMHO 3.5 could be done for master, if there's no other solution. Still many issues with 3.0 and older. But on the other hand, if you can fix it with 3.0, so be.

Thanks.
</pre>
</div><div class='comment type_log' ><a name="1435867568">&nbsp;</a><strong>[2015-07-02 20:06 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Summary: PHP is causing Apache to crash when accessing
          nvarchar(max) defined columns</span>
<span class="added">+Summary: PHP segfaults when accessing nvarchar(max) defined
          columns</span>
<span class="removed">-Type:    Feature/Change Request</span>
<span class="added">+Type:    Bug</span>
</div></div></div><div class='comment type_comment' ><a name="1435871068">&nbsp;</a><strong>[2015-07-02 21:04 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>I've tested with odbcver=0x0350 and 0x0351 and got segfaults, too.

Actually the problem is rather clear in the meantime. According to
MSDN[1] nvarchar(max) has a maximum size of 2GB. Even if the
driver would report this as displaylength, so much memory could
usually not be allocated. Apparently, nvarchar(max) has to be
treated the same as SQL_WLONGVARCHAR. The SQL Server driver does
this, but not the SQL Server Native Client 11.0 driver
(2011.110.3000.0). The fix appears to be a no-brainer (similar to
the attached draft patch, but additionally setting .coltype to
SQL_WLONGVARCHAR, and of course fixing the assignment in the if
condition).

I can confirm that #68964 is already fixed. An ntext column is
reported as SQL_WLONGVARCHAR by both drivers (ODBCVER 03x00 as
well as 0x351).

Interestingly, <a href='bug.php?id=67437'>bug #67437</a> suggests that some drivers report a size
of ~ 2GB for nvarchar(max). I'll have a closer look on that.

[1] &lt;<a href="https://msdn.microsoft.com/en-us/library/ms186939(v=sql.120" rel="nofollow">https://msdn.microsoft.com/en-us/library/ms186939(v=sql.120</a>).aspx&gt;
</pre>
</div><div class='comment type_svn' ><a name="1435876203">&nbsp;</a><strong>[2015-07-02 22:30 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=16db4d1462bf3eacb93c0cd940f799160a284b24" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=16db4d1462bf3eacb93c0cd940f799160a284b24</a>
Log: Fix #69975: PHP segfaults when accessing nvarchar(max) defined columns
</pre>
</div><div class='comment type_log' ><a name="1435876203">&nbsp;</a><strong>[2015-07-02 22:30 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Status: Verified</span>
<span class="added">+Status: Closed</span>
</div></div></div><div class='comment type_comment' ><a name="1435876688">&nbsp;</a><strong>[2015-07-02 22:38 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>The fix for this bug has been committed for PHP 5.6 and master.

You can download the latest Windows snapshot from
&lt;<a href="http://windows.php.net/snapshots/" rel="nofollow">http://windows.php.net/snapshots/</a>&gt;. Note that it might take some
time for the next snapshot to be built.
 
Thank you for the report, and for helping us make PHP better.

I have not been able to reproduce #67437, and therefore didn't
cater to it; see also the commit message.
</pre>
</div><div class='comment type_svn' ><a name="1435923317">&nbsp;</a><strong>[2015-07-03 11:35 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=344ff5dd4c538eaebea075f7705321f8b86d0b47" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=344ff5dd4c538eaebea075f7705321f8b86d0b47</a>
Log: fixed fix #69975 wrt. ODBCVER &amp;lt; 0x0300
</pre>
</div><div class='comment type_svn' ><a name="1436312217">&nbsp;</a><strong>[2015-07-07 23:36 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=344ff5dd4c538eaebea075f7705321f8b86d0b47" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=344ff5dd4c538eaebea075f7705321f8b86d0b47</a>
Log: fixed fix #69975 wrt. ODBCVER &amp;lt; 0x0300
</pre>
</div><div class='comment type_svn' ><a name="1436312218">&nbsp;</a><strong>[2015-07-07 23:36 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=16db4d1462bf3eacb93c0cd940f799160a284b24" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=16db4d1462bf3eacb93c0cd940f799160a284b24</a>
Log: Fix #69975: PHP segfaults when accessing nvarchar(max) defined columns
</pre>
</div><div class='comment type_related' ><a name="1437739818">&nbsp;</a><strong>[2015-07-24 12:10 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>Related To: <a href='bug.php?id=70123'>Bug #70123</a>
</pre>
</div><div class='comment type_log' ><a name="1467709966">&nbsp;</a><strong>[2016-07-05 09:12 UTC] <a href="//people.php.net/kaplan">kaplan@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-CVE-ID:</span>
<span class="added">+CVE-ID: 2015-8879</span>
</div></div></div><div class='comment type_comment' ><a name="1467709967">&nbsp;</a><strong>[2016-07-05 09:12 UTC] <a href="//people.php.net/kaplan">kaplan@php.net</a></strong>
<pre class='note'>Seems a CVE was assigned to this bug, although not everyone agrees to that, see <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1338912" rel="nofollow">https://bugzilla.redhat.com/show_bug.cgi?id=1338912</a>
</pre>
</div><div class='comment type_svn' ><a name="1467985007">&nbsp;</a><strong>[2016-07-08 13:36 UTC] <a href="//people.php.net/jpauli">jpauli@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c</a>
Log: Fix #69975: PHP segfaults when accessing nvarchar(max) defined columns
</pre>
</div><div class='comment type_svn' ><a name="1468524017">&nbsp;</a><strong>[2016-07-14 19:20 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c</a>
Log: Fix #69975: PHP segfaults when accessing nvarchar(max) defined columns
</pre>
</div><div class='comment type_svn' ><a name="1468524125">&nbsp;</a><strong>[2016-07-14 19:22 UTC] <a href="//people.php.net/ab">ab@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c</a>
Log: Fix #69975: PHP segfaults when accessing nvarchar(max) defined columns
</pre>
</div><div class='comment type_related' ><a name="1469722292">&nbsp;</a><strong>[2016-07-28 16:11 UTC] <a href="//people.php.net/cmb">cmb@php.net</a></strong>
<pre class='note'>Related To: <a href='bug.php?id=54169'>Bug #54169</a>
</pre>
</div><div class='comment type_svn' ><a name="1476699089">&nbsp;</a><strong>[2016-10-17 10:11 UTC] <a href="//people.php.net/bwoebi">bwoebi@php.net</a></strong>
<pre class='note'>Automatic comment on behalf of cmb
Revision: <a href="http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c" rel="nofollow">http://git.php.net/?p=php-src.git;a=commit;h=82637e818776d4fe778fb1dbac26eeece02e900c</a>
Log: Fix #69975: PHP segfaults when accessing nvarchar(max) defined columns
</pre>
</div><div class='comment type_comment' ><a name="1511004094">&nbsp;</a><strong>[2017-11-18 11:21 UTC] chris &#x61;&#116; ocproducts &#x64;&#111;&#x74; com</strong>
<pre class='note'>The exact same issue happens with varchar(max). I am including a fix in my patch for #44278, which fixes this and another similar issue with [n]varchar(max).
</pre>
</div></div>
        </td>
    </tr>
</table>

<script src='js/util.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script src="js/jquery.cookie.js"></script>
<script>
function do_comment(nd)
{
    $('#comment_filter > .control.active').removeClass("active");
    $(nd).addClass("active");

    $.cookie('history_tab', nd.id, { expires: 365 });

    if (nd.id == 'type_all') {
        $('#comments_view > .comment:hidden').show('slow');
    } else {
        $('#comments_view > .comment').each(function(i) {
            if ($(this).hasClass(nd.id)) {
                $(this).show('slow');
            } else {
                $(this).hide('slow');
            }
        });
    }
    return false;
}
</script>
<table class="foot" cellspacing="0" cellpadding="0">
    <tr>
        <td class="foot-bar" colspan="2">&nbsp;</td>
    </tr>

    <tr>
        <td class="foot-copy">
            <small>
                <a href="https://php.net/"><img src="images/logo-small.gif" align="left" valign="middle" hspace="3" alt="PHP"></a>
                <a href="https://php.net/copyright.php">Copyright &copy; 2001-2021 The PHP Group</a><br>
                All rights reserved.
            </small>
        </td>
        <td class="foot-source">
            <small>Last updated: Sat Oct 30 19:03:34 2021 UTC</small>
        </td>
    </tr>
</table>
</body>
</html>
