<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 1362433002: Fix for &quot;chrome://&quot; links in PDFs. -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '429129e710d7c100b737034e6dc8f077';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/1362433002%252526ust%25253D1608557877705313%252526usg%25253DAFQjCNGbBy1dzhIeKl2Jl5uPBqrl9PZpNw%26service%3Dah">Sign out</a>

</div>
<div class="counter">(474)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-1362433002">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/1362433002/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            1362433002</a>:
    Fix for &quot;chrome://&quot; links in PDFs.  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            5 years, 3 months ago by <a href="/user/paulmeyer" onMouseOver="M_showUserInfoPopup(this)">paulmeyer</a>
          </div>
          <div><b>Modified:</b><br/>
            5 years, 2 months ago
          </div>
          <div><b>Reviewers:</b><br/>
            <span class='approval'><a href="/user/Charlie%20Reis" onMouseOver="M_showUserInfoPopup(this)">Charlie Reis</a></span>, <span class='approval'><a href="/user/raymes" onMouseOver="M_showUserInfoPopup(this)">raymes</a></span>, <span class='approval'><a href="/user/Devlin" onMouseOver="M_showUserInfoPopup(this)">Devlin</a></span>
          </div>
          
          <div><b>CC:</b><br/>
            chromium-reviews, chromium-apps-reviews_chromium.org, darin-cc_chromium.org, jam, extensions-reviews_chromium.org, not at google - send to devlin, Devlin
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/src.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/pending/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=chromium">
              chromium
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - c14d891d44f0afff64e56ed7c9702df1d807b1ee"
               href="/search?repo_guid=c14d891d44f0afff64e56ed7c9702df1d807b1ee">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">This patch implements a mechanism for more granular link URL permissions (filtering on scheme/host). This fixes the bug that allowed PDFs to have working links to any "chrome://" URLs.

BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=528505">528505</a>, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=226927">226927</a>
Committed: <a href="https://crrev.com/1eefa26e1795192c5a347a1e1e7a99e88c47f9c4">https://crrev.com/1eefa26e1795192c5a347a1e1e7a99e88c47f9c4</a>
Cr-Commit-Position: refs/heads/master@{#351705}
  </div>




  <h3>
    <a id="ps-20001-pointer"
       href="/1362433002/#ps20001"
       onclick="M_toggleSectionForPS('1362433002', '20001')"
       class="toggled-section ">
      Patch Set 1
      
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 24
      
    </div>
  

  <div id="ps-20001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-60001-pointer"
       href="/1362433002/#ps60001"
       onclick="M_toggleSectionForPS('1362433002', '60001')"
       class="toggled-section ">
      Patch Set 2
      : Addressed comments by creis@.
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-60001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-80001-pointer"
       href="/1362433002/#ps80001"
       onclick="M_toggleSectionForPS('1362433002', '80001')"
       class="toggled-section ">
      Patch Set 3
      : Now using url::Origin.
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 12
      
    </div>
  

  <div id="ps-80001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-140001-pointer"
       href="/1362433002/#ps140001"
       onclick="M_toggleSectionForPS('1362433002', '140001')"
       class="toggled-section ">
      Patch Set 4
      : Added tests. Addressed comments.
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 17
      
    </div>
  

  <div id="ps-140001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-160001-pointer"
       href="/1362433002/#ps160001"
       onclick="M_toggleSectionForPS('1362433002', '160001')"
       class="toggled-section ">
      Patch Set 5
      : Addressed final nits.
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-160001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-180001-pointer"
       href="/1362433002/#ps180001"
       onclick="M_toggleSectionForPS('1362433002', '180001')"
       class="toggled-section ">
      Patch Set 6
      : Rebased.
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-180001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-220001-pointer"
       href="/1362433002/#ps220001"
       onclick="M_toggleSectionForPS('1362433002', '220001')"
       class="toggled-section opentriangle">
      Patch Set 7
      : Small fix.
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-220001"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 5 years, 2 months ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue1362433002_220001.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/1362433002/220001"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+151 lines, -25 lines</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230001">
            chrome/browser/extensions/chrome_extension_web_contents_observer.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc"
             title="Delta from patch set 2">2</a>
        
          <a href="/1362433002/diff2/80001:220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc"
             title="Delta from patch set 3">3</a>
        
          <a href="/1362433002/diff2/140001:220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc"
             title="Delta from patch set 4">4</a>
        
          <a href="/1362433002/diff2/160001:220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc"
             title="Delta from patch set 5">5</a>
        
          <a href="/1362433002/diff2/180001:220001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc"
             title="Delta from patch set 6">6</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+31 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230001.diff"
             title="Download patch for chrome/browser/extensions/chrome_extension_web_contents_observer.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230002">
            chrome/browser/pdf/pdf_extension_test.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/chrome/browser/pdf/pdf_extension_test.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/chrome/browser/pdf/pdf_extension_test.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/chrome/browser/pdf/pdf_extension_test.cc"
             title="Delta from patch set 2">2</a>
        
          <a href="/1362433002/diff2/80001:220001/chrome/browser/pdf/pdf_extension_test.cc"
             title="Delta from patch set 3">3</a>
        
          <a href="/1362433002/diff2/140001:220001/chrome/browser/pdf/pdf_extension_test.cc"
             title="Delta from patch set 4">4</a>
        
          <a href="/1362433002/diff2/160001:220001/chrome/browser/pdf/pdf_extension_test.cc"
             title="Delta from patch set 5">5</a>
        
        </td>
        
          <td style="white-space: nowrap">4 chunks</td>
          <td style="white-space: nowrap">+38 lines, -8 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230002.diff"
             title="Download patch for chrome/browser/pdf/pdf_extension_test.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230004">
            content/browser/child_process_security_policy_impl.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/content/browser/child_process_security_policy_impl.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/content/browser/child_process_security_policy_impl.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/content/browser/child_process_security_policy_impl.h"
             title="Delta from patch set 2">2</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230004.diff"
             title="Download patch for content/browser/child_process_security_policy_impl.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230003">
            content/browser/child_process_security_policy_impl.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/content/browser/child_process_security_policy_impl.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/content/browser/child_process_security_policy_impl.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/content/browser/child_process_security_policy_impl.cc"
             title="Delta from patch set 2">2</a>
        
        </td>
        
          <td style="white-space: nowrap">6 chunks</td>
          <td style="white-space: nowrap">+32 lines, -4 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230003.diff"
             title="Download patch for content/browser/child_process_security_policy_impl.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230005">
            content/browser/child_process_security_policy_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/content/browser/child_process_security_policy_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/content/browser/child_process_security_policy_unittest.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/content/browser/child_process_security_policy_unittest.cc"
             title="Delta from patch set 2">2</a>
        
          <a href="/1362433002/diff2/80001:220001/content/browser/child_process_security_policy_unittest.cc"
             title="Delta from patch set 3">3</a>
        
          <a href="/1362433002/diff2/140001:220001/content/browser/child_process_security_policy_unittest.cc"
             title="Delta from patch set 4">4</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+41 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230005.diff"
             title="Download patch for content/browser/child_process_security_policy_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230006">
            content/public/browser/child_process_security_policy.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/content/public/browser/child_process_security_policy.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/content/public/browser/child_process_security_policy.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/content/public/browser/child_process_security_policy.h"
             title="Delta from patch set 2">2</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+5 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230006.diff"
             title="Download patch for content/public/browser/child_process_security_policy.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230008">
            content/public/common/url_constants.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/content/public/common/url_constants.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/content/public/common/url_constants.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/content/public/common/url_constants.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/1362433002/diff2/80001:220001/content/public/common/url_constants.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/1362433002/diff2/140001:220001/content/public/common/url_constants.h"
             title="Delta from patch set 4">4</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230008.diff"
             title="Download patch for content/public/common/url_constants.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230007">
            content/public/common/url_constants.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/content/public/common/url_constants.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/content/public/common/url_constants.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1362433002/diff2/60001:220001/content/public/common/url_constants.cc"
             title="Delta from patch set 2">2</a>
        
          <a href="/1362433002/diff2/80001:220001/content/public/common/url_constants.cc"
             title="Delta from patch set 3">3</a>
        
          <a href="/1362433002/diff2/140001:220001/content/public/common/url_constants.cc"
             title="Delta from patch set 4">4</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230007.diff"
             title="Download patch for content/public/common/url_constants.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1362433002/patch/220001/230009">
            extensions/browser/extension_web_contents_observer.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1362433002/diff/220001/extensions/browser/extension_web_contents_observer.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1362433002/diff2/20001:220001/extensions/browser/extension_web_contents_observer.cc"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+1 line, -13 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1362433002_220001_230009.diff"
             title="Download patch for extensions/browser/extension_web_contents_observer.cc">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 220001;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 41 (17 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 41)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 41)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(41)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(41)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    generated"
           style="display: none"
           id="generated-msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          Patchset #1 (id:1) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-21 14:35:55 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            >Patchset #1 (id:1) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          paulmeyer@chromium.org changed reviewers: + creis@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-21 15:08:03 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            ><a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a> changed reviewers:
+ <a href="mailto:creis@chromium.org">creis@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          +creis@ for general review.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-21 15:08:04 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            >+creis@ for general review.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Charlie Reis</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          Sorry for the delay; yesterday was a deadline. Thanks for looking into this. It seems ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-22 17:38:16 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            >Sorry for the delay; yesterday was a deadline.  Thanks for looking into this. 
It seems like a reasonable approach if we can confirm it does the right thing.

This will need tests at two levels: ChildProcessSecurityPolicy has a pretty
comprehensive set of unit tests, and we should add cases for the new method (and
how it interacts with GrantScheme).  We should also add a test that tries to
follow allowed and disallowed chrome:// URLs in a PDF, to show this fixes the
problem.

(We should also run try jobs to confirm.)

Some comments and questions below, which might help simplify the change.

<a href="https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensio...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode39" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:39: // Some
extensions use &quot;chrome://favicon/&quot; and &quot;chrome://extension-icon&quot; URLs.
Why are these cases handled here vs chrome://resources in
extension_web_contents_observer.cc?  I don&#39;t understand the difference.

<a href="https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode46" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:46:
extension-&gt;location() == Manifest::COMPONENT)) {
This block is subtle in terms of which types of extensions have this access. 
The comment above should elaborate on why these and not others.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
File content/browser/child_process_security_policy_impl.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode108" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:108: void
RevokeSchemeHost(const std::string&amp; scheme, const std::string&amp; host) {
We shouldn&#39;t introduce new methods until they&#39;re needed.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode284" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:284: // granted or
revoked.
This seems overly complicated if we don&#39;t have any code that does revocation.

It seems easier to just have a set of GURLs or Origins (e.g., chrome://favicon),
similar to FileSet.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode288" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:288: // scheme in
|scheme_host_polcy_| will be respected first, followed by the
This also seems overly complicated.  If we aren&#39;t doing revocation, then there&#39;s
no reason to check the schemes+hosts before checking schemes.  If a full scheme
is granted, that should imply that all hosts in it are granted.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.h" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
File content/browser/child_process_security_policy_impl.h (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.h#newcode65" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.h:65: const std::string&amp;
host) override;
Style nit: &quot;For function declarations and definitions, put each argument on a
separate line unless the whole declaration fits on one line.&quot;

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
File content/public/browser/child_process_security_policy.h (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h#newcode135" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
content/public/browser/child_process_security_policy.h:135: // provided scheme
and host.
Maybe we should be using url::Origins here, rather than pairs of strings?  (GURL
is also an option, but I&#39;d prefer not to allow granting of individual URLs with
paths unless we need to.)

On that note, perhaps it should be called GrantOrigin.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h#newcode137" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
content/public/browser/child_process_security_policy.h:137: const std::string&amp;
host) = 0;
Same style nit.

<a href="https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/exte...</a>
File extensions/browser/extension_web_contents_observer.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/extension_web_contents_observer.cc#newcode80" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/exte...</a>
extensions/browser/extension_web_contents_observer.cc:80: // Some extensions use
&quot;chrome://resources/&quot; URLs.
Again, I&#39;m not sure why this is handled separately from chrome://resources,
especially with a subtle check guarding each of them.  Seems easy for one check
to get modified without the other.

<a href="https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/extension_web_contents_observer.cc#newcode91" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/exte...</a>
extensions/browser/extension_web_contents_observer.cc:91: // Some extensions use
&quot;file://&quot; URLs.
nit: No need for quotes (or churn on this line).</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          Patchset #2 (id:40001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-22 22:13:39 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >Patchset #2 (id:40001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          I&#39;ll work on adding tests now. https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode39 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:39: // Some extensions ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-22 22:13:57 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            >I&#39;ll work on adding tests now.

<a href="https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensio...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode39" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:39: // Some
extensions use &quot;chrome://favicon/&quot; and &quot;chrome://extension-icon&quot; URLs.
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; Why are these cases handled here vs chrome://resources in
&gt; extension_web_contents_observer.cc?  I don&#39;t understand the difference.

The reason was because the host constants are from different layers.
content::kChromeUIResourcesHost is in the content layer, while
chrome::kChromeUIFaviconHost and chrome::kChromeUIExtensionIconHost are in the
chrome layer (so I moved them out here).

However, all of these permissions are really only needed in Chrome, so I can
move it all to the chrome layer.

<a href="https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode46" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:46:
extension-&gt;location() == Manifest::COMPONENT)) {
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; This block is subtle in terms of which types of extensions have this access. 
&gt; The comment above should elaborate on why these and not others.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
File content/browser/child_process_security_policy_impl.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode108" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:108: void
RevokeSchemeHost(const std::string&amp; scheme, const std::string&amp; host) {
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; We shouldn&#39;t introduce new methods until they&#39;re needed.

I was thinking the same thing, though RevokeScheme is exactly the same situation
(it is not currently used). Should I also remove RevokeScheme?

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode284" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:284: // granted or
revoked.
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; This seems overly complicated if we don&#39;t have any code that does revocation.
&gt; 
&gt; It seems easier to just have a set of GURLs or Origins (e.g.,
chrome://favicon),
&gt; similar to FileSet.

Okay, I&#39;ll use a set of origins.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode288" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:288: // scheme in
|scheme_host_polcy_| will be respected first, followed by the
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; This also seems overly complicated.  If we aren&#39;t doing revocation, then
there&#39;s
&gt; no reason to check the schemes+hosts before checking schemes.  If a full
scheme
&gt; is granted, that should imply that all hosts in it are granted.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.h" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
File content/browser/child_process_security_policy_impl.h (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.h#newcode65" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.h:65: const std::string&amp;
host) override;
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; Style nit: &quot;For function declarations and definitions, put each argument on a
&gt; separate line unless the whole declaration fits on one line.&quot;

Done.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
File content/public/browser/child_process_security_policy.h (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h#newcode135" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
content/public/browser/child_process_security_policy.h:135: // provided scheme
and host.
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; Maybe we should be using url::Origins here, rather than pairs of strings? 
(GURL
&gt; is also an option, but I&#39;d prefer not to allow granting of individual URLs
with
&gt; paths unless we need to.)
&gt; 
&gt; On that note, perhaps it should be called GrantOrigin.

Done and done.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h#newcode137" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
content/public/browser/child_process_security_policy.h:137: const std::string&amp;
host) = 0;
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; Same style nit.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/exte...</a>
File extensions/browser/extension_web_contents_observer.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/extension_web_contents_observer.cc#newcode80" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/exte...</a>
extensions/browser/extension_web_contents_observer.cc:80: // Some extensions use
&quot;chrome://resources/&quot; URLs.
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; Again, I&#39;m not sure why this is handled separately from chrome://resources,
&gt; especially with a subtle check guarding each of them.  Seems easy for one
check
&gt; to get modified without the other.

See other comment. I&#39;ll move this out to the chrome layer.

<a href="https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/extension_web_contents_observer.cc#newcode91" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/extensions/browser/exte...</a>
extensions/browser/extension_web_contents_observer.cc:91: // Some extensions use
&quot;file://&quot; URLs.
On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; nit: No need for quotes (or churn on this line).

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Charlie Reis</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          Thanks. Just a few quick comments before I have to go, but I&#39;ll take another ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 3 months ago
		(2015-09-23 00:07:15 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            >Thanks.  Just a few quick comments before I have to go, but I&#39;ll take another
look tomorrow.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
File content/browser/child_process_security_policy_impl.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode108" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:108: void
RevokeSchemeHost(const std::string&amp; scheme, const std::string&amp; host) {
On 2015/09/22 22:13:57, Paul Meyer wrote:
&gt; On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; &gt; We shouldn&#39;t introduce new methods until they&#39;re needed.
&gt; 
&gt; I was thinking the same thing, though RevokeScheme is exactly the same
situation
&gt; (it is not currently used). Should I also remove RevokeScheme?

Not in this CL.  We can probably remove it as dead code separately.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
File content/public/browser/child_process_security_policy.h (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h#newcode135" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
content/public/browser/child_process_security_policy.h:135: // provided scheme
and host.
On 2015/09/22 22:13:57, Paul Meyer wrote:
&gt; On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; &gt; Maybe we should be using url::Origins here, rather than pairs of strings? 
&gt; (GURL
&gt; &gt; is also an option, but I&#39;d prefer not to allow granting of individual URLs
&gt; with
&gt; &gt; paths unless we need to.)
&gt; &gt; 
&gt; &gt; On that note, perhaps it should be called GrantOrigin.
&gt; 
&gt; Done and done.

Please use url::Origins rather than strings (same in the impl file).</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc File content/browser/child_process_security_policy_impl.cc (right): https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode108 content/browser/child_process_security_policy_impl.cc:108: void RevokeSchemeHost(const std::string&amp; scheme, const std::string&amp; host) { On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-23 17:03:54 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            ><a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
File content/browser/child_process_security_policy_impl.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_process_security_policy_impl.cc#newcode108" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/browser/child_p...</a>
content/browser/child_process_security_policy_impl.cc:108: void
RevokeSchemeHost(const std::string&amp; scheme, const std::string&amp; host) {
On 2015/09/23 00:07:15, Charlie Reis wrote:
&gt; On 2015/09/22 22:13:57, Paul Meyer wrote:
&gt; &gt; On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; &gt; &gt; We shouldn&#39;t introduce new methods until they&#39;re needed.
&gt; &gt; 
&gt; &gt; I was thinking the same thing, though RevokeScheme is exactly the same
&gt; situation
&gt; &gt; (it is not currently used). Should I also remove RevokeScheme?
&gt; 
&gt; Not in this CL.  We can probably remove it as dead code separately.

Acknowledged.

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
File content/public/browser/child_process_security_policy.h (right):

<a href="https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/child_process_security_policy.h#newcode135" rel="nofollow">https://codereview.chromium.org/1362433002/diff/20001/content/public/browser/...</a>
content/public/browser/child_process_security_policy.h:135: // provided scheme
and host.
On 2015/09/23 00:07:15, Charlie Reis wrote:
&gt; On 2015/09/22 22:13:57, Paul Meyer wrote:
&gt; &gt; On 2015/09/22 17:38:15, Charlie Reis wrote:
&gt; &gt; &gt; Maybe we should be using url::Origins here, rather than pairs of strings? 
&gt; &gt; (GURL
&gt; &gt; &gt; is also an option, but I&#39;d prefer not to allow granting of individual URLs
&gt; &gt; with
&gt; &gt; &gt; paths unless we need to.)
&gt; &gt; &gt; 
&gt; &gt; &gt; On that note, perhaps it should be called GrantOrigin.
&gt; &gt; 
&gt; &gt; Done and done.
&gt; 
&gt; Please use url::Origins rather than strings (same in the impl file).

Sorry, I misunderstood. Now using url::Origin.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Charlie Reis</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          [+kalman,rdevlin.cronin to CC] nit: Let&#39;s also list bug 226927 in the CL description, since this ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-23 22:57:13 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            >[+kalman,rdevlin.cronin to CC]

nit: Let&#39;s also list bug 226927 in the CL description, since this resolves that
TODO as well.

Thanks, this looks much better.  I see you mention on the bug that existing
tests pass with this, so hopefully it won&#39;t regress the chrome.tabs behavior. 
(It would have been fine to run try jobs with these patch sets, even before you
added the new tests-- that would help us confirm the change itself isn&#39;t a
problem.)

I think I&#39;m happy with the change now-- I&#39;ll approve once the tests are added.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode50" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:50:
url::Origin origin = url::Origin::UnsafelyCreateOriginWithoutNormalization(
Sounds like that&#39;s not a preferred way to create Origins, apart from IPC
messages.  Why not create a GURL from a string of the scheme and host, and then
convert that to Origin, similar to below?

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:56: //
Extensions, legacy packaged apps, and platform apps are allowed to use
nit: component platform apps</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Devlin</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          rdevlin.cronin@chromium.org changed reviewers: + rdevlin.cronin@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-23 23:14:16 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            ><a href="mailto:rdevlin.cronin@chromium.org">rdevlin.cronin@chromium.org</a> changed reviewers:
+ <a href="mailto:rdevlin.cronin@chromium.org">rdevlin.cronin@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Devlin</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          Looks pretty good, just a few nits. https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode43 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:43: Manifest::Type type ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-23 23:14:17 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-10"
            >Looks pretty good, just a few nits.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode43" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:43:
Manifest::Type type = extension-&gt;GetType();
won&#39;t need this.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode48" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:48: if (type
== Manifest::TYPE_EXTENSION &amp;&amp;
extension-&gt;is_extension()

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode49" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:49:
extension-&gt;location() == Manifest::COMPONENT) {
Manifest::IsComponentLocation(extension-&gt;location())

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
content::ChildProcessSecurityPolicy::GetInstance()-&gt;GrantOrigin(
This would be less verbose if we cached it.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode60" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:60: if (type
== Manifest::TYPE_EXTENSION ||
is_extension(), analogous for below

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode70" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:70:
ExtensionWebContentsObserver::RenderViewCreated(render_view_host);
I think I&#39;d prefer to do this initialization first.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          Patchset #4 (id:100001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-29 17:24:09 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-11"
            >Patchset #4 (id:100001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          Patchset #4 (id:120001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-29 17:24:14 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-12"
            >Patchset #4 (id:120001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          PTAL https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode43 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:43: Manifest::Type type = extension-&gt;GetType(); On 2015/09/23 23:14:17, Devlin ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-29 17:24:56 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-13"
            >PTAL

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode43" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:43:
Manifest::Type type = extension-&gt;GetType();
On 2015/09/23 23:14:17, Devlin wrote:
&gt; won&#39;t need this.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode48" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:48: if (type
== Manifest::TYPE_EXTENSION &amp;&amp;
On 2015/09/23 23:14:17, Devlin wrote:
&gt; extension-&gt;is_extension()

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode49" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:49:
extension-&gt;location() == Manifest::COMPONENT) {
On 2015/09/23 23:14:17, Devlin wrote:
&gt; Manifest::IsComponentLocation(extension-&gt;location())

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
content::ChildProcessSecurityPolicy::GetInstance()-&gt;GrantOrigin(
On 2015/09/23 23:14:17, Devlin wrote:
&gt; This would be less verbose if we cached it.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:56: //
Extensions, legacy packaged apps, and platform apps are allowed to use
On 2015/09/23 22:57:14, Charlie Reis wrote:
&gt; nit: component platform apps

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode60" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:60: if (type
== Manifest::TYPE_EXTENSION ||
On 2015/09/23 23:14:17, Devlin wrote:
&gt; is_extension(), analogous for below

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode70" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:70:
ExtensionWebContentsObserver::RenderViewCreated(render_view_host);
On 2015/09/23 23:14:17, Devlin wrote:
&gt; I think I&#39;d prefer to do this initialization first.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          PTAL https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode48 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:48: if (type == Manifest::TYPE_EXTENSION &amp;&amp; On 2015/09/23 23:14:17, ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-29 17:24:56 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-14"
            >PTAL

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode48" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:48: if (type
== Manifest::TYPE_EXTENSION &amp;&amp;
On 2015/09/23 23:14:17, Devlin wrote:
&gt; extension-&gt;is_extension()

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
content::ChildProcessSecurityPolicy::GetInstance()-&gt;GrantOrigin(
On 2015/09/23 23:14:17, Devlin wrote:
&gt; This would be less verbose if we cached it.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:56: //
Extensions, legacy packaged apps, and platform apps are allowed to use
On 2015/09/23 22:57:14, Charlie Reis wrote:
&gt; nit: component platform apps

Done.

<a href="https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode70" rel="nofollow">https://codereview.chromium.org/1362433002/diff/80001/chrome/browser/extensio...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:70:
ExtensionWebContentsObserver::RenderViewCreated(render_view_host);
On 2015/09/23 23:14:17, Devlin wrote:
&gt; I think I&#39;d prefer to do this initialization first.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Devlin</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          extensions lgtm https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52: base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme, nit: Why SStringPrintf, instead ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-29 19:06:30 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-15"
            >extensions lgtm

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
nit: Why SStringPrintf, instead of just StringPrintf?

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
nit: Also kStandardSchemeSeparator

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
And, both those said, I actually wouldn&#39;t be opposed to just adding a
chrome::kChromeUIResourcesURL, but I&#39;ll defer to other people&#39;s opinions there.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Charlie Reis</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          Thanks for the tests! LGTM with nits. https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52: base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-29 22:15:53 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-16"
            >Thanks for the tests!  LGTM with nits.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
On 2015/09/29 19:06:30, Devlin wrote:
&gt; And, both those said, I actually wouldn&#39;t be opposed to just adding a
&gt; chrome::kChromeUIResourcesURL, but I&#39;ll defer to other people&#39;s opinions
there.

I&#39;d be happy with that, similar to kChromeUINetworkViewCacheURL and 
kChromeUINetworkViewCacheHost.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
File chrome/browser/pdf/pdf_extension_test.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode403" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
chrome/browser/pdf/pdf_extension_test.cc:403: rph-&gt;FilterURL(true,
&amp;invalid_link_url);
Hmm, is there no way to attempt to request the resource instead?  This is better
than nothing, but it doesn&#39;t guarantee that we&#39;re actually calling FilterURL in
the cases that matter.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode406" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
chrome/browser/pdf/pdf_extension_test.cc:406: ASSERT_EQ(valid_link_url,
unfiltered_valid_link_url);
nit: Use EXPECT_EQ for test expectations (so that the test keeps running) and
ASSERT_EQ for mandatory preconditions (if the test can&#39;t proceed sensibly).

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode407" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
chrome/browser/pdf/pdf_extension_test.cc:407: ASSERT_EQ(invalid_link_url,
GURL(&quot;about:blank&quot;));
nit: The arguments should be (expected, actual), so flip the order.

<a href="https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_process_security_policy_unittest.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_...</a>
File content/browser/child_process_security_policy_unittest.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_process_security_policy_unittest.cc#newcode713" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_...</a>
content/browser/child_process_security_policy_unittest.cc:713:
EXPECT_FALSE(p-&gt;CanCommitURL(kRendererID, url_foo1));
nit: Let&#39;s also include CanRequestURL calls, similar to StandardSchemesTest,
etc.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-17">
                          paulmeyer@chromium.org changed reviewers: + raymes@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 14:21:30 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-17"
            ><a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a> changed reviewers:
+ <a href="mailto:raymes@chromium.org">raymes@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg19"
           name="18">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(18)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-18">
                          +raymes@ for OWNER review of pdf_extension_test.cc https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc File chrome/browser/extensions/chrome_extension_web_contents_observer.cc (right): https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52 chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52: base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme, ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 14:21:31 UTC)
                <a href="#msg19">#19</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-18"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-18"
            >+raymes@ for OWNER review of pdf_extension_test.cc

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
File chrome/browser/extensions/chrome_extension_web_contents_observer.cc
(right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
On 2015/09/29 22:15:53, Charlie Reis wrote:
&gt; On 2015/09/29 19:06:30, Devlin wrote:
&gt; &gt; And, both those said, I actually wouldn&#39;t be opposed to just adding a
&gt; &gt; chrome::kChromeUIResourcesURL, but I&#39;ll defer to other people&#39;s opinions
&gt; there.
&gt; 
&gt; I&#39;d be happy with that, similar to kChromeUINetworkViewCacheURL and 
&gt; kChromeUINetworkViewCacheHost.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
On 2015/09/29 19:06:30, Devlin wrote:
&gt; And, both those said, I actually wouldn&#39;t be opposed to just adding a
&gt; chrome::kChromeUIResourcesURL, but I&#39;ll defer to other people&#39;s opinions
there.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
On 2015/09/29 19:06:30, Devlin wrote:
&gt; nit: Also kStandardSchemeSeparator

Acknowledged.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensions/chrome_extension_web_contents_observer.cc#newcode52" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/extensi...</a>
chrome/browser/extensions/chrome_extension_web_contents_observer.cc:52:
base::SStringPrintf(&amp;origin_url, &quot;%s://%s/&quot;, content::kChromeUIScheme,
On 2015/09/29 19:06:30, Devlin wrote:
&gt; nit: Why SStringPrintf, instead of just StringPrintf?

No particular reason, but I&#39;m taking it out anyways.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
File chrome/browser/pdf/pdf_extension_test.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode403" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
chrome/browser/pdf/pdf_extension_test.cc:403: rph-&gt;FilterURL(true,
&amp;invalid_link_url);
On 2015/09/29 22:15:53, Charlie Reis wrote:
&gt; Hmm, is there no way to attempt to request the resource instead?  This is
better
&gt; than nothing, but it doesn&#39;t guarantee that we&#39;re actually calling FilterURL
in
&gt; the cases that matter.

The issue behind this bug is that context menus allowed link URLs to go through
that shouldn&#39;t. This only happened because of a problem within FilterURL, so I
am testing that.

I originally created a PDF with these links on it, and was going to open context
menus on them both and check the links that the menus picked up, but it turned
out that writing the test that way was really finicky, and the context menus
often didn&#39;t act as if they&#39;d been opened on links even if they were opened in
exactly the right spot. I feel like a test like that would also be really
fragile in the future, because it relies upon the links being at set coordinates
that could change easily if the layout of the pdf viewer ever changed.

I think this test should be sufficient for testing against the regression of
this particular bug, and is also very reliable.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode406" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
chrome/browser/pdf/pdf_extension_test.cc:406: ASSERT_EQ(valid_link_url,
unfiltered_valid_link_url);
On 2015/09/29 22:15:53, Charlie Reis wrote:
&gt; nit: Use EXPECT_EQ for test expectations (so that the test keeps running) and
&gt; ASSERT_EQ for mandatory preconditions (if the test can&#39;t proceed sensibly).

Done.

<a href="https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode407" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/chrome/browser/pdf/pdf...</a>
chrome/browser/pdf/pdf_extension_test.cc:407: ASSERT_EQ(invalid_link_url,
GURL(&quot;about:blank&quot;));
On 2015/09/29 22:15:53, Charlie Reis wrote:
&gt; nit: The arguments should be (expected, actual), so flip the order.

Done.

<a href="https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_process_security_policy_unittest.cc" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_...</a>
File content/browser/child_process_security_policy_unittest.cc (right):

<a href="https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_process_security_policy_unittest.cc#newcode713" rel="nofollow">https://codereview.chromium.org/1362433002/diff/140001/content/browser/child_...</a>
content/browser/child_process_security_policy_unittest.cc:713:
EXPECT_FALSE(p-&gt;CanCommitURL(kRendererID, url_foo1));
On 2015/09/29 22:15:53, Charlie Reis wrote:
&gt; nit: Let&#39;s also include CanRequestURL calls, similar to StandardSchemesTest,
&gt; etc.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg20"
           name="19">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(19)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-19">
                          The CQ bit was checked by paulmeyer@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 14:26:38 UTC)
                <a href="#msg20">#20</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-19"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-19"
            >The CQ bit was checked by <a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg21"
           name="20">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(20)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-20">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1362433002/160001 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1362433002/160001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 14:27:32 UTC)
                <a href="#msg21">#21</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-20"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-20"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1362433002/160001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1362433002/160001</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1362433002/160001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1362433002/160001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg22"
           name="21">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(21)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-21">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 15:54:34 UTC)
                <a href="#msg22">#22</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-21"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-21"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg23"
           name="22">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(22)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-22">
                          Dry run: Try jobs failed on following builders: linux_chromium_chromeos_rel_ng on tryserver.chromium.linux (JOB_FAILED, http://build.chromium.org/p/tryserver.chromium.linux/builders/linux_chromium_chromeos_rel_ng/builds/109874)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 15:54:34 UTC)
                <a href="#msg23">#23</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-22"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-22"
            >Dry run: Try jobs failed on following builders:
  linux_chromium_chromeos_rel_ng on tryserver.chromium.linux (JOB_FAILED,
<a href="http://build.chromium.org/p/tryserver.chromium.linux/builders/linux_chromium_chromeos_rel_ng/builds/109874" rel="nofollow">http://build.chromium.org/p/tryserver.chromium.linux/builders/linux_chromium_...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg24"
           name="23">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(23)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-23">
                          The CQ bit was checked by paulmeyer@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 18:24:27 UTC)
                <a href="#msg24">#24</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-23"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-23"
            >The CQ bit was checked by <a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg25"
           name="24">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(24)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-24">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1362433002/180001 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1362433002/180001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 18:27:36 UTC)
                <a href="#msg25">#25</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-24"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-24"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1362433002/180001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1362433002/180001</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1362433002/180001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1362433002/180001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg26"
           name="25">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(25)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-25">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 18:48:27 UTC)
                <a href="#msg26">#26</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-25"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-25"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg27"
           name="26">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(26)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-26">
                          Dry run: Try jobs failed on following builders: win_chromium_compile_dbg_ng on tryserver.chromium.win (JOB_FAILED, http://build.chromium.org/p/tryserver.chromium.win/builders/win_chromium_compile_dbg_ng/builds/89668)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 18:48:28 UTC)
                <a href="#msg27">#27</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-26"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-26"
            >Dry run: Try jobs failed on following builders:
  win_chromium_compile_dbg_ng on tryserver.chromium.win (JOB_FAILED,
<a href="http://build.chromium.org/p/tryserver.chromium.win/builders/win_chromium_compile_dbg_ng/builds/89668" rel="nofollow">http://build.chromium.org/p/tryserver.chromium.win/builders/win_chromium_comp...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg28"
           name="27">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(27)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Charlie Reis</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-27">
                          https://chromiumcodereview.appspot.com/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc File chrome/browser/pdf/pdf_extension_test.cc (right): https://chromiumcodereview.appspot.com/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode403 chrome/browser/pdf/pdf_extension_test.cc:403: rph-&gt;FilterURL(true, &amp;invalid_link_url); On 2015/09/30 14:21:31, Paul Meyer wrote: &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 20:39:17 UTC)
                <a href="#msg28">#28</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-27"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-27"
            ><a href="https://chromiumcodereview.appspot.com/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc" rel="nofollow">https://chromiumcodereview.appspot.com/1362433002/diff/140001/chrome/browser/...</a>
File chrome/browser/pdf/pdf_extension_test.cc (right):

<a href="https://chromiumcodereview.appspot.com/1362433002/diff/140001/chrome/browser/pdf/pdf_extension_test.cc#newcode403" rel="nofollow">https://chromiumcodereview.appspot.com/1362433002/diff/140001/chrome/browser/...</a>
chrome/browser/pdf/pdf_extension_test.cc:403: rph-&gt;FilterURL(true,
&amp;invalid_link_url);
On 2015/09/30 14:21:31, Paul Meyer wrote:
&gt; On 2015/09/29 22:15:53, Charlie Reis wrote:
&gt; &gt; Hmm, is there no way to attempt to request the resource instead?  This is
&gt; better
&gt; &gt; than nothing, but it doesn&#39;t guarantee that we&#39;re actually calling FilterURL
&gt; in
&gt; &gt; the cases that matter.
&gt; 
&gt; The issue behind this bug is that context menus allowed link URLs to go
through
&gt; that shouldn&#39;t. This only happened because of a problem within FilterURL, so I
&gt; am testing that.
&gt; 
&gt; I originally created a PDF with these links on it, and was going to open
context
&gt; menus on them both and check the links that the menus picked up, but it turned
&gt; out that writing the test that way was really finicky, and the context menus
&gt; often didn&#39;t act as if they&#39;d been opened on links even if they were opened in
&gt; exactly the right spot. I feel like a test like that would also be really
&gt; fragile in the future, because it relies upon the links being at set
coordinates
&gt; that could change easily if the layout of the pdf viewer ever changed.
&gt; 
&gt; I think this test should be sufficient for testing against the regression of
&gt; this particular bug, and is also very reliable.

Acknowledged.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg29"
           name="28">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(28)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-28">
                          The CQ bit was checked by paulmeyer@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 22:03:22 UTC)
                <a href="#msg29">#29</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-28"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-28"
            >The CQ bit was checked by <a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg30"
           name="29">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(29)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-29">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1362433002/200001 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1362433002/200001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 22:04:09 UTC)
                <a href="#msg30">#30</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-29"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-29"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1362433002/200001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1362433002/200001</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1362433002/200001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1362433002/200001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg31"
           name="30">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(30)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-30">
                          Patchset #7 (id:200001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 22:09:56 UTC)
                <a href="#msg31">#31</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-30"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-30"
            >Patchset #7 (id:200001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg32"
           name="31">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(31)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-31">
                          The CQ bit was checked by paulmeyer@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 22:10:10 UTC)
                <a href="#msg32">#32</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-31"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-31"
            >The CQ bit was checked by <a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg33"
           name="32">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(32)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-32">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1362433002/220001 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1362433002/220001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 22:11:27 UTC)
                <a href="#msg33">#33</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-32"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-32"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1362433002/220001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1362433002/220001</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1362433002/220001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1362433002/220001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg34"
           name="33">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(33)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-33">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 23:48:14 UTC)
                <a href="#msg34">#34</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-33"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-33"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg35"
           name="34">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(34)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-34">
                          Dry run: This issue passed the CQ dry run.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-09-30 23:48:14 UTC)
                <a href="#msg35">#35</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-34"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-34"
            >Dry run: This issue passed the CQ dry run.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg36"
           name="35">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(35)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>raymes</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-35">
                          lgtm
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-01 01:40:36 UTC)
                <a href="#msg36">#36</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-35"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-35"
            >lgtm</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg37"
           name="36">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(36)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-36">
                          The CQ bit was checked by paulmeyer@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-01 02:02:53 UTC)
                <a href="#msg37">#37</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-36"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-36"
            >The CQ bit was checked by <a href="mailto:paulmeyer@chromium.org">paulmeyer@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg38"
           name="37">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(37)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>paulmeyer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-37">
                          The patchset sent to the CQ was uploaded after l-g-t-m from creis@chromium.org, rdevlin.cronin@chromium.org Link to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-01 02:02:53 UTC)
                <a href="#msg38">#38</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-37"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-37"
            >The patchset sent to the CQ was uploaded after l-g-t-m from <a href="mailto:creis@chromium.org">creis@chromium.org</a>,
<a href="mailto:rdevlin.cronin@chromium.org">rdevlin.cronin@chromium.org</a>
Link to the patchset:
<a href="https://chromiumcodereview.appspot.com/1362433002/#ps220001" rel="nofollow">https://chromiumcodereview.appspot.com/1362433002/#ps220001</a> (title: &quot;Small
fix.&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg39"
           name="38">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(38)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-38">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1362433002/220001 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1362433002/220001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-01 02:05:00 UTC)
                <a href="#msg39">#39</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-38"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-38"
            >CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1362433002/220001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1362433002/220001</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1362433002/220001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1362433002/220001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg40"
           name="39">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(39)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-39">
                          Committed patchset #7 (id:220001)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-01 02:11:21 UTC)
                <a href="#msg40">#40</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-39"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-39"
            >Committed patchset #7 (id:220001)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg41"
           name="40">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(40)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-40">
                          Patchset 7 (id:??) landed as https://crrev.com/1eefa26e1795192c5a347a1e1e7a99e88c47f9c4 Cr-Commit-Position: refs/heads/master@{#351705}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-01 02:12:07 UTC)
                <a href="#msg41">#41</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-40"
             >
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-40"
            >Patchset 7 (id:??) landed as
<a href="https://crrev.com/1eefa26e1795192c5a347a1e1e7a99e88c47f9c4" rel="nofollow">https://crrev.com/1eefa26e1795192c5a347a1e1e7a99e88c47f9c4</a>
Cr-Commit-Position: refs/heads/master@{#351705}</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 41)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 41)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(41)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(41)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 41;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 1362433002;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 1362433002: Fix for &quot;chrome://&quot; links in PDFs.
     (Closed) </b><br/>
      Created 5 years, 3 months ago by paulmeyer<br/>
      Modified 5 years, 2 months ago<br/>
      Reviewers: Charlie Reis, Devlin, raymes<br/>
      Base URL: https://chromium.googlesource.com/chromium/src.git@master<br/>
      Comments: 53
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
