<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

  

<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NL48VKT');</script>
  <!-- End Google Tag Manager -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Kong Gateway (Enterprise) Changelog | Kong Docs</title>
  <meta name="description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices." />
  <meta name="author" content="KongHQ" />
  <meta property="og:title" content="Kong Gateway (Enterprise) Changelog | Kong Docs" />
  <meta property="og:site_name" content="Kong Docs" />
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com" />
  <meta property="og:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_US" />
  <meta
    property="og:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@thekonginc" />
  <meta name="twitter:creator" content="@thekonginc" />
  <meta name="twitter:url" content="https://docs.konghq.com" />
  <meta name="twitter:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices." />
  <meta
    name="twitter:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta property="fb:admins" content="227304446" />
  <meta property="fb:admins" content="576641408" />
  <meta
    name="google-site-verification"
    content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
    integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
    crossorigin="anonymous"
  />

  <!-- New Relic -->
  <script type="text/javascript">
/* eslint-disable */
window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(20),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,c){try{h?h-=1:o(c||new UncaughtException(t,e,n),!0)}catch(f){try{i("ierr",[f,s.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t,e){var n=e?null:s.now();i("err",[t,n])}var i=t("handle"),a=t(21),c=t("ee"),s=t("loader"),f=t("gos"),u=window.onerror,d=!1,p="nr@seenError",h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(13),t(12),"addEventListener"in window&&t(6),s.xhrWrappable&&t(14),d=!0)}c.on("fn-start",function(t,e,n){d&&(h+=1)}),c.on("fn-err",function(t,e,n){d&&!n[p]&&(f(n,p,function(){return!0}),this.thrown=!0,o(n))}),c.on("fn-end",function(){d&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){M++,S=y.hash,this[u]=b.now()}function o(){M--,y.hash!==S&&i(0,!0);var t=b.now();this[l]=~~this[l]+t-this[u],this[d]=t}function i(t,e){E.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=b.now()})}var c="-start",s="-end",f="-body",u="fn"+c,d="fn"+s,p="cb"+c,h="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location,b=t("loader");if(w[v]&&b.xhrWrappable){var g=t(10),x=t(11),E=t(8),P=t(6),O=t(13),R=t(7),T=t(14),L=t(9),j=t("ee"),N=j.get("tracer");t(15),b.features.spa=!0;var S,M=0;j.on(u,r),j.on(p,r),j.on(d,o),j.on(h,o),j.buffer([u,d,"xhr-done","xhr-resolved"]),P.buffer([u]),O.buffer(["setTimeout"+s,"clearTimeout"+c,u]),T.buffer([u,"new-xhr","send-xhr"+c]),R.buffer([m+c,m+"-done",m+f+c,m+f+s]),E.buffer(["newURL"]),g.buffer([u]),x.buffer(["propagate",p,h,"executor-err","resolve"+c]),N.buffer([u,"no-"+u]),L.buffer(["new-jsonp","cb-start","jsonp-error","jsonp-end"]),a(T,"send-xhr"+c),a(j,"xhr-resolved"),a(j,"xhr-done"),a(R,m+c),a(R,m+"-done"),a(L,"new-jsonp"),a(L,"jsonp-end"),a(L,"cb-start"),E.on("pushState-end",i),E.on("replaceState-end",i),w[v]("hashchange",i,!0),w[v]("load",i,!0),w[v]("popstate",function(){i(0,M>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(13),c=t(12),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",h="-start",l="-end",m="fn"+h,v="fn"+l,w="bstTimer",y="pushState",b=t("loader");b.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=b.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,b.now()])}),a.on(m,function(t,e,n){this.bstStart=b.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),this.bstType])}),c.on(m,function(){this.bstStart=b.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),"requestAnimationFrame"])}),o.on(y+h,function(t){this.time=b.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(23)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(20);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,h="prototype";u&&d&&p&&(i(f,function(t,e){r(u[h],e,s),r(d[h],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(23)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){function r(t){function e(){s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}function n(){s.emit("jsonp-error",[],p),s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}var r=t&&"string"==typeof t.nodeName&&"script"===t.nodeName.toLowerCase();if(r){var o="function"==typeof t.addEventListener;if(o){var a=i(t.src);if(a){var u=c(a),d="function"==typeof u.parent[u.key];if(d){var p={};f.inPlace(u.parent,[u.key],"cb-",p),t.addEventListener("load",e,!1),t.addEventListener("error",n,!1),s.emit("new-jsonp",[t.src],p)}}}}}function o(){return"addEventListener"in window}function i(t){var e=t.match(u);return e?e[1]:null}function a(t,e){var n=t.match(p),r=n[1],o=n[3];return o?a(o,e[r]):e[r]}function c(t){var e=t.match(d);return e&&e.length>=3?{key:e[2],parent:a(e[1],window)}:{key:t,parent:window}}var s=t("ee").get("jsonp"),f=t(23)(s);if(e.exports=s,o()){var u=/[?&](?:callback|cb)=([^&#]+)/,d=/(.*)\.([^.]+)/,p=/^(\w+)(\.|$)(.*)$/,h=["appendChild","insertBefore","replaceChild"];f.inPlace(HTMLElement.prototype,h,"dom-"),f.inPlace(HTMLHeadElement.prototype,h,"dom-"),f.inPlace(HTMLBodyElement.prototype,h,"dom-"),s.on("dom-start",function(t){r(t[0])})}},{}],10:[function(t,e,n){var r=t("ee").get("mutation"),o=t(23)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],11:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(23),a=t("ee").get("promise"),c=i(a),s=t(20),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],12:[function(t,e,n){var r=t("ee").get("raf"),o=t(23)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],13:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(23)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],14:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",c)}function i(t){b.push(t),l&&(x?x.then(a):v?v(a):(E=-E,P.data=E))}function a(){for(var t=0;t<b.length;t++)r([],b[t]);b.length&&(b=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(23)(u),p=NREUM.o,h=p.XHR,l=p.MO,m=p.PR,v=p.SI,w="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],b=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new h(t);try{u.emit("new-xhr",[e],e),e.addEventListener(w,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(h,g),g.prototype=h.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var x=m&&m.resolve();if(!v&&!m){var E=1,P=document.createTextNode(E);new l(a).observe(P,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===w||a()})},{}],15:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(16),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,p=t("id"),h=t(19),l=t(18),m=window.XMLHttpRequest;a.features.xhr=!0,t(14),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],16:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],17:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(20),c=t(21),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",h=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var l=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(h+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}catch(t){throw s.emit("fn-err",[arguments,this,t],n),t}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){l[e]=o(h+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],18:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],19:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],20:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],21:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],22:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],23:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(21),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),c=l(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[y[n]];return d&&d.push([b,n,r,a]),a}}function h(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},b={on:h,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return b}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var c="nr@context",s=t("gos"),f=t(20),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!x++){var t=g.info=NREUM.info,e=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(y,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+g.offset],null,"api");var n=p.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===p.readyState&&i()}function i(){s("mark",["domContent",a()+g.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-g.offset}var c=(new Date).getTime(),s=t("handle"),f=t(20),u=t("ee"),d=window,p=d.document,h="addEventListener",l="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1071.min.js"},b=m&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:c,now:a,origin:w,features:{},xhrWrappable:b};t(17),p[h]?(p[h]("DOMContentLoaded",i,!1),d[h]("load",r,!1)):(p[l]("onreadystatechange",o),d[l]("onload",r)),s("mark",["firstbyte",c],null,"api");var x=0,E=t(22)},{}]},{},["loader",2,15,5,3,4]);
;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"13e44ec848",applicationID:"187820761",sa:1}
</script>


  <!-- FullStory -->
  <!-- <script>
/* eslint-disable */
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '7JS2S';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};g.event=function(i,v){g('event',{n:i,p:v})};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
</script>
 -->

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="//cloud.typography.com" />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700"
    rel="stylesheet"
  />
  <link rel="dns-prefetch" href="//dev.visualwebsiteoptimizer.com" />
  <link rel="dns-prefetch" href="//cdn.segment.com" />

  <!-- Recaptcha -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <!-- ##gulp-resource-hints## -->

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
  />
  <link
    rel="stylesheet"
    href="/assets/styles.css?v=1635454550"
  />

  
  

  

</head>

<!-- Kong Cookie Policy -->
<div class="cookie-policy-container">
  <p>In order to give you better service, we use cookies. By continuing to use our website, you agree to the use of cookies as described in our <a href=" https://konghq.com/cookie-policy/">Cookie Policy</a>.
  <button class="cookie-policy-accept btn button" type="submit" tabindex="0">I agree</button>
</div>



  <body
    id=""
    
    data-spy="scroll"
    data-target="#scroll-sidebar"
    data-offset="350"
  >

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NL48VKT"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="navbar-v2 closed">
  <a class="skip-main" href="#main">Skip to content</a>
  <!-- uncomment the promo-banner div when adding a new promo banner
  <!--also uncomment the promo banner sections in app/assets/stylesheets/header.less and gulpfile.js-->
  <!-- <div id="promo-banner">
    <div class="container">
      <div class="closebanner"></div> <strong><label>EVENT</label> Join the Kong Summit Hackathon &nbsp;&mdash;<a target="_blank"
          href="https://konghq.com/summit-hackathon">Start Hacking &rarr;</a></strong>
    </div>
  </div> -->
  <div class="navbar-content">
    <a href="https://konghq.com" class="navbar-brand col col-xl-auto">
      <img src="/assets/images/logos/kong-logo-blue.svg" alt="Kong Logo" id="kong-logo">
    </a>
    <span class="logo-divider">|</span>
    <a href="/" class="navbar-brand col col-xl-auto">
      <img src="/assets/images/logos/docs-logo-steel.svg" alt="Kong Docs Logo" id="kong-docs-logo">
    </a>
    
    <div class="separator mobile"></div>
    <div class="search-input-wrapper">
      <img src="/assets/images/landing-page/search.svg" alt="search" onclick="handleSearchClicked()">
      <input id="getkong-algolia-search-input" type="text" role="search" placeholder="Search the docs...">
    </div>

    <div class="search-results-wrapper"></div>
    
    <div class="separator"></div>
    <div class="navbar-items" role="navigation" aria-label="Main menu">
      <ul class="navbar-items" role="menubar">
        <li aria-haspopup="true" role="menuitem"
          class="navbar-item main-menu-item with-submenu active"
          onclick="toggleSubmenuVisible(this)">
          <a href="/" tabindex="0" id="docs-link">Docs</a>
          <span class="caret"></span>
          <ul class="navbar-item-submenu" role="menu" aria-hidden="true">
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Kong Konnect Platform</span>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/konnect-platform/" class="navbar-item navbar-item-docs">Konnect Platform</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/konnect/" class="navbar-item navbar-item-docs">Konnect Cloud</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/enterprise/" class="navbar-item navbar-item-docs">Kong Gateway (Enterprise)</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/mesh/" class="navbar-item navbar-item-docs">Kong Mesh</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/hub/" class="navbar-item navbar-item-docs">Plugin Hub</a>
              </li>
            </div>
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Open Source</span>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/gateway-oss/" class="navbar-item navbar-item-docs">Kong Gateway (OSS)</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/deck/" class="navbar-item navbar-item-docs">decK</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/kubernetes-ingress-controller/" class="navbar-item navbar-item-docs">Kubernetes Ingress
                  Controller</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="https://support.insomnia.rest/" target="_blank"
                  class="navbar-item navbar-item-docs">Insomnia</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="https://kuma.io/docs/" target="_blank" class="navbar-item navbar-item-docs">Kuma</a>
              </li>
            </div>
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Contribute to the docs</span>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/contributing/" class="navbar-item navbar-item-docs">Contribution guidelines</a>
              </li>
            </div>
          </ul>
        </li>
        <li role="menuitem" tabindex="0" id="support-link" class="main-menu-item">
          <a href="https://support.konghq.com/" class="navbar-item">Support</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://konghq.com/community/" class="navbar-item">Community</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://education.konghq.com/" class="navbar-item">Kong Academy</a>
        </li>
      </ul>
      <a href="https://konghq.com/get-started/?itm_source=website&amp;itm_medium=nav" class="navbar-button">
        Get Started
      </a>
    </div>
    <div id="navbar-menu-toggle-button" class="small-screen-button" aria-label="Toggle navigation"
      onclick="toggleButtonClicked()">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</header>


<style>
  @media (max-width: 768px) {
    .algolia-docsearch-suggestion--subcategory-column {
      display: none !important;
    }

    .algolia-autocomplete .ds-dropdown-menu {
      max-width: calc(100% + 40px);
      min-width: 300px;
    }

    .algolia-autocomplete.algolia-autocomplete-left .ds-dropdown-menu {
      left: -40px !important;
    }

    .algolia-autocomplete.algolia-autocomplete-left .ds-dropdown-menu:before {
      left: 88px;
    }
  }
</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

<script type="text/javascript">
  docsearch({
    appId: 'T5JKD83LWT',
    apiKey: '1390283021f26e36117242934deb8d9d',
    indexName: 'prod_Full_Docs',
    inputSelector: '#getkong-algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 8
    },
    // Override selected event to allow for local environment navigation
    handleSelected: function (input, event, suggestion) {
      input.setVal('')
      window.location.href = window.location.protocol + '//' + window.location.host + suggestion.url.split('docs.konghq.com')[1]
    }
    // ,debug: true // Set debug to true if you want to inspect the dropdown
  })
</script>



    


<div class="page v2 " data-url=/enterprise/changelog/>

  <div class="container">
    


    
      <aside class="docs-toc">
        <i class="fa fa-times close-sidebar"></i>
        <i class="fa fa-chevron-right collapse-toc"></i>
        <i class="far fa-list-alt expand-toc"></i>
        <div class="github-links">
          <p>
            <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/docs.konghq.com/edit/main/app/enterprise/changelog.md" target="_blank">
              <img src="/assets/images/logos/logo-github.svg" alt="github-edit-page"/>Edit this page</a>
          </p>
          <p>
            <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/docs.konghq.com/issues" target="_blank">
              <img src="/assets/images/icons/documentation/icn-monitoring-black.svg" alt="report-issue"/>Report an issue</a>
          </p>
        </div>
        <div class="docs-toc-title">
          <a href="#">On this page</a>
        </div>
        <ul>
  <li><a href="#2600" class="active scroll-to">2.6.0.0</a>
    <ul>
      <li><a href="#features" class="scroll-to">Features</a></li>
      <li><a href="#dependencies" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2600-beta1" class="scroll-to">2.6.0.0 (beta1)</a>
    <ul>
      <li><a href="#features-1" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-1" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-1" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2511" class="scroll-to">2.5.1.1</a>
    <ul>
      <li><a href="#fixes-2" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2510" class="scroll-to">2.5.1.0</a>
    <ul>
      <li><a href="#dependencies-2" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-3" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2502" class="scroll-to">2.5.0.2</a>
    <ul>
      <li><a href="#fixes-4" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2501" class="scroll-to">2.5.0.1</a>
    <ul>
      <li><a href="#fixes-5" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2500" class="scroll-to">2.5.0.0</a>
    <ul>
      <li><a href="#features-2" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-3" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-6" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2500-beta1" class="scroll-to">2.5.0.0 (beta1)</a>
    <ul>
      <li><a href="#features-3" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-4" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-7" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2413" class="scroll-to">2.4.1.3</a>
    <ul>
      <li><a href="#fixes-8" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2412" class="scroll-to">2.4.1.2</a>
    <ul>
      <li><a href="#fixes-9" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2411" class="scroll-to">2.4.1.1</a>
    <ul>
      <li><a href="#fixes-10" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2410" class="scroll-to">2.4.1.0</a>
    <ul>
      <li><a href="#features-4" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-5" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-11" class="scroll-to">Fixes</a></li>
      <li><a href="#deprecated" class="scroll-to">Deprecated</a></li>
      <li><a href="#known-issues" class="scroll-to">Known issues</a></li>
    </ul>
  </li>
  <li><a href="#2400-beta" class="scroll-to">2.4.0.0 (beta)</a>
    <ul>
      <li><a href="#features-5" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-6" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-12" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2334" class="scroll-to">2.3.3.4</a>
    <ul>
      <li><a href="#fixes-13" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2333" class="scroll-to">2.3.3.3</a>
    <ul>
      <li><a href="#fixes-14" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2332" class="scroll-to">2.3.3.2</a>
    <ul>
      <li><a href="#fixes-15" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2331" class="scroll-to">2.3.3.1</a>
    <ul>
      <li><a href="#features-6" class="scroll-to">Features</a></li>
      <li><a href="#fixes-16" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2330" class="scroll-to">2.3.3.0</a>
    <ul>
      <li><a href="#features-7" class="scroll-to">Features</a></li>
      <li><a href="#fixes-17" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2320" class="scroll-to">2.3.2.0</a>
    <ul>
      <li><a href="#kong-gateway-enterprise" class="scroll-to"><strong>Kong Gateway (Enterprise)</strong></a></li>
      <li><a href="#features-8" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-7" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-18" class="scroll-to">Fixes</a></li>
      <li><a href="#deprecated-1" class="scroll-to">Deprecated</a></li>
    </ul>
  </li>
  <li><a href="#2300-beta" class="scroll-to">2.3.0.0 (beta)</a>
    <ul>
      <li><a href="#kong-enterprise" class="scroll-to"><strong>Kong Enterprise</strong></a></li>
      <li><a href="#features-9" class="scroll-to">Features</a></li>
      <li><a href="#dependencies-8" class="scroll-to">Dependencies</a></li>
      <li><a href="#fixes-19" class="scroll-to">Fixes</a></li>
      <li><a href="#deprecated-2" class="scroll-to">Deprecated</a></li>
    </ul>
  </li>
  <li><a href="#2215" class="scroll-to">2.2.1.5</a>
    <ul>
      <li><a href="#fixes-20" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2214" class="scroll-to">2.2.1.4</a>
    <ul>
      <li><a href="#fixes-21" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2213" class="scroll-to">2.2.1.3</a></li>
  <li><a href="#2212" class="scroll-to">2.2.1.2</a>
    <ul>
      <li><a href="#fixes-22" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2211" class="scroll-to">2.2.1.1</a>
    <ul>
      <li><a href="#fixes-23" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2210" class="scroll-to">2.2.1.0</a>
    <ul>
      <li><a href="#features-10" class="scroll-to">Features</a></li>
      <li><a href="#fixes-24" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2200" class="scroll-to">2.2.0.0</a>
    <ul>
      <li><a href="#features-11" class="scroll-to">Features</a></li>
      <li><a href="#fixes-25" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2200-beta" class="scroll-to">2.2.0.0 (beta)</a>
    <ul>
      <li><a href="#kong-enterprise-1" class="scroll-to"><strong>Kong Enterprise</strong></a></li>
      <li><a href="#dependencies-9" class="scroll-to">Dependencies</a></li>
      <li><a href="#beta-features-2200" class="scroll-to">Features</a></li>
      <li><a href="#beta-fixes-2200" class="scroll-to">Fixes</a></li>
      <li><a href="#kong-gateway-oss" class="scroll-to"><strong>Kong Gateway (OSS)</strong></a></li>
      <li><a href="#dependencies-10" class="scroll-to">Dependencies</a></li>
      <li><a href="#additions" class="scroll-to">Additions</a></li>
      <li><a href="#deprecated-features" class="scroll-to">Deprecated Features</a></li>
    </ul>
  </li>
  <li><a href="#2147" class="scroll-to">2.1.4.7</a>
    <ul>
      <li><a href="#fixes-26" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2146" class="scroll-to">2.1.4.6</a>
    <ul>
      <li><a href="#fixes-27" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2145" class="scroll-to">2.1.4.5</a>
    <ul>
      <li><a href="#fixes-28" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2144" class="scroll-to">2.1.4.4</a>
    <ul>
      <li><a href="#fixes-29" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2143" class="scroll-to">2.1.4.3</a>
    <ul>
      <li><a href="#fixes-30" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2142" class="scroll-to">2.1.4.2</a>
    <ul>
      <li><a href="#fixes-31" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2141" class="scroll-to">2.1.4.1</a>
    <ul>
      <li><a href="#fixes-32" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2140" class="scroll-to">2.1.4.0</a>
    <ul>
      <li><a href="#fixes-33" class="scroll-to">Fixes</a></li>
      <li><a href="#deprecated-features-1" class="scroll-to">Deprecated Features</a></li>
    </ul>
  </li>
  <li><a href="#2131" class="scroll-to">2.1.3.1</a>
    <ul>
      <li><a href="#fixes-34" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#2130" class="scroll-to">2.1.3.0</a>
    <ul>
      <li><a href="#features-12" class="scroll-to">Features</a></li>
      <li><a href="#fixes-35" class="scroll-to">Fixes</a></li>
      <li><a href="#known-issues-and-workarounds" class="scroll-to">Known Issues and Workarounds</a></li>
    </ul>
  </li>
  <li><a href="#2100-beta" class="scroll-to">2.1.0.0 (beta)</a>
    <ul>
      <li><a href="#features-13" class="scroll-to">Features</a></li>
      <li><a href="#fixes-36" class="scroll-to">Fixes</a></li>
      <li><a href="#known-issues-and-workarounds-1" class="scroll-to">Known Issues and Workarounds</a></li>
    </ul>
  </li>
  <li><a href="#15011" class="scroll-to">1.5.0.11</a>
    <ul>
      <li><a href="#fixes-37" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#15010" class="scroll-to">1.5.0.10</a>
    <ul>
      <li><a href="#fixes-38" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1509" class="scroll-to">1.5.0.9</a>
    <ul>
      <li><a href="#fixes-39" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1508" class="scroll-to">1.5.0.8</a>
    <ul>
      <li><a href="#fixes-40" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1507" class="scroll-to">1.5.0.7</a>
    <ul>
      <li><a href="#fixes-41" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1506" class="scroll-to">1.5.0.6</a>
    <ul>
      <li><a href="#features-14" class="scroll-to">Features</a></li>
      <li><a href="#fixes-42" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1505" class="scroll-to">1.5.0.5</a>
    <ul>
      <li><a href="#fixes-43" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1504" class="scroll-to">1.5.0.4</a>
    <ul>
      <li><a href="#fixes-44" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1503" class="scroll-to">1.5.0.3</a>
    <ul>
      <li><a href="#fixes-45" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1502" class="scroll-to">1.5.0.2</a>
    <ul>
      <li><a href="#fixes-46" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1501" class="scroll-to">1.5.0.1</a>
    <ul>
      <li><a href="#fixes-47" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1500" class="scroll-to">1.5.0.0</a>
    <ul>
      <li><a href="#features-15" class="scroll-to">Features</a></li>
      <li><a href="#fixes-48" class="scroll-to">Fixes</a></li>
      <li><a href="#known-issue-and-workaround" class="scroll-to">Known Issue and Workaround</a></li>
    </ul>
  </li>
  <li><a href="#1303" class="scroll-to">1.3.0.3</a>
    <ul>
      <li><a href="#fixes-49" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1302" class="scroll-to">1.3.0.2</a>
    <ul>
      <li><a href="#features-16" class="scroll-to">Features</a></li>
      <li><a href="#fixes-50" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#1301" class="scroll-to">1.3.0.1</a>
    <ul>
      <li><a href="#features-17" class="scroll-to">Features</a></li>
      <li><a href="#changes" class="scroll-to">Changes</a></li>
      <li><a href="#fixes-51" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#13" class="scroll-to">1.3</a>
    <ul>
      <li><a href="#kong-gateway-13" class="scroll-to">Kong Gateway</a></li>
      <li><a href="#changes-1" class="scroll-to">Changes</a></li>
      <li><a href="#additions-1" class="scroll-to">Additions</a></li>
      <li><a href="#fixes-52" class="scroll-to">Fixes</a></li>
      <li><a href="#enterprise-exclusives" class="scroll-to">Enterprise-Exclusives</a></li>
      <li><a href="#features-18" class="scroll-to">Features</a></li>
      <li><a href="#fixes-53" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-7" class="scroll-to">0.36-7</a>
    <ul>
      <li><a href="#fixes-54" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-6" class="scroll-to">0.36-6</a>
    <ul>
      <li><a href="#fixes-55" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-5" class="scroll-to">0.36-5</a>
    <ul>
      <li><a href="#fixes-56" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-4" class="scroll-to">0.36-4</a>
    <ul>
      <li><a href="#fixes-57" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-3" class="scroll-to">0.36-3</a>
    <ul>
      <li><a href="#features-19" class="scroll-to">Features</a></li>
      <li><a href="#fixes-58" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-2" class="scroll-to">0.36-2</a>
    <ul>
      <li><a href="#notifications" class="scroll-to">Notifications</a></li>
      <li><a href="#features-20" class="scroll-to">Features</a></li>
      <li><a href="#fixes-59" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036-1" class="scroll-to">0.36-1</a>
    <ul>
      <li><a href="#notifications-1" class="scroll-to">Notifications</a></li>
      <li><a href="#fixes-60" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#036" class="scroll-to">0.36</a>
    <ul>
      <li><a href="#notifications-2" class="scroll-to">Notifications</a></li>
      <li><a href="#features-21" class="scroll-to">Features</a></li>
      <li><a href="#fixes-61" class="scroll-to">Fixes</a></li>
      <li><a href="#changes-3" class="scroll-to">Changes</a></li>
    </ul>
  </li>
  <li><a href="#035-5" class="scroll-to">0.35-5</a>
    <ul>
      <li><a href="#fixes-62" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#035-4" class="scroll-to">0.35-4</a>
    <ul>
      <li><a href="#notifications-3" class="scroll-to">Notifications</a></li>
      <li><a href="#fixes-63" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#035-3" class="scroll-to">0.35-3</a>
    <ul>
      <li><a href="#notifications-4" class="scroll-to">Notifications</a></li>
      <li><a href="#features-22" class="scroll-to">Features</a></li>
      <li><a href="#fixes-64" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#035-1" class="scroll-to">0.35-1</a>
    <ul>
      <li><a href="#notifications-5" class="scroll-to">Notifications</a></li>
      <li><a href="#features-23" class="scroll-to">Features</a></li>
      <li><a href="#fixes-65" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#035" class="scroll-to">0.35</a>
    <ul>
      <li><a href="#notifications-6" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-4" class="scroll-to">Changes</a></li>
      <li><a href="#features-24" class="scroll-to">Features</a></li>
      <li><a href="#fixes-66" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#034-1" class="scroll-to">0.34-1</a>
    <ul>
      <li><a href="#notifications-7" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-5" class="scroll-to">Changes</a></li>
      <li><a href="#features-25" class="scroll-to">Features</a></li>
      <li><a href="#fixes-67" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#034" class="scroll-to">0.34</a>
    <ul>
      <li><a href="#notifications-8" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-6" class="scroll-to">Changes</a></li>
      <li><a href="#features-26" class="scroll-to">Features</a></li>
      <li><a href="#fixes-68" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#033-2" class="scroll-to">0.33-2</a>
    <ul>
      <li><a href="#notifications-9" class="scroll-to">Notifications</a></li>
      <li><a href="#fixes-69" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#033-1" class="scroll-to">0.33-1</a>
    <ul>
      <li><a href="#notifications-10" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-7" class="scroll-to">Changes</a></li>
      <li><a href="#fixes-70" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#033" class="scroll-to">0.33</a>
    <ul>
      <li><a href="#notifications-11" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-8" class="scroll-to">Changes</a></li>
      <li><a href="#features-27" class="scroll-to">Features</a></li>
      <li><a href="#fixes-71" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#032" class="scroll-to">0.32</a>
    <ul>
      <li><a href="#notifications-12" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-9" class="scroll-to">Changes</a></li>
      <li><a href="#features-28" class="scroll-to">Features</a></li>
      <li><a href="#fixes-72" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#031-1" class="scroll-to">0.31-1</a>
    <ul>
      <li><a href="#changes-10" class="scroll-to">Changes</a></li>
      <li><a href="#fixes-73" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
  <li><a href="#031" class="scroll-to">0.31</a>
    <ul>
      <li><a href="#changes-11" class="scroll-to">Changes</a></li>
      <li><a href="#fixes-74" class="scroll-to">Fixes</a></li>
      <li><a href="#features-29" class="scroll-to">Features</a></li>
    </ul>
  </li>
  <li><a href="#030" class="scroll-to">0.30</a>
    <ul>
      <li><a href="#notifications-13" class="scroll-to">Notifications</a></li>
      <li><a href="#changes-12" class="scroll-to">Changes</a></li>
      <li><a href="#fixes-75" class="scroll-to">Fixes</a></li>
    </ul>
  </li>
</ul>

      </aside>
    

    <div class="page-content-container v2 no-sidebar" id="documentation">
      <div class="toggles no-sidebar">
        
          <i class="far fa-list-alt toc-sidebar-toggle"></i>
        
      </div>

      <div class="page-content">
        <div class="content show-anchor-links">
          <div class="content-header">
            <div class="content-edition">
              Kong Gateway (Enterprise)
                
            </div>
            
            
              <div id="breadcrumbs">
  
  <ul class="breadcrumbs">
    
    <li class="breadcrumb-item">
      
        Kong Konnect Platform
      
    </li>
    <li class="breadcrumb-item">
      <a href="/enterprise/">Kong Gateway (Enterprise)</a>
      
    </li>
    
      
        
          
        
      
    
  </ul>
</div>

            
          </div>
          
            

            <h1 tabindex="-1" id="main" class="page-content-title"
            >Kong Gateway (Enterprise) Changelog
            
            </h1>

            

            <h2 id="2600">2.6.0.0</h2>
<p><strong>Release date:</strong> 2021/10/14</p>

<h3 id="features">Features</h3>

<h4 id="enterprise">Enterprise</h4>

<h4 id="core">Core</h4>
<p>This release includes the addition of a new schema entity validator: <code class="language-plaintext highlighter-rouge">mutually_exclusive</code>. Before, the
<code class="language-plaintext highlighter-rouge">only_one_of</code> validator required at least one of the fields included be configured. This new entity validator allows
only one or neither of the fields be configured.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7765">#7765</a></p>

<h4 id="configuration">Configuration</h4>
<ul>
  <li>Enable IPV6 on <code class="language-plaintext highlighter-rouge">dns_order</code> as unsupported experimental feature.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7819">#7819</a>.</li>
  <li>The template renderer can now use <code class="language-plaintext highlighter-rouge">os.getenv</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6872">#6872</a>.</li>
</ul>

<h4 id="hybrid-mode">Hybrid Mode</h4>
<ul>
  <li>Data plane is able to eliminate some unknown fields when Control Plane is using a more modern version.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7827">#7827</a>.</li>
</ul>

<h4 id="admin-api">Admin API</h4>
<ul>
  <li>Added support for the HTTP HEAD method for all Admin API endpoints.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7796">#7796</a></li>
  <li>Added better support for OPTIONS requests. Previously, the Admin API replied the same on all OPTIONS requests,
where as now OPTIONS request will only reply to routes that our Admin API has. Non-existing routes will have a
404 returned. Additionally, the Allow header was added to responses. Both Allow and Access-Control-Allow-Methods
now contain only the methods that the specific API supports.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7830">#7830</a></li>
</ul>

<h4 id="plugins">Plugins</h4>
<ul>
  <li><strong>New plugin:</strong> <a href="/hub/kong-inc/jq">jq</a> (<code class="language-plaintext highlighter-rouge">jq</code>)
The jq plugin enables arbitrary jq transformations on JSON objects included in API requests or responses.</li>
  <li><a href="/hub/kong-inc/kafka-log">Kafka Log</a> (<code class="language-plaintext highlighter-rouge">kafka-log</code>)
The Kafka Log plugin now supports TLS, mTLS, and SASL auth. SASL auth includes support for PLAIN, SCRAM-SHA-256,
and delegation tokens.</li>
  <li><a href="/hub/kong-inc/kafka-upstream">Kafka Upstream</a> (<code class="language-plaintext highlighter-rouge">kafka-upstream</code>)
The Kafka Upstream plugin now supports TLS, mTLS, and SASL auth. SASL auth includes support for PLAIN, SCRAM-SHA-256,
and delegation tokens.</li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
    <ul>
      <li>The Rate Limiting Advanced plugin now has a new identifier type, <code class="language-plaintext highlighter-rouge">path</code>, which allows rate limiting by
matching request paths.</li>
      <li>The plugin now has a <code class="language-plaintext highlighter-rouge">local</code> strategy in the schema. The local strategy automatically sets <code class="language-plaintext highlighter-rouge">config.sync_rate</code> to -1.</li>
      <li>The highest sync-rate configurable was a 1 second interval. This sync-rate has been increased by reducing
the minimum allowed interval from 1 to 0.020 second (20ms).</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/opa">OPA</a> (<code class="language-plaintext highlighter-rouge">opa</code>)
The OPA plugin now has a request path parameter, which makes setting policies on a path easier for administrators.</li>
  <li><a href="/hub/kong-inc/canary">Canary</a> (<code class="language-plaintext highlighter-rouge">canary</code>)
The Canary plugin now has the option to hash on the header (falls back on IP, and then random).</li>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
Upgrade to v2.1.0 to maintain version compatibility with older data planes.
    <ul>
      <li>Features from v2.0.x include the following:
        <ul>
          <li>The OpenID Connect plugin can now handle JWT responses from a <code class="language-plaintext highlighter-rouge">userinfo</code> endpoint.</li>
          <li>The plugin now supports JWE Introspection.</li>
        </ul>
      </li>
      <li>Feature from to v2.1.x includes the following:
        <ul>
          <li>The plugin now has a new param, <code class="language-plaintext highlighter-rouge">by_username_ignore_case</code>, which allows <code class="language-plaintext highlighter-rouge">consumer_by</code> username values to be
matched case-insensitive with Identity Provider claims.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-transformer-advanced">Request Transformer Advanced</a> (<code class="language-plaintext highlighter-rouge">request-transformer-advanced</code>)
    <ul>
      <li>This release includes a fix for the URL encode transformed path. The plugin now uses PDK functions to set upstream URI
by replacing <code class="language-plaintext highlighter-rouge">ngx.var.upstream_uri</code> so the urlencode is taken care of.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/aws-lambda">AWS-Lambda</a> (<code class="language-plaintext highlighter-rouge">aws-lambda</code>) 
The plugin will now try to detect the AWS region by using <code class="language-plaintext highlighter-rouge">AWS_REGION</code> and
<code class="language-plaintext highlighter-rouge">AWS_DEFAULT_REGION</code> environment variables (when not specified with the plugin configuration).
This allows users to specify a ‘region’ on a per Kong node basis, adding the ability to invoke the
Lambda function in the same region where Kong is located.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7765">#7765</a></li>
  <li><a href="/hub/kong-inc/datadog">Datadog</a> (<code class="language-plaintext highlighter-rouge">datadog</code>)
The Datadog plugin now allows <code class="language-plaintext highlighter-rouge">host</code> and <code class="language-plaintext highlighter-rouge">port</code> config options be configured from environment variables,
<code class="language-plaintext highlighter-rouge">KONG_DATADOG_AGENT_HOST</code> and <code class="language-plaintext highlighter-rouge">KONG_DATADOG_AGENT_PORT</code>. This update enables users to set 
 different destinations on a per Kong node basis, which makes multi-DC setups easier and in Kubernetes helps 
 with the ability to run the Datadog agents as a daemon-set.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7463">#7463</a></li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>) 
The Prometheus plugin now includes a new metric, <code class="language-plaintext highlighter-rouge">data_plane_cluster_cert_expiry_timestamp</code>, to expose the Data Plane’s <code class="language-plaintext highlighter-rouge">cluster_cert</code> 
 expiry timestamp for improved monitoring in Hybrid Mode.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7800">#7800</a>.</li>
  <li><a href="/hub/kong-inc/grpc-gateway">GRPC-Gateway</a> (grpc-gateway)
    <ul>
      <li>Fields of type <code class="language-plaintext highlighter-rouge">.google.protobuf.Timestamp</code> on the gRPC side are now
transcoded to and from ISO8601 strings in the REST side.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7538">#7538</a></li>
      <li>URI arguments like <code class="language-plaintext highlighter-rouge">..?foo.bar=x&amp;foo.baz=y</code> are interpreted as structured
fields, equivalent to <code class="language-plaintext highlighter-rouge">{"foo": {"bar": "x", "baz": "y"}}</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7564">#7564</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-termination">Request Termination</a> (<code class="language-plaintext highlighter-rouge">request-termination</code>)
    <ul>
      <li>The Request Termination plugin now includes a new <code class="language-plaintext highlighter-rouge">trigger</code> config option, which makes the plugin
only activate for any requests with a header or query parameter named like the trigger. This config option
can be a great debugging aid, without impacting actual traffic being processed.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6744">#6744</a>.</li>
      <li>The <code class="language-plaintext highlighter-rouge">request-echo</code> config option was added. If set, the plugin responds with a copy of the incoming request.
This config option eases troubleshooting when Kong Gateway is behind one or more other proxies or LB’s,
especially when combined with the new <code class="language-plaintext highlighter-rouge">trigger</code> option.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6744">#6744</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="dependencies">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openresty</code> from 1.19.3.2 to <a rel="nofollow noopener noreferrer" href="https://openresty.org/en/changelog-1019009.html">1.19.9.1</a>
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7727">#7430</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openssl</code> from <code class="language-plaintext highlighter-rouge">1.1.1k</code> to <code class="language-plaintext highlighter-rouge">1.1.1l</code>
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7767">7767</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-http</code> from 0.15 to 0.16.1
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7797">#7797</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">Penlight</code> to 1.11.0
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7736">#7736</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-http</code> from 0.15 to 0.16.1
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7797">#7797</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-protobuf</code> from 0.3.2 to 0.3.3
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7656">#7656</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> from 0.7.3 to 0.7.4
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7657">#7657</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-acme</code> from 0.6 to 0.7.1
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7658">#7658</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">grpcurl</code> from 1.8.1 to 1.8.2
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7659">#7659</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luasec</code> from 1.0.1 to 1.0.2
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7750">#7750</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-ipmatcher</code> to 0.6.1
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7703">#7703</a></li>
</ul>

<h3 id="fixes">Fixes</h3>

<h4 id="enterprise-1">Enterprise</h4>
<ul>
  <li>This release includes a fix for an issue with the Vitals InfluxDB timestamp generation when inserting metrics.</li>
  <li>Kong Gateway (Enterprise) no longer exports <code class="language-plaintext highlighter-rouge">consumer_reset_secrets</code>.</li>
  <li>Fixes an issue where keyring data was not being properly generated and activated
on a Kong process start (for example, kong start).</li>
  <li>Kong Gateway now returns keyring-encrypted fields early when a decrypt attempt is made, giving you time
to import the keys so Kong Gateway can recognize the decrypted fields. Before if there were data fields
keyring-encrypted in the database, Kong Gateway attempted to decrypt them on the <code class="language-plaintext highlighter-rouge">init*</code> phases (<code class="language-plaintext highlighter-rouge">init</code> or <code class="language-plaintext highlighter-rouge">init_worker</code>
phases - when the Kong process is started), and you would get errors like “no request found”. <strong>Keys must still be imported after the Kong process is started.</strong></li>
  <li>The <a href="/enterprise/2.6.x/db-encryption/">Keyring Encryption</a> feature is no longer in an alpha quality state.</li>
  <li>This release includes a fix to the CentOS Docker image builds, ensuring CentOS 7 images are properly generated.</li>
</ul>

<h4 id="core-1">Core</h4>
<ul>
  <li>Balancer retries now correctly set the <code class="language-plaintext highlighter-rouge">:authority</code> pseudo-header on balancer retries.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7725">#7725</a>.</li>
  <li>Healthchecks are now stopped while the Balancer is being recreated.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7549">#7549</a>.</li>
  <li>Fixed an issue in which a malformed <code class="language-plaintext highlighter-rouge">Accept</code> header could cause unexpected HTTP 500.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7757">#7757</a>.</li>
  <li>Kong no longer removes <code class="language-plaintext highlighter-rouge">Proxy-Authentication</code> request header and <code class="language-plaintext highlighter-rouge">Proxy-Authenticate</code> response header.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7724">#7724</a>.</li>
  <li>Fixed an issue where Kong would not sort correctly Routes with both regex and prefix paths.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7695">#7695</a></li>
</ul>

<h4 id="hybrid-mode-1">Hybrid Mode</h4>
<ul>
  <li>Ensure data plane config thread is terminated gracefully, preventing a semi-deadlocked state.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7568">#7568</a></li>
</ul>

<h5 id="cli">CLI</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">kong config parse</code> no longer crashes when there’s a Go plugin server enabled.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7589">#7589</a>.</li>
</ul>

<h5 id="configuration-1">Configuration</h5>
<ul>
  <li>Declarative Configuration parser now prints more correct errors when printing unknown foreign references.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7756">#7756</a>.</li>
  <li>YAML anchors in Declarative Configuration are properly processed.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7748">#7748</a>.</li>
</ul>

<h5 id="admin-api-1">Admin API</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">GET /upstreams/:upstreams/targets/:target</code> no longer returns 404 when target weight is 0.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7758">#7758</a>.</li>
</ul>

<h5 id="pdk">PDK</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">kong.response.exit</code> now uses customized “Content-Length” header when found.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7828">#7828</a>.</li>
</ul>

<h5 id="plugins-1">Plugins</h5>
<ul>
  <li><a href="/hub/kong-inc/acme">ACME</a> (<code class="language-plaintext highlighter-rouge">acme</code>)
Dots in wildcard domains are escaped.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7839">#7839</a>.</li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>)
Upstream’s health info now includes previously missing <code class="language-plaintext highlighter-rouge">subsystem</code> field.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7802">#7802</a>.</li>
  <li><a href="/hub/kong-inc/proxy-cache">Proxy-Cache</a> (<code class="language-plaintext highlighter-rouge">proxy-cache</code>) 
Fixed an issue where the plugin would sometimes fetch data from the cache but not return it.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7775">#7775</a></li>
</ul>

<h2 id="2600-beta1">2.6.0.0 (beta1)</h2>
<p><strong>Release date:</strong> 2021/10/04</p>

<h3 id="features-1">Features</h3>

<h4 id="enterprise-2">Enterprise</h4>

<h4 id="core-2">Core</h4>
<p>This release includes the addition of a new schema entity validator: <code class="language-plaintext highlighter-rouge">mutually_exclusive</code>. Before, the
<code class="language-plaintext highlighter-rouge">only_one_of</code> validator required at least one of the fields included be configured. This new entity validator allows
only one or neither of the fields be configured.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7765">#7765</a></p>

<h4 id="configuration-2">Configuration</h4>
<ul>
  <li>Enable IPV6 on <code class="language-plaintext highlighter-rouge">dns_order</code> as unsupported experimental feature.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7819">#7819</a>.</li>
  <li>The template renderer can now use <code class="language-plaintext highlighter-rouge">os.getenv</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6872">#6872</a>.</li>
</ul>

<h4 id="hybrid-mode-2">Hybrid Mode</h4>
<ul>
  <li>Data plane is able to eliminate some unknown fields when Control Plane is using a more modern version.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7827">#7827</a>.</li>
</ul>

<h4 id="admin-api-2">Admin API</h4>
<ul>
  <li>Added support for the HTTP HEAD method for all Admin API endpoints.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7796">#7796</a></li>
  <li>Added better support for OPTIONS requests. Previously, the Admin API replied the same on all OPTIONS requests,
where as now OPTIONS request will only reply to routes that our Admin API has. Non-existing routes will have a
404 returned. Additionally, the Allow header was added to responses. Both Allow and Access-Control-Allow-Methods
now contain only the methods that the specific API supports.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7830">#7830</a></li>
</ul>

<h4 id="plugins-2">Plugins</h4>
<ul>
  <li><strong>New plugin:</strong> <a href="/hub/kong-inc/jq">jq</a> (<code class="language-plaintext highlighter-rouge">jq</code>)
The jq plugin enables arbitrary jq transformations on JSON objects included in API requests or responses.</li>
  <li><a href="/hub/kong-inc/kafka-log">Kafka Log</a> (<code class="language-plaintext highlighter-rouge">kafka-log</code>)
The Kafka Log plugin now supports TLS, mTLS, and SASL auth. SASL auth includes support for PLAIN, SCRAM-SHA-256,
and delegation tokens.</li>
  <li><a href="/hub/kong-inc/kafka-upstream">Kafka Upstream</a> (<code class="language-plaintext highlighter-rouge">kafka-upstream</code>)
The Kafka Upstream plugin now supports TLS, mTLS, and SASL auth. SASL auth includes support for PLAIN, SCRAM-SHA-256,
and delegation tokens.</li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
    <ul>
      <li>The Rate Limiting Advanced plugin now has a new identifier type, <code class="language-plaintext highlighter-rouge">path</code>, which allows rate limiting by
matching request paths.</li>
      <li>The plugin now has a <code class="language-plaintext highlighter-rouge">local</code> strategy in the schema. The local strategy automatically sets <code class="language-plaintext highlighter-rouge">config.sync_rate</code> to -1.</li>
      <li>The highest sync-rate configurable was a 1 second interval. This sync-rate has been increased by reducing
the minimum allowed interval from 1 to 0.020 second (20ms).</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/opa">OPA</a> (<code class="language-plaintext highlighter-rouge">opa</code>)
The OPA plugin now has a request path parameter, which makes setting policies on a path easier for administrators.</li>
  <li><a href="/hub/kong-inc/canary">Canary</a> (<code class="language-plaintext highlighter-rouge">canary</code>)
The Canary plugin now has the option to hash on the header (falls back on IP, and then random).</li>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
Upgrade to v2.1.0 to maintain version compatibility with older data planes.
    <ul>
      <li>Features from v2.0.x include the following:
        <ul>
          <li>The OpenID Connect plugin can now handle JWT responses from a <code class="language-plaintext highlighter-rouge">userinfo</code> endpoint.</li>
          <li>The plugin now supports JWE Introspection.</li>
        </ul>
      </li>
      <li>Feature from to v2.1.x includes the following:
        <ul>
          <li>The plugin now has a new param, <code class="language-plaintext highlighter-rouge">by_username_ignore_case</code>, which allows <code class="language-plaintext highlighter-rouge">consumer_by</code> username values to be
matched case-insensitive with Identity Provider claims.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/aws-lambda">AWS-Lambda</a> (<code class="language-plaintext highlighter-rouge">aws-lambda</code>) 
The plugin will now try to detect the AWS region by using <code class="language-plaintext highlighter-rouge">AWS_REGION</code> and
<code class="language-plaintext highlighter-rouge">AWS_DEFAULT_REGION</code> environment variables (when not specified with the plugin configuration).
This allows users to specify a ‘region’ on a per Kong node basis, adding the ability to invoke the
Lambda function in the same region where Kong is located.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7765">#7765</a></li>
  <li><a href="/hub/kong-inc/datadog">Datadog</a> (<code class="language-plaintext highlighter-rouge">datadog</code>)
The Datadog plugin now allows <code class="language-plaintext highlighter-rouge">host</code> and <code class="language-plaintext highlighter-rouge">port</code> config options be configured from environment variables,
<code class="language-plaintext highlighter-rouge">KONG_DATADOG_AGENT_HOST</code> and <code class="language-plaintext highlighter-rouge">KONG_DATADOG_AGENT_PORT</code>. This update enables users to set 
 different destinations on a per Kong node basis, which makes multi-DC setups easier and in Kubernetes helps 
 with the ability to run the Datadog agents as a daemon-set.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7463">#7463</a></li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>) 
The Prometheus plugin now includes a new metric, <code class="language-plaintext highlighter-rouge">data_plane_cluster_cert_expiry_timestamp</code>, to expose the Data Plane’s <code class="language-plaintext highlighter-rouge">cluster_cert</code> 
 expiry timestamp for improved monitoring in Hybrid Mode.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7800">#7800</a>.</li>
  <li><a href="/hub/kong-inc/grpc-gateway">GRPC-Gateway</a> (grpc-gateway)
    <ul>
      <li>Fields of type <code class="language-plaintext highlighter-rouge">.google.protobuf.Timestamp</code> on the gRPC side are now
transcoded to and from ISO8601 strings in the REST side.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7538">#7538</a></li>
      <li>URI arguments like <code class="language-plaintext highlighter-rouge">..?foo.bar=x&amp;foo.baz=y</code> are interpreted as structured
fields, equivalent to <code class="language-plaintext highlighter-rouge">{"foo": {"bar": "x", "baz": "y"}}</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7564">#7564</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-termination">Request Termination</a> (<code class="language-plaintext highlighter-rouge">request-termination</code>)
    <ul>
      <li>The Request Termination plugin now includes a new <code class="language-plaintext highlighter-rouge">trigger</code> config option, which makes the plugin
only activate for any requests with a header or query parameter named like the trigger. This config option
can be a great debugging aid, without impacting actual traffic being processed.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6744">#6744</a>.</li>
      <li>The <code class="language-plaintext highlighter-rouge">request-echo</code> config option was added. If set, the plugin responds with a copy of the incoming request.
This config option eases troubleshooting when Kong Gateway is behind one or more other proxies or LB’s,
especially when combined with the new <code class="language-plaintext highlighter-rouge">trigger</code> option.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6744">#6744</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="dependencies-1">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openresty</code> from 1.19.3.2 to <a rel="nofollow noopener noreferrer" href="https://openresty.org/en/changelog-1019009.html">1.19.9.1</a>
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7727">#7430</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openssl</code> from <code class="language-plaintext highlighter-rouge">1.1.1k</code> to <code class="language-plaintext highlighter-rouge">1.1.1l</code>
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7767">7767</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-http</code> from 0.15 to 0.16.1
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7797">#7797</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">Penlight</code> to 1.11.0
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7736">#7736</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-http</code> from 0.15 to 0.16.1
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7797">#7797</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-protobuf</code> from 0.3.2 to 0.3.3
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7656">#7656</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> from 0.7.3 to 0.7.4
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7657">#7657</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-acme</code> from 0.6 to 0.7.1
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7658">#7658</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">grpcurl</code> from 1.8.1 to 1.8.2
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7659">#7659</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luasec</code> from 1.0.1 to 1.0.2
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7750">#7750</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-ipmatcher</code> to 0.6.1
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7703">#7703</a></li>
</ul>

<h3 id="fixes-1">Fixes</h3>

<h4 id="enterprise-3">Enterprise</h4>
<ul>
  <li>This release includes a fix for an issue with the Vitals InfluxDB timestamp generation when inserting metrics.</li>
  <li>Kong Gateway (Enterprise) no longer exports <code class="language-plaintext highlighter-rouge">consumer_reset_secrets</code>.</li>
  <li>Fixes an issue where keyring data was not being properly generated and activated
on a Kong process start (for example, kong start).</li>
  <li>Kong Gateway now returns keyring-encrypted fields early when a decrypt attempt is made, giving you time
to import the keys so Kong Gateway can recognize the decrypted fields. Before if there were data fields
keyring-encrypted in the database, Kong Gateway attempted to decrypt them on the <code class="language-plaintext highlighter-rouge">init*</code> phases (<code class="language-plaintext highlighter-rouge">init</code> or <code class="language-plaintext highlighter-rouge">init_worker</code>
phases - when the Kong process is started), and you would get errors like “no request found”. <strong>Keys must still be imported after the Kong process is started.</strong></li>
  <li>The <a href="/enterprise/2.6.x/db-encryption/">Keyring Encryption</a> feature is no longer in an alpha quality state.</li>
</ul>

<h4 id="core-3">Core</h4>
<ul>
  <li>Balancer retries now correctly set the <code class="language-plaintext highlighter-rouge">:authority</code> pseudo-header on balancer retries.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7725">#7725</a>.</li>
  <li>Healthchecks are now stopped while the Balancer is being recreated.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7549">#7549</a>.</li>
  <li>Fixed an issue in which a malformed <code class="language-plaintext highlighter-rouge">Accept</code> header could cause unexpected HTTP 500.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7757">#7757</a>.</li>
  <li>Kong no longer removes <code class="language-plaintext highlighter-rouge">Proxy-Authentication</code> request header and <code class="language-plaintext highlighter-rouge">Proxy-Authenticate</code> response header.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7724">#7724</a>.</li>
  <li>Fixed an issue where Kong would not sort correctly Routes with both regex and prefix paths.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7695">#7695</a></li>
</ul>

<h4 id="hybrid-mode-3">Hybrid Mode</h4>
<ul>
  <li>Ensure data plane config thread is terminated gracefully, preventing a semi-deadlocked state.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7568">#7568</a></li>
</ul>

<h5 id="cli-1">CLI</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">kong config parse</code> no longer crashes when there’s a Go plugin server enabled.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7589">#7589</a>.</li>
</ul>

<h5 id="configuration-3">Configuration</h5>
<ul>
  <li>Declarative Configuration parser now prints more correct errors when printing unknown foreign references.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7756">#7756</a>.</li>
  <li>YAML anchors in Declarative Configuration are properly processed.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7748">#7748</a>.</li>
</ul>

<h5 id="admin-api-3">Admin API</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">GET /upstreams/:upstreams/targets/:target</code> no longer returns 404 when target weight is 0.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7758">#7758</a>.</li>
</ul>

<h5 id="pdk-1">PDK</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">kong.response.exit</code> now uses customized “Content-Length” header when found.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7828">#7828</a>.</li>
</ul>

<h5 id="plugins-3">Plugins</h5>
<ul>
  <li><a href="/hub/kong-inc/acme">ACME</a> (<code class="language-plaintext highlighter-rouge">acme</code>)
Dots in wildcard domains are escaped.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7839">#7839</a>.</li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>)
Upstream’s health info now includes previously missing <code class="language-plaintext highlighter-rouge">subsystem</code> field.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7802">#7802</a>.</li>
  <li><a href="/hub/kong-inc/proxy-cache">Proxy-Cache</a> (<code class="language-plaintext highlighter-rouge">proxy-cache</code>) 
Fixed an issue where the plugin would sometimes fetch data from the cache but not return it.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7775">#7775</a></li>
</ul>

<h2 id="2511">2.5.1.1</h2>
<p><strong>Release Date</strong> 2021/10/22</p>

<h3 id="fixes-2">Fixes</h3>

<h4 id="enterprise-4">Enterprise</h4>
<ul>
  <li>This release includes a fix for an issue with the Vitals InfluxDB timestamp generation when inserting metrics.</li>
  <li>Kong Gateway now displays a DEBUG log message alerting users Kong Vitals is not enabled when running Kong Gateway (Enterprise) in “free” mode.</li>
  <li>Fixes an issue where keyring data was not being properly generated and activated
on a Kong Gateway process start (for example, <code class="language-plaintext highlighter-rouge">kong start</code>).</li>
  <li>Kong Gateway now returns keyring-encrypted fields early when a decrypt attempt is made, giving you time
to import the keys so Kong Gateway can recognize the decrypted fields. Before if there were data fields
keyring-encrypted in the database, Kong Gateway attempted to decrypt them on the <code class="language-plaintext highlighter-rouge">init*</code> phases (<code class="language-plaintext highlighter-rouge">init</code> or <code class="language-plaintext highlighter-rouge">init_worker</code>
phases - when the Kong process is started), and you would get errors like “no request found”.
<strong>Keys must still be imported after the Kong process is started.</strong></li>
  <li>The <a href="/enterprise/2.6.x/db-encryption/">Keyring Encryption</a> feature is no longer in an alpha quality state.</li>
  <li>When using Redis Cluster with a Kong Gateway plugin and the cluster nodes are configured by hostname,
if the entire cluster is rebooted and appears on new IP addresses, now the connection will eventually self heal once DNS is updated.</li>
</ul>

<h4 id="plugins-4">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
The plugin now allows Redis Cluster nodes to be specified by hostname, which is helpful if the cluster IPs are not static.</li>
</ul>

<h2 id="2510">2.5.1.0</h2>
<p><strong>Release Date</strong> 2021/09/08</p>

<h3 id="dependencies-2">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">grpcurl</code> from 1.8.1 to 1.8.2 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7659">#7659</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> from 0.7.3 to 0.7.4 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7657">#7657</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">penlight</code> from 1.10.0 to 1.11.0 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7736">#7736</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luasec</code> from 1.0.1 to 1.0.2 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7750">#7750</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">OpenSSL</code> from 1.1.1k to 1.1.1l <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7767">#7767</a></li>
</ul>

<h3 id="fixes-3">Fixes</h3>

<h4 id="core-4">Core</h4>
<ul>
  <li>You can now successfully delete workspaces after deleting all entities associated with that workspace.
Previously, Kong Gateway was not correctly cleaning up parent-child relationships. For example, creating
an Admin also creates a Consumer and RBAC user. When deleting the Admin, the Consumer and RBAC user are
also deleted, but accessing the <code class="language-plaintext highlighter-rouge">/workspaces/workspace_name/meta</code> endpoint would show counts for Consumers
and RBAC users, which prevented the workspace from being deleted. Now deleting entities correctly updates
the counts, allowing an empty workspace to be deleted. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7560">#7560</a></li>
  <li>When an upstream event is received from the DAO, <code class="language-plaintext highlighter-rouge">handler.lua</code> now gets the workspace ID from the request
and adds it to the upstream entity that will be used in the worker and cluster events. Before this change,
when posting balancer CRUD events, the workspace ID was lost and the balancer used the default
workspace ID as a fallback. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7778">#7778</a></li>
</ul>

<h4 id="cli-2">CLI</h4>
<ul>
  <li>Fixes regression that included an issue where Go plugins prevented CLI commands like <code class="language-plaintext highlighter-rouge">kong config parse</code>
or <code class="language-plaintext highlighter-rouge">kong config db_import</code> from working as expected. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7589">#7589</a></li>
</ul>

<h4 id="admin-api-4">Admin API</h4>
<ul>
  <li>Kong Gateway now validates workspace names, preventing the use of reserved names on workspaces.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7380">#7380</a></li>
</ul>

<h4 id="plugins-5">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/azure-functions">Azure Functions</a> (<code class="language-plaintext highlighter-rouge">azure-functions</code>)
This relese updates the <code class="language-plaintext highlighter-rouge">lua-resty-http</code> dependency to v0.16.1, which means the plugin no longer
uses the deprecated functions.</li>
</ul>

<h2 id="2502">2.5.0.2</h2>
<p><strong>Release Date</strong> 2021/09/02</p>

<h3 id="fixes-4">Fixes</h3>

<h4 id="enterprise-5">Enterprise</h4>
<ul>
  <li>This release fixes a regression in the Kong Dev Portal templates that removed dynamic menu navigation and other improvements
from portals created in Kong Gateway v2.5.0.1.</li>
</ul>

<h4 id="plugins-6">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/mocking">Mocking</a> (<code class="language-plaintext highlighter-rouge">mocking</code>)
This release fixes special character handling in path matching for the plugin. Before, if a path contained a hyphen
the plugin failed to match the path.</li>
</ul>

<h2 id="2501">2.5.0.1</h2>
<p><strong>Release Date</strong> 2021/08/18</p>

<h3 id="fixes-5">Fixes</h3>

<h4 id="enterprise-6">Enterprise</h4>
<ul>
  <li>Updates Kong Dev Portal templates’ JQuery dependency to v3.6.0, improving security.</li>
  <li>Now, bootstrap migrations for multi-node Apache Cassandra clusters work as expected.
With this fix, inserts are performed after schema agreement.</li>
  <li>Updates Nettle dependency version from <code class="language-plaintext highlighter-rouge">3.7.2</code> to <code class="language-plaintext highlighter-rouge">3.7.3</code>, fixing bugs that could cause
RSA decryption functions to crash with invalid inputs.</li>
</ul>

<h4 id="plugins-7">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
With this fix, when the OpenID Connect plugin is configured with a <code class="language-plaintext highlighter-rouge">config.anonymous</code> consumer and
<code class="language-plaintext highlighter-rouge">config.scopes_required</code> is set, a token missing the required scopes will have the anonymous consumer
headers set when sent to the upstream.</li>
</ul>

<h2 id="2500">2.5.0.0</h2>
<p><strong>Release Date</strong> 2021/08/03</p>

<h3 id="features-2">Features</h3>

<h4 id="enterprise-7">Enterprise</h4>
<ul>
  <li>This release includes event hooks, a new entity that represents the relationship between an event (source and event) and an action (handler).
Depending on the handler, an event hook will execute an action with the event’s associated data when it is triggered. There
are four supported handlers:
    <ul>
      <li>webhook</li>
      <li>custom-webhook</li>
      <li>log</li>
      <li>lambda<br />
See the event hooks <a href="/enterprise/2.5.x/admin-api/event-hooks/reference">reference</a> and
<a href="/enterprise/2.5.x/admin-api/event-hooks/examples">examples</a> documentation for more information.</li>
    </ul>
  </li>
  <li>For users running in free mode, Kong has updated the top banner to include information on the benefits of and a link for updating to Konnect.</li>
</ul>

<h4 id="core-5">Core</h4>
<ul>
  <li>Control planes can now send updates to new data planes even if the control planes lose connection to the database.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6938">#6938</a></li>
  <li>Kong now automatically adds <code class="language-plaintext highlighter-rouge">cluster_cert</code>(<code class="language-plaintext highlighter-rouge">cluster_mtls=shared</code>) or <code class="language-plaintext highlighter-rouge">cluster_ca_cert</code>(<code class="language-plaintext highlighter-rouge">cluster_mtls=pki</code>) into
<code class="language-plaintext highlighter-rouge">lua_ssl_trusted_certificate</code> when operating in hybrid mode. Before, hybrid mode users needed to configure
<code class="language-plaintext highlighter-rouge">lua_ssl_trusted_certificate</code> manually as a requirement for Lua to verify the control plane’s certificate.
See <a href="/gateway-oss/2.5.x/hybrid-mode/#starting-data-plane-nodes">Starting Data Plane Nodes</a>
in the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7044">#7044</a></li>
  <li>New <code class="language-plaintext highlighter-rouge">declarative_config_string</code> option allows loading declarative configurations directly from a string. See the
<a href="/enterprise/2.5.x/db-less-and-declarative-config/#loading-the-declarative-configuration-file">Loading The Declarative Configuration File</a>
section of the DB-less and Declarative Configuration guide for more information.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7379">#7379</a></li>
</ul>

<h4 id="pdk-2">PDK</h4>
<ul>
  <li>The Kong Gateway PDK now accepts tables in the response body for Stream subsystems, just as it does for the HTTP subsystem.
Before, developers had to check the subsystem if they wrote code that used the <code class="language-plaintext highlighter-rouge">exit()</code> function before calling it,
because passing the wrong argument type would break the request response.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7082">#7082</a></li>
</ul>

<h4 id="plugins-8">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/hmac-auth">HMAC Authentication</a> (<code class="language-plaintext highlighter-rouge">hmac-auth</code>)
The HMAC Authentication plugin now includes support for the <code class="language-plaintext highlighter-rouge">@request-target</code> field in the signature
string. Before, the plugin used the <code class="language-plaintext highlighter-rouge">request-line</code> parameter, which contains the HTTP request method, request URI, and
the HTTP version number. The inclusion of the HTTP version number in the signature caused requests to the same target
with different request methods(such as HTTP/2) to have different signatures. The newly added <code class="language-plaintext highlighter-rouge">request-target</code> field
only includes the lowercase request method and request URI when calculating the hash, avoiding those issues.
See the <a href="/hub/kong-inc/hmac-auth">HMAC Authentication</a> documentation for more information.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7037">#7037</a></li>
  <li><a href="/hub/kong-inc/syslog">Syslog</a> (<code class="language-plaintext highlighter-rouge">syslog</code>)
The Syslog plugin now includes facility configuration options, which are a way for the plugin to group
error messages from different sources. See the description for the facility parameter in the
Parameters section of the <a href="/hub/kong-inc/syslog">Syslog documentation</a> for more
information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6081">#6081</a>.</li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>) The Prometheus plugin now exposes connected data planes’
status on the  control plane. New metrics include the following:  <code class="language-plaintext highlighter-rouge">data_plane_last_seen</code>, <code class="language-plaintext highlighter-rouge">data_plane_config_hash</code>
and <code class="language-plaintext highlighter-rouge">data_plane_version_compatible</code>. These metrics can be useful for troubleshooting when data planes have inconsistent
configurations across the cluster. See the <a href="/hub/kong-inc/prometheus/#available-metrics">Available metrics</a> section
of the Prometheus plugin documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-prometheus/pull/98">#98</a></li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
The Zipkin plugin now includes the following tags: <code class="language-plaintext highlighter-rouge">kong.route</code>,<code class="language-plaintext highlighter-rouge">kong.service_name</code>, and <code class="language-plaintext highlighter-rouge">kong.route_name</code>.
See the <a href="/hub/kong-inc/zipkin/#spans">Spans</a> section of the Zipkin plugin documentation for more information.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/115">#115</a></li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
 and <a href="/hub/kong-inc/proxy-cache-advanced">Proxy Cache Advanced</a> (<code class="language-plaintext highlighter-rouge">proxy-cached-advanced</code>)
    <ul>
      <li>This release deprecates the <code class="language-plaintext highlighter-rouge">timeout</code> field and replaces it with three precise options:
<code class="language-plaintext highlighter-rouge">connect_timeout</code>, <code class="language-plaintext highlighter-rouge">read_timeout</code>, and <code class="language-plaintext highlighter-rouge">send_timeout</code>. Currently, if these options are not set, the
value of <code class="language-plaintext highlighter-rouge">timeout</code> will be used for all (or its default value of 2000ms). The <code class="language-plaintext highlighter-rouge">connect_timeout</code>, <code class="language-plaintext highlighter-rouge">read_timeout</code>,
and <code class="language-plaintext highlighter-rouge">send_timeout</code> fields are mutually required fields. The <code class="language-plaintext highlighter-rouge">timeout</code> field will be removed from the product in version 3.0.x.x.</li>
      <li>This release also includes new configuration options <code class="language-plaintext highlighter-rouge">keepalive_pool</code> and <code class="language-plaintext highlighter-rouge">keepalive_backlog</code>. These options
relate to <a rel="nofollow noopener noreferrer" href="https://github.com/openresty/lua-nginx-module/#tcpsockconnect">Openresty’s Lua INGINX module’s</a> <code class="language-plaintext highlighter-rouge">tcp:connect</code> options.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/acme">ACME</a> (<code class="language-plaintext highlighter-rouge">acme</code>)
The ACME plugin now waits before signaling a challenge in hybrid mode to ensure the control plane propagates any updated
configuration data. The client certificate will now be stored in external storage in hybrid mode with a warning being
emitted if the ACME plugin is configured to use <code class="language-plaintext highlighter-rouge">shm</code> storage. Additional checks have also been added during the sanity test
which can be run on a Kong Gateway setup before creating any certificates.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-acme/pull/74">#74</a></li>
</ul>

<h4 id="hybrid-mode-4">Hybrid Mode</h4>
<ul>
  <li>Kong Gateway now exposes an upstream health checks endpoint (using the status API) on the data plane for better
observability. See <a href="/enterprise/2.5.x/deployment/hybrid-mode/#readonly-status-api-endpoints-on-data-plane">Readonly Status API endpoints on Data Plane</a>
in the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7429">#7429</a></li>
  <li>Control planes are now more lenient when checking data planes’ compatibility in hybrid mode. See the
<a href="/enterprise/2.5.x/deployment/hybrid-mode/#version-compatibility">Version compatibility</a>
section of the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7488">#7488</a></li>
</ul>

<h3 id="dependencies-3">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openresty</code> from 1.19.3.1 to 1.19.3.2 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7430">#7430</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luasec</code> from 1.0 to 1.0.1 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7126">#7126</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luarocks</code> from 3.5.0 to 3.7.0 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7043">#7043</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">grpcurl</code> from 1.8.0 to 1.8.1 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7128">#7128</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">penlight</code> from 1.9.2 to 1.10.0 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7127">#7127</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-dns-client</code> from 6.0.0 to 6.0.2 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7539">#7539</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-acme</code> from 0.2.14 to 0.2.15 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-acme/pull/74">#74</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-prometheus</code> from 1.2 to 1.3 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7415">#7415</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-zipkin</code> from 1.3 to 1.4 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7455">#7455</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> from 0.7.2 to 0.7.3 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7509">#7509</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code> from 1.4.1 to 1.4.2 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7511">#7511</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">hmac-auth</code> from 2.3.0 to 2.4.0 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7522">#7522</a></li>
  <li>Pinned <code class="language-plaintext highlighter-rouge">lua-protobuf</code> to 0.3.2 (previously unpinned) <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7079">#7079</a></li>
</ul>

<h3 id="fixes-6">Fixes</h3>

<h4 id="enterprise-8">Enterprise</h4>
<ul>
  <li>Renamed the property identifying control planes in hybrid mode when using Kong Vitals with
anonymous reports enabled. Before, users received an error on their control planes about
a function that could not be used.</li>
  <li>Kong Gateway now starts even when <code class="language-plaintext highlighter-rouge">SSL_CIPHER_SUITE</code> is set to <code class="language-plaintext highlighter-rouge">modern</code> when the Kong Dev Portal is enabled.
Before, Kong Gateway would fail to start with an NGINX configuration error, “invalid number of arguments in
‘ssl_ciphers’ directive”.</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> to v0.7.3, fixing an error users were encountering when trying
to synchronize configurations from control planes to data planes. Users were seeing the following errors
in the ingress controller logs, indicating their configurations were not successfully being pushed to the
Kong Gateway proxy node: “failed to update kong configuration”, “declarative config is invalid,” and “failed to sync”.</li>
  <li>Users can now set <code class="language-plaintext highlighter-rouge">enforce_rbac</code> to <code class="language-plaintext highlighter-rouge">both</code> and still be able to log into Kong Gateway’s UI, Kong Manager.</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code> to v1.4.2 which fixes an error where Kong would spam ‘nothing to do’ in
the logs multiple times per second, slowing down performance.</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-dns-client</code> to v6.0.1 which fixes an issue users were encountering when
adding more than 1000 endpoints, resulting in the error <code class="language-plaintext highlighter-rouge">lua_max_running_timers are not enough</code> throughout the logs.</li>
  <li>Kong Gateway now ensures proper keyspace, table, and table names are used when performing migrations on Apache Cassandra v2.2.</li>
  <li>This release includes an update that circumvents a potential security issue with a buffer overflow when validating the Kong Gateway license.</li>
  <li>Users can now successfully delete workspaces after deleting all entities associated with that workspace.
Previously, Kong Gateway was not correctly cleaning up parent-child relationships. For example, creating
an Admin also creates a Consumer and RBAC user. When deleting the Admin, the Consumer and RBAC user are also
deleted, but accessing the <code class="language-plaintext highlighter-rouge">/workspaces/workspace_name/meta</code> endpoint would show counts for Consumers and RBAC
users, which prevented the workspace from being deleted. Now deleting entities correctly updates the counts,
allowing an empty workspace to be deleted.</li>
</ul>

<h4 id="core-6">Core</h4>
<ul>
  <li>When using DB-less mode, <code class="language-plaintext highlighter-rouge">select_by_cache_key</code> now finds entities by using the provided <code class="language-plaintext highlighter-rouge">field</code> directly
in ` select_by_key` and does not complete unnecessary cache reads. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7146">#7146</a></li>
  <li>Kong can now finish initialization even if a plugin’s <code class="language-plaintext highlighter-rouge">init_worker</code> handler fails, improving stability.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7099">#7099</a></li>
  <li>TLS keepalive requests no longer share their context. Before when two calls were made to the same “server+hostname”
but different routes and using a keepalive connection, plugins that were active in the first call were also sometimes
(incorrectly) active in the second call. The wrong plugin was active because Kong was passing context in the SSL phase
to the plugin iterator, creating connection-wide structures in that context, which was then shared between different
keepalive requests. With this fix, Kong does not pass context to plugin iterators with the <code class="language-plaintext highlighter-rouge">certificate</code> phase,
avoiding plugin mixups.<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7102">#7102</a></li>
  <li>The HTTP status 405 is now handled by Kong’s error handler. Before accessing Kong Gateway using the TRACE method returned
a standard NGINX error page because the 405 wasn’t included in the error page settings of the NGINX configuration.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6933">#6933</a>.</li>
  <li>Custom <code class="language-plaintext highlighter-rouge">ngx.sleep</code> implementation in <code class="language-plaintext highlighter-rouge">init_worker</code> phase now invokes <code class="language-plaintext highlighter-rouge">update_time</code> in order to prevent time-based deadlocks
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7532">#7532</a></li>
  <li><code class="language-plaintext highlighter-rouge">Proxy-Authorization</code> header is removed when it is part of the original request <strong>or</strong> when a plugin sets it to the
same value as the original request
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7533">#7533</a></li>
  <li><code class="language-plaintext highlighter-rouge">HEAD</code> requests don’t provoke an error when a Plugin implements the <code class="language-plaintext highlighter-rouge">response</code> phase
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7535">#7535</a></li>
</ul>

<h4 id="hybrid-mode-5">Hybrid Mode</h4>
<ul>
  <li>Control planes no longer perform health checks on CRUD upstreams’ and targets’ events.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7085">#7085</a></li>
  <li>To prevent unnecessary cache flips on data planes, Kong now checks <code class="language-plaintext highlighter-rouge">dao:crud</code> events more strictly and has
a new cluster event, <code class="language-plaintext highlighter-rouge">clustering:push_config</code> for configuration pushes. These updates allow Kong to filter
invalidation events that do not actually require a database change. Furthermore, the clustering module does
not subscribe to the generic <code class="language-plaintext highlighter-rouge">invalidations</code> event, which has a more broad scope than database entity invalidations.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7112">#7112</a></li>
  <li>Data planes ignore null fields coming from control planes when doing schema validation.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7458">#7458</a></li>
  <li>Kong Gateway now includes the source in error logs produced by control planes.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7494">#7494</a></li>
  <li>With this release, data plane config hash calculation and checking is more consistent.
It is impervious to changes in table iterations. Hashes are calculated in both the control plane
and the data plane, and data planes send pings more immediately and with the new hash.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7483">#7483</a></li>
</ul>

<h4 id="balancer">Balancer</h4>
<ul>
  <li>All targets are returned by the Admin API now, including targets with a <code class="language-plaintext highlighter-rouge">weight=0</code>, or disabled targets.
Before disabled targets were not included in the output when users attempted to list all targets. Then
when users attempted to add the targets again, they received an error message telling them the targets already existed.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7094">#7094</a></li>
  <li>Upserting existing targets no longer fails.  Before, because of updates made to target configurations since Kong Gateway v2.2.0,
upserting older configurations would fail. This fix allows older configurations to be imported.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7052">#7052</a></li>
  <li>The last balancer attempt is now correctly logged. Before balancer tries were saved when retrying, which meant the last
retry state was not saved since there were no more retries. This update saves the failure state so it can be correctly logged.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6972">#6972</a></li>
  <li>Kong Gateway now ensures that the correct upstream event is removed from the queue when updating the balancer state.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7103">#7103</a></li>
</ul>

<h4 id="cli-3">CLI</h4>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">prefix</code> argument in the <code class="language-plaintext highlighter-rouge">kong stop</code> command now takes precedence over environment variables,
as it does in the <code class="language-plaintext highlighter-rouge">kong start</code> command. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7080">#7080</a></li>
</ul>

<h4 id="configuration-4">Configuration</h4>
<ul>
  <li>Declarative configurations now correctly parse custom plugin entities schemas with attributes called “plugins”. Before
when using declarative configurations, users with custom plugins that included a “plugins” field would encounter startup
exceptions. With this fix, the declarative configuration can now distinguish between plugins schema and custom plugins fields.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7412">#7412</a></li>
  <li>The stream access log configuration options are now properly separated from the HTTP access log. Before when users
used Kong Gateway with TCP, they couldn’t use a custom log format. With this fix, <code class="language-plaintext highlighter-rouge">proxy_stream_access_log</code> and <code class="language-plaintext highlighter-rouge">proxy_stream_error_log</code>
have been added to differentiate the Stream access log from the HTTP subsystem. See
<a href="/enterprise/2.5.x/property-reference/#proxy_stream_access_log"><code class="language-plaintext highlighter-rouge">proxy_stream_access_log</code></a>
and <a href="/enterprise/2.5.x/property-reference/#proxy_stream_error_log"><code class="language-plaintext highlighter-rouge">proxy_stream_error_log</code></a> in the Configuration
Property Reference for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7046">#7046</a></li>
</ul>

<h4 id="migrations">Migrations</h4>
<ul>
  <li>Kong Gateway no longer assumes that <code class="language-plaintext highlighter-rouge">/?/init.lua</code> is in the Lua path when doing migrations. Before, when users created
a custom plugin in a non-standard location and set <code class="language-plaintext highlighter-rouge">lua_package_path = /usr/local/custom/?.lua</code>, migrations failed.
Migrations failed because the Kong core file is <code class="language-plaintext highlighter-rouge">init.lua</code> and it is required as part of <code class="language-plaintext highlighter-rouge">kong.plugins.&lt;name&gt;.migrations</code>.
With this fix, migrations no longer expect <code class="language-plaintext highlighter-rouge">init.lua</code> to be a part of the path. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6993">#6993</a></li>
  <li>Kong Gateway no longer emits errors when doing <code class="language-plaintext highlighter-rouge">ALTER COLUMN</code> operations in Apache Cassandra 4.0.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7490">#7490</a>
    <blockquote>
      <p><strong>Important:</strong> Even with this fix, Cassandra 4.0 is not yet fully supported.</p>
    </blockquote>
  </li>
</ul>

<h4 id="pdk-3">PDK</h4>
<ul>
  <li>With this update, <code class="language-plaintext highlighter-rouge">kong.response.get_XXX()</code> functions now work in the log phase on external plugins. Before
<code class="language-plaintext highlighter-rouge">kong.response.get_XXX()</code> functions required data from the response object, which was not accessible in the
post-log timer used to call log handlers in external plugins. Now these functions work by accessing the required
data from the set saved at the start of the log phase.
See <a href="/enterprise/2.4.x/pdk/kong.response"><code class="language-plaintext highlighter-rouge">kong.response</code></a>
in the Plugin Development Kit for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7048">#7048</a></li>
  <li>External plugins handle certain error conditions better while the Kong Gateway balancer is being refreshed. Before
when an <code class="language-plaintext highlighter-rouge">instance_id</code> of an external plugin changed, and the plugin instance attempted to reset and retry,
it was failing because of a typo in the comparison. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7153">#7153</a>.</li>
  <li>With this release, <code class="language-plaintext highlighter-rouge">kong.log</code>’s phase checker now accounts for the existence of the new <code class="language-plaintext highlighter-rouge">response</code> pseudo-phase.
Before users may have erroneously received a safe runtime error for using a function out-of-place in the PDK.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7109">#7109</a></li>
  <li>Kong Gateway no longer sandboxes the <code class="language-plaintext highlighter-rouge">string.rep</code> function. Before <code class="language-plaintext highlighter-rouge">string.rep</code> was sandboxed to disallow a single operation
from allocating too much memory. However, a single operation allocating too much memory is no longer an issue
because in LuaJIT there are no debug hooks and it is trivial to implement a loop to allocate memory on every single iteration.
Additionally, since the <code class="language-plaintext highlighter-rouge">string</code> table is global and obtainable by any sandboxed string, its sandboxing provoked issues on global state.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7167">#7167</a></li>
  <li>The <code class="language-plaintext highlighter-rouge">kong.pdk.node</code> function can now correctly iterates over all the shared dict metrics. Before this fix,
users using the <code class="language-plaintext highlighter-rouge">kong.pdk.node</code> function could not see all shared dict metrics under the Stream subsystem.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7078">#7078</a></li>
</ul>

<h4 id="plugins-9">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/ldap-auth">LDAP Authentication</a> (<code class="language-plaintext highlighter-rouge">ldap-auth</code>)
The LDAP Authentication schema now includes a default value for the <code class="language-plaintext highlighter-rouge">config.ldap_port</code> parameter
that matches the documentation. Before the plugin documentation
<a href="/hub/kong-inc/ldap-auth/#parameters">Parameters</a>
section included a reference to a default value for the LDAP port; however, the default value was not included in the plugin schema.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7438">#7438</a></li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>)
The Prometheus plugin exporter now attaches subsystem labels to memory stats. Before, the HTTP
and Stream subsystems were not distinguished, so their metrics were interpreted as duplicate entries by Prometheus.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-prometheus/pull/118">#118</a></li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
    <ul>
      <li>The plugin now works even when <code class="language-plaintext highlighter-rouge">balancer_latency</code> is <code class="language-plaintext highlighter-rouge">nil</code>.</li>
      <li>The plugin no longer shares context between several Zipkin plugins. Before the plugin was using <code class="language-plaintext highlighter-rouge">ngx.ctx</code> exclusively,
even in a global context, which meant more than one instance of the Zipkin plugin would override each other. Now the plugin
uses <code class="language-plaintext highlighter-rouge">kong.ctx.plugin</code> to hold the <code class="language-plaintext highlighter-rouge">zipkin</code> table, instead of <code class="language-plaintext highlighter-rouge">ngx.ctx</code>.</li>
    </ul>
  </li>
  <li><a href="/enterprise/2.5.x/external-plugins">External plugins</a>
This release includes better error messages when external plugins fail to start. With this fix, Kong Gateway detects the return code
127 (command not found), allowing it to display an appropriate error message, “external plugin server start command exited
with command not found”. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7523">#7523</a></li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
and <a href="/hub/kong-inc/proxy-cache-advanced">Proxy Cache Advanced</a> (<code class="language-plaintext highlighter-rouge">proxy-cached-advanced</code>)
Kong now offers <code class="language-plaintext highlighter-rouge">ssl_verify</code> and <code class="language-plaintext highlighter-rouge">server_name</code> options for Redis Sentinel-based connections.
Before these options were only offered for Cluster or plain Redis connections, causing SSL to fail in Redis Sentinel configurations.</li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
This release fixes an error in the plugin where counters would not sync after a <code class="language-plaintext highlighter-rouge">PATCH</code> request.</li>
</ul>

<h2 id="2500-beta1">2.5.0.0 (beta1)</h2>
<p><strong>Release Date</strong> 2021/07/13</p>

<h3 id="features-3">Features</h3>

<h4 id="enterprise-9">Enterprise</h4>
<ul>
  <li>For users running in free mode, Kong has updated the top banner to include information on the benefits of and a link for updating to Konnect.</li>
  <li>This release includes several updates to Kong Manager, the Kong Gateway UI, including the following:
    <ul>
      <li>Support for the Mocking and Response Rate Limiting plugins.</li>
      <li>Updates to the Konnect Plugin page, allowing users to:
        <ul>
          <li>Create new plugin associated with <code class="language-plaintext highlighter-rouge">consumer</code> or <code class="language-plaintext highlighter-rouge">global</code>.</li>
          <li>View plugin details by clicking the row.</li>
          <li>Edit and delete plugins that are not associated with a <code class="language-plaintext highlighter-rouge">service</code> or <code class="language-plaintext highlighter-rouge">route</code>.</li>
          <li>Click the <code class="language-plaintext highlighter-rouge">applied to</code> entity type (<code class="language-plaintext highlighter-rouge">service</code>, <code class="language-plaintext highlighter-rouge">route</code>, or <code class="language-plaintext highlighter-rouge">consumer</code>) link to view the details of that entity.</li>
          <li>Sort the columns.</li>
          <li>Search by ID.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="core-7">Core</h4>
<ul>
  <li>Control Planes can now send updates to new data planes even if the control planes lose connection to the database.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6938">#6938</a></li>
  <li>Kong now automatically adds <code class="language-plaintext highlighter-rouge">cluster_cert</code>(<code class="language-plaintext highlighter-rouge">cluster_mtls=shared</code>) or <code class="language-plaintext highlighter-rouge">cluster_ca_cert</code>(<code class="language-plaintext highlighter-rouge">cluster_mtls=pki</code>) into
<code class="language-plaintext highlighter-rouge">lua_ssl_trusted_certificate</code> when operating in Hybrid mode. Before, Hybrid mode users needed to configure
<code class="language-plaintext highlighter-rouge">lua_ssl_trusted_certificate</code> manually as a requirement for Lua to verify the Control Plane’s certificate.
See <a href="/gateway-oss/2.5.x/hybrid-mode/#starting-data-plane-nodes">Starting Data Plane Nodes</a>
in the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7044">#7044</a></li>
  <li>New <code class="language-plaintext highlighter-rouge">declarative_config_string</code> option allows loading a declarative config directly from a string. See the
<a href="/gateway-oss/2.5.x/db-less-and-declarative-config/#loading-the-declarative-configuration-file">Loading The Declarative Configuration File</a> section of the DB-less and Declarative Configuration guide for more information.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7379">#7379</a></li>
</ul>

<h4 id="pdk-4">PDK</h4>
<ul>
  <li>The Kong PDK now accepts tables in the response body for Stream subsystems, just as it does for the HTTP subsystem.
Before developers had to check the subsystem if they wrote code that used the <code class="language-plaintext highlighter-rouge">exit()</code> function before calling it,
because passing the wrong argument type would break the request response.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7082">#7082</a></li>
</ul>

<h4 id="plugins-10">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/hmac-auth">HMAC Authentication</a> (<code class="language-plaintext highlighter-rouge">hmac-auth</code>)
The HMAC Authentication plugin now includes support for the <code class="language-plaintext highlighter-rouge">@request-target</code> field in the signature
string. Before, the plugin used the <code class="language-plaintext highlighter-rouge">request-line</code> parameter, which contains the HTTP request method, request URI, and
the HTTP version number. The inclusion of the HTTP version number in the signature caused requests to the same target
but using different request methods(such as HTTP/2) to have different signatures. The newly added request-target field
only includes the lowercase request method and request URI when calculating the hash, avoiding those issues.
See the <a href="/hub/kong-inc/hmac-auth">HMAC Authentication</a> documentation for more information.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7037">#7037</a></li>
  <li><a href="/hub/kong-inc/syslog">Syslog</a> (<code class="language-plaintext highlighter-rouge">syslog</code>)
The Syslog plugin now includes facility configuration options, which are a way for the plugin to group
error messages from different sources. See the description for the facility parameter in the
Parameters section of the <a href="/hub/kong-inc/syslog">Syslog documentation</a> for more
information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6081">#6081</a>.</li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>) The Prometheus plugin now exposes connected data planes’
status on the  control plane. New metrics include the following:  <code class="language-plaintext highlighter-rouge">data_plane_last_seen</code>, <code class="language-plaintext highlighter-rouge">data_plane_config_hash</code> and <code class="language-plaintext highlighter-rouge">data_plane_version_compatible</code>. These metrics can be useful for troubleshooting when data planes have inconsistent configurations across the cluster. See the <a href="/hub/kong-inc/prometheus/#available-metrics">Available metrics</a> section of the Prometheus plugin documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-prometheus/pull/98">#98</a></li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
The Zipkin plugin now includes the following tags: <code class="language-plaintext highlighter-rouge">kong.route</code>,<code class="language-plaintext highlighter-rouge">kong.service_name</code> and <code class="language-plaintext highlighter-rouge">kong.route_name</code>.
See the <a href="/hub/kong-inc/zipkin/#spans">Spans</a> section of the Zipkin plugin documentation for more information.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/115">#115</a></li>
</ul>

<h4 id="hybrid-mode-6">Hybrid Mode</h4>
<ul>
  <li>Kong now exposes an upstream health checks endpoint (using the status API) on the data plane for better
observability. See <a href="/gateway-oss/2.5.x/hybrid-mode/#readonly-status-api-endpoints-on-data-plane">Readonly Status API endpoints on Data Plane</a>
in the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7429">#7429</a></li>
  <li>Control Planes are now more lenient when checking Data Planes’ compatibility in Hybrid mode. See the
<a href="/gateway-oss/2.5.x/hybrid-mode/#version_compatibility">Version compatibility</a>
section of the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7488">#7488</a></li>
</ul>

<h3 id="dependencies-4">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openresty</code> from 1.19.3.1 to 1.19.3.2 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7430">#7430</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luasec</code> from 1.0 to 1.0.1 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7126">#7126</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luarocks</code> from 3.5.0 to 3.7.0 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7043">#7043</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">grpcurl</code> from 1.8.0 to 1.8.1 <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7128">#7128</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">penlight</code> from 1.9.2 to 1.10.0 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7127">#7127</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-dns-client</code> from 6.0.0 to 6.0.2 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7539">#7539</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-prometheus</code> from 1.2 to 1.3 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7415">#7415</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-zipkin</code> from 1.3 to 1.4 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7455">#7455</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> from 0.7.2 to 0.7.3 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7509">#7509</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code> from 1.4.1 to 1.4.2 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7511">#7511</a></li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">hmac-auth</code> from 2.3.0 to 2.4.0 <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7522">#7522</a></li>
  <li>Pinned <code class="language-plaintext highlighter-rouge">lua-protobuf</code> to 0.3.2 (previously unpinned) <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7079">#7079</a></li>
</ul>

<h3 id="fixes-7">Fixes</h3>

<h4 id="enterprise-10">Enterprise</h4>
<ul>
  <li>Renamed the property identifying control planes in hybrid mode when using Vitals with
anonymous reports enabled. Before, users received an error on their control planes about
a function that could not be used.</li>
  <li>Kong now starts even when <code class="language-plaintext highlighter-rouge">SSL_CIPHER_SUITE</code> is set to <code class="language-plaintext highlighter-rouge">modern</code> when the Kong Dev Portal is enabled.
Before, Kong would fail to start with an NGINX configuration error, “invalid number of arguments in
‘ssl_ciphers’ directive”.</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-openssl</code> to v0.7.3, fixing an error users were encountering when trying
to synchronize configurations from control planes to data planes. Users were seeing the following errors
in the ingress controller logs, indicating their configurations were not successfully being pushed to the
Kong proxy node: “failed to update kong configuration”,”declarative config is invalid,” and “failed to sync”.</li>
  <li>Users can now set <code class="language-plaintext highlighter-rouge">enforce_rbac</code> to <code class="language-plaintext highlighter-rouge">both</code> and still be able to log into Kong Gateway’s UI, Kong Manager.</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code> to v1.4.2 which fixes an error where Kong would spam ‘nothing to do’ in
the logs multiple times per second, slowing down performance.</li>
  <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-dns-client</code> to v6.0.1 which fixes an issue users were encountering when
adding more than 1000 endpoints, resulting in the error <code class="language-plaintext highlighter-rouge">lua_max_running_timers are not enough</code> throughout the logs.</li>
</ul>

<h4 id="core-8">Core</h4>
<ul>
  <li>When using DB-less mode, <code class="language-plaintext highlighter-rouge">select_by_cache_key</code> now finds entities by using the provided <code class="language-plaintext highlighter-rouge">field</code> directly
in ` select_by_key` and does not complete unnecessary cache reads. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7146">#7146</a></li>
  <li>Kong can now finish initialization even if a plugin’s <code class="language-plaintext highlighter-rouge">init_worker</code> handler fails, improving stability.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7099">#7099</a></li>
  <li>TLS keepalive requests no longer share their context. Before when two calls were made to the same “server+hostname”
but different routes and using a keepalive connection, plugins that were active in the first call were also sometimes
(incorrectly) active in the second call. The wrong plugin was active because Kong was passing context in the SSL phase
to the plugin iterator, creating connection-wide structures in that context, which was then shared between different
keepalive requests. With this fix, Kong does not pass context to plugin iterators with the <code class="language-plaintext highlighter-rouge">certificate</code> phase,
avoiding plugin mixups.<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7102">#7102</a></li>
  <li>The HTTP status 405 is now handled by Kong’s error handler. Before accessing Kong using the TRACE method returned
a standard NGINX error page because the 405 wasn’t included in the error page settings of the NGINX configuration.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6933">#6933</a>.</li>
  <li>Custom <code class="language-plaintext highlighter-rouge">ngx.sleep</code> implementation in <code class="language-plaintext highlighter-rouge">init_worker</code> phase now invokes <code class="language-plaintext highlighter-rouge">update_time</code> in order to prevent time-based deadlocks
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7532">#7532</a></li>
  <li><code class="language-plaintext highlighter-rouge">Proxy-Authorization</code> header is removed when it is part of the original request <strong>or</strong> when a plugin sets it to the
same value as the original request
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7533">#7533</a></li>
  <li><code class="language-plaintext highlighter-rouge">HEAD</code> requests don’t provoke an error when a Plugin implements the <code class="language-plaintext highlighter-rouge">response</code> phase
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7535">#7535</a></li>
</ul>

<h4 id="hybrid-mode-7">Hybrid Mode</h4>
<ul>
  <li>Control planes no longer perform health checks on CRUD upstreams’ and targets’ events.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7085">#7085</a></li>
  <li>To prevent unnecessary cache flips on data planes, Kong now checks <code class="language-plaintext highlighter-rouge">dao:crud</code> events more strictly and has
a new cluster event, <code class="language-plaintext highlighter-rouge">clustering:push_config</code> for configuration pushes. These updates allow Kong to filter
invalidation events that do not actually require a database change. Furthermore, the clustering module does
not subscribe to the generic <code class="language-plaintext highlighter-rouge">invalidations</code> event, which has a more broad scope than database entity invalidations.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7112">#7112</a></li>
  <li>Data Planes ignore null fields coming from control planes when doing schema validation.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7458">#7458</a></li>
  <li>Kong now includes the source in error logs produced by control planes.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7494">#7494</a></li>
  <li>With this release, data plane config hash calculation and checking is more consistent.
It is impervious to changes in table iterations. Hashes are calculated in both the control plane
and the data plane, and data planes send pings more immediately and with the new hash.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7483">#7483</a></li>
</ul>

<h4 id="balancer-1">Balancer</h4>
<ul>
  <li>All targets are returned by the Admin API now, including targets with a <code class="language-plaintext highlighter-rouge">weight=0</code>, or disabled targets.
Before disabled targets were not included in the output when users attempted to list all targets. Then
when users attempted to add the targets again, they received an error message telling them the targets already existed.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7094">#7094</a></li>
  <li>Upserting existing targets no longer fails.  Before, because of updates made to target configurations since Kong v2.2.0,
upserting older configurations would fail. This fix allows older configurations to be imported.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7052">#7052</a></li>
  <li>The last balancer attempt is now correctly logged. Before balancer tries were saved when retrying, which meant the last
retry state was not saved since there were no more retries. This update saves the failure state so it can be correctly logged.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6972">#6972</a></li>
  <li>Kong now ensures that the correct upstream event is removed from the queue when updating the balancer state.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7103">#7103</a></li>
</ul>

<h4 id="cli-4">CLI</h4>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">prefix</code> argument in the <code class="language-plaintext highlighter-rouge">kong stop</code> command now takes precedence over environment variables,
as it does in the <code class="language-plaintext highlighter-rouge">kong   start</code> command. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7080">#7080</a></li>
</ul>

<h4 id="configuration-5">Configuration</h4>
<ul>
  <li>Declarative configurations now correctly parse custom plugin entities schemas with attributes called “plugins”. Before
when using declarative configurations, users with custom plugins that included a “plugins” field would encounter startup
exceptions. With this fix, the declarative configuration can now distinguish between plugins schema and custom plugins fields.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7412">#7412</a></li>
  <li>The stream access log configuration options are now properly separated from the HTTP access log. Before when users
used Kong with TCP, they couldn’t use a custom log format. With this fix, <code class="language-plaintext highlighter-rouge">proxy_stream_access_log</code> and <code class="language-plaintext highlighter-rouge">proxy_stream_error_log</code>
have been added to differentiate the Stream access log from the HTTP subsystem. See
<a href="/enterprise/2.4.x/property-reference/#proxy_stream_access_log"><code class="language-plaintext highlighter-rouge">proxy_stream_access_log</code></a>
and <a href="/enterprise/2.4.x/property-reference/#proxy_stream_error_log"><code class="language-plaintext highlighter-rouge">proxy_stream_error_log</code></a> in the Configuration
Property Reference for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7046">#7046</a></li>
</ul>

<h4 id="migrations-1">Migrations</h4>
<ul>
  <li>Kong no longer assumes that <code class="language-plaintext highlighter-rouge">/?/init.lua</code> is in the Lua path when doing migrations. Before, when users created
a custom plugin in a non-standard location and set <code class="language-plaintext highlighter-rouge">lua_package_path = /usr/local/custom/?.lua</code>, migrations failed.
Migrations failed because the Kong core file is <code class="language-plaintext highlighter-rouge">init.lua</code> and it is required as part of <code class="language-plaintext highlighter-rouge">kong.plugins.&lt;name&gt;.migrations</code>.
With this fix, migrations no longer expect <code class="language-plaintext highlighter-rouge">init.lua</code> to be a part of the path. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/6993">#6993</a></li>
  <li>Kong no longer emits errors when doing <code class="language-plaintext highlighter-rouge">ALTER COLUMN</code> operations in Apache Cassandra 4.0.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7490">#7490</a>
    <blockquote>
      <p><strong>Important:</strong> Even with this fix, Cassandra 4.0 is not yet fully supported.</p>
    </blockquote>
  </li>
</ul>

<h4 id="pdk-5">PDK</h4>
<ul>
  <li>With this update, <code class="language-plaintext highlighter-rouge">kong.response.get_XXX()</code> functions now work in the log phase on external plugins. Before
<code class="language-plaintext highlighter-rouge">kong.response.get_XXX()</code> functions required data from the response object, which was not accessible in the
post-log timer used to call log handlers in external plugins. Now these functions work by accessing the required
data from the set saved at the start of the log phase.
See <a href="/enterprise/2.4.x/pdk/kong.response"><code class="language-plaintext highlighter-rouge">kong.response</code></a>
in the Plugin Development Kit for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7048">#7048</a></li>
  <li>External plugins handle certain error conditions better while the Kong balancer is being refreshed. Before
when an <code class="language-plaintext highlighter-rouge">instance_id</code> of an external plugin changed, and the plugin instance attempted to reset and retry,
it was failing because of a typo in the comparison. <a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7153">#7153</a>.</li>
  <li>With this release, <code class="language-plaintext highlighter-rouge">kong.log</code>’s phase checker now accounts for the existence of the new <code class="language-plaintext highlighter-rouge">response</code> pseudo-phase.
Before users may have erroneously received a safe runtime error for using a function out-of-place in the PDK.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7109">#7109</a></li>
  <li>Kong no longer sandboxes the <code class="language-plaintext highlighter-rouge">string.rep</code> function. Before <code class="language-plaintext highlighter-rouge">string.rep</code> was sandboxed to disallow a single operation
from allocating too much memory. However, a single operation allocating too much memory is no longer an issue
because in LuaJIT there are no debug hooks and it is trivial to implement a loop to allocate memory on every single iteration.
Additionally, since the <code class="language-plaintext highlighter-rouge">string</code> table is global and obtainable by any sandboxed string, its sandboxing provoked issues on global state.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7167">#7167</a></li>
  <li>The <code class="language-plaintext highlighter-rouge">kong.pdk.node</code> function can now correctly iterates over all the shared dict metrics. Before this fix,
users using the <code class="language-plaintext highlighter-rouge">kong.pdk.node</code> function could not see all shared dict metrics under the Stream subsystem.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7078">#7078</a></li>
</ul>

<h4 id="plugins-11">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/ldap-auth">LDAP Authentication</a> (<code class="language-plaintext highlighter-rouge">ldap-auth</code>)
The LDAP Authentication schema now includes a default value for the <code class="language-plaintext highlighter-rouge">config.ldap_port</code> parameter
that matches the documentation. Before the plugin documentation
<a href="/hub/kong-inc/ldap-auth/#parameters">Parameters</a>
section included a reference to a default value for the LDAP port; however, the default value was not included in the plugin schema.
<a rel="nofollow noopener noreferrer" href="https://github.com/kong/kong/pull/7438">#7438</a></li>
  <li><a href="/hub/kong-inc/prometheus">Prometheus</a> (<code class="language-plaintext highlighter-rouge">prometheus</code>)
The Prometheus plugin exporter now attaches subsystem labels to memory stats. Before, the HTTP
and Stream subsystems were not distinguished, so their metrics were interpreted as duplicate entries by Prometheus.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-prometheus/pull/118">#118</a></li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
    <ul>
      <li>The plugin now works even when <code class="language-plaintext highlighter-rouge">balancer_latency</code> is <code class="language-plaintext highlighter-rouge">nil</code>.</li>
      <li>The plugin no longer shares context between several Zipkin plugins. Before the plugin was using <code class="language-plaintext highlighter-rouge">ngx.ctx</code> exclusively,
even in a global context, which meant more than one instance of the Zipkin plugin would override each other. Now the plugin
uses <code class="language-plaintext highlighter-rouge">kong.ctx.plugin</code> to hold the <code class="language-plaintext highlighter-rouge">zipkin</code> table, instead of <code class="language-plaintext highlighter-rouge">ngx.ctx</code>.</li>
    </ul>
  </li>
  <li><a href="/enterprise/2.4.x/external-plugins">External plugins</a>
This release includes better error messages when external plugins fail to start. With this fix, Kong detects the return code
127 (command not found), allowing it to display an appropriate error message, “external plugin server start command exited
with command not found”. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7523">#7523</a></li>
</ul>

<h2 id="2413">2.4.1.3</h2>
<p><strong>Release Date</strong> 2021/09/02</p>

<h3 id="fixes-8">Fixes</h3>

<h4 id="enterprise-11">Enterprise</h4>
<ul>
  <li>This release fixes a regression in the Kong Dev Portal templates that removed dynamic menu navigation and other improvements
from portals created in Kong Gateway v2.4.1.2.</li>
</ul>

<h2 id="2412">2.4.1.2</h2>
<p><strong>Release Date</strong> 2021/08/18</p>

<h3 id="fixes-9">Fixes</h3>

<h4 id="enterprise-12">Enterprise</h4>
<ul>
  <li>Users can now successfully delete workspaces after deleting all entities associated with that workspace.
Previously, Kong Gateway was not correctly cleaning up parent-child relationships. For example, creating
an Admin also creates a Consumer and RBAC user. When deleting the Admin, the Consumer and RBAC user are
also deleted, but accessing the <code class="language-plaintext highlighter-rouge">/workspaces/workspace_name/meta</code> endpoint would show counts for Consumers
and RBAC users, which prevented the workspace from being deleted. Now deleting entities correctly updates
the counts, allowing an empty workspace to be deleted.</li>
  <li>Updates Kong Dev Portal templates’ JQuery dependency to v3.6.0, improving security.</li>
  <li>Users with the <code class="language-plaintext highlighter-rouge">kong_admin</code> role can now log in to Kong Manager when <code class="language-plaintext highlighter-rouge">enforce_rbac=both</code> is set.</li>
  <li>Renames the property identifying control planes in hybrid mode when using Kong Vitals with anonymous
reports enabled. Before, users received the error, <code class="language-plaintext highlighter-rouge">Cannot use this function in data plane</code>, on their control planes.</li>
  <li>Updates Nettle dependency version from <code class="language-plaintext highlighter-rouge">3.7.2</code> to <code class="language-plaintext highlighter-rouge">3.7.3</code>, fixing bugs that could cause
RSA decryption functions to crash with invalid inputs.</li>
</ul>

<h4 id="plugins-12">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
With this fix, when the OpenID Connect plugin is configured with a <code class="language-plaintext highlighter-rouge">config.anonymous</code> consumer and
<code class="language-plaintext highlighter-rouge">config.scopes_required</code> is set, a token missing the required scopes will have the anonymous consumer
headers set when sent to the upstream.</li>
  <li>Fixes a regression in the Kong Collector plugin that caused HARs to be kept in its queue indefinitely.</li>
</ul>

<h4 id="hybrid-mode-8">Hybrid Mode</h4>
<ul>
  <li>Control planes are now more lenient when checking data planes’ compatibility in hybrid mode. See the
<a href="/gateway-oss/2.4.x/hybrid-mode/#version-compatibility">Version compatibility</a>
section of the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7488">#7488</a></li>
</ul>

<h2 id="2411">2.4.1.1</h2>
<p><strong>Release Date</strong> 2021/05/27</p>

<h3 id="fixes-10">Fixes</h3>

<h4 id="enterprise-13">Enterprise</h4>
<ul>
  <li>Kong Gateway now automatically removes trailing and leading whitespaces from RBAC
<code class="language-plaintext highlighter-rouge">user_token</code> entries. Before, both Kong Manager and the Admin API (/rbac/users)
allowed creating RBAC tokens with trailing whitespace. However, HTTP does not
allow whitespace in the <code class="language-plaintext highlighter-rouge">Kong-Admin-Token</code> header value. Subsequently, a successfully
created RBAC token was not usable. This was especially an issue when using Kong Manager
to create tokens as it’s hard to see any accidental whitespace in the text field.</li>
  <li>Kong Immunity used to send query parameters in plain text. With this fix,
query parameters are now sent obfuscated.</li>
</ul>

<h4 id="plugins-13">Plugins</h4>
<ul>
  <li>When making a call using the <a href="/hub/kong-inc/mtls-auth">mTLS Authentication</a> plugin,
instead of a successful connection, users received an error and the call was cancelled.
With this fix, Kong Gateway now ensures the certificate phase is set in <code class="language-plaintext highlighter-rouge">ngx.ctx</code>,
and the mTLS Authentication plugin works as expected.</li>
</ul>

<h2 id="2410">2.4.1.0</h2>
<p><strong>Release Date</strong> 2021/05/18</p>

<h3 id="features-4">Features</h3>

<h4 id="core-9">Core</h4>
<ul>
  <li>This Kong Gateway version introduces relaxed version checks in hybrid mode between control planes
and data planes, allowing data planes that are missing minor updates (up to two) to
still connect to the control plane. Also, data planes are allowed to have a superset
of plugins in addition to the control plane plugins. See
<a href="/enterprise/2.4.x/deployment/hybrid-mode/#limitations">Hybrid mode - limitations</a> for
more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6932">6932</a>
    <div class="alert alert-ee blue">
  Data planes are not allowed to connect to control planes if they are a different major version,
  a version newer than the control plane’s version, or missing plugins from the control plane.
</div>
  </li>
  <li>UTF-8 characters can now be used in tags. This update expands the range of
accepted characters in tags from a limited set of ASCII characters to almost all UTF-8 sequences.
Exceptions:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">,</code> and <code class="language-plaintext highlighter-rouge">/</code> are reserved for filtering tags with “and” and “or”, and are not allowed in tags.</li>
      <li>Non-printable ASCII (for example, the space character) is not allowed.
See <a href="/enterprise/2.4.x/admin-api/#tags">Tags</a> in the Admin API documentation for more information.</li>
    </ul>
  </li>
  <li>Kong Gateway now supports using an Online Certificate Status Protocol (OCSP) responder in the cluster for
hybrid mode control planes. This new feature can be configured in the <code class="language-plaintext highlighter-rouge">kong.conf</code> file. See
<a href="/enterprise/2.4.x/property-reference/#cluster_ocsp"><code class="language-plaintext highlighter-rouge">cluster_oscp</code></a> in the Configuration Reference for
more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6887">6887</a></li>
  <li>Postgres <code class="language-plaintext highlighter-rouge">ssl_version</code> configuration now defaults to <code class="language-plaintext highlighter-rouge">any</code>. If <code class="language-plaintext highlighter-rouge">ssl_version</code> is not explicitly set,
the <code class="language-plaintext highlighter-rouge">any</code> option ensures that <code class="language-plaintext highlighter-rouge">luasec</code> will negotiate the most secure protocol available.</li>
</ul>

<h4 id="enterprise-14">Enterprise</h4>
<p>When using Kong Gateway in Hybrid mode, if you’re not using features (for example, new plugin offerings)
that the data planes don’t know about (because they aren’t using a version that contains that feature),
the data planes can still read from a control plane of a more recent version. Prior to v2.4.1.0, we did
our version compatibility checks at connection initiation, which meant that incompatibilities in the data plane
were enforced even if those incompatibilities weren’t being used by the configuration at all.  We’ve now switched
the check to happen at configuration read time. See the
<a href="/enterprise/2.4.x/deployment/hybrid-mode/#version-compatibility">Version Compatibility</a>
section of the Hybrid Mode Overview for more information.</p>

<h4 id="pdk-6">PDK</h4>
<ul>
  <li>This release includes a new JavaScript Plugin Development Kit (PDK). This addition
allows users to write Kong plugins in JavaScript and TypeScript. See
<a href="/enterprise/2.4.x/external-plugins/#developing-javascript-plugins">Developing JavaScript plugins</a>
for more information.</li>
  <li>This release includes support for the Protobuf plugin communication protocol, which can be used in
place of MessagePack to communicate with non-Lua plugins. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6941">6941</a></li>
  <li>Plugin writers can now use the <code class="language-plaintext highlighter-rouge">ssl_certificate</code> phase on plugins in the
 <a href="/enterprise/2.4.x/plugin-development/custom-logic/#available-contexts">Stream module</a>.
Previously plugin writers could not use the <code class="language-plaintext highlighter-rouge">ssl_certificate</code> phase on plugins in the <code class="language-plaintext highlighter-rouge">stream</code> module,
as it was only supported with the HTTP module.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6873">6873</a></li>
</ul>

<h4 id="plugins-14">Plugins</h4>
<ul>
  <li><strong>New plugin:</strong> <a href="/hub/kong-inc/opa">OPA</a> (<code class="language-plaintext highlighter-rouge">opa</code>)
    <ul>
      <li>The OPA plugin forwards requests to an Open Policy Agent and processes the request
only if the authorization policy allows for it.</li>
    </ul>
  </li>
  <li><strong>New plugin:</strong> <a href="/hub/kong-inc/mocking">Mocking</a> (<code class="language-plaintext highlighter-rouge">mocking</code>)
    <ul>
      <li>The Kong Mocking plugin leverages standards-based Open API Specifications (OAS)
for sending out mock responses to APIs.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
    <ul>
      <li>The plugin now supports OT and Jaeger style <code class="language-plaintext highlighter-rouge">uber-trace-id</code> headers. See <code class="language-plaintext highlighter-rouge">config.header_type</code> in
the <a href="/hub/kong-inc/zipkin/#parameters">Parameters</a> section of the Zipkin
plugin documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/101">101</a></li>
      <li>The plugin now allows insertion of custom tags on the Zipkin request trace. See <code class="language-plaintext highlighter-rouge">config.tags_header</code>
in the <a href="/hub/kong-inc/zipkin/#parameters">Parameters</a> section of the Zipkin
plugin documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/102">102</a></li>
      <li>The plugin now allows the creation of baggage items on child spans.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/98">98</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt">JWT</a> (<code class="language-plaintext highlighter-rouge">jwt</code>)
    <ul>
      <li>The plugin now supports ES384 JWTs signature validation. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6854">6854</a></li>
    </ul>
  </li>
  <li>Logging plugins: <a href="/hub/kong-inc/file-log">File Log</a>, <a href="/hub/kong-inc/loggly">Loggly</a>,
<a href="/hub/kong-inc/syslog">Syslog</a>, <a href="/hub/kong-inc/tcp-log">TCP Log</a>, <a href="/hub/kong-inc/udp-log">UDP Log</a>,
and <a href="/hub/kong-inc/http-log">HTTP Log</a>
    <ul>
      <li>Kong administrators now have a powerful new capability to transform logs to any format that’s needed
for capturing, indexing, and correlating logs. When formatting, developers also have the ability to
execute custom Lua code, opening up a new range of possibilities for generating logs to whichever specification
administrators need the most. This feature uses the new PDK method <code class="language-plaintext highlighter-rouge">kong.log.set_serialize_value</code>,
as well as the new sandbox capability, both introduced in Kong v2.3. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6944">6944</a></li>
    </ul>
  </li>
</ul>

<h3 id="dependencies-5">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">opentracing-cpp</code> from v1.5.1 to v1.6.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">datadog</code> from v1.1.2 to v1.3.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">nginx-opentracing</code> from v0.9.0 to v0.14.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">jaeger</code> from v0.5.0 to v0.7.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-nettle</code> from v1.8.3 to v2.0.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openresty</code> from v1.17.8.2 to v1.19.3.1</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">luasec</code> from v1.0.0 to v1.0.1</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">prometheus</code> from v1.2.0 to v1.2.1</li>
</ul>

<h3 id="fixes-11">Fixes</h3>

<h4 id="core-10">Core</h4>
<ul>
  <li>Kong 2.4 ensures that all the Core entities are loaded before loading any plugins.
This fixes an error in which plugins could not link to or modify Core entities
because they were not loaded yet. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6880">6880</a></li>
  <li>Schema validations now log more descriptive error messages when types are invalid.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6593">6593</a></li>
  <li>Kong now ignores tags in Cassandra when filtering by multiple entities, which is the
expected behavior and the one already existent when using Postgres databases.
See <a href="/enterprise/2.4.x/admin-api/#tags">Tags</a> in the Admin API
documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6931">6931</a></li>
  <li>Users can proxy websockets through Kong when using Chrome or Firefox. <code class="language-plaintext highlighter-rouge">HTTP Connection</code>
headers usually carry a list of headers meant for receivers (in this case a proxy) that
are not meant to be proxied further (hop-by-hop headers). The Kong Gateway correctly
cleans these headers, but it was a bit too aggressive and the <code class="language-plaintext highlighter-rouge">Upgrade</code> header was cleared
from response <code class="language-plaintext highlighter-rouge">Connection</code> headers, causing the connections to fail when using Firefox
or Chrome. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6929">6929</a></li>
  <li>Kong now accepts fully-qualified domain names ending in dots to be compliant with
RFC <a rel="nofollow noopener noreferrer" href="https://datatracker.ietf.org/doc/html/rfc3986#section-3.2.2">3986</a> internet standard.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6864">6864</a></li>
  <li>Kong has removed unnecessary load from DNS servers by resolving an issue occurring when
using upstreams for load balancing. When caching services, Kong does not warmup upstream
names used as service hosts entries when warming up DNS entries, as they are not real DNS
entries. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6891">6891</a></li>
  <li>Migrations order is now guaranteed to be always the same. Before, the order in which the
subsystems were loaded changed randomly. Now, subsystems are sorted alphabetically, so the
order in which migrations are executed is constant. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6901">6901</a></li>
  <li>Buffered responses are disabled on connection upgrades. Kong cannot do buffered responses with,
for example, websocket connection upgrades. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6902">6902</a></li>
  <li>The host header is updated between balancer retries. Before, Kong Gateway set the <code class="language-plaintext highlighter-rouge">Host</code> header during
the access phase only and would send the wrong header if a target failed to serve and needed
to be retried. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6796">6796</a></li>
  <li>Fixed an issue that occurred when using upstreams for load balancing, where Kong was attempting
to resolve the upstream name instead of the hostname and failing with the errors <code class="language-plaintext highlighter-rouge">name resolution failed</code>
and <code class="language-plaintext highlighter-rouge">dns server error: 3 name error</code>. The following updates correct the issue:
    <ul>
      <li>Kong does not cache empty upstream name dictionaries. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7002">7002</a></li>
      <li>Kong does not assume upstreams don’t exist after init phases. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7010">7010</a></li>
    </ul>
  </li>
  <li>Balancer retries now send the upstream the correct target hostname. This fix was originally include in
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#212">Kong v2.1.2</a> but was reverted because of an
issue in the Lua INGINX module. The Lua INGINX module issue has been fixed, and the original balancer
retry fix re-applied. <a rel="nofollow noopener noreferrer" href="https://github.com/openresty/lua-nginx-module/pull/1770">1770</a></li>
  <li>The Developer Portal is now disabled when running without a license.</li>
  <li>Kong now ensures healthchecks and balancers are not created on control plane nodes.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7085">7085</a></li>
  <li>This release includes the following optimizations of Kong’s URL normalization code:
    <ul>
      <li>only runs regex when necessary</li>
      <li>normalizes <code class="language-plaintext highlighter-rouge">/..</code>,<code class="language-plaintext highlighter-rouge">/.</code>, and <code class="language-plaintext highlighter-rouge">//</code> if necessary</li>
      <li>moves anonymous callback functions to module local functions
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7100">7100</a></li>
    </ul>
  </li>
  <li>Fixed an issue where control plane nodes would needlessly invalidate and send new configurations
to data plane nodes. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7112">7112</a></li>
  <li>Kong now ensures HTTP code <code class="language-plaintext highlighter-rouge">405</code> is handled by Kong’s error page. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6933">6933</a></li>
  <li>Kong now ensures errors in plugins <code class="language-plaintext highlighter-rouge">init_worker</code> do not break Kong’s worker intialization.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7099">7099</a></li>
  <li>Fixed an issue where two subsequent TLS keep-alive requests would lead to incorrect
plugin execution. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7102">7102</a></li>
  <li>Kong now ensures Targets upsert operation behaves similarly to other entities’ upsert method.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7052">7052</a></li>
  <li>Kong now ensures failed balancer retries are saved and accounted for in log data.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6972">6972</a></li>
</ul>

<h4 id="enterprise-15">Enterprise</h4>
<ul>
  <li>Workspaces now allow special characters in their names. Kong Manager and the Dev Portal now correctly
display these characters. This update also fixes an issue where workspaces with special characters
were not correctly detecting collisions in route validation.</li>
</ul>

<h4 id="cli-5">CLI</h4>
<p>Kong now ensures <code class="language-plaintext highlighter-rouge">kong start</code> and <code class="language-plaintext highlighter-rouge">kong stop</code> prioritize the CLI flag <code class="language-plaintext highlighter-rouge">--prefix</code> over
environmental variable <code class="language-plaintext highlighter-rouge">KONG_PREFIX</code>. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7080">7080</a></p>

<h4 id="configuration-6">Configuration</h4>
<p>Kong now ensures the <a href="/enterprise/2.4.x/plugin-development/custom-logic/#available-contexts">Stream module</a>
subsystem allows for configuration of access logs format. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7046">7046</a></p>

<h4 id="admin-api-5">Admin API</h4>
<p>Kong now ensures targets with a weight of 0 are displayed in the Admin API.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7094">7094</a></p>

<h4 id="pdk-7">PDK</h4>
<ul>
  <li>Kong Gateway no longer leaves plugin servers alive after exiting and does not try to
start them in the unsupported stream subsystem. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6849">6849</a></li>
  <li>Golang does not cache <code class="language-plaintext highlighter-rouge">kong.log</code> methods. The <code class="language-plaintext highlighter-rouge">kong</code> table has some special-case logic
for the <code class="language-plaintext highlighter-rouge">.log</code> subtable, and avoiding caching preserves this logic. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6701">6701</a></li>
  <li>Config file style and options case are now consistent. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6981">6981</a></li>
  <li>Added correct Protobuf MacOS path to enable external plugins in Homebrew installations. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6980">6980</a></li>
  <li>Kong Gateway now auto-escapes upstream paths (<code class="language-plaintext highlighter-rouge">kong.service.request.set_path()</code>) to avoid proxying errors.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6978">6978</a></li>
  <li>In the Golang PDK, ports are now declared as <code class="language-plaintext highlighter-rouge">Int</code>. Before they were incorrectly declared
<code class="language-plaintext highlighter-rouge">Strings</code>. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6994">6994</a></li>
  <li>Kong now ensures the new <code class="language-plaintext highlighter-rouge">response</code> phase is accounted for in the phase checkers.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7109">7109</a></li>
</ul>

<h4 id="plugins-15">Plugins</h4>
<ul>
  <li>The <a href="/hub/kong-inc/rate-limiting">Rate Limiting</a> and <a href="/hub/kong-inc/response-ratelimiting">Response Rate Limiting</a>
plugins included default options that did not work well with DB-less or hybrid deployments because the
database is not available on data plane nodes. With this fix, the default values and validation rules are now
compatible with DB-less or hybrid modes. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6885">6885</a></li>
  <li><a href="/hub/kong-inc/oauth2">OAuth 2.0</a> (<code class="language-plaintext highlighter-rouge">oauth2</code>)
    <ul>
      <li>To improve user experience and limit confusion, the plugin now handles cases of client invalid
token generation in a more predictable way. Before, the resulting error codes were confusing and
unhelpful, often leading users to the wrong conclusions. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6594">6594</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
    <ul>
      <li>The W3C parsing function was returning a non-used extra value that has been removed, and the plugin
now early-exits if there is a problem with the W3C Trace Context header.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/100">100</a></li>
      <li>Fixed a bug which randomly caused requests to fail with a 400 error code during span timestamping if
the access phase was skipped. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/105">105</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt-signer">Kong JWT Signer</a> (<code class="language-plaintext highlighter-rouge">jwt-signer</code>)
    <ul>
      <li>Cache now uses upsert instead of insert/update with databases.</li>
      <li>Key rotation is now more resilient on errors. For example, previously if there were errors like an error
connecting to an external JSON Web Key Set(JWKS) url endpoint to fetch the JWKS, the error would halt progress.
Now, the plugin attempts to respond more resiliently, for instance by using older JWKS already downloaded.</li>
      <li>Adds DB-less improvements. Before the plugin included some code paths that attempted to write data to a database.
These code paths would cause errors with DB-less mode. Now instead of attempting to write data to a database,
these code paths use alternative solutions such as storing data in local memory.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/exit-transformer">Exit Transformer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>The plugin was not allowing access to any Kong modules within the sandbox except <code class="language-plaintext highlighter-rouge">kong.request</code>,
which prevented access to other necessary modules such as <code class="language-plaintext highlighter-rouge">kong.log</code>.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/hmac-auth">HMAC Authentication</a> (<code class="language-plaintext highlighter-rouge">hmac-auth</code>)
    <ul>
      <li>The plugin now enables Just-in-time(JIT) compilation of authorization header regex.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7037">7037</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/mtls-auth">MTLS Authentication</a> (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)
    <ul>
      <li>Fixed an issue where the plugin did not work in DB-less mode.</li>
    </ul>
  </li>
  <li>Kong now ensures plugins written in languages other than Lua can use <code class="language-plaintext highlighter-rouge">kong.reponse.get_*</code>
methods, for example <code class="language-plaintext highlighter-rouge">kong.reponse.get_status</code>. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7048">7048</a></li>
</ul>

<h3 id="deprecated">Deprecated</h3>
<ul>
  <li>The BasePlugin class was deprecated in Kong v2.4.x and will be removed in v3.0.x. Plugins
that extend <code class="language-plaintext highlighter-rouge">base_plugin.lua</code> will continue to work until v3.0.x but should be updated to the
newer, simplier <a href="/enterprise/2.4.x/plugin-development/custom-logic">pattern</a>.</li>
</ul>

<h3 id="known-issues">Known issues</h3>
<p>The <a href="/hub/kong-inc/mtls-auth">mTLS Authentication</a> plugin is incompatible with Kong Gateway v2.4.1.0.
When making a call using the mTLS Authentication plugin, instead of a successful connection, users
recieve an error and the call is aborted. This error is caused by an update to the way Kong handles
keep-alive connections. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7102">7102</a></p>

<h2 id="2400-beta">2.4.0.0 (beta)</h2>
<p><strong>Release Date</strong> 2021/04/13</p>

<h3 id="features-5">Features</h3>

<h4 id="core-11">Core</h4>
<ul>
  <li>This Kong Gateway version introduces relaxed version checks in hybrid mode between control planes
and data planes, allowing data planes that are missing minor updates (up to two) to
still connect to the control plane. Also, data planes are allowed to have a superset
of plugins in addition to the control plane plugins. See <a href="/gateway-oss/2.4.x/hybrid-mode/#managing-the-cluster-using-control-plane-nodes">Managing the cluster using Control Plane
nodes</a> for
more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6932">6932</a>
    <div class="alert alert-ee blue">
  Data planes are not allowed to connect to control planes if they are a different major version,
  a version newer than the control plane’s version, or missing plugins from the control plane.
</div>
  </li>
  <li>UTF-8 characters can now be used in tags. This update expands the range of
accepted characters in tags from a limited set of ASCII characters to almost all UTF-8 sequences.
Exceptions:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">,</code> and <code class="language-plaintext highlighter-rouge">/</code> are reserved for filtering tags with “and” and “or”, and are not allowed in tags.</li>
      <li>Non-printable ASCII (for example, the space character) is not allowed.
See <a href="/gateway-oss/2.4.x/admin-api/#tags">Tags</a> in the Admin API documentation for more information.</li>
    </ul>
  </li>
  <li>Kong Gateway now supports using an Online Certificate Status Protocol (OCSP) responder in the cluster for
hybrid mode control planes. This new feature can be configured in the <code class="language-plaintext highlighter-rouge">kong.conf</code> file. See
<a href="/gateway-oss/2.4.x/configuration/#cluster_ocsp"><code class="language-plaintext highlighter-rouge">cluster_oscp</code></a> in the Configuration Reference for
more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6887">6887</a></li>
  <li>Postgres <code class="language-plaintext highlighter-rouge">ssl_version</code> configuration now defaults to <code class="language-plaintext highlighter-rouge">any</code>. If <code class="language-plaintext highlighter-rouge">ssl_version</code> is not explicitly set,
the <code class="language-plaintext highlighter-rouge">any</code> option ensures that <code class="language-plaintext highlighter-rouge">luasec</code> will negotiate the most secure protocol available.</li>
</ul>

<h4 id="pdk-8">PDK</h4>
<ul>
  <li>This release includes a new JavaScript Plugin Development Kit (PDK). This addition
allows users to write Kong plugins in JavaScript and TypeScript. See
<a href="/gateway-oss/2.4.x/external-plugins/#developing-javascript-plugins">Developing JavaScript plugins</a>
for more information.</li>
  <li>This release includes support for the Protobuf plugin communication protocol, which can be used in
place of MessagePack to communicate with non-Lua plugins. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6941">6941</a></li>
  <li>This release enables the <code class="language-plaintext highlighter-rouge">ssl_certificate</code> phase on plugins in the <code class="language-plaintext highlighter-rouge">stream</code> module.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6873">6873</a></li>
</ul>

<h4 id="plugins-16">Plugins</h4>
<ul>
  <li><strong>New plugin:</strong> <a href="/hub/kong-inc/opa">OPA</a> (<code class="language-plaintext highlighter-rouge">opa</code>)
    <ul>
      <li>The OPA plugin forwards requests to an Open Policy Agent and processes the request
only if the authorization policy allows for it. <strong>Released as BETA and should not be deployed
in production environment.</strong></li>
    </ul>
  </li>
  <li><strong>New plugin:</strong> Mocking (<code class="language-plaintext highlighter-rouge">mocking</code>)
    <ul>
      <li>The Kong Mocking plugin leverages standards-based Open API Specifications (OAS)
for sending out mock responses to APIs. <strong>Released as BETA and should not be deployed
in production environment.</strong></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
    <ul>
      <li>The plugin now supports OT and Jaeger style <code class="language-plaintext highlighter-rouge">uber-trace-id</code> headers. See <code class="language-plaintext highlighter-rouge">config.header_type</code> in
the <a href="/hub/kong-inc/zipkin/#parameters">Parameters</a> section of the Zipkin
plugin documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/101">101</a></li>
      <li>The plugin now allows insertion of custom tags on the Zipkin request trace. See <code class="language-plaintext highlighter-rouge">config.tags_header</code>
in the <a href="/hub/kong-inc/zipkin/#parameters">Parameters</a> section of the Zipkin
plugin documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/102">102</a></li>
      <li>The plugin now allows the creation of baggage items on child spans.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/98">98</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt">JWT</a> (<code class="language-plaintext highlighter-rouge">jwt</code>)
    <ul>
      <li>The plugin now supports ES384 JWTs signature validation. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6854">6854</a></li>
    </ul>
  </li>
  <li>Logging plugins: <a href="/hub/kong-inc/file-log">File Log</a>, <a href="/hub/kong-inc/loggly">Loggly</a>,
<a href="/hub/kong-inc/syslog">Syslog</a>, <a href="/hub/kong-inc/tcp-log">TCP Log</a>, <a href="/hub/kong-inc/udp-log">UDP Log</a>,
and <a href="/hub/kong-inc/http-log">HTTP Log</a>
    <ul>
      <li>Kong administrators now have a powerful new capability to transform logs to any format that’s needed
for capturing, indexing, and correlating logs. When formatting, developers also have the ability to
execute custom Lua code, opening up a new range of possibilities for generating logs to whichever specification
administrators need the most. This feature uses the new PDK method <code class="language-plaintext highlighter-rouge">kong.log.set_serialize_value</code>,
as well as the new sandbox capability, both introduced in Kong v2.3. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6944">6944</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">kong-openid-connect</code> library updated to v2.1.0
        <ul>
          <li>Treats JWE tokens as opaque, so that they can be introspected.</li>
          <li>Adds support for Ed448 curve in EdDSA signing and verification and JWKS key generation.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="dependencies-6">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">opentracing-cpp</code> from v1.5.1 to v1.6.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">datadog</code> from v1.1.2 to v1.3.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">nginx-opentracing</code> from v0.9.0 to v0.14.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">jaeger</code> from v0.5.0 to v0.7.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-nettle</code> from v1.8.3 to v2.0.0</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">openresty</code> from v1.17.8.2 to v1.19.3.1</li>
</ul>

<h3 id="fixes-12">Fixes</h3>

<h4 id="core-12">Core</h4>
<ul>
  <li>Topological sort now prioritizes core, avoiding problems when plugin entities use core entities but
don’t explicitly depend on them. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6880">6880</a></li>
  <li>Schema validations now log more descriptive error messages when types are invalid.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6593">6593</a></li>
  <li>Kong now ignores tags in Cassandra when filtering by multiple entities, which is the
expected behavior and the one already existent when using Postgres databases.
See <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/2.3.x/admin-api/#tags">Tags</a> in the Admin API
documentation for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6931">6931</a></li>
  <li>Users can proxy websockets through Kong when using Chrome or Firefox. <code class="language-plaintext highlighter-rouge">HTTP Connection</code>
headers usually carry a list of headers meant for receivers (in this case a proxy) that
are not meant to be proxied further (hop-by-hop headers). The Kong Gateway correctly
cleans these headers, but it was a bit too aggressive and the <code class="language-plaintext highlighter-rouge">Upgrade</code> header was cleared
from response <code class="language-plaintext highlighter-rouge">Connection</code> headers, causing the connections to fail when using Firefox
or Chrome. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6929">6929</a></li>
  <li>Kong now accepts fully-qualified domain names ending in dots to be compliant with RFC internet standards.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6864">6864</a></li>
  <li>Kong has removed unnecessary load from DNS servers by resolving an issue occuring when
using upstreams for load balancing. When caching services, Kong does not warmup upstream
names used as service hosts entries when warming up DNS entries, as they are not real DNS
entries. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6891">6891</a></li>
  <li>Migrations order is now guaranteed to be always the same. Before, the order in which the
subsystems were loaded changed randomly. Now, subsystems are sorted alphabetically, so the
order in which migrations are executed is constant. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6901">6901</a></li>
  <li>Buffered responses are disabled on connection upgrades. Kong cannot do buffered responses with,
for example, websocket connection upgrades. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6902">6902</a></li>
  <li>Entity relationships are now traverse-order-independent. This fix keeps track of all copied
records and injects the new field on each copy.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/commit/5f2a87259e3b474ec6129490bba82dac0aeba1cf">6843</a></li>
  <li>The host header is updated between balancer retries. Before, Kong Gateway set the <code class="language-plaintext highlighter-rouge">Host</code> header during
the access phase only and would send the wrong header if a target failed to serve and needed
to be retried. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6796">6796</a></li>
  <li>The router prioritizes the route with most matching headers when matching headers.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6638">6638</a></li>
  <li>Fixed an issue involving multipart/form-data boundary checks. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6638">6638</a></li>
  <li>Fixed an issue that occurred when using upstreams for load balancing, where Kong was attempting
to resolve the upstream name instead of the hostname and failing with the errors <code class="language-plaintext highlighter-rouge">name resolution failed</code>
and <code class="language-plaintext highlighter-rouge">dns server error: 3 name error</code>. The following updates correct the issue:
    <ul>
      <li>Kong does not cache empty upstream name dictionaries. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7002">7002</a></li>
      <li>Kong does not assume upstreams don’t exist after init phases. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7010">7010</a></li>
    </ul>
  </li>
  <li>The Developer Portal is now disabled when running without a license.</li>
</ul>

<h4 id="pdk-9">PDK</h4>
<ul>
  <li>Kong Gateway no longer leaves plugin servers alive after exiting and does not try to
start them in the unsupported stream subsystem. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6849">6849</a></li>
  <li>Golang does not cache <code class="language-plaintext highlighter-rouge">kong.log</code> methods. The <code class="language-plaintext highlighter-rouge">kong</code> table has some special-case logic
for the <code class="language-plaintext highlighter-rouge">.log</code> subtable, and avoiding caching preserves this logic. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6701">6701</a></li>
  <li>The <code class="language-plaintext highlighter-rouge">response</code> phase is now included on the list of public phases. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6638">6638</a></li>
  <li>Config file style and options case are now consistent. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6981">6981</a></li>
  <li>Added correct Protobuf MacOS path to enable external plugins in Homebrew installations. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6980">6980</a></li>
  <li>Kong Gateway now auto-escapes upstream paths (<code class="language-plaintext highlighter-rouge">kong.service.request.set_path()</code>) to avoid proxying errors.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6978">6978</a></li>
  <li>In the Golang PDK, ports are now declared as <code class="language-plaintext highlighter-rouge">Int</code>. Before they were incorrectly declared
<code class="language-plaintext highlighter-rouge">Strings</code>. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6994">6994</a></li>
</ul>

<h4 id="plugins-17">Plugins</h4>
<ul>
  <li>The <a href="/hub/kong-inc/rate-limiting">Rate Limiting</a> and <a href="/hub/kong-inc/response-ratelimiting">Response Rate Limiting</a>
plugins included default options that did not work well with DB-less or hybrid deployments because the
database is not available on data plane nodes. With this fix, the default values and validation rules are now
compatible with DB-less or hybrid modes. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6885">6885</a></li>
  <li><a href="/hub/kong-inc/oauth2">OAuth 2.0</a> (<code class="language-plaintext highlighter-rouge">oauth2</code>)
    <ul>
      <li>To improve user experience and limit confusion, the plugin now handles cases of client invalid
token generation in a more predictable way. Before, the resulting error codes were confusing and
unhelpful, often leading users to the wrong conclusions. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6594">6594</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/zipkin">Zipkin</a> (<code class="language-plaintext highlighter-rouge">zipkin</code>)
    <ul>
      <li>The W3C parsing function was returning a non-used extra value that has been removed, and the plugin
now early-exits if there is a problem with the W3C Trace Context header.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/100">100</a></li>
      <li>Fixed a bug which randomly caused requests to fail with a 400 error code during span timestamping if
the access phase was skipped. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-zipkin/pull/105">105</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt-signer">Kong JWT Signer</a> (<code class="language-plaintext highlighter-rouge">jwt-signer</code>)
    <ul>
      <li>Cache now uses upsert instead of insert/update with databases.</li>
      <li>Key rotation is now more resilient on errors.</li>
      <li>Adds DB-less improvements.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/exit-transformer">Exit Transformer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>The plugin was not allowing access to any Kong modules within the sandbox except <code class="language-plaintext highlighter-rouge">kong.request</code>,
which prevented access to other necessary modules such as <code class="language-plaintext highlighter-rouge">kong.log</code>.</li>
    </ul>
  </li>
</ul>

<h2 id="2334">2.3.3.4</h2>
<p><strong>Release Date</strong> 2021/09/02</p>

<h3 id="fixes-13">Fixes</h3>

<h4 id="enterprise-16">Enterprise</h4>
<ul>
  <li>This release fixes a regression in the Kong Dev Portal templates that removed dynamic menu navigation and other improvements
from portals created in Kong Gateway v2.3.3.3.</li>
</ul>

<h2 id="2333">2.3.3.3</h2>
<p><strong>Release Date</strong> 2021/08/18</p>

<h3 id="fixes-14">Fixes</h3>

<h4 id="enterprise-17">Enterprise</h4>
<ul>
  <li>Users can now successfully delete workspaces after deleting all entities associated with that workspace.
Previously, Kong Gateway was not correctly cleaning up parent-child relationships. For example, creating
an Admin also creates a Consumer and RBAC user. When deleting the Admin, the Consumer and RBAC user are
also deleted, but accessing the <code class="language-plaintext highlighter-rouge">/workspaces/workspace_name/meta</code> endpoint would show counts for Consumers
and RBAC users, which prevented the workspace from being deleted. Now deleting entities correctly updates
the counts, allowing an empty workspace to be deleted.</li>
  <li>Updates Kong Dev Portal templates’ JQuery dependency to v3.6.0, improving security.</li>
  <li>Users can now include special characters “.”, “-“, “_”, “~” in workspace names. Before when users created
workspaces using the UI, the workspace name was validated; however, when using the Admin API to add users,
the workspace name was not validated. Because the name was not validated in the Admin Api, users could create workspace names with special characters that would then break the environment.</li>
  <li>Kong Gateway now escapes “-“ and “.” special characters in workspace names when building the compiled pattern
for collision detection.</li>
</ul>

<h4 id="plugins-18">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
With this fix, when the OpenID Connect plugin is configured with a <code class="language-plaintext highlighter-rouge">config.anonymous</code> consumer and
<code class="language-plaintext highlighter-rouge">config.scopes_required</code> is set, a token missing the required scopes will have the anonymous consumer
headers set when sent to the upstream.</li>
</ul>

<h4 id="hybrid-mode-9">Hybrid Mode</h4>
<ul>
  <li>Control planes are now more lenient when checking data planes’ compatibility in hybrid mode. See the
<a href="/enterprise/2.3.x/deployment/hybrid-mode/#version-compatibility">Version compatibility</a>
section of the Hybrid Mode guide for more information. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7488">#7488</a></li>
</ul>

<h2 id="2332">2.3.3.2</h2>
<p><strong>Release Date</strong> 2021/04/21</p>

<h3 id="fixes-15">Fixes</h3>

<h4 id="enterprise-18">Enterprise</h4>
<ul>
  <li>
    <p>When using Kong Gateway in hybrid mode, schema, minor, and major version changes lead to
a broken connection between the control planes and data planes. With this fix, the
<a href="/hub/kong-inc/oauth2">OAuth 2.0 Authentication</a> plugin is upgraded to v2.2.0 and the
<a href="/hub/kong-inc/openid-connect">OpenID Connect</a> plugin is downgraded from v1.9.0 to v1.8.4.</p>
  </li>
  <li>
    <p>When using the <a href="/hub/kong-inc/mtls-auth">Mutual TLS Authenication</a> plugin with a service
that was configured for mutual TLS, the Kong Gateway was not sending the client certificate
to the upstream. With this fix, Kong Gateway now avoids patching a plugin’s handler if it is
not defined and supports client certificates in <code class="language-plaintext highlighter-rouge">buffered_proxying</code> mode.</p>
  </li>
</ul>

<h2 id="2331">2.3.3.1</h2>
<p><strong>Release Date</strong> 2021/04/14</p>

<h3 id="features-6">Features</h3>

<h4 id="enterprise-19">Enterprise</h4>
<ul>
  <li>
    <p>Users can now set a custom login message and classification banner (top and bottom) on the Kong Manager login page.
This classification banner persists beyond the login page and can be configured in the <code class="language-plaintext highlighter-rouge">kong.conf</code> file.</p>

    <p>The following new configuration options are now available:</p>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_header_txt</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_header_bg_color</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_header_txt_color</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_footer_txt</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_footer_bg_color</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_footer_txt_color</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_login_banner_title</code></li>
      <li><code class="language-plaintext highlighter-rouge">admin_gui_login_banner_body</code></li>
    </ul>

    <p>See the <a href="/enterprise/2.3.x/property-reference/#kong-manager-section">Kong Manager section</a> of the
Configuration Property Reference for more information.</p>
  </li>
</ul>

<h3 id="fixes-16">Fixes</h3>

<h4 id="core-13">Core</h4>
<ul>
  <li>Fixed an issue that occurred when using upstreams for load balancing, where Kong was attempting to resolve
the upstream name instead of the hostname and failing with the errors <code class="language-plaintext highlighter-rouge">name resolution failed</code> and
<code class="language-plaintext highlighter-rouge">dns server error: 3 name error</code>. The following updates correct the issue:
    <ul>
      <li>Kong does not cache empty upstream name dictionaries. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7002">7002</a></li>
      <li>Kong does not assume upstreams don’t exist after init phases. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/7010">7010</a></li>
    </ul>
  </li>
</ul>

<h4 id="enterprise-20">Enterprise</h4>
<ul>
  <li>Fixed an issue with upgrades of Kong Gateway (Enterprise) from v1.5.x to v2.1.x. Before the fix, when admin
consumers were shared across multiple workspaces, it was possible for the migration to fail. The upgrade would
fail because plugin entities that depend on consumer entities must live in the same workspace as the consumer entity.
This fix migrates these plugin entities to the same workspace as the consumer entities. Customers affected by this
issue will need to upgrade their v2.1 install to at least v2.1.4.5 before attempting to migrate from v1.5 to v2.1.</li>
  <li>Fixed an issue where customers could not add roles to new admin users via Kong Manager. With this fix, role selection
now properly displays available roles to assign.</li>
</ul>

<h4 id="plugins-19">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/exit-transformer">Exit Transformer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>Fixed an issue where the plugin was running the exit hook twice. It now correctly runs the exit hook once.</li>
    </ul>
  </li>
</ul>

<h2 id="2330">2.3.3.0</h2>
<p><strong>Release Date</strong> 2021/03/26</p>

<h3 id="features-7">Features</h3>

<h4 id="plugins-20">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/request-validator">Request Validator</a> (<code class="language-plaintext highlighter-rouge">request-validator</code>)
    <ul>
      <li>Content-type failures are now reported as such when <code class="language-plaintext highlighter-rouge">verbose_response</code> is enabled.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a>
    <ul>
      <li>Disallows decimal values between 0,1 in <code class="language-plaintext highlighter-rouge">sync_rate</code>.</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-17">Fixes</h3>
<ul>
  <li>Adjusted the <code class="language-plaintext highlighter-rouge">systemd reload</code> command to do a <code class="language-plaintext highlighter-rouge">kong prepare</code>.</li>
  <li>Removed output messages from non-strict failure builds on license validation module.</li>
  <li>Fixed an FFI table overflow issue when syncing DB-less declarative config.</li>
  <li>Kong now accepts values for Subject Alternate Name (SAN) in a certificate as per RFC 5280.
The <a href="/hub/kong-inc/mtls-auth">Mutual TLS Authentication</a> plugin is now processing presented Alternate Names.</li>
  <li>Fixed a Websocket issue where connection upgrades would fail with a 502 after upgrading to v2.3.2.0.</li>
  <li>Upgrade header is not cleared anymore when response Connection header contains Upgrade.</li>
  <li>Avoided potential race conditions that could result in HTTP 500 errors when using the
least-connection algorithm in the case where an upstream target becomes inaccessible.</li>
  <li>Kong does not try to warm up upstream names when warming up DNS entries.</li>
  <li>Migrations order is now guaranteed to be always the same.</li>
  <li>Buffered responses are disabled on connection upgrades.</li>
  <li>Schema validations now log more descriptive error messages when types are invalid.</li>
  <li>Kong now ignores tags in Cassandra when filtering by multiple entities, which is the expected
behavior and the one already existent when using Postgres databases</li>
  <li>Kong accepts fully-qualified domain names ending in dots.</li>
  <li>Now Kong does not leave plugin servers alive after exiting and does not try to start
them in the unsupported stream subsystem.</li>
  <li>Changed default values and validation rules for plugins that were not well-adjusted
for dbless or hybrid modes.</li>
  <li>Topological sort now prioritizes core, avoiding problems when plugin entities use
core entities but don’t explicitly depend on them.</li>
</ul>

<h4 id="plugins-21">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Add <code class="language-plaintext highlighter-rouge">config.disable_session</code> to be able to disable session creation with
specified authentication methods.</li>
      <li>Changed <code class="language-plaintext highlighter-rouge">Cache-Control="no-store"</code> instead of <code class="language-plaintext highlighter-rouge">Cache-Control="no-cache, no-store"</code>,
and only set <code class="language-plaintext highlighter-rouge">Pragma="no-cache"</code> with HTTP 1.0 (and below).</li>
      <li>Fixed <code class="language-plaintext highlighter-rouge">/openid-connect/jwks</code> to not expose private keys (this bug was introduced
in v1.6.0 (Kong Enterprise v2.1.3.1) and affects all versions up to v1.8.3 (Kong Enterprise v2.3.2)).</li>
      <li>Token introspection now checks the status code properly.</li>
      <li>More consistent response body checks on HTTP requests.</li>
      <li>Fixed an issue where enabling zlib compressor did not affect the size of the session cookie.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
    <ul>
      <li>Now the plugin does not pre-create namespaces on <code class="language-plaintext highlighter-rouge">init-worker</code>. As a side effect to this patch
the plugin will create namespaces on the fly. This may result in a slightly (10-20%) increased
response time on the first request.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-validator">Request Validator</a> (<code class="language-plaintext highlighter-rouge">request-validator</code>)
    <ul>
      <li>Now the plugin correctly decodes and normalizes arrays when there are multiple headers with
the same field-name.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/mtls-auth">Mutual TLS Authentication</a> (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)
    <ul>
      <li>Remove CA existence check on plugin creation - the check was not compatible with DB-less mode.</li>
      <li>Correctly fetch certificates from the end of the proof chain when consumer credentials are used.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/aws-lambda">AWS Lambda</a> (<code class="language-plaintext highlighter-rouge">aws-lambda</code>)
    <ul>
      <li>The plugin now respects <code class="language-plaintext highlighter-rouge">skip_large_bodies</code> config setting when using AWS API Gateway compatibility.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/acme">ACME</a> (<code class="language-plaintext highlighter-rouge">acme</code>)
    <ul>
      <li>Bump <code class="language-plaintext highlighter-rouge">lua-resty-acme</code> to v0.6.x; this fixes several issues with Pebble test server.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/oauth2">OAuth 2.0 Authentication</a> (<code class="language-plaintext highlighter-rouge">oauth2</code>)
    <ul>
      <li>The plugin now has better handling for multiple cases of client invalid token generation.</li>
    </ul>
  </li>
</ul>

<h2 id="2320">2.3.2.0</h2>
<p><strong>Release Date</strong> 2021/02/11</p>

<h3 id="kong-gateway-enterprise"><strong>Kong Gateway (Enterprise)</strong></h3>
<p>The following sections list Kong Gateway (Enterprise)-exclusive updates,
features, and fixes for the <strong>2.3.2.0</strong> version.</p>

<p>Kong Enterprise is renamed to Kong Gateway or Kong Gateway (Enterprise) going forward. For a more detailed explanation, including information about Kong Gateway (OSS), see <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/2.3.x/release-notes/">Kong Gateway (Enterprise) 2.3.x Release Notes</a>.</p>

<h3 id="features-8">Features</h3>

<h4 id="enterprise-21">Enterprise</h4>
<ul>
  <li>Kong Gateway can now run in free mode, without a license, which gives users access to
Kong Manager and an easy upgrade path to Enterprise.</li>
  <li>A (non-OSS) Kong Gateway running in its default free Mode can be upgraded to add
Enterprise functionality modules and features including <strong>Kong Vitals</strong>, <strong>RBAC</strong>,
<strong>Workspaces</strong>, and <strong>Enterprise Plugins</strong> simply by applying a new Kong license.
Contact your Kong sales representative for more information.</li>
  <li>A new Admin API endpoint allows application of a license to Kong Gateway.</li>
  <li>In hybrid mode, the control plane now propagates its license to the connected data planes in the cluster. Data planes do not require individual licenses.</li>
  <li>The Kong Gateway installation packages now reside under https://bintray.com/kong/ and do not require a login. Search for “gateway” to list all available packages.</li>
  <li>Added details to the error message of the entity type and number of entities that are preventing a Workspace from being deleted if the Workspace is not empty.</li>
  <li>mTLS connections to Postres are now supported.</li>
  <li>Postgres connection using scram-sha256 authentication are now supported.</li>
</ul>

<h4 id="core-14">Core</h4>
<ul>
  <li>Kong checks version compatibility between the control plane and any data planes to ensure
the data planes and any plugins have compatibility with the control plane in hybrid mode.
The sync is stopped if the major/minor version differ or if the installed plugin versions
differ between control plane and data plane nodes. For more information, see
<a href="/2.3.x/hybrid-mode/#version-and-compatibility-checks">Version and Compatibility Checks</a>.</li>
  <li>Kong Gateway now accepts UTF-8 characters in route and service names. Entities with a <code class="language-plaintext highlighter-rouge">name</code> field
now support UTF-8 characters.</li>
  <li>Certificates now have <code class="language-plaintext highlighter-rouge">cert_alt</code> and <code class="language-plaintext highlighter-rouge">key_alt</code> fields to specify an alternative certificate
and key pair.</li>
  <li>The Go pluginserver <code class="language-plaintext highlighter-rouge">stderr</code> and <code class="language-plaintext highlighter-rouge">stdout</code> are now written into Kong Gateway’s logs, allowing Golang’s
native <code class="language-plaintext highlighter-rouge">log.Printf()</code>.
    <ul>
      <li>Introduced support for multiple pluginservers. This feature is backward-compatible with
the existing single Go pluginserver.</li>
    </ul>
  </li>
</ul>

<h4 id="plugin-development-kit-pdk">Plugin Development Kit (PDK)</h4>
<ul>
  <li>Introduced a <code class="language-plaintext highlighter-rouge">kong.node.get_hostname</code> method that returns current node’s host name.</li>
  <li>Introduced a <code class="language-plaintext highlighter-rouge">kong.cluster.get_id</code> method that returns a unique ID
for the current Kong Gateway cluster. If the gateway is running in DB-less mode
without a cluster ID explicitly defined, this method returns nil.
For Hybrid mode, all Control Planes and Data Planes belonging to the
same cluster returns the same cluster ID. For traditional database
type deployments, all Kong Gateway nodes pointing to the same database will
also return the same cluster ID.</li>
  <li>Introduced a <code class="language-plaintext highlighter-rouge">kong.log.set_serialize_value</code>, which allows customizing
the output of <code class="language-plaintext highlighter-rouge">kong.log.serialize</code>.</li>
</ul>

<h4 id="plugins-22">Plugins</h4>
<ul>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/http-log/">HTTP Log</a> (<code class="language-plaintext highlighter-rouge">http-log</code>) plugin
now lets you add a table of headers to the HTTP request using the
<code class="language-plaintext highlighter-rouge">headers</code> configuration parameter, which will help you integrate with many observability systems.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/key-auth/">Key Authentication</a> (<code class="language-plaintext highlighter-rouge">key-auth</code>)
plugin has two new configuration parameters: <code class="language-plaintext highlighter-rouge">key_in_header</code> and <code class="language-plaintext highlighter-rouge">key_in_query</code>. Both
are booleans and tell Kong Gateway whether to accept (true) or reject (false) passed in either
the header or the query string. Both default to “true.”</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/request-size-limiting/">Request Size Limiting</a>
(<code class="language-plaintext highlighter-rouge">request-size-limiting</code>) plugin has a new configuration <code class="language-plaintext highlighter-rouge">require_content_length</code> that
causes the plugin to ensure a valid Content-Length header exists before reading the request body.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/serverless-functions/">Serverless Functions</a>
(<code class="language-plaintext highlighter-rouge">serverless-functions</code>) plugin introduces a sandboxing capability, is <em>enabled</em> by default,
and where only Kong PDK, OpenResty <code class="language-plaintext highlighter-rouge">ngx</code> APIs, and Lua standard libraries are allowed.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/ldap-auth-advanced/">LDAP Authentication Advanced</a> (<code class="language-plaintext highlighter-rouge">ldap-auth-advanced</code>) plugin has two new features:
    <ul>
      <li>added config <code class="language-plaintext highlighter-rouge">log_search_results</code> that allows displaying all of the LDAP search results received from the LDAP server.</li>
      <li>additional debug log statements added for authenticated groups.</li>
    </ul>
  </li>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/rate-limiting-advanced/">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>) plusing has added a jitter (random delay) for the Retry-After header.</li>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/mtls-auth/">Mutual TLS Authentication</a>(<code class="language-plaintext highlighter-rouge">mtls-auth</code>) plugin has added support for tags in the DAO and now ensures the existence of any provided CAs when creating the plugin entry.</li>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/response-transformer-advanced/">Response Transformer Advanced</a> (<code class="language-plaintext highlighter-rouge">response-transformer-advanced</code>) has json paths for nested elements and arrays and transform gzipped content.</li>
  <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>, used for Immunity) plugin supports hybrid mode and has removed the <code class="language-plaintext highlighter-rouge">log_bodies</code> configuration option.</li>
  <li>OpenID Connect Library
    <ul>
      <li>Token introspection now checks the status code properly.</li>
      <li>More consistent response body checks on HTTP requests.</li>
    </ul>
  </li>
</ul>

<h4 id="configuration-7">Configuration</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">client_max_body_size</code> and <code class="language-plaintext highlighter-rouge">client_body_buffer_size</code>, that previously
hardcoded to 10m, are now configurable through
<a href="/gateway-oss/2.3.x/configuration/#nginx_http_client_max_body_size">nginx_admin_client_max_body_size</a>
and <a href="/gateway-oss/2.3.x/configuration/#nginx_admin_client_body_buffer_size">nginx_admin_client_body_buffer_size</a>.</li>
  <li>Kong-generated SSL private keys now have <code class="language-plaintext highlighter-rouge">600</code> file system permission.</li>
  <li>Properties <code class="language-plaintext highlighter-rouge">ssl_cert</code>, <code class="language-plaintext highlighter-rouge">ssl_cert_key</code>, <code class="language-plaintext highlighter-rouge">admin_ssl_cert</code>,
<code class="language-plaintext highlighter-rouge">admin_ssl_cert_key</code>, <code class="language-plaintext highlighter-rouge">status_ssl_cert</code>, and <code class="language-plaintext highlighter-rouge">status_ssl_cert_key</code>
is now an array: previously, only an RSA certificate was generated
by default; with this change, an ECDSA is also generated. On
intermediate and modern cipher suites, the ECDSA certificate is set
as the default fallback certificate; on old cipher suite, the RSA
certificate remains as the default. On custom certificates, the first
certificate specified in the array is used.</li>
  <li>Kong Gateway now runs as a <code class="language-plaintext highlighter-rouge">kong</code> user if it exists; if user does not exist
in the system, the <code class="language-plaintext highlighter-rouge">nobody</code> user is used, as before.</li>
</ul>

<h3 id="dependencies-7">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-serverless-functions</code> from 1.0 to 2.1.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-dns-client</code> from 5.1.0 to 5.2.0.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code> from 1.3.0 to 1.4.0.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">OpenSSL</code> from 1.1.1h to 1.1.1i.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-zipkin</code> from 1.1 to 1.2.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-request-transformer</code> from 1.2 to 1.3.</li>
</ul>

<h3 id="fixes-18">Fixes</h3>

<h4 id="core-15">Core</h4>
<ul>
  <li>Fixed an issue where certain incoming URI may make it possible to bypass security rules applied
on Route objects. This fix make such attacks more difficult by always normalizing the incoming
request’s URI before matching against the Router.</li>
  <li>Fixed issue where a Go plugin would fail to read <code class="language-plaintext highlighter-rouge">kong.ctx.shared</code> values set by Lua plugins.</li>
  <li>Properly trigger <code class="language-plaintext highlighter-rouge">dao:delete_by:post</code> hook.</li>
  <li>Fixed issue where a route that supports both http and https (and has a hosts and SNIs
match criteria) would fail to proxy http requests, as it does not contain an SNI.</li>
  <li>Fixed issue where a <code class="language-plaintext highlighter-rouge">nil</code> request context would lead to errors <code class="language-plaintext highlighter-rouge">attempt to index local 'ctx'</code>
being shown in the logs.</li>
  <li>Reduced the number of needed timers to active health check upstreams and to resolve hosts.</li>
  <li>Schemas for full-schema validations are correctly cached now, avoiding memory
leaks when reloading declarative configurations.</li>
  <li>The schema for the upstream entities now limits the highest configurable
number of successes and failures to 255, respecting the limits imposed by
<code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code>.</li>
  <li>Certificates for database connections now are loaded in the right order
avoiding failures to connect to Postgres databases.</li>
  <li>Fixed Lua <code class="language-plaintext highlighter-rouge">validate_function</code> in sandbox module.</li>
  <li>Mark boolean fields with default values as required.</li>
</ul>

<h4 id="enterprise-22">Enterprise</h4>
<ul>
  <li>Fixed an issue that incorrectly enforced plugins when they exist in the default and a named workspace.
 The plugin configuration in the default workspace was incorrectly overriding the disabled plugin
 configuration in the named workspace.</li>
  <li>Fixed an issue for vitals when proxy-cached-advanced or forward-proxy plugins (possibly others)
are in use.</li>
  <li>Requests that received a cache hit using the plugins were not showing up under
 service/route vitals, but were visible under workspace vitals.</li>
</ul>

<h4 id="cli-6">CLI</h4>
<ul>
  <li>Fixed issue where <code class="language-plaintext highlighter-rouge">kong reload -c &lt;config&gt;</code> would fail.</li>
  <li>Fixed issue where the Kong Gateway configuration cache would get corrupted.</li>
  <li>Kong migrations now accepts a <code class="language-plaintext highlighter-rouge">-p/--prefix</code> flag.</li>
</ul>

<h4 id="developer-portal">Developer Portal</h4>
<ul>
  <li>Fixed issue when applying permissions to developers using the Application Registration feature.</li>
</ul>

<h4 id="plugin-development-kit-pdk-1">Plugin Development Kit (PDK)</h4>
<ul>
  <li>Ensure the log serializer encodes the <code class="language-plaintext highlighter-rouge">tries</code> field as an array when
empty, rather than an object.</li>
</ul>

<h4 id="plugins-23">Plugins</h4>
<ul>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/jwt/">JWT</a> (<code class="language-plaintext highlighter-rouge">jwt</code>) plugin disallows on consumers.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/request-transformer/">Request Transformer</a> (<code class="language-plaintext highlighter-rouge">request-transformer</code>)
plugin does not allow <code class="language-plaintext highlighter-rouge">null</code> in config anymore as they can lead to runtime errors.</li>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/openid-connect/">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)</li>
  <li>Fixed issue causing a 500 auth error when falling back to an anonymous user.</li>
  <li>Fixed consumer and discovery invalidation events that were returning when the operation was create. This could leave some cache entries in cache that need to be invalidated.</li>
  <li>Fixed a circular dependency issue with redirect function.</li>
  <li>Fixed init worker on clients could take a long time.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/rate-limiting/">Rate Limiting</a> (<code class="language-plaintext highlighter-rouge">rate-limiting</code>) has improved counter accuracy.</li>
</ul>

<h3 id="deprecated-1">Deprecated</h3>

<h4 id="kong-studio">Kong Studio</h4>
<ul>
  <li>Kong Studio is deprecated.</li>
</ul>

<h4 id="distributions">Distributions</h4>
<ul>
  <li>Support for CentOS-6 is removed and entered end-of-life on Nov 30, 2020.</li>
</ul>

<h2 id="2300-beta">2.3.0.0 (beta)</h2>
<p><strong>Release Date</strong> 2021/01/20</p>

<h3 id="kong-enterprise"><strong>Kong Enterprise</strong></h3>
<p>The following sections list Kong Gateway (Enterprise)-exclusive updates,
features, and fixes for the <strong>2.3.0.0 beta</strong> version.</p>

<h3 id="features-9">Features</h3>

<h4 id="enterprise-23">Enterprise</h4>
<p>A (non-OSS) Kong Gateway running in its default Free Mode can be upgraded to add
Enterprise functionality modules and features including <strong>Kong Vitals</strong>, <strong>RBAC</strong>,
<strong>Workspaces</strong>, and <strong>Kong Enterprise Plugins</strong> simply by applying a new Kong license.
Contact your Kong sales representative for more information.</p>

<h4 id="core-16">Core</h4>
<ul>
  <li>Kong checks version compatibility between the control plane and any data planes to ensure
the data planes and any plugins have compatibility with the control plane in hybrid mode.
The sync is stopped if the major/minor version differ or if the installed plugin versions
differ between control plane and data plane nodes. For more information, see
<a href="/2.3.x/hybrid-mode/#version-and-compatibility-checks">Version and Compatibility Checks</a>.</li>
  <li>Kong now accepts UTF-8 characters in route and service names. Entities with a <code class="language-plaintext highlighter-rouge">name</code> field
now support UTF-8 characters.</li>
  <li>Certificates now have <code class="language-plaintext highlighter-rouge">cert_alt</code> and <code class="language-plaintext highlighter-rouge">key_alt</code> fields to specify an alternative certificate
and key pair.</li>
  <li>The Go pluginserver <code class="language-plaintext highlighter-rouge">stderr</code> and <code class="language-plaintext highlighter-rouge">stdout</code> are now written into Kong’s logs, allowing Golang’s
native <code class="language-plaintext highlighter-rouge">log.Printf()</code>.
    <ul>
      <li>Introduced support for multiple pluginservers. This feature is backward-compatible with
the existing single Go pluginserver.</li>
    </ul>
  </li>
</ul>

<h4 id="plugin-development-kit-pdk-2">Plugin Development Kit (PDK)</h4>
<ul>
  <li>Introduced a <code class="language-plaintext highlighter-rouge">kong.node.get_hostname</code> method that returns current node’s host name.</li>
  <li>Introduced a <code class="language-plaintext highlighter-rouge">kong.cluster.get_id</code> method that returns a unique ID
for the current Kong cluster. If Kong is running in DB-less mode
without a cluster ID explicitly defined, this method returns nil.
For Hybrid mode, all Control Planes and Data Planes belonging to the
same cluster returns the same cluster ID. For traditional database
type deployments, all Kong nodes pointing to the same database will
also return the same cluster ID.</li>
  <li>Introduced a <code class="language-plaintext highlighter-rouge">kong.log.set_serialize_value</code>, which allows customizing
the output of <code class="language-plaintext highlighter-rouge">kong.log.serialize</code>.</li>
</ul>

<h4 id="plugins-24">Plugins</h4>
<ul>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/http-log/">HTTP Log</a> (<code class="language-plaintext highlighter-rouge">http-log</code>) plugin
has been improved to allow you to add a table of headers to the HTTP request using the
<code class="language-plaintext highlighter-rouge">headers</code> configuration parameter, which will help you integrate with many observability systems.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/key-auth/">Key Authentication</a> (<code class="language-plaintext highlighter-rouge">key-auth</code>)
plugin has two new configuration parameters: <code class="language-plaintext highlighter-rouge">key_in_header</code> and <code class="language-plaintext highlighter-rouge">key_in_query</code>. Both
are booleans and tell Kong whether to accept (true) or reject (false) passed in either
the header or the query string. Both default to “true.”</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/request-size-limiting/">Request Size Limiting</a>
(<code class="language-plaintext highlighter-rouge">request-size-limiting</code>) plugin has a new configuration <code class="language-plaintext highlighter-rouge">require_content_length</code> that
causes the plugin to ensure a valid Content-Length header exists before reading the request body.</li>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/serverless-functions/">Serverless Functions</a>
(<code class="language-plaintext highlighter-rouge">serverless-functions</code>) plugin introduces a sandboxing capability, is <em>enabled</em> by default,
and where only Kong PDK, OpenResty <code class="language-plaintext highlighter-rouge">ngx</code> APIs, and Lua standard libraries are allowed.</li>
</ul>

<h4 id="configuration-8">Configuration</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">client_max_body_size</code> and <code class="language-plaintext highlighter-rouge">client_body_buffer_size</code>, that previously
hardcoded to 10m, are now configurable through
<a href="/2.3.x/configuration/#nginx_http_client_max_body_size">nginx_admin_client_max_body_size</a>
and <a href="/2.3.x/configuration/#nginx_admin_client_body_buffer_size">nginx_admin_client_body_buffer_size</a>.</li>
  <li>Kong-generated SSL private keys now have <code class="language-plaintext highlighter-rouge">600</code> file system permission.</li>
  <li>Properties <code class="language-plaintext highlighter-rouge">ssl_cert</code>, <code class="language-plaintext highlighter-rouge">ssl_cert_key</code>, <code class="language-plaintext highlighter-rouge">admin_ssl_cert</code>,
<code class="language-plaintext highlighter-rouge">admin_ssl_cert_key</code>, <code class="language-plaintext highlighter-rouge">status_ssl_cert</code>, and <code class="language-plaintext highlighter-rouge">status_ssl_cert_key</code>
is now an array: previously, only an RSA certificate was generated
by default; with this change, an ECDSA is also generated. On
intermediate and modern cipher suites, the ECDSA certificate is set
as the default fallback certificate; on old cipher suite, the RSA
certificate remains as the default. On custom certificates, the first
certificate specified in the array is used.</li>
  <li>Kong now runs as a <code class="language-plaintext highlighter-rouge">kong</code> user if it exists; if user does not exist
in the system, the <code class="language-plaintext highlighter-rouge">nobody</code> user is used, as before.</li>
</ul>

<h3 id="dependencies-8">Dependencies</h3>
<ul>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-serverless-functions</code> from 1.0 to 2.1.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-dns-client</code> from 5.1.0 to 5.2.0.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code> from 1.3.0 to 1.4.0.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">OpenSSL</code> from 1.1.1h to 1.1.1i.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-zipkin</code> from 1.1 to 1.2.</li>
  <li>Bumped <code class="language-plaintext highlighter-rouge">kong-plugin-request-transformer</code> from 1.2 to 1.3.</li>
</ul>

<h3 id="fixes-19">Fixes</h3>

<h4 id="core-17">Core</h4>
<ul>
  <li>Fixed issue where a Go plugin would fail to read <code class="language-plaintext highlighter-rouge">kong.ctx.shared</code> values set by Lua plugins.</li>
  <li>Properly trigger <code class="language-plaintext highlighter-rouge">dao:delete_by:post</code> hook.</li>
  <li>Fixed issue where a route that supports both http and https (and has a hosts and SNIs
match criteria) would fail to proxy http requests, as it does not contain an SNI.</li>
  <li>Fixed issue where a <code class="language-plaintext highlighter-rouge">nil</code> request context would lead to errors <code class="language-plaintext highlighter-rouge">attempt to index local 'ctx'</code>
being shown in the logs.</li>
  <li>Reduced the number of needed timers to active health check upstreams and to resolve hosts.</li>
  <li>Schemas for full-schema validations are correctly cached now, avoiding memory
leaks when reloading declarative configurations.</li>
  <li>The schema for the upstream entities now limits the highest configurable
number of successes and failures to 255, respecting the limits imposed by
<code class="language-plaintext highlighter-rouge">lua-resty-healthcheck</code>.</li>
  <li>Certificates for database connections now are loaded in the right order
avoiding failures to connect to Postgres databases.</li>
</ul>

<h4 id="cli-7">CLI</h4>
<ul>
  <li>Fixed issue where <code class="language-plaintext highlighter-rouge">kong reload -c &lt;config&gt;</code> would fail.</li>
  <li>Fixed issue where the Kong configuration cache would get corrupted.</li>
</ul>

<h4 id="developer-portal-1">Developer Portal</h4>
<ul>
  <li>Fixed issue when applying permissions to developers using the Application Registration feature.</li>
</ul>

<h4 id="plugin-development-kit-pdk-3">Plugin Development Kit (PDK)</h4>
<ul>
  <li>Ensure the log serializer encodes the <code class="language-plaintext highlighter-rouge">tries</code> field as an array when
empty, rather than an object.</li>
</ul>

<h4 id="plugins-25">Plugins</h4>
<ul>
  <li>The <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/request-transformer/">Request Transformer</a> (<code class="language-plaintext highlighter-rouge">request-transformer</code>)
plugin does not allow <code class="language-plaintext highlighter-rouge">null</code> in config anymore as they can lead to runtime errors.</li>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/openid-connect/">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>) issue
fixed causing a 500 auth error when falling back to an anonymous user.</li>
</ul>

<h3 id="deprecated-2">Deprecated</h3>
<h4 id="distributions-1">Distributions</h4>
<ul>
  <li>Support for CentOS-6 is removed and entered end-of-life on Nov 30, 2020.</li>
</ul>

<h2 id="2215">2.2.1.5</h2>
<p><strong>Release Date</strong> 2021/09/02</p>

<h3 id="fixes-20">Fixes</h3>

<h4 id="enterprise-24">Enterprise</h4>
<ul>
  <li>This release fixes a regression in the Kong Dev Portal templates that removed dynamic menu navigation and other improvements
from portals created in Kong Gateway v2.2.1.4.</li>
</ul>

<h2 id="2214">2.2.1.4</h2>
<p><strong>Release Date</strong> 2021/08/18</p>

<h3 id="fixes-21">Fixes</h3>

<h4 id="enterprise-25">Enterprise</h4>
<ul>
  <li>Users can now successfully delete workspaces after deleting all entities associated with that workspace.
Previously, Kong Gateway was not correctly cleaning up parent-child relationships. For example, creating
an Admin also creates a Consumer and RBAC user. When deleting the Admin, the Consumer and RBAC user are
also deleted, but accessing the <code class="language-plaintext highlighter-rouge">/workspaces/workspace_name/meta</code> endpoint would show counts for Consumers
and RBAC users, which prevented the workspace from being deleted. Now deleting entities correctly updates
the counts, allowing an empty workspace to be deleted.</li>
  <li>Updates Kong Dev Portal templates’ JQuery dependency to v3.6.0, improving security.</li>
</ul>

<h4 id="plugins-26">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
With this fix, when the OpenID Connect plugin is configured with a <code class="language-plaintext highlighter-rouge">config.anonymous</code> consumer and
<code class="language-plaintext highlighter-rouge">config.scopes_required</code> is set, a token missing the required scopes will have the anonymous consumer
headers set when sent to the upstream.</li>
</ul>

<h2 id="2213">2.2.1.3</h2>
<p><strong>Release Date</strong> 2021/04/22</p>

<p>This release includes internal updates that do not affect product functionality.</p>

<h2 id="2212">2.2.1.2</h2>
<p><strong>Release Date</strong> 2021/04/14</p>

<h3 id="fixes-22">Fixes</h3>

<h4 id="enterprise-26">Enterprise</h4>
<ul>
  <li>Fixed an issue with upgrades of Kong Gateway (Enterprise) from v1.5.x to v2.1.x. Before the fix, when admin consumers were shared across multiple workspaces, it was possible for the migration to fail. The upgrade would fail because plugin entities that depend on consumer entities must live in the same workspace as the consumer entity. This fix migrates these plugin entities to the same workspace as the consumer entities. Customers affected by this issue will need to upgrade their v2.1 install to at least v2.1.4.5 before attempting to migrate from v1.5 to v2.1.</li>
  <li>Fixed an issue where customers could not add roles to new admin users via the Kong Cloud Manager. With this fix, role selection now properly displays available roles to assign.</li>
</ul>

<h4 id="plugins-27">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/exit-transformer">Exit Transformer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>Fixed an issue where the plugin was running the exit hook twice. It now correctly runs the exit hook once.</li>
    </ul>
  </li>
</ul>

<h2 id="2211">2.2.1.1</h2>
<p><strong>Release Date</strong> 2021/03/26</p>

<h3 id="fixes-23">Fixes</h3>

<h4 id="core-18">Core</h4>
<ul>
  <li>Fixed an issue where certain incoming URI may make it possible to bypass security rules applied
on Route objects. This fix make such attacks more difficult by always normalizing the incoming
request’s URI before matching against the Router.</li>
  <li>Sanitize sanitize path postfix for additional security.</li>
</ul>

<h4 id="enterprise-27">Enterprise</h4>
<ul>
  <li>Kong now display errors to better identify the issue when <code class="language-plaintext highlighter-rouge">validate_key</code> fails.</li>
  <li>Kong now uses the correct workspace ID when selecting SNI in dbless/hybrid mode.</li>
  <li>Fixed verification when using combined certificates.</li>
  <li>Corrected healthchecker thresholds.</li>
</ul>

<h4 id="devportal">DevPortal</h4>
<ul>
  <li>Before, when enabling application registration with key authentication, developers who created
applications were able to see all Services for which the application registration plugin was enabled,
regardless of the permissions granted to their role. With this fix, developers who create applications
will only see Services if the role they are assigned to has been granted permissions to the relevant
specs.</li>
</ul>

<h4 id="plugins-28">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Fixed init workers that were prolonging Kong startup time.</li>
      <li>Fixed consumer and discovery invalidation events that were returning when the operation
was <code class="language-plaintext highlighter-rouge">create</code>. This could leave some cache entries in cache that need to be invalidated.</li>
      <li>Fixed a circular dependency issue with <code class="language-plaintext highlighter-rouge">redirect</code> function.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.disable_session</code> to be able to disable session creation with specified
authentication methods.</li>
      <li>Changeed <code class="language-plaintext highlighter-rouge">Cache-Control="no-store"</code> instead of <code class="language-plaintext highlighter-rouge">Cache-Control="no-cache, no-store"</code>,
and only set <code class="language-plaintext highlighter-rouge">Pragma="no-cache"</code> with HTTP 1.0 (and below).</li>
      <li>Fixed <code class="language-plaintext highlighter-rouge">/openid-connect/jwks</code> to not expose private keys (this bug was introduced
in v1.6.0 (Kong Enterprise v2.1.3.1) and affects all versions up to v1.8.3 (Kong Enterprise v2.3.2)).</li>
      <li>Token introspection now checks the status code properly.</li>
      <li>More consistent response body checks on HTTP requests.</li>
      <li>Fixed an issue where enabling zlib compressor the size of the session cookie was not
changing in value.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/aws-lambda">AWS Lambda</a> (<code class="language-plaintext highlighter-rouge">aws-lambda</code>)
    <ul>
      <li>The plugin now respects <code class="language-plaintext highlighter-rouge">skip_large_bodies</code> config setting when using AWS API Gateway compatibility.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/acme">ACME</a> (<code class="language-plaintext highlighter-rouge">acme</code>)
    <ul>
      <li>Bump <code class="language-plaintext highlighter-rouge">lua-resty-acme</code> to v0.6.x; this fixes several issues with Pebble test server.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/exit-transformer">Exit Transformer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>The plugin now allows access to Kong modules within the sandbox, not only to <code class="language-plaintext highlighter-rouge">kong.request</code>.</li>
    </ul>
  </li>
</ul>

<h4 id="plugin-dependencies">Plugin Dependencies</h4>
<ul>
  <li>OpenID Connect Library
    <ul>
      <li>Token introspection now checks the status code properly.</li>
      <li>Added more consistent response body checks on <code class="language-plaintext highlighter-rouge">HTTP</code> requests.</li>
    </ul>
  </li>
</ul>

<h2 id="2210">2.2.1.0</h2>
<p><strong>Release Date</strong> 2020/12/31</p>

<h3 id="features-10">Features</h3>

<h4 id="developer-portal-2">Developer Portal</h4>
<ul>
  <li>Added <code class="language-plaintext highlighter-rouge">key-auth</code> support to Portal Application Registration.</li>
</ul>

<h3 id="fixes-24">Fixes</h3>

<h4 id="core-19">Core</h4>
<ul>
  <li>OpenSSL version bumped to 1.1.1i.
The OpenSSL version bump is related to CVE-2020-1971. We have performed an extensive review of OpenSSL usage in Kong and have found the following:
    <ul>
      <li>The core product is not vulnerable to the high severity CVE-2020-1971.</li>
      <li>The <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugin had a potential exploit associated with with CVE-2020-1971, but it would require an attacker to control a trusted CA or have admin port access, which <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/secure-admin-api/">we recommend you block from attackers</a> for numerous reasons. The updated OpenSSL version in this release additionally protects the <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugin.</li>
      <li>As a precautionary measure, we have bumped the OpenSSL dependency version to OpenSSL 1.1.1i.</li>
    </ul>
  </li>
</ul>

<h4 id="enterprise-28">Enterprise</h4>
<ul>
  <li>Fixed an issue where <code class="language-plaintext highlighter-rouge">/tmp</code> directories will not be deleted when running Kong or Kong CLI.</li>
  <li>Fixed an issue that prevented the use of keyring encryption of Kong database fields.</li>
  <li>RCE (Remote Code Execution) Plugin Mitigations:
Several Kong plugins allow arbitrary code execution by design, including the <code class="language-plaintext highlighter-rouge">serverless</code> plugin (also known as <code class="language-plaintext highlighter-rouge">pre-function</code> and <code class="language-plaintext highlighter-rouge">post-function</code> capabilities) and the <code class="language-plaintext highlighter-rouge">exit-transformer</code> plugin (for example, allows an administrator to configure a Lua-based response transformation). Changes include:
    <ul>
      <li>A new change locks down these plugins so that they have limited functions available in a sandbox, providing significant additional security for a user with an exposed admin port.</li>
      <li>Functions such as “require” are no longer available to scripts that run in these plugins for security purposes, because allowing “require” allows embedded additional arbitrary code execution.</li>
      <li><strong>Important</strong>: This change causes a <strong>breaking change</strong> in this patch release and it cannot be avoided. Our recommendation is that <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/secure-admin-api/">users lock down their admin ports</a> to avoid attackers trying to exploit any API gateway, like Kong, to gain access to internal networks. If you need the previous release behavior, including the ability to arbitrarily “require” libraries or if you want to lock things down further, we have introduced three new settings you can use:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA = off | sandbox | on</code> Sets whether any custom Lua code can be used outside of Kong’s distributed code. Defaults to “sandbox”.</li>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA_SANDBOX_REQUIRES = foo,bar</code> Which libraries, if any, you want to require in the sandbox. Defaults to an empty list.</li>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA_SANDBOX_ENVIRONMENT = kong.request</code> Any additional objects you want to pass through to the sandbox environments.  Defaults to an empty list.</li>
        </ul>

        <p>For detailed information about these new properties, see the <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/2.3.x/property-reference/#untrusted_lua">property reference documentation</a>.</p>
      </li>
    </ul>
  </li>
</ul>

<h4 id="developer-portal-3">Developer Portal</h4>
<ul>
  <li>In the Developer Portal Edit Application dialog, the Edit button is renamed to Save.</li>
</ul>

<h4 id="plugins-29">Plugins</h4>
<ul>
  <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>, used for Immunity)
    <ul>
      <li>Use <code class="language-plaintext highlighter-rouge">kong.request.get_body()</code></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/mtls-auth">Mutual TLS Authentication</a> (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)
    <ul>
      <li>Fixed (log) updating auth errors to handle fallthrough scenarios.</li>
      <li>Fixed (route, ws) ensuring workspace options are used for cache lookups.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/forward-proxy">Forward Proxy Advanced</a>(<code class="language-plaintext highlighter-rouge">forward-proxy</code>)
    <ul>
      <li>Fixed an issue where PDK logging phase check causes an error.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 3.8 to allow passing connection options to redis cluster client.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/session">Session</a> (<code class="language-plaintext highlighter-rouge">session</code>)
    <ul>
      <li>Added endpoint key to Admin API.</li>
      <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 3.8.</li>
    </ul>
  </li>
</ul>

<h4 id="configuration-9">Configuration</h4>

<ul>
  <li>Kong now runs as a <code class="language-plaintext highlighter-rouge">kong</code> user if it exists; if user does not exist
in the system, the <code class="language-plaintext highlighter-rouge">nobody</code> user is used, as before.</li>
</ul>

<h4 id="breaking-changes">Breaking Changes</h4>
<ul>
  <li>See <em>RCE (Remote Code Execution) Plugin Mitigations</em> in the Kong Enterprise section.</li>
</ul>

<h2 id="2200">2.2.0.0</h2>
<p><strong>Release Date</strong> 2020/11/17</p>

<div class="alert alert-warning">
<i class="fas fa-exclamation-triangle" style="color:orange; margin-right:3px"></i>
<b>Important:</b> Kong Enterprise 2.2.0.0 includes 2.2.0.0 (beta)
features, fixes, known issues, and workarounds. The changelog for 2.2.0.0 version includes only the diff between 2.2.0.0 and 2.2.0.0 (beta). See the <a href="#2200-beta">2.2.0.0 (beta) changelog</a> for more information.
</div>

<h3 id="features-11">Features</h3>
<p><strong>Note: Feature updates for Kong Enterprise 2.2.0.0 version include <a href="/enterprise/changelog/#beta-features-2200">2.2.0.0 (beta)</a> features.</strong></p>

<h4 id="kong-manager"><strong>Kong Manager</strong></h4>
<ul>
  <li>No new features.</li>
  <li>Kong Brain and Service Map are removed.</li>
</ul>

<h4 id="plugins-30"><strong>Plugins</strong></h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Added <code class="language-plaintext highlighter-rouge">config.enable_hs_signatures</code> (<code class="language-plaintext highlighter-rouge">false</code> is the default).</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_compressor</code>.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt-signer">JWT Signer</a> (<code class="language-plaintext highlighter-rouge">jwt-signer</code>)
    <ul>
      <li>Added <code class="language-plaintext highlighter-rouge">config.enable_hs_signatures</code> (<code class="language-plaintext highlighter-rouge">false</code> is the default).</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/aws-lambda">AWS Lambda</a> (<code class="language-plaintext highlighter-rouge">aws-lambda</code>)
    <ul>
      <li>Added support for <code class="language-plaintext highlighter-rouge">isBase64Encoded</code> flag in Lambda function responses.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/grpc-web">gRPC-Web</a> (<code class="language-plaintext highlighter-rouge">grpc-web</code>)
    <ul>
      <li>New configuration <code class="language-plaintext highlighter-rouge">pass_stripped_path</code>, which, if set to true, causes the
plugin to pass the stripped request path (see the
<a href="/enterprise/latest/admin-api/#route-object"><code class="language-plaintext highlighter-rouge">strip_path</code></a> Route attribute)
to the upstream gRPC service.</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-25">Fixes</h3>
<p><strong>Note: Fixes for Kong Enterprise 2.2.0.0 version include <a href="/enterprise/changelog/#beta-fixes-2200">2.2.0.0 (beta)</a> fixes.</strong></p>

<h4 id="openid-connect-library"><strong>OpenID Connect Library</strong></h4>
<ul>
  <li>Changed to disable HS-signature verification by default.</li>
  <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
  <li>Fixes vulnerability in the OpenID Connect and JWT Signer Plugins. Login to the <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/">Kong Enterprise Support Portal</a> for <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-OIDC-Plugin">OIDC advisory</a> and <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-JWT-Signer-Plugin">JWT advisory</a> details.</li>
</ul>

<h4 id="plugins-31"><strong>Plugins</strong></h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>HS-signature verification is now disabled by default.</li>
      <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
      <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 3.7.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt-signer">JWT Signer</a> (<code class="language-plaintext highlighter-rouge">jwt-signer</code>)
    <ul>
      <li>HS-signature verification is now disabled by default.</li>
    </ul>
  </li>
</ul>

<h2 id="2200-beta">2.2.0.0 (beta)</h2>
<p><strong>Release Date</strong> 2020/10/27</p>

<h3 id="kong-enterprise-1"><strong>Kong Enterprise</strong></h3>
<p>The following sections list Kong Gateway (Enterprise)-exclusive updates,
features, and fixes for the <strong>2.2.0.0 beta</strong> version.</p>

<h3 id="dependencies-9">Dependencies</h3>
<ul>
  <li>Bumped the required lua-resty-openssl version to
<a rel="nofollow noopener noreferrer" href="https://github.com/fffonion/lua-resty-openssl/blob/master/CHANGELOG.md#068---2020-10-15">0.6.8</a>.</li>
</ul>

<h3 id="beta-features-2200">Features</h3>

<h4 id="core-20">Core</h4>
<ul>
  <li>Added support for TLS Redis connections when using the Kong Redis library.</li>
  <li>Added support for running Kong as the non-root user <code class="language-plaintext highlighter-rouge">kong</code> on distributed
systems.</li>
</ul>

<h4 id="plugins-32">Plugins</h4>
<ul>
  <li>OpenID Connect (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Added the <code class="language-plaintext highlighter-rouge">issuers_allowed</code> configuration parameter, which introduces the
ability to specify valid issuers for access token ISS claim.</li>
      <li>Added the ability to pass <code class="language-plaintext highlighter-rouge">urn:ietf:params:oauth:grant-type:jwt-bearer</code>
assertions with the <code class="language-plaintext highlighter-rouge">client_credentials</code> authentication method.</li>
      <li>Added the <code class="language-plaintext highlighter-rouge">userinfo_endpoint</code> configuration parameter, which allows
manual definition of a user info endpoint.</li>
      <li>Added the ability to find nested claims using array indices. Array indices
start at 1, same as in Lua.</li>
      <li>Added issuer cache warmup on node start.</li>
    </ul>
  </li>
  <li><strong>Encryption support:</strong> The Redis strategy now supports TLS connections.
Introduced the <code class="language-plaintext highlighter-rouge">redis.ssl</code>, <code class="language-plaintext highlighter-rouge">redis.ssl_verify</code>, and <code class="language-plaintext highlighter-rouge">redis.server_name</code>
parameters for confguring TLS connections. Applies to the following plugins:
    <ul>
      <li>Rate Limiting Advanced (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)</li>
      <li>Proxy Caching Advanced (<code class="language-plaintext highlighter-rouge">proxy-cache-advanced</code>)</li>
    </ul>
  </li>
</ul>

<h3 id="beta-fixes-2200">Fixes</h3>

<h4 id="core-21">Core</h4>
<ul>
  <li><strong>Hybrid mode</strong>:
    <ul>
      <li>Fixed an issue where, in a cluster with multiple Control
Planes, configuration changes made by one Control Plane would not be picked up
by other Control Planes, and therefore would not be pushed to all Data Planes.</li>
      <li>Fixed an issue with custom certificates. When using a workspace other than
<code class="language-plaintext highlighter-rouge">default</code>, Kong Gateway did not present the configured certificate when the
correct SNI was sent.</li>
    </ul>
  </li>
</ul>

<h4 id="plugins-33">Plugins</h4>
<ul>
  <li>OpenID Connect (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Fixed a bug in issuer normalization.</li>
      <li>Improved discovery and rediscovery to be more resilient.</li>
      <li>When refreshing tokens, the old <code class="language-plaintext highlighter-rouge">id_token</code> is now preserved if a new one is
not given.</li>
      <li>Fixed an issue where token decoding also re-verified claims. Changed it
to skip claim verification when decoding tokens.</li>
      <li>Fixed issue of sharing the cache key using the same credentials but with
different endpoint arguments. Added a new parameter: <code class="language-plaintext highlighter-rouge">cache_tokens_salt</code>.
The value for this parameter is auto-generated by default, which means that
the token endpoint cache is not automatically shared between different
plugin instances.</li>
      <li>Fixed issue that caused the <code class="language-plaintext highlighter-rouge">unexpected_redirect_uri</code> setting to be
ignored.</li>
      <li>Fixed redirects to use <code class="language-plaintext highlighter-rouge">kong.response.exit</code>, which implements the proper
short-circuiting semantics in Kong.</li>
    </ul>
  </li>
  <li>OAuth Introspection (<code class="language-plaintext highlighter-rouge">oauth2-introspection</code>)
    <ul>
      <li>Fixed an issue where the cache would not be properly invalidated
when a Consumer username was updated.</li>
    </ul>
  </li>
  <li>Proxy Caching Advanced (<code class="language-plaintext highlighter-rouge">proxy-cache-advanced</code>)
    <ul>
      <li>Fixed a 500 error that would appear when the URL contained empty query
string parameters.</li>
    </ul>
  </li>
  <li>Exit Transformer (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>Fixed some cases where an <code class="language-plaintext highlighter-rouge">unknown</code> exit would not be handled.</li>
    </ul>
  </li>
  <li>AWS Lambda (<code class="language-plaintext highlighter-rouge">aws-lambda</code>)
    <ul>
      <li>Respect the <code class="language-plaintext highlighter-rouge">skip_large_bodies</code> config setting even when not using AWS API
Gateway compatibility.</li>
    </ul>
  </li>
  <li>ACME (<code class="language-plaintext highlighter-rouge">acme</code>)
    <ul>
      <li>Changed the cache to use non-nil TTL in Hybrid mode. This fixes a bug for
renewals not updating the certificate after Kong Gateway 2.0.5.</li>
      <li>Fixed a bug in database mode where the renewal configuration was not
properly stored.</li>
    </ul>
  </li>
  <li>Prometheus (<code class="language-plaintext highlighter-rouge">prometheus</code>)
    <ul>
      <li>Switched to using the <code class="language-plaintext highlighter-rouge">Kong.pdk.serializer</code> instead of the deprecated basic
serializer.</li>
    </ul>
  </li>
  <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>, used for Immunity)
    <ul>
      <li>Removed the <code class="language-plaintext highlighter-rouge">/service_maps</code> passthrough.</li>
    </ul>
  </li>
</ul>

<h3 id="kong-gateway-oss"><strong>Kong Gateway (OSS)</strong></h3>

<p><strong>Kong Enterprise 2.2.0.0 beta</strong> inherits the following changes from the
open-source <strong>Kong Gateway 2.2.0.0</strong>:</p>

<h3 id="dependencies-10">Dependencies</h3>

<ul>
  <li>For Kong Gateway 2.2, the required OpenResty version has been bumped to
<a rel="nofollow noopener noreferrer" href="http://openresty.org/en/changelog-1017008.html">1.17.8.2</a>, and the
the set of patches included has changed, including the latest release of
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/lua-kong-nginx-module">lua-kong-nginx-module</a>.
If you are installing Kong from one of our distribution
packages, you are not affected by this change.</li>
  <li>
    <p>Bumped OpenSSL version from <code class="language-plaintext highlighter-rouge">1.1.1g</code> to <code class="language-plaintext highlighter-rouge">1.1.1h</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6382">#6382</a></p>

    <div class="alert alert-ee blue">
  <strong>Note:</strong> If you are not using one of our distribution packages and compiling
  OpenResty from source, you must still apply Kong's <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-build-tools/tree/master/openresty-build-tools/openresty-patches">
  OpenResty patches</a>
  (and, as highlighted above, compile OpenResty with the new
  <code>lua-kong-nginx-module</code>). Our <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-build-tools">kong-build-tools</a>
  repository allows you to do both easily.
  </div>
  </li>
  <li>Cassandra 2.x support is now deprecated. If you are still
using Cassandra 2.x with Kong, we recommend you to upgrade, since this
series of Cassandra is about to be EOL with the upcoming release of
Cassandra 4.0.</li>
</ul>

<h3 id="additions">Additions</h3>

<h4 id="core-22">Core</h4>

<ul>
  <li><strong>UDP support</strong>: Kong now features support for UDP proxying
  in its stream subsystem. The <code class="language-plaintext highlighter-rouge">"udp"</code> protocol is now accepted in the <code class="language-plaintext highlighter-rouge">protocols</code>
  attribute of Routes and the <code class="language-plaintext highlighter-rouge">protocol</code> attribute of Services.
  Load balancing and logging plugins support UDP as well.
  <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6215">#6215</a></li>
  <li><strong>Configurable Request and Response Buffering</strong>: The buffering of requests
or responses can now be enabled or disabled on a per-route basis, through
setting attributes <code class="language-plaintext highlighter-rouge">Route.request_buffering</code> or <code class="language-plaintext highlighter-rouge">Route.response_buffering</code>
to <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>. The default behavior remains the same: buffering is
enabled by default for requests and responses.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6057">#6057</a></li>
  <li><strong>Option to Automatically Load OS Certificates</strong>: The configuration
attribute <code class="language-plaintext highlighter-rouge">lua_ssl_trusted_certificate</code> was extended to accept a
comma-separated list of certificate paths, as well as a special <code class="language-plaintext highlighter-rouge">system</code>
value, which expands to the system default certificates file installed
by the operating system. This follows a very simple heuristic to try to
use the most common certificate file in the most popular distros.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6342">#6342</a></li>
  <li><strong>The consistent-hashing load balancing algorithm</strong> does not need to use the
entire target history to build the same proxying destinations table on all
Kong nodes anymore. Now, deleted targets are removed from the database and the
target entities can be manipulated by the Admin API the same way as any other
entity.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6336">#6336</a></li>
  <li><strong>Added <code class="language-plaintext highlighter-rouge">X-Forwarded-Path</code> header:</strong> If a trusted source provides an
<code class="language-plaintext highlighter-rouge">X-Forwarded-Path</code> header, it is proxied as is. Otherwise, Kong sets
the content of said header to the request’s path.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6251">#6251</a></li>
  <li><strong>Hybrid Mode:</strong>
    <ul>
      <li>The table of Data Plane nodes at the Control Plane is now
cleaned up automatically, according to a delay value configurable using
the <code class="language-plaintext highlighter-rouge">cluster_data_plane_purge_delay</code> attribute, set to 14 days by default.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6376">#6376</a></li>
      <li>Data Plane nodes now apply only the last config when receiving
several updates in sequence, improving the performance when large configs
are in use. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6299">#6299</a></li>
      <li>Synchronization performance improvements: Kong now uses a
new internal synchronization method to push changes from the Control Plane
to the Data Plane, drastically reducing the amount of communication between
nodes during bulk updates.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6293">#6293</a></li>
    </ul>
  </li>
  <li><strong>The <code class="language-plaintext highlighter-rouge">Upstream.client_certificate</code> attribute</strong> can now be used for proxying.
This allows the <code class="language-plaintext highlighter-rouge">client_certificate</code> setting used for mTLS handshaking with
the <code class="language-plaintext highlighter-rouge">Upstream</code> server to be shared easily among different Services.
However, <code class="language-plaintext highlighter-rouge">Service.client_certificate</code> will take precedence over
<code class="language-plaintext highlighter-rouge">Upstream.client_certificate</code> if both are set simultaneously.
In previous releases, <code class="language-plaintext highlighter-rouge">Upstream.client_certificate</code> was only used for
mTLS in active health checks.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6348">#6348</a></li>
  <li><strong>New <code class="language-plaintext highlighter-rouge">shorthand_fields</code> top-level attribute</strong> in schema definitions, which
deprecates <code class="language-plaintext highlighter-rouge">shorthands</code> and includes type definitions in addition to the
shorthand callback.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6364">#6364</a></li>
</ul>

<h4 id="admin-api-6">Admin API</h4>

<ul>
  <li><strong>Hybrid Mode:</strong> Introduced the new endpoint <code class="language-plaintext highlighter-rouge">/clustering/data-planes</code>, which
returns complete information about all Data Plane nodes that are connected to
the Control Plane cluster, regardless of the Control Plane node to which they
are connected.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6308">#6308</a></li>
  <li>Admin API responses now honor the <code class="language-plaintext highlighter-rouge">headers</code> configuration setting for
including or removing the <code class="language-plaintext highlighter-rouge">Server</code> header.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6371">#6371</a></li>
</ul>

<h4 id="pdk-10">PDK</h4>

<ul>
  <li>New function <code class="language-plaintext highlighter-rouge">kong.request.get_forwarded_prefix</code>: Returns the prefix path
component of the request’s URL that Kong stripped before proxying to upstream,
respecting the value of <code class="language-plaintext highlighter-rouge">X-Forwarded-Prefix</code> when it comes from a trusted
source.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6251">#6251</a></li>
  <li>The <code class="language-plaintext highlighter-rouge">kong.response.exit</code> now honors the <code class="language-plaintext highlighter-rouge">headers</code> configuration setting for
including or removing the <code class="language-plaintext highlighter-rouge">Server</code> header.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6371">#6371</a></li>
  <li>The <code class="language-plaintext highlighter-rouge">kong.log.serialize</code> function now can be called using the stream subsystem,
allowing various logging plugins to work under TCP and TLS proxy modes.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6036">#6036</a></li>
  <li>Requests with <code class="language-plaintext highlighter-rouge">multipart/form-data</code> MIME type now can use the same part name
multiple times. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6054">#6054</a></li>
</ul>

<h4 id="plugins-34">Plugins</h4>

<ul>
  <li><strong>New Response Phase for custom plugins</strong>: Both Go and Lua custom plugins now
support a new plugin phase called <code class="language-plaintext highlighter-rouge">response</code> in Lua plugins and <code class="language-plaintext highlighter-rouge">Response</code> in
Go. Using it automatically enables response buffering, which allows you to
manipulate both the response headers and the response body in the same phase.
This enables support for response handling in Go, where header and body
filter phases are not available, allowing you to use PDK functions such
as <code class="language-plaintext highlighter-rouge">kong.Response.GetBody()</code>, and provides an equivalent simplified
feature for handling buffered responses from Lua plugins as well.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/5991">#5991</a></li>
  <li><a href="/hub/kong-inc/aws-lambda">AWS Lambda</a> (<code class="language-plaintext highlighter-rouge">aws-lambda</code>)
    <ul>
      <li>Bumped to version 3.5.0.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6379">#6379</a></li>
      <li>Added support for the <code class="language-plaintext highlighter-rouge">isBase64Encoded</code> flag in Lambda function responses.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/grpc-web">gRPC Web</a> (<code class="language-plaintext highlighter-rouge">grpc-web</code>)
    <ul>
      <li>Introduced the configuration parameter <code class="language-plaintext highlighter-rouge">pass_stripped_path</code>, which, if set
to true, causes the plugin to pass the stripped request path (see the
<a href="/enterprise/latest/admin-api/#route-object"><code class="language-plaintext highlighter-rouge">strip_path</code></a> Route attribute)
to the upstream gRPC service.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/rate-limiting">Rate Limiting</a> (<code class="language-plaintext highlighter-rouge">rate-limiting</code>)
    <ul>
      <li>Added support for rate limiting by path using the <code class="language-plaintext highlighter-rouge">limit_by = "path"</code>
configuration attribute. Thanks <a rel="nofollow noopener noreferrer" href="https://github.com/KongGuide">KongGuide</a> for
the patch!
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6286">#6286</a></li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/correlation-id">Correlation ID</a> (<code class="language-plaintext highlighter-rouge">correlation-id</code>)
    <ul>
      <li>The plugin now generates a <code class="language-plaintext highlighter-rouge">correlation-id</code> value by default
if the correlation ID header arrives but is empty.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/6358">#6358</a></li>
    </ul>
  </li>
</ul>

<h3 id="deprecated-features">Deprecated Features</h3>

<ul>
  <li><strong>Hybrid mode:</strong>  The <code class="language-plaintext highlighter-rouge">/clustering/status</code> endpoint is now deprecated, since it
returned only information about Data Plane nodes directly connected to the
Control Plane node to which the Admin API request was made. It is
superseded by the new <code class="language-plaintext highlighter-rouge">/clustering/data-planes</code> endpoint.</li>
  <li>The <code class="language-plaintext highlighter-rouge">shorthands</code> attribute in schema definitions is deprecated in favor of
the new <code class="language-plaintext highlighter-rouge">shorthand_fields</code> top-level attribute.</li>
</ul>

<h2 id="2147">2.1.4.7</h2>
<p><strong>Release Date</strong> 2021/08/18</p>

<h3 id="fixes-26">Fixes</h3>

<h4 id="enterprise-29">Enterprise</h4>
<ul>
  <li>Users can now successfully delete workspaces after deleting all entities associated with that workspace.
Previously, Kong Gateway was not correctly cleaning up parent-child relationships. For example, creating
an Admin also creates a Consumer and RBAC user. When deleting the Admin, the Consumer and RBAC user are
also deleted, but accessing the <code class="language-plaintext highlighter-rouge">/workspaces/workspace_name/meta</code> endpoint would show counts for Consumers
and RBAC users, which prevented the workspace from being deleted. Now deleting entities correctly updates
the counts, allowing an empty workspace to be deleted.</li>
  <li>Updates Kong Dev Portal templates’ JQuery dependency to v3.6.0, improving security.</li>
</ul>

<h4 id="plugins-35">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
With this fix, when the OpenID Connect plugin is configured with a <code class="language-plaintext highlighter-rouge">config.anonymous</code> consumer and
<code class="language-plaintext highlighter-rouge">config.scopes_required</code> is set, a token missing the required scopes will have the anonymous consumer
headers set when sent to the upstream.</li>
</ul>

<h2 id="2146">2.1.4.6</h2>
<p><strong>Release Date</strong> 2021/04/21</p>

<p>This release includes internal updates that do not affect product functionality.</p>

<h3 id="fixes-27">Fixes</h3>

<h4 id="enterprise-30">Enterprise</h4>
<ul>
  <li>Fixed an issue encountered when users were deleting a Kong Dev Portal collection and
the collection was not defined in <code class="language-plaintext highlighter-rouge">portal.conf.yaml</code> or <code class="language-plaintext highlighter-rouge">portal.conf.yaml</code>
did not exist. Instead of deleting the content, users received an error.
This issue also occurred when users were using the Kong Dev Portal CLI to wipe or deploy
templates. With this fix, deleting content from the Kong Dev Portal works as
expected.</li>
  <li>In Kong Manager, users could receive an empty set of roles from an API request,
even when valid RBAC roles existed in the database because of a filtering issue
with portal and default roles on a paginated set. With this fix, if valid RBAC
roles exist in the database, an API request returns with those valid roles.</li>
</ul>

<h2 id="2145">2.1.4.5</h2>
<p><strong>Release Date</strong> 2021/03/31</p>

<h3 id="fixes-28">Fixes</h3>

<h4 id="enterprise-31">Enterprise</h4>
<p>Fixed an issue with upgrades of Kong Gateway (Enterprise) from v1.5.x to v2.1.x. Before the fix, when admin consumers were shared across multiple workspaces, it was possible for the migration to fail. The upgrade would fail because plugin entities that depend on consumer entities must live in the same workspace as the consumer entity. This fix migrates these plugin entities to the same workspace as the consumer entities. Customers affected by this issue will need to upgrade their v2.1 install to at least v2.1.4.5 before attempting to migrate from v1.5 to v2.1.</p>

<h2 id="2144">2.1.4.4</h2>
<p><strong>Release Date</strong> 2021/03/26</p>

<h3 id="fixes-29">Fixes</h3>

<h4 id="core-23">Core</h4>
<ul>
  <li>Fixed an issue where certain incoming URI may make it possible to bypass security rules applied
on Route objects. This fix make such attacks more difficult by always normalizing the incoming
request’s URI before matching against the Router.</li>
  <li>Sanitize sanitize path postfix for additional security.</li>
</ul>

<h4 id="enterprise-32">Enterprise</h4>
<ul>
  <li>If a trusted source provides an <code class="language-plaintext highlighter-rouge">X-Forwarded-Path</code> header, it’s proxied as-is; otherwise,
Kong will set the content of the header to the request’s URI.</li>
  <li>Fixed a migration issue where workspaces IDs (<code class="language-plaintext highlighter-rouge">ws_id</code>) were not being appended to more than
1000 entities, resulting in <code class="language-plaintext highlighter-rouge">ws_id</code> being <code class="language-plaintext highlighter-rouge">null</code> after migrations have been successfully
completed with <code class="language-plaintext highlighter-rouge">kong migrations finish</code>.</li>
</ul>

<h4 id="devportal-1">DevPortal</h4>
<ul>
  <li>Before, when enabling application registration with key authentication, developers who created
applications were able to see all Services for which the application registration plugin was enabled,
regardless of the permissions granted to their role. With this fix, developers who create applications
will only see Services if the role they are assigned to has been granted permissions to the relevant
specs.</li>
</ul>

<h4 id="plugins-36">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Fixed init workers that were prolonging Kong startup time.</li>
      <li>Fixed consumer and discovery invalidation events that were returning when the operation
was <code class="language-plaintext highlighter-rouge">create</code>. This could leave some cache entries in cache that need to be invalidated.</li>
      <li>Fixed a circular dependency issue with the redirect function.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.disable_session</code> to be able to disable session creation with
specified authentication methods.</li>
      <li>Changed <code class="language-plaintext highlighter-rouge">Cache-Control="no-store"</code> instead of <code class="language-plaintext highlighter-rouge">Cache-Control="no-cache, no-store"</code>,
and only set <code class="language-plaintext highlighter-rouge">Pragma="no-cache"</code> with HTTP 1.0 (and below).</li>
      <li>Fixed <code class="language-plaintext highlighter-rouge">/openid-connect/jwks</code> to not expose private keys (this bug was introduced
in v1.6.0 (Kong Enterprise v2.1.3.1) and affects all versions up to v1.8.3 (Kong Enterprise v2.3.2)).</li>
      <li>Token introspection now checks the status code properly.</li>
      <li>More consistent response body checks on HTTP requests.</li>
      <li>Fixed an issue where enabling zlib compressor did not affect the size of the session cookie.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/acme">ACME</a> (<code class="language-plaintext highlighter-rouge">acme</code>) (updated to v0.2.14)
    <ul>
      <li>Bump <code class="language-plaintext highlighter-rouge">lua-resty-acme</code> to v0.6.x; this fixes several issues with Pebble test server.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/exit-transformer">Exit Transformer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>The plugin now allows access to Kong modules within the sandbox, not only to <code class="language-plaintext highlighter-rouge">kong.request</code>.</li>
    </ul>
  </li>
</ul>

<h4 id="plugin-dependencies-1">Plugin Dependencies</h4>
<ul>
  <li>OpenID Connect Library
    <ul>
      <li>Token introspection now checks the status code properly.</li>
      <li>Added more consistent response body checks on <code class="language-plaintext highlighter-rouge">HTTP</code> requests.</li>
    </ul>
  </li>
</ul>

<h2 id="2143">2.1.4.3</h2>
<p><strong>Release Date</strong> 2020/12/31</p>

<h3 id="fixes-30">Fixes</h3>

<h4 id="core-24">Core</h4>
<ul>
  <li>OpenSSL version bumped to 1.1.1i.
The OpenSSL version bump is related to CVE-2020-1971. We have performed an extensive review of OpenSSL usage in Kong and have found the following:
    <ul>
      <li>The core product is not vulnerable to the high severity CVE-2020-1971.</li>
      <li>The <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugin had a potential exploit associated with with CVE-2020-1971, but it would require an attacker to control a trusted CA or have admin port access, which <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/secure-admin-api/">we recommend you block from attackers</a> for numerous reasons. The updated OpenSSL version in this release additionally protects the <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugin.</li>
      <li>As a precautionary measure, we have bumped the OpenSSL dependency version to OpenSSL 1.1.1i.</li>
    </ul>
  </li>
</ul>

<h4 id="kong-enterprise-2">Kong Enterprise</h4>
<ul>
  <li>RCE (Remote Code Execution) Plugin Mitigations:
Several Kong plugins allow arbitrary code execution by design, including the <code class="language-plaintext highlighter-rouge">serverless</code> plugin (also known as <code class="language-plaintext highlighter-rouge">pre-function</code> and <code class="language-plaintext highlighter-rouge">post-function</code> capabilities) and the <code class="language-plaintext highlighter-rouge">exit-transformer</code> plugin (for example, allows an administrator to configure a Lua-based response transformation). Changes include:
    <ul>
      <li>A new change in this release locks down these plugins so that they have limited functions available in a sandbox, providing significant additional security for a user with an exposed admin port.</li>
      <li>Functions such as “require” are no longer available to scripts that run in these plugins for security purposes, because allowing “require” allows embedded additional arbitrary code execution.</li>
      <li><strong>Important</strong>: This change causes a <strong>breaking change</strong> in this patch release and it cannot be avoided. Our recommendation is that <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/secure-admin-api/">users lock down their admin ports</a> to avoid attackers trying to exploit any API gateway, like Kong, to gain access to internal networks. If you need the previous release behavior, including the ability to arbitrarily “require” libraries or if you want to lock things down further, we have introduced three new settings you can use:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA = off | sandbox | on</code> Sets whether any custom Lua code can be used outside of Kong’s distributed code. Defaults to “sandbox”.</li>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA_SANDBOX_REQUIRES = foo,bar</code> Which libraries, if any, you want to require in the sandbox. Defaults to an empty list.</li>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA_SANDBOX_ENVIRONMENT = kong.request</code> Any additional objects you want to pass through to the sandbox environments.  Defaults to an empty list.</li>
        </ul>

        <p>For detailed information about these new properties, see the <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/2.3.x/property-reference/#untrusted_lua">property reference documentation</a>.</p>
      </li>
    </ul>
  </li>
  <li>Backport Admins Migration Fix: When upgrading from 1.5.x.y to versions prior to 2.2.0.0, there was a known migration issue that prevented the upgrade from continuing and also generated log errors. This issue was caused by a bug in the handling of which workspaces consumers were assigned to. Release 2.1.4.3 resolves this issue the same way it does for 2.2.0.0. It is recommended that if you are upgrading to 2.1.x.y, that you use 2.1.4.3 to avoid migration errors.</li>
</ul>

<h4 id="kong-manager-1">Kong Manager</h4>
<ul>
  <li>Fixed an issue causing the Developer registration link to not work.</li>
</ul>

<h4 id="plugins-37">Plugins</h4>
<ul>
  <li>Mutual TLS Authentication (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)
    <ul>
      <li>Fixed (log) updating auth errors to handle fallthrough scenarios.</li>
      <li>Fixed (route, ws) ensuring workspace options are used for cache lookups.</li>
    </ul>
  </li>
</ul>

<h4 id="breaking-changes-1">Breaking Changes</h4>
<ul>
  <li>See <em>RCE (Remote Code Execution) Plugin Mitigations</em> in the Kong Enterprise section.</li>
</ul>

<h2 id="2142">2.1.4.2</h2>
<p><strong>Release Date</strong> 2020/11/17</p>

<h3 id="fixes-31">Fixes</h3>

<h4 id="core-25">Core</h4>
<ul>
  <li>Fixed an issue causing workspace entity count meta information to get out of sync when deleting entities by name.</li>
</ul>

<h4 id="kong-manager-2">Kong Manager</h4>
<ul>
  <li>Added Service path to information at the top of Service specific page.</li>
</ul>

<h4 id="kong-developer-portal">Kong Developer Portal</h4>
<ul>
  <li>Fixed Application Save button label, changing from Edit to Save.</li>
</ul>

<h4 id="openid-connect-library-1"><strong>OpenID Connect Library</strong></h4>
<ul>
  <li>Changed to disable HS-signature verification by default.</li>
  <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
  <li>Fixes vulnerability in the OpenID Connect and JWT Signer Plugins. Login to the <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/">Kong Enterprise Support Portal</a> for <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-OIDC-Plugin">OIDC advisory</a> and <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-JWT-Signer-Plugin">JWT advisory</a> details.</li>
</ul>

<h4 id="plugins-38">Plugins</h4>
<ul>
  <li>Mutual TLS Authentication (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)
    <ul>
      <li>Fixed an issue when client certificate is not requested for plugins applied in non-default workspace.</li>
    </ul>
  </li>
  <li>Proxy Cache Advanced (<code class="language-plaintext highlighter-rouge">proxy-cache-advanced</code>)
    <ul>
      <li>Fixed cache usage when URL includes empty query string param.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/openid-connect">OpenID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>HS-signature verification is now disabled by default.</li>
      <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
      <li>Updated <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 3.7.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/jwt-signer">JWT Signer</a> (<code class="language-plaintext highlighter-rouge">jwt-signer</code>)
    <ul>
      <li>HS-signature verification is now disabled by default.</li>
    </ul>
  </li>
</ul>

<h2 id="2141">2.1.4.1</h2>
<p><strong>Release Date</strong> 2020/10/30</p>

<h3 id="fixes-32">Fixes</h3>

<h4 id="core-26">Core</h4>

<ul>
  <li>Fix unique violation error for workspaces when using PUT.</li>
  <li>Fix cluster telemetry server name default.</li>
  <li>Allow certificates to be applied from workspaces.</li>
  <li>Fix time waiting calculation for 499 errors.</li>
  <li>Migration optimizations and fixes:
    <ul>
      <li>Remove extra connections in PostgreSQL.</li>
      <li>Ensure that multiple workspaces are not created for Cassandra.</li>
    </ul>
  </li>
  <li>Database optimizations and fixes:
    <ul>
      <li>Correct wait for schema agreement timeout with Cassandra.</li>
      <li>Remove rate limiting metrics on database export.</li>
    </ul>
  </li>
  <li>Fix cluster level invalidation for hybrid control plane nodes.</li>
  <li>Optimize workspace ID retrieval.</li>
</ul>

<h4 id="plugins-39">Plugins</h4>

<ul>
  <li><a href="/hub/kong-inc/exit-transformer/">Exit Transfomer</a> (<code class="language-plaintext highlighter-rouge">exit-transformer</code>)
    <ul>
      <li>Fix error getting route.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/mtls-auth">Mutual TLS Authentication</a> (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)
    <ul>
      <li>Ensure that the basic serializer generates the <code class="language-plaintext highlighter-rouge">request.tls.client_verify</code>
field based on this module’s validation result.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-validator">Request Validator</a> (<code class="language-plaintext highlighter-rouge">request-validator</code>)
    <ul>
      <li>Update the <code class="language-plaintext highlighter-rouge">lua-resty-ljsonschema</code> library dependency.
See library <a rel="nofollow noopener noreferrer" href="https://github.com/Tieske/lua-resty-ljsonschema#111-28-oct-2020">changelog</a>.</li>
    </ul>
  </li>
</ul>

<h2 id="2140">2.1.4.0</h2>
<p><strong>Release Date</strong> 2020/10/01</p>

<h3 id="fixes-33">Fixes</h3>

<h4 id="kong-gateway">Kong Gateway</h4>

<ul>
  <li>Fixed upsert for RBAC users using Admin API.</li>
  <li>Allow PostgreSQL keepalive time to be configurable.</li>
</ul>

<h4 id="kong-manager-3">Kong Manager</h4>

<ul>
  <li>Added path to service on display page.</li>
</ul>

<h4 id="kong-developer-portal-1">Kong Developer Portal</h4>

<ul>
  <li>Fixed app <code class="language-plaintext highlighter-rouge">Save</code> button to display as <code class="language-plaintext highlighter-rouge">Save</code> instead of <code class="language-plaintext highlighter-rouge">Edit</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">plugin.service</code> check in <code class="language-plaintext highlighter-rouge">app_reg</code> helper.</li>
  <li>Fixed application registration issue rendered unusable with certain plugin configurations.</li>
  <li>Fixed sidebar links with “.”</li>
</ul>

<h3 id="deprecated-features-1">Deprecated Features</h3>

<ul>
  <li>Kong Brain is deprecated and not available for use in Kong Enterprise.</li>
</ul>

<h2 id="2131">2.1.3.1</h2>
<p><strong>Release Date</strong> 2020/08/31</p>

<h3 id="fixes-34">Fixes</h3>

<h4 id="kong-gateway-1">Kong Gateway</h4>

<ul>
  <li>Fixed issues to properly migrate workspaces associated with ACL groups.</li>
  <li>Improved the amount of logging in the migrations framework.</li>
</ul>

<h4 id="kong-manager-4">Kong Manager</h4>

<ul>
  <li>Fixed docs link and messaging on the Dev Portals page.</li>
</ul>

<h2 id="2130">2.1.3.0</h2>
<p><strong>Release Date</strong> 2020/08/25</p>

<p>Kong Enterprise 2.1.3.0 version includes 2.1.0.0 (beta) features, fixes, known issues, and workarounds. See the <a href="/enterprise/changelog/#2100-beta/">2.1.0.0 (beta)</a> changelog for more details.</p>

<h3 id="features-12">Features</h3>

<p><strong>Note: Feature updates for Kong Enterprise 2.1.3.0 version includes <a href="/enterprise/changelog/#features">2.1.0.0 (beta)</a> features.</strong></p>

<h4 id="kong-gateway-2">Kong Gateway</h4>
<ul>
  <li>Inherited changes from OSS Kong in releases 2.0.x, 2.1.0, 2.1.1, 2.1.2, and 2.1.3.</li>
  <li>Workspaces code has been refactored for performance. The feature should work the same for most users.</li>
  <li>TLS version may be specified when using TLS to connect to a Postgres database.</li>
</ul>

<h4 id="kong-manager-5">Kong Manager</h4>
<ul>
  <li>Open ID Connect (<code class="language-plaintext highlighter-rouge">openid-connect</code>) can now be used with <a href="/enterprise/latest/kong-manager/service-directory-mapping/">Mapping Service Directory Groups to Kong Roles</a> using <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code>.</li>
  <li>Can now see the <code class="language-plaintext highlighter-rouge">created_at</code> timestamp for consumer credentials.</li>
  <li>Provide a warning when a user’s session is about to expire.</li>
  <li>Generate an RBAC token for an administrator rather than letting them set one.</li>
  <li>Plugin forms now have docs links to the <a href="/hub/">Plugins Hub</a>.</li>
</ul>

<h4 id="kong-developer-portal-2">Kong Developer Portal</h4>
<ul>
  <li>Application Registration can now be configured to use a third-party OAuth provider.</li>
</ul>

<h4 id="plugins-40">Plugins</h4>
<ul>
  <li><a href="/hub/kong-inc/openid-connect/">Open ID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Added <code class="language-plaintext highlighter-rouge">X-Authenticated-Groups</code> request header when doing authenticated groups.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.groups_required</code> and <code class="language-plaintext highlighter-rouge">config.groups_claim</code>.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.roles_required</code> and <code class="language-plaintext highlighter-rouge">config.roles_claim</code>.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">DELETE :8001/openid-connect/issuers</code> endpoint (for cache clearing).</li>
      <li>Added <code class="language-plaintext highlighter-rouge">DELETE :8001/openid-connect/jwks</code> endpoint (for rotating the jwks).</li>
      <li>Added Admin API for DBless (it is a single node only).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">x5t</code> key lookups.</li>
      <li>Added support for same <code class="language-plaintext highlighter-rouge">x5t</code> but different <code class="language-plaintext highlighter-rouge">alg</code> lookups.</li>
      <li>Changed that <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code> is considered even on successful consumer mapping so that it enables dynamic groups, while using consumer mapping. This feature is used with <a href="/enterprise/latest/kong-manager/service-directory-mapping/">Mapping Service Directory Groups to Kong Roles</a>.</li>
      <li>Changed code to be more resilient on rediscovery errors.</li>
      <li>Changed <code class="language-plaintext highlighter-rouge">config.rediscovery_lifetime</code> to default to 30 seconds instead of 300 seconds (5 minutes).</li>
      <li>Changed plugin to do rediscovery on configuration changes (while still respecting <code class="language-plaintext highlighter-rouge">config.rediscovery_lifetime</code>).</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/response-transformer-advanced/">Response Transformer Advanced</a> (<code class="language-plaintext highlighter-rouge">response-transformer-advanced</code>)
    <ul>
      <li>Added support to specify JSON types for configuration values. For example, by doing <code class="language-plaintext highlighter-rouge">config.add.json.json_types</code>: [“number”], the plugin will convert “-1” added JSON values into -1.</li>
      <li>Improved performance by not inheriting from the BasePlugin class.</li>
      <li>The plugin is now defensive against possible errors and nil header values.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-transformer-advanced/">Request Transformer Advanced</a> (<code class="language-plaintext highlighter-rouge">request-transformer-advanced</code>)
    <ul>
      <li>Standardize on <code class="language-plaintext highlighter-rouge">allow</code> instead of <code class="language-plaintext highlighter-rouge">whitelist</code> to specify the parameter names that should be allowed in request JSON body. Previous <code class="language-plaintext highlighter-rouge">whitelist</code> nomenclature is deprecated and support will be removed in Kong 3.0.</li>
    </ul>
  </li>
</ul>

<h4 id="documentation-updates">Documentation Updates</h4>
<ul>
  <li>Plugin examples now include declarative configuration (YAML) information.</li>
  <li>Upgrade and Migration instructions are updated for migrating from Kong Enterprise 1.5.x to 2.1.x, Kong Community Gateway 1.5 to Kong Enterprise 1.5, and Developer Portal templates.</li>
</ul>

<h3 id="fixes-35">Fixes</h3>

<p><strong>Note: Fixes for Kong Enterprise 2.1.3.0 version includes the <a href="/enterprise/changelog/#fixes">2.1.0.0 (beta)</a> fixes.</strong></p>

<h4 id="kong-manager-6">Kong Manager</h4>
<ul>
  <li>Auto-generated role <code class="language-plaintext highlighter-rouge">workspace-portal-admin</code> does not display link to Dev Portal Editor.</li>
  <li>Routes form did not expose <code class="language-plaintext highlighter-rouge">path_handling</code> attribute for adding/editing.</li>
  <li>When Kong Manager is secured with OIDC, new workspaces do not include the auto-generated roles.</li>
  <li>Able to enumerate usernames via the <code class="language-plaintext highlighter-rouge">/admins</code> endpoint.</li>
  <li>Unable to install Kong Manager outside the root directory.</li>
</ul>

<h4 id="kong-developer-portal-3">Kong Developer Portal</h4>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">/developers/:developer/applications</code> endpoint allowed applications to be created for a developer other than the one in the path.</li>
  <li>The change password endpoint for developers did not require the original password.</li>
  <li>User was not redirected to Login after a session timeout.</li>
  <li>Unable to configure <code class="language-plaintext highlighter-rouge">Accept Http If Already Terminated</code> for Application Registration plugin. Instead, add both Application Registration and OAuth 2.0 Authentication, and set the config on the Oauth2 Authentication plugin.</li>
</ul>

<h4 id="plugins-41">Plugins</h4>

<ul>
  <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>, for Brain and Immunity)
    <ul>
      <li>Fixed a bug that would make the plugin try to parse request/response body regardless of the content-type.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/graphql-rate-limiting-advanced/">GraphQL Rate Limiting Advance</a>d (<code class="language-plaintext highlighter-rouge">gql-rate-limiting-advanced</code>)
    <ul>
      <li>Fixed configuration using transformation that breaks in hybrid mode.</li>
    </ul>
  </li>
  <li>
    <p><a href="/hub/kong-inc/grpc-gateway/">gRPC Gateway</a> documentation is improved.</p>
  </li>
  <li><a href="/hub/kong-inc/jwt-signer/">Kong JWT Signer</a>
    <ul>
      <li>Changed Postgres column type for keys in <code class="language-plaintext highlighter-rouge">jwt_signer_jwks</code> table from JSONB to JSONB[] for a better hybrid compatibility.</li>
      <li>Changed Postgres column type for previous in <code class="language-plaintext highlighter-rouge">jwt_signer_jwks</code> table from JSONB to JSONB[] for a better hybrid compatibility.</li>
      <li>Changed JWKS URIs to return application/jwk-set+json instead of application/json.</li>
      <li>Remove <code class="language-plaintext highlighter-rouge">run_on</code> field for 2.1.0.0 compatability.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/ldap-auth-advanced/">LDAP Authentication Advanced</a> (<code class="language-plaintext highlighter-rouge">ldap-auth-advanced</code>)
    <ul>
      <li>Return a 500 when there’s an error.</li>
      <li>Respond with a 401 instead of 403.</li>
      <li>Case-sensitive groups.</li>
      <li>Accept AD group names containing spaces.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/openid-connect/">Open ID Connect</a> (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Fixed DB-less to reload private key JWTS on each request.</li>
      <li>Fixed runtime error on two log statements when validating required claims.</li>
      <li>Changed arguments parser to use Kong PDK for building dynamic redirect URI. Works with Kong <code class="language-plaintext highlighter-rouge">port_maps</code> configuration.</li>
      <li>OpenID Connect Library
        <ul>
          <li>Fixed a small typo in error message.</li>
          <li>Removed azp claims verification on other tokens than the ID token.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/rate-limiting-advanced/">Rate Limiting Advanced</a> (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
    <ul>
      <li>Fixed per service rate limiting.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/response-transformer-advanced/">Response Transformer Advanced</a> (<code class="language-plaintext highlighter-rouge">response-transformer-advanced</code>)
    <ul>
      <li>Improved performance by not inheriting from the <code class="language-plaintext highlighter-rouge">BasePlugin</code> class.</li>
      <li>Empty arrays are correctly preserved.</li>
      <li>Prevent the plugin from throwing an error when its access handler did not get a chance to run (e.g., on short-circuited, unauthorized requests).</li>
      <li>Standardized on <code class="language-plaintext highlighter-rouge">allow</code> instead of <code class="language-plaintext highlighter-rouge">whitelist</code> to specify the parameter names that should be allowed in response JSON body.</li>
      <li>The plugin is now defensive against possible errors and nil header values.</li>
      <li>Fixed an issue where the plugin was validating the value in <code class="language-plaintext highlighter-rouge">config.replace.body</code> against the content type as defined in the Content-Type response header.</li>
    </ul>
  </li>
  <li><a href="/hub/kong-inc/request-transformer-advanced/">Request Transformer Advanced</a> (<code class="language-plaintext highlighter-rouge">request-transformer-advanced</code>)
    <ul>
      <li>Template errors are properly thrown.</li>
    </ul>
  </li>
  <li>Updated version compatibility for plugins bundled with Kong Enterprise to 2.1.x.</li>
</ul>

<h3 id="known-issues-and-workarounds">Known Issues and Workarounds</h3>

<p><strong>Note: Known issues and workarounds for Kong Enterprise includes <a href="/enterprise/changelog/#known-issues-and-workarounds">2.1.0.0 (beta)</a> known issues and workarounds.</strong></p>

<ul>
  <li>
    <p>The LDAP Authentication and LDAP Authentication Advanced plugins require a workaround to support CLI access with RBAC tokens: <a href="/enterprise/2.1.x/kong-manager/authentication/ldap/#using-service-directory-mapping-on-the-cli">Using Service Directory Mapping on the CLI</a>.</p>
  </li>
  <li>
    <p>The <a href="/hub/kong-inc/rate-limiting-advanced">Rate Limiting Advanced</a> plugin does not support the <code class="language-plaintext highlighter-rouge">cluster</code> strategy in hybrid mode. The <code class="language-plaintext highlighter-rouge">redis</code> strategy must be used instead.</p>
  </li>
  <li>
    <p>For the <a href="/hub/kong-inc/request-transformer-advanced/">Request Transformer Advanced</a> plugin, standardize on <code class="language-plaintext highlighter-rouge">allow</code> instead of <code class="language-plaintext highlighter-rouge">whitelist</code> to specify the parameter names that should be allowed in request JSON body. Previous <code class="language-plaintext highlighter-rouge">whitelist</code> nomenclature is deprecated and support will be removed in Kong 3.0.</p>
  </li>
  <li>
    <p>Breaking changes</p>

    <ul>
      <li>
        <p>When performing upgrade and migration to 2.1.x, custom entities and plugins have breaking changes. See <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/2.1.x/deployment/upgrades/custom-changes/">https://docs.konghq.com/enterprise/2.1.x/deployment/upgrades/custom-changes/</a>.</p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">run_on</code> is removed from plugins, as it has not been used for a long time but compatibility was kept in 1.x. Any plugin with <code class="language-plaintext highlighter-rouge">run_on</code> will now break because the schema no longer contains that entry. If testing custom plugins against this beta release, update the plugin’s schema.lua file and remove the <code class="language-plaintext highlighter-rouge">run_on</code> field.</p>
      </li>
      <li>
        <p>The <a href="/hub/kong-inc/correlation-id/">Correlation ID</a> (<code class="language-plaintext highlighter-rouge">correlation-id</code>) plugin has a higher priority than in CE. This is an incompatible change with CE in case <code class="language-plaintext highlighter-rouge">correlation-id</code> is configured against a Consumer.</p>
      </li>
      <li>
        <p>The ability to share an entity between Workspaces is no longer supported. The new method requires a copy of the entity to be created in the other Workspaces.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="2100-beta">2.1.0.0 (beta)</h2>
<p><strong>Release Date</strong> 2020/07/16</p>

<h3 id="features-13">Features</h3>

<h4 id="kong-gateway-3">Kong Gateway</h4>
<ul>
  <li>Inherited changes from OSS Kong in releases 2.0.x and 2.1.0.</li>
  <li>Workspaces code has been refactored for performance. The feature should work the same for most users.</li>
  <li>TLS version may be specified when using TLS to connect to a Postgres database.</li>
</ul>

<h4 id="kong-manager-7">Kong Manager</h4>
<ul>
  <li>Open ID Connect (<code class="language-plaintext highlighter-rouge">openid-connect</code>) can now be used with <a href="/enterprise/latest/kong-manager/service-directory-mapping/">Mapping Service Directory Groups to Kong Roles</a> using <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code>.</li>
  <li>Can now see the <code class="language-plaintext highlighter-rouge">created_at</code> timestamp for consumer credentials.</li>
  <li>Provide a warning when a user’s session is about to expire.</li>
  <li>Generate an RBAC token for an administrator rather than letting them set one.</li>
  <li>Plugin forms now have docs links to the <a href="/hub/">Plugins Hub</a>.</li>
</ul>

<h4 id="kong-developer-portal-4">Kong Developer Portal</h4>
<ul>
  <li>Application Registration can now be configured to use a third-party OAuth provider.</li>
</ul>

<h4 id="plugins-42">Plugins</h4>

<ul>
  <li>Open ID Connect (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Added <code class="language-plaintext highlighter-rouge">X-Authenticated-Groups</code> request header when doing authenticated groups.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.groups_required</code> and <code class="language-plaintext highlighter-rouge">config.groups_claim</code>.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.roles_required</code> and <code class="language-plaintext highlighter-rouge">config.roles_claim</code>.</li>
      <li>Added <code class="language-plaintext highlighter-rouge">DELETE :8001/openid-connect/issuers</code> endpoint (for cache clearing).</li>
      <li>Added <code class="language-plaintext highlighter-rouge">DELETE :8001/openid-connect/jwks</code> endpoint (for rotating the jwks).</li>
      <li>Added Admin API for DBless (it is a single node only).</li>
      <li>Added support for <code class="language-plaintext highlighter-rouge">x5t</code> key lookups.</li>
      <li>Added support for same <code class="language-plaintext highlighter-rouge">x5t</code> but different <code class="language-plaintext highlighter-rouge">alg</code> lookups.</li>
      <li>Changed that <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code> is considered even on successful consumer mapping so that it enables dynamic groups, while using consumer mapping. This feature is used with <a href="/enterprise/latest/kong-manager/service-directory-mapping/">Mapping Service Directory Groups to Kong Roles</a>.</li>
      <li>Changed code to be more resilient on rediscovery errors.</li>
      <li>Changed <code class="language-plaintext highlighter-rouge">config.rediscovery_lifetime</code> to default to 30 seconds instead of 300 seconds (5 minutes).</li>
      <li>Changed plugin to do rediscovery on configuration changes (while still respecting <code class="language-plaintext highlighter-rouge">config.rediscovery_lifetime</code>).</li>
    </ul>
  </li>
  <li>Response Transformer Advanced (<code class="language-plaintext highlighter-rouge">response-transformer-advanced</code>)
    <ul>
      <li>Added support to specify JSON types for configuration values. For example, by doing <code class="language-plaintext highlighter-rouge">config.add.json.json_types</code>: [“number”], the plugin will convert “-1” added JSON values into -1.</li>
      <li>Improved performance by not inheriting from the BasePlugin class.</li>
      <li>The plugin is now defensive against possible errors and nil header values.</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-36">Fixes</h3>

<h4 id="kong-manager-8">Kong Manager</h4>
<ul>
  <li>Auto-generated role <code class="language-plaintext highlighter-rouge">workspace-portal-admin</code> does not display link to Dev Portal Editor.</li>
  <li>Routes form did not expose <code class="language-plaintext highlighter-rouge">path_handling</code> attribute for adding/editing.</li>
  <li>When Kong Manager is secured with OIDC, new workspaces do not include the auto-generated roles.</li>
  <li>Able to enumerate usernames via the <code class="language-plaintext highlighter-rouge">/admins</code> endpoint.</li>
  <li>Unable to install Kong Manager outside the root directory.</li>
</ul>

<h4 id="kong-developer-portal-5">Kong Developer Portal</h4>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">/developers/:developer/applications</code> endpoint allowed applications to be created for a developer other than the one in the path.</li>
  <li>The change password endpoint for developers did not require the original password.</li>
  <li>User was not redirected to Login after a session timeout.</li>
  <li>Unable to configure <code class="language-plaintext highlighter-rouge">Accept Http If Already Terminated</code> for Application Registration plugin. Instead, add both Application Registration and OAuth 2.0 Authentication, and set the config on the Oauth2 Authentication plugin.</li>
</ul>

<h4 id="plugins-43">Plugins</h4>

<ul>
  <li>Response Transformer Advanced (<code class="language-plaintext highlighter-rouge">response-transformer-advanced</code>)
    <ul>
      <li>Improved performance by not inheriting from the <code class="language-plaintext highlighter-rouge">BasePlugin</code> class.</li>
      <li>Empty arrays are correctly preserved.</li>
      <li>Prevent the plugin from throwing an error when its access handler did not get a chance to run (e.g., on short-circuited, unauthorized requests).</li>
      <li>Standardized on <code class="language-plaintext highlighter-rouge">allow</code> instead of <code class="language-plaintext highlighter-rouge">whitelist</code> to specify the parameter names that should be allowed in response JSON body.</li>
      <li>The plugin is now defensive against possible errors and nil header values.</li>
      <li>Fixed an issue where the plugin was validating the value in <code class="language-plaintext highlighter-rouge">config.replace.body</code> against the content type as defined in the Content-Type response header.</li>
    </ul>
  </li>
  <li>Request Transformer Advanced (<code class="language-plaintext highlighter-rouge">request-transformer-advanced</code>)
    <ul>
      <li>Template errors are properly thrown.</li>
    </ul>
  </li>
  <li>Open ID Connect (<code class="language-plaintext highlighter-rouge">openid-connect</code>)
    <ul>
      <li>Fixed DB-less to reload private key JWTS on each request.</li>
    </ul>
  </li>
  <li>Rate Limiting Advanced (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
    <ul>
      <li>Fixed per service rate limiting.</li>
    </ul>
  </li>
  <li>LDAP Authentication Advanced (<code class="language-plaintext highlighter-rouge">ldap-auth-advanced</code>)
    <ul>
      <li>Return a 500 when there’s an error.</li>
      <li>Respond with a 401 instead of 403.</li>
      <li>Case-sensitive groups.</li>
    </ul>
  </li>
  <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>, for Brain and Immunity)
    <ul>
      <li>Fixed a bug that would make the plugin try to parse request/response body regardless of the content-type.</li>
    </ul>
  </li>
  <li>GraphQL Rate Limiting Advanced (<code class="language-plaintext highlighter-rouge">gql-rate-limiting-advanced</code>)
    <ul>
      <li>Fixed configuration using transformation that breaks in hybrid mode.</li>
    </ul>
  </li>
  <li>Updated for 2.1.0.0 compatibility
    <ul>
      <li>Proxy Cache Advanced (<code class="language-plaintext highlighter-rouge">proxy-cache-advanced</code>)</li>
      <li>Canary (<code class="language-plaintext highlighter-rouge">canary</code>)</li>
      <li>Rate Limiting Advanced (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)</li>
      <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>)</li>
      <li>Vault Authentication (<code class="language-plaintext highlighter-rouge">vault-auth</code>)</li>
      <li>Mutual TLS Authentication (<code class="language-plaintext highlighter-rouge">mtls-auth</code>)</li>
      <li>Route Transformer Advanced(<code class="language-plaintext highlighter-rouge">route-transformer-advanced</code>)</li>
      <li>GraphQL Proxy Caching Advanced (<code class="language-plaintext highlighter-rouge">gql-proxy-cache-advanced</code>)</li>
      <li>GraphQL Rate Limiting Advanced (<code class="language-plaintext highlighter-rouge">gql-rate-limiting-advanced</code>)</li>
    </ul>
  </li>
</ul>

<h3 id="known-issues-and-workarounds-1">Known Issues and Workarounds</h3>

<ul>
  <li>
    <p>Key Authentication (<code class="language-plaintext highlighter-rouge">key-auth-enc</code>) does not function in hybrid deployment mode.</p>
  </li>
  <li>
    <p>Breaking changes</p>
    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">run_on</code> is removed from plugins, as it has not been used for a long time but compatibility was kept in 1.x. Any plugin with <code class="language-plaintext highlighter-rouge">run_on</code> will now break because the schema no longer contains that entry. If testing custom plugins against this beta release, update the plugin’s schema.lua file and remove the <code class="language-plaintext highlighter-rouge">run_on</code> field.</p>
      </li>
      <li>
        <p>The Correlation ID (<code class="language-plaintext highlighter-rouge">correlation-id</code>) plugin has a higher priority than in CE. This is an incompatible change with CE in case <code class="language-plaintext highlighter-rouge">correlation-id</code> is configured against a Consumer.</p>
      </li>
      <li>
        <p>The ability to share an entity between Workspaces is no longer supported. The new method requires a copy of the entity to be created in the other Workspaces.</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="15011">1.5.0.11</h2>
<p><strong>Release Date</strong> 2021/04/22</p>

<p>This release includes internal updates that do not affect product functionality.</p>

<h3 id="fixes-37">Fixes</h3>

<h4 id="enterprise-33">Enterprise</h4>
<ul>
  <li>In Kong Manager, users could recieve an emtpy set of roles from an API response, even when valid RBAC
roles existed in the databse because of a filtering issue with portal and default roles on a paginated set.
With this fix, if valid RBAC roles exist in the database an API request returns with those valid roles.</li>
</ul>

<h2 id="15010">1.5.0.10</h2>
<p><strong>Release Date</strong> 2021/03/26</p>

<h3 id="fixes-38">Fixes</h3>

<h4 id="core-27">Core</h4>
<ul>
  <li>Fixed an issue where certain incoming URI may make it possible to bypass security rules applied
on Route objects. This fix make such attacks more difficult by always normalizing the incoming
request’s URI before matching against the Router.</li>
  <li>Sanitize path postfix for additional security.</li>
</ul>

<h4 id="enterprise-34">Enterprise</h4>
<ul>
  <li>Added pgp signature to Bintray-rpm package of <code class="language-plaintext highlighter-rouge">kong-enterprise</code>, version 1.5.0.9.</li>
  <li>Added the following updates with backport of bypass security vulnerability:
    <ul>
      <li>Support for read transformations</li>
      <li>Support for <code class="language-plaintext highlighter-rouge">X-Forwarded-Prefix</code></li>
      <li><code class="language-plaintext highlighter-rouge">X-Forwarded-Path</code> header</li>
    </ul>
  </li>
</ul>

<h4 id="developer-portal-4">Developer Portal</h4>
<ul>
  <li>Before, when enabling application registration with key authentication, developers who created
applications were able to see all Services for which the application registration plugin was enabled,
regardless of the permissions granted to their role. With this fix, developers who create applications
will only see Services if the role they are assigned to has been granted permissions to the relevant
specs.</li>
</ul>

<h2 id="1509">1.5.0.9</h2>
<p><strong>Release Date</strong> 2020/12/31</p>

<h3 id="fixes-39">Fixes</h3>

<h4 id="core-28">Core</h4>
<ul>
  <li>OpenSSL version bumped to 1.1.1i.
  The OpenSSL version bump is related to CVE-2020-1971. We have performed an extensive review of OpenSSL usage in Kong and have found the following:</li>
  <li>The core product is not vulnerable to the high severity CVE-2020-1971.</li>
  <li>The <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugin had a potential exploit associated with with CVE-2020-1971, but it would require an attacker to control a trusted CA or have admin port access, which <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/secure-admin-api/">we recommend you block from attackers</a> for numerous reasons. The updated OpenSSL version in this release additionally protects the <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugin.</li>
  <li>As a precautionary measure, we have bumped the OpenSSL dependency version to OpenSSL 1.1.1i.</li>
</ul>

<h4 id="kong-enterprise-3">Kong Enterprise</h4>
<ul>
  <li>RCE (Remote Code Execution) Plugin Mitigations:
Several Kong plugins allow arbitrary code execution by design, including the <code class="language-plaintext highlighter-rouge">serverless</code> plugin (also known as <code class="language-plaintext highlighter-rouge">pre-function</code> and <code class="language-plaintext highlighter-rouge">post-function</code> capabilities) and the <code class="language-plaintext highlighter-rouge">exit-transformer</code> plugin (for example, allows an administrator to configure a Lua-based response transformation). Changes include:
    <ul>
      <li>A new change in this release locks down these plugins so that they have limited functions available in a sandbox, providing significant additional security for a user with an exposed admin port.</li>
      <li>Functions such as “require” are no longer available to scripts that run in these plugins for security purposes, because allowing “require” allows embedded additional arbitrary code execution.</li>
      <li><strong>Important</strong>: This change causes a <strong>breaking change</strong> in this patch release and it cannot be avoided. Our recommendation is that <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/secure-admin-api/">users lock down their admin ports</a> to avoid attackers trying to exploit any API gateway, like Kong, to gain access to internal networks. If you need the previous release behavior, including the ability to arbitrarily “require” libraries or if you want to lock things down further, we have introduced three new settings you can use:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA = off | sandbox | on</code> Sets whether any custom Lua code can be used outside of Kong’s distributed code. Defaults to “sandbox”.</li>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA_SANDBOX_REQUIRES = foo,bar</code> Which libraries, if any, you want to require in the sandbox. Defaults to an empty list.</li>
          <li><code class="language-plaintext highlighter-rouge">KONG_UNTRUSTED_LUA_SANDBOX_ENVIRONMENT = kong.request</code> Any additional objects you want to pass through to the sandbox environments.  Defaults to an empty list.</li>
        </ul>

        <p>For detailed information about these new properties, see the <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/2.3.x/property-reference/#untrusted_lua">property reference documentation</a>.</p>
      </li>
    </ul>
  </li>
</ul>

<h4 id="breaking-changes-2">Breaking Changes</h4>
<ul>
  <li>See <em>RCE (Remote Code Execution) Plugin Mitigations</em> in the Kong Enterprise section.</li>
</ul>

<h2 id="1508">1.5.0.8</h2>
<p><strong>Release Date</strong> 2020/11/17</p>

<h3 id="fixes-40">Fixes</h3>

<h4 id="openid-connect-library-2"><strong>OpenID Connect Library</strong></h4>
<ul>
  <li>Changed to disable HS-signature verification by default.</li>
  <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
  <li>Fixes vulnerability in the OpenID Connect and JWT Signer Plugins. Login to the <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/">Kong Enterprise Support Portal</a> for <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-OIDC-Plugin">OIDC advisory</a> and <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-JWT-Signer-Plugin">JWT advisory</a> details.</li>
</ul>

<h2 id="1507">1.5.0.7</h2>
<p><strong>Release Date</strong> 2020/11/11</p>

<h3 id="fixes-41">Fixes</h3>

<h4 id="kong-gateway-4">Kong Gateway</h4>

<ul>
  <li>Fixed PUT request issue causing unique violation error for workspaces.</li>
  <li>Improved cache warmup performance for reduced database calls.</li>
  <li>Added migration to create TTL indices.</li>
</ul>

<h4 id="kong-manager-9">Kong Manager</h4>

<ul>
  <li>Fixed broken link to docs and updated text on Dev Portals page.</li>
</ul>

<h4 id="developer-portal-5">Developer Portal</h4>

<ul>
  <li>Fixed issue to allow users to delete developers.</li>
</ul>

<h4 id="dependencies-11">Dependencies</h4>

<ul>
  <li>Updated lua-resty-openssl version to 0.6.8.</li>
</ul>

<h4 id="plugins-44">Plugins</h4>

<ul>
  <li>Added ability to preserve empty arrays correctly.</li>
</ul>

<h2 id="1506">1.5.0.6</h2>
<p><strong>Release Date</strong> 2020/10/01</p>

<h3 id="features-14">Features</h3>

<h4 id="kong-gateway-5">Kong Gateway</h4>

<ul>
  <li>Allow PostgreSQL keepalive time to be configurable.</li>
</ul>

<h4 id="kong-manager-10">Kong Manager</h4>

<ul>
  <li>Added path to service on display page.</li>
</ul>

<h4 id="plugins-45">Plugins</h4>

<ul>
  <li>Rate Limiting Advanced (<code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code>)
    <ul>
      <li>Added RateLimit headers for draft Request for Comments (RFC).</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-42">Fixes</h3>

<h4 id="kong-gateway-6">Kong Gateway</h4>

<ul>
  <li>Fixed propagation of posted health check across Nginx workers.</li>
</ul>

<h4 id="plugins-46">Plugins</h4>

<ul>
  <li>Collector (<code class="language-plaintext highlighter-rouge">collector</code>, for Brain and Immunity)
    <ul>
      <li>Fixed bug caused when trying to call <code class="language-plaintext highlighter-rouge">select_all</code>.</li>
      <li>Fixed bug caused when trying to read a request body when parsing was unknown.</li>
      <li>Fixed bug caused when using the <code class="language-plaintext highlighter-rouge">basic_serializer</code> in the access stage.</li>
    </ul>
  </li>
  <li>Request Validator (<code class="language-plaintext highlighter-rouge">request-validator</code>)
    <ul>
      <li>Upgraded <code class="language-plaintext highlighter-rouge">lua-resty-ljsonschema</code> library to v1.1.0.</li>
    </ul>
  </li>
</ul>

<h2 id="1505">1.5.0.5</h2>
<p><strong>Release Date</strong> 2020/08/13</p>

<h3 id="fixes-43">Fixes</h3>

<h4 id="kong-gateway-7">Kong Gateway</h4>
<ul>
  <li>Optimized Admin API requests when a large number of entities are in the system and RBAC is enabled.</li>
  <li>Improved Kong handling of the encoding of sparce arrays</li>
</ul>

<h4 id="kong-manager-11">Kong Manager</h4>
<ul>
  <li>Fixed the creation of default roles and permissions when a new Workspace is created.</li>
</ul>

<h4 id="developer-portal-6">Developer Portal</h4>
<ul>
  <li>Fixed the creation of pages, partials, and specs in the legacy Developer Portal.</li>
  <li>Fixed Catalog updates in the Developer Portal when a spec is deleted.</li>
  <li>Fixed an issue when updating a spec in the legacy Developer Portal.</li>
</ul>

<h4 id="plugins-47">Plugins</h4>
<ul>
  <li>Request Validator
    <ul>
      <li>Requires a top-level <code class="language-plaintext highlighter-rouge">type</code> parameter for jsonschema</li>
      <li>Bumped version to 1.0.0</li>
    </ul>
  </li>
</ul>

<h2 id="1504">1.5.0.4</h2>
<p><strong>Release Date</strong> 2020/06/26</p>

<h3 id="fixes-44">Fixes</h3>

<h4 id="kong-gateway-8">Kong Gateway</h4>
<ul>
  <li>Upgraded Postgres driver to support selecting the TLS version when connecting to Postgres.</li>
  <li>Fixed issue causing incorrect <code class="language-plaintext highlighter-rouge">service_count</code> for license report endpoint.</li>
</ul>

<h4 id="kong-manager-12">Kong Manager</h4>
<ul>
  <li>Exposed Routes <code class="language-plaintext highlighter-rouge">path_handling</code> attribute from the Admin API in Kong Manager.</li>
</ul>

<h4 id="plugins-48">Plugins</h4>
<ul>
  <li>OpenID Connect
    <ul>
      <li>Fixed Consumers to call the correct function when setting an anonymous Consumer (introduced with 1.5.0).</li>
      <li>Fixed unauthorized responses giving 403 instead of 401 as a status code (introduced with 1.5.0).</li>
    </ul>
  </li>
  <li>Collector
    <ul>
      <li>Fixed issue that occurred when Kong returned a 404 and caused logs to fill with messages.</li>
    </ul>
  </li>
</ul>

<h2 id="1503">1.5.0.3</h2>
<p><strong>Release Date</strong> 2020/05/28</p>

<h3 id="fixes-45">Fixes</h3>

<h4 id="kong-gateway-9">Kong Gateway</h4>
<ul>
  <li>Fixed window counters issue caused when multiple sets of Redis cluster addresses are configured across multiple rate-limiting-advanced plugins</li>
  <li>Fixed an issue where authentication plugins could not load legacy and empty <code class="language-plaintext highlighter-rouge">config.anonymous</code> strings from the database</li>
  <li>Reduced the log level of one line in the Balancer code from <code class="language-plaintext highlighter-rouge">ERROR</code> to <code class="language-plaintext highlighter-rouge">WARN</code></li>
</ul>

<h4 id="kong-manager-13">Kong Manager</h4>
<ul>
  <li>Included a reference to Kong’s EULA in Kong Manager</li>
</ul>

<h4 id="plugins-49">Plugins</h4>
<ul>
  <li>Forward Proxy Advanced
    <ul>
      <li>Fixed a runtime error caused by moving Vitals to the log phase</li>
    </ul>
  </li>
  <li>Mutual TLS Authentication
    <ul>
      <li>Fixed issue to correctly skip verification when mode is <code class="language-plaintext highlighter-rouge">IGNORE_CA_ERROR</code></li>
    </ul>
  </li>
  <li>OpenID Connect
    <ul>
      <li>Added support for Redis Clusters for session storage</li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_connect_timeout</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_read_timeout</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_send_timeout</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_ssl</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_ssl_verify</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_server_name</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_cluster_nodes</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.session_redis_cluster_maxredirections</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.preserve_query_args</code></li>
      <li>Added <code class="language-plaintext highlighter-rouge">config.introspection_headers_client</code></li>
      <li>Chore cookie removal function to be more robust</li>
      <li>Changed <code class="language-plaintext highlighter-rouge">config.verify_parameters</code> default parameter from <code class="language-plaintext highlighter-rouge">true</code> to <code class="language-plaintext highlighter-rouge">false</code></li>
      <li>Bumped <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 3.5</li>
      <li>Changed in issuer normalization that also removes standard OAuth 2.0 Authorization Server Metadata suffix from issuer</li>
      <li>Refactored code base for easier maintenance</li>
      <li>openid-connect library
        <ul>
          <li>Added support for same kid but different <code class="language-plaintext highlighter-rouge">alg</code> lookups</li>
          <li>Added support for OAuth 2.0 Authorization Server Metadata (rfc8414)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Request Validator
    <ul>
      <li>Fixed support for numeric keys</li>
    </ul>
  </li>
  <li>Auth plugins
    <ul>
      <li>Fixed support for setting <code class="language-plaintext highlighter-rouge">anonymous=""</code></li>
    </ul>
  </li>
</ul>

<h2 id="1502">1.5.0.2</h2>
<p><strong>Release Date</strong> 2020/04/28</p>

<h3 id="fixes-46">Fixes</h3>

<h4 id="kong-gateway-community">Kong Gateway Community</h4>
<ul>
  <li>Fixed an issue where the frequent Target CRUD could result in a broken load balancer</li>
</ul>

<h4 id="kong-manager-14">Kong Manager</h4>
<ul>
  <li>Fixed the sorting order of Routes.</li>
  <li>Fixed an issue where editing a Developer meta field could cause the custom field name to revert to the default value</li>
  <li>Fixed an issue where listing Developers and Files only showed the first page of results</li>
</ul>

<h2 id="1501">1.5.0.1</h2>
<p><strong>Release Date:</strong> 2020/04/16</p>

<h3 id="fixes-47">Fixes</h3>

<h4 id="plugins-50">Plugins</h4>
<ul>
  <li>Kong OpenID Connect Library
    <ul>
      <li>Changes  <code class="language-plaintext highlighter-rouge">client_secret_jwk </code> and  <code class="language-plaintext highlighter-rouge">private_key_jwt </code> to not pass the rfc7521 optional  <code class="language-plaintext highlighter-rouge">client_id </code> as it was causing a problem with Okta</li>
    </ul>
  </li>
  <li>OpenID Connect
    <ul>
      <li>Fixes <code class="language-plaintext highlighter-rouge">openid_connect/jwks</code> to not use <code class="language-plaintext highlighter-rouge">err_t</code> with JWKS custom DAO that is not returning the <code class="language-plaintext highlighter-rouge">err_t</code></li>
      <li>Fixes JWKS custom DAO to not return cache hit level as a third return value on errors. Previously, it was sometimes inaccurately treated as <code class="language-plaintext highlighter-rouge">err_t</code></li>
      <li>Adds a teardown migration to create the <code class="language-plaintext highlighter-rouge">oic_jwks</code> row, so that it is not needed to create on init_worker</li>
    </ul>
  </li>
  <li>Request Transformer Advanced
    <ul>
      <li>Fixes bug when adding a header with the same name as a removed one</li>
      <li>Improves performance by not inheriting from the BasePlugin class</li>
      <li>Converts the plugin away from deprecated functions</li>
    </ul>
  </li>
</ul>

<h2 id="1500">1.5.0.0</h2>
<p><strong>Release Date:</strong> 2020/04/09</p>

<h3 id="features-15">Features</h3>

<h4 id="kong-gateway-community-1">Kong Gateway Community</h4>

<ul>
  <li>Includes open-source features contained in Kong Gateway Community 1.4 and 1.5 releases, with the exception that Kong Enterprise does not support running on ARM processors at this time</li>
</ul>

<h4 id="kong-manager-15">Kong Manager</h4>
<ul>
  <li>Redesigned Service and Route pages to support Immunity Alerts</li>
  <li>Services, Routes, Consumers, and other entity lists are sortable</li>
  <li>Services, Routes, Consumers, and other entities can be viewed and exported as JSON</li>
  <li>Consumer Alerts added to the Immunity Alerts page</li>
  <li>Approve, reject, and revoke Portal Application Service Contracts</li>
  <li>Associate Portal Specs with Services through Documents</li>
</ul>

<h4 id="kong-developer-portal-6">Kong Developer Portal</h4>
<ul>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/latest/introduction/key-concepts/#beta"><strong>BETA</strong></a>: Developers can create Applications to consume Services using the Portal Application Registration plugin</li>
</ul>

<h4 id="plugins-51">Plugins</h4>
<ul>
  <li>Kong OpenID Connect Library
    <ul>
      <li>Add support for <code class="language-plaintext highlighter-rouge">client_secret_jwt</code> and <code class="language-plaintext highlighter-rouge">private_key_jwt</code></li>
    </ul>
  </li>
  <li>OpenID Connect
    <ul>
      <li>Add support for dynamic login redirect uri</li>
      <li>Add support for <code class="language-plaintext highlighter-rouge">config.session_strategy</code> configuration parameter</li>
      <li>Add support for <code class="language-plaintext highlighter-rouge">session_cookie_idletime</code> configuration parameter</li>
      <li>Make consumer cache keys generated similarly as in JWT Signer plugin</li>
      <li>Add support for <code class="language-plaintext highlighter-rouge">client_secret_jwt</code> and <code class="language-plaintext highlighter-rouge">private_key_jwt</code> authentication</li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.client_auth</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.client_alg</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.client_jwk</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.introspection_endpoint_auth_method</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.revocation_endpoint_auth_method</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.display_errors</code></li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.token_endpoint_auth_method</code> to include <code class="language-plaintext highlighter-rouge">client_secret_jwt</code> and <code class="language-plaintext highlighter-rouge">private_key_jwt</code></li>
      <li>Add support for <code class="language-plaintext highlighter-rouge">cookie</code> for <code class="language-plaintext highlighter-rouge">config.bearer_token_param_type</code></li>
      <li>Add support for <code class="language-plaintext highlighter-rouge">config.bearer_token_cookie_name</code></li>
    </ul>
  </li>
  <li>JWT Signer
    <ul>
      <li>Add support for more signing algorithms: HS256, HS384, HS512, RS512, ES256, ES384, ES512, PS256, PS384, PS512, EdDSA</li>
    </ul>
  </li>
  <li>IP Restriction
    <ul>
      <li>Supports IPv6 addresses</li>
    </ul>
  </li>
  <li>MTLS Auth
    <ul>
      <li>Support for OCSP</li>
      <li>Support for CRL</li>
    </ul>
  </li>
  <li>Collector
    <ul>
      <li>Rewritten to follow more modern plugin approaches</li>
      <li>Added functionality to power Consumer Alerts</li>
    </ul>
  </li>
  <li>Kafka Log
    <ul>
      <li>Support for API version of a produce request</li>
    </ul>
  </li>
  <li><a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/enterprise/latest/introduction/key-concepts/#beta"><strong>BETA</strong></a> Portal Application Registration
    <ul>
      <li>Allow Portal Applications to request access and consume Services</li>
    </ul>
  </li>
  <li>Serverless functions
    <ul>
      <li>Add the ability to run functions in each request phase</li>
    </ul>
  </li>
  <li>Upstream TLS
    <ul>
      <li>The Upstream TLS plugin is not available in the Kong Enterprise 1.5.x release and is not supported. This plugin was deprecated in Kong Enterprise 1.3.0.0 and is only functional with Kong Enterprise versions 0.35 and 0.36. Be sure to remove this plugin before upgrading to the 1.5.x release to avoid errors or issues with your upgrade</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-48">Fixes</h3>
<h4 id="kong-gateway-10">Kong Gateway</h4>
<ul>
  <li>Fixes a bug where entities loaded through cache warmup did not include Workspace properly</li>
  <li>Fixes a bug that could prevent a <code class="language-plaintext highlighter-rouge">ca_certificate</code> from being saved if it was more than 2713 bytes</li>
  <li>Fixes a bug where a route collision was not detected when the content type of a POST request was sent as <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code></li>
  <li>Fixes a bug where a route collision was not detected when a PATCH request was sent to the <code class="language-plaintext highlighter-rouge">/services/service_id/routes/route_id</code> endpoint</li>
  <li>Added headers and <code class="language-plaintext highlighter-rouge">snis</code> route collision detection capabilities</li>
  <li>Fixes an inconsistency where it was still possible to execute <code class="language-plaintext highlighter-rouge">db_export</code> despite it not being supported in Kong Enterprise</li>
</ul>

<h4 id="kong-manager-16">Kong Manager</h4>
<ul>
  <li>Fixes a bug that prevented updating a Service with a tag</li>
  <li>Fixes a bug in file permission on kconfig.js</li>
  <li>Fixes a bug configuring the OpenID Connect plugin</li>
  <li>Fixes a bug when resetting the password of an admin that is not in the default Workspace</li>
  <li>Fixes a bug where the Response Rate Limiting plugin could not be applied to a consumer</li>
</ul>

<h4 id="kong-developer-portal-7">Kong Developer Portal</h4>
<ul>
  <li>Improve caching of Developers when accessing proxy via Developer Credentials</li>
  <li>Fixes a bug with a redirect on logout</li>
  <li>Fixes a bug when redirecting to login from a spec in a non-default workspace</li>
  <li>Fixes a bug with account verification links in Portals using sub-domains</li>
  <li>Fixes a bug with validation of * value for <code class="language-plaintext highlighter-rouge">portal_cors_origins</code> in Workspace config</li>
  <li>Fixes various styling issues</li>
</ul>

<h4 id="plugins-52">Plugins</h4>
<ul>
  <li>Kong OpenID Connect Library
    <ul>
      <li><strong>IMPORTANT</strong> Fix standard claims verification issue where the access token was only checked for <code class="language-plaintext highlighter-rouge">iss</code> and <code class="language-plaintext highlighter-rouge">exp</code>, but not the other optional checks</li>
      <li>Change <code class="language-plaintext highlighter-rouge">string.sub</code> to <code class="language-plaintext highlighter-rouge">string.byte</code> to lessen the garbage generation</li>
      <li>Change <code class="language-plaintext highlighter-rouge">jwks</code> as there is no need to pass length argument to <code class="language-plaintext highlighter-rouge">ecc.point</code> or <code class="language-plaintext highlighter-rouge">ecc.scalar</code> functions anymore</li>
      <li>Make <code class="language-plaintext highlighter-rouge">iss</code> and <code class="language-plaintext highlighter-rouge">exp</code> claims on access token validate only when specified</li>
    </ul>
  </li>
  <li>OpenID Connect
    <ul>
      <li>Fixes cluster invalidate consumer cache</li>
      <li>Fixes pcall kong.configuration to handle command-line invocations</li>
      <li>Optimize consumer cache key invalidations</li>
      <li>Unified session handling code in a single place</li>
      <li>Make the code more robust by checking the right data types</li>
      <li>Fixes issue when bearer <code class="language-plaintext highlighter-rouge">auth_method</code> was disabled that it was not disabled if introspection was enabled</li>
      <li>Bump <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 3.1</li>
    </ul>
  </li>
  <li>JWT Signer
    <ul>
      <li>Fixes consumer invalidation so that it now happens cluster wide, reverting the change made in 1.0.2</li>
      <li>Change the plugin so that it does not inherit anymore from BasePlugin</li>
      <li>Fixes a problem with RSA signature truncation in some edge case reported by a customer</li>
      <li>Updated lua-resty-nettle version to address jwt-signer plugin issue</li>
    </ul>
  </li>
  <li>Logging plugins will strip <code class="language-plaintext highlighter-rouge">authorization</code> header</li>
  <li>CorrelationID
    <ul>
      <li>Raise the priority of the plugin so it is run first on a request</li>
    </ul>
  </li>
  <li>Request Terminator
    <ul>
      <li>Do not send a <code class="language-plaintext highlighter-rouge">Content-Length</code> header with a 204 response</li>
    </ul>
  </li>
</ul>

<h3 id="known-issue-and-workaround">Known Issue and Workaround</h3>
<ul>
  <li>Mutual TLS Authentication Plugin
    <ul>
      <li>For the parameter <code class="language-plaintext highlighter-rouge">config.revocation_check_mode</code>, the default value <code class="language-plaintext highlighter-rouge">IGNORE_CA_ERROR</code> has a known issue in version 1.5.0.0 and later. As a workaround, manually set the value to <code class="language-plaintext highlighter-rouge">SKIP</code></li>
    </ul>
  </li>
</ul>

<h2 id="1303">1.3.0.3</h2>
<p><strong>Release Date:</strong> 2020/11/19</p>

<h3 id="fixes-49">Fixes</h3>

<h4 id="openid-connect-library-3"><strong>OpenID Connect Library</strong></h4>
<ul>
  <li>Changed to disable HS-signature verification by default.</li>
  <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
  <li>Fixes vulnerability in the OpenID Connect and JWT Signer Plugins. Login to the <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/">Kong Enterprise Support Portal</a> for <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-OIDC-Plugin">OIDC advisory</a> and <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-JWT-Signer-Plugin">JWT advisory</a> details.</li>
</ul>

<h2 id="1302">1.3.0.2</h2>
<p><strong>Release Date:</strong> 2020/02/20</p>

<h3 id="features-16">Features</h3>

<h4 id="kong-gateway-11">Kong Gateway</h4>

<ul>
  <li>Adds support for Amazon Linux 2</li>
  <li>Compiles NGINX OpenTracing module with Kong (currently only available for Amazon Linux 2 and Docker Alpine)
    <ul>
      <li>Includes a Datadog tracer for Amazon Linux 2 at /usr/local/kong/lib/libdd_opentracing_plugin.so</li>
      <li>Includes a Jaeger tracer for Docker Alpine at /usr/local/kong/lib/libjaegertracing.so</li>
    </ul>
  </li>
  <li>Provides a default logrotate configuration file</li>
  <li>Adds support for <code class="language-plaintext highlighter-rouge">pg_ssl_required</code> configuration which prevents connection to non-SSL enabled Postgres server</li>
  <li>Adds support for regular expressions when using <code class="language-plaintext highlighter-rouge">audit_log_ignore_paths</code></li>
  <li>Allows the Kong Enterprise systemd service to be reloaded with systemctl reload kong-enterprise-edition</li>
</ul>

<h4 id="kong-manager-17">Kong Manager</h4>

<ul>
  <li>Kafka plugins can now be configured</li>
</ul>

<h4 id="plugins-53"><strong>Plugins</strong></h4>

<ul>
  <li>OpenID Connect
    <ul>
      <li>Fixes header encoding to use Base64 (non-URL variant) with padding</li>
      <li>Adds support for keyring encryption of <code class="language-plaintext highlighter-rouge">client_id</code> and <code class="language-plaintext highlighter-rouge">client_secret</code></li>
      <li>Adds support for None with <code class="language-plaintext highlighter-rouge">config.session_cookie_samesite</code> and <code class="language-plaintext highlighter-rouge">config.authorization_cookie_samesite</code></li>
      <li>Adds support for <code class="language-plaintext highlighter-rouge">config.session_cookie_maxsize</code></li>
      <li>Bumps <code class="language-plaintext highlighter-rouge">lua-resty-session</code> dependency to 2.26</li>
    </ul>
  </li>
  <li>Rate Limiting Advanced
    <ul>
      <li>Adds support for authentication when using Redis Sentinel node</li>
    </ul>
  </li>
  <li>Response Transformer Advanced
    <ul>
      <li>Adds support for removal of specific header values of a given header field, including with regular expression</li>
    </ul>
  </li>
  <li>Request Validator
    <ul>
      <li>Adds configuration to plugin which allows it to return validation error back to the client as part of request response</li>
    </ul>
  </li>
  <li>AWS Lambda
    <ul>
      <li>Additional AWS regions support</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-50">Fixes</h3>

<h4 id="kong-gateway-12">Kong Gateway</h4>

<ul>
  <li>Fixes a condition that could put a target of an upstream into an improper <code class="language-plaintext highlighter-rouge">DNS_ERROR</code> state</li>
  <li>Resolves a problem when using routes with custom header based routing that could lead to incorrect route matching</li>
  <li>Improves <code class="language-plaintext highlighter-rouge">LUA_CPATH</code> handling</li>
  <li>Improves behavior and log messages when rate-limiting counter shared dict is out of space</li>
  <li>Resolves possible database deadlock situation when under high load conditions</li>
  <li>Resolves possible race condition on Cassandra when under high load of Admin API CRUD operations</li>
</ul>

<h4 id="kong-developer-portal-8">Kong Developer Portal</h4>

<ul>
  <li>Fixes a bug that could lead to a stack overflow in certain conditions</li>
</ul>

<h4 id="kong-manager-18">Kong Manager</h4>

<ul>
  <li>Fixes incorrect schema violation error <code class="language-plaintext highlighter-rouge">claims_to_verify</code> when entering configuration for JWT plugin</li>
  <li>Kong and Kong Manager now start correctly from a custom prefix</li>
</ul>

<h4 id="plugins-54">Plugins</h4>

<ul>
  <li>Mutual TLS Authentication
    <ul>
      <li>Bug fixes related to configuration and ACL plugin usage</li>
    </ul>
  </li>
  <li>OpenAPI2Kong
    <ul>
      <li>Fixes a bug related to garbage collection</li>
    </ul>
  </li>
  <li>Proxy Caching Advanced
    <ul>
      <li>Fixes to allow Kong to properly cache responses when requests are passed through an additional NGINX before reaching Kong</li>
    </ul>
  </li>
</ul>

<h2 id="1301">1.3.0.1</h2>
<p><strong>Release Date:</strong> 2019/12/19</p>

<h3 id="features-17">Features</h3>

<ul>
  <li>Kong Enterprise now officially supports RHEL 8</li>
  <li>Kong Enterprise now has a License Reports module for customers to view current usage metrics. For more information, contact your Kong Account Executive.</li>
  <li>(Alpha feature) Kong Enterprise can now perform encryption-at-rest for sensitive fields within the data store (Postgres or Cassandra).</li>
</ul>

<h4 id="kong-developer-portal-9">Kong Developer Portal</h4>

<ul>
  <li>Adds ability to customize the email templates used by the Kong Developer Portal</li>
  <li>Portal-CLI
    <ul>
      <li>Adds more robust support for Windows</li>
      <li>Adds command line support for optional arguments to override the CLI configuration file</li>
    </ul>
  </li>
</ul>

<h4 id="kong-manager-19">Kong Manager</h4>

<ul>
  <li>RBAC token control: A new property <code class="language-plaintext highlighter-rouge">rbac_token_enabled</code> on an Admin allows you to control whether that Admin can use and reset their RBAC token. When it is true, the Admin can log in to Kong Manager and can use their RBAC token on the Admin API. When it is false, the Admin can only use the Admin API in conjunction with a valid session.</li>
</ul>

<h4 id="plugins-55">Plugins</h4>

<ul>
  <li>OpenAPI2Kong
    <ul>
      <li>Adds trace to errors to identify the originating YAML/JSON element that caused the error.</li>
    </ul>
  </li>
  <li>Key Authentication - Encrypted
    <ul>
      <li>Provides key authentication for Routes and Services, with authentication tokens stored in a format that is encrypted at rest.</li>
    </ul>
  </li>
</ul>

<h3 id="changes">Changes</h3>

<ul>
  <li>Removes the openapi2kong API endpoint</li>
</ul>

<h4 id="kong-manager-20">Kong Manager</h4>

<ul>
  <li>Adds icons for new Plugins</li>
  <li>Adds ability for read-only admins to view plugin configurations</li>
</ul>

<h3 id="fixes-51">Fixes</h3>

<ul>
  <li>Fixes issue where settings in the kong configuration file did not always update <code class="language-plaintext highlighter-rouge">.kong_env </code></li>
  <li>Fixes issue where updating a plugin with a similar payload as its initial configuration resulted in a schema violation</li>
  <li>Fixes issue where <code class="language-plaintext highlighter-rouge">db_import</code> would fail due to missing libraries</li>
</ul>

<h4 id="kong-developer-portal-10">Kong Developer Portal</h4>

<ul>
  <li>Fixes various spec formatting issues</li>
  <li>Fixes issue where URLs were rendering incorrectly in code snippets</li>
  <li>Fixes issue where numeric keys were incorrectly parsed in yaml spec files</li>
  <li>Fixes issue where certain Swagger paths erred when header parameters were included</li>
  <li>Fixes issue where code snippets ignored JSON</li>
  <li>Fixes issue where Admins could not create new <code class="language-plaintext highlighter-rouge">portal.conf.yaml</code> or <code class="language-plaintext highlighter-rouge">router.conf.yaml</code> files from the Editor</li>
  <li>Portal-CLI
    <ul>
      <li>Fixes issue where <code class="language-plaintext highlighter-rouge">deploy</code> did not remove files remotely that had been removed locally</li>
    </ul>
  </li>
</ul>

<h4 id="kong-manager-21">Kong Manager</h4>

<ul>
  <li>Fixes issue where breadcrumbs for Routes and Services showed the <code class="language-plaintext highlighter-rouge">uuid</code> instead of the name</li>
  <li>Fixes issue where the JWT plugin did not include <code class="language-plaintext highlighter-rouge">RS512</code> in the list of supported algorithms</li>
  <li>Fixes issue where users with no role saw a blank page on the “Dev Portals” tab</li>
  <li>Fixes issue where Service Map did not show the correct line colors indicating traffic time</li>
  <li>Fixes issue where Service Map showed incorrect placeholder text for selecting a Workspace</li>
  <li>Fixes issue where viewing an RBAC user in Workspace redirected to a blank page</li>
  <li>Fixes issue where registration links would not generate if RBAC was disabled</li>
  <li>Fixes issue where resetting a password did not enforce password complexity rules</li>
  <li>Fixes issue where LDAP Auth would not accept CamelCase in group names</li>
  <li>Fixes issue where <code class="language-plaintext highlighter-rouge">Average Error Rate</code> was incorrectly displayed on the Workspace Overview</li>
  <li>Fixes issue where schemas and validation endpoints were not scoped correctly to Workspaces, resulting in incorrectly denying users permission to certain resources. Roles that allow Create and Update on an entity must include Read permission on the schema and validation endpoints for that entity.</li>
  <li>Fixes formatting issue where Dev Portal URLs would overflow their containers on the Dev Portal Overview page</li>
</ul>

<h4 id="plugins-56">Plugins</h4>

<ul>
  <li>AWS Lambda
    <ul>
      <li>Fixes issue where Kong Enterprise did not package the AWS Lambda plugin with IAM Role support (versions less than 3.0.1). Now Kong Enterprise packages the latest version of the plugin, 3.0.1.</li>
    </ul>
  </li>
  <li>JWT
    <ul>
      <li>Fixes schema issue where colons in string values were incorrectly parsed</li>
    </ul>
  </li>
  <li>OpenAPI2Kong
    <ul>
      <li>Fixes unsupported OAuth 2.0 security flows to handle an array instead of an object</li>
      <li>Fixes issue where an array was added to empty routes, this fix will improve compatibility with decK</li>
      <li>Fixes issue that incorrectly added <code class="language-plaintext highlighter-rouge">body-validation</code></li>
    </ul>
  </li>
  <li>Request Validator
    <ul>
      <li>Fixes size limitation on the number of validation rules</li>
    </ul>
  </li>
  <li>MTLS Authentication
    <ul>
      <li>Fixes issue where disabled <code class="language-plaintext highlighter-rouge">mtls-auth</code> plugins were not correctly ignored while creating SNIs map</li>
    </ul>
  </li>
</ul>

<h2 id="13">1.3</h2>
<p><strong>Release Date:</strong> 2019/11/05</p>

<h3 id="kong-gateway-13">Kong Gateway</h3>
<ul>
  <li><strong>Kong Enterprise 1.3</strong> inherits the following changes from <strong>Kong Gateway 1.3</strong>:</li>
</ul>

<h3 id="changes-1">Changes</h3>

<h4 id="dependencies-12">Dependencies</h4>

<ul>
  <li>The required OpenResty version has been bumped to
<a rel="nofollow noopener noreferrer" href="http://openresty.org/en/changelog-1015008.html">1.15.8.1</a>. If you are
installing Kong from one of our distribution packages, you are not affected
by this change. See <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4382">#4382</a>.
With this new version comes a number of improvements:
    <ul>
      <li>The new <a rel="nofollow noopener noreferrer" href="https://nginx.org/en/docs/http/ngx_http_grpc_module.html">ngx_http_grpc_module</a>.</li>
      <li>Configurable of upstream keepalive connections by timeout or number of
requests.</li>
      <li>Support for ARM64 architectures.</li>
      <li>LuaJIT GC64 mode for x86_64 architectures, raising the LuaJIT GC-managed
memory limit from 2GB to 128TB and producing more predictable GC
performance.</li>
    </ul>
  </li>
  <li>From this version on, the new
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/lua-kong-nginx-module">lua-kong-nginx-module</a> Nginx
module is <strong>required</strong> to be built into OpenResty for Kong to function
properly. This new module allows Kong to support new features such as mutual
TLS authentication. If you are installing Kong from one of our distribution
packages, you are not affected by this change.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/openresty-build-tools/pull/26">openresty-build-tools#26</a></li>
</ul>

<p><strong>Note:</strong> if you are not using one of our distribution packages and compiling
OpenResty from source, you must still apply Kong’s <a rel="nofollow noopener noreferrer" href="https://github.com/kong/openresty-patches">OpenResty
patches</a> (and, as highlighted above,
compile OpenResty with the new lua-kong-nginx-module). Our new
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/openresty-build-tools">openresty-build-tools</a>
repository will allow you to do both easily.</p>

<h4 id="core-29">Core</h4>

<ul>
  <li>Bugfixes in the router <em>may, in some edge-cases</em>, result in
different Routes being matched. It was reported to us that the router behaved
incorrectly in some cases when configuring wildcard Hosts and regex paths
(e.g. <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/issues/3094">#3094</a>). It may be so that
you are subject to these bugs without realizing it. Please ensure that
wildcard Hosts and regex paths Routes you have configured are matching as
expected before upgrading.
See <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/commit/9ca4dc09fdb12b340531be8e0f9d1560c48664d5">9ca4dc0</a>,
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/commit/2683b86c2f7680238e3fe85da224d6f077e3425d">2683b86</a>, and
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/commit/6a03e1bd95594716167ccac840ff3e892ed66215">6a03e1b</a>
for details.</li>
  <li>Upstream connections are now only kept-alive for 100 requests or 60 seconds
(idle) by default. Previously, upstream connections were not actively closed
by Kong. This is a (non-breaking) change in behavior, inherited from Nginx
1.15, and configurable via new configuration properties (see below).</li>
</ul>

<h4 id="configuration-10">Configuration</h4>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">upstream_keepalive</code> configuration property is deprecated, and
replaced by the new <code class="language-plaintext highlighter-rouge">nginx_http_upstream_keepalive</code> property. Its behavior is
almost identical, but the notable difference is that the latter leverages the
<a rel="nofollow noopener noreferrer" href="https://konghq.com/blog/kong-ce-nginx-injected-directives/">injected Nginx
directives</a>
feature added in Kong 0.14.0.
In future releases, we will gradually increase support for injected Nginx
directives. We have high hopes that this will remove the occasional need for
custom Nginx configuration templates.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4382">#4382</a></li>
</ul>

<h3 id="additions-1">Additions</h3>

<h4 id="core-30">Core</h4>

<ul>
  <li><strong>Native gRPC proxying.</strong> Two new protocol types; <code class="language-plaintext highlighter-rouge">grpc</code> and
<code class="language-plaintext highlighter-rouge">grpcs</code> correspond to gRPC over h2c and gRPC over h2. They can be specified
on a Route or a Service’s <code class="language-plaintext highlighter-rouge">protocol</code> attribute (e.g. <code class="language-plaintext highlighter-rouge">protocol = grpcs</code>).
When an incoming HTTP/2 request matches a Route with a <code class="language-plaintext highlighter-rouge">grpc(s)</code> protocol,
the request will be handled by the
<a rel="nofollow noopener noreferrer" href="https://nginx.org/en/docs/http/ngx_http_grpc_module.html">ngx_http_grpc_module</a>,
and proxied to the upstream Service according to the gRPC protocol
specifications.  :warning: Note that not all Kong plugins are compatible with
gRPC requests yet.  <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4801">#4801</a></li>
  <li><strong>Mutual TLS</strong> handshake with upstream services. The Service
entity now has a new <code class="language-plaintext highlighter-rouge">client_certificate</code> attribute, which is a foreign key
to a Certificate entity. If specified, Kong will use the Certificate as a
client TLS cert during the upstream TLS handshake.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4800">#4800</a></li>
  <li><strong>Route by any request header</strong>. The router now has the ability
to match Routes by any request header (not only <code class="language-plaintext highlighter-rouge">Host</code>). The Route entity now
has a new <code class="language-plaintext highlighter-rouge">headers</code> attribute, which is a map of headers names and values.
E.g. <code class="language-plaintext highlighter-rouge">{ "X-Forwarded-Host": ["example.org"], "Version": ["2", "3"] }</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4758">#4758</a></li>
  <li><strong>Least-connection load-balancing</strong>. A new <code class="language-plaintext highlighter-rouge">algorithm</code> attribute
has been added to the Upstream entity. It can be set to <code class="language-plaintext highlighter-rouge">"round-robin"</code>
(default), <code class="language-plaintext highlighter-rouge">"consistent-hashing"</code>, or <code class="language-plaintext highlighter-rouge">"least-connections"</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4528">#4528</a></li>
  <li>Healthchecks now use the combination of IP + Port + Hostname when storing
upstream health information. Previously, only IP + Port were used. This means
that different virtual hosts served behind the same IP/port will be treated
differently with regards to their health status. New endpoints were added to
the Admin API to manually set a Target’s health status.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4792">#4792</a></li>
</ul>

<h4 id="configuration-11">Configuration</h4>

<ul>
  <li>A new section in the <code class="language-plaintext highlighter-rouge">kong.conf</code> file describes <a rel="nofollow noopener noreferrer" href="https://konghq.com/blog/kong-ce-nginx-injected-directives/">injected Nginx
directives</a>
(added to Kong 0.14.0) and specifies a few default ones.
In future releases, we will gradually increase support for injected Nginx
directives. We have high hopes that this will remove the occasional need for
custom Nginx configuration templates.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4382">#4382</a></li>
  <li>New configuration properties allow for controling the behavior of
upstream keepalive connections. <code class="language-plaintext highlighter-rouge">nginx_http_upstream_keepalive_requests</code> and
<code class="language-plaintext highlighter-rouge">nginx_http_upstream_keepalive_timeout</code> respectively control the maximum
number of proxied requests and idle timeout of an upstream connection.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4382">#4382</a></li>
  <li>New flags have been added to the <code class="language-plaintext highlighter-rouge">*_listen</code> properties: <code class="language-plaintext highlighter-rouge">deferred</code>, <code class="language-plaintext highlighter-rouge">bind</code>,
and <code class="language-plaintext highlighter-rouge">reuseport</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4692">#4692</a></li>
</ul>

<h4 id="admin-api-7">Admin API</h4>

<ul>
  <li>Many endpoints now support more levels of nesting for ease of access.
For example: <code class="language-plaintext highlighter-rouge">/services/:services/routes/:routes</code> is now a valid API
endpoint.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4713">#4713</a></li>
  <li>The API now accepts <code class="language-plaintext highlighter-rouge">form-urlencoded</code> payloads with deeply nested data
structures. Previously, it was only possible to send such data structures
via JSON payloads.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4768">#4768</a></li>
</ul>

<h4 id="plugins-57">Plugins</h4>

<ul>
  <li>jwt-auth: The new <code class="language-plaintext highlighter-rouge">header_names</code> property accepts an array of header names
the JWT plugin should inspect when authenticating a request. It defaults to
<code class="language-plaintext highlighter-rouge">["Authorization"]</code>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4757">#4757</a></li>
  <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-azure-functions">azure-functions</a>:
Bumped to 0.4 for minor fixes and performance improvements.</li>
  <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kubernetes-sidecar-injector">kubernetes-sidecar-injector</a>:
The plugin is now more resilient to Kubernetes schema changes. Note that it is
now deprecated, and that Kong recommends using kuma.io instead.</li>
  <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-serverless-functions">serverless-functions</a>:
    <ul>
      <li>Bumped to 0.3 for minor performance improvements.</li>
      <li>Functions can now have upvalues.</li>
    </ul>
  </li>
  <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-plugin-prometheus">prometheus</a>: Bumped to
0.4.1 for minor performance improvements.</li>
  <li>cors: add OPTIONS, TRACE and CONNECT to default allowed methods
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4899">#4899</a>
Thanks to <a rel="nofollow noopener noreferrer" href="https://github.com/eshepelyuk">@eshepelyuk</a> for the patch!</li>
  <li>upstream-tls: The Upstream TLS plugin is deprecated as of Kong Enterprise 1.3.0.0 and is only functional with Kong Enterprise versions 0.35 and 0.36. Be sure to remove this plugin before upgrading to the 1.5.x release to avoid errors or issues with your upgrade, as the plugin will no longer be supported.</li>
</ul>

<h4 id="pdk-11">PDK</h4>

<ul>
  <li>New function <code class="language-plaintext highlighter-rouge">kong.service.set_tls_cert_key()</code>. This functions sets the
client TLS certificate used while handshaking with the upstream service.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4797">#4797</a></li>
</ul>

<h3 id="fixes-52">Fixes</h3>

<h4 id="core-31">Core</h4>

<ul>
  <li>Router: Fixed a bug causing invalid matches when configuring two or more
Routes with a plain <code class="language-plaintext highlighter-rouge">hosts</code> attribute shadowing another Route’s wildcard
<code class="language-plaintext highlighter-rouge">hosts</code> attribute. Details of the issue can be seen in
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4775/commits/01b1cb871b1d84e5e93c5605665b68c2f38f5a31">01b1cb8</a>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4775">#4775</a></li>
  <li>Router: Ensure regex paths always have priority over plain paths. Details of
the issue can be seen in
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/commit/2683b86c2f7680238e3fe85da224d6f077e3425d">2683b86</a>.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4775">#4775</a></li>
  <li>Cleanup of expired rows in PostgreSQL is now much more efficient thanks to a
new query plan.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4716">#4716</a></li>
  <li>Improved various query plans against Cassandra instances by increasing the
default page size.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4770">#4770</a></li>
</ul>

<h4 id="plugins-58">Plugins</h4>

<ul>
  <li>cors: ensure non-preflight OPTIONS requests can be proxied.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4899">#4899</a>
Thanks to <a rel="nofollow noopener noreferrer" href="https://github.com/eshepelyuk">@eshepelyuk</a> for the patch!</li>
  <li>Consumer references in various plugin entities are now
properly marked as required, avoiding credentials that map to no Consumer.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4879">#4879</a></li>
  <li>hmac-auth: Correct the encoding of HTTP/1.0 requests.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4839">#4839</a></li>
  <li>oauth2: empty client_id wasn’t checked, causing a server error.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4884">#4884</a></li>
  <li>response-transformer: preserve empty arrays correctly.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4901">#4901</a></li>
</ul>

<h4 id="cli-8">CLI</h4>

<ul>
  <li>Fixed an issue when running <code class="language-plaintext highlighter-rouge">kong restart</code> and Kong was not running,
causing stdout/stderr logging to turn off.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4772">#4772</a></li>
</ul>

<h4 id="admin-api-8">Admin API</h4>

<ul>
  <li>Ensure PUT works correctly when applied to plugin configurations.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4882">#4882</a></li>
</ul>

<h4 id="pdk-12">PDK</h4>

<ul>
  <li>Prevent PDK calls from failing in custom content blocks.
This fixes a misbehavior affecting the Prometheus plugin.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4904">#4904</a></li>
  <li>Ensure <code class="language-plaintext highlighter-rouge">kong.response.add_header</code> works in the <code class="language-plaintext highlighter-rouge">rewrite</code> phase.
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/4888">#4888</a></li>
</ul>

<h3 id="enterprise-exclusives">Enterprise-Exclusives</h3>

<h4 id="changes-2">Changes</h4>

<ul>
  <li>Kong Service Mesh is transitioned and upgraded to our next-generation service mesh offering named “Kuma”. Go to kuma.io for more information about using Kuma.</li>
  <li>Phone home logging now uses a new shared dict: lua_shared_dict kong_reports_workspaces 1m;  If you use a custom nginx template, make sure it’s there if you use phl.</li>
  <li>To configure Upstream TLS, use the NGINX directives <a rel="nofollow noopener noreferrer" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ssl_trusted_certificate"><code class="language-plaintext highlighter-rouge">proxy_ssl_trusted_certificate</code></a>, <a rel="nofollow noopener noreferrer" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ssl_verify"><code class="language-plaintext highlighter-rouge">proxy_ssl_verify</code></a>, and <a rel="nofollow noopener noreferrer" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ssl_verify_depth"><code class="language-plaintext highlighter-rouge">proxy_ssl_verify_depth</code></a> instead of the Upstream TLS plugin. The plugin is only functional for versions 0.35 and 0.36.</li>
</ul>

<h3 id="features-18">Features</h3>

<ul>
  <li>(Alpha feature) Kong Enterprise now has a License Reports module for customers to view current usage metrics. For more information, contact your Kong Account Executive.</li>
</ul>

<h4 id="kong-enterprise-gateway">Kong Enterprise Gateway</h4>

<ul>
  <li>
    <p>gRPC support</p>
  </li>
  <li>
    <p>Upstream mTLS support (API-only)</p>
  </li>
  <li>
    <p>DB-export (API-only)</p>
  </li>
  <li>
    <p>Routing by header</p>
  </li>
  <li>
    <p>Cassandra - refresh cluster topology</p>
  </li>
  <li>
    <p>RPM packages are now signed with our own GPG keys. You can download our public key at https://bintray.com/user/downloadSubjectPublicKey?username=kong</p>
  </li>
  <li>
    <p>Route validation strategy now configurable and can enforce a route pattern by configuration</p>
  </li>
  <li>
    <p>OpenID Connect Library:</p>
    <ul>
      <li>Add support for ES256 signing and key generation</li>
      <li>Add support for ES384 signing and key generation</li>
      <li>Add support for ES512 signing and key generation</li>
      <li>Add support for PS256 signing and key generation</li>
      <li>Add support for PS384 signing and key generation</li>
      <li>Add support for PS512 signing and key generation</li>
      <li>Add support for EdDSA signing, key generation and verification</li>
      <li>Update <code class="language-plaintext highlighter-rouge">lua-resty-nettle</code> dependency to 1.0</li>
    </ul>
  </li>
</ul>

<h4 id="docker">Docker</h4>

<ul>
  <li>Improved security by allowing the CentOS and Alpine images to run as the <code class="language-plaintext highlighter-rouge">kong</code> user.</li>
</ul>

<h4 id="kong-manager-22">Kong Manager</h4>

<ul>
  <li>
    <p>RBAC User Management (manage Admin API access within Kong Manager)</p>
  </li>
  <li>
    <p>Service Directory Group to Kong Role Mapping (map AD groups or other service directory systems to roles &amp; permission sets within Kong)</p>
  </li>
  <li>
    <p>Service Map</p>

    <ul>
      <li>View requests flowing through Kong</li>
      <li>View Immunity notifications within Service Map, click to alert section</li>
    </ul>
  </li>
  <li>
    <p>Immunity alert management &amp; detail section</p>

    <ul>
      <li>Filterable by entity, severity</li>
      <li>Links through to alerted entities</li>
    </ul>
  </li>
  <li>Admin Password Strength Configuration
    <ul>
      <li>Configure and enforce strong Admin passwords</li>
    </ul>
  </li>
  <li>Admin Login Attempts
    <ul>
      <li>Configure allowed login attempts to the Kong Manager</li>
    </ul>
  </li>
</ul>

<h4 id="dev-portal">Dev Portal</h4>

<ul>
  <li>
    <p>Easy theming within Kong Manager</p>

    <ul>
      <li>Easily set your color scheme, logo/branding, and go</li>
    </ul>
  </li>
  <li>
    <p>Developer Permissions</p>

    <ul>
      <li>Decide what specs or content different sets of developers can access.</li>
    </ul>
  </li>
  <li>
    <p>Separation of templates and user content</p>

    <ul>
      <li>Enable content editors to make changes with no coding required</li>
      <li>Easier future release/upgrades path</li>
    </ul>
  </li>
  <li>
    <p>Flat file system</p>

    <ul>
      <li>Full access to JS/assets, customers can load a single page app, or serverside rendered portal we offer out of the box</li>
    </ul>
  </li>
  <li>
    <p>Full serverside rendering</p>

    <ul>
      <li>
        <p>No need to hit the API via ajax for additional information in relationship to Kong, templating data object allows access to Kong data directly at load</p>
      </li>
      <li>
        <p>Enables more extensive caching of pages/assets</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Declarative configuration out of the box</p>

    <ul>
      <li>
        <p>Allows for more UI integrations</p>
      </li>
      <li>
        <p>Conf files allow for source controlled configuration of your dev portal, including</p>

        <ul>
          <li>
            <p>Routing</p>
          </li>
          <li>
            <p>Auth config</p>
          </li>
          <li>
            <p>Permissions</p>
          </li>
          <li>
            <p>Theming (colors, logos, meta info)</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Developer Password Strength Configuration
    <ul>
      <li>Configure and enforce strong Developer passwords</li>
    </ul>
  </li>
  <li>Developer Login Attempts
    <ul>
      <li>Configure allowed login attempts to the Developer Portal</li>
    </ul>
  </li>
</ul>

<h4 id="plugins-59">Plugins</h4>

<ul>
  <li>
    <p>gRPC support, API &amp; Kong Manager</p>
  </li>
  <li>
    <p>Upstream mTLS support</p>
  </li>
  <li>
    <p>DB export, API-only</p>
  </li>
  <li>
    <p>Routing by header</p>
  </li>
  <li>Request Size Limiting - enhanced units on size limit</li>
  <li>Request Transformer Advanced - Support for filtering JSON body with new configration <code class="language-plaintext highlighter-rouge">config.whitelist.body</code></li>
  <li>Response Transformer Advanced:
    <ul>
      <li>Support for filtering JSON body with new configration config.whitelist.body, Support arbitrary transformations via Lua functions</li>
      <li>Fixes a bug where the plugin was returning an empty body in the response for status codes outside of those specified in <code class="language-plaintext highlighter-rouge">config.replace.if_status</code>. For example, if we specified a <code class="language-plaintext highlighter-rouge">config.replace.if_status=404</code> and a body <code class="language-plaintext highlighter-rouge">config.replace.body=test</code> and the status code was 200, the response would be empty.</li>
    </ul>
  </li>
  <li>Route Transformer Advanced - New</li>
  <li>GraphQL Proxy Cache Advanced - New</li>
  <li>GraphQL Rate Limiting Advanced - New</li>
  <li>Degraphql - New</li>
  <li>Exit Transformer - New</li>
  <li>Kafka Log - New</li>
  <li>Kafka Upstream - New</li>
  <li>mTLS Auth:
    <ul>
      <li>Update cert request logic ask client cert when:
        <ul>
          <li>To every route irrespective of workspace when plugin enabled in global scope</li>
          <li>To every route irrespective of workspace when plugin applied at service level but not all its routes have SNIs set</li>
          <li>To every route irrespective of workspace when plugin applied at route level but SNIs not set on route</li>
          <li>To specific route only when plugin applied at route level and it has SNIs set</li>
        </ul>
      </li>
      <li>skip_consumer_lookup config to skip consumer lookup if request has trusted client certificate.</li>
      <li>authenticated_group_by config to block/allow validated certificate using ACL plugi</li>
    </ul>
  </li>
  <li>Key-Auth keys now support a ttl property and can expire</li>
  <li>AWS Lambda plugin supports IAM roles</li>
  <li>Session plugin can now store authenticated groups from other authentication plugins. </li>
</ul>

<h4 id="cli-9">CLI</h4>
<ul>
  <li>Adds runner</li>
</ul>

<h3 id="fixes-53">Fixes</h3>

<h4 id="plugins-60">Plugins</h4>

<h5 id="openid-connect">OpenID Connect</h5>

<ul>
  <li>Fixes issue when discovery did not return issuer information (against OpenID Connect specification), and which could lead to 500 error on 401 and 403 responses.</li>
</ul>

<h5 id="ldap-auth-advanced">LDAP Auth Advanced</h5>

<ul>
  <li>LDAP Auth Advanced - fixed issue where plugin tries to start a secure connection on an existing pooled connection from previous requests</li>
</ul>

<h5 id="request-transformer-advanced">Request Transformer Advanced</h5>

<ul>
  <li>Fixes a bug where the plugin was returning an empty body in the response for status codes outside of those specified in <code class="language-plaintext highlighter-rouge">config.replace.if_status</code>. For example, if we specified a <code class="language-plaintext highlighter-rouge">config.replace.if_status=404</code> and a body <code class="language-plaintext highlighter-rouge">config.replace.body=test</code> and the status code was 200, the response would be empty.</li>
</ul>

<h4 id="kong-enterprise-gateway-1">Kong Enterprise Gateway</h4>

<ul>
  <li>Fixes: audit log entries did not include timestamps indicating when the event occurred.</li>
  <li>Fixes: allow put requests to nonexistent foreign entities.</li>
  <li>Fixes: granular tracing did not work when certain plugins (for example, the key-auth) were used.</li>
</ul>

<h4 id="docker-1">Docker</h4>

<ul>
  <li>Fixes: centos and alpine images did not work on some OpenShift setups with relaxed anyuid SCC settings.</li>
</ul>

<h2 id="036-7">0.36-7</h2>
<p><strong>Release Date</strong> 2020/11/20</p>

<h3 id="fixes-54">Fixes</h3>

<h4 id="openid-connect-library-4"><strong>OpenID Connect Library</strong></h4>
<ul>
  <li>Changed to disable HS-signature verification by default.</li>
  <li>Changed to use <code class="language-plaintext highlighter-rouge">client_secret</code> as a fallback secret for HS-signature verification only when it is a string and has more than one character in it.</li>
  <li>Fixes vulnerability in the OpenID Connect and JWT Signer Plugins. Login to the <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/">Kong Enterprise Support Portal</a> for <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-OIDC-Plugin">OIDC advisory</a> and <a rel="nofollow noopener noreferrer" href="https://support.konghq.com/support/s/article/Kong-Security-Advisory-JWT-Signer-Plugin">JWT advisory</a> details.</li>
</ul>

<h2 id="036-6">0.36-6</h2>

<p><strong>Release Date:</strong> 2020-06-18</p>

<h3 id="fixes-55">Fixes</h3>
<ul>
  <li>Fixes Kong PDK <code class="language-plaintext highlighter-rouge">get_method()</code> function to return a correct HTTP method when there are connectivity issues with the Upstream.</li>
  <li>Reverted Service Mesh changes which affect <code class="language-plaintext highlighter-rouge">proxy_ssl_*</code> directives.</li>
</ul>

<h2 id="036-5">0.36-5</h2>

<p><strong>Release Date:</strong> 2020-04-02</p>

<h3 id="fixes-56">Fixes</h3>
<ul>
  <li>Fixes an issue with jwt-signer plugin that requires only lua-resty-nettle update.</li>
</ul>

<h2 id="036-4">0.36-4</h2>

<p><strong>Release Date:</strong> 2019/12/12</p>

<h3 id="fixes-57">Fixes</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">migrate-community-to-enterprise</code> script changed from batch query execution to multiple single queries
for Cassandra strategy.</li>
  <li>Fixes Workspace counters calculation logic when you run <code class="language-plaintext highlighter-rouge">migrate-community-to-enterprise</code> script.</li>
  <li>Fixes DAO fetching functionality to fetch all requested records from the database instead of first <code class="language-plaintext highlighter-rouge">1000</code>
records that was before.</li>
  <li>Updated Nettle version from <code class="language-plaintext highlighter-rouge">3.4.1</code> to <code class="language-plaintext highlighter-rouge">3.5.1</code> which is required by the plugins that use <code class="language-plaintext highlighter-rouge">OIDC</code> library to work properly.</li>
  <li>Fixes an issue where enabling tracing and setting a tracing header caused all HTTPS requests to fail immediately when
attempting to fetch headers during the ssl_cert phase.</li>
</ul>

<h2 id="036-3">0.36-3</h2>

<p><strong>Release Date:</strong> 2019/11/18</p>

<h3 id="features-19">Features</h3>

<ul>
  <li>Adds an endpoint <code class="language-plaintext highlighter-rouge">/entities/migrate</code> for migrating entities from Community Edition to Enterprise Edition.</li>
</ul>

<h4 id="plugins-61">Plugins</h4>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">kong-openid-connect</code></strong>
    <ul>
      <li>Add support for ES256 signing and key generation</li>
      <li>Add support for ES384 signing and key generation</li>
      <li>Add support for ES512 signing and key generation</li>
      <li>Add support for PS256 signing and key generation</li>
      <li>Add support for PS384 signing and key generation</li>
      <li>Add support for PS512 signing and key generation</li>
      <li>Add support for EdDSA signing, key generation and verification</li>
      <li>Update lua-resty-nettle dependency to 1.0</li>
      <li>Change verification JWT header’s typ claim by adding support for at+jwtthat for example IdentityServer4
  is using by default.</li>
      <li>Change issuer verification bit more permissive (e.g. the difference in ending slash (present or absent)
  does not make the verification to fail)</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-58">Fixes</h3>

<ul>
  <li>Fixes router proxy path issues.</li>
</ul>

<h2 id="036-2">0.36-2</h2>

<h3 id="notifications">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.36</strong> inherits from <strong>Kong 1.2.1</strong> with some exceptions:
    <ul>
      <li>Declarative Configuration and DB-less mode of Kong Gateway is designed for limited scenarios that do not allow for the Kong Enterprise to function as-is. As such the mode is not available in Kong Enterprise today.</li>
    </ul>
  </li>
</ul>

<p><strong>Release Date:</strong> 2019/8/30</p>

<h3 id="features-20">Features</h3>

<h4 id="dev-portal-1">Dev Portal</h4>
<ul>
  <li>Adds <code class="language-plaintext highlighter-rouge">custom_id</code> field to developers to allow easier mapping</li>
</ul>

<h4 id="plugins-62">Plugins</h4>
<ul>
  <li><strong>Request-transformer</strong>
    <ul>
      <li>Allows rendering values from kong.ctx.shared</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-59">Fixes</h3>

<h4 id="plugins-63">Plugins</h4>
<ul>
  <li><strong>Rate Limiting Advanced</strong>
    <ul>
      <li>Fixes an issue where user failed to import Rate Limiting Advanced
declarative YAML file via <code class="language-plaintext highlighter-rouge">kong config db_import</code></li>
    </ul>
  </li>
</ul>

<h4 id="core-32">Core</h4>
<ul>
  <li><strong>Workspaces</strong>
    <ul>
      <li>Fixes an issue where user can rename a workspace with <code class="language-plaintext highlighter-rouge">PUT</code> request</li>
    </ul>
  </li>
  <li><strong>Migrations</strong>
    <ul>
      <li>Fixes an issue where migration from 0.35-x to 0.36-x making plugin <code class="language-plaintext highlighter-rouge">protocols</code>
field mandtory durin <code class="language-plaintext highlighter-rouge">PATCH</code> request.</li>
      <li>Fixes an issue where unique fields of entites are not migrated properly when
migrating from Kong CE to EE using CLI <code class="language-plaintext highlighter-rouge">kong migrations migrate-community-to-enterprise</code></li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li>Fixes an issue where Kong fails to remove old stats table when they are not part of public
schema</li>
    </ul>
  </li>
</ul>

<h2 id="036-1">0.36-1</h2>

<h3 id="notifications-1">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.36</strong> inherits from <strong>Kong 1.2.1</strong> with some exceptions:
    <ul>
      <li>Declarative Configuration and DB-less mode of Kong Gateway is designed for limited scenarios that do not allow for the Kong Enterprise to function as-is. As such the mode is not available in Kong Enterprise today.</li>
    </ul>
  </li>
</ul>

<p><strong>Release Date:</strong> 2019/8/19</p>

<h3 id="fixes-60">Fixes</h3>

<ul>
  <li>Fixes NGINX CVEs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2018-16843">CVE-2018-16843</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2018-16844">CVE-2018-16844</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2019-9511">CVE-2019-9511</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2019-9513">CVE-2019-9513</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2019-9516">CVE-2019-9516</a></li>
    </ul>
  </li>
  <li>Fixes issue in which Enterprise will not start if configured with a stream listen directive</li>
  <li>Fixes issue in which LuaPath is not correctly configured and prevents use of Luarocks</li>
</ul>

<h2 id="036">0.36</h2>

<h3 id="notifications-2">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.36</strong> inherits from <strong>Kong 1.2.1</strong> with some exceptions:
    <ul>
      <li>Declarative Configuration and DB-less mode of Kong Gateway is designed for limited scenarios that do not allow for the Kong Enterprise to function as-is. As such the mode is not available in Kong Enterprise today.</li>
    </ul>
  </li>
</ul>

<p><strong>Release Date:</strong> 2019/8/5</p>

<h3 id="features-21">Features</h3>

<h4 id="core-33">Core</h4>

<ul>
  <li>Support for <strong>wildcard SNI matching</strong>: the
<code class="language-plaintext highlighter-rouge">ssl_certificate_by_lua</code> phase and the stream <code class="language-plaintext highlighter-rouge">preread</code> phase) is now able to
match a client hello SNI against any registered wildcard SNI. This is
particularly helpful for deployments serving a certificate for multiple
subdomains.</li>
  <li><strong>HTTPS Routes can now be matched by SNI</strong>: the <code class="language-plaintext highlighter-rouge">snis</code> Route
attribute (previously only available for <code class="language-plaintext highlighter-rouge">tls</code> Routes) can now be set for
<code class="language-plaintext highlighter-rouge">https</code> Routes and is evaluated by the HTTP router.</li>
  <li><strong>Native support for HTTPS redirects</strong>: Routes have a new
<code class="language-plaintext highlighter-rouge">https_redirect_status_code</code> attribute specifying the status code to send
back to the client if a plain text request was sent to an <code class="language-plaintext highlighter-rouge">https</code> Route.</li>
  <li>Schema fields can now be marked as immutable.</li>
  <li>Support for loading custom DAO strategies from plugins.</li>
  <li>Support for IPv6 to <code class="language-plaintext highlighter-rouge">tcp</code> and <code class="language-plaintext highlighter-rouge">tls</code> Routes.</li>
  <li><strong>Transparent proxying</strong> - the <code class="language-plaintext highlighter-rouge">service</code> attribute on
Routes is now optional; a Route without an assigned Service will
proxy transparently</li>
  <li>Support for <strong>tags</strong> in entities
    <ul>
      <li>Every core entity now adds a <code class="language-plaintext highlighter-rouge">tags</code> field</li>
    </ul>
  </li>
  <li>New <code class="language-plaintext highlighter-rouge">protocols</code> field in the Plugin entity, allowing plugin instances
to be set for specific protocols only (<code class="language-plaintext highlighter-rouge">http</code>, <code class="language-plaintext highlighter-rouge">https</code>, <code class="language-plaintext highlighter-rouge">tcp</code> or <code class="language-plaintext highlighter-rouge">tls</code>).
    <ul>
      <li>It filters out plugins during execution according to their <code class="language-plaintext highlighter-rouge">protocols</code> field</li>
      <li>It throws an error when trying to associate a Plugin to a Route
which is not compatible, protocols-wise, or to a Service with no
compatible routes.</li>
    </ul>
  </li>
</ul>

<h4 id="configuration-12">Configuration</h4>

<ul>
  <li><strong>Asynchronous router updates</strong>: a new configuration property
<code class="language-plaintext highlighter-rouge">router_consistency</code> accepts two possible values: <code class="language-plaintext highlighter-rouge">strict</code> and <code class="language-plaintext highlighter-rouge">eventual</code>.
The former is the default setting and makes router rebuilds highly
consistent between Nginx workers. It can result in long tail latency if
frequent Routes and Services updates are expected. The latter helps
preventing long tail latency issues by instructing Kong to rebuild the router
asynchronously (with eventual consistency between Nginx workers).</li>
  <li><strong>Database cache warmup</strong>: Kong can now preload entities during
its initialization. A new configuration property (<code class="language-plaintext highlighter-rouge">db_cache_warmup_entities</code>)
was introduced, allowing users to specify which entities should be preloaded.
DB cache warmup allows for ahead-of-time DNS resolution for Services with a
hostname. This feature reduces first requests latency, improving the overall
P99 latency tail.</li>
  <li>Improved PostgreSQL connection management: two new configuration properties
have been added: <code class="language-plaintext highlighter-rouge">pg_max_concurrent_queries</code> sets the maximum number of
concurrent queries to the database, and <code class="language-plaintext highlighter-rouge">pg_semaphore_timeout</code> allows for
tuning the timeout when acquiring access to a database connection. The
default behavior remains the same, with no concurrency limitation.</li>
  <li>New option in <code class="language-plaintext highlighter-rouge">kong.conf</code>: <code class="language-plaintext highlighter-rouge">pg_schema</code> to specify Postgres schema
to be used</li>
  <li>The Stream subsystem now supports Nginx directive injections
    <ul>
      <li><code class="language-plaintext highlighter-rouge">nginx_stream_*</code> (or <code class="language-plaintext highlighter-rouge">KONG_NGINX_STREAM_*</code> environment variables)
for injecting entries to the <code class="language-plaintext highlighter-rouge">stream</code> block</li>
      <li><code class="language-plaintext highlighter-rouge">nginx_sproxy_*</code> (or <code class="language-plaintext highlighter-rouge">KONG_NGINX_SPROXY_*</code> environment variables)
for injecting entries to the <code class="language-plaintext highlighter-rouge">server</code> block inside <code class="language-plaintext highlighter-rouge">stream</code></li>
    </ul>
  </li>
</ul>

<h4 id="admin-api-9">Admin API</h4>

<ul>
  <li>Add a <strong>schema validation endpoint for entities</strong>: a new
endpoint <code class="language-plaintext highlighter-rouge">/schemas/:entity_name/validate</code> can be used to validate an instance
of any entity type in Kong without creating the entity itself.</li>
  <li>Add <strong>memory statistics</strong> to the <code class="language-plaintext highlighter-rouge">/status</code> endpoint. The response
now includes a <code class="language-plaintext highlighter-rouge">memory</code> field, which contains the <code class="language-plaintext highlighter-rouge">lua_shared_dicts</code> and
<code class="language-plaintext highlighter-rouge">workers_lua_vms</code> fields with statistics on shared dictionaries and workers
Lua VM memory usage.
    <ul>
      <li>When using the new <code class="language-plaintext highlighter-rouge">database=off</code> configuration option,
the Admin API endpoints for entities (such as <code class="language-plaintext highlighter-rouge">/routes</code> and
<code class="language-plaintext highlighter-rouge">/services</code>) are read-only, since the configuration can only
be updated via <code class="language-plaintext highlighter-rouge">/config</code></li>
    </ul>
  </li>
  <li>Admin API endpoints now support searching by tag
(for example, <code class="language-plaintext highlighter-rouge">/consumers?tags=example_tag</code>)
    <ul>
      <li>You can search by multiple tags:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">/services?tags=serv1,mobile</code> to search for services matching tags <code class="language-plaintext highlighter-rouge">serv1</code> and <code class="language-plaintext highlighter-rouge">mobile</code></li>
          <li><code class="language-plaintext highlighter-rouge">/services?tags=serv1/serv2</code> to search for services matching tags <code class="language-plaintext highlighter-rouge">serv1</code> or <code class="language-plaintext highlighter-rouge">serv2</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>New Admin API endpoint <code class="language-plaintext highlighter-rouge">/tags/</code> for listing entities by tag: <code class="language-plaintext highlighter-rouge">/tags/example_tag</code></li>
</ul>

<h4 id="pdk-13">PDK</h4>

<ul>
  <li>New function <code class="language-plaintext highlighter-rouge">kong.node.get_memory_stats()</code>. This function returns statistics
on shared dictionaries and workers Lua VM memory usage, and powers the memory
statistics newly exposed by the <code class="language-plaintext highlighter-rouge">/status</code> endpoint.</li>
  <li>New PDK function: <code class="language-plaintext highlighter-rouge">kong.client.get_protocol</code> for obtaining the protocol
in use during the current request</li>
  <li>New PDK function: <code class="language-plaintext highlighter-rouge">kong.nginx.get_subsystem</code>, so plugins can detect whether
they are running on the HTTP or Stream subsystem</li>
</ul>

<h4 id="plugins-64">Plugins</h4>

<ul>
  <li>Logging plugins: log request TLS version, cipher, and verification status.</li>
  <li>Plugin development: inheriting from <code class="language-plaintext highlighter-rouge">BasePlugin</code> is now optional. Avoiding
the inheritance paradigm improves plugins’ performance.</li>
  <li>Support for ACL <strong>authenticated groups</strong>, so that authentication plugins
that use a 3rd party (other than Kong) to store credentials can benefit
from using a central ACL plugin to do authorization for them.</li>
  <li>The Kubernetes Sidecar Injection plugin is now bundled into Kong for a
smoother K8s experience.</li>
  <li>AWS Lambda now includes the AWS China region.</li>
</ul>

<h4 id="cli-10">CLI</h4>

<ul>
  <li><strong>Bulk database import</strong> using the same declarative
configuration format as the in-memory mode, using the new command:
<code class="language-plaintext highlighter-rouge">kong config db_import kong.yml</code>. This command upserts all
entities specified in the given <code class="language-plaintext highlighter-rouge">kong.yml</code> file in bulk.
    <ul>
      <li>Known issue for db_import/db_export in Kong Enterprise
        <ul>
          <li><code class="language-plaintext highlighter-rouge">db_import</code> supports all API Gateway entities, with the exception of Admins and RBAC users and roles. This limitation is because credentials are hashed.</li>
          <li><code class="language-plaintext highlighter-rouge">db_export</code> is not supported at all.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>New command: <code class="language-plaintext highlighter-rouge">kong config init</code> to generate a template <code class="language-plaintext highlighter-rouge">kong.yml</code>
file to get you started</li>
  <li>New command: <code class="language-plaintext highlighter-rouge">kong config parse kong.yml</code> to verify the syntax of
the <code class="language-plaintext highlighter-rouge">kong.yml</code> file before using it</li>
  <li>New option <code class="language-plaintext highlighter-rouge">--wait</code> in <code class="language-plaintext highlighter-rouge">kong quit</code> to ease graceful termination when using orchestration tools.</li>
</ul>

<h3 id="fixes-61">Fixes</h3>

<h4 id="core-34">Core</h4>

<ul>
  <li>Resolve hostnames properly during initialization of Cassandra contact points</li>
  <li>Fix health checks for Targets that need two-level DNS resolution
(e.g. SRV → A → IP)</li>
  <li>Fix serialization of map types in the Cassandra backend</li>
  <li>Fix target cleanup and cascade-delete for Targets</li>
  <li>Avoid crash when failing to obtain list of Upstreams</li>
  <li>Disallow invalid timeout value of 0ms for attributes in Services</li>
  <li>DAO fix for foreign fields used as primary keys</li>
  <li>Cassandra: ensures serial consistency is <code class="language-plaintext highlighter-rouge">LOCAL_SERIAL</code> when a
datacenter-aware load balancing policy is in use. This fixes unavailability
exceptions sometimes experienced when connecting to a multi-datacenter
cluster with cross-datacenter connectivity issues.</li>
  <li>Schemas: fixes an issue in the schema validator that would not allow specifying
<code class="language-plaintext highlighter-rouge">false</code> in some schema rules, such a <code class="language-plaintext highlighter-rouge">{ type = "boolean", eq = false }</code>.</li>
  <li>Fixes an underlying issue with regards to database entities cache keys
generation.</li>
  <li>Ensure the migration path for Cassandra does not corrupt the
database schema.</li>
  <li>Allow the <code class="language-plaintext highlighter-rouge">kong config init</code> command to run without a pointing to a prefix
directory.</li>
  <li>Adds support for <a href="/enterprise/0.36-x/property-reference/#db_cache_warmup_entities"><code class="language-plaintext highlighter-rouge">db_cache_warmup_entities</code></a>,
which allows Kong to pre-load all necessary entries into Kong nodes’ memory on start.</li>
  <li>Provides support in declarative configuration for <strong>Workspaces</strong> and <strong>RBAC</strong>.</li>
  <li>Provides support for the Redis Cluster library.</li>
  <li>Active healthchecks: <code class="language-plaintext highlighter-rouge">http</code> checks are not performed for <code class="language-plaintext highlighter-rouge">tcp</code> and <code class="language-plaintext highlighter-rouge">tls</code>
Services anymore; only <code class="language-plaintext highlighter-rouge">tcp</code> healthchecks are performed against such
Services.</li>
  <li>Fix an issue where updates in migrations would not correctly populate default
values.</li>
  <li>Improvements in the reentrancy of Cassandra migrations.</li>
  <li>Fix an issue causing the PostgreSQL strategy to not bootstrap the schema when
using a PostgreSQL account with limited permissions.</li>
  <li>Address issue where field type “record” nested values reset on update</li>
  <li>Correctly manage primary keys of type “foreign”</li>
</ul>

<h4 id="admin-api-10">Admin API</h4>

<ul>
  <li>Proper support for <code class="language-plaintext highlighter-rouge">PUT /{entities}/{entity}/plugins/{plugin}</code></li>
  <li>Fix Admin API inferencing of map types using form-encoded</li>
  <li>Accept UUID-like values in <code class="language-plaintext highlighter-rouge">/consumers?custom_id=</code></li>
</ul>

<h4 id="dev-portal-2">Dev Portal</h4>

<ul>
  <li>Adds <em>per workspace</em> <strong>Session Config</strong>. The Dev Portal will now allow
session configuration for every portal-per-workspace instance.</li>
  <li>Adds <strong>email verification</strong>. Developers will be sent a verification link after
requesting access to a Dev Portal.</li>
</ul>

<h4 id="plugins-65">Plugins</h4>

<ul>
  <li><strong>Request Validator</strong>
    <ul>
      <li>Adds support for JSON Schema Draft 4</li>
      <li>Adds support for parameter validation</li>
      <li>Adds the option to override validation for specific content types</li>
    </ul>
  </li>
  <li><strong>OAuth2 Introspection</strong>
    <ul>
      <li>Can now find and load consumers by <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">custom_id</code>. OAuth2
<code class="language-plaintext highlighter-rouge">username</code> maps to <strong>Consumer’s</strong> <code class="language-plaintext highlighter-rouge">username</code>, while the <code class="language-plaintext highlighter-rouge">client_id</code> maps to a
<strong>Consumer’s</strong> <code class="language-plaintext highlighter-rouge">custom_id</code></li>
      <li>New <code class="language-plaintext highlighter-rouge">consumer_by</code> configuration allows users to customize whether <strong>Consumers</strong>
are fetched by <code class="language-plaintext highlighter-rouge">client_id</code> or <code class="language-plaintext highlighter-rouge">username</code> (returned by the introspection request)</li>
      <li>New <code class="language-plaintext highlighter-rouge">introspect_request</code> configuration that causes the plugin to send
information about the <strong>current request</strong> as <strong>headers</strong> in the <strong>introspection endpoint</strong>
<strong>request</strong>. Currently, the <strong>request path</strong> and <strong>HTTP methods</strong> are sent as <code class="language-plaintext highlighter-rouge">X-Request-Path</code>
and <code class="language-plaintext highlighter-rouge">X-Request-Http-Method</code> headers</li>
      <li>New <code class="language-plaintext highlighter-rouge">custom_introspection_headers</code> configuration list of user-supplied
headers to be sent in the <strong>introspection endpoint request</strong></li>
      <li>New <code class="language-plaintext highlighter-rouge">custom_claims_forward</code> configuration list of additional claims. The
<strong>introspection endpoint request</strong> will return this list to forward as headers
to the <strong>upstream service request</strong>.</li>
    </ul>
  </li>
  <li>basic-auth, ldap-auth, key-auth, jwt, hmac-auth: fixed
status code for unauthorized requests: they now return HTTP 401
instead of 403</li>
  <li>tcp-log: remove spurious trailing carriage return</li>
  <li>jwt: fix <code class="language-plaintext highlighter-rouge">typ</code> handling for supporting JOSE (JSON Object
Signature and Validation)</li>
  <li>Fixes to the best-effort auto-converter for legacy plugin schemas</li>
  <li>Ensures the <code class="language-plaintext highlighter-rouge">cassandra_local_datacenter</code> configuration property is specified
when a datacenter-aware Cassandra load balancing policy is in use.</li>
  <li>request-transformer: fixes an issue that would prevent adding a body to
requests without one.</li>
  <li>kubernetes-sidecar-injector: fixes an issue causing mutating webhook calls to
fail.</li>
  <li>basic-auth: ignore password if nil on basic auth credential patch</li>
  <li>http-log: Simplify queueing mechanism. Fixed a bug where traces were lost
in some cases.</li>
  <li>request-transformer: validate header values in plugin configuration.</li>
  <li>rate-limiting: added index on rate-limiting metrics.</li>
  <li><strong>Upstream-tls</strong>
    <ul>
      <li>Fixes an issue where bundled <strong>certificates</strong> in PEM format were not loaded into
the certificate store correctly.</li>
    </ul>
  </li>
  <li>ldap-auth: ensure TLS connections are reused.</li>
  <li>oauth2: ensured access tokens preserve their <code class="language-plaintext highlighter-rouge">token_expiration</code> value when
migrating from previous Kong versions.</li>
</ul>

<h4 id="workspaces">Workspaces</h4>

<ul>
  <li>Fixes permission bug where an <strong>Admin</strong> with <code class="language-plaintext highlighter-rouge">workspace-super-admin</code> <strong>Role</strong> was
not able to access the <strong>Workspace</strong> that the <strong>Role</strong> was assigned to.</li>
</ul>

<h4 id="upstreams">Upstreams</h4>

<ul>
  <li>Fixes an issue where it was not possible to delete an <strong>Upstream</strong> object if it had no associated <strong>Target</strong>.</li>
</ul>

<h4 id="kong-manager-23">Kong Manager</h4>

<ul>
  <li>Fixes a bug where Kong Manager could only display 100 <strong>Workspaces</strong>.</li>
  <li>Fixes a bug where a <strong>Route’s</strong> details would not include a link to a <strong>Service</strong> that did not have a name.</li>
</ul>

<h4 id="dev-portal-3">Dev Portal</h4>

<ul>
  <li>Fixes a bug in the sign-up meta fields that caused data to disappear when a <strong>Developer</strong> is updated.</li>
  <li>Fixes an issue where clicking on a <strong>Developer</strong> after clicking the credentials section ACL causes a 500 error.</li>
</ul>

<h4 id="cli-11">CLI</h4>

<ul>
  <li>Fix <code class="language-plaintext highlighter-rouge">kong db_import</code> to support inserting entities without specifying a UUID
for their primary key. Entities with a unique identifier (e.g. <code class="language-plaintext highlighter-rouge">name</code> for
Services) can have their primary key omitted.</li>
  <li>The <code class="language-plaintext highlighter-rouge">kong migrations [up|finish] -f</code> commands does not run anymore if there
are no previously executed migrations.</li>
</ul>

<h3 id="changes-3">Changes</h3>

<ul>
  <li><strong>Brain</strong>
    <ul>
      <li>Renames <strong>Brain</strong> to <strong>Collector</strong></li>
    </ul>
  </li>
</ul>

<h2 id="035-5">0.35-5</h2>
<p><strong>Release Date:</strong> 2020/05/14</p>

<h3 id="fixes-62">Fixes</h3>
<ul>
  <li>Reverted breaking changes introduced by <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/pull/3780">PR #3780</a> involving the handling of slashes inside the router.</li>
  <li>Reverted service mesh changes affecting <code class="language-plaintext highlighter-rouge">proxy_ssl_*</code> directives.</li>
</ul>

<h2 id="035-4">0.35-4</h2>
<p><strong>Release Date:</strong> 2019/08/19</p>

<h3 id="notifications-3">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.35-3</strong> inherits from <strong>Kong 1.0.3</strong>; read the
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#103">Kong Changelog</a>
for details.</li>
</ul>

<h3 id="fixes-63">Fixes</h3>
<ul>
  <li>Fixes for NGINX CVEs resolving security vulnerabilities in the HTTP/2 protocol which may cause excessive memory consumption and CPU usage: <a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2018-16843">CVE-2018-16843</a>, <a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2018-16844">CVE-2018-16844</a>, <a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2019-9511">CVE-2019-9511</a>, <a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2019-9513">CVE-2019-9513</a>, and <a rel="nofollow noopener noreferrer" href="https://nvd.nist.gov/vuln/detail/CVE-2019-9516">CVE-2019-9516</a></li>
</ul>

<h2 id="035-3">0.35-3</h2>
<p><strong>Release Date:</strong> 2019/07/17</p>

<h3 id="notifications-4">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.35-3</strong> inherits from <strong>Kong 1.0.3</strong>; read the
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#103">Kong Changelog</a>
for details.</li>
</ul>

<h3 id="features-22">Features</h3>

<h4 id="core-35">Core</h4>
<ul>
  <li>New CLI migrations command <code class="language-plaintext highlighter-rouge">migrate-apis</code> to convert all existing API objects to <strong>Services and Routes</strong></li>
  <li>New CLI migrations command <code class="language-plaintext highlighter-rouge">migrate-community-to-enterprise</code> for moving Core entities to Enterprise entities</li>
  <li>Support for Redis Cluster as a backend for <code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code> and <code class="language-plaintext highlighter-rouge">proxy-cache</code> plugins</li>
  <li>Cache-warming configuration to load specified entities at startup to improve first request latency</li>
</ul>

<h4 id="kong-manager-24">Kong Manager</h4>
<ul>
  <li>New page to reset <strong>RBAC</strong> token and manage user password</li>
</ul>

<h4 id="plugins-66">Plugins</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">upstream-tls</code> - allows verification of upstream certificates, custom CA certificates, and verification depth</li>
</ul>

<h3 id="fixes-64">Fixes</h3>

<h4 id="core-36">Core</h4>
<ul>
  <li>Correctly count <code class="language-plaintext highlighter-rouge">workspace_entities</code> when moving from previous versions</li>
</ul>

<h4 id="dev-portal-4">Dev Portal</h4>
<ul>
  <li>Dev Portal Docs now point to 0.35</li>
  <li>Unauthenticated Spec rendering is fixed</li>
</ul>

<h4 id="plugins-67">Plugins</h4>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">jwt-signer</code></strong>
    <ul>
      <li>Fix <strong>IMPORTANT!</strong> verify expiry and scopes checks on JWT tokens</li>
      <li>Fix finding Consumer by custom ID</li>
      <li>Fix runtime error on unexpected function, <code class="language-plaintext highlighter-rouge">kong.log.error</code> -&gt; <code class="language-plaintext highlighter-rouge">kong.log.err</code></li>
      <li>Change invalidation to happen locally, not cluster wide, each node invalidates on their own</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">openid-connect</code></strong>
    <ul>
      <li>Change invalidations to local invalidation instead of cluster-wide invalidation</li>
      <li>Fix <strong>Admin API</strong> to properly call the cleanup function on entity endpoint</li>
      <li>Fix <code class="language-plaintext highlighter-rouge">hide_credentials</code> not clearing X-Access-Token header</li>
      <li>Change debug logging to not log about disabled authentication methods</li>
      <li>Change TTL code and fix some edge cases</li>
    </ul>
  </li>
</ul>

<h2 id="035-1">0.35-1</h2>
<p><strong>Release Date:</strong> 2019/05/28</p>

<h3 id="notifications-5">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.35-1</strong> inherits from <strong>Kong 1.0.3</strong>; read the
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#103">Kong Changelog</a>
for details.</li>
</ul>

<h3 id="features-23">Features</h3>

<h4 id="plugins-68">Plugins</h4>
<ul>
  <li>Allow <strong>Redis</strong> strategy configuration for <strong>Rate Limiting Advanced</strong></li>
</ul>

<h3 id="fixes-65">Fixes</h3>

<h4 id="kong-manager-25">Kong Manager</h4>
<ul>
  <li>If a Kong Manager <strong>Super Admin</strong> was already created, setting
<code class="language-plaintext highlighter-rouge">KONG_PASSWORD</code> during <code class="language-plaintext highlighter-rouge">migrations up</code> to <strong>0.35</strong> would error. Running
migrations when <strong>Super Admin</strong> already exists and <code class="language-plaintext highlighter-rouge">KONG_PASSWORD</code>
environment variable is set is fixed.</li>
</ul>

<h4 id="dev-portal-5">Dev Portal</h4>
<ul>
  <li>Fixes Dev Portal documentation not showing after upgrading to 0.35</li>
  <li>Fixes Dev Portal OAPI spec rendering of long request URL wrapping</li>
</ul>

<h4 id="plugins-69">Plugins</h4>
<ul>
  <li><code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code> schema validation rules prevented use of
Redis Sentinel (<code class="language-plaintext highlighter-rouge">config.strategy=redis</code> and
<code class="language-plaintext highlighter-rouge">config.redis.sentinel_addresses</code>) for counters datastore. Validation
rule is fixed.</li>
</ul>

<h4 id="core-37">Core</h4>
<ul>
  <li>Upgrade from <strong>0.34-1</strong> to <strong>0.35</strong> using <strong>Cassandra</strong> no longer creates
duplicate <strong>Workspace</strong>.</li>
  <li>Migrations from <strong>0.34-1</strong>to <strong>0.35</strong> did not properly handle <strong>Certificates</strong>
and <strong>SNIs</strong> in context of <strong>Workspaces</strong>. Migrating from <strong>0.34-1</strong> with
this fix does not support zero downtime in this release. To get a fully
functional <strong>0.35</strong> instance with <strong>Certificates</strong>, you must run <code class="language-plaintext highlighter-rouge">migrations
finish</code>. Proper creation of <strong>Workspace</strong> links for <strong>Certificates</strong> and
<strong>SNIs</strong> is fixed.</li>
  <li><strong>Cassandra</strong> <code class="language-plaintext highlighter-rouge">read before write</code> pattern did not correctly use schema
defaults and prevented <code class="language-plaintext highlighter-rouge">PATCH</code> of the <strong>Plugins</strong> entity. Usage of schema
default values in <strong>Cassandra</strong> <code class="language-plaintext highlighter-rouge">read before write</code> pattern is fixed.</li>
  <li><code class="language-plaintext highlighter-rouge">plugins.run_on default</code> now correctly set on migrations upgrade.</li>
</ul>
<hr />

<h2 id="035">0.35</h2>
<p><strong>Release Date:</strong> 2019/05/17</p>

<h3 id="notifications-6">Notifications</h3>
<ul>
  <li><strong>Kong Enterprise 0.35</strong> inherits from <strong>Kong 1.0.3</strong>; read the
<a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#103">Kong Changelog</a>
for details.</li>
</ul>

<h3 id="changes-4">Changes</h3>

<h4 id="admin-api-11">Admin API</h4>
<ul>
  <li><strong>RBAC</strong>: Following Kong 1.0’s changes, referenced (<code class="language-plaintext highlighter-rouge">foreign_key</code>) entities
  like RBAC Users and RBAC Roles are returned as nested JSON tables instead of
  flattened <code class="language-plaintext highlighter-rouge">role_id</code> or <code class="language-plaintext highlighter-rouge">user_id</code> fields in top-level entity.</li>
  <li><code class="language-plaintext highlighter-rouge">user_token</code> must now be provided when creating a new <strong>RBAC</strong> user (in a
  POST request to <code class="language-plaintext highlighter-rouge">rbac/users</code>) and is no longer auto-generated if left blank</li>
</ul>

<h4 id="core-38">Core</h4>
<ul>
  <li>New <strong>RBAC</strong> user tokens are not stored in plaintext. If upgrading to this
  version, any existing tokens will remain in plaintext until either a) the
  token is used in an Admin API call or b) the <code class="language-plaintext highlighter-rouge">rbac_user</code> record is PATCHed
  even if the PATCH request includes the existing value of <code class="language-plaintext highlighter-rouge">user_token</code>).</li>
</ul>

<h3 id="features-24">Features</h3>

<h4 id="kong-manager-26">Kong Manager</h4>
<ul>
  <li>User information is no longer stored in local storage. A user exchanges
  credentials for a session. See the <a href="/hub/kong-inc/session"><strong>Session Plugin</strong></a>
  for details.</li>
  <li>Enable and view <strong>Plugins</strong> in context of a <strong>Service</strong> and <strong>Route</strong></li>
  <li>Type-ahead service name/ID search on routes form</li>
  <li>Easily scan/copy IDs in service table</li>
  <li>Contextual help and error messages for forms</li>
  <li>Adds page breadcrumbs</li>
  <li>In-context documentation links</li>
  <li>Global navigation links to documentation and Support Portal</li>
  <li>Improved Info tab for cluster &amp; config info</li>
  <li>Detailed debug tracing can be enabled which outputs information about
  various portions of the request lifecycle, such as DB or DNS queries,
  plugin execution, core handler timing, etc</li>
</ul>

<h4 id="dev-portal-6">Dev Portal</h4>
<ul>
  <li><strong>Dev Portal</strong> files now rendered server-side for increased performance.</li>
  <li>Developers can now sign up to multiple <strong>Workspaces</strong> with the same email
  address.</li>
  <li><strong>Dev Portal</strong> is disabled for each <strong>Workspace</strong> by default.</li>
  <li>Default theme shipped with <strong>Kong Enterprise</strong> now supports IE11.</li>
  <li>User information is no longer stored in local storage. A user exchanges
  credentials for a session. See the <a href="/hub/kong-inc/session"><strong>Session Plugin</strong></a>
  for details.</li>
  <li><strong>Dev Portal</strong> page, partial, and specification look-ups moved to
  server-side.</li>
  <li>Added support for OAS3 body parameters.</li>
  <li>Added CORS header configuration option to workspace portal configuration
  object to allow explicit CORS configuration.</li>
  <li>Added a live editor built on VSCode core for improved customization of
  <strong>Dev Portal</strong> within <strong>Kong Manager</strong></li>
  <li>Added custom registration fields support and custom registration field
  interface.</li>
  <li>Added methods to links in the sidebar on documentation in the default portal
  theme.</li>
  <li>Added hover states to drop-downs in the sidebar of documentation in the
  default portal theme.</li>
  <li>Added a right border to the sidebar in the default portal theme.</li>
  <li>Changed <code class="language-plaintext highlighter-rouge">full Name</code> registration field to be a custom registration field,
  and can be managed through the custom fields interface in <strong>Kong Manager</strong>.</li>
  <li>Changed custom checkbox to native checkbox in the default <strong>Dev Portal</strong>
  theme on the dashboard.</li>
</ul>

<h4 id="plugins-70">Plugins</h4>
<ul>
  <li><strong>Response Transformer Advanced</strong> (<em>NEW</em>):
    <ul>
      <li>Conditional transformations on response status through the new flag
if_status, a subfield in all transformations (e.g., <code class="language-plaintext highlighter-rouge">add.if_status</code>,
<code class="language-plaintext highlighter-rouge">remove.if_status</code>); the transformation only happens if the response code
matches one of the codes in the <code class="language-plaintext highlighter-rouge">if_status field</code></li>
      <li>Full-body replacement through the new config.replace.body</li>
      <li>Added a support of status code ranges for <code class="language-plaintext highlighter-rouge">if_status</code> configuration
parameter. Now you can provide status code ranges and single status codes
together (e.g., <code class="language-plaintext highlighter-rouge">201-204,401</code>)</li>
    </ul>
  </li>
  <li><strong>Request Validator</strong> (<em>NEW</em>):
    <ul>
      <li>Validate the request body against a schema; if the payload is not
valid JSON or if it doesn’t conform to the schema, the plugin returns a 400
Bad Request response before the request reaches upstream. This version of
the plugin <strong>does not</strong> support JSON Schema; it uses Kong’s schema format</li>
    </ul>
  </li>
  <li><strong>Canary</strong>:
    <ul>
      <li>Healthchecks: new configuration upstream_fallback allows the plugin to
skip applying the canary upstream if it’s not healthy. Note: it only works
if the host specified in upstream_host points to a Kong upstream, and if
that upstream has healthchecks enabled on it)</li>
    </ul>
  </li>
  <li><strong>Oauth2 Introspection</strong>:
    <ul>
      <li>Set Id to Rate limiting may detect calls to introspection endpoint</li>
      <li>Set credential id to allow rate limiting based on access token</li>
    </ul>
  </li>
  <li><strong>The Kong Session Plugin</strong>:
    <ul>
      <li>The Kong Session Plugin adds session support for <strong>Kong Manager</strong> and
Dev Portal. Sessions can be stored via cookie or database. See the
accompanying documentation for how to configure the plugin for use with
<strong>Kong Manager</strong>.</li>
    </ul>
  </li>
  <li><strong>Vault-Auth</strong>:
    <ul>
      <li>Authenticate requests via Vault. See
<a href="/hub/kong-inc/vault-auth"><strong>Vault Auth</strong></a> for details.</li>
    </ul>
  </li>
  <li><strong>OpenID Connect</strong>:
    <ul>
      <li>Update <code class="language-plaintext highlighter-rouge">lua-resty-http</code> to <code class="language-plaintext highlighter-rouge">&gt;= 0.13</code></li>
      <li>Update <code class="language-plaintext highlighter-rouge">lua-resty-session</code> to <code class="language-plaintext highlighter-rouge">2.23</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.authorization_endpoint</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.token_endpoint</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.response_type</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.token_post_args_client</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.token_headers_names</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.token_headers_values</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.introspection_post_args_names</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.introspection_post_args_values</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.instrospection_post_args_client</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.session_secret</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.session_cookie_renew</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.ignore_signature</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.cache_ttl_max</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.cache_ttl_min</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.cache_ttl_neg</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.cache_ttl_resurrect</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.upstream_session_id_header</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.downstream_session_id_header</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">tokens</code> option to <code class="language-plaintext highlighter-rouge">config.login_tokens</code> to return full token endpoint
results with <code class="language-plaintext highlighter-rouge">response</code> or <code class="language-plaintext highlighter-rouge">redirect</code> specified in <code class="language-plaintext highlighter-rouge">config.login_action</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">introspection</code> option to <code class="language-plaintext highlighter-rouge">config.login_tokens</code> to return
introspection results with <code class="language-plaintext highlighter-rouge">response</code> or <code class="language-plaintext highlighter-rouge">redirect</code> specified in
<code class="language-plaintext highlighter-rouge">config.login_action</code></li>
      <li>Change Kong 1.0 support</li>
      <li>Change Refresh-token headers can now have <code class="language-plaintext highlighter-rouge">Bearer</code> in front of the token.</li>
      <li>Change to forbid only unapproved developers</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.scopes_claim</code> is also searched in introspected jwt token
results</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.audience_claim</code> is also searched in introspected jwt token
results</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.consumer_claim</code> is also searched in introspected jwt token
results</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.consumer_claim</code> is also searched with user info when
<code class="language-plaintext highlighter-rouge">config.search_user_info</code> is enabled</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.credential_claim</code> is searched from <code class="language-plaintext highlighter-rouge">id token</code> as well</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.credential_claim</code> is also searched in introspected jwt
token results</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.credential_claim</code> is also searched with user info when
<code class="language-plaintext highlighter-rouge">config.search_user_info</code> is enabled</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code> is searched from <code class="language-plaintext highlighter-rouge">id token</code>
as well</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code> is also searched with user
info when <code class="language-plaintext highlighter-rouge">config.search_user_info</code> is enabled</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.upstream_headers_claims</code> and
<code class="language-plaintext highlighter-rouge">config.downstream_headers_claims</code> are now searched from introspection
results, jwt access token and id token, and user info when
<code class="language-plaintext highlighter-rouge">config.search_user_info</code> is enabled</li>
      <li>Change <code class="language-plaintext highlighter-rouge">id_token</code> is not anymore copied over when refreshing tokens to
prevent further claims verification errors. The token endpoint can return a
new id token, or user info can be used instead.</li>
      <li>Change hide <code class="language-plaintext highlighter-rouge">secret</code> from admin api</li>
      <li>Change <code class="language-plaintext highlighter-rouge">config.issuer</code> to semi-optional (you still need to specify it but
code won’t error if http request to issuer fails)</li>
      <li>Change more reentrant migrations</li>
      <li>Change issuer to be optional</li>
      <li>Change signature verification to look suitable key by algorithm as well
in case where key identifier is missing or cannot be found</li>
      <li>Remove developer status/type check from plugin</li>
      <li>Remove <code class="language-plaintext highlighter-rouge">daos</code> that were never used</li>
      <li>Remove all the sub-plugins (openid-connect-verification,
openid-connect-authentication, and openid-connect-protection)</li>
      <li>Fix issue with Kong OAuth 2.0 and OpenID Connect sharing incompatible
values with same cache key</li>
    </ul>
  </li>
  <li><strong>Forward Proxy</strong>:
    <ul>
      <li>Fix an issue preventing the plugin from working with requests using
chunked TE</li>
    </ul>
  </li>
  <li><strong>LDAP Auth Advanced</strong>:
    <ul>
      <li>Added LDAPS protocol support</li>
      <li>Added tests for multiple connection strategies</li>
      <li>Fixed an issue where plugin tries to start a secure connection on an
existing pooled connection from previous requests</li>
    </ul>
  </li>
  <li><strong>StatsD Advanced</strong>
    <ul>
      <li>Added filter by status code functionality for responses to be logged.
Admins can add status code ranges for responses which want to be logged and
sent to StatsD server. If Admin doesn’t provide any status code, all
responses will be logged.
        <h4 id="security">Security</h4>
      </li>
    </ul>
  </li>
  <li>Set security headers in <strong>Kong Manager</strong> and <strong>Dev Portal</strong></li>
  <li>Guard against frame misuse in <strong>Kong Manager</strong> and <strong>Dev Portal</strong></li>
</ul>

<h3 id="fixes-66">Fixes</h3>

<h4 id="kong-manager-27">Kong Manager</h4>
<ul>
  <li>Clear option for turning off New Relic data collection</li>
  <li>Keyword search bug fixed in <strong>Kong Manager</strong></li>
  <li>Info tab of <strong>Kong Manager</strong> no longer empty (shows license information)</li>
  <li>Custom <strong>Plugins</strong> viewable within plugin groupings</li>
  <li>Error messages on <strong>Workspace</strong> form don’t remain longer than intended</li>
  <li>Column overflow issue in services table in <strong>Kong Manager</strong> fixed</li>
  <li>New <strong>Routes</strong> were accidentally accepting strings for <code class="language-plaintext highlighter-rouge">regex_priority</code> when
submitting a new <strong>Routes</strong>, fixed as part of <strong>Kong 1.0</strong> merge</li>
  <li>Fixes CORS breaking when configuring <code class="language-plaintext highlighter-rouge">KONG_ADMIN_API_URI</code> with a port.</li>
  <li>Fixes issue in <strong>Kong Manager</strong> where <strong>Dev Portal</strong> pages would display
the wrong content when disabled from <code class="language-plaintext highlighter-rouge">kong.conf</code>.</li>
  <li>Fixes issue in <strong>Kong Manager</strong> where email validation would accept invalid
inputs.</li>
</ul>

<h4 id="dev-portal-7">Dev Portal</h4>
<ul>
  <li>Fixes issue in <strong>Dev Portal</strong> where email validation would accept invalid
inputs.</li>
  <li>Fixes <strong>Dev Portal</strong> “Forgot Email” template URL pointing to the wrong location.</li>
  <li>Fixes CORS error shown when loading content if <strong>Dev Portal</strong> is improperly
configured.</li>
  <li>Fixes default spec renderer improperly rendering request bodies.</li>
  <li>Fixes issues in the portal theme preventing loading in Internet Explorer</li>
  <li>Fixes long titles overflowing and stretching the sidebar in the default
portal theme.</li>
  <li>Fixes sidebar drop-down arrow not rotating in default portal theme.</li>
  <li>Fixes sidebar overlapping main body content in default portal theme.</li>
  <li>Fixes main body content overflowing container in default portal theme.</li>
  <li>Fixes issue in the default portal theme where transitioning from the mobile
to full-screen would retain the sidebar overlay.</li>
  <li>Fixes issue in the default portal theme where links on documentation would
not navigate due to spaces.</li>
  <li>Fixes issue in the default portal theme where on logout a user would be
redirected to the default workspace portal.</li>
  <li>Fixes issue in the portal theme sync script where environment flags were not
properly evaluated as booleans.</li>
  <li>Fixes issue in the portal theme sync script where relative links would add
the theme name to files inserted on a workspace.</li>
</ul>
<hr />

<h2 id="034-1">0.34-1</h2>
<p><strong>Release Date:</strong> 2018/12/19</p>

<h3 id="notifications-7">Notifications</h3>
<ul>
  <li><strong>Kong EE 0.34</strong> inherits from <strong>Kong CE 0.13.1</strong>; make sure to read 0.13.1 - and 0.13.0 - changelogs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">0.13.0 Changelog</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0131---20180423">0.13.1 Changelog</a></li>
    </ul>
  </li>
  <li><strong>Kong EE 0.34</strong> has these notices from <strong>Kong CE 0.13</strong>:
    <ul>
      <li>Support for <strong>Postgres 9.4 has been removed</strong> - starting with 0.32, Kong Enterprise does not start with Postgres 9.4 or prior</li>
      <li>Support for <strong>Cassandra 2.1 has been deprecated, but Kong will still start</strong> - versions beyond 0.33 will not start with Cassandra 2.1 or prior
        <ul>
          <li><strong>Dev Portal</strong> requires Cassandra 3.0+</li>
        </ul>
      </li>
      <li><strong>Galileo - DEPRECATED</strong>: Galileo plugin is deprecated and will reach EOL soon</li>
    </ul>
  </li>
</ul>

<h3 id="changes-5">Changes</h3>
<ul>
  <li><strong>Kong Manager</strong>
    <ul>
      <li>Email addresses are stored in lower-case. These addresses must be case-insensitively unique. In previous versions, you could store mixed case email addresses. A migration for Postgres converts all existing email addresses to lower case. Cassandra users should review the email address of their admins and developers and update them to lower-case if necessary. Use the Kong Manager or the Admin API to make these updates.</li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>Forward Proxy</strong>
        <ul>
          <li>Do not do a DNS request to the original upstream that would be discarded anyway as proxy will manage the resolving of the configured host.</li>
        </ul>
      </li>
      <li><strong>OpenID Connect</strong>
        <ul>
          <li>Remove obsolete daos (adds migration)</li>
          <li>Hide secret from Admin API (used with sessions)</li>
          <li>Bump lua-resty-session to 2.23</li>
          <li>Change token verification to check token types when requested</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="features-25">Features</h3>
<ul>
  <li><strong>Dev Portal</strong>
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-portal-templates">kong_portal_templates</a> repository:
        <ul>
          <li>A public repository containing dev portal themes, examples, and dev tools for working with the Dev Portal template files.</li>
        </ul>
      </li>
      <li>sync.js:
        <ul>
          <li>Script which allows dev portal developers to <code class="language-plaintext highlighter-rouge">push</code>, <code class="language-plaintext highlighter-rouge">pull</code>, and <code class="language-plaintext highlighter-rouge">watch</code> the most up to date template files to and from kong to their local machine.</li>
        </ul>
      </li>
      <li>default portal theme:
        <ul>
          <li>Directory containing the most up to date version of the default portal template files that ship with Kong EE each release.</li>
        </ul>
      </li>
      <li>Bugfixes, updates, and template features will be pushed here regularly and independently of the EE release cycle.</li>
      <li>Dev Portal now caches static JS assets</li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>OpenID Connect</strong>
        <ul>
          <li>add <code class="language-plaintext highlighter-rouge">config.http_proxy_authorization</code> (note: this is not yet in upstream lua-resty-http)</li>
          <li>add <code class="language-plaintext highlighter-rouge">config.https_proxy_authorization</code> (note: this is not yet in upstream lua-resty-http)</li>
          <li>add <code class="language-plaintext highlighter-rouge">config.no_proxy</code></li>
          <li>add <code class="language-plaintext highlighter-rouge">config.logout_revoke_access_token</code></li>
          <li>add <code class="language-plaintext highlighter-rouge">config.logout_revoke_refresh_token</code></li>
          <li>add <code class="language-plaintext highlighter-rouge">config.refresh_token_param_name</code></li>
          <li>add <code class="language-plaintext highlighter-rouge">config.refresh_token_param_type</code></li>
          <li>add <code class="language-plaintext highlighter-rouge">config.refresh_tokens</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>CORE</strong>
    <ul>
      <li><strong>License</strong>
        <ul>
          <li>Added an increasingly “loud” logging to notify via nginx logs as the expiration date approaches.
            <ul>
              <li>90 days before the expiration date: Daily WARN log</li>
              <li>30 days before the expiration date: Daily ERR log</li>
              <li>After the expiration date: Daily CRIT log</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>DB</strong>
        <ul>
          <li><strong>Cassandra</strong>
            <ul>
              <li>Support request-aware load-balancing policies in conf &amp;
DAOs. <code class="language-plaintext highlighter-rouge">cassandra_lb_policy</code> now supports two new
policies RequestRoundRobin and RequestDCAwareRoundRobin.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="fixes-67">Fixes</h3>
<ul>
  <li><strong>Admin API</strong>
    <ul>
      <li>Prevent creating or modifying developers and admins through the
/consumers endpoints</li>
      <li>Prevent creating or modifying consumers through the /admins
endpoints</li>
      <li>Fix error on /admins when trying to create an admin with the
same name as an existing RBAC user</li>
      <li>Roll back if a POST to /admins fails</li>
    </ul>
  </li>
  <li><strong>Dev Portal</strong>
    <ul>
      <li>KONG_PORTAL_AUTH_CONF param values can now handle escaped
characters such as #</li>
      <li>ACL plugin credential management no longer accessible from Dev
Portal client</li>
      <li>“Return to login” CTA on the password-reset page now redirects
to appropriate workspace</li>
      <li>Improved support for OAS 3 specifications</li>
      <li>General SwaggerUI improvements</li>
      <li>Developer approval email will only send once (on first
approval).  A developer will not receive an additional email if
they are revoked and re-approved.</li>
    </ul>
  </li>
  <li><strong>Kong Manager</strong>
    <ul>
      <li>When creating a new workspace, always create roles for that workspace</li>
      <li>List workspace roles in alphabetical order</li>
      <li>Provide a button on the Admin show page to generate a registration URL</li>
      <li>Fix misleading error message when adding an existing user to a
new workspace</li>
      <li>Add validation of image type when creating a workspace with an avatar</li>
      <li>Add configuration fields and icon for the JWT signer plugin</li>
      <li>Clean up console errors due to lack of permissions</li>
      <li>Make the UTC button on Vitals charts work in Firefox</li>
      <li>Change the display order of plugins to match the Plugin Hub</li>
    </ul>
  </li>
  <li><strong>CORE</strong>
    <ul>
      <li><strong>Workspaces</strong>
        <ul>
          <li>When removing an entity from a workspace, delete the entity
itself if it only belongs to that workspace.</li>
          <li>Developers nor admins do not affect consumer counters in
workspaces. Only proxy consumers do.</li>
        </ul>
      </li>
      <li><strong>DB</strong>
        <ul>
          <li><strong>Cassandra</strong>
            <ul>
              <li>Fix an issue where Insert operation fails to return an entity as not all Cassandra nodes are synced yet while reading the data.</li>
              <li>Now Kong will make one try to fetch the inserted row before throwing error. (Fix: https://support.konghq.com/hc/en-us/requests/6217 )</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>Rate-limiting</strong>
        <ul>
          <li>Use database-based redis connection pool to reduce unnecessary select call</li>
        </ul>
      </li>
      <li><strong>Response-ratelimiting</strong>
        <ul>
          <li>Use database-based redis connection pool to reduce unnecessary select call</li>
        </ul>
      </li>
      <li><strong>OpenID Connect</strong>
        <ul>
          <li>Fix schema <code class="language-plaintext highlighter-rouge">self_check</code> to verify issuer only when given (e.g. when using <code class="language-plaintext highlighter-rouge">PATCH</code> to update configuration)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<hr />

<h2 id="034">0.34</h2>
<p><strong>Release Date:</strong> 2018/11/17</p>

<h3 id="notifications-8">Notifications</h3>
<ul>
  <li><strong>Kong EE 0.34</strong> inherits from <strong>Kong CE 0.13.1</strong>; make sure to read 0.13.1 - and 0.13.0 - changelogs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">0.13.0 Changelog</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0131---20180423">0.13.1 Changelog</a></li>
    </ul>
  </li>
  <li><strong>Kong EE 0.34</strong> has these notices from <strong>Kong CE 0.13</strong>:
    <ul>
      <li>Support for <strong>Postgres 9.4 has been removed</strong> - starting with 0.32, Kong Enterprise does not start with Postgres 9.4 or prior</li>
      <li>Support for <strong>Cassandra 2.1 has been deprecated, but Kong will still start</strong> - versions beyond 0.33 will not start with Cassandra 2.1 or prior
        <ul>
          <li><strong>Dev Portal</strong> requires Cassandra 3.0+</li>
        </ul>
      </li>
      <li><strong>Galileo - DEPRECATED</strong>: Galileo plugin is deprecated and will reach EOL soon</li>
    </ul>
  </li>
  <li><strong>Kong Manager</strong>
    <ul>
      <li>The name of the <code class="language-plaintext highlighter-rouge">Admin GUI</code> has changed to <code class="language-plaintext highlighter-rouge">Kong Manager</code></li>
    </ul>
  </li>
  <li><strong>Licensing</strong>
    <ul>
      <li>License expiration logs: Kong will start logging the license expiration date once a day - with a <code class="language-plaintext highlighter-rouge">WARN</code> log - 90 days before the expiry; 30 days before, the log severity increases to <code class="language-plaintext highlighter-rouge">ERR</code> and, after expiration, to <code class="language-plaintext highlighter-rouge">CRIT</code></li>
    </ul>
  </li>
</ul>

<h3 id="changes-6">Changes</h3>
<ul>
  <li><strong>Admin API</strong>
    <ul>
      <li>The system-generated <code class="language-plaintext highlighter-rouge">default</code> role for an RBAC user is no longer accessible via the Admin API</li>
      <li>Auto-config OAPI endpoint available for Admin API (configure services &amp; routes via Swagger)</li>
    </ul>
  </li>
  <li><strong>Workspaces</strong>
    <ul>
      <li>Workspaces on Workspaces has been disabled, meaning that workspaces do not apply on <code class="language-plaintext highlighter-rouge">/workspaces/</code> endpoints</li>
      <li>Renaming workspaces is no longer allowed</li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li>Now enabled by default when starting Kong for the first time</li>
    </ul>
  </li>
  <li><strong>Dev Portal</strong>
    <ul>
      <li><strong>Breaking change</strong> - change of config options</li>
      <li><code class="language-plaintext highlighter-rouge">portal_gui_url</code> is removed, and <code class="language-plaintext highlighter-rouge">protocol</code>, <code class="language-plaintext highlighter-rouge">host</code>, and <code class="language-plaintext highlighter-rouge">portal_gui_use_subdomains</code> added</li>
      <li><code class="language-plaintext highlighter-rouge">protocol</code> and <code class="language-plaintext highlighter-rouge">host</code> replace <code class="language-plaintext highlighter-rouge">portal_gui_url</code></li>
      <li><code class="language-plaintext highlighter-rouge">portal_gui_use_subdomains</code> avoids conflicts if base path name matches workspace name</li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>Prometheus</strong>
        <ul>
          <li><strong>Warning</strong> - Dropped metrics that were aggregated across services in Kong. These metrics can be obtained much more efficiently using queries in Prometheus.</li>
        </ul>
      </li>
      <li><strong>Zipkin</strong>
        <ul>
          <li>Add kong.node.id tag</li>
        </ul>
      </li>
      <li><strong>Proxy Cache</strong>
        <ul>
          <li>Add <code class="language-plaintext highlighter-rouge">application/json</code> to config <code class="language-plaintext highlighter-rouge">content-type</code></li>
        </ul>
      </li>
      <li><strong>All logging plugins</strong>
        <ul>
          <li>Workspace of the request is logged</li>
        </ul>
      </li>
      <li><strong>StatsD Advanced</strong>
        <ul>
          <li>Add workspace support with new metrics <code class="language-plaintext highlighter-rouge">status_count_per_workspace</code></li>
        </ul>
      </li>
      <li><strong>OpenID Connect</strong>
        <ul>
          <li>NOTE - If using an older version of the OpenID Connect plugin, with sub-plugins, Kong will not start after upgrading to 0.34. Sub-plugins are now disabled by default will be removed completely in subsequent releases. To make sure Kong starts, enable OIDC sub-plugins manually, with the custom_plugins configuration directive - or through the <code class="language-plaintext highlighter-rouge">KONG_CUSTOM_PLUGINS</code> environment variable; for example:</li>
        </ul>

        <p>Set the following in the kong.conf file:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>custom_plugins=openid-connect-verification,openid-connect-authentication,openid-connect-protection
</code></pre></div>        </div>
        <p>Or the following environment variable:</p>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>KONG_CUSTOM_PLUGINS=openid-connect-verification,openid-connect-authentication,openid-connect-protection
</code></pre></div>        </div>
        <p>The all-in-one version of OIDC is enabled by default (and is not deprecated).</p>

        <ul>
          <li>Always log the original error message when authorization code flow verification fails</li>
          <li>Optimize usage of ngx.ctx by loading it once and then passing it to functions</li>
          <li><strong>Breaking change</strong> - Change config.ssl_verify default to false.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="features-26">Features</h3>

<ul>
  <li><strong>Dev Portal</strong>
    <ul>
      <li>Filterable API list</li>
      <li>Improved portal management in Kong Manager
        <ul>
          <li>Overview page with quick links to portal, create pages</li>
          <li>Split out pages, specs, partials for ease of navigation</li>
        </ul>
      </li>
      <li>SMTP support and admin/access request workflow improvements</li>
      <li>Global search</li>
      <li>Option for one dev portal per workspace, and option to enable within Kong Manager</li>
      <li>Improved OAS 3.0 support</li>
      <li>Markdown support</li>
    </ul>
  </li>
  <li><strong>Kong Manager</strong>
    <ul>
      <li>Workspaces are now configurable in Kong Manager
        <ul>
          <li>Creation, management of workspaces for super admin</li>
          <li>RBAC assignment globally for super admin</li>
          <li>Vitals is workspace-aware</li>
        </ul>
      </li>
      <li>Support for inviting additional users</li>
      <li>Self-service credential management</li>
      <li>General UI cleanup (tables, modals, forms, notifications)</li>
      <li>New menu/navigation system</li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li>Functionality to support storing Vitals data in Prometheus (via the StatsD Advanced plugin)</li>
      <li>InfluxDB support for Vitals</li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li>HTTPS support for <strong>Forward Proxy plugin</strong></li>
      <li><strong>Route by header</strong> added to the package - docs can be found <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/route-by-header/">here</a></li>
      <li><strong>JWT Signer</strong> added to the package - docs can be found <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/hub/kong-inc/jwt-signer/">here</a></li>
      <li><strong>OpenID Connect</strong>
        <ul>
          <li>Add <code class="language-plaintext highlighter-rouge">config.unauthorized_error_message</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.forbidden_error_message</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.http_proxy</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.https_proxy</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.keepalive</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.authenticated_groups_claim</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.rediscovery_lifetime</code></li>
          <li>Add support for <code class="language-plaintext highlighter-rouge">X-Forwarded-*</code> headers in automatic <code class="language-plaintext highlighter-rouge">config.redirect_uri</code> generation</li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.session_cookie_path</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.session_cookie_domain</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.session_cookie_samesite</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.session_cookie_httponly</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.session_cookie_secure</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.authorization_cookie_path</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.authorization_cookie_domain</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.authorization_cookie_samesite</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.authorization_cookie_httponly</code></li>
          <li>Add <code class="language-plaintext highlighter-rouge">config.authorization_cookie_secure</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>CORE</strong>
    <ul>
      <li>Admin API and DAO Audit Log</li>
      <li><strong>Healthchecks</strong>
        <ul>
          <li>HTTPS support</li>
        </ul>
      </li>
      <li><strong>License</strong>
        <ul>
          <li>Added an increasingly <code class="language-plaintext highlighter-rouge">loud</code> logging to notify via nginx logs as the expiration date approaches
            <ul>
              <li>90 days before the expiration date: Daily <code class="language-plaintext highlighter-rouge">WARN</code> log</li>
              <li>30 days before the expiration date: Daily <code class="language-plaintext highlighter-rouge">ERR</code> log</li>
              <li>After the expiration date: Daily <code class="language-plaintext highlighter-rouge">CRIT</code> log</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Workspaces</strong>
    <ul>
      <li>Added endpoint <code class="language-plaintext highlighter-rouge">/workspaces/:ws_id/meta</code> that provides info about workspace <code class="language-plaintext highlighter-rouge">ws_id</code>. Current counts of entities per entity type are returned</li>
    </ul>
  </li>
</ul>

<h3 id="fixes-68">Fixes</h3>
<ul>
  <li><strong>CORE</strong>
    <ul>
      <li><strong>Plugin runloop</strong>
        <ul>
          <li>Fix issue where Log phase plugins are not executed for request with non-matching routes.
Note: For request with non-matching routes, every logging phase plugin enabled in the cluster will run irrespective of the workspace where it’s configured</li>
        </ul>
      </li>
      <li><strong>Workspaces</strong>
        <ul>
          <li>Logging plugins log workspace info about requests</li>
          <li>Fix issue where attempt to share an entity outside the current request’s workspace would result in an Internal Server Error</li>
          <li>Fix issue where a global plugin would be executed for a workspace where it doesn’t belong</li>
        </ul>
      </li>
      <li><strong>RBAC</strong>
        <ul>
          <li>Fix issue where admin could grant privileges to workspaces on which they don’t have permissions</li>
          <li>Permissions created with the <code class="language-plaintext highlighter-rouge">/rbac/roles/:role/endpoints</code> endpoint receive the current request’s workspace instead of the default workspace</li>
          <li>Return HTTP status code 500 for database errors instead of 401 and 404</li>
          <li>Fix issue where a user with Admin privilege was able to access RBAC admin endpoints</li>
        </ul>
      </li>
      <li><strong>DAO</strong>
        <ul>
          <li>Allow self-signed certificates in Cassandra connections</li>
          <li>check for schema consensus in Cassandra migration</li>
          <li>Ensure ScyllaDB compatibility in Cassandra migraton</li>
        </ul>
      </li>
      <li><strong>Config</strong>
        <ul>
          <li>IPv6 addresses in listen configuration directives are correctly parsed</li>
        </ul>
      </li>
      <li><strong>Certificates &amp; SNIs</strong>
        <ul>
          <li>Fix issue where internal server error was returned when CRUD operations were performed on Certificate endpoint</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>Request Termination</strong>
        <ul>
          <li>Allow user to unset the value of <code class="language-plaintext highlighter-rouge">config.body</code> or <code class="language-plaintext highlighter-rouge">config.message</code> or both</li>
        </ul>
      </li>
      <li><strong>Zipkin</strong>
        <ul>
          <li>Fix failures when request is invalid or exits early</li>
          <li>Fix issue when service name is missing</li>
        </ul>
      </li>
      <li><strong>Proxy Cache</strong>
        <ul>
          <li>Fix issue where responses were not cached if they met at least one positive criteria and did not meet any negative criteria</li>
          <li>Allow caching of responses without an explicit <code class="language-plaintext highlighter-rouge">public</code> directive in the <code class="language-plaintext highlighter-rouge">Cache-Control</code> header</li>
        </ul>
      </li>
      <li><strong>HMAC Authentication</strong>
        <ul>
          <li>Fix issue where request was not correctly validated against the digest header when <code class="language-plaintext highlighter-rouge">config.validate_request_body</code> was set and request had no body</li>
        </ul>
      </li>
      <li><strong>OpenID Connect</strong>
        <ul>
          <li>Fix <code class="language-plaintext highlighter-rouge">cache.tokens_load</code> ttl fallback to access token exp in case when expires_in is missing</li>
          <li>Fix headers to not set when header value is <code class="language-plaintext highlighter-rouge">ngx.null</code> (a bit more robust now)</li>
          <li>Fix encoding of complex upstream and downstream headers</li>
          <li>Fix multiple authentication plugins AND / OR scenarios</li>
          <li>Fix expiry leeway counting when there is refresh token available and when there is not.</li>
          <li>Fix issue when using password grant or client credentials grant with token caching enabled, and rotating keys on IdP that caused the cached tokens to give 403. The cached tokens will now be flushed and new tokens will be retrieved from the IdP.</li>
          <li>Fix a bug that prevented sub-plugins from loading the issuer data.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<hr />

<h2 id="033-2">0.33-2</h2>
<p><strong>Release Date:</strong> 2018/10/09</p>

<h3 id="notifications-9">Notifications</h3>

<ul>
  <li><strong>Kong EE 0.33</strong> inherits from <strong>Kong CE 0.13.1</strong>; make sure to read 0.13.1 - and 0.13.0 - changelogs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">0.13.0 Changelog</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0131---20180423">0.13.1 Changelog</a></li>
    </ul>
  </li>
  <li><strong>Kong EE 0.33</strong> has these notices from <strong>Kong CE 0.13</strong>:
    <ul>
      <li>Support for <strong>Postgres 9.4 has been removed</strong> - starting with 0.32, Kong Enterprise does not start with Postgres 9.4 or prior</li>
      <li>Support for <strong>Cassandra 2.1 has been deprecated, but Kong will still start</strong> - versions beyond 0.33 will not start with Cassandra 2.1 or prior
        <ul>
          <li><strong>Dev Portal</strong> requires Cassandra 3.0+</li>
        </ul>
      </li>
      <li><strong>Galileo - DEPRECATED</strong>: Galileo plugin is deprecated and will reach EOL soon</li>
    </ul>
  </li>
  <li><strong>Breaking</strong>: Since 0.32, the <code class="language-plaintext highlighter-rouge">latest</code> tag in Kong Enterprise Docker repository <strong>changed from CentOS to Alpine</strong> - which might result in breakage if additional packages are assumed to be in the image pointed to by <code class="language-plaintext highlighter-rouge">latest</code>, as the Alpine image only contains a minimal set of packages installed by default</li>
</ul>

<h3 id="fixes-69">Fixes</h3>

<ul>
  <li><strong>Core</strong>
    <ul>
      <li><strong>DB</strong>
        <ul>
          <li><a rel="nofollow noopener noreferrer" href="https://github.com/thibaultcha/lua-cassandra/blob/master/CHANGELOG.md#132">lua-cassandra</a> version bumped to 1.3.2
            <ul>
              <li>Fix an issue encountered in environments with DNS load-balancing in effect for contact_points provided as hostnames (e.g.Kubernetes with <code class="language-plaintext highlighter-rouge">contact_points = { "cassandra" }</code>).</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>Plugin Runloop</strong>
        <ul>
          <li>Plugin runloop performance optimizations
            <ul>
              <li>Reduce the number of invocations of the plugins iterator by attempting to load configurations only for plugins we know are configured on the cluster</li>
              <li>Pre-calculate plugins cache key</li>
              <li>Avoid unnecessary L2 cache deserialization</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>Balancer</strong>
        <ul>
          <li>Fix issue where Upstream for different workspace getting cached to same key</li>
          <li>Fix an issue where Balancer are not run into limited workspace scope</li>
        </ul>
      </li>
      <li><strong>Dev Portal</strong>
        <ul>
          <li>Fix an issue which may expose information on the URL query string</li>
          <li><strong>Breaking</strong>: If you are updating from a previous version (not a clean install), you will need to update the files below in order to take advantage of security and performance updates.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>unauthenticated/login (page)</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{{#&gt; unauthenticated/layout pageTitle="Login" }}

  {{#*inline "content-block"}}

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"authentication"</span><span class="nt">&gt;</span>
    {{#unless authData.authType}}
        <span class="nt">&lt;h1&gt;</span>404 - Not Found<span class="nt">&lt;/h1&gt;</span>
    {{/unless}}
    {{#if authData.authType}}
      <span class="nt">&lt;h1&gt;</span>Login<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"login"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        {{#if (eq authData.authType 'basic-auth')}}
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"username"</span><span class="nt">&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"password"</span><span class="nt">&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"login-button"</span> <span class="na">class=</span><span class="s">"button button-primary"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
        {{/if}}
        {{#if (eq authData.authType 'key-auth')}}
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"key"</span><span class="nt">&gt;</span>Api Key<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"key"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"key"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"login-button"</span> <span class="na">class=</span><span class="s">"button button-primary"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
        {{/if}}

        {{#if (eq authData.authType 'openid-connect')}}
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{config.PROXY_URL}}"</span> <span class="na">class=</span><span class="s">"button button-outline"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;svg</span> <span class="na">class=</span><span class="s">"google-button-icon"</span> <span class="na">viewBox=</span><span class="s">"0 0 366 372"</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span><span class="nt">&gt;&lt;path</span> <span class="na">d=</span><span class="s">"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z"</span> <span class="na">id=</span><span class="s">"Shape"</span> <span class="na">fill=</span><span class="s">"#EA4335"</span><span class="nt">/&gt;&lt;path</span> <span class="na">d=</span><span class="s">"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z"</span> <span class="na">id=</span><span class="s">"Shape"</span> <span class="na">fill=</span><span class="s">"#FBBC05"</span><span class="nt">/&gt;&lt;path</span> <span class="na">d=</span><span class="s">"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z"</span> <span class="na">id=</span><span class="s">"Shape"</span> <span class="na">fill=</span><span class="s">"#4285F4"</span><span class="nt">/&gt;&lt;path</span> <span class="na">d=</span><span class="s">"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z"</span> <span class="na">fill=</span><span class="s">"#34A853"</span><span class="nt">/&gt;&lt;/svg&gt;</span>
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"google-button-text"</span><span class="nt">&gt;</span>Sign in with Google<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
        {{/if}}
      <span class="nt">&lt;/form&gt;</span>
    {{/if}}
  <span class="nt">&lt;/div&gt;</span>

  {{/inline}}

{{/unauthenticated/layout}}
</code></pre></div></div>

<p><strong>unauthenticated/register (page)</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{{#&gt; unauthenticated/layout pageTitle="Register" }}

    {{#*inline "content-block"}}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"authentication"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>Request Access<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert alert-info"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;b&gt;</span>Please fill out the below form and we will notify you once your request gets approved.<span class="nt">&lt;/b&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"register"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"full_name"</span><span class="nt">&gt;</span>Full Name<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"full_name"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"full_name"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
        {{#if (eq authData.authType 'basic-auth')}}
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"email_basic"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"password"</span><span class="nt">&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"password_basic"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
        {{/if}}
        {{#if (eq authData.authType 'key-auth')}}
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"email_key"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"key"</span><span class="nt">&gt;</span>Api Key<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"key"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"key"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
        {{/if}}
        {{#if (eq authData.authType 'openid-connect')}}
          <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
          <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"email-oidc"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
        {{/if}}
        <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"button button-primary"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Sign Up<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    {{/inline}}

{{/unauthenticated/layout}}
</code></pre></div></div>

<p><strong>unauthenticated/custom-css (partial)</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{{!--
    |--------------------------------------------------------------------------
    | Here's where the magic happens. This is where you can add your own
    | custom CSS as well as override any default styling we've provided.
    | This file is broken up by section, but feel free to organize as you
    | see fit!
    |
    | Helpful articles on customizing your Developer Portal:
    |   - https://getkong.org/docs/enterprise/latest/developer-portal/introduction/
    |   - https://getkong.org/docs/enterprise/latest/developer-portal/getting-started/
    |   - https://getkong.org/docs/enterprise/latest/developer-portal/understand/
    |   - https://getkong.org/docs/enterprise/latest/developer-portal/customization/
    |   - https://getkong.org/docs/enterprise/latest/developer-portal/authentication/
    |   - https://getkong.org/docs/enterprise/latest/developer-portal/faq/
    |
    |--------------------------------------------------------------------------
    |
    --}}

    {{!-- Custom fonts --}}
    {{!-- <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com/css?family=Roboto"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span> --}}

    <span class="nt">&lt;style&gt;</span>
    <span class="c">/*
    |--------------------------------------------------------------------------
    | Typography:
    | h1, h2, h3, h4, h5, h6, p
    |--------------------------------------------------------------------------
    |
    */</span>

    <span class="nt">h1</span> <span class="p">{}</span>

    <span class="nt">h2</span> <span class="p">{}</span>

    <span class="nt">h3</span> <span class="p">{}</span>

    <span class="nt">h4</span> <span class="p">{}</span>

    <span class="nt">h5</span> <span class="p">{}</span>

    <span class="nt">h6</span> <span class="p">{}</span>

    <span class="nt">p</span> <span class="p">{}</span>

    <span class="c">/* Header */</span>
    <span class="nf">#header</span> <span class="p">{}</span>

    <span class="c">/* Sidebar */</span>
    <span class="nf">#sidebar</span> <span class="p">{}</span>

    <span class="c">/* Footer */</span>
    <span class="nf">#footer</span> <span class="p">{}</span>

    <span class="c">/* Swagger UI */</span>
    <span class="nc">.swagger-ui</span> <span class="nc">.side-panel</span> <span class="p">{}</span>

    <span class="c">/*
    |--------------------------------------------------------------------------
    | Code block prismjs theme.
    | e.g. https://github.com/PrismJS/prism-themes
    |--------------------------------------------------------------------------
    |
    */</span>

    <span class="nc">.token.block-comment</span><span class="o">,</span>
    <span class="nc">.token.cdata</span><span class="o">,</span>
    <span class="nc">.token.comment</span><span class="o">,</span>
    <span class="nc">.token.doctype</span><span class="o">,</span>
    <span class="nc">.token.prolog</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#999</span>
    <span class="p">}</span>

    <span class="nc">.token.punctuation</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#ccc</span>
    <span class="p">}</span>

    <span class="nc">.token.attr-name</span><span class="o">,</span>
    <span class="nc">.token.deleted</span><span class="o">,</span>
    <span class="nc">.token.namespace</span><span class="o">,</span>
    <span class="nc">.token.tag</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#e2777a</span>
    <span class="p">}</span>

    <span class="nc">.token.function-name</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#6196cc</span>
    <span class="p">}</span>

    <span class="nc">.token.boolean</span><span class="o">,</span>
    <span class="nc">.token.function</span><span class="o">,</span>
    <span class="nc">.token.number</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#f08d49</span>
    <span class="p">}</span>

    <span class="nc">.token.class-name</span><span class="o">,</span>
    <span class="nc">.token.constant</span><span class="o">,</span>
    <span class="nc">.token.property</span><span class="o">,</span>
    <span class="nc">.token.symbol</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#f8c555</span>
    <span class="p">}</span>

    <span class="nc">.token.atrule</span><span class="o">,</span>
    <span class="nc">.token.builtin</span><span class="o">,</span>
    <span class="nc">.token.important</span><span class="o">,</span>
    <span class="nc">.token.keyword</span><span class="o">,</span>
    <span class="nc">.token.selector</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#cc99cd</span>
    <span class="p">}</span>

    <span class="nc">.token.attr-value</span><span class="o">,</span>
    <span class="nc">.token.char</span><span class="o">,</span>
    <span class="nc">.token.regex</span><span class="o">,</span>
    <span class="nc">.token.string</span><span class="o">,</span>
    <span class="nc">.token.variable</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#7ec699</span>
    <span class="p">}</span>

    <span class="nc">.token.entity</span><span class="o">,</span>
    <span class="nc">.token.operator</span><span class="o">,</span>
    <span class="nc">.token.url</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="m">#67cdcc</span>
    <span class="p">}</span>

    <span class="nc">.token.bold</span><span class="o">,</span>
    <span class="nc">.token.important</span> <span class="p">{</span>
      <span class="nl">font-weight</span><span class="p">:</span> <span class="m">700</span>
    <span class="p">}</span>

    <span class="nc">.token.italic</span> <span class="p">{</span>
      <span class="nl">font-style</span><span class="p">:</span> <span class="nb">italic</span>
    <span class="p">}</span>

    <span class="nc">.token.entity</span> <span class="p">{</span>
      <span class="nl">cursor</span><span class="p">:</span> <span class="nb">help</span>
    <span class="p">}</span>

    <span class="nc">.token.inserted</span> <span class="p">{</span>
      <span class="nl">color</span><span class="p">:</span> <span class="no">green</span>
    <span class="p">}</span>

<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<ul>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>LDAP Auth Advanced</strong>
        <ul>
          <li>Fix an issue where the plugin fails to authenticate a user when the LDAP server doesn’t return the user’s password as part of the search result</li>
          <li>Fix issue where the username field wasn’t allowed to contain non-alaphanumeric characters</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<hr />

<h2 id="033-1">0.33-1</h2>
<p><strong>Release Date:</strong> 2018/09/05</p>

<h3 id="notifications-10">Notifications</h3>

<ul>
  <li><strong>Kong EE 0.33</strong> inherits from <strong>Kong CE 0.13.1</strong>; make sure to read 0.13.1 - and 0.13.0 - changelogs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">0.13.0 Changelog</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0131---20180423">0.13.1 Changelog</a></li>
    </ul>
  </li>
  <li><strong>Kong EE 0.33</strong> has these notices from <strong>Kong CE 0.13</strong>:
    <ul>
      <li>Support for <strong>Postgres 9.4 has been removed</strong> - starting with 0.32, Kong Enterprise does not start with Postgres 9.4 or prior</li>
      <li>Support for <strong>Cassandra 2.1 has been deprecated, but Kong will still start</strong> - versions beyond 0.33 will not start with Cassandra 2.1 or prior
        <ul>
          <li><strong>Dev Portal</strong> requires Cassandra 3.0+</li>
        </ul>
      </li>
      <li><strong>Galileo - DEPRECATED</strong>: Galileo plugin is deprecated and will reach EOL soon</li>
    </ul>
  </li>
  <li><strong>Breaking</strong>: Since 0.32, the <code class="language-plaintext highlighter-rouge">latest</code> tag in Kong Enterprise Docker repository <strong>changed from CentOS to Alpine</strong> - which might result in breakage if additional packages are assumed to be in the image pointed to by <code class="language-plaintext highlighter-rouge">latest</code>, as the Alpine image only contains a minimal set of packages installed by default</li>
</ul>

<h3 id="changes-7">Changes</h3>

<ul>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>HMAC Auth</strong>
        <ul>
          <li>Attempt signature generation without querystring arguments if the newer signature verification, that includes querystring, fails</li>
        </ul>
      </li>
      <li><strong>StatsD Advanced</strong>
        <ul>
          <li>Improve performance when constructing the metrics key</li>
          <li>Allow hostname to be written into the key prefix, based on a boolean plugin config flag</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="fixes-70">Fixes</h3>

<ul>
  <li><strong>Core</strong>
    <ul>
      <li><strong>RBAC</strong>
        <ul>
          <li>Fix an issue where entities are not added to the role-entities table when id is not the primary key</li>
          <li>Fix an issue where role-entities and role-endpoints relationships are not deleted when role is removed</li>
          <li>Fix issue leading to SNI creation failure when RBAC is on</li>
        </ul>
      </li>
      <li><strong>Workspaces</strong>
        <ul>
          <li>Fix an issue where authentication keys prefixed with a workspace name would be considered valid</li>
          <li><strong>DB</strong>
            <ul>
              <li>Cassandra
                <ul>
                  <li>Fix Cassandra unique violation check on update</li>
                </ul>
              </li>
            </ul>
          </li>
          <li><strong>Migrations</strong>
            <ul>
              <li>Remove dependency on “public” schema or “pg_default” tablespaces in Postgres - such a dependency would cause migrations to fail if such tablespaces weren’t being used</li>
            </ul>
          </li>
          <li><strong>Healthchecks</strong>
            <ul>
              <li>Fix Host header in active healthchecks</li>
              <li>Fix for connection timeouts on passive healthchecks</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>Dev Portal</strong>
        <ul>
          <li>Fix issue leading migrations <code class="language-plaintext highlighter-rouge">2018-04-10-094800_dev_portal_consumer_types_statuses</code> and <code class="language-plaintext highlighter-rouge">2018-05-08-143700_consumer_dev_portal_columns</code> to fail</li>
          <li>Automatically log users in after registering when auto-approve is on</li>
          <li>Reduce the size of the mobile breakpoint</li>
          <li>Improve performance and file sizes of bundled code</li>
          <li>Fix issue causing Portal to list spec files twice</li>
          <li>Swagger Improvements:
            <ul>
              <li>Fix for rendering OAS 3.0 spec files</li>
              <li>Ensure that page loading isn’t blocked by Swagger UI rendering</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>LDAP Auth &amp; LDAP Auth Advanced</strong>
        <ul>
          <li>Fix an issue where a request would fail when the password field had more than 128 characters in length</li>
          <li>Make the password part of the cache key, so that an invalid credential can be cached without blocking valid credentials</li>
        </ul>
      </li>
      <li><strong>Zipkin</strong>
        <ul>
          <li>Fix operation when service and/or route are missing</li>
          <li>Fix cause of missing kong.credential field</li>
          <li>Support for deprecated Kong “api” entity via kong.api tag</li>
        </ul>
      </li>
      <li><strong>Rate Limiting Advanced Plugin</strong>
        <ul>
          <li>Fix issue preventing the plugin to correctly propagate configuration changes across Kong Nginx workers</li>
          <li>Fix issue preventing the plugin to load configuration and create sync timers</li>
          <li>Fix plugin name in log messages</li>
        </ul>
      </li>
      <li><strong>Canary</strong>
        <ul>
          <li>Fixed the type attribute for port configuration setting</li>
        </ul>
      </li>
      <li><strong>Forward Proxy</strong>
        <ul>
          <li>Fix Kong core dependency causing the access phase handle to fail</li>
        </ul>
      </li>
      <li><strong>Proxy Cache</strong>
        <ul>
          <li>Fix issue leading to cache key collision in some scenarios - e.g., for requests issued by the same consumer</li>
          <li>Fix cache key for Routes and Services: previously, distinct routes/services entities would be given the same cache key</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="033">0.33</h2>
<p><strong>Release Date:</strong> 2018/07/24</p>

<h3 id="notifications-11">Notifications</h3>

<ul>
  <li><strong>Kong EE 0.33</strong> inherits from <strong>Kong CE 0.13.1</strong>; make sure to read 0.13.1 - and 0.13.0 - changelogs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">0.13.0 Changelog</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0131---20180423">0.13.1 Changelog</a></li>
    </ul>
  </li>
  <li><strong>Kong EE 0.33</strong> has these notices from <strong>Kong CE 0.13</strong>:
    <ul>
      <li>Support for <strong>Postgres 9.4 has been removed</strong> - starting with 0.32, Kong Enterprise does not start with Postgres 9.4 or prior</li>
      <li>Support for <strong>Cassandra 2.1 has been deprecated, but Kong will still start</strong> - versions beyond 0.33 will not start with Cassandra 2.1 or prior</li>
      <li>Additional requirements:
        <ul>
          <li><strong>Vitals</strong> requires Postgres 9.5+</li>
          <li><strong>Dev Portal</strong> requires Cassandra 3.0+</li>
        </ul>
      </li>
      <li><strong>Galileo - DEPRECATED</strong>: Galileo plugin is deprecated and will reach EOL soon</li>
    </ul>
  </li>
  <li><strong>Breaking</strong>: Since 0.32, the <code class="language-plaintext highlighter-rouge">latest</code> tag in Kong Enterprise Docker repository <strong>changed from CentOS to Alpine</strong> - which might result in breakage if additional packages are assumed to be in the image pointed to by <code class="language-plaintext highlighter-rouge">latest</code>, as the Alpine image only contains a minimal set of packages installed by default</li>
</ul>

<h3 id="changes-8">Changes</h3>

<ul>
  <li><strong>Vitals</strong>
    <ul>
      <li>Internal proxies are no longer tracked</li>
      <li>Admin API endpoint <code class="language-plaintext highlighter-rouge">/vitals/consumers/:username_or_id/nodes</code>, deprecated in 0.32, has been removed</li>
    </ul>
  </li>
  <li><strong>Prometheus Plugin</strong>
    <ul>
      <li>
        <p>The plugin uses a dedicated shared dictionary. If you use a custom template, define the following for Prometheus:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lua_shared_dict prometheus_metrics 5m;
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>OpenID Connect Plugin</strong>
    <ul>
      <li>Change <code class="language-plaintext highlighter-rouge">config_consumer_claim</code> from string to array</li>
    </ul>
  </li>
</ul>

<h3 id="features-27">Features</h3>

<ul>
  <li><strong>Core</strong>
    <ul>
      <li><strong>New RBAC implementation</strong>, supporting both endpoint and entity-level
access control - read the docs <a href="/enterprise/0.33-x/rbac/overview">here</a></li>
      <li><strong>Workspaces</strong>, allowing segmentation of Admin API entities - read the docs
<a href="/enterprise/0.33-x/workspaces/overview">here</a>. Note that workspaces are available in the API only,
and not in the Admin GUI</li>
    </ul>
  </li>
  <li><strong>Admin GUI</strong>
    <ul>
      <li>Log in to the Admin GUI using Kong’s own authentication plugins; supported
plugins are key-auth, basic-auth, and ldap-auth-advanced.  Use of other
authentication plugins has not been tested.</li>
      <li>Add ability to see what plugins are configured on a consumer</li>
    </ul>
  </li>
  <li><strong>Dev Portal</strong>
    <ul>
      <li>Revoked Dev Portal Users/Consumers are blocked at proxy</li>
      <li>Files API Improvements</li>
      <li>File editor in Admin GUI</li>
      <li>Consumer API usage on Dev Portal user area</li>
    </ul>
  </li>
  <li><strong>OpenID Connect Plugin</strong>
    <ul>
      <li>Add <code class="language-plaintext highlighter-rouge">config.consumer_optional</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">config.token_endpoint_auth_method</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">consumer.status</code> check for internal authentication</li>
    </ul>
  </li>
  <li><strong>Forward Proxy Plugin</strong>
    <ul>
      <li>Add support for delayed response</li>
      <li>Add <code class="language-plaintext highlighter-rouge">via</code> header</li>
    </ul>
  </li>
  <li><strong>Canary Plugin</strong>
    <ul>
      <li>Added whitelist and blacklist options to be able to select consumers instead of having random consumers</li>
      <li>Added a port parameter to be able to be set a new port for the alternate upstream</li>
    </ul>
  </li>
  <li><strong>LDAP Auth Advanced</strong>
    <ul>
      <li>Find consumers by <code class="language-plaintext highlighter-rouge">consumer_by</code> fields and map to ldap-auth user. This will set the authenticated consumer so that <code class="language-plaintext highlighter-rouge">X-Consumer-{ID, USERNAME, CUSTOM_ID}</code> headers are set and consumer functionality is available</li>
      <li>Add fields
        <ul>
          <li><code class="language-plaintext highlighter-rouge">consumer_by</code>: optional, default: <code class="language-plaintext highlighter-rouge">{username, custom_id}</code></li>
          <li><code class="language-plaintext highlighter-rouge">consumer_optional</code>: optional, default: <code class="language-plaintext highlighter-rouge">false</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>StatsD Plugin</strong>
    <ul>
      <li>New plugin; see documentation <a href="/enterprise/0.33-x/plugins/statsd-advanced">here</a></li>
    </ul>
  </li>
  <li><strong>Prometheus Plugin</strong>
    <ul>
      <li>New plugin; see documentation <a href="/plugins/prometheus">here</a></li>
    </ul>
  </li>
</ul>

<h3 id="fixes-71">Fixes</h3>

<ul>
  <li><strong>Core</strong>
    <ul>
      <li><strong>Healthchecks</strong>: health status no longer resets when a Target is added to an Upstream</li>
      <li><strong>Runloop</strong>: properly throw errors from plugins fetch</li>
      <li><strong>DB</strong>: fix double-wraping of <code class="language-plaintext highlighter-rouge">err_t</code> strategy error</li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li>Azure delayed response</li>
      <li>Lambda delayed response</li>
      <li>Request Termination delayed response</li>
    </ul>
  </li>
  <li><strong>Admin GUI</strong>
    <ul>
      <li>Fix a problem where a plugin value cannot be unset</li>
      <li>Fix a problem where error messages on the login screen fail to display</li>
    </ul>
  </li>
  <li><strong>Portal</strong>
    <ul>
      <li>Auto-approve messaging</li>
    </ul>
  </li>
  <li><strong>OpenID Connect Plugin</strong>
    <ul>
      <li>Fix <code class="language-plaintext highlighter-rouge">kong_oauth2</code> <code class="language-plaintext highlighter-rouge">auth_method</code> so that it works without having to also add bearer or introspection to <code class="language-plaintext highlighter-rouge">config.auth_method</code></li>
      <li>Fix <code class="language-plaintext highlighter-rouge">ngx.ctx.authenticated_credential</code> so that it isn’t set when a value with <code class="language-plaintext highlighter-rouge">config.credential_claim</code> isn’t found</li>
    </ul>
  </li>
  <li><strong>Zipkin Plugin</strong>
    <ul>
      <li>Fix an issue with how timestamps can sometimes be encoded with scientific notation, causing the Zipkin collector to refuse some traces</li>
    </ul>
  </li>
  <li><strong>LDAP Auth Advanced Plugin</strong>
    <ul>
      <li>Fix require statements pointing to Kong CE’s version of the plugin</li>
      <li>Fix usage of the LuaJIT FFI, where an external symbol was not accessed properly, resulting in an Internal Server Error</li>
    </ul>
  </li>
  <li><strong>Rate Limiting Advanced Plugin</strong>
    <ul>
      <li>Fix an issue in Cassandra migrations that would stop the migration process</li>
      <li>Allow existing plugin configurations without a value for the recently-introduced introduced <code class="language-plaintext highlighter-rouge">dictionary_name</code> field to use the default dictionary for the plugin - <code class="language-plaintext highlighter-rouge">kong_rate_limiting_counters</code>.</li>
      <li>
        <p>Customers using a custom Nginx template are advised to check if such a dictionary is defined in their template:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lua_shared_dict kong_rate_limiting_counters 12m;
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>
<hr />

<h2 id="032">0.32</h2>
<p><strong>Release Date:</strong> 2018/05/24</p>

<h3 id="notifications-12">Notifications</h3>

<ul>
  <li><strong>Kong EE 0.32</strong> inherits from <strong>Kong CE 0.13.1</strong>; make sure to read 0.13.1 - and 0.13.0 - changelogs:
    <ul>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">0.13.0 Changelog</a></li>
      <li><a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0131---20180423">0.13.1 Changelog</a></li>
    </ul>
  </li>
  <li><strong>Kong EE 0.32</strong> has these notices from <strong>Kong CE 0.13</strong>:
    <ul>
      <li>Support for <strong>Postgres 9.4 has been removed</strong> - starting with 0.32, Kong Enterprise will not start with Postgres 9.4 or prior</li>
      <li>Support for <strong>Cassandra 2.1 has been deprecated, but Kong will still start</strong> - versions beyond 0.33 will not start with Cassandra 2.1 or prior</li>
      <li>Additional requirements:
        <ul>
          <li><strong>Vitals</strong> requires Postgres 9.5+</li>
          <li><strong>Dev Portal</strong> requires Cassandra 3.0+</li>
        </ul>
      </li>
      <li><strong>Galileo - DEPRECATED</strong>: Galileo plugin is deprecated and will reach EOL soon</li>
    </ul>
  </li>
  <li><strong>Breaking</strong>: The <code class="language-plaintext highlighter-rouge">latest</code> tag in Kong Enterprise Docker repository changed from CentOS to Alpine - which might result in breakage if additional packages are assumed to be in the image, as the Alpine image only contains a minimal set of packages installed</li>
  <li><strong>OpenID Connect</strong>
    <ul>
      <li>The plugins listed below were deprecated in favor of the all-in-one openid-connect plugin:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">openid-connect-authentication</code></li>
          <li><code class="language-plaintext highlighter-rouge">openid-connect-protection</code></li>
          <li><code class="language-plaintext highlighter-rouge">openid-connect-verification</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="changes-9">Changes</h3>

<ul>
  <li><strong>New Data Model</strong> - Kong EE 0.32 is the first Enterprise version including the <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#core-2"><strong>new model</strong></a>, released with Kong CE 0.13, which includes Routes and Services</li>
  <li><strong>Rate Limiting Advanced</strong>
    <ul>
      <li><strong>Breaking</strong> - the Enterprise Rate Limiting plugin, named <code class="language-plaintext highlighter-rouge">rate-limiting</code> up to EE 0.31, was renamed <code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code> and CE Rate Limiting was imported as <code class="language-plaintext highlighter-rouge">rate-limiting</code>. Any Admin API calls that were previously targeting the Enterprise Rate Limiting plugin in Kong EE up to 0.31 need to be updated to target <code class="language-plaintext highlighter-rouge">rate-limiting-advanced</code></li>
      <li>
        <p>Rate Limiting Advanced, similarly to CE rate-limiting, now uses a dedicated shared dictionary named <code class="language-plaintext highlighter-rouge">kong_rate_limiting_counters</code> for its counters; if you are using a custom template, make sure to define the following shared memory zones:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lua_shared_dict kong_rate_limiting_counters 12m;
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li>
        <p>Vitals uses two dedicated shared dictionaries. If you use a custom template, define the following shared memory zones for Vitals:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lua_shared_dict kong_vitals_counters 50m;
lua_shared_dict kong_vitals_lists     1m;
</code></pre></div>        </div>
        <p>You can remove any existing shared dictionaries that begin with <code class="language-plaintext highlighter-rouge">kong_vitals_</code>, e.g., <code class="language-plaintext highlighter-rouge">kong_vitals_requests_consumers</code></p>
      </li>
    </ul>
  </li>
  <li><strong>OpenID Connect</strong>
    <ul>
      <li>Remove multipart parsing of ID tokens - they were not proxy safe</li>
      <li>Change expired or non-active access tokens to give <code class="language-plaintext highlighter-rouge">401</code> instead of <code class="language-plaintext highlighter-rouge">403</code></li>
    </ul>
  </li>
</ul>

<h3 id="features-28">Features</h3>

<ul>
  <li><strong>Admin GUI</strong>
    <ul>
      <li>New Listeners (Admin GUI + Developer Portal)</li>
      <li>Routes and Services GUI</li>
      <li>New Plugins thumbnail view</li>
      <li>Healthchecks GUI</li>
      <li>Syntax for form-encoded array elements</li>
      <li>Dev Portal Overview tab</li>
      <li>Developers management tab</li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li><strong>Status Code</strong> tracking - GUI and API
        <ul>
          <li>Status Code groups per Cluster - counts of <code class="language-plaintext highlighter-rouge">1xx</code>, <code class="language-plaintext highlighter-rouge">2xx</code>, <code class="language-plaintext highlighter-rouge">3xx</code>, <code class="language-plaintext highlighter-rouge">4xx</code>, <code class="language-plaintext highlighter-rouge">5xx</code> groups across the cluster over time. Visible in the Admin GUI at <code class="language-plaintext highlighter-rouge">ADMIN_URL/vitals/status-codes</code></li>
          <li>Status Codes per Service - count of individual status codes correlated to a particular service. Visible in the Admin GUI at <code class="language-plaintext highlighter-rouge">ADMIN_URL/services/{service_id}</code></li>
          <li>Status Codes per Route - count of individual status codes correlated to a particular route. Visible in the Admin GUI at <code class="language-plaintext highlighter-rouge">ADMIN_URL/routes/{route_id}</code></li>
          <li>Status Codes per Consumer and Route - count of individual status codes returned to a given consumer on a given route.  Visible in the Admin GUI at <code class="language-plaintext highlighter-rouge">ADMIN_URL/consumers/{consumer_id}</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Dev Portal</strong>
    <ul>
      <li>Code Snippets</li>
      <li>Developer “request access” full life-cycle</li>
      <li>Default Dev Portal included in Kong distributions (with default theme)</li>
      <li>Authentication on Dev Portal out of box (uncomment in Kong.conf)</li>
      <li>Docs for Routes/Services for Dev Portal</li>
      <li>Docs for Admin API</li>
      <li><strong>Requires Migration</strong> - <code class="language-plaintext highlighter-rouge">/files</code> endpoint is now protected by RBAC</li>
    </ul>
  </li>
  <li><strong>Plugins</strong>
    <ul>
      <li><strong>Rate Limiting Advanced</strong>: add a <code class="language-plaintext highlighter-rouge">dictionary_name</code> configuration, to allow using a custom dictionary for storing counters</li>
      <li><strong>Requires Migration - Rate Limiting CE</strong> is now included in EE</li>
      <li><strong>Request Transformer CE</strong> is now included in EE</li>
      <li><strong>Edge Compute</strong>: plugin-based, Lua-only preview</li>
      <li><strong>Proxy Cache</strong>: Customize the cache key, selecting specific headers or query params to be included</li>
      <li><strong>Opentracing Plugin</strong>: Kong now adds detailed spans to Zipkin and Jaeger distributed tracing tools</li>
      <li><strong>Azure Functions Plugin</strong>: Invoke Azure functions from Kong</li>
      <li><strong>LDAP Advanced</strong>: LDAP plugin with augmented ability to search by LDAP fields</li>
    </ul>
  </li>
  <li><strong>OpenID Connect</strong>
    <ul>
      <li>Add <code class="language-plaintext highlighter-rouge">self_check</code> function to validate that OIDC discovery information can be downloaded</li>
      <li>Bearer token is now looked up on <code class="language-plaintext highlighter-rouge">Access-Token</code> and <code class="language-plaintext highlighter-rouge">X-Access-Token</code> headers in addition to Authorization Bearer header (query and body args are supported as before)</li>
      <li>JWKs are rediscovered and the new keys are cached cluster wide (works better with keys rotation schemes)</li>
      <li>Admin API does self-check for discovery endpoint when the plugin is added and reports possible errors back</li>
      <li>Add configuration directives
        <ul>
          <li><code class="language-plaintext highlighter-rouge">config.extra_jwks_uris</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.credential_claim</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_storage</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_memcache_prefix</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_memcache_socket</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_memcache_host</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_memcache_port</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_redis_prefix</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_redis_socket</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_redis_host</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_redis_port</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_redis_auth</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.session_cookie_lifetime</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.authorization_cookie_lifetime</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.forbidden_destroy_session</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.forbidden_redirect_uri</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.unauthorized_redirect_uri</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.unexpected_redirect_uri</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.scopes_required</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.scopes_claim</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.audience_required</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.audience_claim</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.discovery_headers_names</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.discovery_headers_values</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.introspect_jwt_tokens</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.introspection_hint</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.introspection_headers_names</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.introspection_headers_values</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.token_exchange_endpoint</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.cache_token_exchange</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.bearer_token_param_type</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.client_credentials_param_type</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.password_param_type</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.hide_credentials</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.cache_ttl</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.run_on_preflight</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.upstream_headers_claims</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.upstream_headers_names</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.downstream_headers_claims</code></li>
          <li><code class="language-plaintext highlighter-rouge">config.downstream_headers_names</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="fixes-72">Fixes</h3>

<ul>
  <li><strong>Core</strong>
    <ul>
      <li><strong>Healthchecks</strong>
        <ul>
          <li>Fix an issue where updates made through <code class="language-plaintext highlighter-rouge">/health</code> or <code class="language-plaintext highlighter-rouge">/unhealth</code> wouldn’t be propagated to other Kong nodes</li>
          <li>Fix internal management of healthcheck counters, which corrects detection of state flapping</li>
        </ul>
      </li>
      <li><strong>DNS</strong>: a number of fixes and improvements were made to Kong’s DNS client library, including:
        <ul>
          <li>The ring-balancer now supports <code class="language-plaintext highlighter-rouge">targets</code> resolving to an SRV record without port information (<code class="language-plaintext highlighter-rouge">port=0</code>)</li>
          <li>IPv6 nameservers with a scope in their address (eg. <code class="language-plaintext highlighter-rouge">nameserver fe80::1%wlan0</code>) will now be skipped instead of throwing errors</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Rate Limiting Advanced</strong>
    <ul>
      <li>Fix <code class="language-plaintext highlighter-rouge">failed to upsert counters</code> error</li>
      <li>Fix issue where an attempt to acquire a lock would result in an error</li>
      <li>Mitigate issue where lock acquisitions would lead to RL counters being lost</li>
    </ul>
  </li>
  <li><strong>Proxy Cache</strong>
    <ul>
      <li>Fix issue where proxy-cache would shortcircuit requests that resulted in a cache hit, not allowing subsequent plugins - e.g., logging plugins - to run</li>
      <li>Fix issue where PATCH requests would result in a 500 response</li>
      <li>Fix issue where Proxy Cache would overwrite X-RateLimit headers</li>
    </ul>
  </li>
  <li><strong>Request Transformer</strong>
    <ul>
      <li>Fix issue leading to an Internal Server Error in cases where the Rate Limiting plugin returned a 429 Too Many Requests response</li>
    </ul>
  </li>
  <li><strong>AWS Lambda</strong>
    <ul>
      <li>Fix issue where an empty array <code class="language-plaintext highlighter-rouge">[]</code> was returned as an empty object <code class="language-plaintext highlighter-rouge">{}</code></li>
    </ul>
  </li>
  <li><strong>Galileo - DEPRECATED</strong>
    <ul>
      <li>Fix issue that prevented Galileo from reporting requests that were cached by proxy-cache</li>
      <li>Fix issue that prevented Galileo from showing request/response bodies of requests served by proxy-cache</li>
    </ul>
  </li>
  <li><strong>OpenID Connect</strong>
    <ul>
      <li>Fix <code class="language-plaintext highlighter-rouge">exp</code> retrieval</li>
      <li>Fix <code class="language-plaintext highlighter-rouge">jwt_session_cookie</code> verification</li>
      <li>Fix consumer mapping using introspection where the claim was searched in an inexistent location</li>
      <li>Fix header values when their callbacks fail to get the value - instead of setting their values as <code class="language-plaintext highlighter-rouge">function ...</code></li>
      <li>Fix <code class="language-plaintext highlighter-rouge">config.scopes</code> when set to <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">""</code> so that it doesn’t add an OpenID scope forcibly, as the plugin is not only OpenID Connect only, but also OAuth2</li>
    </ul>
  </li>
</ul>
<hr />

<h2 id="031-1">0.31-1</h2>
<p><strong>Release Date:</strong> 2018/04/25</p>

<h3 id="changes-10">Changes</h3>

<ul>
  <li>New shared dictionaries named <code class="language-plaintext highlighter-rouge">kong_rl_counters</code> and <code class="language-plaintext highlighter-rouge">kong_db_cache_miss</code> were defined in Kong’s default template - customers using custom templates are encouraged to update them to include those, as they avoid the reuse of the <code class="language-plaintext highlighter-rouge">kong_cache</code> shared dict; such a reuse is known to be one of the culprits behind <code class="language-plaintext highlighter-rouge">no memory</code> errors - see diff below</li>
  <li>The rate-limiting plugin now accepts a <code class="language-plaintext highlighter-rouge">dictionary_name</code> argument, which is used for temporarily storing rate-limiting counters</li>
</ul>

<p><em>NOTE</em>: if you use a custom Nginx configuration template, apply the following patch to your template:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>diff --git a/kong/templates/nginx_kong.lua b/kong/templates/nginx_kong.lua
index 15682975..653a7ddd 100644
--- a/kong/templates/nginx_kong.lua
+++ b/kong/templates/nginx_kong.lua
@@ -29,7 +29,9 @@ lua_socket_pool_size $;
 lua_max_running_timers 4096;
 lua_max_pending_timers 16384;
 lua_shared_dict kong                5m;
+lua_shared_dict kong_rl_counters   12m;
 lua_shared_dict kong_cache          $;
+lua_shared_dict kong_db_cache_miss 12m;
 lua_shared_dict kong_process_events 5m;
 lua_shared_dict kong_cluster_events 5m;
 lua_shared_dict kong_vitals_requests_consumers 50m;
</code></pre></div></div>

<h3 id="fixes-73">Fixes</h3>

<ul>
  <li>Bump mlcache to 2.0.2 and mitigates a number of issues known to be causing <code class="language-plaintext highlighter-rouge">no memory</code> errors</li>
  <li>Fixes an issue where boolean values (and boolean values as strings) were not correctly marshalled when using Cassandra</li>
  <li>Fixes an issue in Redis Sentinel configuration parsing</li>
</ul>

<h2 id="031">0.31</h2>
<p><strong>Release Date:</strong> 2018/03/16</p>

<p>Kong Enterprise 0.31 is shipped with all the changes present in Kong Community Edition 0.12.3, as well as with the following additions:</p>

<h3 id="changes-11">Changes</h3>
<ul>
  <li>Galileo plugin is disabled by default in this version, needing to be explicitly enabled via the custom_plugins configuration
    <ul>
      <li><em>NOTE</em>: If a user had the Galileo plugin applied in an older version and migrate to 0.31, Kong will fail to restart unless the user enables it via the <a href="/gateway-oss/latest/configuration/#custom_plugins">custom_plugins</a> configuration; however, it is still possible to enable the plugin per API or globally without adding it to custom_plugins</li>
    </ul>
  </li>
  <li>OpenID Connect plugin:
    <ul>
      <li>Change <code class="language-plaintext highlighter-rouge">config.client_secret</code> from <code class="language-plaintext highlighter-rouge">required</code> to <code class="language-plaintext highlighter-rouge">optional</code></li>
    </ul>
  </li>
  <li>Change <code class="language-plaintext highlighter-rouge">config.client_id</code> from <code class="language-plaintext highlighter-rouge">required</code> to <code class="language-plaintext highlighter-rouge">optional</code></li>
  <li>If <code class="language-plaintext highlighter-rouge">anonymous</code> consumer is not found Internal Server Error is returned instead of Forbidden</li>
  <li><strong>Breaking Change</strong> - <code class="language-plaintext highlighter-rouge">config.anonymous</code> now behaves similarly to other plugins and doesn’t halt execution or proxying (previously it was used just as a fallback for consumer mapping) and the plugin always needed valid credentials to be allowed to proxy if the client wasn’t already authenticated by higher priority auth plugin</li>
  <li>Anonymous consumer now uses a simple cache key that is used in other plugins</li>
  <li>In case of auth plugins concatenation, the OpenID Connect plugin now removes remnants of anonymous</li>
</ul>

<h3 id="fixes-74">Fixes</h3>
<ul>
  <li><strong>Admin GUI</strong>
    <ul>
      <li>Remove deprecated orderlist field from Admin GUI Upstreams entity settings</li>
      <li>Fix issue where Admin GUI would break when running Kong in a custom prefix</li>
      <li>Fix issue where Healthchecks had a field typed as number instead of string.</li>
      <li>Fix issue where Healthchecks form had incorrect default values.</li>
      <li>Fix issue where table row text was overflowing and expanding the page.</li>
      <li>Fix issue where notification bar in mobile view could have text overflow beyond the container.</li>
      <li>Fix issue where deleting multiple entities in a list would cause the delete modal to not show.</li>
      <li>Fix issue where cards on the dashboard were not evenly sized and spaced.</li>
      <li>Fix issue where cards on the dashboard in certain widths could have text overflow beyond their container.</li>
      <li>Fix issue where Array’s on Plugin Entities were not being processed and sent to the Admin API.</li>
      <li>Fix issue where Models were improperly handled when not updated and not sending default values properly.</li>
      <li>Fix issue where Plugin lists were not displaying config object.</li>
      <li>Fix issue where Kong was not processing SSL configuration for Admin GUI</li>
    </ul>
  </li>
  <li><strong>OpenID Connect plugin</strong>
    <ul>
      <li>Fixed anonymous consumer mapping</li>
    </ul>
  </li>
  <li>
    <p><strong>Vitals</strong></p>

    <ul>
      <li>Correct the stats returned in the “metadata” attribute of the /vitals/consumers/:consumer_id/* endpoints</li>
      <li>Correct a problem where workers get out of sync when adding their data to cache</li>
      <li>Correct inconsistencies in chart axes when toggling between views or when Kong has no traffic</li>
    </ul>
  </li>
  <li><strong>Proxy Cache</strong>
    <ul>
      <li>Fix issue that prevented cached requests from showing up in Vitals or Total Requests graphs</li>
      <li>Fixes inherited from Kong Community Edition 0.12.3.</li>
    </ul>
  </li>
</ul>

<h3 id="features-29">Features</h3>
<ul>
  <li>Admin GUI
    <ul>
      <li>Add notification bar alerting users that their license is about to expire, and has expired.</li>
      <li>Add new design to vitals overview, table breakdown, and a new tabbed chart interface.</li>
      <li>Add top-level vitals section to the sidebar.</li>
    </ul>
  </li>
  <li>Requires migration - Vitals
    <ul>
      <li>New datastore support: Cassandra 2.1+</li>
      <li>Support for averages for Proxy Request Latency and Upstream Latency</li>
    </ul>
  </li>
  <li>Requires migration - Dev Portal
    <ul>
      <li>Not-production-ready feature preview of:
        <ul>
          <li>“Public only” Portal - no authentication (eg. the portal is fully accessible to anyone who can access it)</li>
          <li>Authenticated Portal - Developers must log in, and then they can see what they are entitled to see</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<hr />

<h2 id="030">0.30</h2>
<p><strong>Release Date:</strong> 2018/01/24</p>

<p>Kong Enterprise 0.30 is shipped with all the changes present in <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0121---20180118">Kong Community Edition 0.12.1</a>, as well as with the following additions:</p>

<h3 id="notifications-13">Notifications</h3>

<ul>
  <li>EE 0.30 inherits dependency <strong>deprecation</strong> notices from CE 0.12. See the “Deprecation Notes” section of Kong 0.12.0 changelog</li>
  <li>
    <p>⚠️ By default, the Admin API now only listens on the local interface. We consider this change to be an improvement in the default security policy of Kong. If you are already using Kong, and your Admin API still binds to all interfaces, consider updating it as well. You can do so by updating the <code class="language-plaintext highlighter-rouge">admin_listen</code> configuration value, like so: <code class="language-plaintext highlighter-rouge">admin_listen = 127.0.0.1:8001</code>.</p>
  </li>
  <li>🔴 Note to Docker users: Beware of this change as you may have to ensure that your Admin API is reachable via the host’s interface. You can use the <code class="language-plaintext highlighter-rouge">-e KONG_ADMIN_LISTEN</code> argument when provisioning your container(s) to update this value; for example, <code class="language-plaintext highlighter-rouge">-e KONG_ADMIN_LISTEN=0.0.0.0:8001</code>.</li>
</ul>

<h3 id="changes-12">Changes</h3>
<ul>
  <li><strong>Renaming of Enterprise plugin</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">request-transformer</code> becomes <code class="language-plaintext highlighter-rouge">request-transformer-advanced</code></li>
    </ul>
  </li>
  <li><strong>Rate-limiting</strong> plugin
    <ul>
      <li>Change default <code class="language-plaintext highlighter-rouge">config.identifier</code> in EE’s from <code class="language-plaintext highlighter-rouge">ip</code> to <code class="language-plaintext highlighter-rouge">consumer</code></li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li>Aggregate minutes data at the same time as seconds data</li>
      <li><strong>Breaking Change:</strong> Replace previous Vitals API (part of the Admin API) with new version. <strong>Not backwards compatible.</strong></li>
      <li><strong>Upgrading from Kong EE (0.29) will result in the loss of previous Vitals data</strong></li>
    </ul>
  </li>
  <li><strong>Admin GUI</strong>
    <ul>
      <li>Vitals chart settings stored in local storage</li>
      <li>Improve vital chart legends</li>
      <li>Change Make A Wish email to &lt;a href=”mailto:wish@konghq.com`&gt;wish@konghq.com&lt;/a&gt;</li>
    </ul>
  </li>
  <li><strong>OpenID Connect Plugins</strong>
    <ul>
      <li>Change <code class="language-plaintext highlighter-rouge">config.login_redirect_uri</code> from <code class="language-plaintext highlighter-rouge">string</code> to <code class="language-plaintext highlighter-rouge">array</code></li>
      <li>Add new configuration parameters
        <ul>
          <li>config.authorization_query_args_client</li>
          <li>config.client_arg</li>
          <li>config.logout_redirect_uri</li>
          <li>config.logout_query_arg</li>
          <li>config.logout_post_arg</li>
          <li>config.logout_uri_suffix</li>
          <li>config.logout_methods</li>
          <li>config.logout_revoke</li>
          <li>config.revocation_endpoint</li>
          <li>config.end_session_endpoint</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>OpenID Connect Library</strong>
    <ul>
      <li>Function <code class="language-plaintext highlighter-rouge">authorization:basic</code> now return as a third parameter, the grant type if one was found - previously, it returned parameter location in HTTP request</li>
      <li>Issuer is no longer verified on discovery as some IdPs report different value (it is still verified with claims verification)</li>
    </ul>
  </li>
</ul>

<p><strong>Added</strong></p>

<ul>
  <li>
    <p>New <strong>Canary Release plugin</strong></p>
  </li>
  <li>
    <p>Vitals</p>
    <ul>
      <li>Addition of “node-specific” dimension for previously-released metrics (Kong Request Latency and Datastore Cache)</li>
      <li>New metrics and dimensions:
        <ul>
          <li><strong>Request Count per Consumer</strong>, by Node or Cluster</li>
          <li><strong>Total Request Count</strong>, by Node or Cluster</li>
          <li><strong>Upstream Latency</strong> (the time between a request being sent upstream by Kong, and the response being received by Kong), by Node or Cluster</li>
        </ul>
      </li>
      <li>All new metrics and dimensions accessible in <strong>Admin GUI and API</strong></li>
      <li><strong>Important limitations and notifications:</strong>
        <ul>
          <li>PostgreSQL 9.5+ only - no Cassandra support yet</li>
          <li>Upgrading from the previous version of Kong EE will result in all historic Vitals data being dropped</li>
          <li>The previous Vitals API (which is part of the Admin API) is replaced with a new, better one (the old API disappears, and there is no backwards compatibility)</li>
        </ul>
      </li>
      <li><strong>Proxy Cache</strong>
        <ul>
          <li>Implement Redis (stand-alone and Sentinel) caching of proxy cache entities</li>
        </ul>
      </li>
      <li><strong>Enterprise Rate Limiting</strong>
        <ul>
          <li>Provide <strong>fixed-window</strong> quota rate limiting (which is essentially what the CE rate-limiting plugin does) in addition to the current sliding window rate limiting</li>
          <li>Add <em>hide_client_headers</em> configuration to disable response headers returned by the rate limiting plugin</li>
        </ul>
      </li>
      <li><strong>Admin GUI</strong>
        <ul>
          <li>Addition of <strong>“Form Control Grouping”</strong> for the new Upstream health-check configuration options.</li>
          <li>Add <strong>Healthy</strong> or <strong>Unhealthy</strong> buttons for the new health-check functionality on Upstream Targets table.</li>
          <li>Add <strong>Hostname</strong> and <strong>Hostname + Id</strong> reporting and labeling functionality to Vitals components.</li>
          <li>Add <strong>Total Requests per Consumer</strong> chart to individual consumer pages.</li>
          <li>Add <strong>Total Requests</strong> and <strong>Upstream Latency</strong> charts to the Vitals page.</li>
          <li>Add information dialogs for vital charts next to chart titles.</li>
          <li>Introduced <strong>Total Requests</strong> chart on Dashboard.</li>
          <li>Automatically saves chart preferences and restores on reload.</li>
        </ul>
      </li>
      <li><strong>OpenID Connect plugins</strong>
        <ul>
          <li>Support passing dynamic arguments to authorization endpoint from client</li>
          <li>Support logout with optional revocation and RP-initiated logout</li>
        </ul>
      </li>
      <li>Features inherited from <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#added">Kong Community Edition 0.12.0</a> - includes:
        <ul>
          <li>Health checks</li>
          <li>Hash-based load balancing</li>
          <li>Logging plugins track unauthorized and rate-limited requests</li>
          <li>And more…</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="fixes-75">Fixes</h3>
<ul>
  <li><strong>Proxy Cache</strong>
    <ul>
      <li>Better handling of input configuration data types. In some cases configuration sent from the GUI would case requests to be bypassed when they should have been cached.</li>
    </ul>
  </li>
  <li><strong>OAuth2 Introspection</strong>
    <ul>
      <li>Improved error handling in TCP/HTTP connections to the introspection server.</li>
    </ul>
  </li>
  <li><strong>Vitals</strong>
    <ul>
      <li>Aggregating minutes at the same time as seconds are being written.</li>
      <li>Returning more than one minute’s worth of seconds data.</li>
    </ul>
  </li>
  <li><strong>Admin GUI</strong>
    <ul>
      <li>Input type for Certificates is now a text area box.</li>
      <li>Infer types based on default values and object type from the API Schema for Plugins.</li>
    </ul>
  </li>
  <li>Fixes inherited from Kong Community Edition 0.12.0.</li>
</ul>

<hr />



          </div>
        </div>
      </div>
    </div>
    
      <div id="scroll-to-top-button">
        <i class="fas fa-chevron-up"></i>
      </div>
      
        <div class="feedback-widget-container">
  <input id="feedback-widget-checkbox" type="checkbox">
  <label for="feedback-widget-checkbox">
    <img src="/assets/images/icons/feedback-widget.svg" alt="Feedback widget"/>
  </label>
  <div class="feedback-container">
    <div class="feedback-thankyou">
      Thank you for your feedback.
    </div>
    <div class="feedback-comment">
      <textarea id="feedback-comment-text" rows="3" placeholder="Please let us know what we can improve on this page..."></textarea>
      <div class="feedback-comment-buttons">
        <button id="feedback-comment-button-back">Back</button>
        <button id="feedback-comment-button-submit" class="button-primary">Submit</button>
      </div>
    </div>
    <div class="feedback-options">
      <div class="feedback-options-title">Was this page useful?</div>
      <div class="feedback-options-buttons">
        <i data-feedback-result="yes" class="feedback-options-button far fa-thumbs-up"></i>
        <i data-feedback-result="no" class="feedback-options-button far fa-thumbs-down"></i>
      </div>
    </div>
  </div>
</div>

      
    
  </div>

  <div id="image-modal" data-image-expand-disabled="">
  <div class="image-modal-backdrop"></div>
  <div class="image-container">
    <img src="" alt="">
    <i class="fa fa-times"></i>
  </div>
</div>


  <script type="text/javascript">
    function toggleContentHeader() {
      var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
      if (w <= 800 && $(window).scrollTop() < 8) {
        $('.content').toggleClass('scrolled', false);
        $('.content-header').toggleClass('scrolled', false);
        $('.content-version').show(250);
      } else {
        $('.content').toggleClass('scrolled', true);
        $('.content-header').toggleClass('scrolled', true);
        $('.content-version').hide(250);
      }
    }

    window.addEventListener('scroll', toggleContentHeader);
  </script>


    <footer class="marketing-footer--light-gray">
  <section>
    <ul class="newsletter">
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/KogoBlue.svg" alt="Kong" />
        </div>
        <h5>THE CLOUD CONNECTIVITY COMPANY</h5>
        <p>
          Kong powers reliable digital connections across APIs, hybrid and
          multi-cloud environments.
        </p>
        <div class="footer-form-container">
          <form id="subscribe-form" method="POST" action="/assets/javascripts/subscribe.js">
            <div>
              <input required id="subscribe-input" type="email" name="email" id="email" placeholder="Email" aria-required="true" aria-invalid="false">
              <input id="footer-form-button" type="submit" form="subscribe-form" value="Subscribe">
            </div>
          </form>

          <div id="form-response"></div>
        </div>
        <nav>
          <ul>
            <li>
              <a
                href="http://konghq.com/about-kong-inc/?itm_source=website&itm_medium=footer-nav"
                >Company</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/customers/?itm_source=website&itm_medium=footer-nav"
                >Customers</a
              >
            </li>

            <li>
              <a
                href="http://konghq.com/events/?itm_source=website&itm_medium=footer-nav"
                >Events</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/investors/?itm_source=website&itm_medium=footer-nav"
                >Investors</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/careers/?itm_source=website&itm_medium=footer-nav"
                >Careers <span>Hiring!</span></a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/partners/?itm_source=website&itm_medium=footer-nav"
                >Partners</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/press-room/?itm_source=website&itm_medium=footer-nav"
                >Press</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/contact/?itm_source=website&itm_medium=footer-nav"
                >Contact</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Products</h5>
          <ul>
            <li>
              <a
                href="http://konghq.com/kong-konnect/?itm_source=website&itm_medium=footer-nav"
                >Kong Konnect</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/get-started/?itm_source=website&itm_medium=footer-nav"
                >Get Started</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/subscriptions/?itm_source=website&itm_medium=footer-nav"
                >Subscriptions</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Resources</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/resources/?content=ebooks&itm_source=website&itm_medium=footer-nav"
                target="blank"
                >eBooks</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/resources/?content=webinarss&itm_source=website&itm_medium=footer-nav"
                >Webinars</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/resources/?content=whitepaper,datasheet,case-studies&itm_source=website&itm_medium=footer-nav"
                >Briefs</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/blog/?itm_source=website&itm_medium=footer-nav"
                >Blog</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/learning-center/api-gateway/?itm_source=website&itm_medium=footer-nav"
                >API Gateway</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/learning-center/microservices/?itm_source=website&itm_medium=footer-nav"
                >Microservices</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Open Source</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/install/#kong-community"
                >Install Kong Gateway </a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/community/?itm_source=website&itm_medium=footer-nav"
                >Kong Community</a
              >
            </li>
            <li>
              <a
                href="https://github.com/Kong/kubernetes-ingress-controller/?itm_source=website&itm_medium=footer-nav"
                >Kubernetes Ingress</a
              >
            </li>
            <li>
              <a
                href="https://kuma.io/?itm_source=website&itm_medium=footer-nav"
                >Kuma</a
              >
            </li>
            <li>
              <a
                href="https://insomnia.rest/?itm_source=website&itm_medium=footer-nav"
                >Insomnia</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Solutions</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/decentralize-applications-and-services/?itm_source=website&itm_medium=footer-nav"
                >Decentralize</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/secure-and-govern-apis-and-services/?itm_source=website&itm_medium=footer-nav"
                >Secure & Govern</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/create-a-developer-platform/?itm_source=website&itm_medium=footer-nav"
                >Create a Dev Platform</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/gateway/?itm_source=website&itm_medium=footer-nav"
                >API Gateway</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/kubernetes-ingress/?itm_source=website&itm_medium=footer-nav"
                >Kubernetes</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/products/kong-enterprise/kong-mesh/?itm_source=website&itm_medium=footer-nav"
                >Service Mesh</a
              >
            </li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <div class="container d-flex">
      <div class="social">
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook"
            ><i
              aria-label="Facebook"
              class="fa fa-facebook-official"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter"
            ><i
              aria-label="Twitter"
              class="fa fa-twitter"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup"
            ><i aria-label="Meetup" class="fa fa-meetup" aria-hidden="true"></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://linkedin.com/company/278819" title="LinkedIn"
            ><i
              aria-label="GitHub"
              class="fa fa-linkedin"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://github.com/kong/kong" target="blank" class="btn-gh">
            <i class="fa fa-github" aria-hidden="true" aria-label="GitHub"></i>
            Star
          </a>
        </div>
      </div>
      <ul>
        <li>
          <span class="mashape-footer-content">
            <a href="http://konghq.com/terms/">Terms</a><b>•</b
            ><a href="http://konghq.com/privacy/">Privacy</a></span
          >
        </li>
      </ul>
      <div>
        <span>&copy; Kong Inc. 2021 &nbsp;</span>
      </div>
    </div>
  </section>

  <script type="text/javascript">
    function onSubmit(response) {
      document.getElementById("subscription_form").submit();
      document.getElementById("follow_up_subscription_form").submit();
      if (response.length == 0) {
        alert("reCaptcha verification failed");
      }
    }
  </script>
</footer>
 <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var className =
        ".show-anchor-links h1, .show-anchor-links h2, .show-anchor-links h3, " +
        ".show-anchor-links h4, .show-anchor-links h5, .show-anchor-links h6";
      var headers = document.querySelectorAll(className);

      for (var i = 0; i < headers.length; i++) {
        var header = headers[i];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1635454550"></script>

    <div id="fb-root"></div>
    <script
      id="github-bjs"
      src="https://buttons.github.io/buttons.js"
      async
      defer
    ></script>
    <script
      id="twitter-wjs"
      type="text/javascript"
      src="https://platform.twitter.com/widgets.js"
      async
      defer
    ></script>
    <script
      id="facebook-jssdk"
      type="text/javascript"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506"
      async
      defer
    ></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load() {
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.src =
            ('https:' == document.location.protocol
              ? 'https://pi'
              : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0];
          c.parentNode.insertBefore(s, c);
        }
        if (window.attachEvent) {
          window.attachEvent('onload', async_load);
        } else {
          window.addEventListener('load', async_load, false);
        }
      })();
    </script>

    <script type="text/javascript">
      var _vwo_code = (function() {
        var account_id = 125292,
          settings_tolerance = 2000,
          library_tolerance = 2500,
          use_existing_jquery = true,
          // DO NOT EDIT BELOW THIS LINE
          f = false,
          d = document;
        return {
          use_existing_jquery: function() {
            return use_existing_jquery;
          },
          library_tolerance: function() {
            return library_tolerance;
          },
          finish: function() {
            if (!f) {
              f = true;
              var a = d.getElementById('_vis_opt_path_hides');
              if (a) a.parentNode.removeChild(a);
            }
          },
          finished: function() {
            return f;
          },
          load: function(a) {
            var b = d.createElement('script');
            b.src = a;
            b.type = 'text/javascript';
            b.innerText;
            b.onerror = function() {
              _vwo_code.finish();
            };
            d.getElementsByTagName('head')[0].appendChild(b);
          },
          init: function() {
            settings_timer = setTimeout(
              '_vwo_code.finish()',
              settings_tolerance
            );
            this.load(
              '//dev.visualwebsiteoptimizer.com/j.php?a=' +
                account_id +
                '&u=' +
                encodeURIComponent(d.URL) +
                '&r=' +
                Math.random()
            );
            var a = d.createElement('style'),
              b = '',
              h = d.getElementsByTagName('head')[0];
            a.setAttribute('id', '_vis_opt_path_hides');
            a.setAttribute('type', 'text/css');
            if (a.styleSheet) a.styleSheet.cssText = b;
            else a.appendChild(d.createTextNode(b));
            h.appendChild(a);
            return settings_timer;
          }
        };
      })();
      _vwo_settings_timer = _vwo_code.init();
    </script>

    <script type="text/javascript">
      !(function() {
        var analytics = (window.analytics = window.analytics || []);
        if (!analytics.initialize)
          if (analytics.invoked)
            window.console &&
              console.error &&
              console.error('Segment snippet included twice.');
          else {
            analytics.invoked = !0;
            analytics.methods = [
              'trackSubmit',
              'trackClick',
              'trackLink',
              'trackForm',
              'pageview',
              'identify',
              'group',
              'track',
              'ready',
              'alias',
              'page',
              'once',
              'off',
              'on'
            ];
            analytics.factory = function(t) {
              return function() {
                var e = Array.prototype.slice.call(arguments);
                e.unshift(t);
                analytics.push(e);
                return analytics;
              };
            };
            for (var t = 0; t < analytics.methods.length; t++) {
              var e = analytics.methods[t];
              analytics[e] = analytics.factory(e);
            }
            analytics.load = function(t) {
              var e = document.createElement('script');
              e.type = 'text/javascript';
              e.async = !0;
              e.src =
                ('https:' === document.location.protocol
                  ? 'https://'
                  : 'http://') +
                'cdn.segment.com/analytics.js/v1/' +
                t +
                '/analytics.min.js';
              var n = document.getElementsByTagName('script')[0];
              n.parentNode.insertBefore(e, n);
            };
            analytics.SNIPPET_VERSION = '3.0.1';
            analytics.load('WDj0nSS7hpyxwL3evgbOzK755s0NUye6');
            analytics.page();
          }
      })();
    </script>

    <script>
      // Collapse Toggler
      $('button[data-toggle="kong-expand"]').on('click', function(e) {
        e.stopPropagation();
        var $this = $(this);
        $('#oss_subnav.expand').toggleClass('slideup');
        $($this.data('target')).toggleClass('kong-navbar-collapse--expand');
        $('nav.navbar.full-width').toggleClass('kong-navbar-collapse--expand');
        $this.toggleClass('active').attr('aria-expanded', true);
        $('.kong-navbar-collapse_section').removeClass('shift');
        $('.subnav, .trigger, .remove').removeClass('active');
        setTimeout(function() {
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        }, 100);
      });

      var $window = $(window);

      function checkWidth() {
        var windowsize = $window.width();
        if (windowsize > 1080) {
          $('.navbar').removeClass('mobile-triggers');
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        } else {
          $('.navbar').addClass('mobile-triggers');
        }
      }
      // Execute on load
      checkWidth();
      // Bind event listener
      $(window).on("resize", checkWidth)

      $('#menu-primary-nav .nav1 > a').on("click", function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $('.nav3').removeClass('active');
          var position = $(this)
            .parent()
            .position();
          $(this)
            .parent()
            .toggleClass('active');
          $('body')
            .get(0)
            .style.setProperty(
              '--navPosition',
              (position.top - 75) * -1 + 'px'
            );
          $(this)
            .parent()
            .parent()
            .toggleClass('active-tab');
        }
      });

      $('#menu-primary-nav .nav3 > a').on("click", function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $(this)
            .parent()
            .toggleClass('active');
        }
      });
    </script>
  </body>

  
</html>
