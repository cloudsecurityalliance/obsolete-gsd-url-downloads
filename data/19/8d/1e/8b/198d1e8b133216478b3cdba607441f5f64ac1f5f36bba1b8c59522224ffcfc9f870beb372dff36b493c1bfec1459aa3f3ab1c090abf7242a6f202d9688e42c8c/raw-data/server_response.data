<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#865413 - flatpak: CVE-2017-9780: Flatpak security issue - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=865413&quot;&gt;865413&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:865413@bugs.debian.org">#865413</a><br>
flatpak: CVE-2017-9780: Flatpak security issue</h1>
<div class="versiongraph"><a href="version.cgi?fixed=flatpak%2F0.9.6-1;fixed=flatpak%2F0.8.7-1;fixed=flatpak%2F0.8.5-2%2Bdeb9u1;found=flatpak%2F0.8.5-2;found=flatpak%2F0.8.5-1;package=flatpak;absolute=0;info=1;collapse=1"><img alt="version graph" src="version.cgi?width=2;collapse=1;package=flatpak;absolute=0;height=2;fixed=flatpak%2F0.9.6-1;fixed=flatpak%2F0.8.7-1;fixed=flatpak%2F0.8.5-2%2Bdeb9u1;found=flatpak%2F0.8.5-2;found=flatpak%2F0.8.5-1"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=flatpak">flatpak</a>;
Maintainer for <a href="pkgreport.cgi?package=flatpak">flatpak</a> is <a href="pkgreport.cgi?maint=pkg-utopia-maintainers%40lists.alioth.debian.org">Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=flatpak">flatpak</a> is <a href="pkgreport.cgi?src=flatpak">src:flatpak</a> (<a href="https://tracker.debian.org/pkg/flatpak">PTS</a>, <a href="https://buildd.debian.org/flatpak">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=flatpak">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=smcv%40debian.org">Simon McVittie &lt;smcv@debian.org&gt;</a></p>
  <p>Date: Wed, 21 Jun 2017 08:51:02 UTC</p>

<p>Severity: <em class="severity">critical</em></p>
<p>Tags: fixed-upstream, security, upstream</p>

<p>Found in versions flatpak/0.8.5-2, flatpak/0.8.5-1</p>
<p>Fixed in versions flatpak/0.9.6-1, flatpak/0.8.7-1, flatpak/0.8.5-2+deb9u1</p>

<p><strong>Done:</strong> Simon McVittie &lt;smcv@debian.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p><p>Forwarded to <a href="https://github.com/flatpak/flatpak/issues/845">https://github.com/flatpak/flatpak/issues/845</a></p>
</div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=865413;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1498035065 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#865413</code>; Package <code>flatpak</code>.
 (Wed, 21 Jun 2017 08:51:05 GMT) (<a href="bugreport.cgi?bug=865413;msg=2">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498035065 -->
<strong>Acknowledgement sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 21 Jun 2017 08:51:05 GMT) (<a href="bugreport.cgi?bug=865413;msg=4">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=5">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=5">mbox</a>, <a href="mailto:865413@bugs.debian.org?subject=Re%3A%20flatpak%3A%20Flatpak%20security%20issue%20%23845%20involving%20setuid%2Fworld-writable%0A%20files&amp;In-Reply-To=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E&amp;body=On%20Wed%2C%2021%20Jun%202017%2009%3A46%3A21%20%2B0100%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20Package%3A%20flatpak%0A%3E%20Version%3A%200.8.5-2%0A%3E%20Severity%3A%20critical%0A%3E%20Tags%3A%20security%20fixed-upstream%0A%3E%20Forwarded%3A%20https%3A%2F%2Fgithub.com%2Fflatpak%2Fflatpak%2Fissues%2F845%0A%3E%20Justification%3A%20potentially%20%28in%20worst%20case%29%20root%20security%20hole%0A%3E%20%0A%3E%20The%20Flatpak%20developers%20recently%20released%20version%200.8.7%20fixing%20a%20security%0A%3E%20issue.%20A%20third-party%20app%20repository%20could%20include%20malicious%20apps%20that%0A%3E%20contain%20files%20with%20inappropriate%20permissions%2C%20for%20example%20setuid%20or%0A%3E%20world-writable.%20Older%20Flatpak%20versions%20would%20deploy%20the%20files%20with%20those%0A%3E%20permissions%2C%20which%20would%20let%20a%20local%20attacker%20run%20the%20setuid%20executable%0A%3E%20or%20write%20to%20the%20world-writable%20location.%0A%3E%20%0A%3E%20In%20the%20case%20of%20the%20%22system%20helper%22%2C%20files%20deployed%20as%20part%20of%20the%20app%0A%3E%20are%20owned%20by%20root%2C%20so%20in%20the%20worst%20case%20they%20could%20be%20setuid%20root.%0A%3E%20%0A%3E%20Mitigations%3A%0A%3E%20%2A%20If%20you%20are%20running%20apps%20from%20a%20third%20party%20already%2C%20then%20there%20is%0A%3E%20%20%20already%20a%20trust%20relationship%20%28the%20app%20is%20sandboxed%2C%20but%20the%20sandbox%0A%3E%20%20%20is%20not%20very%20strict%20in%20practice%2C%20and%20the%20third-party%20vendor%20chooses%0A%3E%20%20%20what%20permissions%20the%20app%20will%20have%29%0A%3E%20%2A%20The%20default%20polkit%20policies%20will%20not%20allow%20apps%20to%20be%20installed%0A%3E%20%20%20system-wide%20unless%20a%20privileged%20%28root-equivalent%29%20user%20has%20added%0A%3E%20%20%20the%20third-party%20app%20repository%2C%20which%20indicates%20that%20the%20privileged%0A%3E%20%20%20user%20trusts%20the%20operator%20of%20that%20repository%0A%3E%20%2A%20The%20attacker%20exploiting%20the%20wrong%20permissions%20needs%20to%20be%20local%0A%3E%20%0A%3E%20It%20seems%20that%20upstream%20consider%20this%20to%20be%20a%20minor%20security%20issue%20due%0A%3E%20to%20those%20mitigations.%0A%3E%20%0A%3E%20For%20the%20buster%20and%20sid%20suites%2C%20this%20will%20be%20fixed%20in%200.8.7-1%20shortly.%0A%3E%20%0A%3E%20For%20the%20experimental%20suite%2C%20this%20will%20be%20fixed%20in%200.9.6-1.%20That%20will%0A%3E%20take%20a%20bit%20longer%20because%20it%20needs%20a%20newer%20version%20of%20libostree.%0A%3E%20%0A%3E%20Security%20team%3A%20do%20you%20want%20a%20backport%2FDSA%20for%20stretch-security%2C%20or%20do%0A%3E%20you%20consider%20the%20mitigations%20to%20be%20sufficient%20to%20fix%20this%20through%0A%3E%20a%20stable%20update%20instead%3F%20I%20am%20hoping%20to%20get%200.8.7%20into%20stretch%20r1%20as%20a%0A%3E%20stable%20update%2C%20but%200.8.6%20contains%20unrelated%20bug%20fixes%20that%20I%20realise%0A%3E%20you%20won%27t%20necessarily%20want%20in%20stretch-security%20%28proposed-update%20tracked%0A%3E%20at%20%3Chttps%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D864028%3E%29.%0A%3E%20%0A%3E%20For%20a%20stretch-security%20backport%20with%20just%20this%20fix%2C%20I%20could%20optionally%0A%3E%20also%20include%20these%20security-hardening-related%20commits%20from%200.8.6%3A%0A%3E%20https%3A%2F%2Fgithub.com%2Fflatpak%2Fflatpak%2Fcommit%2F6265200c83f23acceb3c9b192ebc1ffa9db140de%0A%3E%20https%3A%2F%2Fgithub.com%2Fflatpak%2Fflatpak%2Fcommit%2F414d699621664913dadebcf5db39732b99268c37%0A%3E%20Please%20let%20me%20know%20whether%20you%20would%20prefer%20those%20included%20or%20excluded.%0A%3E%20%0A%3E%20%20%20%20%20S%0A%3E%20%0A%3E%20%0A&amp;References=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> flatpak: Flatpak security issue #845 involving setuid/world-writable
 files</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 09:46:21 +0100</div>
</div>
<pre class="message">Package: flatpak
Version: 0.8.5-2
Severity: critical
Tags: security fixed-upstream
Forwarded: <a href="https://github.com/flatpak/flatpak/issues/845">https://github.com/flatpak/flatpak/issues/845</a>
Justification: potentially (in worst case) root security hole

The Flatpak developers recently released version 0.8.7 fixing a security
issue. A third-party app repository could include malicious apps that
contain files with inappropriate permissions, for example setuid or
world-writable. Older Flatpak versions would deploy the files with those
permissions, which would let a local attacker run the setuid executable
or write to the world-writable location.

In the case of the &quot;system helper&quot;, files deployed as part of the app
are owned by root, so in the worst case they could be setuid root.

Mitigations:
* If you are running apps from a third party already, then there is
  already a trust relationship (the app is sandboxed, but the sandbox
  is not very strict in practice, and the third-party vendor chooses
  what permissions the app will have)
* The default polkit policies will not allow apps to be installed
  system-wide unless a privileged (root-equivalent) user has added
  the third-party app repository, which indicates that the privileged
  user trusts the operator of that repository
* The attacker exploiting the wrong permissions needs to be local

It seems that upstream consider this to be a minor security issue due
to those mitigations.

For the buster and sid suites, this will be fixed in 0.8.7-1 shortly.

For the experimental suite, this will be fixed in 0.9.6-1. That will
take a bit longer because it needs a newer version of libostree.

Security team: do you want a backport/DSA for stretch-security, or do
you consider the mitigations to be sufficient to fix this through
a stable update instead? I am hoping to get 0.8.7 into stretch r1 as a
stable update, but 0.8.6 contains unrelated bug fixes that I realise
you won&#39;t necessarily want in stretch-security (proposed-update tracked
at &lt;<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=864028">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=864028</a>&gt;).

For a stretch-security backport with just this fix, I could optionally
also include these security-hardening-related commits from 0.8.6:
<a href="https://github.com/flatpak/flatpak/commit/6265200c83f23acceb3c9b192ebc1ffa9db140de">https://github.com/flatpak/flatpak/commit/6265200c83f23acceb3c9b192ebc1ffa9db140de</a>
<a href="https://github.com/flatpak/flatpak/commit/414d699621664913dadebcf5db39732b99268c37">https://github.com/flatpak/flatpak/commit/414d699621664913dadebcf5db39732b99268c37</a>
Please let me know whether you would prefer those included or excluded.

    S


</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- command:tag -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1498035782 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;upstream security fixed-upstream&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;fixed-upstream security&#39;
            };
-->
<strong>Added tag(s) upstream.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 21 Jun 2017 09:03:02 GMT) (<a href="bugreport.cgi?bug=865413;msg=7">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="8"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498037946 -->
<strong>Reply sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Wed, 21 Jun 2017 09:39:06 GMT) (<a href="bugreport.cgi?bug=865413;msg=9">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="10"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498037946 -->
<strong>Notification sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
Bug acknowledged by developer.
 (Wed, 21 Jun 2017 09:39:06 GMT) (<a href="bugreport.cgi?bug=865413;msg=11">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=11">mbox</a>, <a href="#10">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="12"></a><a name="msg12"></a><a href="#12">Message #12</a> received at 865413-close@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=12">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=12">mbox</a>, <a href="mailto:865413@bugs.debian.org?body=On%20Wed%2C%2021%20Jun%202017%2009%3A34%3A34%20%2B0000%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20flatpak%0A%3E%20Source-Version%3A%200.8.7-1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20flatpak%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20865413%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20%28supplier%20of%20updated%20flatpak%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Wed%2C%2021%20Jun%202017%2009%3A50%3A09%20%2B0100%0A%3E%20Source%3A%20flatpak%0A%3E%20Binary%3A%20flatpak%20flatpak-builder%20flatpak-tests%20gir1.2-flatpak-1.0%20libflatpak-dev%20libflatpak-doc%20libflatpak0%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%200.8.7-1%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Utopia%20Maintenance%20Team%20%3Cpkg-utopia-maintainers%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%0A%3E%20Closes%3A%20865413%0A%3E%20Description%3A%20%0A%3E%20%20flatpak%20%20%20%20-%20Application%20deployment%20framework%20for%20desktop%20apps%0A%3E%20%20flatpak-builder%20-%20Flatpak%20application%20building%20helper%0A%3E%20%20flatpak-tests%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28tests%29%0A%3E%20%20gir1.2-flatpak-1.0%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28introspection%29%0A%3E%20%20libflatpak0%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28library%29%0A%3E%20%20libflatpak-dev%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28development%29%0A%3E%20%20libflatpak-doc%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28documentation%29%0A%3E%20Changes%3A%0A%3E%20%20flatpak%20%280.8.7-1%29%20unstable%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20New%20upstream%20stable%20release%0A%3E%20%20%20%20%20%20-%20Security%3A%20prevent%20deploying%20files%20with%20inappropriate%20permissions%0A%3E%20%20%20%20%20%20%20%20%28world-writable%2C%20setuid%2C%20etc.%29%20%28Closes%3A%20%23865413%29%0A%3E%20%20%20%20%20%20-%20Security%3A%20make%20~%2F.local%2Fshare%2Fflatpak%20private%20to%20user%20to%20defend%0A%3E%20%20%20%20%20%20%20%20against%20app%20vendors%20that%20might%20have%20released%20files%20with%0A%3E%20%20%20%20%20%20%20%20inappropriate%20permissions%20in%20the%20past%0A%3E%20%20%20%20%20%20-%20If%20an%20error%20occurs%20during%20pull%2C%20do%20not%20double-set%20an%20error%2C%0A%3E%20%20%20%20%20%20%20%20which%20is%20considered%20to%20be%20invalid%0A%3E%20%20%20%20%20%20-%20Increase%20some%20arbitrary%20timeouts%20in%20a%20test%20to%20make%20it%20more%0A%3E%20%20%20%20%20%20%20%20reliable%0A%3E%20Checksums-Sha1%3A%20%0A%3E%20%203b68cc99e87c5640df92d707d0c52a45c410c7f9%203022%20flatpak_0.8.7-1.dsc%0A%3E%20%20de76311784f7561d851c0086699a6fa64563130e%20751020%20flatpak_0.8.7.orig.tar.xz%0A&amp;References=%3CE1dNc1y-000C1g-Jm%40fasolo.debian.org%3E&amp;In-Reply-To=%3CE1dNc1y-000C1g-Jm%40fasolo.debian.org%3E&amp;subject=Re%3A%20Bug%23865413%3A%20fixed%20in%20flatpak%200.8.7-1">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 865413-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#865413: fixed in flatpak 0.8.7-1</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 09:34:34 +0000</div>
</div>
<pre class="message">Source: flatpak
Source-Version: 0.8.7-1

We believe that the bug you reported is fixed in the latest version of
flatpak, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 865413@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Simon McVittie &lt;smcv@debian.org&gt; (supplier of updated flatpak package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Wed, 21 Jun 2017 09:50:09 +0100
Source: flatpak
Binary: flatpak flatpak-builder flatpak-tests gir1.2-flatpak-1.0 libflatpak-dev libflatpak-doc libflatpak0
Architecture: source
Version: 0.8.7-1
Distribution: unstable
Urgency: high
Maintainer: Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;
Changed-By: Simon McVittie &lt;smcv@debian.org&gt;
Closes: <a href="bugreport.cgi?bug=865413">865413</a>
Description: 
 flatpak    - Application deployment framework for desktop apps
 flatpak-builder - Flatpak application building helper
 flatpak-tests - Application deployment framework for desktop apps (tests)
 gir1.2-flatpak-1.0 - Application deployment framework for desktop apps (introspection)
 libflatpak0 - Application deployment framework for desktop apps (library)
 libflatpak-dev - Application deployment framework for desktop apps (development)
 libflatpak-doc - Application deployment framework for desktop apps (documentation)
Changes:
 flatpak (0.8.7-1) unstable; urgency=high
 .
   * New upstream stable release
     - Security: prevent deploying files with inappropriate permissions
       (world-writable, setuid, etc.) (Closes: #<a href="bugreport.cgi?bug=865413">865413</a>)
     - Security: make ~/.local/share/flatpak private to user to defend
       against app vendors that might have released files with
       inappropriate permissions in the past
     - If an error occurs during pull, do not double-set an error,
       which is considered to be invalid
     - Increase some arbitrary timeouts in a test to make it more
       reliable
Checksums-Sha1: 
 3b68cc99e87c5640df92d707d0c52a45c410c7f9 3022 flatpak_0.8.7-1.dsc
 de76311784f7561d851c0086699a6fa64563130e 751020 flatpak_0.8.7.orig.tar.xz
 bd2b51f5d18f16e5c91b93ac453149f78a0fde63 17316 flatpak_0.8.7-1.debian.tar.xz
Checksums-Sha256: 
 e9d20591ff4315d219853989906072599e0fe3d2bc2cf315df8a86b22571e6a7 3022 flatpak_0.8.7-1.dsc
 ddd2b1d5b291b55a12bee1ef802d2e36ca7c830e2164d38996fa62460196f311 751020 flatpak_0.8.7.orig.tar.xz
 69e28c35cf07a2f3ed23c35eb8bb672adcd63e83e7ad188b9894b3aa4eebe692 17316 flatpak_0.8.7-1.debian.tar.xz
Files: 
 8bffb71a0a2c97bc1572d8feaf6258d7 3022 admin optional flatpak_0.8.7-1.dsc
 b399c93dcd1602750f0c78219b256dd5 751020 admin optional flatpak_0.8.7.orig.tar.xz
 9bd3d577dc8a59a74853028dcbeb1c4b 17316 admin optional flatpak_0.8.7-1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEE2pjyXAhxxJpZ6v8sTej/KmPHzJAFAllKOSIACgkQTej/KmPH
zJAwlQ/+KQ5EPT6DVsVZAC1+7FgbLHlCxKv+im5YB5iLIgzMkQxB+yhT71c1LrGH
yP+7zNxNgrebCokha/xmaN3laI7PjF6I9hpgcED5aN6+mkOEyVr0+dX20UzwEUtl
yLQ+j1g39EzrqDIIQZKG9bYN3MPSWNT4koUoRVH7Tvt91SzQzfcR/1Q+BI/QIs2c
YtQ4CT6h3lHswZ8Lgg9PRtl2XxE5jZmwDFPtNNymA8KpXJQFNUbul0RZwuXAP1NV
p60uPe7SihboztS9S41tUsIaBmREWeppFMmGHfTCOM4LNMCV4VBFaLss76v7vPaq
c27R929/v2DSVVcbzZnS9ZvmM7niWB1UG7HVcOYi3bODSFxkrLAesFbTz2tpf4lI
2MWtZHo3gwIb88EnHcshMVJ+gCP3M7UVvcK5SnwSNDasfJ4uyKjnTvzD2ClHIFAw
DCpu5KfyZAGajMcH9oL3xUAbQQgNxhG+3o6cx/KIwKJ2aQu88E1sTE6DsmzRGcmS
AHO5DbH+B/MoGrTzA3OEwiJxG4cddbaXLPSp988TzLggLyaetpCCslsIkRut6qmZ
mMAv5kkdrouV3vHrTW22qZW9VUUDFRoOFnoKsk4q72Dgl+EzidH8ApwzSoV9Kbbt
9lb3XL7Nd6FMFTADdrYcRZp496r2WGXy9neulIYc+8MEYeoGPtk=
=iVvZ
-----END PGP SIGNATURE-----



</pre>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1498045150 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#865413</code>; Package <code>flatpak</code>.
 (Wed, 21 Jun 2017 11:39:10 GMT) (<a href="bugreport.cgi?bug=865413;msg=14">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="15"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498045150 -->
<strong>Acknowledgement sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 21 Jun 2017 11:39:10 GMT) (<a href="bugreport.cgi?bug=865413;msg=16">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=16">mbox</a>, <a href="#15">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="17"></a><a name="msg17"></a><a href="#17">Message #17</a> received at 865413@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=17">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=17">mbox</a>, <a href="mailto:865413@bugs.debian.org?subject=Re%3A%20Bug%23865413%3A%20flatpak%3A%20Flatpak%20security%20issue%20%23845%20involving%0A%20setuid%2Fworld-writable%20files&amp;In-Reply-To=%3C20170621113543.4j7berqy6lslezvy%40perpetual.pseudorandom.co.uk%3E&amp;References=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621113543.4j7berqy6lslezvy%40perpetual.pseudorandom.co.uk%3E&amp;body=On%20Wed%2C%2021%20Jun%202017%2012%3A35%3A43%20%2B0100%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%2021%20Jun%202017%20at%2009%3A46%3A21%20%2B0100%2C%20Simon%20McVittie%20wrote%3A%0A%3E%20%3E%20Security%20team%3A%20do%20you%20want%20a%20backport%2FDSA%20for%20stretch-security%2C%20or%20do%0A%3E%20%3E%20you%20consider%20the%20mitigations%20to%20be%20sufficient%20to%20fix%20this%20through%0A%3E%20%3E%20a%20stable%20update%20instead%3F%20I%20am%20hoping%20to%20get%200.8.7%20into%20stretch%20r1%20as%20a%0A%3E%20%3E%20stable%20update%2C%20but%200.8.6%20contains%20unrelated%20bug%20fixes%20that%20I%20realise%0A%3E%20%3E%20you%20won%27t%20necessarily%20want%20in%20stretch-security%20%28proposed-update%20tracked%0A%3E%20%3E%20at%20%3Chttps%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D864028%3E%29.%0A%3E%20%0A%3E%20Here%20is%20a%20proposed%20minimal%20backport%20for%20stretch%20in%20case%20you%20want%20one.%0A%3E%20I%20have%20source%20and%20binaries%20for%20this%20ready%20for%20upload.%20Does%20the%20security%0A%3E%20archive%20still%20want%20source%20packages%20built%20with%20debuild%20-sa%2C%20and%20do%20you%0A%3E%20accept%20source-only%20uploads%20for%20stretch-security%3F%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20%20%20%20%20S%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 865413@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Debian Security Team &lt;team@security.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#865413: flatpak: Flatpak security issue #845 involving
 setuid/world-writable files</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 12:35:43 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=865413;msg=17">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On Wed, 21 Jun 2017 at 09:46:21 +0100, Simon McVittie wrote:
&gt; Security team: do you want a backport/DSA for stretch-security, or do
&gt; you consider the mitigations to be sufficient to fix this through
&gt; a stable update instead? I am hoping to get 0.8.7 into stretch r1 as a
&gt; stable update, but 0.8.6 contains unrelated bug fixes that I realise
&gt; you won&#39;t necessarily want in stretch-security (proposed-update tracked
&gt; at &lt;<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=864028">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=864028</a>&gt;).

Here is a proposed minimal backport for stretch in case you want one.
I have source and binaries for this ready for upload. Does the security
archive still want source packages built with debuild -sa, and do you
accept source-only uploads for stretch-security?

Thanks,
    S
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=865413;filename=flatpak_0.8.5-2%2Bdeb9u1.diff;msg=17">flatpak_0.8.5-2+deb9u1.diff</a> (text/x-diff, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1498057743 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#865413</code>; Package <code>flatpak</code>.
 (Wed, 21 Jun 2017 15:09:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=19">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="20"></a>
<!-- request_addr: Moritz Mühlenhoff &lt;jmm@inutil.org&gt; -->
<!-- time:1498057743 -->
<strong>Acknowledgement sent</strong>
to <code>Moritz Mühlenhoff &lt;jmm@inutil.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 21 Jun 2017 15:09:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=21">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="22"></a><a name="msg22"></a><a href="#22">Message #22</a> received at 865413@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=22">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=22">mbox</a>, <a href="mailto:865413@bugs.debian.org?subject=Re%3A%20Bug%23865413%3A%20flatpak%3A%20Flatpak%20security%20issue%20%23845%20involving%0A%20setuid%2Fworld-writable%20files&amp;In-Reply-To=%3C20170621150803.i2dyxdegq66rh6bz%40pisco.westfalen.local%3E&amp;References=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621113543.4j7berqy6lslezvy%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621150803.i2dyxdegq66rh6bz%40pisco.westfalen.local%3E&amp;body=On%20Wed%2C%2021%20Jun%202017%2017%3A08%3A03%20%2B0200%20%3D%3FUTF-8%3FQ%3FMoritz_M%3DC3%3DBChlenhoff%3F%3D%20%3Cjmm%40inutil.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%20Jun%2021%2C%202017%20at%2012%3A35%3A43PM%20%2B0100%2C%20Simon%20McVittie%20wrote%3A%0A%3E%20%3E%20On%20Wed%2C%2021%20Jun%202017%20at%2009%3A46%3A21%20%2B0100%2C%20Simon%20McVittie%20wrote%3A%0A%3E%20%3E%20%3E%20Security%20team%3A%20do%20you%20want%20a%20backport%2FDSA%20for%20stretch-security%2C%20or%20do%0A%3E%20%3E%20%3E%20you%20consider%20the%20mitigations%20to%20be%20sufficient%20to%20fix%20this%20through%0A%3E%20%3E%20%3E%20a%20stable%20update%20instead%3F%20I%20am%20hoping%20to%20get%200.8.7%20into%20stretch%20r1%20as%20a%0A%3E%20%3E%20%3E%20stable%20update%2C%20but%200.8.6%20contains%20unrelated%20bug%20fixes%20that%20I%20realise%0A%3E%20%3E%20%3E%20you%20won%27t%20necessarily%20want%20in%20stretch-security%20%28proposed-update%20tracked%0A%3E%20%3E%20%3E%20at%20%3Chttps%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D864028%3E%29.%0A%3E%20%3E%20%0A%3E%20%3E%20Here%20is%20a%20proposed%20minimal%20backport%20for%20stretch%20in%20case%20you%20want%20one.%0A%3E%20%3E%20I%20have%20source%20and%20binaries%20for%20this%20ready%20for%20upload.%0A%3E%20%0A%3E%20Please%20go%20ahead.%0A%3E%20%0A%3E%20%3E%20Does%20the%20security%0A%3E%20%3E%20archive%20still%20want%20source%20packages%20built%20with%20debuild%20-sa%2C%20and%20do%20you%0A%3E%20%3E%20accept%20source-only%20uploads%20for%20stretch-security%3F%0A%3E%20%0A%3E%20source%20only%20uploads%20should%20work%20fine%2C%20but%20you%20still%20need%20to%20include%20the%0A%3E%20orig%20tarball%20if%20the%20package%20is%20new%20in%20the%20stretch-security%20suite%20%28and%0A%3E%20at%20this%20point%20almost%20everything%20is%29%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20%20%20%20%20%20%20%20%20Moritz%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jmm%40inutil.org" alt="">
<div class="header"><span class="headerfield">From:</span> Moritz Mühlenhoff &lt;jmm@inutil.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 865413@bugs.debian.org, Debian Security Team &lt;team@security.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#865413: flatpak: Flatpak security issue #845 involving
 setuid/world-writable files</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 17:08:03 +0200</div>
</div>
<pre class="message">On Wed, Jun 21, 2017 at 12:35:43PM +0100, Simon McVittie wrote:
&gt; On Wed, 21 Jun 2017 at 09:46:21 +0100, Simon McVittie wrote:
&gt; &gt; Security team: do you want a backport/DSA for stretch-security, or do
&gt; &gt; you consider the mitigations to be sufficient to fix this through
&gt; &gt; a stable update instead? I am hoping to get 0.8.7 into stretch r1 as a
&gt; &gt; stable update, but 0.8.6 contains unrelated bug fixes that I realise
&gt; &gt; you won&#39;t necessarily want in stretch-security (proposed-update tracked
&gt; &gt; at &lt;<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=864028">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=864028</a>&gt;).
&gt; 
&gt; Here is a proposed minimal backport for stretch in case you want one.
&gt; I have source and binaries for this ready for upload.

Please go ahead.

&gt; Does the security
&gt; archive still want source packages built with debuild -sa, and do you
&gt; accept source-only uploads for stretch-security?

source only uploads should work fine, but you still need to include the
orig tarball if the package is new in the stretch-security suite (and
at this point almost everything is)

Cheers,
        Moritz


</pre>

<div class="infmessage"><hr><p>
<a name="23"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1498062063 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#865413</code>; Package <code>flatpak</code>.
 (Wed, 21 Jun 2017 16:21:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=24">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="25"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498062063 -->
<strong>Acknowledgement sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 21 Jun 2017 16:21:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=26">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=26">mbox</a>, <a href="#25">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="27"></a><a name="msg27"></a><a href="#27">Message #27</a> received at 865413@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=27">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=27">mbox</a>, <a href="mailto:865413@bugs.debian.org?subject=Re%3A%20Bug%23865413%3A%20flatpak%3A%20Flatpak%20security%20issue%20%23845%20involving%0A%20setuid%2Fworld-writable%20files&amp;In-Reply-To=%3C20170621161949.54t6klcjgo5b34nj%40perpetual.pseudorandom.co.uk%3E&amp;body=On%20Wed%2C%2021%20Jun%202017%2017%3A19%3A49%20%2B0100%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%2021%20Jun%202017%20at%2017%3A08%3A03%20%2B0200%2C%20Moritz%20M%C3%BChlenhoff%20wrote%3A%0A%3E%20%3E%20On%20Wed%2C%20Jun%2021%2C%202017%20at%2012%3A35%3A43PM%20%2B0100%2C%20Simon%20McVittie%20wrote%3A%0A%3E%20%3E%20%3E%20Here%20is%20a%20proposed%20minimal%20backport%20for%20stretch%20in%20case%20you%20want%20one.%0A%3E%20%3E%20%3E%20I%20have%20source%20and%20binaries%20for%20this%20ready%20for%20upload.%0A%3E%20%3E%20%0A%3E%20%3E%20Please%20go%20ahead.%0A%3E%20%5B...%5D%0A%3E%20%3E%20source%20only%20uploads%20should%20work%20fine%0A%3E%20%0A%3E%20%20%20Uploading%20flatpak_0.8.5-2%2Bdeb9u1_source.changes%3A%20done.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20%20%20%20%20S%0A%3E%20%0A%3E%20%0A&amp;References=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621113543.4j7berqy6lslezvy%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621150803.i2dyxdegq66rh6bz%40pisco.westfalen.local%3E%0A%20%3C20170621161949.54t6klcjgo5b34nj%40perpetual.pseudorandom.co.uk%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Moritz Mühlenhoff &lt;jmm@inutil.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 865413@bugs.debian.org, Debian Security Team &lt;team@security.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#865413: flatpak: Flatpak security issue #845 involving
 setuid/world-writable files</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 17:19:49 +0100</div>
</div>
<pre class="message">On Wed, 21 Jun 2017 at 17:08:03 +0200, Moritz Mühlenhoff wrote:
&gt; On Wed, Jun 21, 2017 at 12:35:43PM +0100, Simon McVittie wrote:
&gt; &gt; Here is a proposed minimal backport for stretch in case you want one.
&gt; &gt; I have source and binaries for this ready for upload.
&gt; 
&gt; Please go ahead.
[...]
&gt; source only uploads should work fine

  Uploading flatpak_0.8.5-2+deb9u1_source.changes: done.

Regards,
    S


</pre>

<div class="msgreceived"><hr><p>
<a name="28"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498062963 -->
<strong>Reply sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Wed, 21 Jun 2017 16:36:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=29">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=29">mbox</a>, <a href="#28">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="30"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498062963 -->
<strong>Notification sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
Bug acknowledged by developer.
 (Wed, 21 Jun 2017 16:36:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=31">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=31">mbox</a>, <a href="#30">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="32"></a><a name="msg32"></a><a href="#32">Message #32</a> received at 865413-close@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=32">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=32">mbox</a>, <a href="mailto:865413@bugs.debian.org?body=On%20Wed%2C%2021%20Jun%202017%2016%3A34%3A30%20%2B0000%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20flatpak%0A%3E%20Source-Version%3A%200.9.6-1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20flatpak%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20865413%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20%28supplier%20of%20updated%20flatpak%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Wed%2C%2021%20Jun%202017%2015%3A09%3A59%20%2B0100%0A%3E%20Source%3A%20flatpak%0A%3E%20Binary%3A%20flatpak%20flatpak-builder%20flatpak-tests%20gir1.2-flatpak-1.0%20libflatpak-dev%20libflatpak-doc%20libflatpak0%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%200.9.6-1%0A%3E%20Distribution%3A%20experimental%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Utopia%20Maintenance%20Team%20%3Cpkg-utopia-maintainers%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%0A%3E%20Closes%3A%20865413%0A%3E%20Description%3A%20%0A%3E%20%20flatpak%20%20%20%20-%20Application%20deployment%20framework%20for%20desktop%20apps%0A%3E%20%20flatpak-builder%20-%20Flatpak%20application%20building%20helper%0A%3E%20%20flatpak-tests%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28tests%29%0A%3E%20%20gir1.2-flatpak-1.0%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28introspection%29%0A%3E%20%20libflatpak0%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28library%29%0A%3E%20%20libflatpak-dev%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28development%29%0A%3E%20%20libflatpak-doc%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28documentation%29%0A%3E%20Changes%3A%0A%3E%20%20flatpak%20%280.9.6-1%29%20experimental%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20New%20upstream%20release%0A%3E%20%20%20%20%20%20-%20Security%3A%20prevent%20deploying%20files%20with%20inappropriate%20permissions%0A%3E%20%20%20%20%20%20%20%20%28world-writable%2C%20setuid%2C%20etc.%29%20%28Closes%3A%20%23865413%29%0A%3E%20%20%20%20%20%20-%20Security%3A%20make%20~%2F.local%2Fshare%2Fflatpak%20private%20to%20user%20to%20defend%0A%3E%20%20%20%20%20%20%20%20against%20app%20vendors%20that%20might%20have%20released%20files%20with%0A%3E%20%20%20%20%20%20%20%20inappropriate%20permissions%20in%20the%20past%0A%3E%20%20%20%20%20%20-%20Bump%20libostree%20build-dependency%20to%202017.7%0A%3E%20%20%20%20%20%20-%20d%2Fp%2Ftestlibrary-Call-g_assert_no_error-first.patch%3A%0A%3E%20%20%20%20%20%20%20%20Drop%2C%20applied%20upstream%0A%3E%20%20%20%20%2A%20Standards-Version%3A%204.0.0%0A%3E%20%20%20%20%20%20-%20Use%20https%20URL%20for%20format%20of%20debian%2Fcopyright%0A%3E%20Checksums-Sha1%3A%20%0A%3E%20%206b7736a329247a37ddc1b1322c147d4f6e7b3143%203088%20flatpak_0.9.6-1.dsc%0A&amp;References=%3CE1dNiaM-00088C-B7%40fasolo.debian.org%3E&amp;In-Reply-To=%3CE1dNiaM-00088C-B7%40fasolo.debian.org%3E&amp;subject=Re%3A%20Bug%23865413%3A%20fixed%20in%20flatpak%200.9.6-1">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 865413-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#865413: fixed in flatpak 0.9.6-1</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 16:34:30 +0000</div>
</div>
<pre class="message">Source: flatpak
Source-Version: 0.9.6-1

We believe that the bug you reported is fixed in the latest version of
flatpak, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 865413@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Simon McVittie &lt;smcv@debian.org&gt; (supplier of updated flatpak package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Wed, 21 Jun 2017 15:09:59 +0100
Source: flatpak
Binary: flatpak flatpak-builder flatpak-tests gir1.2-flatpak-1.0 libflatpak-dev libflatpak-doc libflatpak0
Architecture: source
Version: 0.9.6-1
Distribution: experimental
Urgency: high
Maintainer: Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;
Changed-By: Simon McVittie &lt;smcv@debian.org&gt;
Closes: <a href="bugreport.cgi?bug=865413">865413</a>
Description: 
 flatpak    - Application deployment framework for desktop apps
 flatpak-builder - Flatpak application building helper
 flatpak-tests - Application deployment framework for desktop apps (tests)
 gir1.2-flatpak-1.0 - Application deployment framework for desktop apps (introspection)
 libflatpak0 - Application deployment framework for desktop apps (library)
 libflatpak-dev - Application deployment framework for desktop apps (development)
 libflatpak-doc - Application deployment framework for desktop apps (documentation)
Changes:
 flatpak (0.9.6-1) experimental; urgency=high
 .
   * New upstream release
     - Security: prevent deploying files with inappropriate permissions
       (world-writable, setuid, etc.) (Closes: #<a href="bugreport.cgi?bug=865413">865413</a>)
     - Security: make ~/.local/share/flatpak private to user to defend
       against app vendors that might have released files with
       inappropriate permissions in the past
     - Bump libostree build-dependency to 2017.7
     - d/p/testlibrary-Call-g_assert_no_error-first.patch:
       Drop, applied upstream
   * Standards-Version: 4.0.0
     - Use https URL for format of debian/copyright
Checksums-Sha1: 
 6b7736a329247a37ddc1b1322c147d4f6e7b3143 3088 flatpak_0.9.6-1.dsc
 e5be7975b5dac18ceff0ce693d964eeaf7e9b50e 845660 flatpak_0.9.6.orig.tar.xz
 f72d90871896aacc2e4b9cb5a0bd0725b95c62a9 17068 flatpak_0.9.6-1.debian.tar.xz
Checksums-Sha256: 
 e61b0a2bff08d7af501ff2f02dd9dbca6d0b07ee9c88d904d6bcd2b450fe476d 3088 flatpak_0.9.6-1.dsc
 d0835b70db8de97d3d3a6a57ecbc0bf8c69d308daa20897079634521e1949f9e 845660 flatpak_0.9.6.orig.tar.xz
 48d72ab4463f5cea1834f91c973991d73fbdf4dfac38e603c458ddc5840f4663 17068 flatpak_0.9.6-1.debian.tar.xz
Files: 
 c879e47c0e72d693dd8209ad600a1a3a 3088 admin optional flatpak_0.9.6-1.dsc
 2aa4dee109f689e498a5c4daace83b5d 845660 admin optional flatpak_0.9.6.orig.tar.xz
 085ab1ca0ed76e9d5e07074c89e75e19 17068 admin optional flatpak_0.9.6-1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEE2pjyXAhxxJpZ6v8sTej/KmPHzJAFAllKnTcACgkQTej/KmPH
zJBTrg/7BnZALPBFnG6e2QtLHsdeWtqJNvz321Nisdt1wF1U+P0+c0yvNFnkrIvN
3j7i18pE0ieCM5UvbxVfHIuWhH2opBwcYCBSJhUYFvvWLBn8utPkAzisdVhx0KtR
Y9UxhBm36Kjm8QEFey20VYMr98GlYUZCmm3ypjhx2A267qQ7/kkxHI3FUjMJTWnh
tf07PRDutZdthiFoGc8141YI53GZwUs/GjkQ4nhQx66WRqxCyYncnI5TsP5PqyMt
NtZQyTVndoxg8GWWIfdC1ujEW8S30k8iSdrB2gwTZkSQWLgBZNvioeGn0nUmKIPE
ZJ55J54fu2SNXY+nqFpSphuUpGJS7DITQ4CQzApuQsAL2aBDECkbHc3GfRjI2bH5
pCgmWBFolBvoWTKaTC6dUqBjGcFjlrQ/x6nRZotxMN1aUizh8/o+3kUV8NVWyJO4
PbiLGCnKERJWVtwmGak/bEX9s+m+PabC9CAvBTEdY9LIMbQxIkIsT4q/DI0ndMSn
O0RBvBczQtWR+KRAG152L9MDWEOKiZexNxaFnoQQ5E4gM1ifw/YDdkzZlJyb7Oue
6hzbFzB3tjMoTAn/+UQX6I4etfmimMnrIVYT2zUatkGVFFvce9blMgRXUXb9pAoa
jJKLaHcP91F+xPw/MubqZpVuKlt+nZuq0j7K+0DqZsVG5QfnBOY=
=8tQf
-----END PGP SIGNATURE-----



</pre>

<div class="infmessage"><hr><p>
<a name="33"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1498064223 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#865413</code>; Package <code>flatpak</code>.
 (Wed, 21 Jun 2017 16:57:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=34">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=34">mbox</a>, <a href="#33">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="35"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1498064223 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 21 Jun 2017 16:57:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=36">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=36">mbox</a>, <a href="#35">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="37"></a><a name="msg37"></a><a href="#37">Message #37</a> received at 865413@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=37">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=37">mbox</a>, <a href="mailto:865413@bugs.debian.org?subject=Re%3A%20Bug%23865413%3A%20flatpak%3A%20Flatpak%20security%20issue%20%23845%20involving%0A%20setuid%2Fworld-writable%20files&amp;In-Reply-To=%3C20170621165225.h73mn3bsjhmabq2b%40eldamar.local%3E&amp;body=On%20Wed%2C%2021%20Jun%202017%2018%3A52%3A25%20%2B0200%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Control%3A%20retitle%20flatpak%3A%20CVE-2017-9780%3A%20Flatpak%20security%20issue%20%23845%20involving%20setuid%2Fworld-writable%20files%0A%3E%20%0A%3E%20Hi%20Simon%2C%0A%3E%20%0A%3E%20On%20Wed%2C%20Jun%2021%2C%202017%20at%2009%3A46%3A21AM%20%2B0100%2C%20Simon%20McVittie%20wrote%3A%0A%3E%20%3E%20Package%3A%20flatpak%0A%3E%20%3E%20Version%3A%200.8.5-2%0A%3E%20%3E%20Severity%3A%20critical%0A%3E%20%3E%20Tags%3A%20security%20fixed-upstream%0A%3E%20%3E%20Forwarded%3A%20https%3A%2F%2Fgithub.com%2Fflatpak%2Fflatpak%2Fissues%2F845%0A%3E%20%3E%20Justification%3A%20potentially%20%28in%20worst%20case%29%20root%20security%20hole%0A%3E%20%3E%20%0A%3E%20%3E%20The%20Flatpak%20developers%20recently%20released%20version%200.8.7%20fixing%20a%20security%0A%3E%20%3E%20issue.%20A%20third-party%20app%20repository%20could%20include%20malicious%20apps%20that%0A%3E%20%3E%20contain%20files%20with%20inappropriate%20permissions%2C%20for%20example%20setuid%20or%0A%3E%20%3E%20world-writable.%20Older%20Flatpak%20versions%20would%20deploy%20the%20files%20with%20those%0A%3E%20%3E%20permissions%2C%20which%20would%20let%20a%20local%20attacker%20run%20the%20setuid%20executable%0A%3E%20%3E%20or%20write%20to%20the%20world-writable%20location.%0A%3E%20%3E%20%0A%3E%20%3E%20In%20the%20case%20of%20the%20%22system%20helper%22%2C%20files%20deployed%20as%20part%20of%20the%20app%0A%3E%20%3E%20are%20owned%20by%20root%2C%20so%20in%20the%20worst%20case%20they%20could%20be%20setuid%20root.%0A%3E%20%3E%20%0A%3E%20%3E%20Mitigations%3A%0A%3E%20%3E%20%2A%20If%20you%20are%20running%20apps%20from%20a%20third%20party%20already%2C%20then%20there%20is%0A%3E%20%3E%20%20%20already%20a%20trust%20relationship%20%28the%20app%20is%20sandboxed%2C%20but%20the%20sandbox%0A%3E%20%3E%20%20%20is%20not%20very%20strict%20in%20practice%2C%20and%20the%20third-party%20vendor%20chooses%0A%3E%20%3E%20%20%20what%20permissions%20the%20app%20will%20have%29%0A%3E%20%3E%20%2A%20The%20default%20polkit%20policies%20will%20not%20allow%20apps%20to%20be%20installed%0A%3E%20%3E%20%20%20system-wide%20unless%20a%20privileged%20%28root-equivalent%29%20user%20has%20added%0A%3E%20%3E%20%20%20the%20third-party%20app%20repository%2C%20which%20indicates%20that%20the%20privileged%0A%3E%20%3E%20%20%20user%20trusts%20the%20operator%20of%20that%20repository%0A%3E%20%3E%20%2A%20The%20attacker%20exploiting%20the%20wrong%20permissions%20needs%20to%20be%20local%0A%3E%20%3E%20%0A%3E%20%3E%20It%20seems%20that%20upstream%20consider%20this%20to%20be%20a%20minor%20security%20issue%20due%0A%3E%20%3E%20to%20those%20mitigations.%0A%3E%20%0A%3E%20I%20requested%20a%20CVE%20for%20this%20issue%2C%20and%20it%20got%20assigned%20CVE-2017-9780.%0A%3E%20Since%20you%20are%20more%20in%20in%20the%20source%20package%2C%20can%20you%20do%20a%20post%20to%0A%3E%20oss-security%20so%20other%20are%20informed%20as%20well%20%28in%20case%20not%20anyway%20already%0A%3E%20known%3F%29.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Salvatore%0A%3E%20%0A%3E%20%0A&amp;References=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621165225.h73mn3bsjhmabq2b%40eldamar.local%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Simon McVittie &lt;smcv@debian.org&gt;, 865413@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#865413: flatpak: Flatpak security issue #845 involving
 setuid/world-writable files</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 18:52:25 +0200</div>
</div>
<pre class="message">Control: retitle flatpak: <a href="https://security-tracker.debian.org/tracker/CVE-2017-9780">CVE-2017-9780</a>: Flatpak security issue #845 involving setuid/world-writable files

Hi Simon,

On Wed, Jun 21, 2017 at 09:46:21AM +0100, Simon McVittie wrote:
&gt; Package: flatpak
&gt; Version: 0.8.5-2
&gt; Severity: critical
&gt; Tags: security fixed-upstream
&gt; Forwarded: <a href="https://github.com/flatpak/flatpak/issues/845">https://github.com/flatpak/flatpak/issues/845</a>
&gt; Justification: potentially (in worst case) root security hole
&gt; 
&gt; The Flatpak developers recently released version 0.8.7 fixing a security
&gt; issue. A third-party app repository could include malicious apps that
&gt; contain files with inappropriate permissions, for example setuid or
&gt; world-writable. Older Flatpak versions would deploy the files with those
&gt; permissions, which would let a local attacker run the setuid executable
&gt; or write to the world-writable location.
&gt; 
&gt; In the case of the &quot;system helper&quot;, files deployed as part of the app
&gt; are owned by root, so in the worst case they could be setuid root.
&gt; 
&gt; Mitigations:
&gt; * If you are running apps from a third party already, then there is
&gt;   already a trust relationship (the app is sandboxed, but the sandbox
&gt;   is not very strict in practice, and the third-party vendor chooses
&gt;   what permissions the app will have)
&gt; * The default polkit policies will not allow apps to be installed
&gt;   system-wide unless a privileged (root-equivalent) user has added
&gt;   the third-party app repository, which indicates that the privileged
&gt;   user trusts the operator of that repository
&gt; * The attacker exploiting the wrong permissions needs to be local
&gt; 
&gt; It seems that upstream consider this to be a minor security issue due
&gt; to those mitigations.

I requested a CVE for this issue, and it got assigned <a href="https://security-tracker.debian.org/tracker/CVE-2017-9780">CVE-2017-9780</a>.
Since you are more in in the source package, can you do a post to
oss-security so other are informed as well (in case not anyway already
known?).

Regards,
Salvatore


</pre>

<div class="msgreceived"><hr><p>
<a name="38"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1498064767 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;flatpak: CVE-2017-9780: Flatpak security issue&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;flatpak: Flatpak security issue #845 involving setuid/world-writable files&#39;
            };
-->
<strong>Changed Bug title to &#39;flatpak: CVE-2017-9780: Flatpak security issue&#39; from &#39;flatpak: Flatpak security issue #845 involving setuid/world-writable files&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 21 Jun 2017 17:06:07 GMT) (<a href="bugreport.cgi?bug=865413;msg=39">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=39">mbox</a>, <a href="#38">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="40"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1498079345 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#865413</code>; Package <code>flatpak</code>.
 (Wed, 21 Jun 2017 21:09:05 GMT) (<a href="bugreport.cgi?bug=865413;msg=41">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=41">mbox</a>, <a href="#40">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="42"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498079345 -->
<strong>Acknowledgement sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 21 Jun 2017 21:09:05 GMT) (<a href="bugreport.cgi?bug=865413;msg=43">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=43">mbox</a>, <a href="#42">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="44"></a><a name="msg44"></a><a href="#44">Message #44</a> received at 865413@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=44">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=44">mbox</a>, <a href="mailto:865413@bugs.debian.org?In-Reply-To=%3C20170621210738.nvawk52qqntjvmzn%40perpetual.pseudorandom.co.uk%3E&amp;subject=Re%3A%20Bug%23865413%3A%20flatpak%3A%20Flatpak%20security%20issue%20%23845%20involving%0A%20setuid%2Fworld-writable%20files&amp;body=On%20Wed%2C%2021%20Jun%202017%2022%3A07%3A38%20%2B0100%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%2021%20Jun%202017%20at%2018%3A52%3A25%20%2B0200%2C%20Salvatore%20Bonaccorso%20wrote%3A%0A%3E%20%3E%20I%20requested%20a%20CVE%20for%20this%20issue%2C%20and%20it%20got%20assigned%20CVE-2017-9780.%0A%3E%20%3E%20Since%20you%20are%20more%20in%20in%20the%20source%20package%2C%20can%20you%20do%20a%20post%20to%0A%3E%20%3E%20oss-security%20so%20other%20are%20informed%20as%20well%20%28in%20case%20not%20anyway%20already%0A%3E%20%3E%20known%3F%29.%0A%3E%20%0A%3E%20I%27ve%20contacted%20upstream%20via%20the%20GitHub%20issue%20for%20comment%20on%20a%20draft%0A%3E%20advisory.%0A%3E%20%0A%3E%20%20%20%20%20S%0A%3E%20%0A%3E%20%0A&amp;References=%3C20170621084621.m3ftifdpulhs7og6%40perpetual.pseudorandom.co.uk%3E%0A%20%3C20170621165225.h73mn3bsjhmabq2b%40eldamar.local%3E%0A%20%3C20170621210738.nvawk52qqntjvmzn%40perpetual.pseudorandom.co.uk%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 865413@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#865413: flatpak: Flatpak security issue #845 involving
 setuid/world-writable files</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 21 Jun 2017 22:07:38 +0100</div>
</div>
<pre class="message">On Wed, 21 Jun 2017 at 18:52:25 +0200, Salvatore Bonaccorso wrote:
&gt; I requested a CVE for this issue, and it got assigned <a href="https://security-tracker.debian.org/tracker/CVE-2017-9780">CVE-2017-9780</a>.
&gt; Since you are more in in the source package, can you do a post to
&gt; oss-security so other are informed as well (in case not anyway already
&gt; known?).

I&#39;ve contacted upstream via the GitHub issue for comment on a draft
advisory.

    S


</pre>

<div class="msgreceived"><hr><p>
<a name="45"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1498111383 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;flatpak/0.9.6-1&#39;,
                                    &#39;flatpak/0.8.7-1&#39;
                                  ],
              &#39;found_versions&#39; =&gt; [
                                    &#39;flatpak/0.8.5-2&#39;,
                                    &#39;flatpak/0.8.5-1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;flatpak/0.8.5-2&#39;
                                  ],
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;flatpak/0.8.7-1&#39;,
                                    &#39;flatpak/0.9.6-1&#39;
                                  ]
            };
-->
<strong>Marked as found in versions flatpak/0.8.5-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Thu, 22 Jun 2017 06:03:03 GMT) (<a href="bugreport.cgi?bug=865413;msg=46">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=46">mbox</a>, <a href="#45">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="47"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498315867 -->
<strong>Reply sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Sat, 24 Jun 2017 14:51:07 GMT) (<a href="bugreport.cgi?bug=865413;msg=48">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=48">mbox</a>, <a href="#47">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="49"></a>
<!-- request_addr: Simon McVittie &lt;smcv@debian.org&gt; -->
<!-- time:1498315867 -->
<strong>Notification sent</strong>
to <code>Simon McVittie &lt;smcv@debian.org&gt;</code>:<br>
Bug acknowledged by developer.
 (Sat, 24 Jun 2017 14:51:07 GMT) (<a href="bugreport.cgi?bug=865413;msg=50">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=50">mbox</a>, <a href="#49">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="51"></a><a name="msg51"></a><a href="#51">Message #51</a> received at 865413-close@bugs.debian.org (<a href="bugreport.cgi?bug=865413;msg=51">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=51">mbox</a>, <a href="mailto:865413@bugs.debian.org?References=%3CE1dOmLT-000GQd-6W%40fasolo.debian.org%3E&amp;body=On%20Sat%2C%2024%20Jun%202017%2014%3A47%3A31%20%2B0000%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20flatpak%0A%3E%20Source-Version%3A%200.8.5-2%2Bdeb9u1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20flatpak%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20865413%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%20%28supplier%20of%20updated%20flatpak%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Wed%2C%2021%20Jun%202017%2012%3A05%3A49%20%2B0100%0A%3E%20Source%3A%20flatpak%0A%3E%20Binary%3A%20flatpak%20flatpak-builder%20flatpak-tests%20gir1.2-flatpak-1.0%20libflatpak-dev%20libflatpak-doc%20libflatpak0%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%200.8.5-2%2Bdeb9u1%0A%3E%20Distribution%3A%20stretch-security%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Utopia%20Maintenance%20Team%20%3Cpkg-utopia-maintainers%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Simon%20McVittie%20%3Csmcv%40debian.org%3E%0A%3E%20Closes%3A%20865413%0A%3E%20Description%3A%20%0A%3E%20%20flatpak%20%20%20%20-%20Application%20deployment%20framework%20for%20desktop%20apps%0A%3E%20%20flatpak-builder%20-%20Flatpak%20application%20building%20helper%0A%3E%20%20flatpak-tests%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28tests%29%0A%3E%20%20gir1.2-flatpak-1.0%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28introspection%29%0A%3E%20%20libflatpak0%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28library%29%0A%3E%20%20libflatpak-dev%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28development%29%0A%3E%20%20libflatpak-doc%20-%20Application%20deployment%20framework%20for%20desktop%20apps%20%28documentation%29%0A%3E%20Changes%3A%0A%3E%20%20flatpak%20%280.8.5-2%2Bdeb9u1%29%20stretch-security%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20d%2Fp%2FEnsure-we-don-t-install-world-writable-dirs-or-setuid-fil.patch%3A%0A%3E%20%20%20%20%20%20Patch%20from%20upstream%20stable%20release%200.8.7.%0A%3E%20%20%20%20%20%20Prevent%20deploying%20files%20with%20inappropriate%20permissions%0A%3E%20%20%20%20%20%20%28world-writable%2C%20setuid%2C%20etc.%29%20%28Closes%3A%20%23865413%29%0A%3E%20%20%20%20%2A%20d%2Fp%2Fdir-Ensure-.local-share-flatpak-is-0700.patch%3A%0A%3E%20%20%20%20%20%20Patch%20from%20upstream%20stable%20release%200.8.7.%0A%3E%20%20%20%20%20%20Make%20~%2F.local%2Fshare%2Fflatpak%20private%20to%20user%20to%20defend%20against%20app%0A%3E%20%20%20%20%20%20vendors%20that%20might%20have%20released%20files%20with%20inappropriate%20permissions%0A%3E%20%20%20%20%20%20in%20the%20past%0A%3E%20Checksums-Sha1%3A%20%0A%3E%20%20e846b80ef7681b3c07097543e4caedb8dc27d0c5%203050%20flatpak_0.8.5-2%2Bdeb9u1.dsc%0A%3E%20%2089d0784b27123ec61e2efa36febfdbe2f2edb009%20744808%20flatpak_0.8.5.orig.tar.xz%0A%3E%20%207534963a7c9b6bcb222c20e4dd978f65a63bd24b%2019528%20flatpak_0.8.5-2%2Bdeb9u1.debian.tar.xz%0A&amp;subject=Re%3A%20Bug%23865413%3A%20fixed%20in%20flatpak%200.8.5-2%2Bdeb9u1&amp;In-Reply-To=%3CE1dOmLT-000GQd-6W%40fasolo.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=smcv%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Simon McVittie &lt;smcv@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 865413-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#865413: fixed in flatpak 0.8.5-2+deb9u1</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 24 Jun 2017 14:47:31 +0000</div>
</div>
<pre class="message">Source: flatpak
Source-Version: 0.8.5-2+deb9u1

We believe that the bug you reported is fixed in the latest version of
flatpak, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 865413@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Simon McVittie &lt;smcv@debian.org&gt; (supplier of updated flatpak package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Wed, 21 Jun 2017 12:05:49 +0100
Source: flatpak
Binary: flatpak flatpak-builder flatpak-tests gir1.2-flatpak-1.0 libflatpak-dev libflatpak-doc libflatpak0
Architecture: source
Version: 0.8.5-2+deb9u1
Distribution: stretch-security
Urgency: high
Maintainer: Utopia Maintenance Team &lt;pkg-utopia-maintainers@lists.alioth.debian.org&gt;
Changed-By: Simon McVittie &lt;smcv@debian.org&gt;
Closes: <a href="bugreport.cgi?bug=865413">865413</a>
Description: 
 flatpak    - Application deployment framework for desktop apps
 flatpak-builder - Flatpak application building helper
 flatpak-tests - Application deployment framework for desktop apps (tests)
 gir1.2-flatpak-1.0 - Application deployment framework for desktop apps (introspection)
 libflatpak0 - Application deployment framework for desktop apps (library)
 libflatpak-dev - Application deployment framework for desktop apps (development)
 libflatpak-doc - Application deployment framework for desktop apps (documentation)
Changes:
 flatpak (0.8.5-2+deb9u1) stretch-security; urgency=high
 .
   * d/p/Ensure-we-don-t-install-world-writable-dirs-or-setuid-fil.patch:
     Patch from upstream stable release 0.8.7.
     Prevent deploying files with inappropriate permissions
     (world-writable, setuid, etc.) (Closes: #<a href="bugreport.cgi?bug=865413">865413</a>)
   * d/p/dir-Ensure-.local-share-flatpak-is-0700.patch:
     Patch from upstream stable release 0.8.7.
     Make ~/.local/share/flatpak private to user to defend against app
     vendors that might have released files with inappropriate permissions
     in the past
Checksums-Sha1: 
 e846b80ef7681b3c07097543e4caedb8dc27d0c5 3050 flatpak_0.8.5-2+deb9u1.dsc
 89d0784b27123ec61e2efa36febfdbe2f2edb009 744808 flatpak_0.8.5.orig.tar.xz
 7534963a7c9b6bcb222c20e4dd978f65a63bd24b 19528 flatpak_0.8.5-2+deb9u1.debian.tar.xz
Checksums-Sha256: 
 1d3ffc3be9fc2596816c00a81534b66d891959540dfa6bed8dfe7b69aa6bac74 3050 flatpak_0.8.5-2+deb9u1.dsc
 fd31bc23e5b62a187fa9eaed937aadac2ab48911c338005b39ed889b2ebf95e5 744808 flatpak_0.8.5.orig.tar.xz
 4033dc04ac1465fec19145e7814d98a64660184403ffa16b44465eac680ea604 19528 flatpak_0.8.5-2+deb9u1.debian.tar.xz
Files: 
 acbf2aeac7e5c18ee1a741b7433d3e28 3050 admin optional flatpak_0.8.5-2+deb9u1.dsc
 d160b96fdee4be1f9b0ecf60641899f8 744808 admin optional flatpak_0.8.5.orig.tar.xz
 97a2460243a83ffc779718a904bcbaa0 19528 admin optional flatpak_0.8.5-2+deb9u1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEE2pjyXAhxxJpZ6v8sTej/KmPHzJAFAllKl/oACgkQTej/KmPH
zJC8vxAAjzDWa3as3hhmA7sLD3mQu0/j2/q2Jv85TM2NF6crpzYHYvfDG1Aat7xK
OYttxp5DfkcSfYM1zFI3PBwvPg/wrd9aHZC7IHKUSsfbXnqNnRrwoXns+7UheC6L
BWrGmH0e4vh9fOvPeGB9DeDtE2qZ/SNhbSFcG1SeailDgnSVhaumSIh/HiUAPwra
G4WybbByMXHj3FtWMdL551DHr0IWvDhDBZSkhf/WO/vY3sAFk+u/Ix7LA/KM+AM8
IZBtd2I8woT7a0B3qSBYXFp1KGkJsSLZvSb93fe70GBW/XqCCpZHl5xktyRvc3VL
wypDw4vuK1dXcnpfptgiIL/avEmecIHUYdd7C/OYlNDGuycarI3ozoEcuY1jwbW5
mGkTEEcLa4XuNgm6II61NfSEvfpgkPUxHz9X2P4LLIWODHJQw+iCUQdmxtT4oEMv
M9HqGLgBe6XZGdJu9LT9wawrdXGxT0/kLxgl/S2ehN0QIdJuwJgue+pzneqDrxId
DQMhCRvRbn2vZbT8s/pQW7OTGYgikn6DLyf9kRlwvDsM+NZIHOKHGYH6OuH1Crp4
LfnoIT4K0VTUb6dzoAlnikklmQkm/Xc0cg1Y1C1D6MTdSruDvRwvEn4y86vN0VAI
IJuQcqtWroq4Wv2mWPjAJOwh0YN4LfDJvwe2CrpB7W42MeC3adg=
=Lp3U
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="52"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1500794744 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Sun, 23 Jul 2017 07:25:44 GMT) (<a href="bugreport.cgi?bug=865413;msg=53">full text</a>, <a href="bugreport.cgi?bug=865413;mbox=yes;msg=53">mbox</a>, <a href="#52">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=865413">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:15:26 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->bembo<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
