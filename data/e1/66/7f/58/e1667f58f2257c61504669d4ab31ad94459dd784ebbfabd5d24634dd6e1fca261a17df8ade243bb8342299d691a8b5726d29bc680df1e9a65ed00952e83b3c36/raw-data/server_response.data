<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/swift3/+bug/1497424/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1497424 “Date validation bypassed if 'Date' header missing ...” : Bugs : Swift3</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1497424" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1497424/bug.atom" title="Bug 1497424 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="According to http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonRequestHeaders.html when an Authorization header is specified, either a Date or x-amz-date header needs to be specified.

If both are specified, the x-amz-date header takes precedence.

Right now, only the Date header is validated against expiry or skewed by more than 5 minutes.  See _validate_headers function in request.py for validation code.  x-amz-date should take precedence.

It appears that if the Date header is missi..." />
      <meta property="og:description" content="According to http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonRequestHeaders.html when an Authorization header is specified, either a Date or x-amz-date header needs to be specified.

If both are specified, the x-amz-date header takes precedence.

Right now, only the Date header is validated against expiry or skewed by more than 5 minutes.  See _validate_headers function in request.py for validation code.  x-amz-date should take precedence.

It appears that if the Date header is missi..." />
    

    
    
      <meta property="og:title" content="Bug #1497424 “Date validation bypassed if 'Date' header missing ...” : Bugs : Swift3" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1497424" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = [];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/swift3/+bug/1497424/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/swift3"><img alt="" width="64" height="64" src="/@@/product-logo" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/swift3">Swift3</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/swift3">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/swift3">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/swift3">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/swift3">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/swift3">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/swift3">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    Date validation bypassed if 'Date' header missing (CVE-2015-8466)
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1497424 reported by
      <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam</a>
      <time title="2015-09-18 19:31:16 UTC" datetime="2015-09-18T19:31:16.999318+00:00">on 2015-09-18</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">264</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary1908718">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/swift3/+bug/1497424/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1908718">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/swift3">Swift3</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/swift3/+bug/1497424/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/swift3/+bug/1497424/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1908718">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1908718">
     <td colspan="7"><form action="/swift3/+bug/1497424/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/swift3">Swift3</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2015-09-18 19:31:16 UTC" datetime="2015-09-18T19:31:16.999318+00:00">2015-09-18</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2015-10-02 02:15:10 UTC" datetime="2015-10-02T02:15:10.177505+00:00">2015-10-02</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2015-12-04 07:03:37 UTC" datetime="2015-12-04T07:03:37.375625+00:00">2015-12-04</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2015-12-09 11:15:38 UTC" datetime="2015-12-09T11:15:38.755192+00:00">2015-12-09</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="swift3.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="swift3.target.option.package" name="swift3.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="swift3.target.distribution" name="swift3.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="swift3.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="swift3.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="swift3.target.package"
                         name="swift3.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;swift3.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('swift3.target.package');
              var select_menu = Y.DOM.byId('swift3.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-swift3-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_team_text": "Remove team", "header": "Select a package", "show_remove_button": false, "selected_value": null, "step_title": "Search by name", "show_assign_me_button": false, "vocabulary_filters": [], "vocabulary_name": "DistributionPackage", "input_element": "swift3.target.package", "show_widget_id": "show-widget-swift3-target-package", "assign_me_text": "Pick me", "show_create_team": false, "remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "selected_value_metadata": null};
        var show_widget_id = 'show-widget-swift3-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="swift3.target.option.product" name="swift3.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="swift3" id="swift3.target.product"
                         name="swift3.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;swift3.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('swift3.target.product');
              var select_menu = Y.DOM.byId('swift3.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-swift3-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_team_text": "Remove team", "header": "Select a project", "show_remove_button": false, "selected_value": "swift3", "step_title": "Search", "show_assign_me_button": false, "vocabulary_filters": [], "vocabulary_name": "Product", "input_element": "swift3.target.product", "show_widget_id": "show-widget-swift3-target-product", "assign_me_text": "Pick me", "show_create_team": false, "remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "selected_value_metadata": null};
        var show_widget_id = 'show-widget-swift3-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="swift3.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="swift3.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="swift3.status" name="swift3.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="swift3.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="swift3.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="swift3.assignee.assign_to_nobody" name="swift3.assignee.option" value="swift3.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="swift3.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="swift3.assignee.assign_to_me" name="swift3.assignee.option" value="swift3.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="swift3.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="swift3.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="swift3.comment_on_change" name="swift3.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/swift3/+bug/1497424/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/swift3/+bug/1497424/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/swift3/+bug/1497424/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>According to <a rel="nofollow" href="http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonRequestHeaders.html">http://<wbr />docs.aws.<wbr />amazon.<wbr />com/AmazonS3/<wbr />latest/<wbr />API/RESTCommonR<wbr />equestHeaders.<wbr />html</a> when an Authorization header is specified, either a Date or x-amz-date header needs to be specified.</p>
<p>If both are specified, the x-amz-date header takes precedence.</p>
<p>Right now, only the Date header is validated against expiry or skewed by more than 5 minutes.  See _validate_headers function in request.py for validation code.  x-amz-date should take precedence.</p>
<p>It appears that if the Date header is missing for any reason, then these checks are not done and the request would validate.  Swift3 would then be vulnerable to a replay attack, since the request could be replayed at any time, even after expiry time, or after the skew period.  This would be most likely to occur with a client that only uses the x-amz-date headers with Authorization requests.</p>
<p>I think the solution should be to a) validate the x-amz-date header. b) Respond with an error if the date/x-amz-date headers don&#x27;t validate when the authorization header is sent.  S3 returns the AccessDenied error &#x27;AWS authentication requires a valid Date or x-amz-date header&#x27; if the header(s) are missing or malformed.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            
          </span>
          <span id="tag-list">
          </span>
          <a href="+edit" title="Add tags" id="tags-trigger" class="sprite add">Add tags</a>
          
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2015-8466" title="Swift3 before 1.9 allows remote attac...">2015-8466</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam (dtam)</a>
    
    <time title="2015-09-18 23:23:35 UTC" datetime="2015-09-18T23:23:35.526954+00:00">on 2015-09-18</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Date validation bypassed if &quot;Date&#x27; header missing<br />+ Date validation bypassed if &#x27;Date&#x27; header missing
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-10-02T01:01:49.550951+00:00" title="2015-10-02 01:01:49 UTC">on 2015-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/swift3/+bug/1497424/comments/1">
                <strong>Re: Date validation bypassed if 'Date' header missing</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/swift3/+bug/1497424/+attachment/4481433/+files/1497424.patch">Patch from Darryl</a>
        <a class="sprite edit action-icon" href="/swift3/+bug/1497424/+attachment/4481433">Edit</a>
        (2.2 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I didn&#x27;t see this patch in detail yet but attach Darryl&#x27;s patch I received via E-mail for discussion.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I didn't see this patch in detail yet but attach Darryl's patch I received via E-mail for discussion.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
    
    <time title="2015-10-02 02:15:09 UTC" datetime="2015-10-02T02:15:09.893230+00:00">on 2015-10-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in swift3: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-10-02T02:27:06.265152+00:00" title="2015-10-02 02:27:06 UTC">on 2015-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Darryl, thanks for reporting this. As you said, this is a problem for guard of requests when date header is missing.</p>
<p>The change seems reasonable but this change breaks a lot of tests because almost of unit tests doesn&#x27;t care the date header so that I wonder if you could also fix those tests. I guess that&#x27;s not so difficult, we can add &#x27;Date&#x27; or &#x27;X-Amx-Date&#x27; headers into request instance in those tests.</p>
<p>If you could do that, I wanna review the patch via this thread. If you need my help to make it, please poke me anywhere (e.g. IRC)</p>
<p>Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Darryl, thanks for reporting this. As you said, this is a problem for guard of requests when date header is missing.

The change seems reasonable but this change breaks a lot of tests because almost of unit tests doesn't care the date header so that I wonder if you could also fix those tests. I guess that's not so difficult, we can add 'Date' or 'X-Amx-Date' headers into request instance in those tests.

If you could do that, I wanna review the patch via this thread. If you need my help to make it, please poke me anywhere (e.g. IRC)

Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam (dtam)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-10-03T00:29:42.549508+00:00" title="2015-10-03 00:29:42 UTC">on 2015-10-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/swift3/+bug/1497424/+attachment/4482399/+files/1497424-2.patch">1497424-2.patch</a>
        <a class="sprite edit action-icon" href="/swift3/+bug/1497424/+attachment/4482399">Edit</a>
        (98.7 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Here&#x27;s my improved patch.  It modifies all the tests to include the Date header to ensure it passes the new validation.  I also added some tests in test_request</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Here's my improved patch.  It modifies all the tests to include the Date header to ensure it passes the new validation.  I also added some tests in test_request</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~1-tim-z" class="sprite person">Tim Burke (1-tim-z)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-10-14T00:01:31.008918+00:00" title="2015-10-14 00:01:31 UTC">on 2015-10-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Patch seems good, and unit tests fail without the change to request.py. I wouldn&#x27;t mind seeing a test with x-amz-date and no date header (in particular, I was surprised that test_date_<wbr />header_<wbr />with_x_<wbr />amz_date_<wbr />valid failed when I rolled back request.py), but it&#x27;s not the sort of thing that should block this from landing.</p>
<p>Still need to make sure the func tests pass, though. Will get that set up tonight or tomorrow.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Patch seems good, and unit tests fail without the change to request.py. I wouldn't mind seeing a test with x-amz-date and no date header (in particular, I was surprised that test_date_header_with_x_amz_date_valid failed when I rolled back request.py), but it's not the sort of thing that should block this from landing.

Still need to make sure the func tests pass, though. Will get that set up tonight or tomorrow.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~1-tim-z" class="sprite person">Tim Burke (1-tim-z)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-10-14T23:11:03.617831+00:00" title="2015-10-14 23:11:03 UTC">on 2015-10-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Functional tests (both tempauth and keystone) pass. I&#x27;m happy with it.</p>
<p>Good job Darryl!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Functional tests (both tempauth and keystone) pass. I'm happy with it.

Good job Darryl!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-11-25T13:44:26.744518+00:00" title="2015-11-25 13:44:26 UTC">on 2015-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Changes looks good to me but git am failed to patch current newest master in my environment even though it looks a formatted patch for git.  I might be missing something but I wonder if you could help me (or rebasing needed?) to push/merge in upstream.</p>
<p>I&#x27;m assuming I can push this by myself (absolutely with co-authed-by: darryl) and +2 +A to land asap like as any other security patches.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Changes looks good to me but git am failed to patch current newest master in my environment even though it looks a formatted patch for git.  I might be missing something but I wonder if you could help me (or rebasing needed?) to push/merge in upstream.

I'm assuming I can push this by myself (absolutely with co-authed-by: darryl) and +2 +A to land asap like as any other security patches.

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam (dtam)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-11-25T21:48:44.664765+00:00" title="2015-11-25 21:48:44 UTC">on 2015-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I just tried rebasing the patch against master.  Let me know if it doesn&#x27;t work.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I just tried rebasing the patch against master.  Let me know if it doesn't work.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam (dtam)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-11-25T21:51:02.613739+00:00" title="2015-11-25 21:51:02 UTC">on 2015-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I believe I made an error in the prior patch. I deleted it and I&#x27;ll fix it now.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I believe I made an error in the prior patch. I deleted it and I'll fix it now.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam (dtam)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-11-25T22:18:12.531046+00:00" title="2015-11-25 22:18:12 UTC">on 2015-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/swift3/+bug/1497424/+attachment/4525430/+files/1497424-3.patch">1497424-3.patch</a>
        <a class="sprite edit action-icon" href="/swift3/+bug/1497424/+attachment/4525430">Edit</a>
        (101.7 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated patch.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated patch.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-11-27T08:02:13.880145+00:00" title="2015-11-27 08:02:13 UTC">on 2015-11-27</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Darryl</p>
<p>Thanks for working this, I confirmed the latest patch worked well in my environment.<br />
Code looks good to me so I think we can merge it into upstream.</p>
<p>However, I&#x27;m not sure whether or not we should follow on openstack security vulnerability management Process even if it&#x27;s thirdparty project.</p>
<p>There is a SecurityImpact tag In Darryl&#x27;s commit message and it seems to trigger to push a notification to openstack security team but if we should maintain this bug as security issue, I think we should add some CVE information for this in launchpad. So I need a help about that process before submitting this to public.</p>
<p>1: <a rel="nofollow" href="https://security.openstack.org/vmt-process.html">https:/<wbr />/security.<wbr />openstack.<wbr />org/vmt-<wbr />process.<wbr />html</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Darryl

Thanks for working this, I confirmed the latest patch worked well in my environment.
Code looks good to me so I think we can merge it into upstream.

However, I'm not sure whether or not we should follow on openstack security vulnerability management Process even if it's thirdparty project.

There is a SecurityImpact tag In Darryl's commit message and it seems to trigger to push a notification to openstack security team but if we should maintain this bug as security issue, I think we should add some CVE information for this in launchpad. So I need a help about that process before submitting this to public.

1: https://security.openstack.org/vmt-process.html</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
    
    <time title="2015-12-04 07:03:37 UTC" datetime="2015-12-04T07:03:37.194021+00:00">on 2015-12-04</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in swift3: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; In Progress
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2015-12-08 01:20:16 UTC" datetime="2015-12-08T01:20:16.126727+00:00">on 2015-12-08</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Date validation bypassed if &#x27;Date&#x27; header missing<br />+ Date validation bypassed if &#x27;Date&#x27; header missing (CVE-2015-8466)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-08T01:30:36.575670+00:00" title="2015-12-08 01:30:36 UTC">on 2015-12-08</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Kota, there is no rule for projects who doesn&#x27;t have the &quot;vulnerability:<wbr />managed&quot; big tent tag, basically it&#x27;s up to you if you want to follow the vmt process.</p>
<p>MITRE assigned CVE-2015-8466 for this bug.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Kota, there is no rule for projects who doesn't have the "vulnerability:managed" big tent tag, basically it's up to you if you want to follow the vmt process.

MITRE assigned CVE-2015-8466 for this bug.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-09T04:32:39.161294+00:00" title="2015-12-09 04:32:39 UTC">on 2015-12-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Tristan!</p>
<p>I&#x27;ll make this public with the CVE tag in commit message.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Tristan!

I'll make this public with the CVE tag in commit message.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-09T04:46:17.595080+00:00" title="2015-12-09 04:46:17 UTC">on 2015-12-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@All</p>
<p>Note that I don&#x27;t know there are any stakeholders for swift3 and Tristan told me swift3 don&#x27;t have to follow OpenStack VMT process so I diceded to skip &quot;Embargoed Disclosure&quot; process for this.</p>
<p>I think some distributors might want to get this fix but we already has a notification (swift3 had a security issue) with assigned CVE . I expects someone find the notification and will try to merge this if needed. That is because I decided to this to be open.</p>
<p>If you have any question or suggestion for this, please contact me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@All

Note that I don't know there are any stakeholders for swift3 and Tristan told me swift3 don't have to follow OpenStack VMT process so I diceded to skip "Embargoed Disclosure" process for this.

I think some distributors might want to get this fix but we already has a notification (swift3 had a security issue) with assigned CVE . I expects someone find the notification and will try to merge this if needed. That is because I decided to this to be open.

If you have any question or suggestion for this, please contact me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tsuyuzaki-kota" class="sprite person">Kota Tsuyuzaki (tsuyuzaki-kota)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-09T04:52:28.550873+00:00" title="2015-12-09 04:52:28 UTC">on 2015-12-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Patch pushed to <a rel="nofollow" href="https://review.openstack.org/#/c/255067/">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/c/<wbr />255067/</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Patch pushed to https://review.openstack.org/#/c/255067/</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-09T11:15:39.429560+00:00" title="2015-12-09 11:15:39 UTC">on 2015-12-09</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/swift3/+bug/1497424/comments/15">
                <strong>Fix merged to swift3 (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/255067">https:/<wbr />/review.<wbr />openstack.<wbr />org/255067</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/swift3/commit/?id=4fce274c50112e02360993c4eeaafe811fcc757c">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />swift3/<wbr />commit/<wbr />?id=4fce274c501<wbr />12e02360993c4ee<wbr />aafe811fcc757c</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit 4fce274c50112e0<wbr />2360993c4eeaafe<wbr />811fcc757c<br />
Author: Kota Tsuyuzaki &lt;email address hidden&gt;<br />
Date:   Wed Nov 25 14:16:06 2015 -0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix date validation</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;According to [1] when an Authorization header is specified, either a<br />
&nbsp;&nbsp;&nbsp;&nbsp;Date or x-amz-date header needs to be specified, with the x-amz-date<br />
&nbsp;&nbsp;&nbsp;&nbsp;header taking precedence.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Now, the x-amz-date header is validated first, and if both headers are<br />
&nbsp;&nbsp;&nbsp;&nbsp;missing, an AccessDenied error should be returned.  This should prevent<br />
&nbsp;&nbsp;&nbsp;&nbsp;replay attacks occurring on valid requests that are missing the Date<br />
&nbsp;&nbsp;&nbsp;&nbsp;header.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;[1]<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a rel="nofollow" href="http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonRequestHeaders">http://<wbr />docs.aws.<wbr />amazon.<wbr />com/AmazonS3/<wbr />latest/<wbr />API/RESTCommonR<wbr />equestHeaders</a>.<br />
&nbsp;&nbsp;&nbsp;&nbsp;html</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;N.B. This also fixes some pylint issues and dependencies</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1497424<br />
&nbsp;&nbsp;&nbsp;&nbsp;SecurityImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;[CVE-2015-8466]</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Co-Authored-By: Darryl Tam &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Co-Authored-By: Tim Burke &lt;email address hidden&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ibeff8503fa147e<wbr />1cf08c1b5374aec<wbr />ee7a4c0bee2</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/255067
Committed: https://git.openstack.org/cgit/openstack/swift3/commit/?id=4fce274c50112e02360993c4eeaafe811fcc757c
Submitter: Jenkins
Branch:    master

commit 4fce274c50112e02360993c4eeaafe811fcc757c
Author: Kota Tsuyuzaki &lt;tsuyuzaki.kota@lab.ntt.co.jp&gt;
Date:   Wed Nov 25 14:16:06 2015 -0800

    Fix date validation
    
    According to [1] when an Authorization header is specified, either a
    Date or x-amz-date header needs to be specified, with the x-amz-date
    header taking precedence.
    
    Now, the x-amz-date header is validated first, and if both headers are
    missing, an AccessDenied error should be returned.  This should prevent
    replay attacks occurring on valid requests that are missing the Date
    header.
    
    [1]
    http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonRequestHeaders.
    html
    
    N.B. This also fixes some pylint issues and dependencies
    
    Closes-Bug: 1497424
    SecurityImpact
    [CVE-2015-8466]
    
    Co-Authored-By: Darryl Tam &lt;dtam@swiftstack.com&gt;
    Co-Authored-By: Tim Burke &lt;tim.burke@gmail.com&gt;
    
    Change-Id: Ibeff8503fa147e1cf08c1b5374aecee7a4c0bee2
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in swift3: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-09T18:52:24.161483+00:00" title="2015-12-09 18:52:24 UTC">on 2015-12-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Kota, it seems like most stakeholder doesn&#x27;t read openstack-security mailing list, and CVE assigned to opensource project are better advertised on &lt;email address hidden&gt; mailing list.</p>
<p>Is there a non-too technical impact description ?  And do we know what swift3 release are affected ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Kota, it seems like most stakeholder doesn't read openstack-security mailing list, and CVE assigned to opensource project are better advertised on oss-security@lists.openwall.com mailing list.

Is there a non-too technical impact description ?  And do we know what swift3 release are affected ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/swift3/+bug/1497424/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~dtam" class="sprite person">Darryl Tam (dtam)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-12-09T19:40:53.741005+00:00" title="2015-12-09 19:40:53 UTC">on 2015-12-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/swift3/+bug/1497424/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Here&#x27;s my attempt at a less technical description of the issue and its impact:</p>
<p>In S3, requests are signed, with the signature depending on an assigned private key for a user and specified message headers, including Date and/or x-amz-date.  If the signature does not match, the request should be rejected.</p>
<p>For these signed requests, a x-amz-date or Date header must be specified, with the x-amz-date header taking precedence.  If the timestamp of the signed request differs from the current time a particular time limit (in Swift3 this is set to plus or minus five minutes), the request should be rejected.</p>
<p>In affected versions of Swift3, the x-amz-date is not validated, and only the Date header (if present) is validated against the current time.</p>
<p>Note that in all cases, requests are still checked for a valid signature.</p>
<p>If a client sends both Date header and x-amz-date header, affected versions will check the signature against the time in the Date header instead of the x-amz-date header.  If the Date and x-amz-date headers are different, the time period in which Swift3 would accept the request would be different.  This could result in a valid requests being rejected and invalid requests being accepted depending on the time the requests are sent.</p>
<p>If a client sends a Date header only, it is not affected by this issue.</p>
<p>If a client sends a x-amz-date header without a Date header, affected versions validate regardless of the current time.  This would allow the same request to be repeated and accepted by Swift3 at any time.</p>
<p>In order to be affected, a user would need to use a S3 client that sends an x-amz-date header without a matching Date header.  If the request is captured, it could later be repeated and accepted either (a) at any time (if the Date header is not present) or, (b) within the time limit set by the Date header.</p>
<p>The update will validate x-amz-date headers, if they exist, against the current time, which preventing replay attacks when outside of the time limit.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Here's my attempt at a less technical description of the issue and its impact:

In S3, requests are signed, with the signature depending on an assigned private key for a user and specified message headers, including Date and/or x-amz-date.  If the signature does not match, the request should be rejected.

For these signed requests, a x-amz-date or Date header must be specified, with the x-amz-date header taking precedence.  If the timestamp of the signed request differs from the current time a particular time limit (in Swift3 this is set to plus or minus five minutes), the request should be rejected.

In affected versions of Swift3, the x-amz-date is not validated, and only the Date header (if present) is validated against the current time.

Note that in all cases, requests are still checked for a valid signature.


If a client sends both Date header and x-amz-date header, affected versions will check the signature against the time in the Date header instead of the x-amz-date header.  If the Date and x-amz-date headers are different, the time period in which Swift3 would accept the request would be different.  This could result in a valid requests being rejected and invalid requests being accepted depending on the time the requests are sent.

If a client sends a Date header only, it is not affected by this issue.

If a client sends a x-amz-date header without a Date header, affected versions validate regardless of the current time.  This would allow the same request to be repeated and accepted by Swift3 at any time.


In order to be affected, a user would need to use a S3 client that sends an x-amz-date header without a matching Date header.  If the request is captured, it could later be repeated and accepted either (a) at any time (if the Date header is not present) or, (b) within the time limit set by the Date header.

The update will validate x-amz-date headers, if they exist, against the current time, which preventing replay attacks when outside of the time limit.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/swift3/+bug/1497424/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/swift3/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/swift3/+bug/1497424/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/swift3/+bug/1497424/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/swift3/+bug/1497424/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/swift3/+bug/1497424/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/swift3/+bug/1497424/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/swift3/+bug/1497424/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/swift3/+bug/1497424/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/swift3/+bug/1497424/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/swift3/+bug/1497424/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/swift3/+bug/1497424/+attachment/4481433/+files/1497424.patch">Patch from Darryl</a>
        <small>
          (<a href="/swift3/+bug/1497424/+attachment/4481433">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/swift3/+bug/1497424/+attachment/4482399/+files/1497424-2.patch">1497424-2.patch</a>
        <small>
          (<a href="/swift3/+bug/1497424/+attachment/4482399">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/swift3/+bug/1497424/+attachment/4525430/+files/1497424-3.patch">1497424-3.patch</a>
        <small>
          (<a href="/swift3/+bug/1497424/+attachment/4525430">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/swift3/+bug/1497424/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"initial_comment_batch_offset": 41, "first visible_recent_comment": -23, "related_features": {}, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1497424", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1497424"}, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1497424", "web_link": "https://bugs.launchpad.net/bugs/1497424", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1497424, "private": false, "information_type": "Public Security", "name": null, "title": "Date validation bypassed if 'Date' header missing (CVE-2015-8466)", "description": "According to http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonRequestHeaders.html when an Authorization header is specified, either a Date or x-amz-date header needs to be specified.\n\nIf both are specified, the x-amz-date header takes precedence.\n\nRight now, only the Date header is validated against expiry or skewed by more than 5 minutes.  See _validate_headers function in request.py for validation code.  x-amz-date should take precedence.\n\nIt appears that if the Date header is missing for any reason, then these checks are not done and the request would validate.  Swift3 would then be vulnerable to a replay attack, since the request could be replayed at any time, even after expiry time, or after the skew period.  This would be most likely to occur with a client that only uses the x-amz-date headers with Authorization requests.\n\nI think the solution should be to a) validate the x-amz-date header. b) Respond with an error if the date/x-amz-date headers don't validate when the authorization header is sent.  S3 returns the AccessDenied error 'AWS authentication requires a valid Date or x-amz-date header' if the header(s) are missing or malformed.", "owner_link": "https://bugs.launchpad.net/api/devel/~dtam", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/bug_tasks", "duplicate_of_link": null, "date_created": "2015-09-18T19:31:16.999318+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/subscriptions", "date_last_updated": "2015-12-09T19:40:54.120108+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 264, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/attachments", "security_related": true, "latest_patch_uploaded": "2015-11-25T22:18:12.531046+00:00", "tags": [], "date_last_message": "2015-12-09T19:40:53.741005+00:00", "number_of_duplicates": 0, "message_count": 18, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1497424/linked_merge_proposals", "http_etag": "\"673274a5aec8ebc665c22b8f4f751f4747a5930e-e30e6932896b7cfcc3ba9a24f4bb0e22ba7d695a\""}, "bugtask_data": {"1908718": {"milestone_widget_items": "[]", "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/swift3/+bug/1497424/+delete", "user_can_edit_status": true, "bugtask_path": "/swift3/+bug/1497424", "row_id": "tasksummary1908718", "importance_value": "Undecided", "importance_widget_items": "[]", "id": 1908718, "user_can_delete": false, "targetname": "Swift3", "user_can_edit_importance": false, "assignee_vocabulary_filters": [], "bug_title": "Date validation bypassed if 'Date' header missing (CVE-2015-8466)", "assignee_value": null, "hide_assignee_team_selection": true, "user_can_edit_assignee": false, "form_row_id": "task1908718", "target_is_product": true, "assignee_is_team": null, "status_value": "Fix Released", "user_can_unassign": false, "milestone_value": null, "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_milestone": false, "prefix": "swift3"}}, "bug_is_private": false, "context": {"self_link": "https://bugs.launchpad.net/api/devel/swift3/+bug/1497424", "web_link": "https://bugs.launchpad.net/swift3/+bug/1497424", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1497424", "milestone_link": null, "status": "Fix Released", "importance": "Undecided", "assignee_link": null, "bug_target_display_name": "Swift3", "bug_target_name": "swift3", "bug_watch_link": null, "date_assigned": null, "date_created": "2015-09-18T19:31:16.999318+00:00", "date_confirmed": "2015-10-02T02:15:10.177505+00:00", "date_incomplete": null, "date_in_progress": "2015-12-04T07:03:37.375625+00:00", "date_closed": "2015-12-09T11:15:38.755192+00:00", "date_left_new": "2015-10-02T02:15:10.177505+00:00", "date_triaged": "2015-12-04T07:03:37.375625+00:00", "date_fix_committed": "2015-12-09T11:15:38.755192+00:00", "date_fix_released": "2015-12-09T11:15:38.755192+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~dtam", "target_link": "https://bugs.launchpad.net/api/devel/swift3", "title": "Bug #1497424 in Swift3: \"Date validation bypassed if 'Date' header missing (CVE-2015-8466)\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/swift3/+bug/1497424/related_tasks", "is_complete": true, "http_etag": "\"8eaba2b3fe416af0faafab8012efdc0bbd3a0d70-bc28a05ee01c15ac5d5eb4f082c0b30f9259a348\""}, "information_type_data": {"PUBLIC": {"value": "PUBLIC", "is_private": false, "order": 0, "name": "Public", "description": "Everyone can see this information.\n", "description_css_class": "choice-description"}, "PRIVATESECURITY": {"value": "PRIVATESECURITY", "is_private": true, "order": 2, "name": "Private Security", "description": "Only the security group can see this information.\n ", "description_css_class": "choice-description"}, "USERDATA": {"value": "USERDATA", "is_private": true, "order": 3, "name": "Private", "description": "Only shared with users permitted to see private user information.\n", "description_css_class": "choice-description"}, "PUBLICSECURITY": {"value": "PUBLICSECURITY", "is_private": false, "order": 1, "name": "Public Security", "description": "Everyone can see this security related information.\n", "description_css_class": "choice-description"}}, "total_comments_and_activity": 33};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 55 queries/external actions issued in 0.51 seconds

    Features: {'bugs.nominations.bug_supervisors_can_target': 'on', 'hard_timeout': '9000', 'visible_render_time': None, 'bugs.affected_count_includes_dupes.disabled': None, 'app.mainsite_only.canonical_url': None, 'app.maintenance_message': None, 'js.yui_version': None, 'disclosure.dsp_picker.enabled': 'on', 'profiling.enabled': None, 'baselayout.careers_link.disabled': None}

    r0d8de2b

    -->

</html>

