<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#642480 - cryptographic verification code in apt-key net-update utterly broken - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=642480&quot;&gt;642480&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:642480@bugs.debian.org">#642480</a><br>
cryptographic verification code in apt-key net-update utterly broken</h1>
<div class="versiongraph"><a href="version.cgi?package=apt;absolute=0;info=1;collapse=1;found=0.8.10.3%2Bsqueeze1"><img alt="version graph" src="version.cgi?width=2;package=apt;height=2;collapse=1;found=0.8.10.3%2Bsqueeze1;absolute=0"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=apt">apt</a>;
Maintainer for <a href="pkgreport.cgi?package=apt">apt</a> is <a href="pkgreport.cgi?maint=deity%40lists.debian.org">APT Development Team &lt;deity@lists.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=apt">apt</a> is <a href="pkgreport.cgi?src=apt">src:apt</a> (<a href="https://tracker.debian.org/pkg/apt">PTS</a>, <a href="https://buildd.debian.org/apt">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=apt">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=cdfrey%40foursquare.net">Chris Frey &lt;cdfrey@foursquare.net&gt;</a></p>
  <p>Date: Thu, 22 Sep 2011 22:09:02 UTC</p>

<p>Severity: normal</p>
<p>Tags: security</p>

<p>Found in version 0.8.10.3+squeeze1</p>



</div>

<p><a href="mailto:642480@bugs.debian.org">Reply</a> or <a href="mailto:642480-subscribe@bugs.debian.org">subscribe</a> to this bug.</p>
<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=642480;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316729344 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Thu, 22 Sep 2011 22:09:04 GMT) (<a href="bugreport.cgi?bug=642480;msg=2">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Chris Frey &lt;cdfrey@foursquare.net&gt; -->
<!-- time:1316729344 -->
<strong>Acknowledgement sent</strong>
to <code>Chris Frey &lt;cdfrey@foursquare.net&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Thu, 22 Sep 2011 22:09:04 GMT) (<a href="bugreport.cgi?bug=642480;msg=4">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=5">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=5">mbox</a>, <a href="mailto:642480@bugs.debian.org?In-Reply-To=%3C20110922215631.GA30839%40foursquare.net%3E&amp;subject=Re%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs&amp;References=%3C20110922215631.GA30839%40foursquare.net%3E&amp;body=On%20Thu%2C%2022%20Sep%202011%2017%3A56%3A31%20-0400%20Chris%20Frey%20%3Ccdfrey%40foursquare.net%3E%20wrote%3A%0A%3E%20Subject%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs%0A%3E%20Package%3A%20apt%0A%3E%20Version%3A%200.8.10.3%2Bsqueeze1%0A%3E%20Justification%3A%20root%20security%20hole%0A%3E%20Severity%3A%20critical%0A%3E%20Tags%3A%20security%0A%3E%20%0A%3E%20%2A%2A%2A%20Please%20type%20your%20report%20below%20this%20line%20%2A%2A%2A%0A%3E%20%0A%3E%20Georgi%20Guninski%20reported%20on%20Full%20Disclosure%20a%20potential%20bug%20in%20apt-key%27s%0A%3E%20use%20of%20gpg%20--list-sigs%2C%20when%20comparing%20keys%20to%20the%20master%20keyring%20in%0A%3E%20add_keys_with_verify_against_master_keyring%28%29%2C%20revealing%20a%20potential%0A%3E%20MITM%20attack%20for%20adding%20keys.%0A%3E%20%0A%3E%20You%20can%20find%20the%20original%20emails%20here%3A%0A%3E%20http%3A%2F%2Fmarc.info%2F%3Fl%3Dfull-disclosure%26m%3D131668247124444%26w%3D2%0A%3E%20%0A%3E%20It%20is%20a%20legitimate%20bug%2C%20as%20far%20as%20I%20can%20tell%2C%20but%20could%20use%20confirmation.%0A%3E%20%0A%3E%20The%20original%20message%20is%20copied%20below.%0A%3E%20-%20Chris%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%20%20From%3A%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%0A%3E%20%20%20To%3A%20full-disclosure%40lists.grok.org.uk%0A%3E%20%20%20Date%3A%20Thu%2C%2022%20Sep%202011%2012%3A07%3A08%20%2B0300%0A%3E%20%20%20Subject%3A%20owning%20ubuntu%20apt-key%20net-update%20%28maybe%20apt-get%0A%3E%20%20%20%20%20%20%20%20%20%20%20update%20related%29%0A%3E%20%0A%3E%20%20%20owning%20ubuntu%20apt-key%20net-update%20%28maybe%20apt-get%20update%20related%29%0A%3E%20%0A%3E%20%20%20in%20ubuntu%2010.04%20in%20%2Fusr%2Fbin%2Fapt-key%20in%0A%3E%20%20%20add_keys_with_verify_against_master_keyring%28%29%0A%3E%20%0A%3E%20%20%20if%20%24GPG_CMD%20--keyring%20%24ADD_KEYRING%20--list-sigs%20--with-colons%20%24add_key%20%7C%20grep%0A%3E%20%20%20%5Esig%20%7C%20cut%20-d%3A%20-f5%20%7C%20grep%20-q%20%24master_key%3B%20then%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24GPG_CMD%20--quiet%20--batch%20--keyring%20%24ADD_KEYRING%20--export%0A%3E%20%20%20%24add_key%20%7C%20%24GPG%20--import%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ADDED%3D1%0A%3E%20%0A%3E%20%0A%3E%20%20%20to%20my%20knowledge%20--list-sigs%20doesn%27t%20do%20crypto%20verification%2C%20just%20looks%20for%20well%0A%3E%20%20%20formedness.%0A%3E%20%0A%3E%20%20%20it%20is%20trivial%20to%20generate%20a%20gpg%20key%20with%20key%20ID%20%3D%3D%20%24master_key%3A%0A%3E%20%20%20set%20gpg%20version%20to%203%2C%20set%20the%20lowest%2064%20bits%20of%20the%20RSA%20%24n%24%20to%20the%20key%20ID%2C%0A%3E%20%20%20generate%20random%20high%20bits%20until%20one%20can%20trial%20factor%20%24n%24%20%28numerology%20is%20on%20your%0A%3E%20%20%20side%29%2C%20this%20is%20it.%0A%3E%20%0A%3E%20%20%20to%20reproduce%3A%0A%3E%20%20%20attached%20is%20ubuntu-archive-keyring.gpg.%0A%3E%20%20%20put%20it%20on%20http%3A%2F%2FA%2Fubuntu-archive-keyring.gpg%0A%3E%20%20%20make%20a%20copy%20of%20apt-key%20and%20set%3A%0A%3E%20%20%20ARCHIVE_KEYRING_URI%3Dhttp%3A%2F%2FA%2Fubuntu-archive-keyring.gpg%0A%3E%20%20%20%5E%20this%20emulates%20MITM.%0A%3E%20%20%20do%20%7C.%2Fapt-key-new%20net-update%7C%20and%20check%20for%20new%20keys%20with%20%7Capt-key%20list%7C%0A%3E%20%0A%3E%20%20%20this%20might%20or%20might%20not%20be%20related%20with%20%7Capt-get%20update%7C.%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=cdfrey%40foursquare.net" alt="">
<div class="header"><span class="headerfield">From:</span> Chris Frey &lt;cdfrey@foursquare.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> submit@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> apt-key uses gpg --list-sigs instead of --check-sigs</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 22 Sep 2011 17:56:31 -0400</div>
</div>
<pre class="message">Subject: apt-key uses gpg --list-sigs instead of --check-sigs
Package: apt
Version: 0.8.10.3+squeeze1
Justification: root security hole
Severity: critical
Tags: security

*** Please type your report below this line ***

Georgi Guninski reported on Full Disclosure a potential bug in apt-key&#39;s
use of gpg --list-sigs, when comparing keys to the master keyring in
add_keys_with_verify_against_master_keyring(), revealing a potential
MITM attack for adding keys.

You can find the original emails here:
<a href="http://marc.info/?l=full-disclosure&amp;m=131668247124444&amp;w=2">http://marc.info/?l=full-disclosure&amp;m=131668247124444&amp;w=2</a>

It is a legitimate bug, as far as I can tell, but could use confirmation.

The original message is copied below.
- Chris



  From: Georgi Guninski &lt;guninski@guninski.com&gt;
  To: full-disclosure@lists.grok.org.uk
  Date: Thu, 22 Sep 2011 12:07:08 +0300
  Subject: owning ubuntu apt-key net-update (maybe apt-get
          update related)

  owning ubuntu apt-key net-update (maybe apt-get update related)

  in ubuntu 10.04 in /usr/bin/apt-key in
  add_keys_with_verify_against_master_keyring()

  if $GPG_CMD --keyring $ADD_KEYRING --list-sigs --with-colons $add_key | grep
  ^sig | cut -d: -f5 | grep -q $master_key; then
                  $GPG_CMD --quiet --batch --keyring $ADD_KEYRING --export
  $add_key | $GPG --import
                  ADDED=1


  to my knowledge --list-sigs doesn&#39;t do crypto verification, just looks for well
  formedness.

  it is trivial to generate a gpg key with key ID == $master_key:
  set gpg version to 3, set the lowest 64 bits of the RSA $n$ to the key ID,
  generate random high bits until one can trial factor $n$ (numerology is on your
  side), this is it.

  to reproduce:
  attached is ubuntu-archive-keyring.gpg.
  put it on <a href="http://A/ubuntu-archive-keyring.gpg">http://A/ubuntu-archive-keyring.gpg</a>
  make a copy of apt-key and set:
  ARCHIVE_KEYRING_URI=<a href="http://A/ubuntu-archive-keyring.gpg">http://A/ubuntu-archive-keyring.gpg</a>
  ^ this emulates MITM.
  do |./apt-key-new net-update| and check for new keys with |apt-key list|

  this might or might not be related with |apt-get update|.

  10x.

  -- 
  joro




</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- request_addr: Julian Andres Klode &lt;jak@debian.org&gt; -->
<!-- time:1316731683 -->
<strong>Reply sent</strong>
to <code>Julian Andres Klode &lt;jak@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Thu, 22 Sep 2011 22:48:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=7">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: Chris Frey &lt;cdfrey@foursquare.net&gt; -->
<!-- time:1316731683 -->
<strong>Notification sent</strong>
to <code>Chris Frey &lt;cdfrey@foursquare.net&gt;</code>:<br>
Bug acknowledged by developer.
 (Thu, 22 Sep 2011 22:48:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=9">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 642480-close@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=10">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=10">mbox</a>, <a href="mailto:642480@bugs.debian.org?References=%3C20110922215631.GA30839%40foursquare.net%3E%0A%20%3C20110923004334.GA22638%40debian.org%3E&amp;body=On%20Fri%2C%2023%20Sep%202011%2000%3A44%3A55%20%2B0200%20Julian%20Andres%20Klode%20%3Cjak%40debian.org%3E%20wrote%3A%0A%3E%20On%20Thu%2C%20Sep%2022%2C%202011%20at%2005%3A56%3A31PM%20-0400%2C%20Chris%20Frey%20wrote%3A%0A%3E%20%3E%20Subject%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs%0A%3E%20%3E%20Package%3A%20apt%0A%3E%20%3E%20Version%3A%200.8.10.3%2Bsqueeze1%0A%3E%20%3E%20Justification%3A%20root%20security%20hole%0A%3E%20%3E%20Severity%3A%20critical%0A%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20%0A%3E%20%3E%20%2A%2A%2A%20Please%20type%20your%20report%20below%20this%20line%20%2A%2A%2A%0A%3E%20%3E%20%0A%3E%20%3E%20Georgi%20Guninski%20reported%20on%20Full%20Disclosure%20a%20potential%20bug%20in%20apt-key%27s%0A%3E%20%3E%20use%20of%20gpg%20--list-sigs%2C%20when%20comparing%20keys%20to%20the%20master%20keyring%20in%0A%3E%20%3E%20add_keys_with_verify_against_master_keyring%28%29%2C%20revealing%20a%20potential%0A%3E%20%3E%20MITM%20attack%20for%20adding%20keys.%0A%3E%20%3E%20%0A%3E%20%3E%20You%20can%20find%20the%20original%20emails%20here%3A%0A%3E%20%3E%20http%3A%2F%2Fmarc.info%2F%3Fl%3Dfull-disclosure%26m%3D131668247124444%26w%3D2%0A%3E%20%3E%20%0A%3E%20%3E%20It%20is%20a%20legitimate%20bug%2C%20as%20far%20as%20I%20can%20tell%2C%20but%20could%20use%20confirmation.%0A%3E%20It%20is%20a%20bug%20for%20Ubuntu.%20Debian%27s%20apt-key%20does%20not%20support%20net-update%20and%0A%3E%20is%20thus%20not%20affected.%0A%3E%20%0A%3E%20%0A%3E%20--%20%0A%3E%20Julian%20Andres%20Klode%20%20-%20Debian%20Developer%2C%20Ubuntu%20Member%0A%3E%20%0A%3E%20See%20http%3A%2F%2Fwiki.debian.org%2FJulianAndresKlode%20and%20http%3A%2F%2Fjak-linux.org%2F.%0A&amp;subject=Re%3A%20Bug%23642480%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs&amp;In-Reply-To=%3C20110923004334.GA22638%40debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jak%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Julian Andres Klode &lt;jak@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Chris Frey &lt;cdfrey@foursquare.net&gt;, 642480-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: apt-key uses gpg --list-sigs instead of --check-sigs</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 00:44:55 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=10">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On Thu, Sep 22, 2011 at 05:56:31PM -0400, Chris Frey wrote:
&gt; Subject: apt-key uses gpg --list-sigs instead of --check-sigs
&gt; Package: apt
&gt; Version: 0.8.10.3+squeeze1
&gt; Justification: root security hole
&gt; Severity: critical
&gt; Tags: security
&gt; 
&gt; *** Please type your report below this line ***
&gt; 
&gt; Georgi Guninski reported on Full Disclosure a potential bug in apt-key&#39;s
&gt; use of gpg --list-sigs, when comparing keys to the master keyring in
&gt; add_keys_with_verify_against_master_keyring(), revealing a potential
&gt; MITM attack for adding keys.
&gt; 
&gt; You can find the original emails here:
&gt; <a href="http://marc.info/?l=full-disclosure&amp;m=131668247124444&amp;w=2">http://marc.info/?l=full-disclosure&amp;m=131668247124444&amp;w=2</a>
&gt; 
&gt; It is a legitimate bug, as far as I can tell, but could use confirmation.
It is a bug for Ubuntu. Debian&#39;s apt-key does not support net-update and
is thus not affected.


-- 
Julian Andres Klode  - Debian Developer, Ubuntu Member

See <a href="http://wiki.debian.org/JulianAndresKlode">http://wiki.debian.org/JulianAndresKlode</a> and <a href="http://jak-linux.org/">http://jak-linux.org/</a>.
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;msg=10">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316732223 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Thu, 22 Sep 2011 22:57:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=12">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: David Kalnischkies &lt;kalnischkies+debian@gmail.com&gt; -->
<!-- time:1316732223 -->
<strong>Acknowledgement sent</strong>
to <code>David Kalnischkies &lt;kalnischkies+debian@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Thu, 22 Sep 2011 22:57:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=14">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=15">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=15">mbox</a>, <a href="mailto:642480@bugs.debian.org?subject=Re%3A%20Bug%23642480%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs&amp;body=On%20Fri%2C%2023%20Sep%202011%2000%3A55%3A30%20%2B0200%20David%20Kalnischkies%20%3Ckalnischkies%2Bdebian%40gmail.com%3E%20wrote%3A%0A%3E%20On%20Thu%2C%20Sep%2022%2C%202011%20at%2023%3A56%2C%20Chris%20Frey%20%3Ccdfrey%40foursquare.net%3E%20wrote%3A%0A%3E%20%3E%20Georgi%20Guninski%20reported%20on%20Full%20Disclosure%20a%20potential%20bug%20in%20apt-key%27s%0A%3E%20%3E%20use%20of%20gpg%20--list-sigs%2C%20when%20comparing%20keys%20to%20the%20master%20keyring%20in%0A%3E%20%3E%20add_keys_with_verify_against_master_keyring%28%29%2C%20revealing%20a%20potential%0A%3E%20%3E%20MITM%20attack%20for%20adding%20keys.%0A%3E%20%0A%3E%20While%20the%20bug%20itself%20is%20valid%2C%20it%20doesn%27t%20apply%20to%20stock%20debian%20as%0A%3E%20it%20doesn%27t%20have%20ARCHIVE_KEYRING_URI%20set%2C%20so%20the%20result%20of%0A%3E%20running%20%27apt-key%20net-update%27%20on%20a%20debian%20box%20is%3A%0A%3E%20ERROR%3A%20Your%20distribution%20is%20not%20supported%20in%20net-update%20as%20no%20uri%20for%0A%3E%20the%20archive-keyring%20is%20set%0A%3E%20%0A%3E%20The%20only%20distribution%20i%20know%20of%20who%20enables%20this%20feature%20%28as%20it%20was%20developed%0A%3E%20by%20them%29%20is%20Ubuntu%20which%20has%20immediately%20reacted%20by%20commenting%20the%0A%3E%20mentioned%20variable%20out%20until%20a%20proper%20fix%20exists%20%5B0%5D.%0A%3E%20%0A%3E%20Note%20through%20that%20derivatives%20of%20ubuntu%20might%20use%20%27their%27%20apt%20with%20the%0A%3E%20feature%20enabled%20%28which%20is%20depending%20on%20their%20release%20model%20useless%2Fstrange%0A%3E%20%20as%20their%20%27replacement%27%20archive-keyring%20will%20properly%20not%20be%20signed%20by%20the%0A%3E%20%20ubuntu-master-key%E2%80%A6%29%20so%20these%20might%20be%20effected%2C%20too.%0A%3E%20%0A%3E%20Or%20in%20short%3A%0A%3E%20%24%20grep%20%27%5E%5B%5E%23%5D%2AARCHIVE_KEYRING_URI%5B%20%5D%2A%3D%27%20%2Fusr%2Fbin%2Fapt-key%0A%3E%20ARCHIVE_KEYRING_URI%3D%22%22%0A%3E%20%0A%3E%20If%20you%20have%20the%20same%20output%20you%20are%20save.%0A%3E%20%28I%20leave%20it%20as%20an%20exercise%20for%20the%20reader%20to%20come%20up%20with%20more%20complicated%0A%3E%20%20regexes%20to%20check%20for%20the%20value%20-%20for%20debian%20this%20one%20is%20already%20overkill%E2%80%A6%29%0A%3E%20%0A%3E%20%0A%3E%20Best%20regards%0A%3E%20%0A%3E%20David%20Kalnischkies%0A%3E%20%0A%3E%20%5B0%5D%20https%3A%2F%2Fbugs.launchpad.net%2Fubuntu%2F%2Bsource%2Fapt%2F%2Bbug%2F856489%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20110922215631.GA30839%40foursquare.net%3E%0A%20%3CCAAZ6_fDUOPx_ndWp9epShk8Bnoq-bDJ_ZQFcvRgpcb7rnkTarw%40mail.gmail.com%3E&amp;In-Reply-To=%3CCAAZ6_fDUOPx_ndWp9epShk8Bnoq-bDJ_ZQFcvRgpcb7rnkTarw%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kalnischkies%2Bdebian%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> David Kalnischkies &lt;kalnischkies+debian@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Chris Frey &lt;cdfrey@foursquare.net&gt;, 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: apt-key uses gpg --list-sigs instead of --check-sigs</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 00:55:30 +0200</div>
</div>
<pre class="message">On Thu, Sep 22, 2011 at 23:56, Chris Frey &lt;cdfrey@foursquare.net&gt; wrote:
&gt; Georgi Guninski reported on Full Disclosure a potential bug in apt-key&#39;s
&gt; use of gpg --list-sigs, when comparing keys to the master keyring in
&gt; add_keys_with_verify_against_master_keyring(), revealing a potential
&gt; MITM attack for adding keys.

While the bug itself is valid, it doesn&#39;t apply to stock debian as
it doesn&#39;t have ARCHIVE_KEYRING_URI set, so the result of
running &#39;apt-key net-update&#39; on a debian box is:
ERROR: Your distribution is not supported in net-update as no uri for
the archive-keyring is set

The only distribution i know of who enables this feature (as it was developed
by them) is Ubuntu which has immediately reacted by commenting the
mentioned variable out until a proper fix exists [0].

Note through that derivatives of ubuntu might use &#39;their&#39; apt with the
feature enabled (which is depending on their release model useless/strange
 as their &#39;replacement&#39; archive-keyring will properly not be signed by the
 ubuntu-master-key…) so these might be effected, too.

Or in short:
$ grep &#39;^[^#]*ARCHIVE_KEYRING_URI[ ]*=&#39; /usr/bin/apt-key
ARCHIVE_KEYRING_URI=&quot;&quot;

If you have the same output you are save.
(I leave it as an exercise for the reader to come up with more complicated
 regexes to check for the value - for debian this one is already overkill…)


Best regards

David Kalnischkies

[0] <a href="https://bugs.launchpad.net/ubuntu/+source/apt/+bug/856489">https://bugs.launchpad.net/ubuntu/+source/apt/+bug/856489</a>



</pre>

<div class="infmessage"><hr><p>
<a name="16"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316734743 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Thu, 22 Sep 2011 23:39:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=17">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: Chris Frey &lt;cdfrey@foursquare.net&gt; -->
<!-- time:1316734743 -->
<strong>Acknowledgement sent</strong>
to <code>Chris Frey &lt;cdfrey@foursquare.net&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Thu, 22 Sep 2011 23:39:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=19">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="20"></a><a name="msg20"></a><a href="#20">Message #20</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=20">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=20">mbox</a>, <a href="mailto:642480@bugs.debian.org?subject=Re%3A%20Bug%23642480%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs&amp;References=%3C20110922215631.GA30839%40foursquare.net%3E%20%3C20110923004334.GA22638%40debian.org%3E%20%3C20110922224420.GA1063%40foursquare.net%3E%0A%20%3C20110922230106.GA1968%40foursquare.net%3E&amp;body=On%20Thu%2C%2022%20Sep%202011%2019%3A01%3A06%20-0400%20Chris%20Frey%20%3Ccdfrey%40foursquare.net%3E%20wrote%3A%0A%3E%20On%20Fri%2C%20Sep%2023%2C%202011%20at%2012%3A44%3A55AM%20%2B0200%2C%20Julian%20Andres%20Klode%20wrote%3A%0A%3E%20%3E%20It%20is%20a%20bug%20for%20Ubuntu.%20Debian%27s%20apt-key%20does%20not%20support%20net-update%20and%0A%3E%20%3E%20is%20thus%20not%20affected.%0A%3E%20%0A%3E%20I%27m%20not%20sure%20that%27s%20true.%20%20On%20my%20system%2C%20with%20apt%200.8.10.3%2Bsqueeze1%2C%0A%3E%20there%20is%20definitely%20a%20net-update%20command%20available%3A%0A%3E%20%0A%3E%20case%20%22%24command%22%20in%0A%3E%20%20%20%20%20add%29%0A%3E%20%20%20%20%20%20%20%20%20%24GPG%20--quiet%20--batch%20--import%20%22%241%22%0A%3E%20%20%20%20%20%20%20%20%20echo%20%22OK%22%0A%3E%20%20%20%20%20%20%20%20%20%3B%3B%0A%3E%20%20%20%20%20del%7Crm%7Cremove%29%0A%3E%20%20%20%20%20%20%20%20%20%24GPG%20--quiet%20--batch%20--delete-key%20--yes%20%22%241%22%0A%3E%20%20%20%20%20%20%20%20%20echo%20%22OK%22%0A%3E%20%20%20%20%20%20%20%20%20%3B%3B%0A%3E%20%20%20%20%20update%29%0A%3E%20%20%20%20%20%20%20%20%20update%0A%3E%20%20%20%20%20%20%20%20%20%3B%3B%0A%3E%20%20%20%20%20net-update%29%0A%3E%20%20%20%20%20%20%20%20%20net_update%0A%3E%20%0A%3E%20But%20regardless%20of%20net-update%2C%20I%20think%20the%20real%20bug%20is%20the%20reliance%20on%0A%3E%20--list-sigs%20instead%20of%20--check-sigs.%0A%3E%20%0A%3E%20-%20Chris%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20110922230106.GA1968%40foursquare.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=cdfrey%40foursquare.net" alt="">
<div class="header"><span class="headerfield">From:</span> Chris Frey &lt;cdfrey@foursquare.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: apt-key uses gpg --list-sigs instead of --check-sigs</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 22 Sep 2011 19:01:06 -0400</div>
</div>
<pre class="message">On Fri, Sep 23, 2011 at 12:44:55AM +0200, Julian Andres Klode wrote:
&gt; It is a bug for Ubuntu. Debian&#39;s apt-key does not support net-update and
&gt; is thus not affected.

I&#39;m not sure that&#39;s true.  On my system, with apt 0.8.10.3+squeeze1,
there is definitely a net-update command available:

case &quot;$command&quot; in
    add)
        $GPG --quiet --batch --import &quot;$1&quot;
        echo &quot;OK&quot;
        ;;
    del|rm|remove)
        $GPG --quiet --batch --delete-key --yes &quot;$1&quot;
        echo &quot;OK&quot;
        ;;
    update)
        update
        ;;
    net-update)
        net_update

But regardless of net-update, I think the real bug is the reliance on
--list-sigs instead of --check-sigs.

- Chris




</pre>

<hr><p class="msgreceived"><a name="21"></a><a name="msg21"></a><a href="#21">Message #21</a> received at 642480-close@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=21">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=21">mbox</a>, <a href="mailto:642480@bugs.debian.org?References=%3C20110922215631.GA30839%40foursquare.net%3E%20%3C20110923004334.GA22638%40debian.org%3E%0A%20%3C20110922224420.GA1063%40foursquare.net%3E&amp;body=On%20Thu%2C%2022%20Sep%202011%2018%3A44%3A20%20-0400%20Chris%20Frey%20%3Ccdfrey%40foursquare.net%3E%20wrote%3A%0A%3E%20On%20Fri%2C%20Sep%2023%2C%202011%20at%2012%3A44%3A55AM%20%2B0200%2C%20Julian%20Andres%20Klode%20wrote%3A%0A%3E%20%3E%20It%20is%20a%20bug%20for%20Ubuntu.%20Debian%27s%20apt-key%20does%20not%20support%20net-update%20and%0A%3E%20%3E%20is%20thus%20not%20affected.%0A%3E%20%0A%3E%20I%27m%20not%20sure%20that%27s%20true.%20%20On%20my%20system%2C%20with%20apt%200.8.10.3%2Bsqueeze1%2C%0A%3E%20there%20is%20definitely%20a%20net-update%20command%20available%3A%0A%3E%20%0A%3E%20case%20%22%24command%22%20in%0A%3E%20%20%20%20%20add%29%0A%3E%20%20%20%20%20%20%20%20%20%24GPG%20--quiet%20--batch%20--import%20%22%241%22%0A%3E%20%20%20%20%20%20%20%20%20echo%20%22OK%22%0A%3E%20%20%20%20%20%20%20%20%20%3B%3B%0A%3E%20%20%20%20%20del%7Crm%7Cremove%29%0A%3E%20%20%20%20%20%20%20%20%20%24GPG%20--quiet%20--batch%20--delete-key%20--yes%20%22%241%22%0A%3E%20%20%20%20%20%20%20%20%20echo%20%22OK%22%0A%3E%20%20%20%20%20%20%20%20%20%3B%3B%0A%3E%20%20%20%20%20update%29%0A%3E%20%20%20%20%20%20%20%20%20update%0A%3E%20%20%20%20%20%20%20%20%20%3B%3B%0A%3E%20%20%20%20%20net-update%29%0A%3E%20%20%20%20%20%20%20%20%20net_update%0A%3E%20%0A%3E%20But%20regardless%20of%20net-update%2C%20I%20think%20the%20real%20bug%20is%20the%20reliance%20on%0A%3E%20--list-sigs%20instead%20of%20--check-sigs.%0A%3E%20%0A%3E%20-%20Chris%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23642480%3A%20apt-key%20uses%20gpg%20--list-sigs%20instead%20of%20--check-sigs&amp;In-Reply-To=%3C20110922224420.GA1063%40foursquare.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=cdfrey%40foursquare.net" alt="">
<div class="header"><span class="headerfield">From:</span> Chris Frey &lt;cdfrey@foursquare.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> Julian Andres Klode &lt;jak@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 642480-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: apt-key uses gpg --list-sigs instead of --check-sigs</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 22 Sep 2011 18:44:20 -0400</div>
</div>
<pre class="message">On Fri, Sep 23, 2011 at 12:44:55AM +0200, Julian Andres Klode wrote:
&gt; It is a bug for Ubuntu. Debian&#39;s apt-key does not support net-update and
&gt; is thus not affected.

I&#39;m not sure that&#39;s true.  On my system, with apt 0.8.10.3+squeeze1,
there is definitely a net-update command available:

case &quot;$command&quot; in
    add)
        $GPG --quiet --batch --import &quot;$1&quot;
        echo &quot;OK&quot;
        ;;
    del|rm|remove)
        $GPG --quiet --batch --delete-key --yes &quot;$1&quot;
        echo &quot;OK&quot;
        ;;
    update)
        update
        ;;
    net-update)
        net_update

But regardless of net-update, I think the real bug is the reliance on
--list-sigs instead of --check-sigs.

- Chris




</pre>

<div class="infmessage"><hr><p>
<a name="22"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316763722 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Fri, 23 Sep 2011 07:42:02 GMT) (<a href="bugreport.cgi?bug=642480;msg=23">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=23">mbox</a>, <a href="#22">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="24"></a>
<!-- request_addr: Alexander Neumann &lt;alexander@debian.org&gt; -->
<!-- time:1316763723 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Neumann &lt;alexander@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Fri, 23 Sep 2011 07:42:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=25">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=25">mbox</a>, <a href="#24">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="26"></a><a name="msg26"></a><a href="#26">Message #26</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=26">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=26">mbox</a>, <a href="mailto:642480@bugs.debian.org?body=On%20Fri%2C%2023%20Sep%202011%2009%3A16%3A03%20%2B0200%20Alexander%20Neumann%20%3Calexander%40debian.org%3E%20wrote%3A%0A%3E%20Hi%2C%0A%3E%20%0A%3E%20I%27ve%20reopened%20this%20bug%20and%20set%20the%20severity%20to%20normal%20in%20order%20to%20keep%20track%0A%3E%20on%20the%20code%20this%20bug%20pointed%20at.%0A%3E%20%0A%3E%20The%20cryptographic%20verification%20code%20used%20in%20the%20function%20called%20by%20apt-key%0A%3E%20net-update%20is%20utterly%20broken.%20%20The%20situation%20is%20not%20improved%20by%20replacing%0A%3E%20%22list-sigs%22%20to%20%22check-sigs%22%2C%20because%20still%20the%20key%20id%20strings%20%28which%20are%0A%3E%20absurdly%20short%20and%20easy%20to%20forge%29%20are%20used%20to%20%22verify%22%20that%20a%20key%20has%20been%0A%3E%20signed%20by%20another%20key.%20%20This%20is%20broken.%0A%3E%20%0A%3E%20This%20bug%20may%20be%20closed%20either%20when%20the%20code%20in%20apt-key%20has%20been%20replaced%20so%0A%3E%20that%20the%20signatures%20are%20checked%20or%20the%20code%20is%20removed%20completely.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20-%20Alex%0A&amp;References=%3C20110923071603.GC27425%40hoffentlich.net%3E&amp;subject=Re%3A%20reopened%20as%20cryptographic%20validation%20used%20in%20apt-key%20net-update%20is%20broken&amp;In-Reply-To=%3C20110923071603.GC27425%40hoffentlich.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=alexander%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> formorer@debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> reopened as cryptographic validation used in apt-key net-update is broken</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 09:16:03 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=26">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi,

I&#39;ve reopened this bug and set the severity to normal in order to keep track
on the code this bug pointed at.

The cryptographic verification code used in the function called by apt-key
net-update is utterly broken.  The situation is not improved by replacing
&quot;list-sigs&quot; to &quot;check-sigs&quot;, because still the key id strings (which are
absurdly short and easy to forge) are used to &quot;verify&quot; that a key has been
signed by another key.  This is broken.

This bug may be closed either when the code in apt-key has been replaced so
that the signatures are checked or the code is removed completely.

Regards,
- Alex
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;msg=26">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="msgreceived"><hr><p>
<a name="27"></a>
<!-- command:fixed -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1316763725 -->
<!-- new_data:
$new_data = {
              &#39;done&#39; =&gt; &#39;&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;done&#39; =&gt; &#39;Julian Andres Klode &lt;jak@debian.org&gt;&#39;
            };
-->
<strong>Did not alter fixed versions and reopened.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Fri, 23 Sep 2011 07:42:05 GMT) (<a href="bugreport.cgi?bug=642480;msg=28">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=28">mbox</a>, <a href="#27">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="29"></a>
<!-- requester: Alexander Neumann &lt;alexander@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1316763725 -->
<strong>Severity set to &#39;normal&#39; from &#39;critical&#39;
</strong>
Request was from <code>Alexander Neumann &lt;alexander@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 23 Sep 2011 07:42:05 GMT) (<a href="bugreport.cgi?bug=642480;msg=30">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=30">mbox</a>, <a href="#29">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="31"></a>
<!-- command:title -->
<!-- requester: Alexander Neumann &lt;alexander@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1316763726 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;cryptographic verification code in apt-key net-update utterly broken&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;apt-key uses gpg --list-sigs instead of --check-sigs&#39;
            };
-->
<strong>Changed Bug title to &#39;cryptographic verification code in apt-key net-update utterly broken&#39; from &#39;apt-key uses gpg --list-sigs instead of --check-sigs&#39;</strong>
Request was from <code>Alexander Neumann &lt;alexander@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 23 Sep 2011 07:42:06 GMT) (<a href="bugreport.cgi?bug=642480;msg=32">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=32">mbox</a>, <a href="#31">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="33"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316768615 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Fri, 23 Sep 2011 09:03:35 GMT) (<a href="bugreport.cgi?bug=642480;msg=34">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=34">mbox</a>, <a href="#33">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="35"></a>
<!-- request_addr: Georgi Guninski &lt;guninski@guninski.com&gt; -->
<!-- time:1316768616 -->
<strong>Acknowledgement sent</strong>
to <code>Georgi Guninski &lt;guninski@guninski.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.<p>
<P>

Your message did not contain a Subject field. They are recommended and
useful because the title of a $gBug is determined using this field.
Please remember to include a Subject field in your messages in future.
<P>

<p>

 (Fri, 23 Sep 2011 09:03:36 GMT) (<a href="bugreport.cgi?bug=642480;msg=36">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=36">mbox</a>, <a href="#35">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="37"></a><a name="msg37"></a><a href="#37">Message #37</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=37">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=37">mbox</a>, <a href="mailto:642480@bugs.debian.org?subject=Re%3A%20Your%20mail&amp;body=On%20Fri%2C%2023%20Sep%202011%2011%3A37%3A20%20%2B0300%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20hi%2C%0A%3E%20%0A%3E%20i%20am%20not%20sure%20--check-sigs%20will%20fix%20this.%0A%3E%20the%20keyring%20contains%20the%20colliding%20ID%20pub%20key%20and%20according%20to%20my%20tests%20--check-sigs%20works%20too%20on%20ubuntu%20-%20the%20signatures%20are%20correct%20and%20the%20keys%20are%20present.%0A%3E%20%0A%3E%20you%20can%20check%20with%20the%20keyring%20at%3A%0A%3E%20http%3A%2F%2Fmarc.info%2F%3Fl%3Dfull-disclosure%26m%3D131668259924743%26w%3D2%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E&amp;In-Reply-To=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=guninski%40guninski.com" alt="">
<div class="header"><span class="headerfield">From:</span> Georgi Guninski &lt;guninski@guninski.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 11:37:20 +0300</div>
</div>
<pre class="message">hi,

i am not sure --check-sigs will fix this.
the keyring contains the colliding ID pub key and according to my tests --check-sigs works too on ubuntu - the signatures are correct and the keys are present.

you can check with the keyring at:
<a href="http://marc.info/?l=full-disclosure&amp;m=131668259924743&amp;w=2">http://marc.info/?l=full-disclosure&amp;m=131668259924743&amp;w=2</a>



</pre>

<div class="infmessage"><hr><p>
<a name="38"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316769554 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Fri, 23 Sep 2011 09:19:14 GMT) (<a href="bugreport.cgi?bug=642480;msg=39">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=39">mbox</a>, <a href="#38">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="40"></a>
<!-- request_addr: Alexander Neumann &lt;alexander@debian.org&gt; -->
<!-- time:1316769564 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Neumann &lt;alexander@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Fri, 23 Sep 2011 09:19:24 GMT) (<a href="bugreport.cgi?bug=642480;msg=41">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=41">mbox</a>, <a href="#40">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="42"></a><a name="msg42"></a><a href="#42">Message #42</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=42">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=42">mbox</a>, <a href="mailto:642480@bugs.debian.org?subject=Re%3A%20Bug%23642480%3A%20%28no%20subject%29&amp;References=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923091217.GA29579%40hoffentlich.net%3E&amp;body=On%20Fri%2C%2023%20Sep%202011%2011%3A12%3A17%20%2B0200%20Alexander%20Neumann%20%3Calexander%40debian.org%3E%20wrote%3A%0A%3E%20Hi%2C%0A%3E%20%0A%3E%20%2A%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20%3E%20i%20am%20not%20sure%20--check-sigs%20will%20fix%20this.%0A%3E%20%0A%3E%20I%20am%20pretty%20sure%20that%20check-sigs%20will%20not%20fix%20this%20%3A%29%0A%3E%20%0A%3E%20%3E%20the%20keyring%20contains%20the%20colliding%20ID%20pub%20key%20and%20according%20to%20my%20tests%0A%3E%20%3E%20--check-sigs%20works%20too%20on%20ubuntu%20-%20the%20signatures%20are%20correct%20and%20the%20keys%0A%3E%20%3E%20are%20present.%0A%3E%20%0A%3E%20What%20do%20you%20mean%20by%20%22works%20too%20on%20ubuntu%22%3F%0A%3E%20%0A%3E%20When%20called%20with%20--list-sigs%2C%20the%20output%20is%20the%20same%20as%20when%20gpg%20is%20called%0A%3E%20with%20--check-sigs%2C%20just%20an%20exclamation%20mark%20is%20added%3A%0A%3E%20%0A%3E%20%24%20gpg%20--no-default-keyring%20--keyring%20.%2Fubuntu-archive-keyring.gpg%20--with-colons%20--list-sigs%20DB046AD3%20%7C%20grep%20-v%20pub%0A%3E%20%5B...%5D%0A%3E%20sig%3A%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A13x%3A%0A%3E%20sig%3A%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A18x%3A%0A%3E%20%0A%3E%20%24%20gpg%20--no-default-keyring%20--keyring%20.%2Fubuntu-archive-keyring.gpg%20--with-colons%20--check-sigs%20DB046AD3%20%7C%20grep%20-v%20pub%0A%3E%20%5B...%5D%0A%3E%20sig%3A%21%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A13x%3A%0A%3E%20sig%3A%21%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A18x%3A%0A%3E%20%0A%3E%20This%20suggests%20that%20it%20makes%20no%20difference%20whether%20gpg%20is%20called%20with%0A%3E%20list-sigs%20or%20check-sigs%20here.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20-%20Alex%0A&amp;In-Reply-To=%3C20110923091217.GA29579%40hoffentlich.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=alexander%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Georgi Guninski &lt;guninski@guninski.com&gt;, 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: (no subject)</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 11:12:17 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=42">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi,

* Georgi Guninski &lt;guninski@guninski.com&gt; wrote:
&gt; i am not sure --check-sigs will fix this.

I am pretty sure that check-sigs will not fix this :)

&gt; the keyring contains the colliding ID pub key and according to my tests
&gt; --check-sigs works too on ubuntu - the signatures are correct and the keys
&gt; are present.

What do you mean by &quot;works too on ubuntu&quot;?

When called with --list-sigs, the output is the same as when gpg is called
with --check-sigs, just an exclamation mark is added:

$ gpg --no-default-keyring --keyring ./ubuntu-archive-keyring.gpg --with-colons --list-sigs DB046AD3 | grep -v pub
[...]
sig:::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:13x:
sig:::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:18x:

$ gpg --no-default-keyring --keyring ./ubuntu-archive-keyring.gpg --with-colons --check-sigs DB046AD3 | grep -v pub
[...]
sig:!::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:13x:
sig:!::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:18x:

This suggests that it makes no difference whether gpg is called with
list-sigs or check-sigs here.

Regards,
- Alex
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;msg=42">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="43"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316770203 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Fri, 23 Sep 2011 09:30:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=44">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=44">mbox</a>, <a href="#43">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="45"></a>
<!-- request_addr: Georgi Guninski &lt;guninski@guninski.com&gt; -->
<!-- time:1316770205 -->
<strong>Acknowledgement sent</strong>
to <code>Georgi Guninski &lt;guninski@guninski.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Fri, 23 Sep 2011 09:30:05 GMT) (<a href="bugreport.cgi?bug=642480;msg=46">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=46">mbox</a>, <a href="#45">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="47"></a><a name="msg47"></a><a href="#47">Message #47</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=47">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=47">mbox</a>, <a href="mailto:642480@bugs.debian.org?In-Reply-To=%3C20110923092729.GC1977%40sivokote.iziade.m%24%3E&amp;References=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923091217.GA29579%40hoffentlich.net%3E%0A%20%3C20110923092729.GC1977%40sivokote.iziade.m%24%3E&amp;body=On%20Fri%2C%2023%20Sep%202011%2012%3A27%3A29%20%2B0300%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20On%20Fri%2C%20Sep%2023%2C%202011%20at%2011%3A12%3A17AM%20%2B0200%2C%20Alexander%20Neumann%20wrote%3A%0A%3E%20%3E%20Hi%2C%0A%3E%20%3E%20%0A%3E%20%3E%20%2A%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20%3E%20%3E%20i%20am%20not%20sure%20--check-sigs%20will%20fix%20this.%0A%3E%20%3E%20%0A%3E%20%3E%20I%20am%20pretty%20sure%20that%20check-sigs%20will%20not%20fix%20this%20%3A%29%0A%3E%20%3E%20%0A%3E%20%3E%20%3E%20the%20keyring%20contains%20the%20colliding%20ID%20pub%20key%20and%20according%20to%20my%20tests%0A%3E%20%3E%20%3E%20--check-sigs%20works%20too%20on%20ubuntu%20-%20the%20signatures%20are%20correct%20and%20the%20keys%0A%3E%20%3E%20%3E%20are%20present.%0A%3E%20%3E%20%0A%3E%20%3E%20What%20do%20you%20mean%20by%20%22works%20too%20on%20ubuntu%22%3F%0A%3E%20%3E%20%0A%3E%20%3E%20When%20called%20with%20--list-sigs%2C%20the%20output%20is%20the%20same%20as%20when%20gpg%20is%20called%0A%3E%20%3E%20with%20--check-sigs%2C%20just%20an%20exclamation%20mark%20is%20added%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%24%20gpg%20--no-default-keyring%20--keyring%20.%2Fubuntu-archive-keyring.gpg%20--with-colons%20--list-sigs%20DB046AD3%20%7C%20grep%20-v%20pub%0A%3E%20%3E%20%5B...%5D%0A%3E%20%3E%20sig%3A%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A13x%3A%0A%3E%20%3E%20sig%3A%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A18x%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%24%20gpg%20--no-default-keyring%20--keyring%20.%2Fubuntu-archive-keyring.gpg%20--with-colons%20--check-sigs%20DB046AD3%20%7C%20grep%20-v%20pub%0A%3E%20%3E%20%5B...%5D%0A%3E%20%3E%20sig%3A%21%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A13x%3A%0A%3E%20%3E%20sig%3A%21%3A%3A17%3A8B56ED98DB046AD3%3A2011-09-21%3A%3A%3A%3Aubun1%20%3Cubun1%40aaaaaaa%3E%3A18x%3A%0A%3E%20%3E%20%0A%3E%20%3E%20This%20suggests%20that%20it%20makes%20no%20difference%20whether%20gpg%20is%20called%20with%0A%3E%20%3E%20list-sigs%20or%20check-sigs%20here.%0A%3E%20%3E%0A%3E%20%0A%3E%20this%20is%20exactly%20my%20point%20-%20there%20is%20no%20difference%2C%20so%20--check-sig%20is%0A%3E%20useless.%0A%3E%20%0A%3E%20sorry%20for%20not%20being%20clear%20enough.%0A%3E%20%0A%3E%20btw%2C%20even%20if%20vanilla%20debian%20is%20not%20vulnerable%2C%20IMO%20this%20should%20be%20fixed%0A%3E%20or%20ditched%20because%20someone%20might%20chose%20to%20use%20the%20buggy%20code.%0A%3E%20%0A%3E%20--%20%0A%3E%20joro%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23642480%3A%20%28no%20subject%29">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=guninski%40guninski.com" alt="">
<div class="header"><span class="headerfield">From:</span> Georgi Guninski &lt;guninski@guninski.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: (no subject)</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 12:27:29 +0300</div>
</div>
<pre class="message">On Fri, Sep 23, 2011 at 11:12:17AM +0200, Alexander Neumann wrote:
&gt; Hi,
&gt; 
&gt; * Georgi Guninski &lt;guninski@guninski.com&gt; wrote:
&gt; &gt; i am not sure --check-sigs will fix this.
&gt; 
&gt; I am pretty sure that check-sigs will not fix this :)
&gt; 
&gt; &gt; the keyring contains the colliding ID pub key and according to my tests
&gt; &gt; --check-sigs works too on ubuntu - the signatures are correct and the keys
&gt; &gt; are present.
&gt; 
&gt; What do you mean by &quot;works too on ubuntu&quot;?
&gt; 
&gt; When called with --list-sigs, the output is the same as when gpg is called
&gt; with --check-sigs, just an exclamation mark is added:
&gt; 
&gt; $ gpg --no-default-keyring --keyring ./ubuntu-archive-keyring.gpg --with-colons --list-sigs DB046AD3 | grep -v pub
&gt; [...]
&gt; sig:::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:13x:
&gt; sig:::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:18x:
&gt; 
&gt; $ gpg --no-default-keyring --keyring ./ubuntu-archive-keyring.gpg --with-colons --check-sigs DB046AD3 | grep -v pub
&gt; [...]
&gt; sig:!::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:13x:
&gt; sig:!::17:8B56ED98DB046AD3:2011-09-21::::ubun1 &lt;ubun1@aaaaaaa&gt;:18x:
&gt; 
&gt; This suggests that it makes no difference whether gpg is called with
&gt; list-sigs or check-sigs here.
&gt;

this is exactly my point - there is no difference, so --check-sig is
useless.

sorry for not being clear enough.

btw, even if vanilla debian is not vulnerable, IMO this should be fixed
or ditched because someone might chose to use the buggy code.

-- 
joro




</pre>

<div class="infmessage"><hr><p>
<a name="48"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316770743 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Fri, 23 Sep 2011 09:39:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=49">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=49">mbox</a>, <a href="#48">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="50"></a>
<!-- request_addr: Alexander Neumann &lt;alexander@debian.org&gt; -->
<!-- time:1316770744 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Neumann &lt;alexander@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Fri, 23 Sep 2011 09:39:04 GMT) (<a href="bugreport.cgi?bug=642480;msg=51">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=51">mbox</a>, <a href="#50">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="52"></a><a name="msg52"></a><a href="#52">Message #52</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=52">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=52">mbox</a>, <a href="mailto:642480@bugs.debian.org?body=On%20Fri%2C%2023%20Sep%202011%2011%3A30%3A50%20%2B0200%20Alexander%20Neumann%20%3Calexander%40debian.org%3E%20wrote%3A%0A%3E%20Hi%2C%0A%3E%20%0A%3E%20%2A%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20%3E%20On%20Fri%2C%20Sep%2023%2C%202011%20at%2011%3A12%3A17AM%20%2B0200%2C%20Alexander%20Neumann%20wrote%3A%0A%3E%20%3E%20%3E%20%2A%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20%3E%20%3E%20%3E%20i%20am%20not%20sure%20--check-sigs%20will%20fix%20this.%0A%3E%20%3E%20%3E%20I%20am%20pretty%20sure%20that%20check-sigs%20will%20not%20fix%20this%20%3A%29%0A%3E%20%3E%20this%20is%20exactly%20my%20point%20-%20there%20is%20no%20difference%2C%20so%20--check-sig%20is%0A%3E%20%3E%20useless.%0A%3E%20%3E%0A%3E%20%3E%20sorry%20for%20not%20being%20clear%20enough.%0A%3E%20%3E%0A%3E%20%3E%20btw%2C%20even%20if%20vanilla%20debian%20is%20not%20vulnerable%2C%20IMO%20this%20should%20be%20fixed%0A%3E%20%3E%20or%20ditched%20because%20someone%20might%20chose%20to%20use%20the%20buggy%20code.%0A%3E%20%0A%3E%20Great%2C%20I%20share%20your%20opinion%2C%20and%20that%20is%20exactly%20the%20reason%20why%20I%20reopened%0A%3E%20this%20bug.%0A%3E%20%0A%3E%20Thanks%20for%20reporting%21%20%3A%29%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20-%20Alex%0A&amp;References=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E%20%3C20110923091217.GA29579%40hoffentlich.net%3E%20%3C20110923092729.GC1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923093050.GA30158%40hoffentlich.net%3E&amp;subject=Re%3A%20Bug%23642480%3A%20%28no%20subject%29&amp;In-Reply-To=%3C20110923093050.GA30158%40hoffentlich.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=alexander%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Georgi Guninski &lt;guninski@guninski.com&gt;, 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: (no subject)</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 11:30:50 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=52">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi,

* Georgi Guninski &lt;guninski@guninski.com&gt; wrote:
&gt; On Fri, Sep 23, 2011 at 11:12:17AM +0200, Alexander Neumann wrote:
&gt; &gt; * Georgi Guninski &lt;guninski@guninski.com&gt; wrote:
&gt; &gt; &gt; i am not sure --check-sigs will fix this.
&gt; &gt; I am pretty sure that check-sigs will not fix this :)
&gt; this is exactly my point - there is no difference, so --check-sig is
&gt; useless.
&gt;
&gt; sorry for not being clear enough.
&gt;
&gt; btw, even if vanilla debian is not vulnerable, IMO this should be fixed
&gt; or ditched because someone might chose to use the buggy code.

Great, I share your opinion, and that is exactly the reason why I reopened
this bug.

Thanks for reporting! :)

Regards,
- Alex
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;msg=52">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="53"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316771472 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Fri, 23 Sep 2011 09:51:12 GMT) (<a href="bugreport.cgi?bug=642480;msg=54">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=54">mbox</a>, <a href="#53">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="55"></a>
<!-- request_addr: Georgi Guninski &lt;guninski@guninski.com&gt; -->
<!-- time:1316771472 -->
<strong>Acknowledgement sent</strong>
to <code>Georgi Guninski &lt;guninski@guninski.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Fri, 23 Sep 2011 09:51:12 GMT) (<a href="bugreport.cgi?bug=642480;msg=56">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=56">mbox</a>, <a href="#55">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="57"></a><a name="msg57"></a><a href="#57">Message #57</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=57">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=57">mbox</a>, <a href="mailto:642480@bugs.debian.org?body=On%20Fri%2C%2023%20Sep%202011%2012%3A47%3A38%20%2B0300%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20i%20don%27t%20think%20there%20are%20many%20ways%20to%20fix%20this.%0A%3E%20%0A%3E%20a%20possible%20solution%20is%0A%3E%201.%20delete%20all%20keys%20with%20keyid%3D%3DMASTER%20key%20from%20the%20archive%20keyring%0A%3E%20%28to%20prevent%20forged%20signatures%29%0A%3E%202.%20add%20--keyring%20masterkeyring%20to%20gpg%20arguments%0A%3E%203.%20do%20--check-sigs%20taking%20care%20of%20unknown%20pubkeys%0A%3E%20%0A%3E%20this%20might%20be%20buggy%20though.%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923091217.GA29579%40hoffentlich.net%3E%0A%20%3C20110923092729.GC1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923093050.GA30158%40hoffentlich.net%3E%0A%20%3C20110923094738.GD1977%40sivokote.iziade.m%24%3E&amp;subject=Re%3A%20Bug%23642480%3A%20%28no%20subject%29&amp;In-Reply-To=%3C20110923094738.GD1977%40sivokote.iziade.m%24%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=guninski%40guninski.com" alt="">
<div class="header"><span class="headerfield">From:</span> Georgi Guninski &lt;guninski@guninski.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: (no subject)</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Sep 2011 12:47:38 +0300</div>
</div>
<pre class="message">i don&#39;t think there are many ways to fix this.

a possible solution is
1. delete all keys with keyid==MASTER key from the archive keyring
(to prevent forged signatures)
2. add --keyring masterkeyring to gpg arguments
3. do --check-sigs taking care of unknown pubkeys

this might be buggy though.



</pre>

<div class="infmessage"><hr><p>
<a name="58"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316890626 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Sat, 24 Sep 2011 18:57:06 GMT) (<a href="bugreport.cgi?bug=642480;msg=59">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=59">mbox</a>, <a href="#58">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="60"></a>
<!-- request_addr: Julian Andres Klode &lt;jak@debian.org&gt; -->
<!-- time:1316890626 -->
<strong>Acknowledgement sent</strong>
to <code>Julian Andres Klode &lt;jak@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Sat, 24 Sep 2011 18:57:06 GMT) (<a href="bugreport.cgi?bug=642480;msg=61">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=61">mbox</a>, <a href="#60">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="62"></a><a name="msg62"></a><a href="#62">Message #62</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=62">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=62">mbox</a>, <a href="mailto:642480@bugs.debian.org?In-Reply-To=%3C20110924204905.GA25180%40debian.org%3E&amp;subject=Re%3A%20Bug%23642480%3A%20reopened%20as%20cryptographic%20validation%20used%20in%20apt-key%0A%20net-update%20is%20broken&amp;body=On%20Sat%2C%2024%20Sep%202011%2020%3A53%3A49%20%2B0200%20Julian%20Andres%20Klode%20%3Cjak%40debian.org%3E%20wrote%3A%0A%3E%20On%20Fri%2C%20Sep%2023%2C%202011%20at%2009%3A16%3A03AM%20%2B0200%2C%20Alexander%20Neumann%20wrote%3A%0A%3E%20%3E%20Hi%2C%0A%3E%20%3E%20%0A%3E%20%3E%20I%27ve%20reopened%20this%20bug%20and%20set%20the%20severity%20to%20normal%20in%20order%20to%20keep%20track%0A%3E%20%3E%20on%20the%20code%20this%20bug%20pointed%20at.%0A%3E%20%3E%20%0A%3E%20%3E%20The%20cryptographic%20verification%20code%20used%20in%20the%20function%20called%20by%20apt-key%0A%3E%20%3E%20net-update%20is%20utterly%20broken.%20%20The%20situation%20is%20not%20improved%20by%20replacing%0A%3E%20%3E%20%22list-sigs%22%20to%20%22check-sigs%22%2C%20because%20still%20the%20key%20id%20strings%20%28which%20are%0A%3E%20%3E%20absurdly%20short%20and%20easy%20to%20forge%29%20are%20used%20to%20%22verify%22%20that%20a%20key%20has%20been%0A%3E%20%3E%20signed%20by%20another%20key.%20%20This%20is%20broken.%0A%3E%20%3E%20%0A%3E%20%3E%20This%20bug%20may%20be%20closed%20either%20when%20the%20code%20in%20apt-key%20has%20been%20replaced%20so%0A%3E%20%3E%20that%20the%20signatures%20are%20checked%20or%20the%20code%20is%20removed%20completely.%0A%3E%20%0A%3E%20I%20don%27t%20see%20a%20reason%20to%20have%20a%20bug%20open%20for%20code%20which%20we%20do%20not%20use.%20The%0A%3E%20only%20people%20affected%20by%20this%20are%20downstream%20distributions%2C%20and%20the%20fix%0A%3E%20will%20get%20in%20via%20Ubuntu%20once%20its%20there.%20Bugs%20in%20disabled%20code%20are%20no%0A%3E%20bugs.%20And%20we%20already%20have%20a%20bug%20in%20Launchpad%2C%20right%20were%20people%20are%0A%3E%20affected%20by%20this.%20And%20the%20APT%20developers%20are%20subscribed%20to%20both%20bug%0A%3E%20trackers.%20If%20at%20all%2C%20that%27s%20a%20minor%20documentation%20issue%20for%20us.%0A%3E%20%0A%3E%20%0A%3E%20--%20%0A%3E%20Julian%20Andres%20Klode%20%20-%20Debian%20Developer%2C%20Ubuntu%20Member%0A%3E%20%0A%3E%20See%20http%3A%2F%2Fwiki.debian.org%2FJulianAndresKlode%20and%20http%3A%2F%2Fjak-linux.org%2F.%0A&amp;References=%3C20110923071603.GC27425%40hoffentlich.net%3E%0A%20%3C20110924204905.GA25180%40debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jak%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Julian Andres Klode &lt;jak@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Alexander Neumann &lt;alexander@debian.org&gt;, 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> formorer@debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: reopened as cryptographic validation used in apt-key
 net-update is broken</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 24 Sep 2011 20:53:49 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=62">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On Fri, Sep 23, 2011 at 09:16:03AM +0200, Alexander Neumann wrote:
&gt; Hi,
&gt; 
&gt; I&#39;ve reopened this bug and set the severity to normal in order to keep track
&gt; on the code this bug pointed at.
&gt; 
&gt; The cryptographic verification code used in the function called by apt-key
&gt; net-update is utterly broken.  The situation is not improved by replacing
&gt; &quot;list-sigs&quot; to &quot;check-sigs&quot;, because still the key id strings (which are
&gt; absurdly short and easy to forge) are used to &quot;verify&quot; that a key has been
&gt; signed by another key.  This is broken.
&gt; 
&gt; This bug may be closed either when the code in apt-key has been replaced so
&gt; that the signatures are checked or the code is removed completely.

I don&#39;t see a reason to have a bug open for code which we do not use. The
only people affected by this are downstream distributions, and the fix
will get in via Ubuntu once its there. Bugs in disabled code are no
bugs. And we already have a bug in Launchpad, right were people are
affected by this. And the APT developers are subscribed to both bug
trackers. If at all, that&#39;s a minor documentation issue for us.


-- 
Julian Andres Klode  - Debian Developer, Ubuntu Member

See <a href="http://wiki.debian.org/JulianAndresKlode">http://wiki.debian.org/JulianAndresKlode</a> and <a href="http://jak-linux.org/">http://jak-linux.org/</a>.
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;msg=62">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="63"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316893323 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Sat, 24 Sep 2011 19:42:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=64">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=64">mbox</a>, <a href="#63">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="65"></a>
<!-- request_addr: Alexander Neumann &lt;alexander@debian.org&gt; -->
<!-- time:1316893323 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Neumann &lt;alexander@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Sat, 24 Sep 2011 19:42:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=66">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=66">mbox</a>, <a href="#65">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="67"></a><a name="msg67"></a><a href="#67">Message #67</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=67">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=67">mbox</a>, <a href="mailto:642480@bugs.debian.org?In-Reply-To=%3C20110924193814.GA5221%40hoffentlich.net%3E&amp;References=%3C20110923071603.GC27425%40hoffentlich.net%3E%20%3C20110924204905.GA25180%40debian.org%3E%0A%20%3C20110924193814.GA5221%40hoffentlich.net%3E&amp;body=On%20Sat%2C%2024%20Sep%202011%2021%3A38%3A14%20%2B0200%20Alexander%20Neumann%20%3Calexander%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Julian%2C%0A%3E%20%0A%3E%20%2A%20Julian%20Andres%20Klode%20%3Cjak%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20On%20Fri%2C%20Sep%2023%2C%202011%20at%2009%3A16%3A03AM%20%2B0200%2C%20Alexander%20Neumann%20wrote%3A%0A%3E%20%3E%20%3E%20I%27ve%20reopened%20this%20bug%20and%20set%20the%20severity%20to%20normal%20in%20order%20to%20keep%20track%0A%3E%20%3E%20%3E%20on%20the%20code%20this%20bug%20pointed%20at.%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20The%20cryptographic%20verification%20code%20used%20in%20the%20function%20called%20by%20apt-key%0A%3E%20%3E%20%3E%20net-update%20is%20utterly%20broken.%20%20The%20situation%20is%20not%20improved%20by%20replacing%0A%3E%20%3E%20%3E%20%22list-sigs%22%20to%20%22check-sigs%22%2C%20because%20still%20the%20key%20id%20strings%20%28which%20are%0A%3E%20%3E%20%3E%20absurdly%20short%20and%20easy%20to%20forge%29%20are%20used%20to%20%22verify%22%20that%20a%20key%20has%20been%0A%3E%20%3E%20%3E%20signed%20by%20another%20key.%20%20This%20is%20broken.%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20This%20bug%20may%20be%20closed%20either%20when%20the%20code%20in%20apt-key%20has%20been%20replaced%20so%0A%3E%20%3E%20%3E%20that%20the%20signatures%20are%20checked%20or%20the%20code%20is%20removed%20completely.%0A%3E%20%0A%3E%20In%20retrospect%2C%20I%20think%20my%20tone%20was%20too%20harsh%20when%20writing%20this%2C%20please%0A%3E%20accept%20my%20apologies.%0A%3E%20%0A%3E%20%3E%20I%20don%27t%20see%20a%20reason%20to%20have%20a%20bug%20open%20for%20code%20which%20we%20do%20not%20use.%20The%0A%3E%20%3E%20only%20people%20affected%20by%20this%20are%20downstream%20distributions%2C%20and%20the%20fix%0A%3E%20%3E%20will%20get%20in%20via%20Ubuntu%20once%20its%20there.%20Bugs%20in%20disabled%20code%20are%20no%0A%3E%20%3E%20bugs.%20And%20we%20already%20have%20a%20bug%20in%20Launchpad%2C%20right%20were%20people%20are%0A%3E%20%3E%20affected%20by%20this.%20And%20the%20APT%20developers%20are%20subscribed%20to%20both%20bug%0A%3E%20%3E%20trackers.%20If%20at%20all%2C%20that%27s%20a%20minor%20documentation%20issue%20for%20us.%0A%3E%20%0A%3E%20Hm.%20%20I%20disagree.%20I%20still%20think%20this%20bug%20should%20remain%20open%20until%20the%20code%20is%0A%3E%20properly%20fixed%20and%20has%20entered%20unstable%2C%20but%20I%20will%20accept%20your%20decision.%0A%3E%20%0A%3E%20What%20do%20you%20propose%3F%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20-%20Alexander%0A&amp;subject=Re%3A%20Bug%23642480%3A%20reopened%20as%20cryptographic%20validation%20used%20in%20apt-key%20net-update%20is%20broken">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=alexander%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Julian Andres Klode &lt;jak@debian.org&gt;, 642480@bugs.debian.org,
	formorer@debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: reopened as cryptographic validation used in apt-key net-update is broken</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 24 Sep 2011 21:38:14 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=67">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi Julian,

* Julian Andres Klode &lt;jak@debian.org&gt; wrote:
&gt; On Fri, Sep 23, 2011 at 09:16:03AM +0200, Alexander Neumann wrote:
&gt; &gt; I&#39;ve reopened this bug and set the severity to normal in order to keep track
&gt; &gt; on the code this bug pointed at.
&gt; &gt;
&gt; &gt; The cryptographic verification code used in the function called by apt-key
&gt; &gt; net-update is utterly broken.  The situation is not improved by replacing
&gt; &gt; &quot;list-sigs&quot; to &quot;check-sigs&quot;, because still the key id strings (which are
&gt; &gt; absurdly short and easy to forge) are used to &quot;verify&quot; that a key has been
&gt; &gt; signed by another key.  This is broken.
&gt; &gt;
&gt; &gt; This bug may be closed either when the code in apt-key has been replaced so
&gt; &gt; that the signatures are checked or the code is removed completely.

In retrospect, I think my tone was too harsh when writing this, please
accept my apologies.

&gt; I don&#39;t see a reason to have a bug open for code which we do not use. The
&gt; only people affected by this are downstream distributions, and the fix
&gt; will get in via Ubuntu once its there. Bugs in disabled code are no
&gt; bugs. And we already have a bug in Launchpad, right were people are
&gt; affected by this. And the APT developers are subscribed to both bug
&gt; trackers. If at all, that&#39;s a minor documentation issue for us.

Hm.  I disagree. I still think this bug should remain open until the code is
properly fixed and has entered unstable, but I will accept your decision.

What do you propose?

Regards,
- Alexander
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;msg=67">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="68"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1316956149 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Sun, 25 Sep 2011 13:09:09 GMT) (<a href="bugreport.cgi?bug=642480;msg=69">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=69">mbox</a>, <a href="#68">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="70"></a>
<!-- request_addr: Georgi Guninski &lt;guninski@guninski.com&gt; -->
<!-- time:1316956149 -->
<strong>Acknowledgement sent</strong>
to <code>Georgi Guninski &lt;guninski@guninski.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Sun, 25 Sep 2011 13:09:09 GMT) (<a href="bugreport.cgi?bug=642480;msg=71">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=71">mbox</a>, <a href="#70">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="72"></a><a name="msg72"></a><a href="#72">Message #72</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=72">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=72">mbox</a>, <a href="mailto:642480@bugs.debian.org?In-Reply-To=%3C20110925121824.GB1944%40sivokote.iziade.m%24%3E&amp;References=%3C20110923083720.GA1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923091217.GA29579%40hoffentlich.net%3E%0A%20%3C20110923092729.GC1977%40sivokote.iziade.m%24%3E%0A%20%3C20110923093050.GA30158%40hoffentlich.net%3E%0A%20%3C20110925121824.GB1944%40sivokote.iziade.m%24%3E&amp;body=On%20Sun%2C%2025%20Sep%202011%2015%3A18%3A24%20%2B0300%20Georgi%20Guninski%20%3Cguninski%40guninski.com%3E%20wrote%3A%0A%3E%20btw%2C%20there%20is%20strange%20behaviour%20with%20colliding%20gpg%20key%20IDs.%0A%3E%20%0A%3E%20the%20first%20one%20totally%20shadows%20the%20second%20one%2C%20which%20might%20potentially%20be%20exploitable.%0A%3E%20%0A%3E%20a%20possible%20scenario%20might%20be%20to%20trick%20the%20user%20to%20import%20the%20forged%20key%20ID%20first.%0A%3E%20%0A%3E%20possibly%20this%20may%20add%20forged%20subkeys%2C%20not%20quite%20sure.%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23642480%3A%20%28no%20subject%29">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=guninski%40guninski.com" alt="">
<div class="header"><span class="headerfield">From:</span> Georgi Guninski &lt;guninski@guninski.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Alexander Neumann &lt;alexander@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#642480: (no subject)</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 25 Sep 2011 15:18:24 +0300</div>
</div>
<pre class="message">btw, there is strange behaviour with colliding gpg key IDs.

the first one totally shadows the second one, which might potentially be exploitable.

a possible scenario might be to trick the user to import the forged key ID first.

possibly this may add forged subkeys, not quite sure.




</pre>

<div class="infmessage"><hr><p>
<a name="73"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1446142503 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#642480</code>; Package <code>apt</code>.
 (Thu, 29 Oct 2015 18:15:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=74">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=74">mbox</a>, <a href="#73">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="75"></a>
<!-- request_addr: &quot;Interfax&quot; &lt;incoming@interfax.net&gt; -->
<!-- time:1446142503 -->
<strong>Acknowledgement sent</strong>
to <code>&quot;Interfax&quot; &lt;incoming@interfax.net&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Thu, 29 Oct 2015 18:15:03 GMT) (<a href="bugreport.cgi?bug=642480;msg=76">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=76">mbox</a>, <a href="#75">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="77"></a><a name="msg77"></a><a href="#77">Message #77</a> received at 642480@bugs.debian.org (<a href="bugreport.cgi?bug=642480;msg=77">full text</a>, <a href="bugreport.cgi?bug=642480;mbox=yes;msg=77">mbox</a>, <a href="mailto:642480@bugs.debian.org?References=%3C29a6f49020ea735a75682b4715cc22e2%40ff-wuestmark.de%3E&amp;body=On%20Thu%2C%2029%20Oct%202015%2019%3A14%3A08%20%2B0100%20%22Interfax%22%20%3Cincoming%40interfax.net%3E%20wrote%3A%0A%3E%20New%20incoming%20fax%20document.%0A%3E%20%0A%3E%20Scanned%20fax%20document%20is%20attached%20to%20this%20email.%0A%3E%20%0A%3E%20Sender%3A%20%20%20%20%20%20%20%20%20%20%20Tyler%20Warner%0A%3E%20File%20size%3A%20%20%20%20%20%20%20%20105%20Kb%0A%3E%20Pages%20sent%3A%20%20%20%20%20%20%2012%0A%3E%20Resolution%3A%20%20%20%20%20%20%20500%20DPI%0A%3E%20Date%3A%20%20%20%20%20%20%20%20%20%20%20%20%20Wed%2C%2028%20Oct%202015%2021%3A59%3A23%20%2B0300%0A%3E%20Filename%3A%20%20%20%20%20%20%20%20%20document_0000971909.doc%0A%3E%20Scanned%20in%3A%20%20%20%20%20%20%209%20seconds%0A%3E%20%0A%3E%20Thank%20you%20for%20using%20Interfax%21%0A%3E%20%0A&amp;subject=Re%3A%20You%20have%20new%20fax%2C%20document%200000971909&amp;In-Reply-To=%3C29a6f49020ea735a75682b4715cc22e2%40ff-wuestmark.de%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=incoming%40interfax.net" alt="">
<div class="header"><span class="headerfield">From:</span> &quot;Interfax&quot; &lt;incoming@interfax.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> 642480@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> You have new fax, document 0000971909</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 29 Oct 2015 19:14:08 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=642480;msg=77">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">New incoming fax document.

Scanned fax document is attached to this email.

Sender:           Tyler Warner
File size:        105 Kb
Pages sent:       12
Resolution:       500 DPI
Date:             Wed, 28 Oct 2015 21:59:23 +0300
Filename:         document_0000971909.doc
Scanned in:       9 seconds

Thank you for using Interfax!

</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=642480;filename=document_0000971909.zip;msg=77">document_0000971909.zip</a> (application/zip, attachment)]</pre>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=642480">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:27:17 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
