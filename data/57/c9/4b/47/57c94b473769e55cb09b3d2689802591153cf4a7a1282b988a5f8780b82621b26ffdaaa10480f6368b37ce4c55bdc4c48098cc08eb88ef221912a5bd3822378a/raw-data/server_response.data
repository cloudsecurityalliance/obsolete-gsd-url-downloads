
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>
Issue 34623: _elementtree.c doesn't call XML_SetHashSalt() - Python tracker

</title>
<link rel="shortcut icon" href="@@file/favicon.ico" />
<link rel="stylesheet" type="text/css" href="@@file/main.css" />
<link rel="stylesheet" type="text/css" href="@@file/style.css" />
<link rel="search" type="application/opensearchdescription+xml" href="@@file/osd.xml" title="Python bug tracker search" />
<meta http-equiv="Content-Type"
      content="text/html; charset=utf-8" />

<script nonce="9100a8b739f025a8a12fb3d14519a531a331dbaede4a460935c25e06109501b1" type="text/javascript">
submitted = false;
function submit_once() {
    if (submitted) {
        alert("Your request is being processed.\nPlease be patient.");
        return false;
    }
    submitted = true;
    return true;
}

function help_window(helpurl, width, height) {
    HelpWin = window.open('https://bugs.python.org/' + helpurl, 'RoundupHelpWindow', 'scrollbars=yes,resizable=yes,toolbar=no,height='+height+',width='+width);
    HelpWin.focus ()
}
</script>


<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.js"></script>
<script type="text/javascript" src="@@file/issue.item.js"></script>
<link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css" />


</head>
<body>
  <!--  Logo  -->
  <h1 id="logoheader">
    <a accesskey="1" href="." id="logolink">
       <img src="@@file/python-logo.gif" alt="homepage" border="0" id="logo" /></a>
  </h1>

<div id="utility-menu">
<!-- Search Box -->
<div id="searchbox">
    <form name="searchform" method="get" action="issue" id="searchform">
      <div id="search">
       <input type="hidden" name="@columns"
              value="id,activity,title,creator,assignee,status,type" />
       <input type="hidden" name="@sort" value="-activity" />
       <input type="hidden" name="@filter" value="status" />
       <input type="hidden" name="@action" value="searchid" />
       <input type="hidden" name="ignore" value="file:content" />
       <input class="input-text" id="search-text"
              name="@search_text" size="10" />
       <input type="submit" id="submit" value="search" name="submit" class="input-button" />
       <input type="radio" name="status"
              id="status_notresolved" value="-1,1,3" />
       <label for="status_notresolved">open</label>
       <input type="radio" name="status" checked="checked"
              id="status_all" value="-1,1,2,3" />
       <label for="status_all">all</label>
      </div>
     </form>
</div>
</div>


<div id="left-hand-navigation">
<!--  Main Menu NEED LEVEL TWO HEADER AND FOOTER -->
<div id="menu">
  <ul class="level-one">
    <li><a href="https://www.python.org/" title="Go to the Python homepage">Python Home</a></li>
    <li><a href="https://www.python.org/about/" title="About The Python Language">About</a></li>
    <li><a href="https://www.python.org/blogs/" title="">News</a></li>
    <li><a href="https://www.python.org/doc/" title="">Documentation</a></li>
    <li><a href="https://www.python.org/downloads/" title="">Downloads</a></li>
    <li><a href="https://www.python.org/community/" title="">Community</a></li>
    <li><a href="https://www.python.org/psf/" title="Python Software Foundation">Foundation</a></li>
    <li><a href="https://devguide.python.org/" title="Python Developer's Guide">Developer's Guide</a></li>
    <li class="selected"><a href="." class="selected" title="Python Issue Tracker">Issue Tracker</a>
      <ul class="level-two">
        <li>
          <strong>Issues</strong>
          <ul class="level-three">
            
            <li><a href="issue?@template=search&amp;status=1">Search</a></li>
            <li><a href="issue?@action=random">Random Issue</a></li>
            <li>
              <form method="post" action="issue34623">
                <input type="submit" class="form-small"
                       value="Show issue:" />
                <input class="form-small" size="4" type="text" name="@number" />
                <input type="hidden" name="@type" value="issue" />
                <input type="hidden" name="@action" value="show" />
              </form>
            </li>
          </ul>
        </li>


        <li>
          <strong>Summaries</strong>
          <ul class="level-three">
            

            

            

            <li>
              <a href="issue?status=1&amp;@sort=-activity&amp;@columns=id%2Cactivity%2Ctitle%2Ccreator%2Cstatus&amp;@dispname=Issues%20with%20patch&amp;@startwith=0&amp;@group=priority&amp;keywords=2&amp;@action=search&amp;@filter=&amp;@pagesize=50">Issues with patch</a>
            </li>

            <li>
              <a href="issue?status=1&amp;@sort=-activity&amp;@columns=id%2Cactivity%2Ctitle%2Ccreator%2Cstatus&amp;@dispname=Easy%20issues&amp;@startwith=0&amp;@group=priority&amp;keywords=6&amp;@action=search&amp;@filter=&amp;@pagesize=50">Easy issues</a>
            </li>

            <li>
              <a href="issue?@template=stats">Stats</a>
            </li>

          </ul>
        </li>


        <li>
          <strong>User</strong>
          <form method="post" action="issue34623">
          <ul class="level-three">
            <li>
                Login&nbsp;(OpenID&nbsp;possible)<br />
	         <a style="display:inline;width:0;margin:0"
             href="issue34623?@action=oic_login&amp;provider=Google">
                  <img hspace="0" vspace="0" width="16"
                       height="16"
                       src="https://www.google.com/favicon.ico"
                       alt="Google" title="Google" /></a>
	         <a style="display:inline;width:0;margin:0"
             href="issue34623?@action=oic_login&amp;provider=GitHub">
                  <img hspace="0" vspace="0" width="16"
                       height="16"
                       src="https://www.github.com/favicon.ico"
                       alt="GitHub" title="GitHub" /></a>
	         <a style="display:inline;width:0;margin:0"
             href="issue34623?@action=openid_login&amp;provider=Launchpad">
                  <img hspace="0" vspace="0" width="16"
                       height="16"
                       src="https://launchpad.net/favicon.ico"
                       alt="Launchpad" title="Launchpad" /></a>
                <input size="10" name="openid_identifier" style="background:url(@@file/openid-16x16.gif)
                  center left no-repeat;padding-left:16px" /><br />
                <input size="10" type="password" name="__login_password" /><br />
                <input type="hidden" name="@action" value="Login" />
                <input type="checkbox" name="remember" id="remember" />
                <label for="remember">Remember me?</label><br />
                <input class="form-small" type="submit"
                       value="Login" /><br />
                <input type="hidden" name="__came_from"
                       value="https://bugs.python.org/issue34623?">
                
                <input type="hidden" name="@sort" value=""/>
<input type="hidden" name="@group" value=""/>
<input type="hidden" name="@pagesize" value="50"/>
<input type="hidden" name="@startwith" value="0"/>
            </li>
            <li>
                <a href="user?@template=register">Register</a>
            </li>
            <li><a href="user?@template=forgotten">Lost&nbsp;your&nbsp;login?</a></li>
          </ul>
          </form>
        </li>

        

        

        <li>
          <strong>Administration</strong>
          <ul class="level-three">
            
            <li>
                <a href="user?@sort=username">User List</a></li>
            <li>
                <a href="user?iscommitter=1&amp;@action=search&amp;@sort=username&amp;@pagesize=300">Committer List</a></li>
            
            
            
          </ul>
        </li>

        <li>
          <strong>Help</strong>
          <ul class="level-three">
            <li><a href="http://docs.python.org/devguide/triaging.html">
                Tracker Documentation</a></li>
            <li><a href="http://wiki.python.org/moin/TrackerDevelopment">
                Tracker Development</a></li>
            <li><a href="https://github.com/python/psf-infra-meta/issues">
                Report Tracker Problem</a></li>
          </ul>
        </li>

      </ul>
    </li>
  </ul>
</div> <!-- menu -->
</div> <!-- left-hand-navigation -->

<div id="content-body">
<div id="body-main">
<div id="content">
<div id="breadcrumb">
 
 
 Issue34623
 
</div>
 
 





<div>

<form method="post" name="itemSynopsis"
      onsubmit="return submit_once()"
      enctype="multipart/form-data" action="issue34623">

<fieldset><legend>classification</legend>
<table class="form">
<tr>
 <th class="required"><a href="http://docs.python.org/devguide/triaging.html#title" target="_blank">Title</a>:</th>
 
 <td colspan="3">
  <span>_elementtree.c doesn't call XML_SetHashSalt()</span>
  <input type="hidden" name="title"
         value="_elementtree.c doesn't call XML_SetHashSalt()">
 </td>
</tr>

<tr>
 <th class="required"><a href="http://docs.python.org/devguide/triaging.html#type" target="_blank">Type</a>:</th>
 <td>security</td>
 <th><a href="http://docs.python.org/devguide/triaging.html#stage" target="_blank">Stage</a>:</th>
 <td>resolved</td>
</tr>

<tr>
 <th><a href="http://docs.python.org/devguide/triaging.html#components" target="_blank">Components</a>:</th>
 <td>XML</td>
 <th><a href="http://docs.python.org/devguide/triaging.html#versions" target="_blank">Versions</a>:</th>
 <td>Python 3.4, Python 3.5</td>
</tr>
</table>
</fieldset>

<fieldset><legend>process</legend>
<table class="form">
<tr>
  <th><a href="http://docs.python.org/devguide/triaging.html#status" target="_blank">Status</a>:</th>
  <td>closed</td>
  <th><a href="http://docs.python.org/devguide/triaging.html#resolution" target="_blank">Resolution</a>:</th>
  <td>fixed</td>
</tr>

<tr>
 <th>
    <a href="http://docs.python.org/devguide/triaging.html#dependencies"
       target="_blank">Dependencies</a>:
 </th>
 <td>
  
  
 </td>
 <th><a href="http://docs.python.org/devguide/triaging.html#superseder" target="_blank">Superseder</a>:</th>
 <td>
  
 
 </td>
 </tr>
 <tr>
 <th>
   <a href="http://docs.python.org/devguide/triaging.html#assigned-to"
      target="_blank">Assigned To</a>:
 </th>
 
 <td>
  larry
 </td>
 <th>
   <a href="http://docs.python.org/devguide/triaging.html#nosy-list"
      target="_blank">Nosy List</a><!--
        <span tal:condition="context/nosy_count" tal:replace="python: ' (%d)' % context.nosy_count" /> -->:
 </th>
 <td>
     benjamin.peterson, christian.heimes, cstratak, larry, mcepl, miss-islington, ned.deily, vstinner
     
 </td>
</tr>
<tr>
 <th>
   <a href="http://docs.python.org/devguide/triaging.html#priority"
      target="_blank">Priority</a>:
 </th>
 <td>release blocker</td>
 <th>
    <a href="http://docs.python.org/devguide/triaging.html#keywords"
       target="_blank">Keywords</a>:
 </th>
 <td>patch</td>


</tr>









</table>
</fieldset>

</form>

<p>Created on <strong>2018-09-10 22:47</strong> by <strong>christian.heimes</strong>, last changed <strong>2019-05-10 18:10</strong> by <strong>ned.deily</strong>. This issue is now <strong style="color:#00F; background-color:inherit;">closed</strong>.</p>

<table class="files">
 <tr><th colspan="5" class="header">Files</th></tr>
 <tr>
  <th>File name</th>
  <th>Uploaded</th>
  <th>Description</th>
  <th>Edit</th>
 </tr>
 <tr>
  <td>
   <a href="file48077/CVE-2018-14647_XML_SetHashSalt-in_elementtree.patch">CVE-2018-14647_XML_SetHashSalt-in_elementtree.patch</a>
  </td>
  <td>
   <span>mcepl</span>,
   <span>2019-01-25 21:09</span>
  </td>
  <td></td>
  <td>
      
      
      
  </td>
 </tr>
</table>

<table class="files">
 <tr><th class="header" colspan="4">Pull Requests</th></tr>
 <tr>
  <th>URL</th>
  <th>Status</th>
  <th>Linked</th>
  <th>Edit</th>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9146" title="bpo-34623: Use XML_SetHashSalt in _elementtree">PR 9146</a></td>
  <td>merged</td>
  <td>
   <span>christian.heimes</span>,
   <span>2018-09-10 23:07</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9392" title="[3.7] bpo-34623: Use XML_SetHashSalt in _elementtree (GH-9146)">PR 9392</a></td>
  <td>merged</td>
  <td>
   <span>miss-islington</span>,
   <span>2018-09-18 12:39</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9393" title="[3.6] bpo-34623: Use XML_SetHashSalt in _elementtree (GH-9146)">PR 9393</a></td>
  <td>merged</td>
  <td>
   <span>miss-islington</span>,
   <span>2018-09-18 12:39</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9394" title="[2.7] bpo-34623: Use XML_SetHashSalt in _elementtree (GH-9146)">PR 9394</a></td>
  <td>merged</td>
  <td>
   <span>christian.heimes</span>,
   <span>2018-09-18 12:45</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9482" title="bpo-34623: Mention CVE-2018-14647 in news entry">PR 9482</a></td>
  <td>merged</td>
  <td>
   <span>christian.heimes</span>,
   <span>2018-09-21 20:51</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9488" title="[3.7] bpo-34623: Mention CVE-2018-14647 in news entry (GH-9482)">PR 9488</a></td>
  <td>merged</td>
  <td>
   <span>miss-islington</span>,
   <span>2018-09-22 04:42</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9489" title="[3.6] bpo-34623: Mention CVE-2018-14647 in news entry (GH-9482)">PR 9489</a></td>
  <td>merged</td>
  <td>
   <span>miss-islington</span>,
   <span>2018-09-22 04:42</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9490" title="[2.7] bpo-34623: Mention CVE-2018-14647 in news entry (GH-9482)">PR 9490</a></td>
  <td>merged</td>
  <td>
   <span>miss-islington</span>,
   <span>2018-09-22 04:43</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9933" title="[3.5] bpo-34623: Use XML_SetHashSalt in _elementtree">PR 9933</a></td>
  <td>merged</td>
  <td>
   <span>cstratak</span>,
   <span>2018-10-17 16:25</span>
  </td>
  <td>
    
  </td>
 </tr>
 <tr>
  <td><a href="https://github.com/python/cpython/pull/9953" title="[3.4] bpo-34623: Use XML_SetHashSalt in _elementtree">PR 9953</a></td>
  <td>merged</td>
  <td>
   <span>cstratak</span>,
   <span>2018-10-18 14:59</span>
  </td>
  <td>
    
  </td>
 </tr>
</table>





<table class="messages">
 <tr><th colspan="4" class="header">Messages (20)</th></tr>
 
  <tr>
    <th>
     <a href="#msg324954" id="msg324954">msg324954</a> - <a
    href="msg324954">(view)</a></th>
   <th>Author: Christian Heimes (christian.heimes) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-10 22:47</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>The pyexpat module calls XML_SetHashSalt(self-&gt;itself,                   (unsigned long)_Py_HashSecret.expat.hashsalt) to initialize the salt for hash randomization of the XML_Parser struct. The _elementree C accelerator doesn't call XML_SetHashSalt().

It's not a security issue with recent versions of libexpat. The library initializes the salt from a good entry source by default.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg324961" id="msg324961">msg324961</a> - <a
    href="msg324961">(view)</a></th>
   <th>Author: Benjamin Peterson (benjamin.peterson) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-10 23:48</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>Note we compile expat with -DXML_POOR_ENTROPY on the assumption that Python always initializes the entropy itself.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg324963" id="msg324963">msg324963</a> - <a
    href="msg324963">(view)</a></th>
   <th>Author: STINNER Victor (vstinner) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-11 00:09</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>&gt; Note we compile expat with -DXML_POOR_ENTROPY on the assumption that Python always initializes the entropy itself.

Oh. I forgot this thing. So it seems like we have to backport this change to 2.7, 3.6 and newer versions.

What about Python 3.4 and 3.5? Python 3.5 has a copy of libexpat 2.2.0, but setup.py doesn't build expat with XML_POOR_ENTROPY=1.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg324966" id="msg324966">msg324966</a> - <a
    href="msg324966">(view)</a></th>
   <th>Author: Christian Heimes (christian.heimes) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-11 00:38</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>Dang, it's a security bug after all. :(

3.5 has 2.2.4, so it's fine. 2.2.2 had a bug in salt initialization.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325633" id="msg325633">msg325633</a> - <a
    href="msg325633">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-18 12:39</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/cb5778f00ce48631c7140f33ba242496aaf7102b">cb5778f00ce48631c7140f33ba242496aaf7102b</a> by Miss Islington (bot) (Christian Heimes) in branch 'master':
<a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Use XML_SetHashSalt in _elementtree (<a href="https://github.com/python/cpython/pull/9146" class="open" title="GitHub PR 9146: [open] bpo-45565: Specialize LOAD_ATTR_CLASS">GH-9146</a>)
<a href="https://github.com/python/cpython/commit/cb5778f00ce48631c7140f33ba242496aaf7102b">https://github.com/python/cpython/commit/cb5778f00ce48631c7140f33ba242496aaf7102b</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325634" id="msg325634">msg325634</a> - <a
    href="msg325634">(view)</a></th>
   <th>Author: Christian Heimes (christian.heimes) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-18 12:40</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>Since it's a security fix, the change should land in 3.4 and 3.5, too.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325636" id="msg325636">msg325636</a> - <a
    href="msg325636">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-18 13:11</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/470a435f3b42c9be5fdb7f7b04f3df5663ba7305">470a435f3b42c9be5fdb7f7b04f3df5663ba7305</a> by Miss Islington (bot) in branch '3.7':
<a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Use XML_SetHashSalt in _elementtree (<a href="https://github.com/python/cpython/pull/9146" class="open" title="GitHub PR 9146: [open] bpo-45565: Specialize LOAD_ATTR_CLASS">GH-9146</a>)
<a href="https://github.com/python/cpython/commit/470a435f3b42c9be5fdb7f7b04f3df5663ba7305">https://github.com/python/cpython/commit/470a435f3b42c9be5fdb7f7b04f3df5663ba7305</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325637" id="msg325637">msg325637</a> - <a
    href="msg325637">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-18 13:13</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/18b20bad75b4ff0486940fba4ec680e96e70f3a2">18b20bad75b4ff0486940fba4ec680e96e70f3a2</a> by Miss Islington (bot) (Christian Heimes) in branch '2.7':
[2.7] <a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Use XML_SetHashSalt in _elementtree (<a href="https://github.com/python/cpython/pull/9146" class="open" title="GitHub PR 9146: [open] bpo-45565: Specialize LOAD_ATTR_CLASS">GH-9146</a>) (<a href="https://github.com/python/cpython/pull/9394" class="closed" title="GitHub PR 9394: [merged] [3.8] bpo-40196: Fix a bug in the symtable when reporting inspecting global variables (GH-19391)">GH-9394</a>)
<a href="https://github.com/python/cpython/commit/18b20bad75b4ff0486940fba4ec680e96e70f3a2">https://github.com/python/cpython/commit/18b20bad75b4ff0486940fba4ec680e96e70f3a2</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325638" id="msg325638">msg325638</a> - <a
    href="msg325638">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-18 13:14</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/f7666e828cc3d5873136473ea36ba2013d624fa1">f7666e828cc3d5873136473ea36ba2013d624fa1</a> by Miss Islington (bot) in branch '3.6':
<a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Use XML_SetHashSalt in _elementtree (<a href="https://github.com/python/cpython/pull/9146" class="open" title="GitHub PR 9146: [open] bpo-45565: Specialize LOAD_ATTR_CLASS">GH-9146</a>)
<a href="https://github.com/python/cpython/commit/f7666e828cc3d5873136473ea36ba2013d624fa1">https://github.com/python/cpython/commit/f7666e828cc3d5873136473ea36ba2013d624fa1</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325966" id="msg325966">msg325966</a> - <a
    href="msg325966">(view)</a></th>
   <th>Author: Christian Heimes (christian.heimes) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-21 06:38</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>The bug affects multiple platforms. libexpat's expat.h uses slightly different autoconf macro names than pyconfig.h. Therefore only platforms that have either HAVE_GETRANDOM or _WIN32 defined, use a proper CSPRNG to seed the hash salt.

Since HAVE_SYSCALL_GETRANDOM, HAVE_ARC4RANDOM_BUF, HAVE_ARC4RANDOM, or XML_DEV_URANDOM are never defined by Python's pyconfig.h, older Linux platforms, any BSD, and any other Unix platform with /dev/urandom fall back to a weak Mersenne Twister-like RNG with gettimeofday().tv_usec and getpid() as seed.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg325967" id="msg325967">msg325967</a> - <a
    href="msg325967">(view)</a></th>
   <th>Author: Christian Heimes (christian.heimes) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-21 06:47</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>I have contected Red Hat product security to request a CVE for the issue.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg326019" id="msg326019">msg326019</a> - <a
    href="msg326019">(view)</a></th>
   <th>Author: Christian Heimes (christian.heimes) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2018-09-21 19:16</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>CVE-2018-14647 was assigned to this issue.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg326069" id="msg326069">msg326069</a> - <a
    href="msg326069">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-22 04:42</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/026337a7101369297c8083047d2f3c6fc9dd1e2b">026337a7101369297c8083047d2f3c6fc9dd1e2b</a> by Miss Islington (bot) (Christian Heimes) in branch 'master':
<a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Mention CVE-2018-14647 in news entry (<a href="https://github.com/python/cpython/pull/9482" class="open" title="GitHub PR 9482: [open] bpo-37985: Remove redundant p-&gt;depth-- in marshal extension module">GH-9482</a>)
<a href="https://github.com/python/cpython/commit/026337a7101369297c8083047d2f3c6fc9dd1e2b">https://github.com/python/cpython/commit/026337a7101369297c8083047d2f3c6fc9dd1e2b</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg326071" id="msg326071">msg326071</a> - <a
    href="msg326071">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-22 04:57</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/10be1d3f802b874914b2a13eb41407c7a582d9b3">10be1d3f802b874914b2a13eb41407c7a582d9b3</a> by Miss Islington (bot) in branch '2.7':
[2.7] <a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Mention CVE-2018-14647 in news entry (<a href="https://github.com/python/cpython/pull/9482" class="open" title="GitHub PR 9482: [open] bpo-37985: Remove redundant p-&gt;depth-- in marshal extension module">GH-9482</a>) (<a href="https://github.com/python/cpython/pull/9490" class="closed" title="GitHub PR 9490: [merged] closes bpo-39953: Generate ifdefs around library code definitions.">GH-9490</a>)
<a href="https://github.com/python/cpython/commit/10be1d3f802b874914b2a13eb41407c7a582d9b3">https://github.com/python/cpython/commit/10be1d3f802b874914b2a13eb41407c7a582d9b3</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg326072" id="msg326072">msg326072</a> - <a
    href="msg326072">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-22 04:57</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/d1b336e530472f316b1d164d04626724c83b16d7">d1b336e530472f316b1d164d04626724c83b16d7</a> by Miss Islington (bot) in branch '3.6':
[3.6] <a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Mention CVE-2018-14647 in news entry (<a href="https://github.com/python/cpython/pull/9482" class="open" title="GitHub PR 9482: [open] bpo-37985: Remove redundant p-&gt;depth-- in marshal extension module">GH-9482</a>) (<a href="https://github.com/python/cpython/pull/9489" class="closed" title="GitHub PR 9489: [merged] [3.6] bpo-34623: Mention CVE-2018-14647 in news entry (GH-9482)">GH-9489</a>)
<a href="https://github.com/python/cpython/commit/d1b336e530472f316b1d164d04626724c83b16d7">https://github.com/python/cpython/commit/d1b336e530472f316b1d164d04626724c83b16d7</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg326073" id="msg326073">msg326073</a> - <a
    href="msg326073">(view)</a></th>
   <th>Author: miss-islington (miss-islington)</th>
   <th>Date: 2018-09-22 04:57</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/5c3d8b2efda1b99abe09ad925f366c5695bd66fb">5c3d8b2efda1b99abe09ad925f366c5695bd66fb</a> by Miss Islington (bot) in branch '3.7':
[3.7] <a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Mention CVE-2018-14647 in news entry (<a href="https://github.com/python/cpython/pull/9482" class="open" title="GitHub PR 9482: [open] bpo-37985: Remove redundant p-&gt;depth-- in marshal extension module">GH-9482</a>) (<a href="https://github.com/python/cpython/pull/9488" class="closed" title="GitHub PR 9488: [merged] bpo-40260: Allow compile() to handle the module's source decoding">GH-9488</a>)
<a href="https://github.com/python/cpython/commit/5c3d8b2efda1b99abe09ad925f366c5695bd66fb">https://github.com/python/cpython/commit/5c3d8b2efda1b99abe09ad925f366c5695bd66fb</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg327758" id="msg327758">msg327758</a> - <a
    href="msg327758">(view)</a></th>
   <th>Author: Charalampos Stratakis (cstratak) <span title="Contributor form received">*</span></th>
   <th>Date: 2018-10-15 14:10</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>Will this change be backported to 3.5 and 3.4? It applied cleanly on both however on 3.4 there is a test failure:

======================================================================
ERROR: test_del_attribute (test.test_xml_etree_c.MiscTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/builddir/build/BUILD/Python-3.4.9/Lib/<a href="https://github.com/python/cpython/blob/3.4/Lib/test/test_xml_etree_c.py#L26">test/test_xml_etree_c.py</a>", line 26, in test_del_attribute
    element = cET.Element('tag')
AttributeError: 'NoneType' object has no attribute 'Element'
----------------------------------------------------------------------</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg334369" id="msg334369">msg334369</a> - <a
    href="msg334369">(view)</a></th>
   <th>Author: Matej Cepl (mcepl) <span title="Contributor form received">*</span></th>
   <th>Date: 2019-01-25 21:09</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>&gt; Will this change be backported to 3.5 and 3.4? It applied cleanly on both however on 3.4 there is a test failure:

It actually haven't applied cleanly to me on Python 3.4.6 (SLE-12 package). Apparently self-&gt;parser has to be changed into self_xp-&gt;parser. Then all tests passed for me.

If any Linux maintainer wants to take this patch.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg336551" id="msg336551">msg336551</a> - <a
    href="msg336551">(view)</a></th>
   <th>Author: Larry Hastings (larry) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2019-02-25 21:02</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/d16eaf36795da48b930b80b20d3805bc27820712">d16eaf36795da48b930b80b20d3805bc27820712</a> by larryhastings (stratakis) in branch '3.4':
[3.4] <a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Use XML_SetHashSalt in _elementtree (<a class="closed" title="[closed] 2 scripts running from crontab simultaneously reference the same instance of a variable" href="issue9953">#9953</a>)
<a href="https://github.com/python/cpython/commit/d16eaf36795da48b930b80b20d3805bc27820712">https://github.com/python/cpython/commit/d16eaf36795da48b930b80b20d3805bc27820712</a>
</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg336552" id="msg336552">msg336552</a> - <a
    href="msg336552">(view)</a></th>
   <th>Author: Larry Hastings (larry) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)" /></th>
   <th>Date: 2019-02-25 21:04</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>
New changeset <a href="https://hg.python.org/lookup/41b48e71ac8a71f56694b548f118bd20ce203410">41b48e71ac8a71f56694b548f118bd20ce203410</a> by larryhastings (stratakis) in branch '3.5':
[3.5] <a class="closed" title="[closed] _elementtree.c doesn't call XML_SetHashSalt()" href="issue34623">bpo-34623</a>: Use XML_SetHashSalt in _elementtree (<a class="closed" title="[closed] os module does not have the documented EX_NOTFOUND attribute" href="issue9933">#9933</a>)
<a href="https://github.com/python/cpython/commit/41b48e71ac8a71f56694b548f118bd20ce203410">https://github.com/python/cpython/commit/41b48e71ac8a71f56694b548f118bd20ce203410</a>
</pre>
   </td>
  </tr>
 
</table>

<table class="history table table-condensed table-striped"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2019-05-10&nbsp;18:10:05</td><td>ned.deily</td><td>set</td><td>messages:
  - <a rel="nofollow" href="msg342101">msg342101</a></td></tr>
<tr><td>2019-05-10&nbsp;17:36:39</td><td>ned.deily</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user5248">ned.deily</a><br />messages:
  + <a rel="nofollow" href="msg342101">msg342101</a><br /></td></tr>
<tr><td>2019-03-01&nbsp;07:38:24</td><td>larry</td><td>set</td><td>status: open -> closed<br />resolution: fixed<br />stage: patch review -> resolved</td></tr>
<tr><td>2019-02-25&nbsp;21:04:12</td><td>larry</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg336552">msg336552</a></td></tr>
<tr><td>2019-02-25&nbsp;21:02:19</td><td>larry</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg336551">msg336551</a></td></tr>
<tr><td>2019-01-25&nbsp;21:09:57</td><td>mcepl</td><td>set</td><td>files:
  + <a rel="nofollow" href="file48077">CVE-2018-14647_XML_SetHashSalt-in_elementtree.patch</a><br />nosy:
  + <a rel="nofollow" href="user5290">mcepl</a><br />messages:
  + <a rel="nofollow" href="msg334369">msg334369</a><br /><br /></td></tr>
<tr><td>2018-10-18&nbsp;15:22:20</td><td>serhiy.storchaka</td><td>set</td><td>priority: normal -> release blocker<br />assignee: <a rel="nofollow" href="user2731">larry</a><br /><br />nosy:
  + <a rel="nofollow" href="user2731">larry</a><br />versions:
  - Python 2.7, Python 3.6, Python 3.7, Python 3.8</td></tr>
<tr><td>2018-10-18&nbsp;14:59:05</td><td>cstratak</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request9301">pull_request9301</a></td></tr>
<tr><td>2018-10-17&nbsp;16:25:33</td><td>cstratak</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request9284">pull_request9284</a></td></tr>
<tr><td>2018-10-15&nbsp;14:10:45</td><td>cstratak</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user23615">cstratak</a><br />messages:
  + <a rel="nofollow" href="msg327758">msg327758</a><br /></td></tr>
<tr><td>2018-09-22&nbsp;04:57:49</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg326073">msg326073</a></td></tr>
<tr><td>2018-09-22&nbsp;04:57:31</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg326072">msg326072</a></td></tr>
<tr><td>2018-09-22&nbsp;04:57:05</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg326071">msg326071</a></td></tr>
<tr><td>2018-09-22&nbsp;04:43:05</td><td>miss-islington</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8900">pull_request8900</a></td></tr>
<tr><td>2018-09-22&nbsp;04:42:54</td><td>miss-islington</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8899">pull_request8899</a></td></tr>
<tr><td>2018-09-22&nbsp;04:42:46</td><td>miss-islington</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8898">pull_request8898</a></td></tr>
<tr><td>2018-09-22&nbsp;04:42:33</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg326069">msg326069</a></td></tr>
<tr><td>2018-09-21&nbsp;20:51:57</td><td>christian.heimes</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8892">pull_request8892</a></td></tr>
<tr><td>2018-09-21&nbsp;19:16:50</td><td>christian.heimes</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg326019">msg326019</a></td></tr>
<tr><td>2018-09-21&nbsp;06:47:30</td><td>christian.heimes</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg325967">msg325967</a></td></tr>
<tr><td>2018-09-21&nbsp;06:38:05</td><td>christian.heimes</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg325966">msg325966</a></td></tr>
<tr><td>2018-09-18&nbsp;13:14:18</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg325638">msg325638</a></td></tr>
<tr><td>2018-09-18&nbsp;13:13:12</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg325637">msg325637</a></td></tr>
<tr><td>2018-09-18&nbsp;13:11:13</td><td>miss-islington</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg325636">msg325636</a></td></tr>
<tr><td>2018-09-18&nbsp;12:45:06</td><td>christian.heimes</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8818">pull_request8818</a></td></tr>
<tr><td>2018-09-18&nbsp;12:40:28</td><td>christian.heimes</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg325634">msg325634</a><br />versions:
  + Python 2.7, Python 3.4, Python 3.5</td></tr>
<tr><td>2018-09-18&nbsp;12:39:20</td><td>miss-islington</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8817">pull_request8817</a></td></tr>
<tr><td>2018-09-18&nbsp;12:39:12</td><td>miss-islington</td><td>set</td><td>pull_requests:
  + <a rel="nofollow" href="pull_request8816">pull_request8816</a></td></tr>
<tr><td>2018-09-18&nbsp;12:39:03</td><td>miss-islington</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user27838">miss-islington</a><br />messages:
  + <a rel="nofollow" href="msg325633">msg325633</a><br /></td></tr>
<tr><td>2018-09-11&nbsp;00:38:52</td><td>christian.heimes</td><td>set</td><td>type: behavior -> security<br />messages:
  + <a rel="nofollow" href="msg324966">msg324966</a><br />versions:
  + Python 3.6, Python 3.7</td></tr>
<tr><td>2018-09-11&nbsp;00:09:37</td><td>vstinner</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user2377">vstinner</a><br />messages:
  + <a rel="nofollow" href="msg324963">msg324963</a><br /></td></tr>
<tr><td>2018-09-10&nbsp;23:48:17</td><td>benjamin.peterson</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user4455">benjamin.peterson</a><br />messages:
  + <a rel="nofollow" href="msg324961">msg324961</a><br /></td></tr>
<tr><td>2018-09-10&nbsp;23:07:57</td><td>christian.heimes</td><td>set</td><td>keywords:
  + <a rel="nofollow" href="keyword2">patch</a><br />stage: patch review<br />pull_requests:
  + <a rel="nofollow" href="pull_request8594">pull_request8594</a></td></tr>
<tr><td>2018-09-10&nbsp;22:47:44</td><td>christian.heimes</td><td>create</td><td></td></tr>
</table>

</div>


</div> <!-- content-body -->
<div id="footer">
<div id="credits">
  Hosted on <a href="https://m.do.co/c/783434964889" title="Hosted on DigitalOcean">DigitalOcean</a>,
  <br>
  Supported by <a href="https://python.org/psf-landing/" title="The Python Software Foundation">The Python Software Foundation</a>,
  <br>
  Powered by <a href="http://roundup.sourceforge.net" title="Powered by the Roundup Issue Tracker">Roundup</a>
</div> <!-- credits -->
Copyright &copy; 1990-2020, <a href="http://python.org/psf">Python Software Foundation</a><br />
<a href="http://python.org/about/legal">Legal Statements</a>
</div> <!-- footer -->
</div> <!-- body-main -->
</div> <!-- content -->



</body>
</html>

