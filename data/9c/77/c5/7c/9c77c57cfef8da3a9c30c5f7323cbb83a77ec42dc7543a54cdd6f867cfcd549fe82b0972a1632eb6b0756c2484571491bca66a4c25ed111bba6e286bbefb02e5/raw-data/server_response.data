<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#603450 - offlineimap: fails check the remote servers ssl certificate is valid - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=603450&quot;&gt;603450&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:603450@bugs.debian.org">#603450</a><br>
offlineimap: fails check the remote servers ssl certificate is valid</h1>
<div class="versiongraph"></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=offlineimap">offlineimap</a>;
Maintainer for <a href="pkgreport.cgi?package=offlineimap">offlineimap</a> is <a href="pkgreport.cgi?maint=team%2Bpython%40tracker.debian.org">Debian Python Team &lt;team+python@tracker.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=offlineimap">offlineimap</a> is <a href="pkgreport.cgi?src=offlineimap3">src:offlineimap3</a> (<a href="https://tracker.debian.org/pkg/offlineimap3">PTS</a>, <a href="https://buildd.debian.org/offlineimap3">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=offlineimap3">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=db.pub.mail%40gmail.com">david b &lt;db.pub.mail@gmail.com&gt;</a></p>
  <p>Date: Sun, 14 Nov 2010 08:57:02 UTC</p>

<p>Severity: important</p>
<p>Tags: security</p>


<p><strong>Done:</strong> Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</p>

<p>Bug is archived. No further changes may be made.<p></div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=603450;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1289725024 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Sun, 14 Nov 2010 08:57:04 GMT) (<a href="bugreport.cgi?bug=603450;msg=2">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: david b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1289725025 -->
<strong>Acknowledgement sent</strong>
to <code>david b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Sun, 14 Nov 2010 08:57:05 GMT) (<a href="bugreport.cgi?bug=603450;msg=4">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=5">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=5">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Sun%2C%2014%20Nov%202010%2019%3A55%3A23%20%2B1100%20david%20b%20%3Cdb.pub.mail%40gmail.com%3E%20wrote%3A%0A%3E%20Package%3A%20offlineimap%0A%3E%20Severity%3A%20grave%0A%3E%20Tags%3A%20security%0A%3E%20Justification%3A%20user%20security%20hole%0A%3E%20%0A%3E%20offlineimap%20performs%20absolutely%20no%20ssl%20certificate%20checking.%20So%20users%20could%2Fcan%20be%20the%20victim%20of%20a%20man%20in%20the%20middle%20attack.%0A%3E%20In%20debian%20the%20following%20bugs%20exist%3A%0A%3E%20%0A%3E%20http%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D536421%20%28re%20certificate%20expiration%29%0A%3E%20http%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D153240%20%28re%20ssl%20fingerprint%20checking%29%0A%3E%20%0A%3E%20This%20could%20be%20considered%20a%20bug%20in%20imaplib%20%28http%3A%2F%2Fbugs.python.org%2Fissue10274%29.%0A%3E%20A%20partial%20%27fix%27%20is%20the%20following%28this%20%27fix%27%20isn%27t%20complete%20and%20would%20break%20connections%20to%20servers%20using%20self-signed%20certificates%29%3A%0A%3E%20%0A%3E%20%0A%3E%20WARNING%20XXX%3A%20I%20haven%27t%20tested%20this%20%27fix%27%20at%20all%20and%20so%20it%20is%20most%20likely%20wrong.%0A%3E%20%0A%3E%20diff%20--git%20a%2Fofflineimap%2Fimaplibutil.py%20b%2Fofflineimap%2Fimaplibutil.py%0A%3E%20index%20a60242b..c37688c%20100644%0A%3E%20---%20a%2Fofflineimap%2Fimaplibutil.py%0A%3E%20%2B%2B%2B%20b%2Fofflineimap%2Fimaplibutil.py%0A%3E%20%40%40%20-62%2C7%20%2B62%2C7%20%40%40%20class%20IMAP4_Tunnel%28IMAP4%29%3A%0A%3E%20%20%20%20%20%20%20%20%20%20self.infd.close%28%29%0A%3E%20%20%20%20%20%20%20%20%20%20self.outfd.close%28%29%0A%3E%20%20%20%20%20%20%20%20%20%20self.process.wait%28%29%0A%3E%20-%20%20%20%20%20%20%20%20%0A%3E%20%2B%0A%3E%20%20class%20sslwrapper%3A%0A%3E%20%20%20%20%20%20def%20__init__%28self%2C%20sslsock%29%3A%0A%3E%20%20%20%20%20%20%20%20%20%20self.sslsock%20%3D%20sslsock%0A%3E%20%40%40%20-171%2C7%20%2B171%2C7%20%40%40%20def%20new_open_ssl%28self%2C%20host%20%3D%20%27%27%2C%20port%20%3D%20IMAP4_SSL_PORT%29%3A%0A%3E%20%20%20%20%20%20%20%20%20%20if%20last_error%20%21%3D%200%3A%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20FIXME%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20raise%20socket.error%28last_error%29%0A%3E%20-%20%20%20%20%20%20%20%20self.sslobj%20%3D%20ssl_wrap%28self.sock%2C%20self.keyfile%2C%20self.certfile%29%0A%3E%20%2B%20%20%20%20%20%20%20%20self.sslobj%20%3D%20ssl_wrap%28self.sock%2C%20self.keyfile%2C%20self.certfile%2C%20cert_reqs%3Dssl.CERT_REQUIRED%2C%20ca_certs%3D%22%2Fetc%2Fssl%2Fcerts%2Fca-certificates.crt%22%29%0A%3E%20%20%20%20%20%20%20%20%20%20self.sslobj%20%3D%20sslwrapper%28self.sslobj%29%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20Although%2C%20this%20isn%27t%20complete%20because%20it%20will%20break%20self-signed%20certificate%20using%20servers%20and%20http%3A%2F%2Fbugs.python.org%2Fissue1589%20means%20that%20it%20won%27t%20provide%20full%20protection%20etc.%0A%3E%20Really%2C%20what%20is%20required%20is%20that%20by%20default%20the%20certificate%20is%20checked%20and%20perhaps%20an%20option%20is%20added%20to%20bypass%20the%20check.%0A%3E%20%0A%3E%20This%20isn%27t%20a%20new%20discovery%2C%20see%20%5B1%5D%2C%20but%20the%20package%20provides%20no%20warning%20about%20this%20fact.%20I%20added%20a%20warning%20too%20https%3A%2F%2Fgithub.com%2Fjgoerzen%2Fofflineimap%2Fwiki%2F%20perhaps%20debian%20can%20add%20a%20warning%20%28in%20the%20package%20description%29%20until%20this%20is%20fixed.%0A%3E%20%0A%3E%20%5B0%5D%20-%20http%3A%2F%2Fthread.gmane.org%2Fgmane.mail.imap.offlineimap.general%2F760%0A%3E%20%0A%3E%20--%20System%20Information%3A%0A%3E%20Debian%20Release%3A%205.0.6%0A%3E%20%20%20APT%20prefers%20stable%0A%3E%20%20%20APT%20policy%3A%20%28900%2C%20%27stable%27%29%2C%20%28650%2C%20%27testing%27%29%0A%3E%20Architecture%3A%20amd64%20%28x86_64%29%0A%3E%20%0A%3E%20Kernel%3A%20Linux%202.6.36%20%28SMP%20w%2F4%20CPU%20cores%29%0A%3E%20Locale%3A%20LANG%3Den_AU.UTF-8%2C%20LC_CTYPE%3Den_AU.UTF-8%20%28charmap%3DUTF-8%29%0A%3E%20Shell%3A%20%2Fbin%2Fsh%20linked%20to%20%2Fbin%2Fbash%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E&amp;subject=Re%3A%20offlineimap%3A%20fails%20check%20the%20remote%20servers%20ssl%20certificate%20is%20valid">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=db.pub.mail%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> david b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> offlineimap: fails check the remote servers ssl certificate is valid</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 14 Nov 2010 19:55:23 +1100</div>
</div>
<pre class="message">Package: offlineimap
Severity: grave
Tags: security
Justification: user security hole

offlineimap performs absolutely no ssl certificate checking. So users could/can be the victim of a man in the middle attack.
In debian the following bugs exist:

<a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=536421">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=536421</a> (re certificate expiration)
<a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=153240">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=153240</a> (re ssl fingerprint checking)

This could be considered a bug in imaplib (<a href="http://bugs.python.org/issue10274">http://bugs.python.org/issue10274</a>).
A partial &#39;fix&#39; is the following(this &#39;fix&#39; isn&#39;t complete and would break connections to servers using self-signed certificates):


WARNING XXX: I haven&#39;t tested this &#39;fix&#39; at all and so it is most likely wrong.

diff --git a/offlineimap/imaplibutil.py b/offlineimap/imaplibutil.py
index a60242b..c37688c 100644
--- a/offlineimap/imaplibutil.py
+++ b/offlineimap/imaplibutil.py
@@ -62,7 +62,7 @@ class IMAP4_Tunnel(IMAP4):
         self.infd.close()
         self.outfd.close()
         self.process.wait()
-        
+
 class sslwrapper:
     def __init__(self, sslsock):
         self.sslsock = sslsock
@@ -171,7 +171,7 @@ def new_open_ssl(self, host = &#39;&#39;, port = IMAP4_SSL_PORT):
         if last_error != 0:
             # FIXME
             raise socket.error(last_error)
-        self.sslobj = ssl_wrap(self.sock, self.keyfile, self.certfile)
+        self.sslobj = ssl_wrap(self.sock, self.keyfile, self.certfile, cert_reqs=ssl.CERT_REQUIRED, ca_certs=&quot;/etc/ssl/certs/ca-certificates.crt&quot;)
         self.sslobj = sslwrapper(self.sslobj)



Although, this isn&#39;t complete because it will break self-signed certificate using servers and <a href="http://bugs.python.org/issue1589">http://bugs.python.org/issue1589</a> means that it won&#39;t provide full protection etc.
Really, what is required is that by default the certificate is checked and perhaps an option is added to bypass the check.

This isn&#39;t a new discovery, see [1], but the package provides no warning about this fact. I added a warning too <a href="https://github.com/jgoerzen/offlineimap/wiki/">https://github.com/jgoerzen/offlineimap/wiki/</a> perhaps debian can add a warning (in the package description) until this is fixed.

[0] - <a href="http://thread.gmane.org/gmane.mail.imap.offlineimap.general/760">http://thread.gmane.org/gmane.mail.imap.offlineimap.general/760</a>

-- System Information:
Debian Release: 5.0.6
  APT prefers stable
  APT policy: (900, &#39;stable&#39;), (650, &#39;testing&#39;)
Architecture: amd64 (x86_64)

Kernel: Linux 2.6.36 (SMP w/4 CPU cores)
Locale: LANG=en_AU.UTF-8, LC_CTYPE=en_AU.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/bash



</pre>

<div class="infmessage"><hr><p>
<a name="6"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1289725563 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Sun, 14 Nov 2010 09:06:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=7">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: dave b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1289725563 -->
<strong>Acknowledgement sent</strong>
to <code>dave b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Sun, 14 Nov 2010 09:06:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=9">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=10">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=10">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20Bug%23603450%3A%20Acknowledgement%20%28offlineimap%3A%20fails%20check%20the%20remote%0A%20servers%20ssl%20certificate%20is%20valid%29&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E%20%3Chandler.603450.B.128972493229407.ack%40bugs.debian.org%3E%0A%20%3CAANLkTikjvu_vqbDGiYxs_cgJpVTpxy4PvfQF6y_txob2%40mail.gmail.com%3E&amp;body=On%20Sun%2C%2014%20Nov%202010%2020%3A03%3A12%20%2B1100%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20wrote%3A%0A%3E%20%25s%2F%5B0%5D%2F%5B1%5D%2F%0A%3E%20%25s%2Ftoo%2Fto%2F%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3CAANLkTikjvu_vqbDGiYxs_cgJpVTpxy4PvfQF6y_txob2%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=db.pub.mail%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> dave b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Acknowledgement (offlineimap: fails check the remote
 servers ssl certificate is valid)</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 14 Nov 2010 20:03:12 +1100</div>
</div>
<pre class="message">%s/[0]/[1]/
%s/too/to/



</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1289726283 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Sun, 14 Nov 2010 09:18:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=12">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: dave b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1289726283 -->
<strong>Acknowledgement sent</strong>
to <code>dave b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Sun, 14 Nov 2010 09:18:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=14">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=15">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=15">mbox</a>, <a href="mailto:603450@bugs.debian.org?In-Reply-To=%3CAANLkTimYXogDxj%3D0XQzkOyrDP9gmDsNf%3D%3DjNX-qvfWyW%40mail.gmail.com%3E&amp;body=On%20Sun%2C%2014%20Nov%202010%2020%3A15%3A18%20%2B1100%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20wrote%3A%0A%3E%20I%20wish%20debian%20let%20me%20edit%20bugs%20like%20ubuntu%20does%21%0A%3E%20%0A%3E%20%28offlineimap%3A%20fails%20check%20the%20remote%0A%3E%20%20servers%20ssl%20certificate%20is%20valid%29%0A%3E%20%0A%3E%20should%20be%0A%3E%20%28offlineimap%3A%20fails%20%2Ato%2A%20check%20the%20remote%0A%3E%20%20server%27s%20ssl%20certificate%20is%20valid%29%0A%3E%20%0A%3E%20%0A%3E%20s%2Fservers%2Fserver%27s%2F%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23603450%3A%20Acknowledgement%20%28offlineimap%3A%20fails%20check%20the%20remote%0A%20servers%20ssl%20certificate%20is%20valid%29&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E%0A%20%3Chandler.603450.B.128972493229407.ack%40bugs.debian.org%3E%20%3CAANLkTikjvu_vqbDGiYxs_cgJpVTpxy4PvfQF6y_txob2%40mail.gmail.com%3E%0A%20%3CAANLkTimYXogDxj%3D0XQzkOyrDP9gmDsNf%3D%3DjNX-qvfWyW%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=db.pub.mail%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> dave b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Acknowledgement (offlineimap: fails check the remote
 servers ssl certificate is valid)</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 14 Nov 2010 20:15:18 +1100</div>
</div>
<pre class="message">I wish debian let me edit bugs like ubuntu does!

(offlineimap: fails check the remote
 servers ssl certificate is valid)

should be
(offlineimap: fails *to* check the remote
 server&#39;s ssl certificate is valid)


s/servers/server&#39;s/



</pre>

<div class="infmessage"><hr><p>
<a name="16"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1289755626 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Sun, 14 Nov 2010 17:27:06 GMT) (<a href="bugreport.cgi?bug=603450;msg=17">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: Steve McIntyre &lt;steve@einval.com&gt; -->
<!-- time:1289755626 -->
<strong>Acknowledgement sent</strong>
to <code>Steve McIntyre &lt;steve@einval.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Sun, 14 Nov 2010 17:27:06 GMT) (<a href="bugreport.cgi?bug=603450;msg=19">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="20"></a><a name="msg20"></a><a href="#20">Message #20</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=20">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=20">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Sun%2C%2014%20Nov%202010%2017%3A25%3A29%20%2B0000%20Steve%20McIntyre%20%3Csteve%40einval.com%3E%20wrote%3A%0A%3E%20retitle%20603540%20offlineimap%3A%20fails%20to%20check%20the%20remote%20server%27s%20ssl%20certificate%20is%20valid%0A%3E%20thanks%0A%3E%20%0A%3E%20On%20Sun%2C%20Nov%2014%2C%202010%20at%2008%3A15%3A18PM%20%2B1100%2C%20dave%20b%20wrote%3A%0A%3E%20%3EI%20wish%20debian%20let%20me%20edit%20bugs%20like%20ubuntu%20does%21%0A%3E%20%0A%3E%20Done.%20See%20http%3A%2F%2Fwww.debian.org%2FBugs%2Fserver-control%20for%20more%20details%0A%3E%20on%20the%20commands%20available.%0A%3E%20%0A%3E%20%3E%28offlineimap%3A%20fails%20check%20the%20remote%0A%3E%20%3E%20servers%20ssl%20certificate%20is%20valid%29%0A%3E%20%3E%0A%3E%20%3Eshould%20be%0A%3E%20%3E%28offlineimap%3A%20fails%20%2Ato%2A%20check%20the%20remote%0A%3E%20%3E%20server%27s%20ssl%20certificate%20is%20valid%29%0A%3E%20%3E%0A%3E%20%3Es%2Fservers%2Fserver%27s%2F%0A%3E%20%0A%3E%20--%20%0A%3E%20Steve%20McIntyre%2C%20Cambridge%2C%20UK.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20steve%40einval.com%0A%3E%20%22The%20problem%20with%20defending%20the%20purity%20of%20the%20English%20language%20is%20that%0A%3E%20%20English%20is%20about%20as%20pure%20as%20a%20cribhouse%20whore.%20We%20don%27t%20just%20borrow%20words%3B%20on%0A%3E%20%20occasion%2C%20English%20has%20pursued%20other%20languages%20down%20alleyways%20to%20beat%20them%0A%3E%20%20unconscious%20and%20rifle%20their%20pockets%20for%20new%20vocabulary.%22%20%20--%20James%20D.%20Nicoll%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20101114172529.GF13710%40einval.com%3E&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E%0A%20%3Chandler.603450.B.128972493229407.ack%40bugs.debian.org%3E%0A%20%3CAANLkTikjvu_vqbDGiYxs_cgJpVTpxy4PvfQF6y_txob2%40mail.gmail.com%3E%0A%20%3CAANLkTimYXogDxj%3D0XQzkOyrDP9gmDsNf%3D%3DjNX-qvfWyW%40mail.gmail.com%3E%0A%20%3C20101114172529.GF13710%40einval.com%3E&amp;subject=Re%3A%20Bug%23603450%3A%20Acknowledgement%20%28offlineimap%3A%20fails%20check%20the%0A%20remote%20servers%20ssl%20certificate%20is%20valid%29">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=steve%40einval.com" alt="">
<div class="header"><span class="headerfield">From:</span> Steve McIntyre &lt;steve@einval.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> dave b &lt;db.pub.mail@gmail.com&gt;, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> control@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Acknowledgement (offlineimap: fails check the
 remote servers ssl certificate is valid)</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 14 Nov 2010 17:25:29 +0000</div>
</div>
<pre class="message">retitle 603540 offlineimap: fails to check the remote server&#39;s ssl certificate is valid
thanks

On Sun, Nov 14, 2010 at 08:15:18PM +1100, dave b wrote:
&gt;I wish debian let me edit bugs like ubuntu does!

Done. See <a href="http://www.debian.org/Bugs/server-control">http://www.debian.org/Bugs/server-control</a> for more details
on the commands available.

&gt;(offlineimap: fails check the remote
&gt; servers ssl certificate is valid)
&gt;
&gt;should be
&gt;(offlineimap: fails *to* check the remote
&gt; server&#39;s ssl certificate is valid)
&gt;
&gt;s/servers/server&#39;s/

-- 
Steve McIntyre, Cambridge, UK.                                steve@einval.com
&quot;The problem with defending the purity of the English language is that
 English is about as pure as a cribhouse whore. We don&#39;t just borrow words; on
 occasion, English has pursued other languages down alleyways to beat them
 unconscious and rifle their pockets for new vocabulary.&quot;  -- James D. Nicoll




</pre>

<div class="infmessage"><hr><p>
<a name="21"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291159623 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Tue, 30 Nov 2010 23:27:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=22">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=22">mbox</a>, <a href="#21">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="23"></a>
<!-- request_addr: Moritz Muehlenhoff &lt;jmm@inutil.org&gt; -->
<!-- time:1291159623 -->
<strong>Acknowledgement sent</strong>
to <code>Moritz Muehlenhoff &lt;jmm@inutil.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Tue, 30 Nov 2010 23:27:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=24">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="25"></a><a name="msg25"></a><a href="#25">Message #25</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=25">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=25">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20offlineimap%3A%20fails%20check%20the%20remote%20servers%20ssl%20certificate%20is%0A%20valid&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E%0A%20%3C20101130232412.GA7018%40galadriel.inutil.org%3E&amp;In-Reply-To=%3C20101130232412.GA7018%40galadriel.inutil.org%3E&amp;body=On%20Wed%2C%201%20Dec%202010%2000%3A24%3A12%20%2B0100%20Moritz%20Muehlenhoff%20%3Cjmm%40inutil.org%3E%20wrote%3A%0A%3E%20On%20Sun%2C%20Nov%2014%2C%202010%20at%2007%3A55%3A23PM%20%2B1100%2C%20david%20b%20wrote%3A%0A%3E%20%3E%20Package%3A%20offlineimap%0A%3E%20%3E%20Severity%3A%20grave%0A%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20Justification%3A%20user%20security%20hole%0A%3E%20%3E%20%0A%3E%20%3E%20offlineimap%20performs%20absolutely%20no%20ssl%20certificate%20checking.%20So%20users%20could%2Fcan%20be%20the%20victim%20of%20a%20man%20in%20the%20middle%20attack.%0A%3E%20%3E%20In%20debian%20the%20following%20bugs%20exist%3A%0A%3E%20%3E%20%0A%3E%20%3E%20http%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D536421%20%28re%20certificate%20expiration%29%0A%3E%20%3E%20http%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D153240%20%28re%20ssl%20fingerprint%20checking%29%0A%3E%20%3E%20%0A%3E%20%3E%20This%20could%20be%20considered%20a%20bug%20in%20imaplib%20%28http%3A%2F%2Fbugs.python.org%2Fissue10274%29.%0A%3E%20%3E%20A%20partial%20%27fix%27%20is%20the%20following%28this%20%27fix%27%20isn%27t%20complete%20and%20would%20break%20connections%20to%20servers%20using%20self-signed%20certificates%29%3A%0A%3E%20%0A%3E%20FWIW%2C%20this%20is%20a%20limitation%20documented%20on%20the%20homepage%20since%202007%3A%0A%3E%20https%3A%2F%2Fgithub.com%2Fjgoerzen%2Fofflineimap%2Fwiki%20%20%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20%20%20%20%20%20%20%20%20Moritz%0A%3E%20%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jmm%40inutil.org" alt="">
<div class="header"><span class="headerfield">From:</span> Moritz Muehlenhoff &lt;jmm@inutil.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> david b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: offlineimap: fails check the remote servers ssl certificate is
 valid</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 1 Dec 2010 00:24:12 +0100</div>
</div>
<pre class="message">On Sun, Nov 14, 2010 at 07:55:23PM +1100, david b wrote:
&gt; Package: offlineimap
&gt; Severity: grave
&gt; Tags: security
&gt; Justification: user security hole
&gt; 
&gt; offlineimap performs absolutely no ssl certificate checking. So users could/can be the victim of a man in the middle attack.
&gt; In debian the following bugs exist:
&gt; 
&gt; <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=536421">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=536421</a> (re certificate expiration)
&gt; <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=153240">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=153240</a> (re ssl fingerprint checking)
&gt; 
&gt; This could be considered a bug in imaplib (<a href="http://bugs.python.org/issue10274">http://bugs.python.org/issue10274</a>).
&gt; A partial &#39;fix&#39; is the following(this &#39;fix&#39; isn&#39;t complete and would break connections to servers using self-signed certificates):

FWIW, this is a limitation documented on the homepage since 2007:
<a href="https://github.com/jgoerzen/offlineimap/wiki">https://github.com/jgoerzen/offlineimap/wiki</a>  

Cheers,
        Moritz



</pre>

<div class="infmessage"><hr><p>
<a name="26"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291169343 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 01 Dec 2010 02:09:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=27">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=27">mbox</a>, <a href="#26">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="28"></a>
<!-- request_addr: dave b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1291169343 -->
<strong>Acknowledgement sent</strong>
to <code>dave b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 01 Dec 2010 02:09:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=29">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=29">mbox</a>, <a href="#28">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="30"></a><a name="msg30"></a><a href="#30">Message #30</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=30">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=30">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Wed%2C%201%20Dec%202010%2013%3A05%3A29%20%2B1100%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20wrote%3A%0A%3E%20%3E%20FWIW%2C%20this%20is%20a%20limitation%20documented%20on%20the%20homepage%20since%202007%3A%0A%3E%20%3E%20https%3A%2F%2Fgithub.com%2Fjgoerzen%2Fofflineimap%2Fwiki%0A%3E%20%0A%3E%20Erh%20No%20...%20I%20added%20that.%20I%20didn%27t%20see%20on%20the%20homepage%20erh...%3F%0A%3E%20Also%20my%20bug%20report%20here%20links%20to%20the%202007%20thread%20post%20already...%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3CAANLkTi%3DaqN91yQbnQUYq%3DGd55vjDRkiak5f1Em9zPzKZ%40mail.gmail.com%3E&amp;subject=Re%3A%20offlineimap%3A%20fails%20check%20the%20remote%20servers%20ssl%20certificate%20is%20valid&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E%20%3C20101130232412.GA7018%40galadriel.inutil.org%3E%0A%20%3CAANLkTi%3DaqN91yQbnQUYq%3DGd55vjDRkiak5f1Em9zPzKZ%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=db.pub.mail%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> dave b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Moritz Muehlenhoff &lt;jmm@inutil.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: offlineimap: fails check the remote servers ssl certificate is valid</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 1 Dec 2010 13:05:29 +1100</div>
</div>
<pre class="message">&gt; FWIW, this is a limitation documented on the homepage since 2007:
&gt; <a href="https://github.com/jgoerzen/offlineimap/wiki">https://github.com/jgoerzen/offlineimap/wiki</a>

Erh No ... I added that. I didn&#39;t see on the homepage erh...?
Also my bug report here links to the 2007 thread post already...



</pre>

<div class="infmessage"><hr><p>
<a name="31"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291266183 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Thu, 02 Dec 2010 05:03:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=32">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=32">mbox</a>, <a href="#31">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="33"></a>
<!-- request_addr: dave b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1291266183 -->
<strong>Acknowledgement sent</strong>
to <code>dave b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Thu, 02 Dec 2010 05:03:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=34">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=34">mbox</a>, <a href="#33">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="35"></a><a name="msg35"></a><a href="#35">Message #35</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=35">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=35">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Thu%2C%202%20Dec%202010%2015%3A58%3A42%20%2B1100%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20wrote%3A%0A%3E%20----------%20Forwarded%20message%20----------%0A%3E%20From%3A%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%0A%3E%20Date%3A%201%20December%202010%2013%3A59%0A%3E%20Subject%3A%20Re%3A%20Due%20offlineimap%20absence%20of%20certificate%20validation%20issue%0A%3E%20--%20Debian%20BTS%23603450%0A%3E%20To%3A%20John%20Goerzen%20%3Cjgoerzen%40complete.org%3E%0A%3E%20Cc%3A%20Jan%20Lieskovsky%20%3Cjlieskov%40redhat.com%3E%2C%20Christoph%20H%C3%B6ger%0A%3E%20%3Cchoeger%40cs.tu-berlin.de%3E%0A%3E%20%0A%3E%20%0A%3E%20Here%20have%20a%20patch%21%0A%3E%20This%20obviously%20will%20break%20connecting%20to%20hosts%20which%20use%20a%20self-signed%0A%3E%20certificate.%0A%3E%20Perhaps%20some%20one%20else%20can%20fix%20this%20when%20they%20want%20it%20fixed%20%3B%29%20%3F%0A%3E%20I%20tested%20using%20the%20following%20config%3A%0A%3E%20%0A%3E%20%23%20Sample%20minimal%20config%20file.%20%C2%A0Copy%20this%20to%20~%2F.offlineimaprc%20and%20edit%20to%0A%3E%20%23%20suit%20to%20get%20started%20fast.%0A%3E%20%0A%3E%20%5Bgeneral%5D%0A%3E%20accounts%20%3D%20Test%0A%3E%20%0A%3E%20%5BAccount%20Test%5D%0A%3E%20localrepository%20%3D%20Local%0A%3E%20remoterepository%20%3D%20Remote%0A%3E%20%0A%3E%20%5BRepository%20Local%5D%0A%3E%20type%20%3D%20Maildir%0A%3E%20localfolders%20%3D%20~%2FTest%0A%3E%20%0A%3E%20%5BRepository%20Remote%5D%0A%3E%20type%20%3D%20IMAP%0A%3E%20ssl%20%3D%20yes%0A%3E%20remotehost%20%3D%20imap.gmail.com%20%23%20this%20should%20work%0A%3E%20%23remotehost%20%3D%2074.125.39.109%20%23%20this%20should%20fail%0A%3E%20%23remotehost%20%3D%20%24putselfsignedserveraddresshere%20%23this%20should%20fail%0A%3E%20remoteuser%20%3D%20jgoerzen%0A%3E%20%0A%3E%20For%20these%20hosts%20%28listed%20here%29%20the%20expected%20outcome%20matched%20the%20actual%0A%3E%20outcome%20when%20I%20tried%20offlineimap.%0A&amp;In-Reply-To=%3CAANLkTi%3DyctTbWwqRQgjFpm0T5MKZg_3BpbuLrPDRdAuj%40mail.gmail.com%3E&amp;subject=Re%3A%20Fwd%3A%20Due%20offlineimap%20absence%20of%20certificate%20validation%20issue%20--%0A%20Debian%20BTS%23603450&amp;References=%3C4CEFA841.5050401%40redhat.com%3E%20%3CAANLkTinLMQnsAM4WBCZviiE6ZuoFFLkUhNcpzCnm4nTQ%40mail.gmail.com%3E%0A%20%3C4CF559AA.9090801%40complete.org%3E%20%3CAANLkTinFoSafWFqzczAt6B-hVZSict5r%3DY2FviCMqWMW%40mail.gmail.com%3E%0A%20%3CAANLkTi%3DyctTbWwqRQgjFpm0T5MKZg_3BpbuLrPDRdAuj%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=db.pub.mail%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> dave b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Fwd: Due offlineimap absence of certificate validation issue --
 Debian BTS#603450</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 2 Dec 2010 15:58:42 +1100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=603450;msg=35">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">---------- Forwarded message ----------
From: dave b &lt;db.pub.mail@gmail.com&gt;
Date: 1 December 2010 13:59
Subject: Re: Due offlineimap absence of certificate validation issue
-- Debian BTS#603450
To: John Goerzen &lt;jgoerzen@complete.org&gt;
Cc: Jan Lieskovsky &lt;jlieskov@redhat.com&gt;, Christoph Höger
&lt;choeger@cs.tu-berlin.de&gt;


Here have a patch!
This obviously will break connecting to hosts which use a self-signed
certificate.
Perhaps some one else can fix this when they want it fixed ;) ?
I tested using the following config:

# Sample minimal config file.  Copy this to ~/.offlineimaprc and edit to
# suit to get started fast.

[general]
accounts = Test

[Account Test]
localrepository = Local
remoterepository = Remote

[Repository Local]
type = Maildir
localfolders = ~/Test

[Repository Remote]
type = IMAP
ssl = yes
remotehost = imap.gmail.com # this should work
#remotehost = 74.125.39.109 # this should fail
#remotehost = $putselfsignedserveraddresshere #this should fail
remoteuser = jgoerzen

For these hosts (listed here) the expected outcome matched the actual
outcome when I tried offlineimap.
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=603450;filename=patch-offlineimap-re-ssl.diff;msg=35">patch-offlineimap-re-ssl.diff</a> (text/x-diff, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="36"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291794123 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 07:42:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=37">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=37">mbox</a>, <a href="#36">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="38"></a>
<!-- request_addr: Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt; -->
<!-- time:1291794123 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 07:42:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=39">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=39">mbox</a>, <a href="#38">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="40"></a><a name="msg40"></a><a href="#40">Message #40</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=40">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=40">mbox</a>, <a href="mailto:603450@bugs.debian.org?In-Reply-To=%3C20101208073939.GA30959%40melusine.alphascorpii.net%3E&amp;body=On%20Wed%2C%208%20Dec%202010%2008%3A39%3A39%20%2B0100%20Alexander%20Reichle-Schmehl%20%3Ctolimar%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20dave%21%0A%3E%20%0A%3E%20%2A%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20%5B101202%2005%3A58%5D%3A%0A%3E%20%0A%3E%20%3E%20Here%20have%20a%20patch%21%0A%3E%20%3E%20This%20obviously%20will%20break%20connecting%20to%20hosts%20which%20use%20a%20self-signed%0A%3E%20%3E%20certificate.%0A%3E%20%3E%20Perhaps%20some%20one%20else%20can%20fix%20this%20when%20they%20want%20it%20fixed%20%3B%29%20%3F%0A%3E%20%3E%20I%20tested%20using%20the%20following%20config%3A%0A%3E%20%0A%3E%20I%20verified%20it%2C%20and%20your%20patch%20works%3A%20%20I%20accepts%20valid%20ssl%20connections%2C%0A%3E%20and%20rejects%20invalid%20ones.%0A%3E%20%0A%3E%20%3E%20%2B%20%20%20%20%20%20%20%20self.sslobj%20%3D%20ssl_wrap%28self.sock%2C%20self.keyfile%2C%20self.certfile%2C%20cert_reqs%3Dssl.CERT_REQUIRED%2C%20ca_certs%3D%22%2Fetc%2Fssl%2Fcerts%2Fca-certificates.crt%22%29%0A%3E%20%0A%3E%20But%20that%20looks%20kind%20of%20ugly%2C%20having%20a%20hardcoded%20path...%20Also%2C%20I%20wonder%0A%3E%20if%20not%20self.certfile%20should%20be%20used%20for%20verification%3F%0A%3E%20%0A%3E%20Best%20Regards%2C%0A%3E%20%20%20Alexander%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23603450%3A%20Fwd%3A%20Due%20offlineimap%20absence%20of%20certificate%0A%09validation%20issue%20--%20Debian%20BTS%23603450&amp;References=%3C4CEFA841.5050401%40redhat.com%3E%20%3CAANLkTinLMQnsAM4WBCZviiE6ZuoFFLkUhNcpzCnm4nTQ%40mail.gmail.com%3E%20%3C4CF559AA.9090801%40complete.org%3E%20%3CAANLkTinFoSafWFqzczAt6B-hVZSict5r%3DY2FviCMqWMW%40mail.gmail.com%3E%20%3CAANLkTi%3DyctTbWwqRQgjFpm0T5MKZg_3BpbuLrPDRdAuj%40mail.gmail.com%3E%0A%20%3C20101208073939.GA30959%40melusine.alphascorpii.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=tolimar%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> dave b &lt;db.pub.mail@gmail.com&gt;, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Fwd: Due offlineimap absence of certificate
	validation issue -- Debian BTS#603450</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Dec 2010 08:39:39 +0100</div>
</div>
<pre class="message">Hi dave!

* dave b &lt;db.pub.mail@gmail.com&gt; [101202 05:58]:

&gt; Here have a patch!
&gt; This obviously will break connecting to hosts which use a self-signed
&gt; certificate.
&gt; Perhaps some one else can fix this when they want it fixed ;) ?
&gt; I tested using the following config:

I verified it, and your patch works:  I accepts valid ssl connections,
and rejects invalid ones.

&gt; +        self.sslobj = ssl_wrap(self.sock, self.keyfile, self.certfile, cert_reqs=ssl.CERT_REQUIRED, ca_certs=&quot;/etc/ssl/certs/ca-certificates.crt&quot;)

But that looks kind of ugly, having a hardcoded path... Also, I wonder
if not self.certfile should be used for verification?

Best Regards,
  Alexander



</pre>

<div class="infmessage"><hr><p>
<a name="41"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291794483 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 07:48:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=42">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=42">mbox</a>, <a href="#41">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="43"></a>
<!-- request_addr: Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt; -->
<!-- time:1291794483 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 07:48:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=44">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=44">mbox</a>, <a href="#43">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="45"></a><a name="msg45"></a><a href="#45">Message #45</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=45">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=45">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20Is%20603450%20realy%20release%20critical%3F&amp;References=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E&amp;body=On%20Wed%2C%208%20Dec%202010%2008%3A45%3A30%20%2B0100%20Alexander%20Reichle-Schmehl%20%3Ctolimar%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20release%20manager%2C%0A%3E%20%0A%3E%20%23603450%20is%20a%20bug%20%28currently%20with%20severity%20grave%2C%20Justification%3A%20user%0A%3E%20security%20hole%29%2C%20as%20offlineimap%20does%20no%20ssl%20certificate%20checking.%0A%3E%20%0A%3E%20%0A%3E%20While%20I%20agree%2C%20that%20this%20is%20a%20really%20important%20feature%2C%20which%20should%20be%0A%3E%20fixed%2C%20I%27m%20wondering%2C%20if%20that%20really%20is%20release%20critical.%0A%3E%20%0A%3E%20%0A%3E%20There%27s%20patch%20floating%20arround%2C%20which%20has%20a%20major%20regression%3A%20It%20doesn%27t%0A%3E%20work%20for%20users%20of%20self%20signed%20certificates.%20%20Should%20this%20bug%20be%20seen%20as%0A%3E%20of%20release%20critical%20severity%2C%20would%20you%20therefore%20at%20least%20consider%0A%3E%20tagging%20it%20squeeze-ignore%3F%0A%3E%20%0A%3E%20%0A%3E%20Best%20Regards%2C%0A%3E%20%20%20Alexander%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=tolimar%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> debian-release@lists.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Is 603450 realy release critical?</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Dec 2010 08:45:30 +0100</div>
</div>
<pre class="message">Hi release manager,

#603450 is a bug (currently with severity grave, Justification: user
security hole), as offlineimap does no ssl certificate checking.


While I agree, that this is a really important feature, which should be
fixed, I&#39;m wondering, if that really is release critical.


There&#39;s patch floating arround, which has a major regression: It doesn&#39;t
work for users of self signed certificates.  Should this bug be seen as
of release critical severity, would you therefore at least consider
tagging it squeeze-ignore?


Best Regards,
  Alexander



</pre>

<div class="infmessage"><hr><p>
<a name="46"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291795205 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 08:00:05 GMT) (<a href="bugreport.cgi?bug=603450;msg=47">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=47">mbox</a>, <a href="#46">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="48"></a>
<!-- request_addr: Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt; -->
<!-- time:1291795205 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 08:00:05 GMT) (<a href="bugreport.cgi?bug=603450;msg=49">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=49">mbox</a>, <a href="#48">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="50"></a><a name="msg50"></a><a href="#50">Message #50</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=50">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=50">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20Adopting%20offlineimap&amp;References=%3C20100608152041.17567.5677.reportbug%40hephaestus.lan.complete.org%3E%20%3C20100611084126.GA11465%40ortolo.eu%3E%0A%20%3C20101208075806.GA31468%40melusine.alphascorpii.net%3E&amp;body=On%20Wed%2C%208%20Dec%202010%2008%3A58%3A06%20%2B0100%20Alexander%20Reichle-Schmehl%20%3Ctolimar%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20John%21%0A%3E%20%0A%3E%20%2A%20John%20Ferlito%20%3Cjohnf%40inodes.org%3E%20%5B100719%2015%3A22%5D%3A%0A%3E%20%0A%3E%20%3E%20I%27ve%20already%20done%20some%20work%20on%20cleaning%20up%20the%20package%2C%20so%20it%20is%20now%0A%3E%20%3E%20lintian%20clean.%20Will%20begin%20work%20on%20fixing%20a%20whole%20heap%20of%20the%20bugs%0A%3E%20%3E%20next.%0A%3E%20%3E%20%0A%3E%20%3E%20Am%20aiming%20to%20be%20come%20the%20new%20upstream%20maintainer.%0A%3E%20%0A%3E%20Looking%20over%20the%20list%20of%20release%20critical%20bugs%2C%20I%20stumbled%20over%20the%0A%3E%20package%20offlineimap%2C%20which%20currently%20has%20one%20release%20critical%20bug%20open%0A%3E%20%28and%20therefore%20risks%20of%20being%20removed%20from%20the%20release%2C%0A%3E%20http%3A%2Fbugs.debian.org%2F603450%20for%20details%29.%0A%3E%20%0A%3E%20I%27m%20just%20wondering%2C%20if%20you%20are%20still%20interested%20in%20maintain%20this%0A%3E%20package%2C%20and%20if%20you%20could%20help%20prepare%20a%20fix%20for%20this%20bug%20in%20time.%20%20It%0A%3E%20would%20be%20a%20shame%2C%20if%20we%20couldn%27t%20ship%20offlineimape%20any%20more%20%3A%28%0A%3E%20%0A%3E%20%0A%3E%20Best%20Regards%2C%0A%3E%20%20%20Alexander%0A&amp;In-Reply-To=%3C20101208075806.GA31468%40melusine.alphascorpii.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=tolimar%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> John Ferlito &lt;johnf@inodes.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 585035@bugs.debian.org, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Adopting offlineimap</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Dec 2010 08:58:06 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=603450;msg=50">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi John!

* John Ferlito &lt;johnf@inodes.org&gt; [100719 15:22]:

&gt; I&#39;ve already done some work on cleaning up the package, so it is now
&gt; lintian clean. Will begin work on fixing a whole heap of the bugs
&gt; next.
&gt; 
&gt; Am aiming to be come the new upstream maintainer.

Looking over the list of release critical bugs, I stumbled over the
package offlineimap, which currently has one release critical bug open
(and therefore risks of being removed from the release,
http:/bugs.debian.org/603450 for details).

I&#39;m just wondering, if you are still interested in maintain this
package, and if you could help prepare a fix for this bug in time.  It
would be a shame, if we couldn&#39;t ship offlineimape any more :(


Best Regards,
  Alexander
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=603450;filename=signature.asc;msg=50">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="51"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291797567 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 08:39:27 GMT) (<a href="bugreport.cgi?bug=603450;msg=52">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=52">mbox</a>, <a href="#51">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="53"></a>
<!-- request_addr: dave b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1291797567 -->
<strong>Acknowledgement sent</strong>
to <code>dave b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 08:39:27 GMT) (<a href="bugreport.cgi?bug=603450;msg=54">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=54">mbox</a>, <a href="#53">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="55"></a><a name="msg55"></a><a href="#55">Message #55</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=55">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=55">mbox</a>, <a href="mailto:603450@bugs.debian.org?In-Reply-To=%3CAANLkTi%3D4KdAFKUBQOUqgXoudgNXuY2EJQW5KpyLEziAa%40mail.gmail.com%3E&amp;body=On%20Wed%2C%208%20Dec%202010%2019%3A33%3A39%20%2B1100%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20wrote%3A%0A%3E%20On%208%20December%202010%2018%3A39%2C%20Alexander%20Reichle-Schmehl%20%3Ctolimar%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20Hi%20dave%21%0A%3E%20%3E%0A%3E%20%3E%20%2A%20dave%20b%20%3Cdb.pub.mail%40gmail.com%3E%20%5B101202%2005%3A58%5D%3A%0A%3E%20%3E%0A%3E%20%3E%3E%20Here%20have%20a%20patch%21%0A%3E%20%3E%3E%20This%20obviously%20will%20break%20connecting%20to%20hosts%20which%20use%20a%20self-signed%0A%3E%20%3E%3E%20certificate.%0A%3E%20%3E%3E%20Perhaps%20some%20one%20else%20can%20fix%20this%20when%20they%20want%20it%20fixed%20%3B%29%20%3F%0A%3E%20%3E%3E%20I%20tested%20using%20the%20following%20config%3A%0A%3E%20%3E%0A%3E%20%3E%20I%20verified%20it%2C%20and%20your%20patch%20works%3A%20%C2%A0I%20accepts%20valid%20ssl%20connections%2C%0A%3E%20%3E%20and%20rejects%20invalid%20ones.%0A%3E%20%3E%0A%3E%20%3E%3E%20%2B%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0self.sslobj%20%3D%20ssl_wrap%28self.sock%2C%20self.keyfile%2C%20self.certfile%2C%20cert_reqs%3Dssl.CERT_REQUIRED%2C%20ca_certs%3D%22%2Fetc%2Fssl%2Fcerts%2Fca-certificates.crt%22%29%0A%3E%20%3E%0A%3E%20%3E%20But%20that%20looks%20kind%20of%20ugly%2C%20having%20a%20hardcoded%20path...%20Also%2C%20I%20wonder%0A%3E%20%3E%20if%20not%20self.certfile%20should%20be%20used%20for%20verification%3F%0A%3E%20%0A%3E%20Sorry%3F%0A%3E%20Um.%20Well%20sure%20a%20hard%20coded%20path%20path%20not%20be%20the%20best%20thing%20...%20if%20you%0A%3E%20know%20how%20to%20determine%20the%20path%20to%20the%20ca%20store%20on%20a%20system%20modify%20the%0A%3E%20patch%20to%20use%20that%20I%20guess.%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C4CEFA841.5050401%40redhat.com%3E%20%3CAANLkTinLMQnsAM4WBCZviiE6ZuoFFLkUhNcpzCnm4nTQ%40mail.gmail.com%3E%0A%20%3C4CF559AA.9090801%40complete.org%3E%20%3CAANLkTinFoSafWFqzczAt6B-hVZSict5r%3DY2FviCMqWMW%40mail.gmail.com%3E%0A%20%3CAANLkTi%3DyctTbWwqRQgjFpm0T5MKZg_3BpbuLrPDRdAuj%40mail.gmail.com%3E%20%3C20101208073939.GA30959%40melusine.alphascorpii.net%3E%0A%20%3CAANLkTi%3D4KdAFKUBQOUqgXoudgNXuY2EJQW5KpyLEziAa%40mail.gmail.com%3E&amp;subject=Re%3A%20Bug%23603450%3A%20Fwd%3A%20Due%20offlineimap%20absence%20of%20certificate%0A%20validation%20issue%20--%20Debian%20BTS%23603450">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=db.pub.mail%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> dave b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Fwd: Due offlineimap absence of certificate
 validation issue -- Debian BTS#603450</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Dec 2010 19:33:39 +1100</div>
</div>
<pre class="message">On 8 December 2010 18:39, Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt; wrote:
&gt; Hi dave!
&gt;
&gt; * dave b &lt;db.pub.mail@gmail.com&gt; [101202 05:58]:
&gt;
&gt;&gt; Here have a patch!
&gt;&gt; This obviously will break connecting to hosts which use a self-signed
&gt;&gt; certificate.
&gt;&gt; Perhaps some one else can fix this when they want it fixed ;) ?
&gt;&gt; I tested using the following config:
&gt;
&gt; I verified it, and your patch works:  I accepts valid ssl connections,
&gt; and rejects invalid ones.
&gt;
&gt;&gt; +        self.sslobj = ssl_wrap(self.sock, self.keyfile, self.certfile, cert_reqs=ssl.CERT_REQUIRED, ca_certs=&quot;/etc/ssl/certs/ca-certificates.crt&quot;)
&gt;
&gt; But that looks kind of ugly, having a hardcoded path... Also, I wonder
&gt; if not self.certfile should be used for verification?

Sorry?
Um. Well sure a hard coded path path not be the best thing ... if you
know how to determine the path to the ca store on a system modify the
patch to use that I guess.



</pre>

<div class="infmessage"><hr><p>
<a name="56"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291798269 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 08:51:09 GMT) (<a href="bugreport.cgi?bug=603450;msg=57">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=57">mbox</a>, <a href="#56">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="58"></a>
<!-- request_addr: Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt; -->
<!-- time:1291798269 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 08:51:09 GMT) (<a href="bugreport.cgi?bug=603450;msg=59">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=59">mbox</a>, <a href="#58">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="60"></a><a name="msg60"></a><a href="#60">Message #60</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=60">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=60">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Wed%2C%2008%20Dec%202010%2009%3A46%3A35%20%2B0100%20Alexander%20Reichle-Schmehl%20%3Ctolimar%40debian.org%3E%20wrote%3A%0A%3E%20Hi%21%0A%3E%20%0A%3E%20Am%2008.12.2010%2009%3A33%2C%20schrieb%20dave%20b%3A%0A%3E%20%0A%3E%20%3E%3E%20I%20verified%20it%2C%20and%20your%20patch%20works%3A%20%20I%20accepts%20valid%20ssl%20connections%2C%0A%3E%20%3E%3E%20and%20rejects%20invalid%20ones.%0A%3E%20%0A%3E%20At%20this%20point%20I%20should%20have%20also%20said%20%22many%20thanks%20for%20your%20work%21%22%0A%3E%20Sorry%2C%20didn%27t%20had%20a%20coffee%20when%20I%20wrote%20my%20first%20mail%20%3B%29%0A%3E%20%0A%3E%20%3E%3E%3E%20%2B%20%20%20%20%20%20%20%20self.sslobj%20%3D%20ssl_wrap%28self.sock%2C%20self.keyfile%2C%20self.certfile%2C%20cert_reqs%3Dssl.CERT_REQUIRED%2C%20ca_certs%3D%22%2Fetc%2Fssl%2Fcerts%2Fca-certificates.crt%22%29%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20But%20that%20looks%20kind%20of%20ugly%2C%20having%20a%20hardcoded%20path...%20Also%2C%20I%20wonder%0A%3E%20%3E%3E%20if%20not%20self.certfile%20should%20be%20used%20for%20verification%3F%0A%3E%20%3E%20Sorry%3F%0A%3E%20%3E%20Um.%20Well%20sure%20a%20hard%20coded%20path%20path%20not%20be%20the%20best%20thing%20...%20if%20you%0A%3E%20%3E%20know%20how%20to%20determine%20the%20path%20to%20the%20ca%20store%20on%20a%20system%20modify%20the%0A%3E%20%3E%20patch%20to%20use%20that%20I%20guess.%0A%3E%20%0A%3E%20Sorry%2C%20that%20was%20complete%20nonsense.%20%20For%20a%20moment%20I%20thought%20one%20could%20use%0A%3E%20the%20certfile%20parameter%20to%20specify%20a%20file%20holding%20certs%20for%20verification.%0A%3E%20%0A%3E%20%0A%3E%20I%20take%20my%20question%20back.%20%20Sorry%20for%20the%20noise.%0A%3E%20%0A%3E%20%0A%3E%20Best%20regards%2C%0A%3E%20%20%20Alexander%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C4CFF45EB.9050703%40debian.org%3E&amp;References=%3C4CEFA841.5050401%40redhat.com%3E%20%3CAANLkTinLMQnsAM4WBCZviiE6ZuoFFLkUhNcpzCnm4nTQ%40mail.gmail.com%3E%20%3C4CF559AA.9090801%40complete.org%3E%20%3CAANLkTinFoSafWFqzczAt6B-hVZSict5r%3DY2FviCMqWMW%40mail.gmail.com%3E%20%3CAANLkTi%3DyctTbWwqRQgjFpm0T5MKZg_3BpbuLrPDRdAuj%40mail.gmail.com%3E%20%3C20101208073939.GA30959%40melusine.alphascorpii.net%3E%20%3CAANLkTi%3D4KdAFKUBQOUqgXoudgNXuY2EJQW5KpyLEziAa%40mail.gmail.com%3E%0A%20%3C4CFF45EB.9050703%40debian.org%3E&amp;subject=Re%3A%20Bug%23603450%3A%20Fwd%3A%20Due%20offlineimap%20absence%20of%20certificate%20validation%0A%20issue%20--%20Debian%20BTS%23603450">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=tolimar%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> dave b &lt;db.pub.mail@gmail.com&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Fwd: Due offlineimap absence of certificate validation
 issue -- Debian BTS#603450</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 08 Dec 2010 09:46:35 +0100</div>
</div>
<pre class="message">Hi!

Am 08.12.2010 09:33, schrieb dave b:

&gt;&gt; I verified it, and your patch works:  I accepts valid ssl connections,
&gt;&gt; and rejects invalid ones.

At this point I should have also said &quot;many thanks for your work!&quot;
Sorry, didn&#39;t had a coffee when I wrote my first mail ;)

&gt;&gt;&gt; +        self.sslobj = ssl_wrap(self.sock, self.keyfile, self.certfile, cert_reqs=ssl.CERT_REQUIRED, ca_certs=&quot;/etc/ssl/certs/ca-certificates.crt&quot;)
&gt;&gt;
&gt;&gt; But that looks kind of ugly, having a hardcoded path... Also, I wonder
&gt;&gt; if not self.certfile should be used for verification?
&gt; Sorry?
&gt; Um. Well sure a hard coded path path not be the best thing ... if you
&gt; know how to determine the path to the ca store on a system modify the
&gt; patch to use that I guess.

Sorry, that was complete nonsense.  For a moment I thought one could use
the certfile parameter to specify a file holding certs for verification.


I take my question back.  Sorry for the noise.


Best regards,
  Alexander



</pre>

<div class="infmessage"><hr><p>
<a name="61"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291801144 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 09:39:04 GMT) (<a href="bugreport.cgi?bug=603450;msg=62">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=62">mbox</a>, <a href="#61">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="63"></a>
<!-- request_addr: Bastian Blank &lt;waldi@debian.org&gt; -->
<!-- time:1291801145 -->
<strong>Acknowledgement sent</strong>
to <code>Bastian Blank &lt;waldi@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 09:39:05 GMT) (<a href="bugreport.cgi?bug=603450;msg=64">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=64">mbox</a>, <a href="#63">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="65"></a><a name="msg65"></a><a href="#65">Message #65</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=65">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=65">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20Is%20603450%20realy%20release%20critical%3F&amp;References=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E%0A%20%3C20101208093723.GA30665%40wavehammer.waldi.eu.org%3E&amp;In-Reply-To=%3C20101208093723.GA30665%40wavehammer.waldi.eu.org%3E&amp;body=On%20Wed%2C%208%20Dec%202010%2010%3A37%3A24%20%2B0100%20Bastian%20Blank%20%3Cwaldi%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%20Dec%2008%2C%202010%20at%2008%3A45%3A30AM%20%2B0100%2C%20Alexander%20Reichle-Schmehl%20wrote%3A%0A%3E%20%3E%20%23603450%20is%20a%20bug%20%28currently%20with%20severity%20grave%2C%20Justification%3A%20user%0A%3E%20%3E%20security%20hole%29%2C%20as%20offlineimap%20does%20no%20ssl%20certificate%20checking.%0A%3E%20%0A%3E%20Could%20you%20explain%20why%20it%20should%20be%20acceptable%20to%20announce%20secure%0A%3E%20operation%20but%20ignore%20the%20very%20basic%20principles%20of%20it%3F%20%23564690%20is%20an%20old%0A%3E%20example%20of%20the%20same%20problem.%0A%3E%20%0A%3E%20%3E%20There%27s%20patch%20floating%20arround%2C%20which%20has%20a%20major%20regression%3A%20It%20doesn%27t%0A%3E%20%3E%20work%20for%20users%20of%20self%20signed%20certificates.%0A%3E%20%0A%3E%20From%20what%20I%27ve%20seen%20in%20the%20bug%2C%20even%20you%20should%20be%20able%20to%20fix%20that.%0A%3E%20%0A%3E%20Bastian%0A%3E%20%0A%3E%20--%20%0A%3E%20...%20bacteriological%20warfare%20...%20hard%20to%20believe%20we%20were%20once%20foolish%0A%3E%20enough%20to%20play%20around%20with%20that.%0A%3E%20%09%09--%20McCoy%2C%20%22The%20Omega%20Glory%22%2C%20stardate%20unknown%0A%3E%20%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=waldi%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Bastian Blank &lt;waldi@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> debian-release@lists.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Is 603450 realy release critical?</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Dec 2010 10:37:24 +0100</div>
</div>
<pre class="message">On Wed, Dec 08, 2010 at 08:45:30AM +0100, Alexander Reichle-Schmehl wrote:
&gt; #603450 is a bug (currently with severity grave, Justification: user
&gt; security hole), as offlineimap does no ssl certificate checking.

Could you explain why it should be acceptable to announce secure
operation but ignore the very basic principles of it? #564690 is an old
example of the same problem.

&gt; There&#39;s patch floating arround, which has a major regression: It doesn&#39;t
&gt; work for users of self signed certificates.

From what I&#39;ve seen in the bug, even you should be able to fix that.

Bastian

-- 
... bacteriological warfare ... hard to believe we were once foolish
enough to play around with that.
		-- McCoy, &quot;The Omega Glory&quot;, stardate unknown



</pre>

<div class="infmessage"><hr><p>
<a name="66"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291803126 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 10:12:06 GMT) (<a href="bugreport.cgi?bug=603450;msg=67">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=67">mbox</a>, <a href="#66">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="68"></a>
<!-- request_addr: Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt; -->
<!-- time:1291803126 -->
<strong>Acknowledgement sent</strong>
to <code>Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Wed, 08 Dec 2010 10:12:06 GMT) (<a href="bugreport.cgi?bug=603450;msg=69">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=69">mbox</a>, <a href="#68">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="70"></a><a name="msg70"></a><a href="#70">Message #70</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=70">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=70">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20Is%20603450%20realy%20release%20critical%3F&amp;References=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E%20%3C20101208093723.GA30665%40wavehammer.waldi.eu.org%3E%0A%20%3C4CFF593B.5010208%40debian.org%3E&amp;In-Reply-To=%3C4CFF593B.5010208%40debian.org%3E&amp;body=On%20Wed%2C%2008%20Dec%202010%2011%3A08%3A59%20%2B0100%20Alexander%20Reichle-Schmehl%20%3Ctolimar%40debian.org%3E%20wrote%3A%0A%3E%20Hi%21%0A%3E%20%0A%3E%20Am%2008.12.2010%2010%3A37%2C%20schrieb%20Bastian%20Blank%3A%0A%3E%20%0A%3E%20%3E%20%23564690%20is%20an%20old%20example%20of%20the%20same%20problem.%0A%3E%20%0A%3E%20So%20is%20%23547092%20%28which%20has%20severity%20important%29.%20%20And%20I%27m%20sure%20if%20we%20dig%0A%3E%20deep%20enough%2C%20we%20can%20find%20others%20as%20well.%0A%3E%20%0A%3E%20%0A%3E%20%3E%3E%20There%27s%20patch%20floating%20arround%2C%20which%20has%20a%20major%20regression%3A%20It%20doesn%27t%0A%3E%20%3E%3E%20work%20for%20users%20of%20self%20signed%20certificates.%0A%3E%20%3EFrom%20what%20I%27ve%20seen%20in%20the%20bug%2C%20even%20you%20should%20be%20able%20to%20fix%20that.%0A%3E%20%0A%3E%20If%20I%27m%20ever%20interested%20in%20your%20opinion%2C%20I%20let%20you%20know.%0A%3E%20%0A%3E%20%0A%3E%20Alexander%0A%3E%20%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=tolimar%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> debian-release@lists.debian.org, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Is 603450 realy release critical?</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 08 Dec 2010 11:08:59 +0100</div>
</div>
<pre class="message">Hi!

Am 08.12.2010 10:37, schrieb Bastian Blank:

&gt; #564690 is an old example of the same problem.

So is #547092 (which has severity important).  And I&#39;m sure if we dig
deep enough, we can find others as well.


&gt;&gt; There&#39;s patch floating arround, which has a major regression: It doesn&#39;t
&gt;&gt; work for users of self signed certificates.
&gt;From what I&#39;ve seen in the bug, even you should be able to fix that.

If I&#39;m ever interested in your opinion, I let you know.


Alexander



</pre>

<div class="infmessage"><hr><p>
<a name="71"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291809432 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Wed, 08 Dec 2010 11:57:12 GMT) (<a href="bugreport.cgi?bug=603450;msg=72">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=72">mbox</a>, <a href="#71">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="73"></a><a name="msg73"></a><a href="#73">Message #73</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=73">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=73">mbox</a>, <a href="mailto:603450@bugs.debian.org?In-Reply-To=%3C20101208110035.GA22617%40furrball.stateful.de%3E&amp;body=On%20Wed%2C%208%20Dec%202010%2012%3A00%3A35%20%2B0100%20Carsten%20Hey%20%3Ccarsten%40debian.org%3E%20wrote%3A%0A%3E%20%2A%20Bastian%20Blank%20%5B2010-12-08%2010%3A37%20%2B0100%5D%3A%0A%3E%20%3E%20On%20Wed%2C%20Dec%2008%2C%202010%20at%2008%3A45%3A30AM%20%2B0100%2C%20Alexander%20Reichle-Schmehl%20wrote%3A%0A%3E%20%3E%20%3E%20%23603450%20is%20a%20bug%20%28currently%20with%20severity%20grave%2C%20Justification%3A%20user%0A%3E%20%3E%20%3E%20security%20hole%29%2C%20as%20offlineimap%20does%20no%20ssl%20certificate%20checking.%0A%3E%20%3E%0A%3E%20%3E%20Could%20you%20explain%20why%20it%20should%20be%20acceptable%20to%20announce%20secure%0A%3E%20%3E%20operation%20but%20ignore%20the%20very%20basic%20principles%20of%20it%3F%20%23564690%20is%20an%20old%0A%3E%20%3E%20example%20of%20the%20same%20problem.%0A%3E%20%0A%3E%20Could%20you%20explain%20how%20an%20example%20of%20a%20bug%20with%20a%20severity%20set%20by%0A%3E%20yourself%20supports%20your%20point%2C%20considering%20that%20the%20maintainer%20of%20this%0A%3E%20package%20only%20agreed%20about%20the%20bugs%20severity%20because%20it%20was%20a%20regression%3F%0A%3E%20%0A%3E%20Carsten%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E%0A%20%3C20101208093723.GA30665%40wavehammer.waldi.eu.org%3E%0A%20%3C20101208110035.GA22617%40furrball.stateful.de%3E&amp;subject=Re%3A%20Is%20603450%20realy%20release%20critical%3F">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carsten%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Carsten Hey &lt;carsten@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> debian-release@lists.debian.org, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Is 603450 realy release critical?</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Dec 2010 12:00:35 +0100</div>
</div>
<pre class="message">* Bastian Blank [2010-12-08 10:37 +0100]:
&gt; On Wed, Dec 08, 2010 at 08:45:30AM +0100, Alexander Reichle-Schmehl wrote:
&gt; &gt; #603450 is a bug (currently with severity grave, Justification: user
&gt; &gt; security hole), as offlineimap does no ssl certificate checking.
&gt;
&gt; Could you explain why it should be acceptable to announce secure
&gt; operation but ignore the very basic principles of it? #564690 is an old
&gt; example of the same problem.

Could you explain how an example of a bug with a severity set by
yourself supports your point, considering that the maintainer of this
package only agreed about the bugs severity because it was a regression?

Carsten



</pre>

<div class="infmessage"><hr><p>
<a name="74"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1291903202 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Thu, 09 Dec 2010 14:00:02 GMT) (<a href="bugreport.cgi?bug=603450;msg=75">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=75">mbox</a>, <a href="#74">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="76"></a>
<!-- request_addr: gregor herrmann &lt;gregoa@debian.org&gt; -->
<!-- time:1291903202 -->
<strong>Acknowledgement sent</strong>
to <code>gregor herrmann &lt;gregoa@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Thu, 09 Dec 2010 14:00:02 GMT) (<a href="bugreport.cgi?bug=603450;msg=77">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=77">mbox</a>, <a href="#76">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="78"></a><a name="msg78"></a><a href="#78">Message #78</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=78">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=78">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Thu%2C%209%20Dec%202010%2014%3A57%3A14%20%2B0100%20gregor%20herrmann%20%3Cgregoa%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%2008%20Dec%202010%2008%3A45%3A30%20%2B0100%2C%20Alexander%20Reichle-Schmehl%20wrote%3A%0A%3E%20%0A%3E%20%3E%20There%27s%20patch%20floating%20arround%2C%20which%20has%20a%20major%20regression%3A%20It%20doesn%27t%0A%3E%20%3E%20work%20for%20users%20of%20self%20signed%20certificates.%0A%3E%20%0A%3E%20FWIW%3A%20As%20an%20offlineimap%20user%20I%27d%20be%20very%20unhappy%20if%20it%20stopped%0A%3E%20working%20with%20my%20IMAP%20server%20with%20its%20self-signed%20certificate.%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20gregor%0A%3E%20%0A%3E%20--%20%0A%3E%20%20.%27%27%60.%20%20%20http%3A%2F%2Finfo.comodo.priv.at%2F%20--%20GPG%20key%20IDs%3A%200x8649AA06%2C%200x00F3CFE4%0A%3E%20%20%3A%20%3A%27%20%3A%20%20Debian%20GNU%2FLinux%20user%2C%20admin%2C%20%26%20developer%20-%20http%3A%2F%2Fwww.debian.org%2F%0A%3E%20%20%60.%20%60%27%20%20%20Member%20of%20VIBE%21AT%20%26%20SPI%2C%20fellow%20of%20Free%20Software%20Foundation%20Europe%0A%3E%20%20%20%20%60-%20%20%20%20NP%3A%20Bob%20Dylan%3A%20Cold%20Irons%20Bound%0A&amp;In-Reply-To=%3C20101209135714.GA26683%40belanna.comodo.priv.at%3E&amp;subject=Re%3A%20Bug%23603450%3A%20Is%20603450%20realy%20release%20critical%3F&amp;References=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E%0A%20%3C20101209135714.GA26683%40belanna.comodo.priv.at%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=gregoa%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> gregor herrmann &lt;gregoa@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Alexander Reichle-Schmehl &lt;tolimar@debian.org&gt;, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Is 603450 realy release critical?</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 9 Dec 2010 14:57:14 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=603450;msg=78">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On Wed, 08 Dec 2010 08:45:30 +0100, Alexander Reichle-Schmehl wrote:

&gt; There&#39;s patch floating arround, which has a major regression: It doesn&#39;t
&gt; work for users of self signed certificates.

FWIW: As an offlineimap user I&#39;d be very unhappy if it stopped
working with my IMAP server with its self-signed certificate.

Cheers,
gregor

-- 
 .&#39;&#39;`.   <a href="http://info.comodo.priv.at/">http://info.comodo.priv.at/</a> -- GPG key IDs: 0x8649AA06, 0x00F3CFE4
 : :&#39; :  Debian GNU/Linux user, admin, &amp; developer - <a href="http://www.debian.org/">http://www.debian.org/</a>
 `. `&#39;   Member of VIBE!AT &amp; SPI, fellow of Free Software Foundation Europe
   `-    NP: Bob Dylan: Cold Irons Bound
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=603450;filename=signature.asc;msg=78">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="79"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1292271132 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Mon, 13 Dec 2010 20:12:12 GMT) (<a href="bugreport.cgi?bug=603450;msg=80">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=80">mbox</a>, <a href="#79">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="81"></a>
<!-- request_addr: Stefano Zacchiroli &lt;leader@debian.org&gt; -->
<!-- time:1292271132 -->
<strong>Acknowledgement sent</strong>
to <code>Stefano Zacchiroli &lt;leader@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Mon, 13 Dec 2010 20:12:12 GMT) (<a href="bugreport.cgi?bug=603450;msg=82">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=82">mbox</a>, <a href="#81">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="83"></a><a name="msg83"></a><a href="#83">Message #83</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=83">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=83">mbox</a>, <a href="mailto:603450@bugs.debian.org?References=%3C20101208074530.GB30959%40melusine.alphascorpii.net%3E%0A%20%3C20101208093723.GA30665%40wavehammer.waldi.eu.org%3E%0A%20%3C20101213200828.GA13457%40upsilon.cc%3E&amp;subject=Re%3A%20Bug%23603450%3A%20Is%20603450%20realy%20release%20critical%3F&amp;body=On%20Mon%2C%2013%20Dec%202010%2021%3A08%3A28%20%2B0100%20Stefano%20Zacchiroli%20%3Cleader%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%20Dec%2008%2C%202010%20at%2010%3A37%3A24AM%20%2B0100%2C%20Bastian%20Blank%20wrote%3A%0A%3E%20%3E%20%3E%20There%27s%20patch%20floating%20arround%2C%20which%20has%20a%20major%20regression%3A%20It%0A%3E%20%3E%20%3E%20doesn%27t%20work%20for%20users%20of%20self%20signed%20certificates.%0A%3E%20%3E%20%0A%3E%20%3E%20From%20what%20I%27ve%20seen%20in%20the%20bug%2C%20even%20you%20should%20be%20able%20to%20fix%20that.%0A%3E%20%0A%3E%20Folks%2C%20no%20matter%20what%20the%20technical%20disagreement%20%28if%20any%29%20is%2C%20please%20try%0A%3E%20hard%28er%29%20to%20refrain%20from%20this%20kind%20of%20ad%20hominem%20comments.%0A%3E%20%0A%3E%20Any%20potential%20Debian%20contributor%20seeing%20a%20comment%20like%20this%20one%2C%20will%0A%3E%20probably%20think%20twice%20before%20chiming%20in%20and%20help%20out%20in%20this%20or%20any%20other%0A%3E%20bug%2C%20because%20they%20will%20for%20sure%20have%20better%20things%20to%20do%20in%20life%20than%0A%3E%20risking%20of%20being%20annoyed%20this%20way%20when%20working%20as%20volunteers.%0A%3E%20%0A%3E%20People%20don%27t%20need%20to%20be%20friends%20to%20work%20together%20in%20Debian%2C%20but%20acting%0A%3E%20as%20enemies%20surely%20get%20in%20the%20way%20of%20efficient%20technical%20collaboration.%0A%3E%20%0A%3E%20Thanks%20for%20considering%2C%0A%3E%20Cheers.%0A%3E%20%0A%3E%20--%20%0A%3E%20Stefano%20Zacchiroli%20-o-%20PhD%20in%20Computer%20Science%20%5C%20PostDoc%20%40%20Univ.%20Paris%207%0A%3E%20zack%40%7Bupsilon.cc%2Cpps.jussieu.fr%2Cdebian.org%7D%20-%3C%3E-%20http%3A%2F%2Fupsilon.cc%2Fzack%2F%0A%3E%20Quando%20anche%20i%20santi%20ti%20voltano%20le%20spalle%2C%20%7C%20%20.%20%20%7C.%20I%27ve%20fans%20everywhere%0A%3E%20ti%20resta%20John%20Fante%20--%20V.%20Capossela%20.......%7C%20..%3A%20%7C..........%20--%20C.%20Adams%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20101213200828.GA13457%40upsilon.cc%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=leader%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Stefano Zacchiroli &lt;leader@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: Is 603450 realy release critical?</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 13 Dec 2010 21:08:28 +0100</div>
</div>
<pre class="message">On Wed, Dec 08, 2010 at 10:37:24AM +0100, Bastian Blank wrote:
&gt; &gt; There&#39;s patch floating arround, which has a major regression: It
&gt; &gt; doesn&#39;t work for users of self signed certificates.
&gt; 
&gt; From what I&#39;ve seen in the bug, even you should be able to fix that.

Folks, no matter what the technical disagreement (if any) is, please try
hard(er) to refrain from this kind of ad hominem comments.

Any potential Debian contributor seeing a comment like this one, will
probably think twice before chiming in and help out in this or any other
bug, because they will for sure have better things to do in life than
risking of being annoyed this way when working as volunteers.

People don&#39;t need to be friends to work together in Debian, but acting
as enemies surely get in the way of efficient technical collaboration.

Thanks for considering,
Cheers.

-- 
Stefano Zacchiroli -o- PhD in Computer Science \ PostDoc @ Univ. Paris 7
zack@{upsilon.cc,pps.jussieu.fr,debian.org} -&lt;&gt;- <a href="http://upsilon.cc/zack/">http://upsilon.cc/zack/</a>
Quando anche i santi ti voltano le spalle, |  .  |. I&#39;ve fans everywhere
ti resta John Fante -- V. Capossela .......| ..: |.......... -- C. Adams



</pre>

<div class="infmessage"><hr><p>
<a name="84"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1292287143 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Tue, 14 Dec 2010 00:39:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=85">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=85">mbox</a>, <a href="#84">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="86"></a>
<!-- request_addr: Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt; -->
<!-- time:1292287143 -->
<strong>Acknowledgement sent</strong>
to <code>Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Tue, 14 Dec 2010 00:39:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=87">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=87">mbox</a>, <a href="#86">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="88"></a><a name="msg88"></a><a href="#88">Message #88</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=88">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=88">mbox</a>, <a href="mailto:603450@bugs.debian.org?In-Reply-To=%3C87sjy1p4xa.fsf%40SSpaeth.de%3E&amp;body=On%20Mon%2C%2013%20Dec%202010%2018%3A35%3A29%20-0600%20Sebastian%20Spaeth%20%3CSebastian%40SSpaeth.de%3E%20wrote%3A%0A%3E%20Was%20just%20pointed%20to%20this%20bug.%20The%20fix%20would%20probably%20work%2C%20however%20only%0A%3E%20under%20python%20%3E%3D%202.6.%20ssl_wrapper%20calls%20ssl.wrap%28%29%20under%202.6%2C%20but%20socket.ssl%28%29%0A%3E%20under%20Python%202.4%20and%202.5.%0A%3E%20%0A%3E%20And%20socket.ssl%20does%20not%20take%20these%20parameters%3A%0A%3E%20cert_reqs%3D...%2C%20ca_certs%3D...%0A%3E%20%0A%3E%20So%20either%20we%20have%20to%20give%20up%20python%202.5%20compatability%20and%20require%202.6%0A%3E%20for%20SSL%20connections%2C%20or%20do%20more%20work%20to%20work%20on%20python%202.4%0A%3E%20%0A%3E%20Sebastian%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Patch%20not%20possible%20with%20pytho%202.4%20compatibility&amp;References=%3C87sjy1p4xa.fsf%40SSpaeth.de%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=Sebastian%40SSpaeth.de" alt="">
<div class="header"><span class="headerfield">From:</span> Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Patch not possible with pytho 2.4 compatibility</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 13 Dec 2010 18:35:29 -0600</div>
</div>
<pre class="message">Was just pointed to this bug. The fix would probably work, however only
under python &gt;= 2.6. ssl_wrapper calls ssl.wrap() under 2.6, but socket.ssl()
under Python 2.4 and 2.5.

And socket.ssl does not take these parameters:
cert_reqs=..., ca_certs=...

So either we have to give up python 2.5 compatability and require 2.6
for SSL connections, or do more work to work on python 2.4

Sebastian



</pre>

<div class="infmessage"><hr><p>
<a name="89"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1292335743 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Tue, 14 Dec 2010 14:09:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=90">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=90">mbox</a>, <a href="#89">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="91"></a>
<!-- request_addr: John Goerzen &lt;jgoerzen@complete.org&gt; -->
<!-- time:1292335743 -->
<strong>Acknowledgement sent</strong>
to <code>John Goerzen &lt;jgoerzen@complete.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Tue, 14 Dec 2010 14:09:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=92">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=92">mbox</a>, <a href="#91">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="93"></a><a name="msg93"></a><a href="#93">Message #93</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=93">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=93">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Re%3A%20Fwd%3A%20%5BPATCH%5D%20Implement%20SSL%20certificate%20checking&amp;References=%3C4D0779D3.9070407%40complete.org%3E&amp;body=On%20Tue%2C%2014%20Dec%202010%2008%3A06%3A11%20-0600%20John%20Goerzen%20%3Cjgoerzen%40complete.org%3E%20wrote%3A%0A%3E%20%0A%3E%20%0A%3E%20--------%20Original%20Message%20--------%0A%3E%20Subject%3A%20%5BPATCH%5D%20Implement%20SSL%20certificate%20checking%0A%3E%20Date%3A%20Tue%2C%2014%20Dec%202010%2007%3A15%3A01%20-0600%0A%3E%20From%3A%20Sebastian%20%3CSebastian%40SSpaeth.de%3E%0A%3E%20To%3A%20offlineimap-project%40lists.alioth.debian.org%0A%3E%20CC%3A%20Nicolas%20Sebrecht%20%3Cnicolas.s-dev%40laposte.net%3E%2C%09Sebastian%20%0A%3E%20%3CSebastian%40SSpaeth.de%3E%0A%3E%20%0A%3E%20If%20we%20specify%20a%20cacertfile%3D%20setting%20in%20the%20Repository%20section%20of%20an%20IMAP%20%0A%3E%20server%2C%0A%3E%20validate%20it%20on%20python%3E%3D2.6%20or%20fail%20with%20python%3C%3D2.5.%0A%3E%20The%20hostname%20check%20should%20propbably%20be%20made%20optional.%0A%3E%20%0A%3E%20This%20should%20make%20debian%20happy.%0A%3E%20%0A%3E%20Signed-off-By%3A%20Sebastian%20Spaeth%20%3CSebastian%40SSpaeth.de%3E%0A%3E%20---%0A%3E%20%0A%3E%20This%20is%20a%20big%20patch%20for%20inspection%20and%20review%20%28sorry%20didn%27t%20try%20to%20break%20%0A%3E%20it%20up%20yet%29.%20It%20implements%20SSL%20Certificate%20checking%20so%20taht%20Debian%20does%20%0A%3E%20not%20pull%20us%20out.%20Cert%20checking%20gets%20enabled%20when%20the%20user%20specifies%20%0A%3E%20sslcacert%3Dpath%2Fto%2Ffile%20in%20the%20Repository%20section%20of%20offlineimaprc.%20It%20%0A%3E%20also%20checks%20that%20the%20hostname%20of%20the%20certificate%20matches%20the%20connection%20%0A%3E%20host%20name.%0A%3E%20%0A%3E%20If%20the%20user%20specifies%20that%20option%20under%20python%202.4%2F2.5%2C%20we%20fail%20with%20an%20%0A%3E%20Exception%20as%20those%20versions%20do%20not%20support%20certificate%20checking.%0A%3E%20%0A%3E%20%20%20offlineimap%2Fimaplibutil.py%20%20%20%20%20%7C%20%20186%20%0A%3E%20%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B%2B--------------%0A%3E%20%20%20offlineimap%2Fimapserver.py%20%20%20%20%20%20%7C%20%20%2015%20%2B%2B--%0A%3E%20%20%20offlineimap%2Frepository%2FIMAP.py%20%7C%20%20%20%203%20%2B%0A%3E%20%20%203%20files%20changed%2C%20132%20insertions%28%2B%29%2C%2072%20deletions%28-%29%0A%3E%20%0A%3E%20diff%20--git%20a%2Fofflineimap%2Fimaplibutil.py%20b%2Fofflineimap%2Fimaplibutil.py%0A%3E%20index%20a60242b..839712c%20100644%0A%3E%20---%20a%2Fofflineimap%2Fimaplibutil.py%0A%3E%20%2B%2B%2B%20b%2Fofflineimap%2Fimaplibutil.py%0A%3E%20%40%40%20-25%2C9%20%2B25%2C9%20%40%40%20from%20imaplib%20import%20IMAP4_PORT%2C%20IMAP4_SSL_PORT%2C%20%0A%3E%20InternalDate%2C%20Mon2num%0A%3E%20%0A%3E%20%20%20try%3A%0A%3E%20%20%20%20%20%20%20import%20ssl%0A%3E%20-%20%20%20%20ssl_wrap%20%3D%20ssl.wrap_socket%0A%3E%20%20%20except%20ImportError%3A%0A%3E%20-%20%20%20%20ssl_wrap%20%3D%20socket.ssl%0A%3E%20%2B%20%20%20%20%23fails%20on%20python%20%3C2.6%0A%3E%20%2B%20%20%20%20pass%0A%3E%20%0A%3E%20%20%20class%20IMAP4_Tunnel%28IMAP4%29%3A%0A%3E%20%20%20%20%20%20%20%22%22%22IMAP4%20client%20class%20over%20a%20tunnel%0A%3E%20%40%40%20-62%2C45%20%2B62%2C7%20%40%40%20class%20IMAP4_Tunnel%28IMAP4%29%3A%0A%3E%20%20%20%20%20%20%20%20%20%20%20self.infd.close%28%29%0A%3E%20%20%20%20%20%20%20%20%20%20%20self.outfd.close%28%29%0A%3E%20%20%20%20%20%20%20%20%20%20%20self.process.wait%28%29%0A%3E%20-%0A%3E%20-class%20sslwrapper%3A%0A%3E%20-%20%20%20%20def%20__init__%28self%2C%20sslsock%29%3A%0A&amp;In-Reply-To=%3C4D0779D3.9070407%40complete.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jgoerzen%40complete.org" alt="">
<div class="header"><span class="headerfield">From:</span> John Goerzen &lt;jgoerzen@complete.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Fwd: [PATCH] Implement SSL certificate checking</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 14 Dec 2010 08:06:11 -0600</div>
</div>
<pre class="message flowed">

-------- Original Message --------
Subject: [PATCH] Implement SSL certificate checking
Date: Tue, 14 Dec 2010 07:15:01 -0600
From: Sebastian &lt;Sebastian@SSpaeth.de&gt;
To: offlineimap-project@lists.alioth.debian.org
CC: Nicolas Sebrecht &lt;nicolas.s-dev@laposte.net&gt;,	Sebastian 
&lt;Sebastian@SSpaeth.de&gt;

If we specify a cacertfile= setting in the Repository section of an IMAP 
server,
validate it on python&gt;=2.6 or fail with python&lt;=2.5.
The hostname check should propbably be made optional.

This should make debian happy.

Signed-off-By: Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;
---

This is a big patch for inspection and review (sorry didn&#39;t try to break 
it up yet). It implements SSL Certificate checking so taht Debian does 
not pull us out. Cert checking gets enabled when the user specifies 
sslcacert=path/to/file in the Repository section of offlineimaprc. It 
also checks that the hostname of the certificate matches the connection 
host name.

If the user specifies that option under python 2.4/2.5, we fail with an 
Exception as those versions do not support certificate checking.

 offlineimap/imaplibutil.py     |  186 
++++++++++++++++++++++++++--------------
 offlineimap/imapserver.py      |   15 ++--
 offlineimap/repository/IMAP.py |    3 +
 3 files changed, 132 insertions(+), 72 deletions(-)

diff --git a/offlineimap/imaplibutil.py b/offlineimap/imaplibutil.py
index a60242b..839712c 100644
--- a/offlineimap/imaplibutil.py
+++ b/offlineimap/imaplibutil.py
@@ -25,9 +25,9 @@ from imaplib import IMAP4_PORT, IMAP4_SSL_PORT, 
InternalDate, Mon2num

 try:
     import ssl
-    ssl_wrap = ssl.wrap_socket
 except ImportError:
-    ssl_wrap = socket.ssl
+    #fails on python &lt;2.6
+    pass

 class IMAP4_Tunnel(IMAP4):
     &quot;&quot;&quot;IMAP4 client class over a tunnel
@@ -62,45 +62,7 @@ class IMAP4_Tunnel(IMAP4):
         self.infd.close()
         self.outfd.close()
         self.process.wait()
-
-class sslwrapper:
-    def __init__(self, sslsock):
-        self.sslsock = sslsock
-        self.readbuf = &#39;&#39;
-
-    def write(self, s):
-        return self.sslsock.write(s)
-
-    def _read(self, n):
-        return self.sslsock.read(n)

-    def read(self, n):
-        if len(self.readbuf):
-            # Return the stuff in readbuf, even if less than n.
-            # It might contain the rest of the line, and if we try to
-            # read more, might block waiting for data that is not
-            # coming to arrive.
-            bytesfrombuf = min(n, len(self.readbuf))
-            retval = self.readbuf[:bytesfrombuf]
-            self.readbuf = self.readbuf[bytesfrombuf:]
-            return retval
-        retval = self._read(n)
-        if len(retval) &gt; n:
-            self.readbuf = retval[n:]
-            return retval[:n]
-        return retval
-
-    def readline(self):
-        retval = &#39;&#39;
-        while 1:
-            linebuf = self.read(1024)
-            nlindex = linebuf.find(&quot;\n&quot;)
-            if nlindex != -1:
-                retval += linebuf[:nlindex + 1]
-                self.readbuf = linebuf[nlindex + 1:] + self.readbuf
-                return retval
-            else:
-                retval += linebuf

 def new_mesg(self, s, secs=None):
             if secs is None:
@@ -108,27 +70,38 @@ def new_mesg(self, s, secs=None):
             tm = time.strftime(&#39;%M:%S&#39;, time.localtime(secs))
             UIBase.getglobalui().debug(&#39;imap&#39;, &#39;  %s.%02d %s&#39; % (tm, 
(secs*100)%100, s))

-class WrappedIMAP4_SSL(IMAP4_SSL):
-    def open(self, host = &#39;&#39;, port = IMAP4_SSL_PORT):
-        IMAP4_SSL.open(self, host, port)
-        self.sslobj = sslwrapper(self.sslobj)

-    def readline(self):
-        return self.sslobj.readline()
+class WrappedIMAP4_SSL(IMAP4_SSL):
+    &quot;&quot;&quot;Provides an improved version of the standard IMAP4_SSL
+
+    It provides a better readline() implementation as impaplibs()
+    readline is extremly inefficient. It can connect to IPv6
+    addresses. It performs SSL certificate checking on python &gt;=2.6
+    and optional hostname check.  It also replaces the
+    IMAP4_SSL().sslobj with an ssl implementation that works on both
+    python 2.4/5 and 2.&quot;&quot;&quot;
+    def __init__(self, *args, **kwargs):
+        self._readbuf = &#39;&#39;
+        self._cacertfile = kwargs.get(&#39;cacertfile&#39;, None)
+        if kwargs.has_key(&#39;cacertfile&#39;):
+            del kwargs[&#39;cacertfile&#39;]
+        IMAP4_SSL.__init__(self, *args, **kwargs)

-def new_open(self, host = &#39;&#39;, port = IMAP4_PORT):
-        &quot;&quot;&quot;Setup connection to remote server on &quot;host:port&quot;
-            (default: localhost:standard IMAP4 port).
-        This connection will be used by the routines:
-            read, readline, send, shutdown.
-        &quot;&quot;&quot;
+    def open(self, host = &#39;&#39;, port = IMAP4_SSL_PORT):
+        &quot;&quot;&quot;Do whatever IMAP4_SSL would do in open, but call sslwrap
+        with cert verification&quot;&quot;&quot;
+        #IMAP4_SSL.open(self, host, port) uses the below 2 lines:
         self.host = host
         self.port = port
+
+        #rather than just self.sock = socket.create_connection((host, 
port))
+        #we use the below part to be able to connect to ipv6 addresses too
+        #This connects to the first ip found ipv4/ipv6
+        #Added by Adriaan Peeters &lt;apeeters@lashout.net&gt; based on a socket
+        #example from the python documentation:
+        #<a href="http://www.python.org/doc/lib/socket-example.html">http://www.python.org/doc/lib/socket-example.html</a>
         res = socket.getaddrinfo(host, port, socket.AF_UNSPEC,
                                  socket.SOCK_STREAM)
-
-        # Try each address returned by getaddrinfo in turn until we
-        # manage to connect to one.
         # Try all the addresses in turn until we connect()
         last_error = 0
         for remote in res:
@@ -142,22 +115,106 @@ def new_open(self, host = &#39;&#39;, port = IMAP4_PORT):
         if last_error != 0:
             # FIXME
             raise socket.error(last_error)
-        self.file = self.sock.makefile(&#39;rb&#39;)

-def new_open_ssl(self, host = &#39;&#39;, port = IMAP4_SSL_PORT):
-        &quot;&quot;&quot;Setup connection to remote server on &quot;host:port&quot;.
-            (default: localhost:standard IMAP4 SSL port).
+        #connected to socket, now wrap it in SSL
+        try:
+            if self._cacertfile:
+                requirecert = ssl.CERT_REQUIRED
+            else:
+                requirecert = ssl.CERT_NONE
+
+            self.sslobj = ssl.wrap_socket(self.sock, self.keyfile,
+                                          self.certfile,
+                                          ca_certs = self._cacertfile,
+                                          cert_reqs = requirecert)
+        except NameError:
+            #Python 2.4/2.5 don&#39;t have the ssl module, we need to
+            #socket.ssl() here but that doesn&#39;t allow cert
+            #verification!!!
+
+            if self._cacertfile:
+                #user configured a CA certificate, but python 2.4/5 doesn&#39;t
+                #allow us to easily check it. So bail out here.
+                raise Exception(&quot;SSL CA Certificates cannot be checked 
with python &lt;=2.6. Abort&quot;)
+            self.sslobj = socket.ssl(self.sock, self.keyfile,
+                                     self.certfile)
+
+        else:
+            #ssl.wrap_socket worked and cert is verified, now check
+            #that hostnames also match.
+            error = self._verifycert(self.sslobj.getpeercert(), host)
+            if error:
+                raise ssl.SSLError(&quot;SSL Certificate host name mismatch: 
%s&quot; % error)
+
+    def _verifycert(self, cert, hostname):
+        &#39;&#39;&#39;Verify that cert (in socket.getpeercert() format) matches 
hostname.
+        CRLs and subjectAltName are not handled.
+
+        Returns error message if any problems are found and None on 
success.
+        &#39;&#39;&#39;
+        if not cert:
+            return (&#39;no certificate received&#39;)
+        dnsname = hostname.lower()
+        for s in cert.get(&#39;subject&#39;, []):
+            key, value = s[0]
+            if key == &#39;commonName&#39;:
+                certname = value.lower()
+                if (certname == dnsname or
+                    &#39;.&#39; in dnsname and certname == &#39;*.&#39; + 
dnsname.split(&#39;.&#39;, 1)[1]):
+                    return None
+                return (&#39;certificate is for %s&#39;) % certname
+        return (&#39;no commonName found in certificate&#39;)
+
+    def _read_upto (self, n):
+        &quot;&quot;&quot;Read up to n bytes, emptying existing _readbuffer first&quot;&quot;&quot;
+        bytesfrombuf = min(n, len(self._readbuf))
+        if bytesfrombuf:
+            # Return the stuff in readbuf, even if less than n.
+            # It might contain the rest of the line, and if we try to
+            # read more, might block waiting for data that is not
+            # coming to arrive.
+            retval = self._readbuf[:bytesfrombuf]
+            self._readbuf = self._readbuf[bytesfrombuf:]
+            return retval
+        return self.sslobj.read(min(n, 16384))
+
+    def read(self, n):
+        &quot;&quot;&quot;Read exactly n bytes (as done in IMAP4_SSL.read() API).&quot;&quot;&quot;
+        chunks = []
+        read = 0
+        while read &lt; n:
+            data = self._read_upto (n-read)
+            read += len(data)
+            chunks.append(data)
+
+        return &#39;&#39;.join(chunks)
+
+    def readline(self):
+        retval = &#39;&#39;
+        while 1:
+            linebuf = self._read_upto(1024)
+            nlindex = linebuf.find(&quot;\n&quot;)
+            if nlindex != -1:
+                retval += linebuf[:nlindex + 1]
+                self._readbuf = linebuf[nlindex + 1:] + self._readbuf
+                return retval
+            else:
+                retval += linebuf
+
+
+def new_open(self, host = &#39;&#39;, port = IMAP4_PORT):
+        &quot;&quot;&quot;Setup connection to remote server on &quot;host:port&quot;
+            (default: localhost:standard IMAP4 port).
         This connection will be used by the routines:
             read, readline, send, shutdown.
         &quot;&quot;&quot;
         self.host = host
         self.port = port
-        #This connects to the first ip found ipv4/ipv6
-        #Added by Adriaan Peeters &lt;apeeters@lashout.net&gt; based on a socket
-        #example from the python documentation:
-        #<a href="http://www.python.org/doc/lib/socket-example.html">http://www.python.org/doc/lib/socket-example.html</a>
         res = socket.getaddrinfo(host, port, socket.AF_UNSPEC,
                                  socket.SOCK_STREAM)
+
+        # Try each address returned by getaddrinfo in turn until we
+        # manage to connect to one.
         # Try all the addresses in turn until we connect()
         last_error = 0
         for remote in res:
@@ -171,8 +228,7 @@ def new_open_ssl(self, host = &#39;&#39;, port = 
IMAP4_SSL_PORT):
         if last_error != 0:
             # FIXME
             raise socket.error(last_error)
-        self.sslobj = ssl_wrap(self.sock, self.keyfile, self.certfile)
-        self.sslobj = sslwrapper(self.sslobj)
+        self.file = self.sock.makefile(&#39;rb&#39;)

 mustquote = re.compile(r&quot;[^\w!#$%&amp;&#39;+,.:;&lt;=&gt;?^`|~-]&quot;)

diff --git a/offlineimap/imapserver.py b/offlineimap/imapserver.py
index d9dd6ba..22869ff 100644
--- a/offlineimap/imapserver.py
+++ b/offlineimap/imapserver.py
@@ -81,12 +81,8 @@ class UsefulIMAP4(UsefulIMAPMixIn, imaplib.IMAP4):
             return imaplib.IMAP4.read (self, size)

 class UsefulIMAP4_SSL(UsefulIMAPMixIn, imaplibutil.WrappedIMAP4_SSL):
-    def open(self, host = &#39;&#39;, port = imaplib.IMAP4_SSL_PORT):
-        imaplibutil.new_open_ssl(self, host, port)
-
     # This is the same hack as above, to be used in the case of an SSL
     # connexion.
-
     def read(self, size):
         if (system() == &#39;Darwin&#39;) and (size&gt;0) :
             read = 0
@@ -107,7 +103,8 @@ class IMAPServer:
     def __init__(self, config, reposname,
                  username = None, password = None, hostname = None,
                  port = None, ssl = 1, maxconnections = 1, tunnel = None,
-                 reference = &#39;&quot;&quot;&#39;, sslclientcert = None, sslclientkey = 
None):
+                 reference = &#39;&quot;&quot;&#39;, sslclientcert = None, sslclientkey = 
None,
+                 sslcacertfile= None):
         self.reposname = reposname
         self.config = config
         self.username = username
@@ -120,6 +117,7 @@ class IMAPServer:
         self.usessl = ssl
         self.sslclientcert = sslclientcert
         self.sslclientkey = sslclientkey
+        self.sslcacertfile = sslcacertfile
         self.delim = None
         self.root = None
         if port == None:
@@ -260,7 +258,8 @@ class IMAPServer:
                 elif self.usessl:
                     UIBase.getglobalui().connecting(self.hostname, 
self.port)
                     imapobj = UsefulIMAP4_SSL(self.hostname, self.port,
-                                              self.sslclientkey, 
self.sslclientcert)
+                                              self.sslclientkey, 
self.sslclientcert,
+                                              cacertfile = 
self.sslcacertfile)
                 else:
                     UIBase.getglobalui().connecting(self.hostname, 
self.port)
                     imapobj = UsefulIMAP4(self.hostname, self.port)
@@ -421,6 +420,7 @@ class ConfigedIMAPServer(IMAPServer):
             ssl = self.repos.getssl()
             sslclientcert = self.repos.getsslclientcert()
             sslclientkey = self.repos.getsslclientkey()
+            sslcacertfile = self.repos.getsslcacertfile()
         reference = self.repos.getreference()
         server = None
         password = None
@@ -442,4 +442,5 @@ class ConfigedIMAPServer(IMAPServer):
                                 self.repos.getmaxconnections(),
                                 reference = reference,
                                 sslclientcert = sslclientcert,
-                                sslclientkey = sslclientkey)
+                                sslclientkey = sslclientkey,
+                                sslcacertfile = sslcacertfile)
diff --git a/offlineimap/repository/IMAP.py b/offlineimap/repository/IMAP.py
index 52a8e61..3bfa5db 100644
--- a/offlineimap/repository/IMAP.py
+++ b/offlineimap/repository/IMAP.py
@@ -139,6 +139,9 @@ class IMAPRepository(BaseRepository):
     def getsslclientkey(self):
         return self.getconf(&#39;sslclientkey&#39;, None)

+    def getsslcacertfile(self):
+        return self.getconf(&#39;sslcacertfile&#39;, None)
+
     def getpreauthtunnel(self):
         return self.getconf(&#39;preauthtunnel&#39;, None)

-- 
1.7.1


_______________________________________________
OfflineIMAP-project mailing list
OfflineIMAP-project@lists.alioth.debian.org
<a href="http://lists.alioth.debian.org/mailman/listinfo/offlineimap-project">http://lists.alioth.debian.org/mailman/listinfo/offlineimap-project</a>

OfflineIMAP homepage: <a href="http://software.complete.org/offlineimap">http://software.complete.org/offlineimap</a>




</pre>

<div class="infmessage"><hr><p>
<a name="94"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1292335744 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Tue, 14 Dec 2010 14:09:04 GMT) (<a href="bugreport.cgi?bug=603450;msg=95">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=95">mbox</a>, <a href="#94">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="96"></a>
<!-- request_addr: John Goerzen &lt;jgoerzen@complete.org&gt; -->
<!-- time:1292335744 -->
<strong>Acknowledgement sent</strong>
to <code>John Goerzen &lt;jgoerzen@complete.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Tue, 14 Dec 2010 14:09:04 GMT) (<a href="bugreport.cgi?bug=603450;msg=97">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=97">mbox</a>, <a href="#96">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="98"></a><a name="msg98"></a><a href="#98">Message #98</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=98">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=98">mbox</a>, <a href="mailto:603450@bugs.debian.org?subject=Fwd%3A%20Re%3A%20%5BPATCH%5D%20Implement%20SSL%20certificate%20checking&amp;References=%3C4D0779D6.6080004%40complete.org%3E&amp;body=On%20Tue%2C%2014%20Dec%202010%2008%3A06%3A14%20-0600%20John%20Goerzen%20%3Cjgoerzen%40complete.org%3E%20wrote%3A%0A%3E%20%0A%3E%20%0A%3E%20--------%20Original%20Message%20--------%0A%3E%20Subject%3A%20Re%3A%20%5BPATCH%5D%20Implement%20SSL%20certificate%20checking%0A%3E%20Date%3A%20Tue%2C%2014%20Dec%202010%2007%3A48%3A02%20-0600%0A%3E%20From%3A%20Sebastian%20Spaeth%20%3CSebastian%40SSpaeth.de%3E%0A%3E%20To%3A%20offlineimap-project%40lists.alioth.debian.org%0A%3E%20CC%3A%20Nicolas%20Sebrecht%20%3Cnicolas.s-dev%40laposte.net%3E%0A%3E%20%0A%3E%20On%20Tue%2C%2014%20Dec%202010%2007%3A15%3A01%20-0600%2C%20Sebastian%20%3CSebastian%40SSpaeth.de%3E%20wrote%3A%0A%3E%20%3E%20If%20we%20specify%20a%20cacertfile%3D%20setting%20in%20the%20Repository%20section%20of%20an%20IMAP%20server%2C%0A%3E%20%3E%20...%20sslcacert%3Dpath%2Fto%2Ffile%20in%20the%20Repository%20section%20of%20offlineimaprc%0A%3E%20%0A%3E%20Sorry%2C%20I%20got%20it%20twice%20wrong%20in%20my%20description.%20If%20you%20want%20to%20test%20this%2C%0A%3E%20the%20correct%20setting%20name%20is%3A%0A%3E%20%0A%3E%20%5BRepository%20Imapfoobar%5D%0A%3E%20sslcacertfile%20%3D%20%2Fabsolute%2Fpath%2Fto%2Fcert%0A%3E%20%0A%3E%20Tested%20here%20with%20my%20mail.dreamhost.com%20server%20and%20it%20works%20fine.%0A%3E%20%0A%3E%20Sebastian%0A%3E%20%0A%3E%20_______________________________________________%0A%3E%20OfflineIMAP-project%20mailing%20list%0A%3E%20OfflineIMAP-project%40lists.alioth.debian.org%0A%3E%20http%3A%2F%2Flists.alioth.debian.org%2Fmailman%2Flistinfo%2Fofflineimap-project%0A%3E%20%0A%3E%20OfflineIMAP%20homepage%3A%20http%3A%2F%2Fsoftware.complete.org%2Fofflineimap%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C4D0779D6.6080004%40complete.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jgoerzen%40complete.org" alt="">
<div class="header"><span class="headerfield">From:</span> John Goerzen &lt;jgoerzen@complete.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Fwd: Re: [PATCH] Implement SSL certificate checking</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 14 Dec 2010 08:06:14 -0600</div>
</div>
<pre class="message flowed">

-------- Original Message --------
Subject: Re: [PATCH] Implement SSL certificate checking
Date: Tue, 14 Dec 2010 07:48:02 -0600
From: Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;
To: offlineimap-project@lists.alioth.debian.org
CC: Nicolas Sebrecht &lt;nicolas.s-dev@laposte.net&gt;

On Tue, 14 Dec 2010 07:15:01 -0600, Sebastian &lt;Sebastian@SSpaeth.de&gt; wrote:
&gt; If we specify a cacertfile= setting in the Repository section of an IMAP server,
&gt; ... sslcacert=path/to/file in the Repository section of offlineimaprc

Sorry, I got it twice wrong in my description. If you want to test this,
the correct setting name is:

[Repository Imapfoobar]
sslcacertfile = /absolute/path/to/cert

Tested here with my mail.dreamhost.com server and it works fine.

Sebastian

_______________________________________________
OfflineIMAP-project mailing list
OfflineIMAP-project@lists.alioth.debian.org
<a href="http://lists.alioth.debian.org/mailman/listinfo/offlineimap-project">http://lists.alioth.debian.org/mailman/listinfo/offlineimap-project</a>

OfflineIMAP homepage: <a href="http://software.complete.org/offlineimap">http://software.complete.org/offlineimap</a>




</pre>

<div class="infmessage"><hr><p>
<a name="99"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt; -->
<!-- time:1293405309 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian QA Group &lt;packages@qa.debian.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Sun, 26 Dec 2010 23:15:09 GMT) (<a href="bugreport.cgi?bug=603450;msg=100">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=100">mbox</a>, <a href="#99">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="101"></a>
<!-- request_addr: Julien Cristau &lt;jcristau@debian.org&gt; -->
<!-- time:1293405309 -->
<strong>Acknowledgement sent</strong>
to <code>Julien Cristau &lt;jcristau@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian QA Group &lt;packages@qa.debian.org&gt;</code>.
 (Sun, 26 Dec 2010 23:15:09 GMT) (<a href="bugreport.cgi?bug=603450;msg=102">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=102">mbox</a>, <a href="#101">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="103"></a><a name="msg103"></a><a href="#103">Message #103</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=103">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=103">mbox</a>, <a href="mailto:603450@bugs.debian.org?body=On%20Mon%2C%2027%20Dec%202010%2000%3A11%3A51%20%2B0100%20Julien%20Cristau%20%3Cjcristau%40debian.org%3E%20wrote%3A%0A%3E%20severity%20603450%20important%0A%3E%20kthxbye%0A%3E%20%0A%3E%20On%20Sun%2C%20Nov%2014%2C%202010%20at%2019%3A55%3A23%20%2B1100%2C%20david%20b%20wrote%3A%0A%3E%20%0A%3E%20%3E%20Package%3A%20offlineimap%0A%3E%20%3E%20Severity%3A%20grave%0A%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20Justification%3A%20user%20security%20hole%0A%3E%20%3E%20%0A%3E%20%3E%20offlineimap%20performs%20absolutely%20no%20ssl%20certificate%20checking.%20So%20users%20could%2Fcan%20be%20the%20victim%20of%20a%20man%20in%20the%20middle%20attack.%0A%3E%20%0A%3E%20Long%20known%2Fdocumented%20limitation%2C%20I%20don%27t%20think%20this%20is%20RC.%20%20A%20fix%20can%0A%3E%20still%20be%20considered%20either%20before%20release%20or%20for%20a%20point%20update.%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20Julien%0A&amp;In-Reply-To=%3C20101226231151.GA20220%40radis.liafa.jussieu.fr%3E&amp;subject=Re%3A%20Bug%23603450%3A%20offlineimap%3A%20fails%20check%20the%20remote%20servers%20ssl%0A%20certificate%20is%20valid&amp;References=%3C20101114085523.4894.64123.reportbug%40linode.d1b.org%3E%0A%20%3C20101226231151.GA20220%40radis.liafa.jussieu.fr%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jcristau%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Julien Cristau &lt;jcristau@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> david b &lt;db.pub.mail@gmail.com&gt;, 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#603450: offlineimap: fails check the remote servers ssl
 certificate is valid</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 27 Dec 2010 00:11:51 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=603450;msg=103">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">severity 603450 important
kthxbye

On Sun, Nov 14, 2010 at 19:55:23 +1100, david b wrote:

&gt; Package: offlineimap
&gt; Severity: grave
&gt; Tags: security
&gt; Justification: user security hole
&gt; 
&gt; offlineimap performs absolutely no ssl certificate checking. So users could/can be the victim of a man in the middle attack.

Long known/documented limitation, I don&#39;t think this is RC.  A fix can
still be considered either before release or for a point update.

Cheers,
Julien
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=603450;filename=signature.asc;msg=103">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div class="msgreceived"><hr><p>
<a name="104"></a>
<!-- requester: Julien Cristau &lt;jcristau@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1293405311 -->
<strong>Severity set to &#39;important&#39; from &#39;grave&#39;
</strong>
Request was from <code>Julien Cristau &lt;jcristau@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 26 Dec 2010 23:15:11 GMT) (<a href="bugreport.cgi?bug=603450;msg=105">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=105">mbox</a>, <a href="#104">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="106"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, John Francesco Ferlito &lt;johnf@inodes.org&gt; -->
<!-- time:1299175203 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, John Francesco Ferlito &lt;johnf@inodes.org&gt;</code>:<br>
<code>Bug#603450</code>; Package <code>offlineimap</code>.
 (Thu, 03 Mar 2011 18:00:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=107">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=107">mbox</a>, <a href="#106">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="108"></a>
<!-- request_addr: Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt; -->
<!-- time:1299175203 -->
<strong>Acknowledgement sent</strong>
to <code>Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>John Francesco Ferlito &lt;johnf@inodes.org&gt;</code>.
 (Thu, 03 Mar 2011 18:00:03 GMT) (<a href="bugreport.cgi?bug=603450;msg=109">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=109">mbox</a>, <a href="#108">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="110"></a><a name="msg110"></a><a href="#110">Message #110</a> received at 603450@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=110">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=110">mbox</a>, <a href="mailto:603450@bugs.debian.org?References=%3C877hcg9jdo.fsf%40SSpaeth.de%3E&amp;subject=Re%3A%20FIXED&amp;In-Reply-To=%3C877hcg9jdo.fsf%40SSpaeth.de%3E&amp;body=On%20Thu%2C%2003%20Mar%202011%2018%3A57%3A55%20%2B0100%20Sebastian%20Spaeth%20%3CSebastian%40SSpaeth.de%3E%20wrote%3A%0A%3E%20This%20has%20been%20fixed%20in%20the%20current%20testing%20version.%0A%3E%20%0A%3E%20%5BRepository%20Imapfoobar%5D%0A%3E%20sslcacertfile%20%3D%20%2Fabsolute%2Fpath%2Fto%2Fcert%0A%3E%20%0A%3E%20containing%20a%20CA%20cert%20file%20in%20PEM%20format%20will%20actually%20verify%20the%20SSL%0A%3E%20cert.%20There%20are%20further%20improvements%20to%20be%20made%20%28check%20SSL%20fingerprint%0A%3E%20like%20mutt%20does%29%2C%20but%20this%20bug%20is%20fixed%20in%20testing.%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=Sebastian%40SSpaeth.de" alt="">
<div class="header"><span class="headerfield">From:</span> Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> FIXED</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 03 Mar 2011 18:57:55 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=603450;msg=110">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">This has been fixed in the current testing version.

[Repository Imapfoobar]
sslcacertfile = /absolute/path/to/cert

containing a CA cert file in PEM format will actually verify the SSL
cert. There are further improvements to be made (check SSL fingerprint
like mutt does), but this bug is fixed in testing.
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=603450;msg=110">Message part 2</a> (application/pgp-signature, inline)]</pre>

<div class="msgreceived"><hr><p>
<a name="111"></a>
<!-- request_addr: Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt; -->
<!-- time:1304527508 -->
<strong>Reply sent</strong>
to <code>Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</code>:<br>
You have taken responsibility.
 (Wed, 04 May 2011 16:45:08 GMT) (<a href="bugreport.cgi?bug=603450;msg=112">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=112">mbox</a>, <a href="#111">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="113"></a>
<!-- request_addr: david b &lt;db.pub.mail@gmail.com&gt; -->
<!-- time:1304527508 -->
<strong>Notification sent</strong>
to <code>david b &lt;db.pub.mail@gmail.com&gt;</code>:<br>
Bug acknowledged by developer.
 (Wed, 04 May 2011 16:45:08 GMT) (<a href="bugreport.cgi?bug=603450;msg=114">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=114">mbox</a>, <a href="#113">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="115"></a><a name="msg115"></a><a href="#115">Message #115</a> received at 603450-close@bugs.debian.org (<a href="bugreport.cgi?bug=603450;msg=115">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=115">mbox</a>, <a href="mailto:603450@bugs.debian.org?In-Reply-To=%3C87ei4ewh8f.fsf%40SSpaeth.de%3E&amp;body=On%20Wed%2C%2004%20May%202011%2018%3A41%3A36%20%2B0200%20Sebastian%20Spaeth%20%3CSebastian%40SSpaeth.de%3E%20wrote%3A%0A%3E%20Mark%20this%20bug%20really%20as%20fixed.%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C87ei4ewh8f.fsf%40SSpaeth.de%3E&amp;subject=Re%3A%20Mark%20really%20as%20fixed">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=Sebastian%40SSpaeth.de" alt="">
<div class="header"><span class="headerfield">From:</span> Sebastian Spaeth &lt;Sebastian@SSpaeth.de&gt;</div>
<div class="header"><span class="headerfield">To:</span> 603450-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Mark really as fixed</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 04 May 2011 18:41:36 +0200</div>
</div>
<pre class="message wrapping">Mark this bug really as fixed.



</pre>

<div class="msgreceived"><hr><p>
<a name="116"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1306999953 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Thu, 02 Jun 2011 07:32:33 GMT) (<a href="bugreport.cgi?bug=603450;msg=117">full text</a>, <a href="bugreport.cgi?bug=603450;mbox=yes;msg=117">mbox</a>, <a href="#116">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=603450">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:25:11 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->bembo<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
