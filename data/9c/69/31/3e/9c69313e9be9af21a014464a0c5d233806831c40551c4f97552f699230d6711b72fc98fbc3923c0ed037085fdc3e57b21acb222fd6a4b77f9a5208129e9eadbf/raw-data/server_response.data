<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1475775 - (CVE-2018-12383) key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1475775">
<meta property="og:description"
      content="RESOLVED (dkeeler) in Core - Security: PSM. Last updated 2020-01-07.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P1">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1475775 - (CVE-2018-12383) key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1475775&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1475775">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1475775">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/yui.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/global.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/util.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"types\":[\"tracking\"],\"comments\":{\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr60\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"flags\":{\"tracking\":{\"cf_status_thunderbird_esr91\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_tracking_firefox95\":\"---\",\"cf_tracking_firefox93\":\"---\",\"cf_status_firefox62\":\"fixed\",\"cf_tracking_firefox_esr60\":\"62+\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_tracking_firefox94\":\"---\",\"cf_status_firefox_esr60\":\"fixed\",\"cf_status_firefox_esr52\":\"unaffected\",\"cf_status_firefox61\":\"wontfix\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox94\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_status_firefox95\":\"---\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox63\":\"fixed\",\"cf_status_firefox_esr91\":\"---\"},\"project\":{\"cf_root_cause\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_fission_milestone\":\"---\",\"cf_a11y_review_project_flag\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1475775;
  BUGZILLA.bug_title = '1475775 - (CVE-2018-12383) key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)';
  BUGZILLA.bug_summary = 'key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1475775';
  BUGZILLA.bug_keywords = 'regression, sec-moderate',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/field.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/comments.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1475775">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1475775"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1475775 - (CVE-2018-12383) key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="HLsustfJKof8Hxj39LlreAlVreqDY0EofgEmevpDbZwWg1xNtwDU1NWGzNTOILSqMa66ycXG8qu0lmoZY3EXtkvoiW8SFCA9asQC6SAqKSETpxtpsTQRVF3WQhjNNl3uP8zJg3yUaApiF8HFAuFhjHWyjvCBwWlwNtwJpyPat9bJC77xKDJ8ecihYG4LkxOLXLgtW9zc5xJbvMycczpbWy7ZB3nyEd45oUKyTP5xZE2suIu7HrbySwC7vnWyGtrD">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1475775" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623350-KKlVyFEpHtEyLP-eiaSVxjxkaUWzSKShTdlAoHeElp4">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1475775" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1475775" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1475775">Bug 1475775</a>
          <span class="edit-hide">(CVE-2018-12383)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2018-07-14 01:46 PDT" data-time="1531557989">3 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2018-07-25 07:25 PDT" data-time="1532528715">3 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">key3<wbr>.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: Security: PSM, defect, P1)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=Security%3A%20PSM#Security%3A%20PSM" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Security: PSM
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: Security: PSM</div>
            <div class="description">A daemon that performs cryptographic operations on behalf of a client application.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=Security%3A%20PSM&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=Security%3A%20PSM&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=Security%3A%20PSM"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="Security: PSM"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-version"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            61 Branch

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P1
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;cf_status_firefox61&quot;:&quot;wontfix&quot;,&quot;cf_status_firefox_esr60&quot;:&quot;fixed&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox63&quot;:&quot;fixed&quot;,&quot;id&quot;:1475775,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;priority&quot;:&quot;P1&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox62&quot;:&quot;fixed&quot;,&quot;dupe_of&quot;:null,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr52&quot;:&quot;unaffected&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;keywords&quot;:[&quot;regression&quot;,&quot;sec-moderate&quot;],&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;flags&quot;:[{&quot;name&quot;:&quot;in-testsuite&quot;,&quot;status&quot;:&quot;+&quot;},{&quot;status&quot;:&quot;-&quot;,&quot;name&quot;:&quot;qe-verify&quot;}],&quot;status&quot;:&quot;RESOLVED&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla63&quot;,&quot;cf_tracking_firefox_esr60&quot;:&quot;62+&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">RESOLVED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            RESOLVED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla63

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr52</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=unaffected">unaffected</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr60</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=62%2B">62+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox61</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox61&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox62</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox62&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox63</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox63&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr52</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr52-dirty">
  <select id="cf_status_firefox_esr52" name="cf_status_firefox_esr52">
        <option value="unaffected"
          id="v3134_cf_status_firefox_esr52" selected
        >unaffected
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr60</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr60-dirty">
  <select id="cf_tracking_firefox_esr60" name="cf_tracking_firefox_esr60">
        <option value="62+"
          id="v3730_cf_tracking_firefox_esr60" selected
        >62+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr60-dirty">
  <select id="cf_status_firefox_esr60" name="cf_status_firefox_esr60">
        <option value="fixed"
          id="v3636_cf_status_firefox_esr60" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox61</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox61-dirty">
  <select id="cf_status_firefox61" name="cf_status_firefox61">
        <option value="wontfix"
          id="v3654_cf_status_firefox61" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox62</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox62-dirty">
  <select id="cf_status_firefox62" name="cf_status_firefox62">
        <option value="fixed"
          id="v3742_cf_status_firefox62" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox63</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox63-dirty">
  <select id="cf_status_firefox63" name="cf_status_firefox63">
        <option value="fixed"
          id="v3804_cf_status_firefox63" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: jurgen, Assigned: keeler)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_349244" ><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=349244" > <span class="fna">keeler</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_620923" ><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_349244" ><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=349244" > <span class="fna">keeler</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="16">16 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Firefox Loses Master Password on (RedHat) systems forcing usage of key3.db"
   href="/show_bug.cgi?id=1496736">1496736</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WONTFIX - NSS should delete key3.db after a successful migration to key4.db"
   href="/show_bug.cgi?id=1561368">1561368</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Firefox won't delete key3.db if the profile path contains non-ASCII string on Windows"
   href="/show_bug.cgi?id=1607652">1607652</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list" id="field-blocked"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - switch Mozilla to use the cert9+key4 (aka sql) database file format"
   href="/show_bug.cgi?id=783994">783994</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Upgrading to Thunderbird 60.x from a berkeley DB based Profile to a sqlite one causes key data loss"
   href="/show_bug.cgi?id=1510212">1510212</a>
      </div>

        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1475775&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1475775">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates" id="-help-link" class="help">Duplicates:
        </a>
    </div>


  
    <div class="value">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - [FG-VD-18-139] Mozilla Firefox Authentication Bypass Vulnerability Notification"
   href="/show_bug.cgi?id=1491482">1491482</a>
      </div>

    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: regression, sec-moderate, Whiteboard: [psm-assigned][post-critsmash-triage][adv-main62+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2018-12383

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=regression&amp;resolution=---">regression</a>, 
          <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[psm-assigned][post-critsmash-triage][adv-main62+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_75935" ><a class="email " href="/user_profile?user_id=75935" > <span class="fna">RyanVM</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#c33"
            class="rel-time-title activity-ref"
            title="3 years ago"
        data-time="1533600924"
      >in-testsuite</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_75935" ><a class="email " href="/user_profile?user_id=75935" > <span class="fna">RyanVM</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag-1789452">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1789452-dirty">
      <select id="flag-1789452" name="flag-1789452"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" selected>+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr>
          </tbody>
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_488993" ><a class="email " href="/user_profile?user_id=488993" > <span class="fna">avaida</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a1124929_488993"
            class="rel-time-title activity-ref"
            title="3 years ago"
        data-time="1532682918"
      >qe-verify</a>
    </td>

    <td class="flag-value">-
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_488993" ><a class="email " href="/user_profile?user_id=488993" > <span class="fna">avaida</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag-1785581">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1785581-dirty">
      <select id="flag-1785581" name="flag-1785581"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
            <option value="-" selected>-</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (1 file)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8992768">bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn</a>
        </div>
        <div>
            <a href="#c23" class="attach-time activity-ref"><span class="rel-time" title="2018-07-17 14:35 PDT" data-time="1531863315">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_349244" ><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div></span>
        </div>
        <div class="attach-info">46 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_397236" ><span class="fn">franziskus</span>
</div>:
              <a href="#c0"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1531908611"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_305228" ><span class="fn">MattN</span>
</div>:
              <a href="#c0"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1532035453"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_580382" ><span class="fn">jcristau</span>
</div>:
              <a href="#c35"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1533665420"
            >
              approval-mozilla-beta+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_75935" ><span class="fn">RyanVM</span>
</div>:
              <a href="#c49"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1537297096"
            >
              approval-mozilla-esr60+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8992768&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=8992768">Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
  </div>
  
</footer>
  </div>
</section>



<script nonce="OGkl7S0X4WRQLVy88RYcR2GmTi3A6WfnHE4MgQjdl4IaLg1g">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="13471002" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" ><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" ><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-14 01:46 PDT" data-time="1531557989">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-0" data-comment-id="13471002">User Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:61.0) Gecko/20100101 Firefox/61.0
Build ID: 20180704192850

Steps to reproduce:

In my existing firefox 61.0.4 (Ubuntu), I added a master password to protect my passwords.
Next, I used dumpzilla (<a rel="nofollow" href="https://github.com/Busindre/dumpzilla">https://github.com/Busindre/dumpzilla</a>) to extract the passwords from my closed firefox browser.


Actual results:

All my passwords got decrypted without asking for my master password.
I'm assuming protection happens on UI level but not on data level.


Expected results:

I would expect a master password to encrypt the json file using the master password so it can't be opened without knowledge of that master password.</pre></div><div class="change-set" id="c1"><div class="comment" data-id="13471005" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" ><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" ><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-14 01:47 PDT" data-time="1531558061">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="13471005">apologies, it's Firefox 61.0.1 Quantum (64 bits) and not .0.4</pre></div><div class="change-set" id="c2"><div class="comment" data-id="13471025" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" ><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-14 02:11 PDT" data-time="1531559462">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="13471025">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c0">comment #0</a>)
<span class="quote">&gt; User Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:61.0) Gecko/20100101
&gt; Firefox/61.0
&gt; Build ID: 20180704192850
&gt; 
&gt; Steps to reproduce:
&gt; 
&gt; In my existing firefox 61.0.4 (Ubuntu), I added a master password to protect
&gt; my passwords.
&gt; Next, I used dumpzilla (<a rel="nofollow" href="https://github.com/Busindre/dumpzilla">https://github.com/Busindre/dumpzilla</a>) to extract
&gt; the passwords from my closed firefox browser.</span >

Did you restart Firefox? How old is the user profile?

FWIW, <a rel="nofollow" href="https://github.com/Busindre/dumpzilla/blob/master/dumpzilla.py#L415-L427">https://github.com/Busindre/dumpzilla/blob/master/dumpzilla.py#L415-L427</a> has decryption code that specifically requests a master password, so no, the master password is not just a UI level protection.

It's possible there were old files in the profile you tested with (we moved password storage to a JSON file from a sqlite one) that the tool was able to use to recover passwords. Can you check if the profile folder (go to about:support in Firefox, then click the button to open the folder next to &quot;Profile folder&quot;) if it has a signons.sqlite file?

I guess the other possibility is that we don't immediately re-encrypt files, or that if you kept Firefox open, the new state wasn't yet flushed to disk to overwrite the old one - I'm not familiar enough with our pw manager implementation myself to know for sure. Maybe Matt can add detail about how that's supposed to work.</pre><div class="activity"><div class="change">Component: Untriaged &rarr; Password Manager</div><div class="change">Flags: needinfo?(jurgen)</div><div class="change">Flags: needinfo?(MattN+bmo)</div><div class="change">Product: Firefox &rarr; Toolkit</div></div></div><div class="change-set" id="c3"><div class="comment" data-id="13471064" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" ><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" ><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-14 02:50 PDT" data-time="1531561842">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="13471064">Hi,

thanks for the feedback - glad to be wrong (I was surprised that I didn't find the files encrypted)
So after rebooting, the passwords and usernames are encrypted in the json file.
Still leaking the visited sites, but I guess that's acceptable.</pre><div class="activity"><div class="change">Status: UNCONFIRMED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2018-07-14 02:50 PDT" data-time="1531561842">3 years ago</span></div><div class="change">Flags: <span class="activity-deleted">needinfo?(jurgen)</span></div><div class="change">Resolution: --- &rarr; INVALID</div></div></div><div class="change-set" id="c4"><div class="comment" data-id="13471081" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" ><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" ><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-14 03:23 PDT" data-time="1531563791">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="13471081">... and after opening my browser, I could extract my passwords again without entering my password to dumpzilla (I could even access it with another account using a different tty login).

When trying to recreate the bug with a new profile, it didn't work and it asked the master password as expected.

On my existing (incrementally upgraded for over multiple years) account, no master password is needed and I see my passwords in plain text.

I have not found the signons.sqlite file in my profile folder.</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; UNCONFIRMED</div><div class="change">Resolution: INVALID &rarr; ---</div></div></div><div class="change-set" id="c5"><div class="comment" data-id="13473598" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" ><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 03:01 PDT" data-time="1531735297">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="13473598">Jurgen, thanks for the quick updates. I'm not sure I follow completely at this point. Can you confirm that you're seeing the following:


- on your regular profile, with Firefox running, dumpzilla gets the passwords without prompting you for a password (presumably at this point you've given Firefox your master password when it started?)
- on that same profile, once you close Firefox, dumpzilla can't get passwords (or maybe it can, but it can't anymore after a reboot? Please clarify. :-) )

- on a new profile, where you save a password &quot;behind&quot; a master password, dumpzilla can't get the passwords either when Firefox is running or when it isn't - at this point, when testing what happens when Firefox is running, have you given Firefox the master password for that new profile?


(Basically, my current hypothesis is that while Firefox is running *and* you've already given it your master password, the NSS library which dumpzilla relies on directly (exact paths are stored in the python file) knows the master password (presumably stores it in memory?) and can thus decrypt your passwords without asking you for the master password. But I can't quite tell from your description if that holds up or not.)</pre><div class="activity"><div class="change">Flags: needinfo?(jurgen)</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="13473624" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" ><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" ><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 03:23 PDT" data-time="1531736615">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="13473624">So I have 2 users:
1. jurgen (my old ye faithful account that has been passed on since Ubuntu 12.04 and FF3 or so)
2. test (newly created for this test)

both are in the sudo'ers group.

This is after a fresh reboot.

Step 1: just work as jurgen (with master password). I have closed FF. On tty2 log in with test - sudo su. Now run dumpzilla on the profile under jurgen. I gain access to all passwords without entering master password.

Step 2: work as test (first login, so completely virgin account) - I created an account on Wikipedia and stored my username and password. Now I went to settings and added a master password. Log in to tty2 with jurgen - sudo su. Now run dumpzilla on the profile under test. Access to passwords failed.

I'd like to supply with screenshots or recording, but it's a bit hard. Don't know how to record TTY2.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jurgen)</span></div></div></div><div class="change-set" id="c7"><div class="comment" data-id="13473751" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" ><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 05:16 PDT" data-time="1531743405">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="13473751">OK. I don't really know what's going on then, and it's a bit hard for me to try to reproduce - in part because you yourself can't reproduce on a clean profile and we don't know what's different about your main profile, and in part because the tool doesn't seem to work well on macOS. Mind you, the output is confusing anyway, because it says:


[ERROR] Error decoding passwords: libnss not found (/Applications/Firefox\ Nightly.app/Contents/MacOS/libnss3.dylib)


(I altered the path to be correct because plain `libnss3.dylib` also didn't work, but this didn't make any difference)

and yet it also says:

===============================================================================================================
== Total Information
==============================================================================================================

Total Decode Passwords     : 1
Total Passwords            : 1

even though the output does not in fact contain my (fake) saved password. I assume:

User field: identifier
Password field: password

would normally contain the actual password and username, or something?


Hopefully MattN has more ideas.</pre></div><div class="change-set" id="a208903_75935"><div class="change" id="aa208903_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a208903_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a208903_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a208903_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a208903_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a208903_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 11:48 PDT" data-time="1531766892">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: firefox-core-security &rarr; toolkit-core-security</div></div></div><div class="change-set" id="c8"><div class="comment" data-id="13474841" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a208903_75935"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a208903_75935"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 12:02 PDT" data-time="1531767720">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="13474841">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c4">comment #4</a>)
<span class="quote">&gt; I have not found the signons.sqlite file in my profile folder.</span >

Can you please double/triple check this? Note that basename of the files is different signons vs. logins. Make absolutely sure you're looking at the correct profile folder, the same one as dumpzilla is.

The issue may actually be about key3.db vs. key4.db… When did you setup a Master Password in your default profile? If you move key3.db out of the profile folder can dumpzilla still decrypt the logins?</pre><div class="activity"><div class="change">Flags: needinfo?(MattN+bmo) &rarr; needinfo?(jurgen)</div></div></div><div class="change-set" id="a211628_620923"><div class="change" id="aa211628_620923">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_620923" id="a211628_620923"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a211628_620923"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a211628_620923">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a211628_620923">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 12:33 PDT" data-time="1531769617">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jurgen)</span></div></div></div><div class="change-set" id="c10"><div class="comment" data-id="13474965" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a211628_620923"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 12:41 PDT" data-time="1531770094">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="13474965">(In reply to Matthew N. [:MattN] (PM if requests are blocking you) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c8">comment #8</a>)
<span class="quote">&gt; (In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c4">comment #4</a>)
&gt; &gt; I have not found the signons.sqlite file in my profile folder.
&gt; 
&gt; Can you please double/triple check this? Note that basename of the files is
&gt; different signons vs. logins. Make absolutely sure you're looking at the
&gt; correct profile folder, the same one as dumpzilla is.</span >

See above reply.

<span class="quote">&gt; 
&gt; The issue may actually be about key3.db vs. key4.db… When did you setup a
&gt; Master Password in your default profile? If you move key3.db out of the
&gt; profile folder can dumpzilla still decrypt the logins?</span >

When I move key3.db out of the profile, it indeed can't access the passwords anymore and asks for a master password.</pre></div><div class="change-set" id="c11"><div class="comment" data-id="13475272" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a211628_620923"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 14:15 PDT" data-time="1531775724">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="13475272">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c10">comment #10</a>)
<span class="quote">&gt; (In reply to Matthew N. [:MattN] (PM if requests are blocking you) from
&gt; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c8">comment #8</a>)
&gt; &gt; (In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c4">comment #4</a>)
&gt; &gt; &gt; I have not found the signons.sqlite file in my profile folder.
&gt; &gt; 
&gt; &gt; Can you please double/triple check this? Note that basename of the files is
&gt; &gt; different signons vs. logins. Make absolutely sure you're looking at the
&gt; &gt; correct profile folder, the same one as dumpzilla is.
&gt; 
&gt; See above reply.</span >

OK, great.

<span class="quote">&gt; &gt; 
&gt; &gt; The issue may actually be about key3.db vs. key4.db… When did you setup a
&gt; &gt; Master Password in your default profile?</span >

What was the answer to this question?

<span class="quote">&gt; If you move key3.db out of the
&gt; &gt; profile folder can dumpzilla still decrypt the logins?
&gt; 
&gt; When I move key3.db out of the profile, it indeed can't access the passwords
&gt; anymore and asks for a master password.</span >

OK, so I think the issue is that you setup a master password after the conversion to key4.db (looks like it was Firefox 58?) and we haven't yet cleaned up key3.db files. This bug could track that cleanup if that's the case.

David, does that make sense? My understanding is that having an old key*.db without a master password would be enough to decrypt logins since we don't re-encrypt the saved data when a MP is enabled or disabled.</pre><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - switch Mozilla to use the cert9+key4 (aka sql) database file format"
   href="/show_bug.cgi?id=783994">783994</a></div><div class="change">Flags: needinfo?(dkeeler)</div></div></div><div class="change-set" id="c12"><div class="comment" data-id="13475331" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a211628_620923"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a211628_620923"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 14:38 PDT" data-time="1531777095">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="13475331">Yes - if a user adds a master password after upgrading to 58, their logins will still be decryptable as long as key3.db exists. We can probably clean up those old files at this point (key3.db, cert8.db, and secmod.db).</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dkeeler)</span></div></div></div><div class="change-set" id="c13"><div class="comment" data-id="13475410" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a211628_620923"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 15:09 PDT" data-time="1531778997">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="13475410">What code does the migration from key3 to key4? Would it be easy to delete the old file as part of that at this point? And should we backport any such change to esr60 to avoid this issue persisting on ESR for another year or so?</pre><div class="activity"><div class="change">Status: UNCONFIRMED &rarr; NEW</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox61&amp;o1=isnotempty">status-firefox61</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox61&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox62&amp;o1=isnotempty">status-firefox62</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox62&amp;o1=equals&amp;v1=fix-optional">fix-optional</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox63&amp;o1=isnotempty">status-firefox63</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox63&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=isnotempty">status-firefox-esr52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=unaffected">unaffected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">Ever confirmed: true</div><div class="change">Summary: passwords are not encrypted with master password in logins.json &rarr; Unencrypted passwords remain on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)</div></div></div><div class="change-set" id="c14"><div class="comment" data-id="13475449" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a211628_620923"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a211628_620923"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 15:17 PDT" data-time="1531779456">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="13475449">NSS performs the migration internally. We could probably add code to NSS to delete the old DBs as part of migration, but that wouldn't help anyone who has already migrated.</pre></div><div class="change-set" id="c15"><div class="comment" data-id="13475452" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a211628_620923"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 15:19 PDT" data-time="1531779544">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="13475452">(In reply to [:keeler] (use needinfo) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c14">comment #14</a>)
<span class="quote">&gt; NSS performs the migration internally. We could probably add code to NSS to
&gt; delete the old DBs as part of migration, but that wouldn't help anyone who
&gt; has already migrated.</span >

OK. At what point in browser startup is the migration performed? We can add a migration step to nsBrowserGlue, but we don't normally use it for this type of thing, and if it races with the migration then the obvious result would be dataloss... :-(</pre><div class="activity"><div class="change">Flags: needinfo?(dkeeler)</div></div></div><div class="change-set" id="c16"><div class="comment" data-id="13475483" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a211628_620923"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 15:34 PDT" data-time="1531780470">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="13475483">It would be great if we had <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Warn when starting a profile that last ran with a newer build"
   href="/show_bug.cgi?id=1455707">bug 1455707</a> implemented before we delete the old files. Usually we leave the old files around for a while to support downgrades.

I think we should do the following:
a) Delete key3.db (if it exists) when a master password is changed/enabled. That solves this bug and should be backported to ESR.

b) Delete all of the old files (key3.db, cert8.db, and secmod.db) for the next ESR (to support downgrades between ESR) in an upcoming release… I don't think we need to rush on this. Should we only do this for Firefox (e.g. migrateUI) or do we another another place to do this that won't incur a startup perf hit from file I/O every startup? Or does this need to be in PSM for all PSM consumers? We should at least notify downstream consumers about this issue I guess? This affects who should implement it.

(In reply to :Gijs (he/him) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c13">comment #13</a>)
<span class="quote">&gt; Would it be easy to delete the old file as part of that at this point?</span >

That will break the downgrade case so I don't think it's the best idea.

<span class="quote">&gt; And should we backport any such
&gt; change to esr60 to avoid this issue persisting on ESR for another year or so?</span >

I think it would be safest to only backport a fix to delete key3.db if a master password is changed/enabled. This won't help ESR users who already make a MP change after ESR60 got installed but since that is still very new we probably have time to fix this before may people are affected since less than 1% of users use a MP.

David, what do you think about this proposal and where do you think we should implement parts (a) and (b) in the code since that affects what team implements it and which component this should end up in.</pre><div class="activity"><div class="change">Summary: Unencrypted passwords remain on disk from pre-Firefox-58 (becomes issue if adding a master password post-58) &rarr; key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)</div></div></div><div class="change-set" id="c17"><div class="comment" data-id="13475606" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a211628_620923"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a211628_620923"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-16 16:54 PDT" data-time="1531785245">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="13475606">(In reply to :Gijs (he/him) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c15">comment #15</a>)
<span class="quote">&gt; OK. At what point in browser startup is the migration performed? We can add
&gt; a migration step to nsBrowserGlue, but we don't normally use it for this
&gt; type of thing, and if it races with the migration then the obvious result
&gt; would be dataloss... :-(</span >

It happens when we call NSS_Initialize [0] as part of initializing nsINSSComponent (nsNSSComponent [1]).

[0] <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/6f86cc3479f80ace97f62634e2c82a483d1ede40/security/certverifier/NSSCertDBTrustDomain.cpp#1147">https://searchfox.org/mozilla-central/rev/6f86cc3479f80ace97f62634e2c82a483d1ede40/security/certverifier/NSSCertDBTrustDomain.cpp#1147</a>
[1] <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/b0275bc977ad7fda615ef34b822bba938f2b16fd/security/manager/ssl/nsNSSComponent.cpp#1988">https://searchfox.org/mozilla-central/rev/b0275bc977ad7fda615ef34b822bba938f2b16fd/security/manager/ssl/nsNSSComponent.cpp#1988</a>

For better or worse, currently it's synchronous, so if you first instantiate the service (and it successfully initializes NSS in read/write mode, which isn't guaranteed...) then you won't race.

(In reply to Matthew N. [:MattN] (PM if requests are blocking you) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c16">comment #16</a>)
<span class="quote">&gt; I think we should do the following:
&gt; a) Delete key3.db (if it exists) when a master password is changed/enabled.
&gt; That solves this bug and should be backported to ESR.</span >

This seems reasonable (although there's the issue of if a user switches back to an older ESR, things like saved passwords and imported certificates might not work).

<span class="quote">&gt; b) Delete all of the old files (key3.db, cert8.db, and secmod.db) for the
&gt; next ESR (to support downgrades between ESR) in an upcoming release… I don't
&gt; think we need to rush on this. Should we only do this for Firefox (e.g.
&gt; migrateUI) or do we another another place to do this that won't incur a
&gt; startup perf hit from file I/O every startup? Or does this need to be in PSM
&gt; for all PSM consumers? We should at least notify downstream consumers about
&gt; this issue I guess? This affects who should implement it.</span >

I mean, we're already accessing all of these files synchronously at startup anyway right now (see <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - NSS should be initialized off main thread"
   href="/show_bug.cgi?id=1370516">bug 1370516</a>), so it probably won't be that much more of a performance hit.

We should at least mention this to the NSS team. Their stance may be &quot;yes, definitely the old DBs should be deleted&quot; or it may be &quot;no, we can't risk the loss of user data&quot;. That said, I think Firefox may need/want to make a different decision than NSS does on this.

<span class="quote">&gt; (In reply to :Gijs (he/him) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c13">comment #13</a>)
&gt; &gt; Would it be easy to delete the old file as part of that at this point?
&gt; 
&gt; That will break the downgrade case so I don't think it's the best idea.
&gt; 
&gt; &gt; And should we backport any such
&gt; &gt; change to esr60 to avoid this issue persisting on ESR for another year or so?
&gt; 
&gt; I think it would be safest to only backport a fix to delete key3.db if a
&gt; master password is changed/enabled. This won't help ESR users who already
&gt; make a MP change after ESR60 got installed but since that is still very new
&gt; we probably have time to fix this before may people are affected since less
&gt; than 1% of users use a MP.
&gt; 
&gt; David, what do you think about this proposal and where do you think we
&gt; should implement parts (a) and (b) in the code since that affects what team
&gt; implements it and which component this should end up in.</span >

I think doing both a and b sounds good. There is already some code in nsNSSComponent that does a similar thing [2], so maybe it makes sense to put both there.

[2] <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/b0275bc977ad7fda615ef34b822bba938f2b16fd/security/manager/ssl/nsNSSComponent.cpp#1570">https://searchfox.org/mozilla-central/rev/b0275bc977ad7fda615ef34b822bba938f2b16fd/security/manager/ssl/nsNSSComponent.cpp#1570</a></pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dkeeler)</span></div></div></div><div class="change-set" id="c18"><div class="comment" data-id="13476084" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a211628_620923"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 00:02 PDT" data-time="1531810955">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="13476084">So the work-around for people like me, would be to manually delete key3.db if I want to prioritize security over backward compatibility. That's right?


Would it be a sensible approach to put this decision in a GUI?

[x] Maintain backward compatibilty (decreasing security)
[ ] Increase security (breaks compatibility with FF older than XXX)

This way, the option is left to the user? (ideally, these options only appear in the master password dialog box)</pre></div><div class="change-set" id="c19"><div class="comment" data-id="13477189" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a211628_620923"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 08:50 PDT" data-time="1531842611">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="13477189">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c18">comment #18</a>)
<span class="quote">&gt; So the work-around for people like me, would be to manually delete key3.db
&gt; if I want to prioritize security over backward compatibility. That's right?</span >

Yes

<span class="quote">&gt; Would it be a sensible approach to put this decision in a GUI?</span >

We could but IMO that would be too much work (initial and maintenance) for a feature that less than 1% of users use.</pre></div><div class="change-set" id="c20"><div class="comment" data-id="13477208" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a211628_620923"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 08:56 PDT" data-time="1531842980">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="13477208">(In reply to Matthew N. [:MattN] (PM if requests are blocking you) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c19">comment #19</a>)
<span class="quote">&gt; (In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c18">comment #18</a>)
&gt; &gt; So the work-around for people like me, would be to manually delete key3.db
&gt; &gt; if I want to prioritize security over backward compatibility. That's right?
&gt; 
&gt; Yes</span >
Thanks. Feeling safer already.

<span class="quote">&gt; 
&gt; &gt; Would it be a sensible approach to put this decision in a GUI?
&gt; 
&gt; We could but IMO that would be too much work (initial and maintenance) for a
&gt; feature that less than 1% of users use.</span >
Too bad... well, I guess people being critical about safety use something external like keepass and the ones not critical about it... well, they just prefer the ease of it.
Anyways, thanks for implementing it.

I'd like to set out a little blog post on this topic and the workaround. Seeing the timeline, I'm assuming that's okay to do that soonish?</pre></div><div class="change-set" id="c21"><div class="comment" data-id="13477813" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a211628_620923"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 12:11 PDT" data-time="1531854671">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="13477813">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c20">comment #20</a>)
<span class="quote">&gt; &gt; We could but IMO that would be too much work (initial and maintenance) for a
&gt; &gt; feature that less than 1% of users use.
&gt; Too bad... well, I guess people being critical about safety use something
&gt; external like keepass and the ones not critical about it... well, they just
&gt; prefer the ease of it.
&gt; Anyways, thanks for implementing it.
&gt; 
&gt; I'd like to set out a little blog post on this topic and the workaround.
&gt; Seeing the timeline, I'm assuming that's okay to do that soonish?</span >

Please wait until the bug has been fixed on the release channel so that users are no longer affected. At that point I'm not sure it would be useful to blog about… it would only help ESR users who changed/enabled a MP since ESR60.

Moving this to PSM since that's where the original bug was and it sounds like this will get fixed in security code, not Toolkit.

(In reply to [:keeler] (use needinfo) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c17">comment #17</a>)
<span class="quote">&gt; (In reply to Matthew N. [:MattN] (PM if requests are blocking you) from
&gt; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c16">comment #16</a>)
&gt; &gt; I think we should do the following:
&gt; &gt; a) Delete key3.db (if it exists) when a master password is changed/enabled.
&gt; &gt; That solves this bug and should be backported to ESR.
&gt; 
&gt; This seems reasonable (although there's the issue of if a user switches back
&gt; to an older ESR, things like saved passwords and imported certificates might
&gt; not work).</span >

Yeah, though I think if a user is changing or setting a MP then they would prefer their data was no longer accessible without a MP.

<span class="quote">&gt; &gt; b) Delete all of the old files (key3.db, cert8.db, and secmod.db) for the
&gt; &gt; next ESR (to support downgrades between ESR) in an upcoming release… I don't
&gt; &gt; think we need to rush on this. Should we only do this for Firefox (e.g.
&gt; &gt; migrateUI) or do we another another place to do this that won't incur a
&gt; &gt; startup perf hit from file I/O every startup? Or does this need to be in PSM
&gt; &gt; for all PSM consumers? We should at least notify downstream consumers about
&gt; &gt; this issue I guess? This affects who should implement it.
&gt; 
&gt; I mean, we're already accessing all of these files synchronously at startup
&gt; anyway right now (see <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - NSS should be initialized off main thread"
   href="/show_bug.cgi?id=1370516">bug 1370516</a>), so it probably won't be that much more
&gt; of a performance hit.
&gt; 
&gt; We should at least mention this to the NSS team. Their stance may be &quot;yes,
&gt; definitely the old DBs should be deleted&quot; or it may be &quot;no, we can't risk
&gt; the loss of user data&quot;. That said, I think Firefox may need/want to make a
&gt; different decision than NSS does on this.</span >

Who is going to reach out to them? I'm not sure of the right people to talk to…

<span class="quote">&gt; &gt; (In reply to :Gijs (he/him) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c13">comment #13</a>)
&gt; &gt; &gt; Would it be easy to delete the old file as part of that at this point?
&gt; &gt; 
&gt; &gt; That will break the downgrade case so I don't think it's the best idea.
&gt; &gt; 
&gt; &gt; &gt; And should we backport any such
&gt; &gt; &gt; change to esr60 to avoid this issue persisting on ESR for another year or so?
&gt; &gt; 
&gt; &gt; I think it would be safest to only backport a fix to delete key3.db if a
&gt; &gt; master password is changed/enabled. This won't help ESR users who already
&gt; &gt; make a MP change after ESR60 got installed but since that is still very new
&gt; &gt; we probably have time to fix this before may people are affected since less
&gt; &gt; than 1% of users use a MP.
&gt; &gt; 
&gt; &gt; David, what do you think about this proposal and where do you think we
&gt; &gt; should implement parts (a) and (b) in the code since that affects what team
&gt; &gt; implements it and which component this should end up in.
&gt; 
&gt; I think doing both a and b sounds good. There is already some code in
&gt; nsNSSComponent that does a similar thing [2], so maybe it makes sense to put
&gt; both there.
&gt; 
&gt; [2]
&gt; <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/">https://searchfox.org/mozilla-central/rev/</a>
&gt; b0275bc977ad7fda615ef34b822bba938f2b16fd/security/manager/ssl/nsNSSComponent.
&gt; cpp#1570</span >

David, who should get this prioritized and likely find an owner? I think we should fix this sooner rather than later so we don't need to blog about it and cause a press cycle.</pre><div class="activity"><div class="change">Group: toolkit-core-security &rarr; core-security</div><div class="change">Component: Password Manager &rarr; Security: PSM</div><div class="change">Product: Toolkit &rarr; Core</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="13478129" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a211628_620923"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a211628_620923"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 14:20 PDT" data-time="1531862433">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="13478129">As a final (and completely off-topic) note: thanks to you guys! It was an honour being amongst you guys. I really appreciate all the work you're doing. I was impressed of how quick the response time on this was, even with it being in the weekend!</pre></div><div class="change-set" id="a305215_349244"><div class="change" id="aa305215_349244">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a305215_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_349244" id="a305215_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a305215_349244"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a305215_349244">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a305215_349244">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 14:33 PDT" data-time="1531863204">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: nobody &rarr; dkeeler</div><div class="change">Priority: -- &rarr; P1</div><div class="change">Whiteboard: [psm-assigned]</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="13478142" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a305215_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a305215_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 14:35 PDT" data-time="1531863315">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8992768"
         class="attachment"
         data-id="8992768" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D2202-url.txt">
      <meta itemprop="contentSize" content="46">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8992768" itemprop="contentUrl">
        <span id="att-8992768-description" itemprop="description">bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn</span></a>
        — <a href="attachment.cgi?id=8992768&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c24"><div class="comment" data-id="13478143" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a305215_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a305215_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 14:36 PDT" data-time="1531863417">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="13478143">Matt - let me know if that's the behavior you were expecting (I would have asked for review from you, but I don't know what your phabricator username is).</pre><div class="activity"><div class="change">Flags: needinfo?(MattN+bmo)</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="13478166" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a305215_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a305215_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-17 14:45 PDT" data-time="1531863946">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="13478166">(In reply to Matthew N. [:MattN] (PM if requests are blocking you) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c21">comment #21</a>)
<span class="quote">&gt; &gt; We should at least mention this to the NSS team. Their stance may be &quot;yes,
&gt; &gt; definitely the old DBs should be deleted&quot; or it may be &quot;no, we can't risk
&gt; &gt; the loss of user data&quot;. That said, I think Firefox may need/want to make a
&gt; &gt; different decision than NSS does on this.
&gt; 
&gt; Who is going to reach out to them? I'm not sure of the right people to talk
&gt; to…</span >

I filed <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - upgrading key database from dbm to sqlite leaves behind old database (what happens if the user protects the new database with a password/pin?)"
   href="/show_bug.cgi?id=1476434">bug 1476434</a>.</pre></div><div class="change-set" id="c26"><div class="comment" data-id="13479137" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_600971" id="a305215_349244"><img src="https://secure.gravatar.com/avatar/a088418052679d9583556d277e6774ee?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_600971" id="a305215_349244"><a class="email " href="/user_profile?user_id=600971" > <span class="fna">Phabricator Automation</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-18 03:10 PDT" data-time="1531908611">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="13479137">Comment on <span class=""><a href="/attachment.cgi?id=8992768" name="attach_8992768" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">attachment 8992768</a> <a href="/attachment.cgi?id=8992768&amp;action=edit" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">[details]</a></span>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775">bug 1475775</a> - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn

Franziskus Kiefer [:fkiefer or :franziskus] has approved the revision.

<a rel="nofollow" href="https://phabricator.services.mozilla.com/D2202">https://phabricator.services.mozilla.com/D2202</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8992768&amp;action=edit"
           title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn"
           class=""
        >Attachment #8992768</a> -
        Flags: review+</div></div></div><div class="change-set" id="c27"><div class="comment" data-id="13481682" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a305215_349244"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a305215_349244"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-19 00:41 PDT" data-time="1531986097">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="13481682">Sorry, I've been busy… I'll try look tomorrow.

(In reply to [:keeler] (use needinfo) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c25">comment #25</a>)
<span class="quote">&gt; (In reply to Matthew N. [:MattN] (PM if requests are blocking you) from
&gt; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c21">comment #21</a>)
&gt; &gt; &gt; We should at least mention this to the NSS team. Their stance may be &quot;yes,
&gt; &gt; &gt; definitely the old DBs should be deleted&quot; or it may be &quot;no, we can't risk
&gt; &gt; &gt; the loss of user data&quot;. That said, I think Firefox may need/want to make a
&gt; &gt; &gt; different decision than NSS does on this.
&gt; &gt; 
&gt; &gt; Who is going to reach out to them? I'm not sure of the right people to talk
&gt; &gt; to…
&gt; 
&gt; I filed <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - upgrading key database from dbm to sqlite leaves behind old database (what happens if the user protects the new database with a password/pin?)"
   href="/show_bug.cgi?id=1476434">bug 1476434</a>.</span >

FYI I can't access that bug but I also don't know if it matters.</pre></div><div class="change-set" id="c28"><div class="comment" data-id="13482952" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a305215_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a305215_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-19 09:40 PDT" data-time="1532018421">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="13482952">I cc'd you - in any case it's basically this bug but specific to NSS.</pre></div><div class="change-set" id="a464294_1689"><div class="change" id="aa464294_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a464294_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a464294_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a464294_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a464294_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a464294_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-19 10:44 PDT" data-time="1532022283">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-low&amp;resolution=---">sec-low</a></div></div></div><div class="change-set" id="c29"><div class="comment" data-id="13483705" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_600971" id="a464294_1689"><img src="https://secure.gravatar.com/avatar/a088418052679d9583556d277e6774ee?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_600971" id="a464294_1689"><a class="email " href="/user_profile?user_id=600971" > <span class="fna">Phabricator Automation</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-19 14:24 PDT" data-time="1532035453">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="13483705">Comment on <span class=""><a href="/attachment.cgi?id=8992768" name="attach_8992768" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">attachment 8992768</a> <a href="/attachment.cgi?id=8992768&amp;action=edit" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">[details]</a></span>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775">bug 1475775</a> - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn

Matthew N. [:MattN] (PM if requests are blocking you) has approved the revision.

<a rel="nofollow" href="https://phabricator.services.mozilla.com/D2202">https://phabricator.services.mozilla.com/D2202</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8992768&amp;action=edit"
           title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn"
           class=""
        >Attachment #8992768</a> -
        Flags: review+</div></div></div><div class="change-set" id="a477501_305228"><div class="change" id="aa477501_305228">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a477501_305228"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_305228" id="a477501_305228"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a477501_305228"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a477501_305228">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a477501_305228">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-19 14:24 PDT" data-time="1532035490">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(MattN+bmo)</span></div></div></div><div class="change-set" id="a547972_1689"><div class="change" id="aa547972_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a547972_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a547972_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a547972_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a547972_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a547972_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-20 09:59 PDT" data-time="1532105961">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: core-security &rarr; crypto-core-security</div></div></div><div class="change-set" id="c30"><div class="comment" data-id="13495112" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a547972_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a547972_1689"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-24 10:21 PDT" data-time="1532452869">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="13495112">Thanks for the reviews!
<a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=8419bd0fc4664db6b43aaeaf09adace6908fa17c">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=8419bd0fc4664db6b43aaeaf09adace6908fa17c</a></pre></div><div class="change-set" id="c31"><div class="comment" data-id="13495191" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a547972_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a547972_1689"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-24 10:43 PDT" data-time="1532454189">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="13495191"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/26ac31d53e50217dff8829e6d9bae18c7e36b812">https://hg.mozilla.org/integration/mozilla-inbound/rev/26ac31d53e50217dff8829e6d9bae18c7e36b812</a></pre></div><div class="change-set" id="c32"><div class="comment" data-id="13498257" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a547972_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a547972_1689"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-25 07:25 PDT" data-time="1532528715">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="13498257"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/26ac31d53e50">https://hg.mozilla.org/mozilla-central/rev/26ac31d53e50</a></pre><div class="activity"><div class="change">Group: crypto-core-security &rarr; core-security-release</div><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2018-07-14 02:50 PDT" data-time="1531561842">3 years ago</span> &rarr; <span class="rel-time" title="2018-07-25 07:25 PDT" data-time="1532528715">3 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox63&amp;o1=isnotempty">status-firefox63</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox63&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox63&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla63</div></div></div><div class="change-set" id="a1124929_488993"><div class="change" id="aa1124929_488993">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_488993" id="a1124929_488993"><img src="https://secure.gravatar.com/avatar/42f2a9436bbaefa7e0028e214f2b9350?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_488993" id="a1124929_488993"><a class="email " href="/user_profile?user_id=488993" > <span class="fna">Andrei Vaida [:avaida]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1124929_488993"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1124929_488993">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a1124929_488993">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-27 02:15 PDT" data-time="1532682918">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify-</div><div class="change">Whiteboard: [psm-assigned] &rarr; [psm-assigned][post-critsmash-triage]</div></div></div><div class="change-set" id="c33"><div class="comment" data-id="13526135" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1124929_488993"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a1124929_488993"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-06 17:15 PDT" data-time="1533600924">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="13526135">This grafts cleanly to Beta. Is it worth considering for uplift?</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">Flags: needinfo?(dkeeler)</div><div class="change">Flags: in-testsuite+</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="13527980" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1124929_488993"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1124929_488993"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-07 11:10 PDT" data-time="1533665420">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="13527980">Comment on <span class=""><a href="/attachment.cgi?id=8992768" name="attach_8992768" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">attachment 8992768</a> <a href="/attachment.cgi?id=8992768&amp;action=edit" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">[details]</a></span>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775">bug 1475775</a> - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn

Approval Request Comment
[Feature/Bug causing the regression]: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - switch Mozilla to use the cert9+key4 (aka sql) database file format"
   href="/show_bug.cgi?id=783994">bug 783994</a>
[User impact if declined]: If a user has saved passwords but hadn't set a master password before upgrading to Firefox 58, and then subsequently sets a master password, it is possible to recover the user's saved passwords without knowing their master password. This is probably fairly rare, though - the vast majority (99%) of users don't set a master password ever.
[Is this code covered by automated tests?]: yes
[Has the fix been verified in Nightly?]: n/a
[Needs manual test from QE? If yes, steps to reproduce]: no
[List of other uplifts needed for the feature/fix]: none
[Is the change risky?]: not very
[Why is the change risky/not risky?]: the fix we went with was to check for and remove the old key database if the user has a master password set. Since most users don't have a password, this is a no-op for most users.
[String changes made/needed]: none</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dkeeler)</span></div><div class="change">
        <a href="/attachment.cgi?id=8992768&amp;action=edit"
           title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn"
           class=""
        >Attachment #8992768</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c35"><div class="comment" data-id="13529770" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a1124929_488993"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a1124929_488993"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-08 05:03 PDT" data-time="1533729838">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="13529770">Comment on <span class=""><a href="/attachment.cgi?id=8992768" name="attach_8992768" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">attachment 8992768</a> <a href="/attachment.cgi?id=8992768&amp;action=edit" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">[details]</a></span>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775">bug 1475775</a> - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn

deleting old unprotected nss db if we have set a password; let's get this in 62.0b16</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8992768&amp;action=edit"
           title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn"
           class=""
        >Attachment #8992768</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="13529821" data-no="36"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1124929_488993"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a1124929_488993"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-08 05:12 PDT" data-time="1533730364">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="13529821"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-beta/rev/1e05e8939a18">https://hg.mozilla.org/releases/mozilla-beta/rev/1e05e8939a18</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox62&amp;o1=isnotempty">status-firefox62</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox62&amp;o1=equals&amp;v1=fix-optional">fix-optional</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox62&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a3230761_280903"><div class="change" id="aa3230761_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a3230761_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a3230761_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3230761_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3230761_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a3230761_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-20 11:12 PDT" data-time="1534788750">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [psm-assigned][post-critsmash-triage] &rarr; [psm-assigned][post-critsmash-triage][adv-main62+]</div></div></div><div class="change-set" id="a3335960_280903"><div class="change" id="aa3335960_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a3335960_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a3335960_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3335960_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3335960_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a3335960_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-21 16:25 PDT" data-time="1534893949">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2018-12383</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="13568196" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a3335960_280903"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a3335960_280903"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-24 01:01 PDT" data-time="1535097685">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-37" data-comment-id="13568196">Just a small privacy question... as soon as this bug gets published, could someone please remove the TREE list in the feedback (<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c9">comment 9</a>), as it discloses quite some personal information about my account (e.g. what password manager I'm using and sites I seem to have visited recently).

Thanks,
Jurgen</pre></div><div class="change-set" id="c38"><div class="comment" data-id="13568497" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a3335960_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a3335960_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-24 03:47 PDT" data-time="1535107661">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="13568497">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c37">comment #37</a>)
<span class="quote">&gt; Just a small privacy question... as soon as this bug gets published, could
&gt; someone please remove the TREE list in the feedback (<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c9">comment 9</a>), as it
&gt; discloses quite some personal information about my account (e.g. what
&gt; password manager I'm using and sites I seem to have visited recently).
&gt; 
&gt; Thanks,
&gt; Jurgen</span >

We can't delete comments on bugzilla, but we can mark them private (meaning they'll only be visible to people who have security clearance on bugzilla). I'll do this pre-emptively now so it doesn't get forgotten.</pre></div><div class="change-set" id="c39"><div class="comment" data-id="13569462" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a3335960_280903"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a3335960_280903"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-08-24 11:03 PDT" data-time="1535133837">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-39" data-comment-id="13569462">Thanks!</pre></div><div class="change-set" id="a4709181_1689"><div class="change" id="aa4709181_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a4709181_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a4709181_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4709181_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4709181_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a4709181_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-06 13:52 PDT" data-time="1536267170">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div class="change-set" id="a5471609_159069"><div class="change" id="aa5471609_159069">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a5471609_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5471609_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5471609_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a5471609_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-15 09:39 PDT" data-time="1537029598">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Duplicate of this bug: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - [FG-VD-18-139] Mozilla Firefox Authentication Bypass Vulnerability Notification"
   href="/show_bug.cgi?id=1491482">1491482</a></div></div></div><div class="change-set" id="c41"><div class="comment" data-id="13617207" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a5471609_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-15 09:41 PDT" data-time="1537029683">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="13617207">Matt, is there a bug on file to make ESR60 delete key3.db if/when the user sets a MP where one was not previously set?</pre><div class="activity"><div class="change">Flags: needinfo?(MattN+bmo)</div></div></div><div class="change-set" id="c42"><div class="comment" data-id="13617364" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a5471609_159069"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-15 12:26 PDT" data-time="1537039618">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="13617364">IIUC, that would be doing what this bug did but on ESR60. IMO this should have been considered for esr60 but RyanVM marked it as wontfix in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c33">comment 33</a> but I'm not sure what the rationale was. I don't think we need a new bug… we can request uplift here.

<span class="quote">&gt; status-firefox-esr60: affected → wontfix</span ></pre><div class="activity"><div class="change">Flags: needinfo?(MattN+bmo) &rarr; needinfo?(ryanvm)</div></div></div><div class="change-set" id="c43"><div class="comment" data-id="13617366" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a5471609_159069"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-15 12:30 PDT" data-time="1537039855">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="13617366">We don't normally backport sec-low bugs to ESR releases. If you feel strongly that we should consider doing so in this bug, feel free to nominate the patch and make your case.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ryanvm)</span></div></div></div><div class="change-set" id="c44"><div class="comment" data-id="13617395" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_620923" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/652b8cee8a323b62d2285e9ae1be5b41?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_620923" id="a5471609_159069"><a class="email " href="/user_profile?user_id=620923" > <span class="fna">jurgen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-15 12:56 PDT" data-time="1537041406">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="13617395">Given the relative ease of resolution and the impact for people affected (it is really REALLY simple to get those passwords) - I thought especially in an ESR, which people tend to use on security centric distros like Kali Linux and Parrot OS ... this feels like a critical feature (especially since the implementation of the crypto is really solid) to end up being cheated about.

The only reason for the low CVE rating, is the judgement call that the MP is a rarely used feature. This kind of behavior will consolidate people into not using it (as it appears to be not reliable). So if you yourself believe that using the MP is a good thing, you should agree that it being rock solid is not a detail.

Not sure as how or where to nominate the patch, but I really want to make a case here. Otherwise you could as well just leave out that feature (since only less than 1% of the users use it) and recommend people use an external password manager.</pre></div><div class="change-set" id="c45"><div class="comment" data-id="13618228" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a5471609_159069"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-16 19:36 PDT" data-time="1537151803">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="13618228">(In reply to jurgen from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c44">comment #44</a>)
<span class="quote">&gt; it is really REALLY simple to get those passwords</span >

How so? People would need local system access and to be logged into the account in question. This is not a drive by web exploit that can be done by a malicious site. This requires malware or your local account to be hacked by someone.

<span class="quote">&gt; - I thought especially in an
&gt; ESR, which people tend to use on security centric distros like Kali Linux
&gt; and Parrot OS ... this feels like a critical feature (especially since the
&gt; implementation of the crypto is really solid) to end up being cheated about.</span >

 Are those people likely to have a third party access their system or have a vulnerability that gives local file access to their accounts? Your example is security centric distros so this seems unlikely.

As a general rule, we don't backport sec-low rated issues to ESR branches. Ryan's point is that if you or someone makes a patch that applies cleanly to ESR60 and nominates the patch for acceptance, he's willing to listen to an argument to apply it.</pre></div><div class="change-set" id="c46"><div class="comment" data-id="13621102" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a5471609_159069"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-17 10:42 PDT" data-time="1537206165">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="13621102">Setting the flags to actually renominate per <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c44">comment 44</a>.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=wontfix">wontfix</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-low&amp;resolution=---">sec-low</a> &rarr; <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a></div></div></div><div class="change-set" id="c47"><div class="comment" data-id="13621124" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a5471609_159069"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_305228" id="a5471609_159069"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-17 10:50 PDT" data-time="1537206653">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="13621124">We shouldn't just consider this for nomination from the security perspective but also take into account that it's a form of regression that the Master Password can be bypassed so easily.</pre></div><div class="change-set" id="c48"><div class="comment" data-id="13624088" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a5471609_159069"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a5471609_159069"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-18 11:58 PDT" data-time="1537297096">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-48" data-comment-id="13624088">Comment on <span class=""><a href="/attachment.cgi?id=8992768" name="attach_8992768" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">attachment 8992768</a> <a href="/attachment.cgi?id=8992768&amp;action=edit" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">[details]</a></span>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775">bug 1475775</a> - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn

[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration: this is a pretty easy way for users to think they've encrypted their passwords when in fact there's a plain-text copy of the encryption key sitting in their profile directory, which is not a great situation. We've already had one duplicate filed on this.
User impact if declined: users may be surprised to find that their passwords can be decrypted when they thought they had password-protected them.
Fix Landed on Version: 63, uplifted to 62
Risk to taking this patch (and alternatives if risky): fairly low - it seems to be working without issue so far
String or UUID changes made by this patch: none

See <a rel="nofollow" href="https://wiki.mozilla.org/Release_Management/ESR_Landing_Process">https://wiki.mozilla.org/Release_Management/ESR_Landing_Process</a> for more info.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8992768&amp;action=edit"
           title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn"
           class=""
        >Attachment #8992768</a> -
        Flags: approval-mozilla-esr60?</div></div></div><div class="change-set" id="a5759970_75935"><div class="change" id="aa5759970_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a5759970_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a5759970_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5759970_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5759970_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a5759970_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-18 17:45 PDT" data-time="1537317959">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=62%2B">62+</a></div></div></div><div class="change-set" id="c49"><div class="comment" data-id="13624967" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a5759970_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a5759970_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-18 17:46 PDT" data-time="1537317973">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-49" data-comment-id="13624967">Comment on <span class=""><a href="/attachment.cgi?id=8992768" name="attach_8992768" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">attachment 8992768</a> <a href="/attachment.cgi?id=8992768&amp;action=edit" title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn">[details]</a></span>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775">bug 1475775</a> - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn

Approved for ESR 60.2.1.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8992768&amp;action=edit"
           title="bug 1475775 - clean up old NSS DB file after upgrade if necessary r?franziskus,mattn"
           class=""
        >Attachment #8992768</a> -
        Flags: approval-mozilla-esr60? &rarr; approval-mozilla-esr60+</div></div></div><div class="change-set" id="c50"><div class="comment" data-id="13624994" data-no="50"
       data-tags="bugherder uplift">
    
    <table class="layout-table change-head " id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a5759970_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a5759970_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-18 18:13 PDT" data-time="1537319582">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags"><span class="comment-tag">bugherder</span><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-50" data-comment-id="13624994"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-esr60/rev/300efdbc9fe1">https://hg.mozilla.org/releases/mozilla-esr60/rev/300efdbc9fe1</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a6411754_420453"><div class="change" id="aa6411754_420453">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_420453" id="a6411754_420453"><img src="https://secure.gravatar.com/avatar/16d4d4a441724e006b342ac12507caef?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_420453" id="a6411754_420453"><a class="email " href="/user_profile?user_id=420453" > <span class="fna">Marco Castelluccio [:marco]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6411754_420453"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6411754_420453">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a6411754_420453">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-09-26 06:49 PDT" data-time="1537969743">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=regression&amp;resolution=---">regression</a></div></div></div><div class="change-set" id="c51"><div class="comment" data-id="13659859" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22401" id="a6411754_420453"><img src="https://secure.gravatar.com/avatar/a7a0ffb71817cd2d7f6817c03d9ac33e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_22401" id="a6411754_420453"><a class="email " href="/user_profile?user_id=22401" > <span class="fna">Paul Stauffer</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-03 09:49 PDT" data-time="1538585397">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="13659859">It appears that this fix caused data loss for one of my users.  User is on CentOS 7, and was upgraded from 60.2.0 ESR to 60.2.1 ESR on Sep 29.  She has a very old profile dir, has a master password set, and reports having last changed the master password 5-6 years ago.  After the update to 60.2.1 ESR, the next time she opened Firefox, she noted that it no longer prompted her for her master password, the &quot;Use a master password&quot; option in Preferences was no longer checked, and all of her saved logins are gone.  Instead there is now just a single entry for Site: chrome://FirefoxAccounts (Firefox Accounts credentials), with a long hexadecimal username, and Password: {&quot;version&quot;:1,&quot;accountData&quot;:{}}.

We do have backups of her home directory from before the upgrade, which we could restore data from, but I am unclear on how to proceed in this case.  If I simply replace her ~/.mozilla with the older copy and relaunch Firefox, on the first run her MP is back and her saved logins are present, but after closing and restarting Firefox they're gone again.  Using the old ~/.mozilla but manually deleting key3.db before launching Firefox again results in no MP and no saved logins.

FWIW, all of the following files were present in her profile directory prior to the upgrade:
# ls -l key3.db secmod.db cert8.db signons.sqlite logins.json
-rw-------. 1 500 500 688128 Sep  4 08:23 cert8.db
-rw-------. 1 500 500  16384 Sep  4 08:23 key3.db
-rw-------. 1 500 500  82886 Sep 26 11:01 logins.json
-rw-------. 1 500 500  16384 Oct 12  2014 secmod.db
-rw-r--r--. 1 500 500 327680 May 11  2015 signons.sqlite

From this and reading the thread above, my interpretation is that her saved logins were successfully migrated from signons.sqlite to logins.json at some point in the past (2015?), but her MP was still saved in an old format (key3.db? secmod.db?) and never migrated to the new format.  Does that interpretation sound correct?  Given this scenario, how can I go about restoring this user's saved login data, and/or converting her MP to the new format?</pre></div><div class="change-set" id="a7027476_75935"><div class="change" id="aa7027476_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a7027476_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a7027476_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7027476_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7027476_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a7027476_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-03 09:51 PDT" data-time="1538585465">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(dkeeler)</div></div></div><div class="change-set" id="c52"><div class="comment" data-id="13660405" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a7027476_75935"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a7027476_75935"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-03 13:26 PDT" data-time="1538598371">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="13660405">Given a directory &quot;dir&quot; containing cert8.db, key3.db, and secmod.db (and not cert9.db, key4.db, or pkcs11.txt), try running:

certutil -K -X -d dir

You should be asked for the password for that database. (It might say &quot;no keys found&quot;, but you can ignore that.)
If that succeeds, cert9.db, key4.db, and pkcs11.txt should have been created in that directory. Move those to the Firefox profile and remove the old cert8.db, key3.db, and secmod.db files from the Firefox profile. (This is assuming your version of NSS is recent enough - from <a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.35_release_notes">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.35_release_notes</a> I think 3.35 should be sufficient).</pre><div class="activity"><div class="change">Flags: needinfo?(dkeeler) &rarr; needinfo?(paulds)</div></div></div><div class="change-set" id="c53"><div class="comment" data-id="13660477" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22401" id="a7027476_75935"><img src="https://secure.gravatar.com/avatar/a7a0ffb71817cd2d7f6817c03d9ac33e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_22401" id="a7027476_75935"><a class="email " href="/user_profile?user_id=22401" > <span class="fna">Paul Stauffer</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-03 13:54 PDT" data-time="1538600081">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-53" data-comment-id="13660477">That certutil command does prompt for the password, and does say &quot;no keys found&quot;, but it does not create any of the files you indicated.  I've looked at the man page for certutil, and it's not clear to me why those options would convert anything or create new files; can you confirm this was the syntax you intended?

laptop:~/.mozilla/firefox/loejs653.default$ ls cert*db key* secmod.db pkcs11.txt
ls: cannot access pkcs11.txt: No such file or directory
cert8.db  key3.db  secmod.db
laptop:~/.mozilla/firefox/loejs653.default$ cd ..
laptop:~/.mozilla/firefox$ certutil -K -X -d loejs653.default/
certutil: Checking token &quot;NSS Certificate DB&quot; in slot &quot;NSS User Private Key and Certificate Services&quot;
Enter Password or Pin for &quot;NSS Certificate DB&quot;:
certutil: no keys found
laptop:~/.mozilla/firefox$ cd loejs653.default/
laptop:~/.mozilla/firefox/loejs653.default$ ls cert*db key* secmod.db pkcs11.txt
ls: cannot access pkcs11.txt: No such file or directory
cert8.db  key3.db  secmod.db

FWIW, this is with nss-tools-3.36.0-7.el7_5.</pre><div class="activity"><div class="change">Flags: needinfo?(paulds) &rarr; needinfo?(dkeeler)</div></div></div><div class="change-set" id="c54"><div class="comment" data-id="13660522" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a7027476_75935"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a7027476_75935"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-03 14:13 PDT" data-time="1538601237">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="13660522">Yes, that's the intended syntax. Newer versions of NSS *should* automatically upgrade the old dbm databases to sqlite when they're opened read/write (which is what -X should do). Maybe try with a newer version of NSS? (I'm using nss-3.39.0-1.0.fc28)</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dkeeler)</span></div></div></div><div class="change-set" id="c55"><div class="comment" data-id="13661122" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_85921" id="a7027476_75935"><img src="https://secure.gravatar.com/avatar/06470b43d571382e45810c0381de7331?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_85921" id="a7027476_75935"><a class="email " href="/user_profile?user_id=85921" > <span class="fna">Orion Poplawski</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-03 18:14 PDT" data-time="1538615689">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="13661122">On EL7 in order to get NSS/certutil to create the new sql databases you need to do:

export NSS_DEFAULT_DB_TYPE=sql

but I still haven't figured out how to migrate a pre 60.2.1 profile - though I may be working with a bad initial profile.</pre></div><div class="change-set" id="c56"><div class="comment" data-id="13665246" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_625642" id="a7027476_75935"><img src="https://secure.gravatar.com/avatar/f2ffcfc06a81814f75c7834383441944?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_625642" id="a7027476_75935"><a class="email " href="/user_profile?user_id=625642" > <span class="fna">Phil Durbin</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-05 08:51 PDT" data-time="1538754693">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-56" data-comment-id="13665246">I am in the same situation as <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c51">Comment 51</a> ; I have tried the solution suggested in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c53">comment 53</a> using export NSS_DEFAULT_DB_TYPE=sql suggested in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c55">comment 55</a>. That created the files expected.I copied the new files: key4.db pkcs11.txt cert9.db into place  and deleted the old ones  key3.db secmod.db cert8.db. On start up that worked but (after trial and error) 
I found that firefox is creating key3.db cert8.db and secmod.db files when I add a new entry to the password manager and exit. Then I have to delete the newly created  key3.db cert8.db and secmod.db files to get things to work.</pre></div><div class="change-set" id="c57"><div class="comment" data-id="13665339" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_625642" id="a7027476_75935"><img src="https://secure.gravatar.com/avatar/f2ffcfc06a81814f75c7834383441944?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_625642" id="a7027476_75935"><a class="email " href="/user_profile?user_id=625642" > <span class="fna">Phil Durbin</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-05 09:29 PDT" data-time="1538756952">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-57" data-comment-id="13665339">Turns out the trigger to make it work after following the instructions is to have the env variable NSS_DEFAULT_DB_TYPE=sql set before exucuting firefox .If it is not set it keeps recreating key3.db cert8.db and secmod.db files . Adding a new entry to the password manager has nothing to do with it.</pre></div><div class="change-set" id="c58"><div class="comment" data-id="13672346" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_22401" id="a7027476_75935"><img src="https://secure.gravatar.com/avatar/a7a0ffb71817cd2d7f6817c03d9ac33e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_22401" id="a7027476_75935"><a class="email " href="/user_profile?user_id=22401" > <span class="fna">Paul Stauffer</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-09 08:33 PDT" data-time="1539099196">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-58" data-comment-id="13672346">Confirming that setting NSS_DEFAULT_DB_TYPE=sql before running certutil seems to have worked.  New files were generated; removed old files.  Based on Phil's notes in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c56">comment 56</a> and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - key3.db encryption key remains on disk from pre-Firefox-58 (becomes issue if adding a master password post-58)"
   href="/show_bug.cgi?id=1475775#c57">comment 57</a> above, also added &quot;export NSS_DEFAULT_DB_TYPE=sql&quot; to user's .bash_profile and had her log in again.  Running firefox now preserves the MP, saved logins remain accessible, and the old versions of the files are not recreated.</pre></div><div class="change-set" id="a8427688_305228"><div class="change" id="aa8427688_305228">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_305228" id="a8427688_305228"><img src="https://secure.gravatar.com/avatar/8c3bddad3fd0f45662210771f8f0ad15?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_305228" id="a8427688_305228"><a class="email " href="/user_profile?user_id=305228" > <span class="fna">Matthew N. [:MattN]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8427688_305228"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8427688_305228">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a8427688_305228">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-19 14:47 PDT" data-time="1539985677">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Firefox Loses Master Password on (RedHat) systems forcing usage of key3.db"
   href="/show_bug.cgi?id=1496736">1496736</a></div></div></div><div class="change-set" id="a12299885_36541"><div class="change" id="aa12299885_36541">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a12299885_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_36541" id="a12299885_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a12299885_36541"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a12299885_36541">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a12299885_36541">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-12-03 09:24 PST" data-time="1543857874">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Upgrading to Thunderbird 60.x from a berkeley DB based Profile to a sqlite one causes key data loss"
   href="/show_bug.cgi?id=1510212">1510212</a></div></div></div><div class="change-set" id="a29926310_36541"><div class="change" id="aa29926310_36541">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a29926310_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_36541" id="a29926310_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a29926310_36541"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a29926310_36541">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a29926310_36541">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-06-25 10:38 PDT" data-time="1561484299">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WONTFIX - NSS should delete key3.db after a successful migration to key4.db"
   href="/show_bug.cgi?id=1561368">1561368</a></div></div></div><div class="change-set" id="a46896449_5842"><div class="change" id="aa46896449_5842">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_5842" id="a46896449_5842"><img src="https://secure.gravatar.com/avatar/e9388eb9cf1a0eb509c4dc3686e66ca5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_5842" id="a46896449_5842"><a class="email " href="/user_profile?user_id=5842" > <span class="fna">Masatoshi Kimura [:emk]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a46896449_5842"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a46896449_5842">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1475775#a46896449_5842">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-07 19:33 PST" data-time="1578454438">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Firefox won't delete key3.db if the profile path contains non-ASCII string on Windows"
   href="/show_bug.cgi?id=1607652">1607652</a></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1475775&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>