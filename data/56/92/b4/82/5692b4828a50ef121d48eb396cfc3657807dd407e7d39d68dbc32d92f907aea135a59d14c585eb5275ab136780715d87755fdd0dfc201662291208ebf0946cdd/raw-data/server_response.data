<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/glance/+bug/1235378/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1235378 “[OSSA 2013-027] 'image_download' role in v2 causes...” : Bugs : Glance</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1235378" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1235378/bug.atom" title="Bug 1235378 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="If you enable the 'image_download' policy as follows:



 { 
    &quot;context_is_admin&quot;:  &quot;role:admin&quot;,
    &quot;download_image&quot;:  &quot;role:admin&quot;, &lt;&lt;&lt;
    &quot;default&quot;: &quot;&quot;,
    &quot;manage_image_cache&quot;: &quot;role:admin&quot;
 }

And attempt to download using the v2 api you get 200 rather than 403 (but, correctly, no data) 
and a stack trace on the server:

6234 DEBUG glance.api.policy [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Loaded policy rules: {u'contex..." />
      <meta property="og:description" content="If you enable the 'image_download' policy as follows:



 { 
    &quot;context_is_admin&quot;:  &quot;role:admin&quot;,
    &quot;download_image&quot;:  &quot;role:admin&quot;, &lt;&lt;&lt;
    &quot;default&quot;: &quot;&quot;,
    &quot;manage_image_cache&quot;: &quot;role:admin&quot;
 }

And attempt to download using the v2 api you get 200 rather than 403 (but, correctly, no data) 
and a stack trace on the server:

6234 DEBUG glance.api.policy [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Loaded policy rules: {u'contex..." />
    

    
    
      <meta property="og:title" content="Bug #1235378 “[OSSA 2013-027] 'image_download' role in v2 causes...” : Bugs : Glance" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1235378" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["api", "cache", "documentation", "domain-proxy", "gate", "i18n", "low-hanging-fruit", "metadef", "mitaka-backport-potential", "newton-backport-potential", "ocata-rc-potential", "ops", "scrubber", "security"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/glance/+bug/1235378/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/glance"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/355215744/glance-chipmunk-64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/glance">Glance</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/glance">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/glance">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/glance">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/glance">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/glance">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/glance">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    [OSSA 2013-027] 'image_download' role in v2 causes traceback
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1235378 reported by
      <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren</a>
      <time title="2013-10-04 17:37:49 UTC" datetime="2013-10-04T17:37:49.425626+00:00">on 2013-10-04</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">268</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 2 people</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary1477662">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/+bug/1235378/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1477662">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/glance">Glance</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/+bug/1235378/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/glance/+bug/1235378/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1477662">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~lzy-dev">Zhi Yan Liu</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/2013.2">Glance 2013.2 "havana"</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1477662">
     <td colspan="7"><form action="/glance/+bug/1235378/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance">Glance</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2013-10-04 17:37:49 UTC" datetime="2013-10-04T17:37:49.425626+00:00">2013-10-04</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2013-10-07 10:37:45 UTC" datetime="2013-10-07T10:37:45.817131+00:00">2013-10-07</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2013-10-05 02:55:16 UTC" datetime="2013-10-05T02:55:16.011041+00:00">2013-10-05</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2013-10-07 10:37:45 UTC" datetime="2013-10-07T10:37:45.817131+00:00">2013-10-07</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2013-10-10 12:13:10 UTC" datetime="2013-10-10T12:13:10.578469+00:00">2013-10-10</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="glance.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="glance.target.option.package" name="glance.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="glance.target.distribution" name="glance.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="glance.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="glance.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="glance.target.package"
                         name="glance.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;glance.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('glance.target.package');
              var select_menu = Y.DOM.byId('glance.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-glance-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_assign_me_button": false, "extra_no_results_message": null, "picker_type": "default", "selected_value_metadata": null, "remove_team_text": "Remove team", "selected_value": null, "step_title": "Search by name", "header": "Select a package", "vocabulary_filters": [], "show_create_team": false, "input_element": "glance.target.package", "assign_me_text": "Pick me", "remove_person_text": "Remove person", "show_remove_button": false, "vocabulary_name": "DistributionPackage", "show_widget_id": "show-widget-glance-target-package"};
        var show_widget_id = 'show-widget-glance-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="glance.target.option.product" name="glance.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="glance" id="glance.target.product"
                         name="glance.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;glance.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('glance.target.product');
              var select_menu = Y.DOM.byId('glance.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-glance-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_assign_me_button": false, "extra_no_results_message": null, "picker_type": "default", "selected_value_metadata": null, "remove_team_text": "Remove team", "selected_value": "glance", "step_title": "Search", "header": "Select a project", "vocabulary_filters": [], "show_create_team": false, "input_element": "glance.target.product", "assign_me_text": "Pick me", "remove_person_text": "Remove person", "show_remove_button": false, "vocabulary_name": "Product", "show_widget_id": "show-widget-glance-target-product"};
        var show_widget_id = 'show-widget-glance-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance.status" name="glance.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="glance.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Glance 2013.2
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance.assignee.assign_to_me" name="glance.assignee.option" value="glance.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="glance.assignee.assigned_to" name="glance.assignee.option" value="glance.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="glance.assignee.assigned_to">
              Zhi Yan Liu (lzy-dev)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance.comment_on_change" name="glance.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1482092">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/folsom/+bug/1235378/+editstatus">
        &#8203;
      </a>
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/glance/folsom">Folsom</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/folsom/+bug/1235378/+editstatus" style="float: left" class="value statusFIXCOMMITTED">Fix Committed</a>
          <a href="https://bugs.launchpad.net/glance/folsom/+bug/1235378/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1482092">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1482092">
     <td colspan="7"><form action="/glance/folsom/+bug/1235378/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance/folsom">Glance folsom</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2013-10-11 15:32:54 UTC" datetime="2013-10-11T15:32:54.945828+00:00">2013-10-11</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2013-10-11 15:33:01 UTC" datetime="2013-10-11T15:33:01.783779+00:00">2013-10-11</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2013-10-11 15:33:01 UTC" datetime="2013-10-11T15:33:01.783779+00:00">2013-10-11</time>
      </td>
    </tr>
    
  </table>
  <div class="field">
    
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_folsom.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_folsom.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance_folsom.status" name="glance_folsom.status" size="1" >
<option selected="selected" value="Fix Committed">Fix Committed</option>
</select>
</div>
<input name="glance_folsom.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_folsom.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="glance_folsom.assignee.assign_to_nobody" name="glance_folsom.assignee.option" value="glance_folsom.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_folsom.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance_folsom.assignee.assign_to_me" name="glance_folsom.assignee.option" value="glance_folsom.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_folsom.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance_folsom.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance_folsom.comment_on_change" name="glance_folsom.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1480390">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/grizzly/+bug/1235378/+editstatus">
        &#8203;
      </a>
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/glance/grizzly">Grizzly</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/grizzly/+bug/1235378/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/glance/grizzly/+bug/1235378/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1480390">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~stuart-mclaren">Stuart McLaren</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/2013.1.4">Glance 2013.1.4</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1480390">
     <td colspan="7"><form action="/glance/grizzly/+bug/1235378/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance/grizzly">Glance grizzly</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2013-10-09 16:10:47 UTC" datetime="2013-10-09T16:10:47.483916+00:00">2013-10-09</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2013-10-09 16:11:44 UTC" datetime="2013-10-09T16:11:44.760906+00:00">2013-10-09</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2013-10-17 18:57:31 UTC" datetime="2013-10-17T18:57:31.125464+00:00">2013-10-17</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2013-10-09 16:11:44 UTC" datetime="2013-10-09T16:11:44.760906+00:00">2013-10-09</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2013-10-17 18:58:36 UTC" datetime="2013-10-17T18:58:36.416662+00:00">2013-10-17</time>
      </td>
    </tr>
  </table>
  <div class="field">
    
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_grizzly.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_grizzly.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_grizzly.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance_grizzly.status" name="glance_grizzly.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="glance_grizzly.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Glance 2013.1.4
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_grizzly.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance_grizzly.assignee.assign_to_me" name="glance_grizzly.assignee.option" value="glance_grizzly.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_grizzly.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="glance_grizzly.assignee.assigned_to" name="glance_grizzly.assignee.option" value="glance_grizzly.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="glance_grizzly.assignee.assigned_to">
              Stuart McLaren (stuart-mclaren)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance_grizzly.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance_grizzly.comment_on_change" name="glance_grizzly.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1480389">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ossa/+bug/1235378/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1480389">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ossa/+bug/1235378/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ossa/+bug/1235378/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceMEDIUM">Medium</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1480389">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~ttx">Thierry Carrez</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1480389">
     <td colspan="7"><form action="/ossa/+bug/1235378/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ossa">OpenStack Security Advisory</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2013-10-09 16:10:07 UTC" datetime="2013-10-09T16:10:07.016416+00:00">2013-10-09</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2013-10-09 16:10:20 UTC" datetime="2013-10-09T16:10:20.835205+00:00">2013-10-09</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2013-10-11 13:43:05 UTC" datetime="2013-10-11T13:43:05.136347+00:00">2013-10-11</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2013-10-15 08:44:56 UTC" datetime="2013-10-15T08:44:56.142238+00:00">2013-10-15</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2013-10-22 15:31:41 UTC" datetime="2013-10-22T15:31:41.416098+00:00">2013-10-22</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ossa.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ossa.target.option.package" name="ossa.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ossa.target.distribution" name="ossa.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ossa.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ossa.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ossa.target.package"
                         name="ossa.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.package');
              var select_menu = Y.DOM.byId('ossa.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_assign_me_button": false, "extra_no_results_message": null, "picker_type": "default", "selected_value_metadata": null, "remove_team_text": "Remove team", "selected_value": null, "step_title": "Search by name", "header": "Select a package", "vocabulary_filters": [], "show_create_team": false, "input_element": "ossa.target.package", "assign_me_text": "Pick me", "remove_person_text": "Remove person", "show_remove_button": false, "vocabulary_name": "DistributionPackage", "show_widget_id": "show-widget-ossa-target-package"};
        var show_widget_id = 'show-widget-ossa-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ossa.target.option.product" name="ossa.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ossa" id="ossa.target.product"
                         name="ossa.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.product');
              var select_menu = Y.DOM.byId('ossa.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_assign_me_button": false, "extra_no_results_message": null, "picker_type": "default", "selected_value_metadata": null, "remove_team_text": "Remove team", "selected_value": "ossa", "step_title": "Search", "header": "Select a project", "vocabulary_filters": [], "show_create_team": false, "input_element": "ossa.target.product", "assign_me_text": "Pick me", "remove_person_text": "Remove person", "show_remove_button": false, "vocabulary_name": "Product", "show_widget_id": "show-widget-ossa-target-product"};
        var show_widget_id = 'show-widget-ossa-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ossa.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ossa.status" name="ossa.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ossa.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceMEDIUM">Medium</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ossa.assignee.assign_to_me" name="ossa.assignee.option" value="ossa.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ossa.assignee.assigned_to" name="ossa.assignee.option" value="ossa.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ossa.assignee.assigned_to">
              Thierry Carrez (ttx)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ossa.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ossa.comment_on_change" name="ossa.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/glance/+bug/1235378/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/glance/+bug/1235378/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/glance/+bug/1235378/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>If you enable the &#x27;image_download&#x27; policy as follows:</p>
<p>&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;context_<wbr />is_admin&quot;<wbr />:  &quot;role:admin&quot;,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;download_<wbr />image&quot;:  &quot;role:admin&quot;, &lt;&lt;&lt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;default&quot;: &quot;&quot;,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&quot;manage_<wbr />image_cache&quot;<wbr />: &quot;role:admin&quot;<br />
&nbsp;}</p>
<p>And attempt to download using the v2 api you get 200 rather than 403 (but, correctly, no data)<br />
and a stack trace on the server:</p>
<p>6234 DEBUG glance.api.policy [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] Loaded policy rules: {u&#x27;context_<wbr />is_admin&#x27;<wbr />: &#x27;role:admin&#x27;, u&#x27;download_image&#x27;: &#x27;role:admin&#x27;, u&#x27;default&#x27;: &#x27;@&#x27;, u&#x27;manage_<wbr />image_cache&#x27;<wbr />: &#x27;role:admin&#x27;}<br />
6234 DEBUG glance.image_cache [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] Tee&#x27;ing image &#x27;42c834df-<wbr />3b35-4982-<wbr />aed6-ffa4a44d37<wbr />78&#x27; into cache<br />
6234 DEBUG glance.api.policy [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] Loaded policy rules: {u&#x27;context_<wbr />is_admin&#x27;<wbr />: &#x27;role:admin&#x27;, u&#x27;download_image&#x27;: &#x27;role:admin&#x27;, u&#x27;default&#x27;: &#x27;@&#x27;, u&#x27;manage_<wbr />image_cache&#x27;<wbr />: &#x27;role:admin&#x27;}<br />
6234 DEBUG glance.<wbr />image_cache.<wbr />drivers.<wbr />sqlite [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] Fetch of cache file failed (You are not authorized to complete this action.), rolling back by moving &#x27;/opt/stack/<wbr />data/glance/<wbr />cache/incomplet<wbr />e/42c834df-<wbr />3b35-4982-<wbr />aed6-ffa4a44d37<wbr />78&#x27; to &#x27;/opt/stack/<wbr />data/glance/<wbr />cache/invalid/<wbr />42c834df-<wbr />3b35-4982-<wbr />aed6-ffa4a44d37<wbr />78&#x27;<br />
6234 ERROR glance.image_cache [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] You are not authorized to complete this action.<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache Traceback (most recent call last):<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />image_cache/<wbr />__init_<wbr />_.py&quot;, line 238, in cache_tee_iter<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     for chunk in image_iter:<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />notifier/<wbr />__init_<wbr />_.py&quot;, line 182, in get_data<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     for chunk in self.image.<wbr />get_data(<wbr />):<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />api/policy.<wbr />py&quot;, line 225, in get_data<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     self.policy.<wbr />enforce(<wbr />self.context, &#x27;download_image&#x27;, {})<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />api/policy.<wbr />py&quot;, line 135, in enforce<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     exception.<wbr />Forbidden, action=action)<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />api/policy.<wbr />py&quot;, line 123, in _check<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     return policy.check(rule, target, credentials, *args, **kwargs)<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />openstack/<wbr />common/<wbr />policy.<wbr />py&quot;, line 183, in check<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     raise exc(*args, **kwargs)<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache Forbidden: You are not authorized to complete this action.<br />
2013-10-04 17:34:47.678 6234 TRACE glance.image_cache<br />
6234 DEBUG eventlet.<wbr />wsgi.server [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] Traceback (most recent call last):<br />
&nbsp;&nbsp;File &quot;/usr/local/<wbr />lib/python2.<wbr />7/dist-<wbr />packages/<wbr />eventlet/<wbr />wsgi.py&quot;<wbr />, line 402, in handle_one_response<br />
&nbsp;&nbsp;&nbsp;&nbsp;for data in result:<br />
&nbsp;&nbsp;File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />image_cache/<wbr />__init_<wbr />_.py&quot;, line 238, in cache_tee_iter<br />
&nbsp;&nbsp;&nbsp;&nbsp;for chunk in image_iter:<br />
&nbsp;&nbsp;File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />notifier/<wbr />__init_<wbr />_.py&quot;, line 182, in get_data<br />
&nbsp;&nbsp;&nbsp;&nbsp;for chunk in self.image.<wbr />get_data(<wbr />):<br />
&nbsp;&nbsp;File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />api/policy.<wbr />py&quot;, line 225, in get_data<br />
&nbsp;&nbsp;&nbsp;&nbsp;self.<wbr />policy.<wbr />enforce(<wbr />self.context, &#x27;download_image&#x27;, {})<br />
&nbsp;&nbsp;File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />api/policy.<wbr />py&quot;, line 135, in enforce<br />
&nbsp;&nbsp;&nbsp;&nbsp;exception.<wbr />Forbidden, action=action)<br />
&nbsp;&nbsp;File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />api/policy.<wbr />py&quot;, line 123, in _check<br />
&nbsp;&nbsp;&nbsp;&nbsp;return policy.check(rule, target, credentials, *args, **kwargs)<br />
&nbsp;&nbsp;File &quot;/opt/stack/<wbr />glance/<wbr />glance/<wbr />openstack/<wbr />common/<wbr />policy.<wbr />py&quot;, line 183, in check<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise exc(*args, **kwargs)<br />
Forbidden: You are not authorized to complete this action.<br />
6234 DEBUG eventlet.<wbr />wsgi.server [acaf8321-<wbr />9f3c-439a-<wbr />8028-46921ea567<wbr />40 a9befd28bf70483<wbr />9b62aecbf6afacd<wbr />37 f6e065403d57444<wbr />aa973fc10c655de<wbr />dd] 10.6.249.22 - - [04/Oct/2013 17:34:47] &quot;GET /v2/images/<wbr />42c834df-<wbr />3b35-4982-<wbr />aed6-ffa4a44d37<wbr />78/file HTTP/1.1&quot; 200 0 0.048832</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            
          </span>
          <span id="tag-list">
          </span>
          <a href="+edit" title="Add tags" id="tags-trigger" class="sprite add">Add tags</a>
          
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          

            <div id="bug-branches">
              <h2>Related branches</h2>

              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/glance/quantal-security" class="sprite branch">lp:ubuntu/quantal-security/glance</a>
  
  
</div>



              
              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ubuntu-branches/ubuntu/quantal/glance/quantal-updates" class="sprite branch">lp:ubuntu/quantal-updates/glance</a>
  
  
</div>



              
              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ubuntu-branches/ubuntu/raring/glance/raring-security" class="sprite branch">lp:ubuntu/raring-security/glance</a>
  
  
</div>



              
            </div>
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2013-4428" title="OpenStack Image Registry and Delivery...">2013-4428</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
    
    <time title="2013-10-04 17:38:35 UTC" datetime="2013-10-04T17:38:35.749289+00:00">on 2013-10-04</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: havana-rc-potential
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-04T17:44:53.969369+00:00" title="2013-10-04 17:44:53 UTC">on 2013-10-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;m unlikely to be able to look at this in the short term, so if anyone else would like to pick it up feel free!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I'm unlikely to be able to look at this in the short term, so if anyone else would like to pick it up feel free!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>affects</b>:
      </td>
      <td>
        swift &#8594; glance
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
    
    <time title="2013-10-05 02:55:15 UTC" datetime="2013-10-05T02:55:15.439633+00:00">on 2013-10-05</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Zhi Yan Liu (lzy-dev)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-07T10:37:47.237521+00:00" title="2013-10-07 10:37:47 UTC">on 2013-10-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/2">
                <strong>Fix proposed to glance (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: master<br />
Review: <a rel="nofollow" href="https://review.openstack.org/50016">https:/<wbr />/review.<wbr />openstack.<wbr />org/50016</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: master
Review: https://review.openstack.org/50016</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~markwash" class="sprite person">Mark Washenberger (markwash)</a>
    
    <time title="2013-10-08 21:09:40 UTC" datetime="2013-10-08T21:09:40.891188+00:00">on 2013-10-08</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        none &#8594; icehouse-1
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2013-10-08 22:10:53 UTC" datetime="2013-10-08T22:10:53.963238+00:00">on 2013-10-08</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        icehouse-1 &#8594; havana-rc2
      </td>
    </tr>
  
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        removed: havana-rc-potential
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-09T11:56:12.190617+00:00" title="2013-10-09 11:56:12 UTC">on 2013-10-09</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/3">
                <strong>Fix merged to glance (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/50016">https:/<wbr />/review.<wbr />openstack.<wbr />org/50016</a><br />
Committed: <a rel="nofollow" href="http://github.com/openstack/glance/commit/a50bfbf490fd354d08abd25b67aaab83b2a17a85">http://<wbr />github.<wbr />com/openstack/<wbr />glance/<wbr />commit/<wbr />a50bfbf490fd354<wbr />d08abd25b67aaab<wbr />83b2a17a85</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit a50bfbf490fd354<wbr />d08abd25b67aaab<wbr />83b2a17a85<br />
Author: Zhi Yan Liu &lt;email address hidden&gt;<br />
Date:   Mon Oct 7 11:44:33 2013 +0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adding &#x27;download_image&#x27; policy enforcement to image cache middleware</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently image cache middleware not care &#x27;download_image&#x27; policy, the<br />
&nbsp;&nbsp;&nbsp;&nbsp;enforcement caused user receive empty content but with HTTP 200 code<br />
&nbsp;&nbsp;&nbsp;&nbsp;rather than 403 when client attempt to download image using v2 API. And<br />
&nbsp;&nbsp;&nbsp;&nbsp;the real Forbidden exception be logged in glance-api log which image<br />
&nbsp;&nbsp;&nbsp;&nbsp;application action raised. The end user is confused by this behavior.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fixes bug: 1235378</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ibaa7ccf8613ee3<wbr />cce4cb6a72e3206<wbr />a2c94122222<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Zhi Yan Liu &lt;email address hidden&gt;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/50016
Committed: http://github.com/openstack/glance/commit/a50bfbf490fd354d08abd25b67aaab83b2a17a85
Submitter: Jenkins
Branch:    master

commit a50bfbf490fd354d08abd25b67aaab83b2a17a85
Author: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
Date:   Mon Oct 7 11:44:33 2013 +0800

    Adding 'download_image' policy enforcement to image cache middleware
    
    Currently image cache middleware not care 'download_image' policy, the
    enforcement caused user receive empty content but with HTTP 200 code
    rather than 403 when client attempt to download image using v2 API. And
    the real Forbidden exception be logged in glance-api log which image
    application action raised. The end user is confused by this behavior.
    
    Fixes bug: 1235378
    
    Change-Id: Ibaa7ccf8613ee3cce4cb6a72e3206a2c94122222
    Signed-off-by: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-09T16:09:52.738409+00:00" title="2013-10-09 16:09:52 UTC">on 2013-10-09</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/4">
                <strong>Re: 'image_download' role in v2 causes traceback</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This has security implications (as explained in duplicate <a href="/bugs/1235226" class="bug-link">bug 1235226</a>) and may generate a security advisory.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This has security implications (as explained in duplicate bug 1235226) and may generate a security advisory.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Public &#8594; Public Security
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Medium
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-09T16:13:57.918258+00:00" title="2013-10-09 16:13:57 UTC">on 2013-10-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Grizzly patch proposed: <a rel="nofollow" href="https://review.openstack.org/#/c/50103/">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/c/<wbr />50103/</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Grizzly patch proposed: https://review.openstack.org/#/c/50103/</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~gandelman-a" class="sprite person">Adam Gandelman (gandelman-a)</a>
    
    <time title="2013-10-09 18:45:54 UTC" datetime="2013-10-09T18:45:54.214264+00:00">on 2013-10-09</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: grizzly-backport-potential
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-10T08:29:44.922940+00:00" title="2013-10-10 08:29:44 UTC">on 2013-10-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/6">
                <strong>Fix proposed to glance (stable/folsom)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/folsom<br />
Review: <a rel="nofollow" href="https://review.openstack.org/50860">https:/<wbr />/review.<wbr />openstack.<wbr />org/50860</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/folsom
Review: https://review.openstack.org/50860</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-10T08:53:27.215821+00:00" title="2013-10-10 08:53:27 UTC">on 2013-10-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/7">
                <strong>Fix proposed to glance (milestone-proposed)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: milestone-proposed<br />
Review: <a rel="nofollow" href="https://review.openstack.org/50865">https:/<wbr />/review.<wbr />openstack.<wbr />org/50865</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: milestone-proposed
Review: https://review.openstack.org/50865</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-10T12:13:13.271429+00:00" title="2013-10-10 12:13:13 UTC">on 2013-10-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/8">
                <strong>Fix merged to glance (milestone-proposed)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/50865">https:/<wbr />/review.<wbr />openstack.<wbr />org/50865</a><br />
Committed: <a rel="nofollow" href="http://github.com/openstack/glance/commit/02e97689e60b643d446720659c9688702aea197b">http://<wbr />github.<wbr />com/openstack/<wbr />glance/<wbr />commit/<wbr />02e97689e60b643<wbr />d446720659c9688<wbr />702aea197b</a><br />
Submitter: Jenkins<br />
Branch:    milestone-proposed</p>
<p>commit 02e97689e60b643<wbr />d446720659c9688<wbr />702aea197b<br />
Author: Zhi Yan Liu &lt;email address hidden&gt;<br />
Date:   Mon Oct 7 11:44:33 2013 +0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adding &#x27;download_image&#x27; policy enforcement to image cache middleware</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently image cache middleware not care &#x27;download_image&#x27; policy, the<br />
&nbsp;&nbsp;&nbsp;&nbsp;enforcement caused user receive empty content but with HTTP 200 code<br />
&nbsp;&nbsp;&nbsp;&nbsp;rather than 403 when client attempt to download image using v2 API. And<br />
&nbsp;&nbsp;&nbsp;&nbsp;the real Forbidden exception be logged in glance-api log which image<br />
&nbsp;&nbsp;&nbsp;&nbsp;application action raised. The end user is confused by this behavior.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fixes bug: 1235378</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Id: Ibaa7ccf8613ee3<wbr />cce4cb6a72e3206<wbr />a2c94122222<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I2822ee553d605b<wbr />7d49576c886f42f<wbr />a403cdbccf2<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Zhi Yan Liu &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a50bfbf490fd354<wbr />d08abd25b67aaab<wbr />83b2a17a85)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/50865
Committed: http://github.com/openstack/glance/commit/02e97689e60b643d446720659c9688702aea197b
Submitter: Jenkins
Branch:    milestone-proposed

commit 02e97689e60b643d446720659c9688702aea197b
Author: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
Date:   Mon Oct 7 11:44:33 2013 +0800

    Adding 'download_image' policy enforcement to image cache middleware
    
    Currently image cache middleware not care 'download_image' policy, the
    enforcement caused user receive empty content but with HTTP 200 code
    rather than 403 when client attempt to download image using v2 API. And
    the real Forbidden exception be logged in glance-api log which image
    application action raised. The end user is confused by this behavior.
    
    Fixes bug: 1235378
    
    Related-Id: Ibaa7ccf8613ee3cce4cb6a72e3206a2c94122222
    Change-Id: I2822ee553d605b7d49576c886f42fa403cdbccf2
    Signed-off-by: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
    (cherry picked from commit a50bfbf490fd354d08abd25b67aaab83b2a17a85)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-11T13:43:03.285176+00:00" title="2013-10-11 13:43:03 UTC">on 2013-10-11</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/9">
                <strong>Re: 'image_download' role in v2 causes traceback</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>That&#x27;s Grizzly/Havana only, right ? here is my attempt to an impact description:</p>
<p>===<br />
Title: Glance image_download policy not enforced for cached images<br />
Reporter: Stuart McLaren (HP)<br />
Products: Glance<br />
Affects: Grizzly and later</p>
<p>Description:<br />
Stuart McLaren from HP reported a vulnerability in Glance download_image policy enforcement in the case of cached images. Deployers may opt to set a download_image policy to restrict image download to specific roles. However, when an image is previously cached by an authorized download, any authenticated user could download image contents if it can guess the image UUID, bypassing any download_image policy restrictions. This could result in disclosure of image contents that were thought to be protected by the download_image policy setting. Only setups making use of the download_image policy are affected.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">That's Grizzly/Havana only, right ? here is my attempt to an impact description:

===
Title: Glance image_download policy not enforced for cached images
Reporter: Stuart McLaren (HP) 
Products: Glance
Affects: Grizzly and later

Description:
Stuart McLaren from HP reported a vulnerability in Glance download_image policy enforcement in the case of cached images. Deployers may opt to set a download_image policy to restrict image download to specific roles. However, when an image is previously cached by an authorized download, any authenticated user could download image contents if it can guess the image UUID, bypassing any download_image policy restrictions. This could result in disclosure of image contents that were thought to be protected by the download_image policy setting. Only setups making use of the download_image policy are affected.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Thierry Carrez (ttx)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Triaged
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-11T13:54:53.414114+00:00" title="2013-10-11 13:54:53 UTC">on 2013-10-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@ttx, No I consider folsom need to fix also: <a rel="nofollow" href="https://review.openstack.org/50860">https:/<wbr />/review.<wbr />openstack.<wbr />org/50860</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@ttx, No I consider folsom need to fix also: https://review.openstack.org/50860</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-11T14:10:33.394657+00:00" title="2013-10-11 14:10:33 UTC">on 2013-10-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Zhi Yan,</p>
<p>Thanks!</p>
<p>Thierry:</p>
<p>Thanks for drawing up a wording.</p>
<p>&quot;if it can guess the image UUID&quot;: in the case of public images there&#x27;s not really any guessing required ... a public image&#x27;s UUID will be visible when they list images. (Public images will also be more likely to be cached.)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Zhi Yan,

Thanks!

Thierry:

Thanks for drawing up a wording.

"if it can guess the image UUID": in the case of public images there's not really any guessing required ... a public image's UUID will be visible when they list images. (Public images will also be more likely to be cached.)

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-11T15:12:59.634264+00:00" title="2013-10-11 15:12:59 UTC">on 2013-10-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>that said, public images also are unlikely to be protected by image_download... but yeah. how about:</p>
<p>===<br />
Title: Glance image_download policy not enforced for cached images<br />
Reporter: Stuart McLaren (HP)<br />
Products: Glance<br />
Affects: All versions</p>
<p>Description:<br />
Stuart McLaren from HP reported a vulnerability in Glance download_image policy enforcement in the case of cached images. Deployers may opt to set a download_image policy to restrict image download to specific roles. However, when an image is previously cached by an authorized download, any authenticated user could download image contents if it can determine the image UUID, bypassing any download_image policy restrictions. This could result in disclosure of image contents that were thought to be protected by the download_image policy setting. Only setups making use of the download_image policy are affected.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">that said, public images also are unlikely to be protected by image_download... but yeah. how about:

===
Title: Glance image_download policy not enforced for cached images
Reporter: Stuart McLaren (HP)
Products: Glance
Affects: All versions

Description:
Stuart McLaren from HP reported a vulnerability in Glance download_image policy enforcement in the case of cached images. Deployers may opt to set a download_image policy to restrict image download to specific roles. However, when an image is previously cached by an authorized download, any authenticated user could download image contents if it can determine the image UUID, bypassing any download_image policy restrictions. This could result in disclosure of image contents that were thought to be protected by the download_image policy setting. Only setups making use of the download_image policy are affected.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-11T15:32:04.886844+00:00" title="2013-10-11 15:32:04 UTC">on 2013-10-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Thierry -- looks good to me!</p>
<p>(FWIW download_image may be useful for public images which are licensed.)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Thierry -- looks good to me!

(FWIW download_image may be useful for public images which are licensed.)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-14T11:57:31.176978+00:00" title="2013-10-14 11:57:31 UTC">on 2013-10-14</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/14">
                <strong>Fix merged to glance (stable/folsom)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/50860">https:/<wbr />/review.<wbr />openstack.<wbr />org/50860</a><br />
Committed: <a rel="nofollow" href="http://github.com/openstack/glance/commit/feb735412021b771d4fe8b5706506abe6677899b">http://<wbr />github.<wbr />com/openstack/<wbr />glance/<wbr />commit/<wbr />feb735412021b77<wbr />1d4fe8b5706506a<wbr />be6677899b</a><br />
Submitter: Jenkins<br />
Branch:    stable/folsom</p>
<p>commit feb735412021b77<wbr />1d4fe8b5706506a<wbr />be6677899b<br />
Author: Zhi Yan Liu &lt;email address hidden&gt;<br />
Date:   Mon Oct 7 11:44:33 2013 +0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adding &#x27;download_image&#x27; policy enforcement to image cache middleware</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently image cache middleware not care &#x27;download_image&#x27; policy, the<br />
&nbsp;&nbsp;&nbsp;&nbsp;enforcement caused user receive empty content but with HTTP 200 code<br />
&nbsp;&nbsp;&nbsp;&nbsp;rather than 403 when client attempt to download image using v2 API. And<br />
&nbsp;&nbsp;&nbsp;&nbsp;the real Forbidden exception be logged in glance-api log which image<br />
&nbsp;&nbsp;&nbsp;&nbsp;application action raised. The end user is confused by this behavior.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fixes bug: 1235378</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Id: Ibaa7ccf8613ee3<wbr />cce4cb6a72e3206<wbr />a2c94122222<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I6ce09c764436da<wbr />52ed0a5219c33ae<wbr />0fb542dd3f8<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Zhi Yan Liu &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a50bfbf490fd354<wbr />d08abd25b67aaab<wbr />83b2a17a85)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/50860
Committed: http://github.com/openstack/glance/commit/feb735412021b771d4fe8b5706506abe6677899b
Submitter: Jenkins
Branch:    stable/folsom

commit feb735412021b771d4fe8b5706506abe6677899b
Author: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
Date:   Mon Oct 7 11:44:33 2013 +0800

    Adding 'download_image' policy enforcement to image cache middleware
    
    Currently image cache middleware not care 'download_image' policy, the
    enforcement caused user receive empty content but with HTTP 200 code
    rather than 403 when client attempt to download image using v2 API. And
    the real Forbidden exception be logged in glance-api log which image
    application action raised. The end user is confused by this behavior.
    
    Fixes bug: 1235378
    
    Related-Id: Ibaa7ccf8613ee3cce4cb6a72e3206a2c94122222
    Change-Id: I6ce09c764436da52ed0a5219c33ae0fb542dd3f8
    Signed-off-by: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
    (cherry picked from commit a50bfbf490fd354d08abd25b67aaab83b2a17a85)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-14T15:08:22.834996+00:00" title="2013-10-14 15:08:22 UTC">on 2013-10-14</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1235378/comments/15">
                <strong>Re: 'image_download' role in v2 causes traceback</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The proposed impact description in comment #12 looks accurate to me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The proposed impact description in comment #12 looks accurate to me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-15T08:44:54.391390+00:00" title="2013-10-15 08:44:54 UTC">on 2013-10-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>CVE requested</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">CVE requested</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Triaged &#8594; In Progress
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~thomas-goirand" class="sprite person">Thomas Goirand (thomas-goirand)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-16T07:57:35.015685+00:00" title="2013-10-16 07:57:35 UTC">on 2013-10-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi,<br />
Would Essex also be vulnerable?</p>
<p>Thomas</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi,
Would Essex also be vulnerable?

Thomas
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2013-10-17 10:18:57 UTC" datetime="2013-10-17T10:18:57.223574+00:00">on 2013-10-17</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        havana-rc2 &#8594; 2013.2
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-17T10:25:31.080288+00:00" title="2013-10-17 10:25:31 UTC">on 2013-10-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>CVE-2013-4428</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">CVE-2013-4428</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jdstrand" class="sprite person">Jamie Strandboge (jdstrand)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-18T18:38:34.611005+00:00" title="2013-10-18 18:38:34 UTC">on 2013-10-18</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The patch for Folsom adds tests for the v1 API, so I assume Essex is also affected and the Folsom patches backported.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The patch for Folsom adds tests for the v1 API, so I assume Essex is also affected and the Folsom patches backported.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-21T12:37:28.705617+00:00" title="2013-10-21 12:37:28 UTC">on 2013-10-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>OSSA to be released tomorrow Tuesday, Oct 22</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">OSSA to be released tomorrow Tuesday, Oct 22</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-22T15:31:39.441840+00:00" title="2013-10-22 15:31:39 UTC">on 2013-10-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>[OSSA 2013-027]</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">[OSSA 2013-027] </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - &#x27;image_download&#x27; role in v2 causes traceback<br />+ [OSSA 2013-027] &#x27;image_download&#x27; role in v2 causes traceback
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1235378/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jdstrand" class="sprite person">Jamie Strandboge (jdstrand)</a>
            wrote
            <time itemprop="commentTime" datetime="2013-10-22T19:34:44.950078+00:00" title="2013-10-22 19:34:44 UTC">on 2013-10-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1235378/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Looks like essex is not affected after all. &#x27;download_image&#x27; functionality was not added until folsom (see <a href="/bugs/1038086" class="bug-link">bug #1038086</a>).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Looks like essex is not affected after all. 'download_image' functionality was not added until folsom (see bug #1038086).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~apevec" class="sprite person">Alan Pevec (apevec)</a>
    
    <time title="2013-10-28 15:52:00 UTC" datetime="2013-10-28T15:52:00.101886+00:00">on 2013-10-28</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        removed: grizzly-backport-potential
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/glance/+bug/1235378/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/glance/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/glance/+bug/1235378/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/glance/+bug/1235378/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/glance/+bug/1235378/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/glance/+bug/1235378/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/glance/+bug/1235378/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/glance/+bug/1235378/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      <div class="portlet" id="portlet-duplicates">
  <h2>Duplicates of this bug</h2>
  <ul>
    <li>
      <a class="sprite bug" href="https://bugs.launchpad.net/glance/+bug/1235226" title="image_download policy not enforced for cached images"> Bug #1235226</a>
    </li>
  </ul>
</div>

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/glance/+bug/1235378/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/glance/+bug/1235378/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/glance/+bug/1235378/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1235378", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1235378"}, "information_type_data": {"PUBLIC": {"description": "Everyone can see this information.\n", "name": "Public", "is_private": false, "order": 0, "description_css_class": "choice-description", "value": "PUBLIC"}, "PUBLICSECURITY": {"description": "Everyone can see this security related information.\n", "name": "Public Security", "is_private": false, "order": 1, "description_css_class": "choice-description", "value": "PUBLICSECURITY"}, "USERDATA": {"description": "Only shared with users permitted to see private user information.\n", "name": "Private", "is_private": true, "order": 3, "description_css_class": "choice-description", "value": "USERDATA"}, "PRIVATESECURITY": {"description": "Only the security group can see this information.\n ", "name": "Private Security", "is_private": true, "order": 2, "description_css_class": "choice-description", "value": "PRIVATESECURITY"}}, "total_comments_and_activity": 62, "bug_is_private": false, "related_features": {}, "first visible_recent_comment": -18, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1235378", "web_link": "https://bugs.launchpad.net/bugs/1235378", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1235378, "private": false, "information_type": "Public Security", "name": null, "title": "[OSSA 2013-027] 'image_download' role in v2 causes traceback", "description": "If you enable the 'image_download' policy as follows:\n\n\n\n { \n    \"context_is_admin\":  \"role:admin\",\n    \"download_image\":  \"role:admin\", \u003c\u003c\u003c\n    \"default\": \"\",\n    \"manage_image_cache\": \"role:admin\"\n }\n\nAnd attempt to download using the v2 api you get 200 rather than 403 (but, correctly, no data) \nand a stack trace on the server:\n\n6234 DEBUG glance.api.policy [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Loaded policy rules: {u'context_is_admin': 'role:admin', u'download_image': 'role:admin', u'default': '@', u'manage_image_cache': 'role:admin'}\n6234 DEBUG glance.image_cache [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Tee'ing image '42c834df-3b35-4982-aed6-ffa4a44d3778' into cache\n6234 DEBUG glance.api.policy [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Loaded policy rules: {u'context_is_admin': 'role:admin', u'download_image': 'role:admin', u'default': '@', u'manage_image_cache': 'role:admin'}\n6234 DEBUG glance.image_cache.drivers.sqlite [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Fetch of cache file failed (You are not authorized to complete this action.), rolling back by moving '/opt/stack/data/glance/cache/incomplete/42c834df-3b35-4982-aed6-ffa4a44d3778' to '/opt/stack/data/glance/cache/invalid/42c834df-3b35-4982-aed6-ffa4a44d3778'\n6234 ERROR glance.image_cache [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] You are not authorized to complete this action.\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache Traceback (most recent call last):\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File \"/opt/stack/glance/glance/image_cache/__init__.py\", line 238, in cache_tee_iter\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     for chunk in image_iter:\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File \"/opt/stack/glance/glance/notifier/__init__.py\", line 182, in get_data\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     for chunk in self.image.get_data():\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File \"/opt/stack/glance/glance/api/policy.py\", line 225, in get_data\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     self.policy.enforce(self.context, 'download_image', {})\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File \"/opt/stack/glance/glance/api/policy.py\", line 135, in enforce\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     exception.Forbidden, action=action)\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File \"/opt/stack/glance/glance/api/policy.py\", line 123, in _check\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     return policy.check(rule, target, credentials, *args, **kwargs)\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache   File \"/opt/stack/glance/glance/openstack/common/policy.py\", line 183, in check\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache     raise exc(*args, **kwargs)\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache Forbidden: You are not authorized to complete this action.\n2013-10-04 17:34:47.678 6234 TRACE glance.image_cache \n6234 DEBUG eventlet.wsgi.server [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] Traceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/eventlet/wsgi.py\", line 402, in handle_one_response\n    for data in result:\n  File \"/opt/stack/glance/glance/image_cache/__init__.py\", line 238, in cache_tee_iter\n    for chunk in image_iter:\n  File \"/opt/stack/glance/glance/notifier/__init__.py\", line 182, in get_data\n    for chunk in self.image.get_data():\n  File \"/opt/stack/glance/glance/api/policy.py\", line 225, in get_data\n    self.policy.enforce(self.context, 'download_image', {})\n  File \"/opt/stack/glance/glance/api/policy.py\", line 135, in enforce\n    exception.Forbidden, action=action)\n  File \"/opt/stack/glance/glance/api/policy.py\", line 123, in _check\n    return policy.check(rule, target, credentials, *args, **kwargs)\n  File \"/opt/stack/glance/glance/openstack/common/policy.py\", line 183, in check\n    raise exc(*args, **kwargs)\nForbidden: You are not authorized to complete this action.\n6234 DEBUG eventlet.wsgi.server [acaf8321-9f3c-439a-8028-46921ea56740 a9befd28bf704839b62aecbf6afacd37 f6e065403d57444aa973fc10c655dedd] 10.6.249.22 - - [04/Oct/2013 17:34:47] \"GET /v2/images/42c834df-3b35-4982-aed6-ffa4a44d3778/file HTTP/1.1\" 200 0 0.048832", "owner_link": "https://bugs.launchpad.net/api/devel/~stuart-mclaren", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/bug_tasks", "duplicate_of_link": null, "date_created": "2013-10-04T17:37:49.425626+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/subscriptions", "date_last_updated": "2013-10-28T15:52:00.389523+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 268, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/attachments", "security_related": true, "latest_patch_uploaded": null, "tags": [], "date_last_message": "2013-10-22T19:34:44.950078+00:00", "number_of_duplicates": 1, "message_count": 23, "users_affected_count": 2, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/users_unaffected", "users_affected_count_with_dupes": 2, "other_users_affected_count_with_dupes": 2, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1235378/linked_merge_proposals", "http_etag": "\"c1005134a921bcdf2c1ff9920cff551076312119-128084511f8c53697e76b6a797f5e60d6ef5ba71\""}, "bugtask_data": {"1482092": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/glance/folsom/+bug/1235378", "assignee_value": null, "user_can_edit_status": true, "bug_title": "[OSSA 2013-027] 'image_download' role in v2 causes traceback", "user_can_edit_milestone": false, "prefix": "glance_folsom", "form_row_id": "task1482092", "target_is_product": false, "user_can_edit_importance": false, "assignee_is_team": null, "delete_link": "https://bugs.launchpad.net/glance/folsom/+bug/1235378/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Committed", "importance_value": "Undecided", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1482092", "assignee_vocabulary_filters": [], "targetname": "Glance folsom", "importance_widget_items": "[]", "milestone_value": null, "id": 1482092}, "1477662": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/glance/+bug/1235378", "assignee_value": "lzy-dev", "user_can_edit_status": true, "bug_title": "[OSSA 2013-027] 'image_download' role in v2 causes traceback", "user_can_edit_milestone": false, "prefix": "glance", "form_row_id": "task1477662", "target_is_product": true, "user_can_edit_importance": false, "assignee_is_team": false, "delete_link": "https://bugs.launchpad.net/glance/+bug/1235378/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Released", "importance_value": "Critical", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1477662", "assignee_vocabulary_filters": [], "targetname": "Glance", "importance_widget_items": "[]", "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/2013.2", "id": 1477662}, "1480390": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/glance/grizzly/+bug/1235378", "assignee_value": "stuart-mclaren", "user_can_edit_status": true, "bug_title": "[OSSA 2013-027] 'image_download' role in v2 causes traceback", "user_can_edit_milestone": false, "prefix": "glance_grizzly", "form_row_id": "task1480390", "target_is_product": false, "user_can_edit_importance": false, "assignee_is_team": false, "delete_link": "https://bugs.launchpad.net/glance/grizzly/+bug/1235378/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Released", "importance_value": "Critical", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1480390", "assignee_vocabulary_filters": [], "targetname": "Glance grizzly", "importance_widget_items": "[]", "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/2013.1.4", "id": 1480390}, "1480389": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/ossa/+bug/1235378", "assignee_value": "ttx", "user_can_edit_status": true, "bug_title": "[OSSA 2013-027] 'image_download' role in v2 causes traceback", "user_can_edit_milestone": false, "prefix": "ossa", "form_row_id": "task1480389", "target_is_product": true, "user_can_edit_importance": false, "assignee_is_team": false, "delete_link": "https://bugs.launchpad.net/ossa/+bug/1235378/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Released", "importance_value": "Medium", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1480389", "assignee_vocabulary_filters": [], "targetname": "OpenStack Security Advisory", "importance_widget_items": "[]", "milestone_value": null, "id": 1480389}}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1235378", "web_link": "https://bugs.launchpad.net/glance/+bug/1235378", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1235378", "milestone_link": "https://bugs.launchpad.net/api/devel/glance/+milestone/2013.2", "status": "Fix Released", "importance": "Critical", "assignee_link": "https://bugs.launchpad.net/api/devel/~lzy-dev", "bug_target_display_name": "Glance", "bug_target_name": "glance", "bug_watch_link": null, "date_assigned": "2013-10-05T02:55:16.011041+00:00", "date_created": "2013-10-04T17:37:49.425626+00:00", "date_confirmed": "2013-10-07T10:37:45.817131+00:00", "date_incomplete": null, "date_in_progress": "2013-10-07T10:37:45.817131+00:00", "date_closed": "2013-10-10T12:13:10.578469+00:00", "date_left_new": "2013-10-07T10:37:45.817131+00:00", "date_triaged": "2013-10-07T10:37:45.817131+00:00", "date_fix_committed": "2013-10-09T11:56:10.404797+00:00", "date_fix_released": "2013-10-10T12:13:10.578469+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~stuart-mclaren", "target_link": "https://bugs.launchpad.net/api/devel/glance", "title": "Bug #1235378 in Glance: \"[OSSA 2013-027] 'image_download' role in v2 causes traceback\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1235378/related_tasks", "is_complete": true, "http_etag": "\"7953e253cff10b0d09f8d75551d654af387f2b51-a061ff4e93445e3bb3ff1edf784046ef6f18fff9\""}, "initial_comment_batch_offset": 41};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 88 queries/external actions issued in 2.05 seconds

    Features: {'app.maintenance_message': None, 'visible_render_time': None, 'bugs.affected_count_includes_dupes.disabled': None, 'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'bugs.nominations.bug_supervisors_can_target': 'on', 'baselayout.careers_link.disabled': None, 'hard_timeout': '9000', 'js.yui_version': None, 'profiling.enabled': None}

    r0d8de2b

    -->

</html>

