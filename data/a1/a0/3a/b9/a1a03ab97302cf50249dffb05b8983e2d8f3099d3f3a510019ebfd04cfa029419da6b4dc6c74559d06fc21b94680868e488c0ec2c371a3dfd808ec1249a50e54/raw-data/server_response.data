<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>28a566f7731b4cb76d2a9ba16d997ac5aeb07dad - platform/bootable/recovery - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/bootable/recovery/%2B/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/bootable/">bootable</a> / <a class="Breadcrumbs-crumb" href="/platform/bootable/recovery/">recovery</a> / <span class="Breadcrumbs-crumb">28a566f7731b4cb76d2a9ba16d997ac5aeb07dad</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>28a566f7731b4cb76d2a9ba16d997ac5aeb07dad</td><td><span>[<a href="/platform/bootable/recovery/+log/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad">log</a>]</span> <span>[<a href="/platform/bootable/recovery/+archive/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Yabin Cui &lt;yabinc@google.com&gt;</td><td>Thu Feb 18 11:32:10 2016 -0800</td></tr><tr><th class="Metadata-title">committer</th><td>The Android Automerger &lt;android-build@google.com&gt;</td><td>Fri Feb 26 14:33:16 2016 -0800</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/">8781b4c6f6b91e724a513f3a6c1305d2a7c3bdc1</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad%5E">e6fd45c005e1adf42815c46a802689fd8214afde</a> <span>[<a href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">Fix integer overflows in recovery procedure.

Bug: 26960931
Change-Id: <a href="https://android-review.googlesource.com/#/q/Ieae45caccfb4728fcf514f0d920976585d8e6caf">Ieae45caccfb4728fcf514f0d920976585d8e6caf</a>
(cherry picked from commit 4f2df162c6ab4a71ca86e4b38735b681729c353b)
</pre><ul class="DiffTree"><li><a href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/minzip/SysUtil.c">minzip/SysUtil.c</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad%5E%21/#F0">diff</a>]</span></li></ul><div class="DiffSummary">1 file changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 8781b4c6f6b91e724a513f3a6c1305d2a7c3bdc1</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - CleanSpec.mk"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/CleanSpec.mk">CleanSpec.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NOTICE"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/NOTICE">NOTICE</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - adb_install.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/adb_install.cpp">adb_install.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - adb_install.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/adb_install.h">adb_install.h</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - applypatch/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/applypatch/">applypatch/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - asn1_decoder.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/asn1_decoder.cpp">asn1_decoder.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - asn1_decoder.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/asn1_decoder.h">asn1_decoder.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - bootloader.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/bootloader.cpp">bootloader.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - bootloader.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/bootloader.h">bootloader.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - common.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/common.h">common.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - default_device.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/default_device.cpp">default_device.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - device.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/device.h">device.h</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - edify/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/edify/">edify/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - etc/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/etc/">etc/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - fonts/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/fonts/">fonts/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - fuse_sdcard_provider.c"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/fuse_sdcard_provider.c">fuse_sdcard_provider.c</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - fuse_sdcard_provider.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/fuse_sdcard_provider.h">fuse_sdcard_provider.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - fuse_sideload.c"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/fuse_sideload.c">fuse_sideload.c</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - fuse_sideload.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/fuse_sideload.h">fuse_sideload.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - install.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/install.cpp">install.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - install.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/install.h">install.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - interlace-frames.py"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/interlace-frames.py">interlace-frames.py</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - minadbd/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/minadbd/">minadbd/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - minui/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/minui/">minui/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - minzip/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/minzip/">minzip/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - mtdutils/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/mtdutils/">mtdutils/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - recovery.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/recovery.cpp">recovery.cpp</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res-hdpi/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/res-hdpi/">res-hdpi/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res-mdpi/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/res-mdpi/">res-mdpi/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res-xhdpi/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/res-xhdpi/">res-xhdpi/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res-xxhdpi/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/res-xxhdpi/">res-xxhdpi/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res-xxxhdpi/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/res-xxxhdpi/">res-xxxhdpi/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - roots.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/roots.cpp">roots.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - roots.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/roots.h">roots.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - screen_ui.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/screen_ui.cpp">screen_ui.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - screen_ui.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/screen_ui.h">screen_ui.h</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - testdata/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/testdata/">testdata/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tests/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/tests/">tests/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tools/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/tools/">tools/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - ui.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/ui.cpp">ui.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - ui.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/ui.h">ui.h</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - uncrypt/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/uncrypt/">uncrypt/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - updater/"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/updater/">updater/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - verifier.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/verifier.cpp">verifier.cpp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - verifier.h"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/verifier.h">verifier.h</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - verifier_test.cpp"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/verifier_test.cpp">verifier_test.cpp</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - verifier_test.sh"><a class="FileList-itemLink" href="/platform/bootable/recovery/+/28a566f7731b4cb76d2a9ba16d997ac5aeb07dad/verifier_test.sh">verifier_test.sh</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>