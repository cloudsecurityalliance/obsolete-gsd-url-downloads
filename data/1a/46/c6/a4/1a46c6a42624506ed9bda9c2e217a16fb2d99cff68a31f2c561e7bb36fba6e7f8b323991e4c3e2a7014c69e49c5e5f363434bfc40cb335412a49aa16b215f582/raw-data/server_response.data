<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83 - webm/libwebp - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://chromium.googlesource.com/login/webm/libwebp/%2B/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">chromium</a> / <a class="Breadcrumbs-crumb" href="/webm/">webm</a> / <a class="Breadcrumbs-crumb" href="/webm/libwebp/">libwebp</a> / <span class="Breadcrumbs-crumb">e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83</td><td><span>[<a href="/webm/libwebp/+log/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83">log</a>]</span> <span>[<a href="/webm/libwebp/+archive/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Pascal Massimino &lt;pascal.massimino@gmail.com&gt;</td><td>Mon Oct 10 09:48:39 2016</td></tr><tr><th class="Metadata-title">committer</th><td>Pascal Massimino &lt;pascal.massimino@gmail.com&gt;</td><td>Mon Oct 10 11:55:46 2016</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/">56b4be1ce73336cf4d86a66bb4ec77f271ac4a2f</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83%5E">aaf2a6a69884d0f9abfa2f97d252e6d568e9c191</a> <span>[<a href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">fix potential overflow when width * height * 4 &gt;= (1&lt;&lt;32)

Mostly: avoid doing calculation like: ptr + j * stride
when stride is &#39;int&#39;. Rather use size_t, or pointer increments (ptr += stride)
when possible.

BUG=webp:314

Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I81c684b515dd1ec4f601f32d50a6e821c4e46e20">I81c684b515dd1ec4f601f32d50a6e821c4e46e20</a>
</pre><ul class="DiffTree"><li><a href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/examples/gifdec.c">examples/gifdec.c</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83%5E%21/#F0">diff</a>]</span></li></ul><div class="DiffSummary">1 file changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 56b4be1ce73336cf4d86a66bb4ec77f271ac4a2f</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - .gitattributes"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/.gitattributes">.gitattributes</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .gitignore"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/.gitignore">.gitignore</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .mailmap"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/.mailmap">.mailmap</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - AUTHORS"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/AUTHORS">AUTHORS</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - CMakeLists.txt"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/CMakeLists.txt">CMakeLists.txt</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - COPYING"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/COPYING">COPYING</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - ChangeLog"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/ChangeLog">ChangeLog</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Makefile.am"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/Makefile.am">Makefile.am</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Makefile.vc"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/Makefile.vc">Makefile.vc</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NEWS"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/NEWS">NEWS</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - PATENTS"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/PATENTS">PATENTS</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - README"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/README">README</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - README.mux"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/README.mux">README.mux</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - autogen.sh"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/autogen.sh">autogen.sh</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - build.gradle"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/build.gradle">build.gradle</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - cmake/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/cmake/">cmake/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - configure.ac"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/configure.ac">configure.ac</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - doc/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/doc/">doc/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - examples/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/examples/">examples/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - extras/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/extras/">extras/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - gradle.properties"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/gradle.properties">gradle.properties</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - gradle/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/gradle/">gradle/</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - gradlew"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/gradlew">gradlew</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - gradlew.bat"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/gradlew.bat">gradlew.bat</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - imageio/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/imageio/">imageio/</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - iosbuild.sh"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/iosbuild.sh">iosbuild.sh</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - m4/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/m4/">m4/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - makefile.unix"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/makefile.unix">makefile.unix</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - man/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/man/">man/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - src/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/src/">src/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - swig/"><a class="FileList-itemLink" href="/webm/libwebp/+/e2affacc35f1df6cc3b1a9fa0ceff5ce2d0cce83/swig/">swig/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>