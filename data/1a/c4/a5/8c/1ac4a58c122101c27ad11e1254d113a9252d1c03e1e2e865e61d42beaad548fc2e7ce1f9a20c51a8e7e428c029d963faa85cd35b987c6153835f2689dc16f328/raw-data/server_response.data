<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 2188623006: Add pre finalizer to Animation to ensure compositor handles get cleaned up -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '48ee3c7d4f9dfba182a05c3441d5e4bc';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/2188623006%252526ust%25253D1608710765304545%252526usg%25253DAFQjCNGHyfPm6WtyrZs3-j_0AMyC9YYf4Q%26service%3Dah">Sign out</a>

</div>
<div class="counter">(1130)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-2188623006">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/2188623006/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            2188623006</a>:
    Add pre finalizer to Animation to ensure compositor handles get cleaned up  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            4 years, 4 months ago by <a href="/user/alancutter%20(OOO%20until%202018)" onMouseOver="M_showUserInfoPopup(this)">alancutter (OOO until 2018)</a>
          </div>
          <div><b>Modified:</b><br/>
            4 years, 4 months ago
          </div>
          <div><b>Reviewers:</b><br/>
            <span class='approval'><a href="/user/haraken" onMouseOver="M_showUserInfoPopup(this)">haraken</a></span>
          </div>
          
          <div><b>CC:</b><br/>
            darktears, blink-reviews, blink-reviews-animation_chromium.org, chromium-reviews, Eric Willigers, jbroman, rjwright, shans, ymalik
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/src.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/pending/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=chromium">
              chromium
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - c14d891d44f0afff64e56ed7c9702df1d807b1ee"
               href="/search?repo_guid=c14d891d44f0afff64e56ed7c9702df1d807b1ee">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">Add pre finalizer to Animation to ensure compositor handles get cleaned up

BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=631052">631052</a>
Committed: <a href="https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824">https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824</a>
Cr-Commit-Position: refs/heads/master@{#408554}
  </div>




  <h3>
    <a id="ps-1-pointer"
       href="/2188623006/#ps1"
       onclick="M_toggleSectionForPS('2188623006', '1')"
       class="toggled-section ">
      Patch Set 1
      
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-1"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-20001-pointer"
       href="/2188623006/#ps20001"
       onclick="M_toggleSectionForPS('2188623006', '20001')"
       class="toggled-section ">
      Patch Set 2
      : Real fix
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-20001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-40001-pointer"
       href="/2188623006/#ps40001"
       onclick="M_toggleSectionForPS('2188623006', '40001')"
       class="toggled-section ">
      Patch Set 3
      : Moved registration
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-40001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-60001-pointer"
       href="/2188623006/#ps60001"
       onclick="M_toggleSectionForPS('2188623006', '60001')"
       class="toggled-section ">
      Patch Set 4
      : Remove AnimationTimeline pre-finalizer
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 1
      
    </div>
  

  <div id="ps-60001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-80001-pointer"
       href="/2188623006/#ps80001"
       onclick="M_toggleSectionForPS('2188623006', '80001')"
       class="toggled-section ">
      Patch Set 5
      : Remove AnimationTimeline destructor
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-80001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-100001-pointer"
       href="/2188623006/#ps100001"
       onclick="M_toggleSectionForPS('2188623006', '100001')"
       class="toggled-section ">
      Patch Set 6
      : Remove AnimationTimeline changes
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-100001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-120001-pointer"
       href="/2188623006/#ps120001"
       onclick="M_toggleSectionForPS('2188623006', '120001')"
       class="toggled-section opentriangle">
      Patch Set 7
      : Add bool check
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-120001"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 4 years, 4 months ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue2188623006_120001.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/2188623006/120001"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+9 lines, -0 lines</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2188623006/patch/120001/130002">
            third_party/WebKit/Source/core/animation/Animation.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2188623006/diff/120001/third_party/WebKit/Source/core/animation/Animation.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2188623006/diff2/1:120001/third_party/WebKit/Source/core/animation/Animation.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/2188623006/diff2/20001:120001/third_party/WebKit/Source/core/animation/Animation.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/2188623006/diff2/40001:120001/third_party/WebKit/Source/core/animation/Animation.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/2188623006/diff2/60001:120001/third_party/WebKit/Source/core/animation/Animation.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/2188623006/diff2/80001:120001/third_party/WebKit/Source/core/animation/Animation.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/2188623006/diff2/100001:120001/third_party/WebKit/Source/core/animation/Animation.h"
             title="Delta from patch set 6">6</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+2 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2188623006_120001_130002.diff"
             title="Download patch for third_party/WebKit/Source/core/animation/Animation.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2188623006/patch/120001/130001">
            third_party/WebKit/Source/core/animation/Animation.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2188623006/diff/120001/third_party/WebKit/Source/core/animation/Animation.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2188623006/diff2/1:120001/third_party/WebKit/Source/core/animation/Animation.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/2188623006/diff2/20001:120001/third_party/WebKit/Source/core/animation/Animation.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/2188623006/diff2/40001:120001/third_party/WebKit/Source/core/animation/Animation.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/2188623006/diff2/60001:120001/third_party/WebKit/Source/core/animation/Animation.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/2188623006/diff2/80001:120001/third_party/WebKit/Source/core/animation/Animation.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/2188623006/diff2/100001:120001/third_party/WebKit/Source/core/animation/Animation.cpp"
             title="Delta from patch set 6">6</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+7 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2188623006_120001_130001.diff"
             title="Download patch for third_party/WebKit/Source/core/animation/Animation.cpp">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
    <p>
      <i>Dependent Patchsets:</i>
      
        <div class="linethrough">
          <a href="/2188993004#ps20001">
            Issue 2188993004 Patch 20001
          </a>
        </div>
      
    </p>
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 120001;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 37 (16 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 37)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 37)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(37)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(37)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    generated"
           style="display: none"
           id="generated-msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          Description was changed from ========== fix BUG= ========== to ========== Add pre finalizer to Animation ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:21:14 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            >Description was changed from

==========
fix

BUG=
==========

to

==========
Add pre finalizer to Animation to ensure compositor handles get cleaned up

BUG=631052
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          alancutter@chromium.org changed reviewers: + haraken@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:21:14 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            ><a href="mailto:alancutter@chromium.org">alancutter@chromium.org</a> changed reviewers:
+ <a href="mailto:haraken@chromium.org">haraken@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:21:56 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            ></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          I&#39;m not sure what the best way to test this change is as the bug ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:25:45 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            >I&#39;m not sure what the best way to test this change is as the bug is from
threaded access to Animation from the impl thread during a GC between deleting
Animation and calling ~Animation().

There&#39;s no way to pause Oilpan half way between deleting and destruction in a
unit test is there?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          The CQ bit was checked by alancutter@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:30:12 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >The CQ bit was checked by <a href="mailto:alancutter@chromium.org">alancutter@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/20001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:30:25 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            >Dry run: CQ is trying da patch. Follow status at
 
<a href="https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/20001" rel="nofollow">https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.or...</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          On 2016/07/28 10:25:45, alancutter wrote: &gt; I&#39;m not sure what the best way to test ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:31:25 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            >On 2016/07/28 10:25:45, alancutter wrote:
&gt; I&#39;m not sure what the best way to test this change is as the bug is from
&gt; threaded access to Animation from the impl thread during a GC between deleting
&gt; Animation and calling ~Animation().
&gt; 
&gt; There&#39;s no way to pause Oilpan half way between deleting and destruction in a
&gt; unit test is there?

Animation::dispose() is already called by AnimationTimeline&#39;s pre-finalizer,
isn&#39;t it?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          On 2016/07/28 at 10:31:25, haraken wrote: &gt; On 2016/07/28 10:25:45, alancutter wrote: &gt; &gt; I&#39;m ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:37:51 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            >On 2016/07/28 at 10:31:25, haraken wrote:
&gt; On 2016/07/28 10:25:45, alancutter wrote:
&gt; &gt; I&#39;m not sure what the best way to test this change is as the bug is from
&gt; &gt; threaded access to Animation from the impl thread during a GC between
deleting
&gt; &gt; Animation and calling ~Animation().
&gt; &gt; 
&gt; &gt; There&#39;s no way to pause Oilpan half way between deleting and destruction in
a
&gt; &gt; unit test is there?
&gt; 
&gt; Animation::dispose() is already called by AnimationTimeline&#39;s pre-finalizer,
isn&#39;t it?

An Animation&#39;s lifetime can be shorter than AnimationTimeline.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:40:13 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          Dry run: Try jobs failed on following builders: android_arm64_dbg_recipe on master.tryserver.chromium.android (JOB_FAILED, https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm64_dbg_recipe/builds/103564)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:40:13 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            >Dry run: Try jobs failed on following builders:
  android_arm64_dbg_recipe on master.tryserver.chromium.android (JOB_FAILED,
<a href="https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm64_dbg_recipe/builds/103564" rel="nofollow">https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm6...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          On 2016/07/28 10:37:51, alancutter wrote: &gt; On 2016/07/28 at 10:31:25, haraken wrote: &gt; &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:40:46 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-10"
            >On 2016/07/28 10:37:51, alancutter wrote:
&gt; On 2016/07/28 at 10:31:25, haraken wrote:
&gt; &gt; On 2016/07/28 10:25:45, alancutter wrote:
&gt; &gt; &gt; I&#39;m not sure what the best way to test this change is as the bug is from
&gt; &gt; &gt; threaded access to Animation from the impl thread during a GC between
&gt; deleting
&gt; &gt; &gt; Animation and calling ~Animation().
&gt; &gt; &gt; 
&gt; &gt; &gt; There&#39;s no way to pause Oilpan half way between deleting and destruction
in
&gt; a
&gt; &gt; &gt; unit test is there?
&gt; &gt; 
&gt; &gt; Animation::dispose() is already called by AnimationTimeline&#39;s pre-finalizer,
&gt; isn&#39;t it?
&gt; 
&gt; An Animation&#39;s lifetime can be shorter than AnimationTimeline.

Would it be possible to explicitly call dispose() when the AnimationTimeline
loses references to the Animation object?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          On 2016/07/28 at 10:40:46, haraken wrote: &gt; On 2016/07/28 10:37:51, alancutter wrote: &gt; &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:52:22 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-11"
            >On 2016/07/28 at 10:40:46, haraken wrote:
&gt; On 2016/07/28 10:37:51, alancutter wrote:
&gt; &gt; On 2016/07/28 at 10:31:25, haraken wrote:
&gt; &gt; &gt; On 2016/07/28 10:25:45, alancutter wrote:
&gt; &gt; &gt; &gt; I&#39;m not sure what the best way to test this change is as the bug is from
&gt; &gt; &gt; &gt; threaded access to Animation from the impl thread during a GC between
&gt; &gt; deleting
&gt; &gt; &gt; &gt; Animation and calling ~Animation().
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; There&#39;s no way to pause Oilpan half way between deleting and destruction
in
&gt; &gt; a
&gt; &gt; &gt; &gt; unit test is there?
&gt; &gt; &gt; 
&gt; &gt; &gt; Animation::dispose() is already called by AnimationTimeline&#39;s
pre-finalizer,
&gt; &gt; isn&#39;t it?
&gt; &gt; 
&gt; &gt; An Animation&#39;s lifetime can be shorter than AnimationTimeline.
&gt; 
&gt; Would it be possible to explicitly call dispose() when the AnimationTimeline
loses references to the Animation object?

AnimationTimeline never explicitly removes its references to its Animations. It
keeps its references in a HeapHashSet&lt;WeakMember&lt;Animation&gt;&gt; so it&#39;s up to the
GC when they leave.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          On 2016/07/28 10:52:22, alancutter wrote: &gt; On 2016/07/28 at 10:40:46, haraken wrote: &gt; &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 10:57:11 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-12"
            >On 2016/07/28 10:52:22, alancutter wrote:
&gt; On 2016/07/28 at 10:40:46, haraken wrote:
&gt; &gt; On 2016/07/28 10:37:51, alancutter wrote:
&gt; &gt; &gt; On 2016/07/28 at 10:31:25, haraken wrote:
&gt; &gt; &gt; &gt; On 2016/07/28 10:25:45, alancutter wrote:
&gt; &gt; &gt; &gt; &gt; I&#39;m not sure what the best way to test this change is as the bug is
from
&gt; &gt; &gt; &gt; &gt; threaded access to Animation from the impl thread during a GC between
&gt; &gt; &gt; deleting
&gt; &gt; &gt; &gt; &gt; Animation and calling ~Animation().
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; There&#39;s no way to pause Oilpan half way between deleting and
destruction
&gt; in
&gt; &gt; &gt; a
&gt; &gt; &gt; &gt; &gt; unit test is there?
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Animation::dispose() is already called by AnimationTimeline&#39;s
&gt; pre-finalizer,
&gt; &gt; &gt; isn&#39;t it?
&gt; &gt; &gt; 
&gt; &gt; &gt; An Animation&#39;s lifetime can be shorter than AnimationTimeline.
&gt; &gt; 
&gt; &gt; Would it be possible to explicitly call dispose() when the AnimationTimeline
&gt; loses references to the Animation object?
&gt; 
&gt; AnimationTimeline never explicitly removes its references to its Animations.
It
&gt; keeps its references in a HeapHashSet&lt;WeakMember&lt;Animation&gt;&gt; so it&#39;s up to the
&gt; GC when they leave.

Ah, thanks. Now I understand. Then this CL makes sense, but we should instead
remove the pre-finalizer from AnimationTimeline (since it&#39;s no longer needed).

Just to confirm: I&#39;m assuming that there won&#39;t be too many Animation objects,
but is it correct?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          On 2016/07/28 at 10:57:11, haraken wrote: &gt; Ah, thanks. Now I understand. Then this CL ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:13:26 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-13"
            >On 2016/07/28 at 10:57:11, haraken wrote:
&gt; Ah, thanks. Now I understand. Then this CL makes sense, but we should instead
remove the pre-finalizer from AnimationTimeline (since it&#39;s no longer needed).
&gt; 
&gt; Just to confirm: I&#39;m assuming that there won&#39;t be too many Animation objects,
but is it correct?

Most sites will have &lt;100 at a time.
If performance is an issue would it be acceptable to move the call to
registerPreFinalizer(this) down into Animation::createCompositorPlayer()?
The dispose() won&#39;t do anything unless createCompositorPlayer() has been called
which is not the case for a large number of animations.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          On 2016/07/28 11:13:26, alancutter wrote: &gt; On 2016/07/28 at 10:57:11, haraken wrote: &gt; &gt; Ah, ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:16:26 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-14"
            >On 2016/07/28 11:13:26, alancutter wrote:
&gt; On 2016/07/28 at 10:57:11, haraken wrote:
&gt; &gt; Ah, thanks. Now I understand. Then this CL makes sense, but we should
instead
&gt; remove the pre-finalizer from AnimationTimeline (since it&#39;s no longer needed).
&gt; &gt; 
&gt; &gt; Just to confirm: I&#39;m assuming that there won&#39;t be too many Animation
objects,
&gt; but is it correct?
&gt; 
&gt; Most sites will have &lt;100 at a time.
&gt; If performance is an issue would it be acceptable to move the call to
&gt; registerPreFinalizer(this) down into Animation::createCompositorPlayer()?
&gt; The dispose() won&#39;t do anything unless createCompositorPlayer() has been
called
&gt; which is not the case for a large number of animations.

Yeah, that sounds nicer.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          On 2016/07/28 at 11:16:26, haraken wrote: &gt; On 2016/07/28 11:13:26, alancutter wrote: &gt; &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:41:32 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-15"
            >On 2016/07/28 at 11:16:26, haraken wrote:
&gt; On 2016/07/28 11:13:26, alancutter wrote:
&gt; &gt; On 2016/07/28 at 10:57:11, haraken wrote:
&gt; &gt; &gt; Ah, thanks. Now I understand. Then this CL makes sense, but we should
instead
&gt; &gt; remove the pre-finalizer from AnimationTimeline (since it&#39;s no longer
needed).
&gt; &gt; &gt; 
&gt; &gt; &gt; Just to confirm: I&#39;m assuming that there won&#39;t be too many Animation
objects,
&gt; &gt; but is it correct?
&gt; &gt; 
&gt; &gt; Most sites will have &lt;100 at a time.
&gt; &gt; If performance is an issue would it be acceptable to move the call to
&gt; &gt; registerPreFinalizer(this) down into Animation::createCompositorPlayer()?
&gt; &gt; The dispose() won&#39;t do anything unless createCompositorPlayer() has been
called
&gt; &gt; which is not the case for a large number of animations.
&gt; 
&gt; Yeah, that sounds nicer.

Moved the call to registerPreFinalizer().</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          The CQ bit was checked by alancutter@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:41:43 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-16"
            >The CQ bit was checked by <a href="mailto:alancutter@chromium.org">alancutter@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-17">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/40001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:42:01 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-17"
            >Dry run: CQ is trying da patch. Follow status at
 
<a href="https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/40001" rel="nofollow">https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.or...</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg19"
           name="18">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(18)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-18">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:51:18 UTC)
                <a href="#msg19">#19</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-18"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-18"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg20"
           name="19">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(19)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-19">
                          Dry run: Try jobs failed on following builders: android_arm64_dbg_recipe on master.tryserver.chromium.android (JOB_FAILED, https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm64_dbg_recipe/builds/103587)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:51:19 UTC)
                <a href="#msg20">#20</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-19"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-19"
            >Dry run: Try jobs failed on following builders:
  android_arm64_dbg_recipe on master.tryserver.chromium.android (JOB_FAILED,
<a href="https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm64_dbg_recipe/builds/103587" rel="nofollow">https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm6...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg21"
           name="20">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(20)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-20">
                          On 2016/07/28 11:41:32, alancutter wrote: &gt; On 2016/07/28 at 11:16:26, haraken wrote: &gt; &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 11:51:51 UTC)
                <a href="#msg21">#21</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-20"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-20"
            >On 2016/07/28 11:41:32, alancutter wrote:
&gt; On 2016/07/28 at 11:16:26, haraken wrote:
&gt; &gt; On 2016/07/28 11:13:26, alancutter wrote:
&gt; &gt; &gt; On 2016/07/28 at 10:57:11, haraken wrote:
&gt; &gt; &gt; &gt; Ah, thanks. Now I understand. Then this CL makes sense, but we should
&gt; instead
&gt; &gt; &gt; remove the pre-finalizer from AnimationTimeline (since it&#39;s no longer
&gt; needed).
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Just to confirm: I&#39;m assuming that there won&#39;t be too many Animation
&gt; objects,
&gt; &gt; &gt; but is it correct?
&gt; &gt; &gt; 
&gt; &gt; &gt; Most sites will have &lt;100 at a time.
&gt; &gt; &gt; If performance is an issue would it be acceptable to move the call to
&gt; &gt; &gt; registerPreFinalizer(this) down into Animation::createCompositorPlayer()?
&gt; &gt; &gt; The dispose() won&#39;t do anything unless createCompositorPlayer() has been
&gt; called
&gt; &gt; &gt; which is not the case for a large number of animations.
&gt; &gt; 
&gt; &gt; Yeah, that sounds nicer.
&gt; 
&gt; Moved the call to registerPreFinalizer().

Thanks. And can we now remove the pre-finalizer from AnimationTlimeline?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg22"
           name="21">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(21)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-21">
                          On 2016/07/28 at 11:51:51, haraken wrote: &gt; On 2016/07/28 11:41:32, alancutter wrote: &gt; &gt; Moved ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:01:04 UTC)
                <a href="#msg22">#22</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-21"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-21"
            >On 2016/07/28 at 11:51:51, haraken wrote:
&gt; On 2016/07/28 11:41:32, alancutter wrote:
&gt; &gt; Moved the call to registerPreFinalizer().
&gt; 
&gt; Thanks. And can we now remove the pre-finalizer from AnimationTlimeline?

I believe so. Moved the dispose() calls into ~AnimationTimeline and removed its
pre-finalizer.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg23"
           name="22">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(22)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-22">
                          https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp File third_party/WebKit/Source/core/animation/AnimationTimeline.cpp (right): https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp#newcode92 third_party/WebKit/Source/core/animation/AnimationTimeline.cpp:92: animation-&gt;dispose(); I was assuming that we can entirely stop ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:04:26 UTC)
                <a href="#msg23">#23</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-22"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-22"
            ><a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
File third_party/WebKit/Source/core/animation/AnimationTimeline.cpp (right):

<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp#newcode92" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
third_party/WebKit/Source/core/animation/AnimationTimeline.cpp:92:
animation-&gt;dispose();

I was assuming that we can entirely stop calling animation-&gt;dispose() because
now Animation objects dispose itself in their pre-finalizer.

If my understanding is wrong, we need to keep AnimationTimeline&#39;s pre-finalizer
as is because AnimationTimeline&#39;s destructor is not allowed to touch other
on-heap objects (i.e., m_animations).</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg24"
           name="23">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(23)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-23">
                          On 2016/07/28 at 12:04:26, haraken wrote: &gt; https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp &gt; File third_party/WebKit/Source/core/animation/AnimationTimeline.cpp (right): &gt; &gt; https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp#newcode92 ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:34:31 UTC)
                <a href="#msg24">#24</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-23"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-23"
            >On 2016/07/28 at 12:04:26, haraken wrote:
&gt;
<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
&gt; File third_party/WebKit/Source/core/animation/AnimationTimeline.cpp (right):
&gt; 
&gt;
<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp#newcode92" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
&gt; third_party/WebKit/Source/core/animation/AnimationTimeline.cpp:92:
animation-&gt;dispose();
&gt; 
&gt; I was assuming that we can entirely stop calling animation-&gt;dispose() because
now Animation objects dispose itself in their pre-finalizer.
&gt; 
&gt; If my understanding is wrong, we need to keep AnimationTimeline&#39;s
pre-finalizer as is because AnimationTimeline&#39;s destructor is not allowed to
touch other on-heap objects (i.e., m_animations).

I was thinking it might still be needed in case Animations outlive
AnimationTimeline but since Animations have a Member&lt;AnimationTimeline&gt; that
won&#39;t be the case.
Removed ~AnimationTimeline(), GarbageCollectedFinalized is still needed due to
unique_ptr member.

Do you mind if I make these changes to AnimationTimeline in a follow up patch?
I&#39;d like to keep this patch as small as possible.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg25"
           name="24">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(24)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>haraken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-24">
                          On 2016/07/28 12:34:31, alancutter wrote: &gt; On 2016/07/28 at 12:04:26, haraken wrote: &gt; &gt; &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:35:38 UTC)
                <a href="#msg25">#25</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-24"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-24"
            >On 2016/07/28 12:34:31, alancutter wrote:
&gt; On 2016/07/28 at 12:04:26, haraken wrote:
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
&gt; &gt; File third_party/WebKit/Source/core/animation/AnimationTimeline.cpp (right):
&gt; &gt; 
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp#newcode92" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
&gt; &gt; third_party/WebKit/Source/core/animation/AnimationTimeline.cpp:92:
&gt; animation-&gt;dispose();
&gt; &gt; 
&gt; &gt; I was assuming that we can entirely stop calling animation-&gt;dispose()
because
&gt; now Animation objects dispose itself in their pre-finalizer.
&gt; &gt; 
&gt; &gt; If my understanding is wrong, we need to keep AnimationTimeline&#39;s
&gt; pre-finalizer as is because AnimationTimeline&#39;s destructor is not allowed to
&gt; touch other on-heap objects (i.e., m_animations).
&gt; 
&gt; I was thinking it might still be needed in case Animations outlive
&gt; AnimationTimeline but since Animations have a Member&lt;AnimationTimeline&gt; that
&gt; won&#39;t be the case.
&gt; Removed ~AnimationTimeline(), GarbageCollectedFinalized is still needed due to
&gt; unique_ptr member.
&gt; 
&gt; Do you mind if I make these changes to AnimationTimeline in a follow up patch?
&gt; I&#39;d like to keep this patch as small as possible.

Sure, PS3 LGTM</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg26"
           name="25">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(25)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-25">
                          On 2016/07/28 at 12:35:38, haraken wrote: &gt; On 2016/07/28 12:34:31, alancutter wrote: &gt; &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:41:38 UTC)
                <a href="#msg26">#26</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-25"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-25"
            >On 2016/07/28 at 12:35:38, haraken wrote:
&gt; On 2016/07/28 12:34:31, alancutter wrote:
&gt; &gt; On 2016/07/28 at 12:04:26, haraken wrote:
&gt; &gt; &gt;
&gt; &gt;
<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
&gt; &gt; &gt; File third_party/WebKit/Source/core/animation/AnimationTimeline.cpp
(right):
&gt; &gt; &gt; 
&gt; &gt; &gt;
&gt; &gt;
<a href="https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Source/core/animation/AnimationTimeline.cpp#newcode92" rel="nofollow">https://codereview.chromium.org/2188623006/diff/60001/third_party/WebKit/Sour...</a>
&gt; &gt; &gt; third_party/WebKit/Source/core/animation/AnimationTimeline.cpp:92:
&gt; &gt; animation-&gt;dispose();
&gt; &gt; &gt; 
&gt; &gt; &gt; I was assuming that we can entirely stop calling animation-&gt;dispose()
because
&gt; &gt; now Animation objects dispose itself in their pre-finalizer.
&gt; &gt; &gt; 
&gt; &gt; &gt; If my understanding is wrong, we need to keep AnimationTimeline&#39;s
&gt; &gt; pre-finalizer as is because AnimationTimeline&#39;s destructor is not allowed to
&gt; &gt; touch other on-heap objects (i.e., m_animations).
&gt; &gt; 
&gt; &gt; I was thinking it might still be needed in case Animations outlive
&gt; &gt; AnimationTimeline but since Animations have a Member&lt;AnimationTimeline&gt; that
&gt; &gt; won&#39;t be the case.
&gt; &gt; Removed ~AnimationTimeline(), GarbageCollectedFinalized is still needed due
to
&gt; &gt; unique_ptr member.
&gt; &gt; 
&gt; &gt; Do you mind if I make these changes to AnimationTimeline in a follow up
patch?
&gt; &gt; I&#39;d like to keep this patch as small as possible.
&gt; 
&gt; Sure, PS3 LGTM

Thanks for the after hours review!</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg27"
           name="26">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(26)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-26">
                          The CQ bit was checked by alancutter@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:41:47 UTC)
                <a href="#msg27">#27</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-26"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-26"
            >The CQ bit was checked by <a href="mailto:alancutter@chromium.org">alancutter@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg28"
           name="27">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(27)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-27">
                          The patchset sent to the CQ was uploaded after l-g-t-m from haraken@chromium.org Link to the ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:41:47 UTC)
                <a href="#msg28">#28</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-27"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-27"
            >The patchset sent to the CQ was uploaded after l-g-t-m from <a href="mailto:haraken@chromium.org">haraken@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/2188623006/#ps100001" rel="nofollow">https://codereview.chromium.org/2188623006/#ps100001</a>
(title: &quot;Remove AnimationTimeline changes&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg29"
           name="28">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(28)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-28">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/100001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:42:01 UTC)
                <a href="#msg29">#29</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-28"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-28"
            >CQ is trying da patch. Follow status at
 
<a href="https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/100001" rel="nofollow">https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.or...</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg30"
           name="29">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(29)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-29">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:53:08 UTC)
                <a href="#msg30">#30</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-29"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-29"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg31"
           name="30">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(30)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-30">
                          Try jobs failed on following builders: android_arm64_dbg_recipe on master.tryserver.chromium.android (JOB_FAILED, https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm64_dbg_recipe/builds/103603)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-28 12:53:09 UTC)
                <a href="#msg31">#31</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-30"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-30"
            >Try jobs failed on following builders:
  android_arm64_dbg_recipe on master.tryserver.chromium.android (JOB_FAILED,
<a href="https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm64_dbg_recipe/builds/103603" rel="nofollow">https://build.chromium.org/p/tryserver.chromium.android/builders/android_arm6...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg32"
           name="31">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(31)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-31">
                          The CQ bit was checked by alancutter@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-29 00:51:52 UTC)
                <a href="#msg32">#32</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-31"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-31"
            >The CQ bit was checked by <a href="mailto:alancutter@chromium.org">alancutter@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg33"
           name="32">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(32)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alancutter (OOO until 2018)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-32">
                          The patchset sent to the CQ was uploaded after l-g-t-m from haraken@chromium.org Link to the ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-29 00:51:52 UTC)
                <a href="#msg33">#33</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-32"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-32"
            >The patchset sent to the CQ was uploaded after l-g-t-m from <a href="mailto:haraken@chromium.org">haraken@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/2188623006/#ps120001" rel="nofollow">https://codereview.chromium.org/2188623006/#ps120001</a>
(title: &quot;Add bool check&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg34"
           name="33">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(33)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-33">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/120001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-29 00:52:15 UTC)
                <a href="#msg34">#34</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-33"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-33"
            >CQ is trying da patch. Follow status at
 
<a href="https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.org/2188623006/120001" rel="nofollow">https://chromium-cq-status.appspot.com/v2/patch-status/codereview.chromium.or...</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg35"
           name="34">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(34)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-34">
                          Committed patchset #7 (id:120001)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-29 02:03:50 UTC)
                <a href="#msg35">#35</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-34"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-34"
            >Committed patchset #7 (id:120001)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   generated"
           style="display: none"
           id="generated-msg36"
           name="35">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(35)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-35">
                          Description was changed from ========== Add pre finalizer to Animation to ensure compositor handles get ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-29 02:05:51 UTC)
                <a href="#msg36">#36</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-35"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-35"
            >Description was changed from

==========
Add pre finalizer to Animation to ensure compositor handles get cleaned up

BUG=631052
==========

to

==========
Add pre finalizer to Animation to ensure compositor handles get cleaned up

BUG=631052

Committed: <a href="https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824" rel="nofollow">https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824</a>
Cr-Commit-Position: refs/heads/master@{#408554}
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg37"
           name="36">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(36)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-36">
                          Patchset 7 (id:??) landed as https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824 Cr-Commit-Position: refs/heads/master@{#408554}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 4 months ago
		(2016-07-29 02:05:52 UTC)
                <a href="#msg37">#37</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-36"
             >
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-36"
            >Patchset 7 (id:??) landed as
<a href="https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824" rel="nofollow">https://crrev.com/7fec064b3a37032605f091ba1ba52846c0e05824</a>
Cr-Commit-Position: refs/heads/master@{#408554}</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 37)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 37)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(37)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(37)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 37;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 2188623006;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 2188623006: Add pre finalizer to Animation to ensure compositor handles get cleaned up
     (Closed) </b><br/>
      Created 4 years, 4 months ago by alancutter (OOO until 2018)<br/>
      Modified 4 years, 4 months ago<br/>
      Reviewers: haraken<br/>
      Base URL: https://chromium.googlesource.com/chromium/src.git@master<br/>
      Comments: 1
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
