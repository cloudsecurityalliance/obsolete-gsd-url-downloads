<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#746579 - liblwp-protocol-https-perl: CVE-2014-3230: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate verification for IO::Socket::SSL - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=746579&quot;&gt;746579&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:746579@bugs.debian.org">#746579</a><br>
liblwp-protocol-https-perl: CVE-2014-3230: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate verification for IO::Socket::SSL</h1>
<div class="versiongraph"><a href="version.cgi?package=liblwp-protocol-https-perl;found=liblwp-protocol-https-perl%2F6.04-1;collapse=1;absolute=0;info=1;fixed=liblwp-protocol-https-perl%2F6.04-3"><img alt="version graph" src="version.cgi?package=liblwp-protocol-https-perl;found=liblwp-protocol-https-perl%2F6.04-1;collapse=1;width=2;fixed=liblwp-protocol-https-perl%2F6.04-3;absolute=0;height=2"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=liblwp-protocol-https-perl">liblwp-protocol-https-perl</a>;
Maintainer for <a href="pkgreport.cgi?package=liblwp-protocol-https-perl">liblwp-protocol-https-perl</a> is <a href="pkgreport.cgi?maint=pkg-perl-maintainers%40lists.alioth.debian.org">Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=liblwp-protocol-https-perl">liblwp-protocol-https-perl</a> is <a href="pkgreport.cgi?src=liblwp-protocol-https-perl">src:liblwp-protocol-https-perl</a> (<a href="https://tracker.debian.org/pkg/liblwp-protocol-https-perl">PTS</a>, <a href="https://buildd.debian.org/liblwp-protocol-https-perl">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=liblwp-protocol-https-perl">popcon</a>). </p>
<p>Affects: <a class="submitter" href="pkgreport.cgi?package=libwww-perl">libwww-perl</a></p>
</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=jwilk%40debian.org">Jakub Wilk &lt;jwilk@debian.org&gt;</a></p>
  <p>Date: Thu,  1 May 2014 15:27:11 UTC</p>

<p>Severity: <em class="severity">serious</em></p>
<p>Tags: confirmed, security</p>
<p>Merged with <a href="bugreport.cgi?bug=735422">735422</a></p>

<p>Found in version liblwp-protocol-https-perl/6.04-1</p>
<p>Fixed in version liblwp-protocol-https-perl/6.04-3</p>

<p><strong>Done:</strong> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p></div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=746579;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, jwilk@debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1398958036 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, jwilk@debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>libwww-perl</code>.
 (Thu, 01 May 2014 15:27:16 GMT) (<a href="bugreport.cgi?bug=746579;msg=2">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="3"></a><a name="msg3"></a><a href="#3">Message #3</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=3">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=3">mbox</a>, <a href="mailto:746579@bugs.debian.org?body=On%20Thu%2C%201%20May%202014%2017%3A24%3A25%20%2B0200%20Jakub%20Wilk%20%3Cjwilk%40debian.org%3E%20wrote%3A%0A%3E%20Package%3A%20libwww-perl%0A%3E%20Version%3A%206.06-1%0A%3E%20Tags%3A%20security%0A%3E%20Usertags%3A%20serious%0A%3E%20%0A%3E%20If%20LWP%20uses%20IO%3A%3ASocket%3A%3ASSL%20as%20SSL%20socket%20class%20%28this%20is%20the%20default%29%2C%20%0A%3E%20setting%20HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20environment%20variable%20disables%28%21%29%20%0A%3E%20server%20cerificate%20verification%3A%0A%3E%20%0A%3E%20%24%20export%20PERL_NET_HTTPS_SSL_SOCKET_CLASS%3DIO%3A%3ASocket%3A%3ASSL%0A%3E%20%0A%3E%20%24%20GET%20https%3A%2F%2Fwww.berlios.de%2F%0A%3E%20Can%27t%20connect%20to%20www.berlios.de%3A443%0A%3E%20%0A%3E%20%24%20HTTPS_CA_DIR%3D%2Fetc%2Fssl%2Fcerts%2F%20GET%20https%3A%2F%2Fwww.berlios.de%2F%20%7C%20grep%20%27%3C%21DOCTYPE%27%0A%3E%20%09%09%3C%21DOCTYPE%20html%3E%0A%3E%20%0A%3E%20%0A%3E%20This%20is%20counter-intuitive%2C%20and%20also%20the%20opposite%20of%20Net%3A%3ASSL%20behavior%2C%20%0A%3E%20which%20does%20certificate%20verification%20only%20if%20you%20set%20one%20of%20these%20%0A%3E%20variables.%0A%3E%20%0A%3E%20%0A%3E%20--%20System%20Information%3A%0A%3E%20Debian%20Release%3A%20jessie%2Fsid%0A%3E%20%20%20APT%20prefers%20unstable%0A%3E%20%20%20APT%20policy%3A%20%28990%2C%20%27unstable%27%29%2C%20%28500%2C%20%27experimental%27%29%0A%3E%20Architecture%3A%20i386%20%28x86_64%29%0A%3E%20Foreign%20Architectures%3A%20amd64%0A%3E%20%0A%3E%20Kernel%3A%20Linux%203.12-1-amd64%20%28SMP%20w%2F2%20CPU%20cores%29%0A%3E%20Locale%3A%20LANG%3DC%2C%20LC_CTYPE%3Dpl_PL.UTF-8%20%28charmap%3DUTF-8%29%0A%3E%20Shell%3A%20%2Fbin%2Fsh%20linked%20to%20%2Fbin%2Fdash%0A%3E%20%0A%3E%20Versions%20of%20packages%20libwww-perl%20depends%20on%3A%0A%3E%20ii%20%20ca-certificates%20%20%20%20%20%20%20%20%20%20%20%20%2020140325%0A%3E%20ii%20%20libencode-locale-perl%20%20%20%20%20%20%201.03-1%0A%3E%20ii%20%20libfile-listing-perl%20%20%20%20%20%20%20%206.04-1%0A%3E%20ii%20%20libhtml-parser-perl%20%20%20%20%20%20%20%20%203.71-1%2Bb1%0A%3E%20ii%20%20libhtml-tagset-perl%20%20%20%20%20%20%20%20%203.20-2%0A%3E%20ii%20%20libhtml-tree-perl%20%20%20%20%20%20%20%20%20%20%205.03-1%0A%3E%20ii%20%20libhttp-cookies-perl%20%20%20%20%20%20%20%206.00-2%0A%3E%20ii%20%20libhttp-date-perl%20%20%20%20%20%20%20%20%20%20%206.02-1%0A%3E%20ii%20%20libhttp-message-perl%20%20%20%20%20%20%20%206.06-1%0A%3E%20ii%20%20libhttp-negotiate-perl%20%20%20%20%20%206.00-2%0A%3E%20ii%20%20liblwp-mediatypes-perl%20%20%20%20%20%206.02-1%0A%3E%20ii%20%20liblwp-protocol-https-perl%20%206.04-2%0A%3E%20ii%20%20libnet-http-perl%20%20%20%20%20%20%20%20%20%20%20%206.06-1%0A%3E%20ii%20%20liburi-perl%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201.60-1%0A%3E%20ii%20%20libwww-robotrules-perl%20%20%20%20%20%206.01-1%0A%3E%20ii%20%20netbase%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%205.2%0A%3E%20ii%20%20perl%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%205.18.2-2%2Bb1%0A%3E%20%0A%3E%20--%20%0A%3E%20Jakub%20Wilk%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20140501152425.GA5143%40jwilk.net%3E&amp;References=%3C20140501152425.GA5143%40jwilk.net%3E&amp;subject=Re%3A%20libwww-perl%3A%20HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20disables%20peer%20certificate%0A%20verification%20for%20IO%3A%3ASocket%3A%3ASSL">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jwilk%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Jakub Wilk &lt;jwilk@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> libwww-perl: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate
 verification for IO::Socket::SSL</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 1 May 2014 17:24:25 +0200</div>
</div>
<pre class="message flowed">Package: libwww-perl
Version: 6.06-1
Tags: security
Usertags: serious

If LWP uses IO::Socket::SSL as SSL socket class (this is the default), 
setting HTTPS_CA_DIR or HTTPS_CA_FILE environment variable disables(!) 
server cerificate verification:

$ export PERL_NET_HTTPS_SSL_SOCKET_CLASS=IO::Socket::SSL

$ GET <a href="https://www.berlios.de/">https://www.berlios.de/</a>
Can&#39;t connect to www.berlios.de:443

$ HTTPS_CA_DIR=/etc/ssl/certs/ GET <a href="https://www.berlios.de/">https://www.berlios.de/</a> | grep &#39;&lt;!DOCTYPE&#39;
		&lt;!DOCTYPE html&gt;


This is counter-intuitive, and also the opposite of Net::SSL behavior, 
which does certificate verification only if you set one of these 
variables.


-- System Information:
Debian Release: jessie/sid
 APT prefers unstable
 APT policy: (990, &#39;unstable&#39;), (500, &#39;experimental&#39;)
Architecture: i386 (x86_64)
Foreign Architectures: amd64

Kernel: Linux 3.12-1-amd64 (SMP w/2 CPU cores)
Locale: LANG=C, LC_CTYPE=pl_PL.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash

Versions of packages libwww-perl depends on:
ii  ca-certificates             20140325
ii  libencode-locale-perl       1.03-1
ii  libfile-listing-perl        6.04-1
ii  libhtml-parser-perl         3.71-1+b1
ii  libhtml-tagset-perl         3.20-2
ii  libhtml-tree-perl           5.03-1
ii  libhttp-cookies-perl        6.00-2
ii  libhttp-date-perl           6.02-1
ii  libhttp-message-perl        6.06-1
ii  libhttp-negotiate-perl      6.00-2
ii  liblwp-mediatypes-perl      6.02-1
ii  liblwp-protocol-https-perl  6.04-2
ii  libnet-http-perl            6.06-1
ii  liburi-perl                 1.60-1
ii  libwww-robotrules-perl      6.01-1
ii  netbase                     5.2
ii  perl                        5.18.2-2+b1

-- 
Jakub Wilk


</pre>

<div class="infmessage"><hr><p>
<a name="4"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399038304 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>libwww-perl</code>.
 (Fri, 02 May 2014 13:45:04 GMT) (<a href="bugreport.cgi?bug=746579;msg=5">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=5">mbox</a>, <a href="#4">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="6"></a><a name="msg6"></a><a href="#6">Message #6</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=6">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=6">mbox</a>, <a href="mailto:746579@bugs.debian.org?subject=Re%3A%20Bug%23746579%3A%20libwww-perl%3A%20HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20disables%0A%20peer%20certificate%20verification%20for%20IO%3A%3ASocket%3A%3ASSL&amp;References=%3C20140501152425.GA5143%40jwilk.net%3E%0A%20%3C20140502134342.GA2366%40jwilk.net%3E&amp;In-Reply-To=%3C20140502134342.GA2366%40jwilk.net%3E&amp;body=On%20Fri%2C%202%20May%202014%2015%3A44%3A01%20%2B0200%20Jakub%20Wilk%20%3Cjwilk%40debian.org%3E%20wrote%3A%0A%3E%20%2A%20Jakub%20Wilk%20%3Cjwilk%40debian.org%3E%2C%202014-05-01%2C%2017%3A24%3A%0A%3E%20%3EIf%20LWP%20uses%20IO%3A%3ASocket%3A%3ASSL%20as%20SSL%20socket%20class%20%28this%20is%20the%20default%29%2C%20%0A%3E%20%3Esetting%20HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20environment%20variable%20disables%28%21%29%20%0A%3E%20%3Eserver%20cerificate%20verification%3A%0A%3E%20%0A%3E%20This%20is%20what%27s%20going%20on%3A%0A%3E%20%0A%3E%20In%20LWP%3A%3AUserAgent%20we%20have%20this%3A%0A%3E%20%0A%3E%20%20%20%20%20%20%20%20%20elsif%20%28%24ENV%7BHTTPS_CA_FILE%7D%20%7C%7C%20%24ENV%7BHTTPS_CA_DIR%7D%29%20%7B%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Crypt-SSLeay%20compatibility%20%28verify%20peer%20certificate%3B%20but%20not%20the%20hostname%29%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%24ssl_opts-%3E%7Bverify_hostname%7D%20%3D%200%3B%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%24ssl_opts-%3E%7BSSL_verify_mode%7D%20%3D%201%3B%0A%3E%20%20%20%20%20%20%20%20%20%7D%0A%3E%20%0A%3E%20But%20in%20LWP%3A%3AProtocol%3A%3AHTTPS%20we%20have%20this%3A%0A%3E%20%0A%3E%20%20%20%20%20if%20%28delete%20%24ssl_opts%7Bverify_hostname%7D%29%20%7B%0A%3E%20%20%20%20%20%20%20%20%20%24ssl_opts%7BSSL_verify_mode%7D%20%7C%7C%3D%201%3B%0A%3E%20%20%20%20%20%20%20%20%20%24ssl_opts%7BSSL_verifycn_scheme%7D%20%3D%20%27www%27%3B%0A%3E%20%20%20%20%20%7D%0A%3E%20%20%20%20%20else%20%7B%0A%3E%20%20%20%20%20%20%20%20%20%24ssl_opts%7BSSL_verify_mode%7D%20%3D%200%3B%0A%3E%20%20%20%20%20%7D%0A%3E%20%0A%3E%20So%20the%20intention%20was%20to%20disable%20only%20hostname%20verification%2C%20for%20%0A%3E%20compatibility%20with%20Crypt%3A%3ASSLeay%20%28why%3F%21%29%2C%20but%20the%20effect%20is%20that%20the%20%0A%3E%20SSL_verify_mode%20is%20set%20to%200.%0A%3E%20%0A%3E%20--%20%0A%3E%20Jakub%20Wilk%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jwilk%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Jakub Wilk &lt;jwilk@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 746579@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#746579: libwww-perl: HTTPS_CA_DIR or HTTPS_CA_FILE disables
 peer certificate verification for IO::Socket::SSL</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 2 May 2014 15:44:01 +0200</div>
</div>
<pre class="message flowed">* Jakub Wilk &lt;jwilk@debian.org&gt;, 2014-05-01, 17:24:
&gt;If LWP uses IO::Socket::SSL as SSL socket class (this is the default), 
&gt;setting HTTPS_CA_DIR or HTTPS_CA_FILE environment variable disables(!) 
&gt;server cerificate verification:

This is what&#39;s going on:

In LWP::UserAgent we have this:

       elsif ($ENV{HTTPS_CA_FILE} || $ENV{HTTPS_CA_DIR}) {
           # Crypt-SSLeay compatibility (verify peer certificate; but not the hostname)
           $ssl_opts-&gt;{verify_hostname} = 0;
           $ssl_opts-&gt;{SSL_verify_mode} = 1;
       }

But in LWP::Protocol::HTTPS we have this:

   if (delete $ssl_opts{verify_hostname}) {
       $ssl_opts{SSL_verify_mode} ||= 1;
       $ssl_opts{SSL_verifycn_scheme} = &#39;www&#39;;
   }
   else {
       $ssl_opts{SSL_verify_mode} = 0;
   }

So the intention was to disable only hostname verification, for 
compatibility with Crypt::SSLeay (why?!), but the effect is that the 
SSL_verify_mode is set to 0.

-- 
Jakub Wilk


</pre>

<div class="msgreceived"><hr><p>
<a name="7"></a>
<!-- command:tag -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399096989 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;confirmed security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<strong>Added tag(s) confirmed.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 03 May 2014 06:03:09 GMT) (<a href="bugreport.cgi?bug=746579;msg=8">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=8">mbox</a>, <a href="#7">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="9"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399152788 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>libwww-perl</code>.
 (Sat, 03 May 2014 21:33:08 GMT) (<a href="bugreport.cgi?bug=746579;msg=10">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=10">mbox</a>, <a href="#9">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: Steffen Ullrich &lt;coyote.frank@gmx.net&gt; -->
<!-- time:1399152788 -->
<strong>Acknowledgement sent</strong>
to <code>Steffen Ullrich &lt;coyote.frank@gmx.net&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>.
 (Sat, 03 May 2014 21:33:08 GMT) (<a href="bugreport.cgi?bug=746579;msg=12">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="13"></a><a name="msg13"></a><a href="#13">Message #13</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=13">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=13">mbox</a>, <a href="mailto:746579@bugs.debian.org?References=%3C53655F7E.2050106%40gmx.net%3E&amp;subject=Re%3A%20Fix%20can%20be%20found%20here&amp;In-Reply-To=%3C53655F7E.2050106%40gmx.net%3E&amp;body=On%20Sat%2C%2003%20May%202014%2023%3A28%3A30%20%2B0200%20Steffen%20Ullrich%20%3Ccoyote.frank%40gmx.net%3E%20wrote%3A%0A%3E%20https%3A%2F%2Fgithub.com%2Flibwww-perl%2Flwp-protocol-https%2Fpull%2F14%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Steffen%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=coyote.frank%40gmx.net" alt="">
<div class="header"><span class="headerfield">From:</span> Steffen Ullrich &lt;coyote.frank@gmx.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> 746579@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Fix can be found here</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 03 May 2014 23:28:30 +0200</div>
</div>
<pre class="message flowed"><a href="https://github.com/libwww-perl/lwp-protocol-https/pull/14">https://github.com/libwww-perl/lwp-protocol-https/pull/14</a>

Regards,
Steffen


</pre>

<div class="msgreceived"><hr><p>
<a name="14"></a>
<!-- command:package -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399179796 -->
<!-- new_data:
$new_data = {
              &#39;package&#39; =&gt; &#39;liblwp-protocol-https-perl&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;package&#39; =&gt; &#39;libwww-perl&#39;
            };
-->
<strong>Bug reassigned from package &#39;<a href="pkgreport.cgi?package=libwww-perl">libwww-perl</a>&#39; to &#39;<a href="pkgreport.cgi?package=liblwp-protocol-https-perl">liblwp-protocol-https-perl</a>&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 04 May 2014 05:03:16 GMT) (<a href="bugreport.cgi?bug=746579;msg=15">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=15">mbox</a>, <a href="#14">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399179797 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; []
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;libwww-perl/6.06-1&#39;
                                  ]
            };
-->
<strong>No longer marked as found in versions libwww-perl/6.06-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 04 May 2014 05:03:17 GMT) (<a href="bugreport.cgi?bug=746579;msg=17">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="18"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399179798 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;liblwp-protocol-https-perl/6.04-1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; []
            };
-->
<strong>Marked as found in versions liblwp-protocol-https-perl/6.04-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 04 May 2014 05:03:18 GMT) (<a href="bugreport.cgi?bug=746579;msg=19">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="20"></a>
<!-- command:affects -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399179799 -->
<!-- new_data:
$new_data = {
              &#39;affects&#39; =&gt; &#39;libwww-perl&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;affects&#39; =&gt; &#39;&#39;
            };
-->
<strong>Added indication that 746579 affects libwww-perl</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 04 May 2014 05:03:19 GMT) (<a href="bugreport.cgi?bug=746579;msg=21">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="22"></a>
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399179800 -->
<strong>Severity set to &#39;serious&#39; from &#39;normal&#39;</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 04 May 2014 05:03:20 GMT) (<a href="bugreport.cgi?bug=746579;msg=23">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=23">mbox</a>, <a href="#22">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="24"></a>
<!-- command:tag -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1399179801 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;confirmed security pending&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;confirmed security&#39;
            };
-->
<strong>Added tag(s) pending.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sun, 04 May 2014 05:03:21 GMT) (<a href="bugreport.cgi?bug=746579;msg=25">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=25">mbox</a>, <a href="#24">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="26"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399180875 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>liblwp-protocol-https-perl</code>.
 (Sun, 04 May 2014 05:21:15 GMT) (<a href="bugreport.cgi?bug=746579;msg=27">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=27">mbox</a>, <a href="#26">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="28"></a><a name="msg28"></a><a href="#28">Message #28</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=28">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=28">mbox</a>, <a href="mailto:746579@bugs.debian.org?In-Reply-To=%3CE1WgonY-0001F8-3N%40moszumanska.debian.org%3E&amp;body=On%20Sun%2C%2004%20May%202014%2005%3A17%3A12%20%2B0000%20pkg-perl-maintainers%40lists.alioth.debian.org%20wrote%3A%0A%3E%20tag%20746579%20%2B%20pending%0A%3E%20thanks%0A%3E%20%0A%3E%20Some%20bugs%20in%20the%20liblwp-protocol-https-perl%20package%20are%20closed%20in%0A%3E%20revision%2052883a3bed1d53924ed86d4551efb1e1510a1594%20in%20branch%20%27master%27%0A%3E%20by%20Salvatore%20Bonaccorso%0A%3E%20%0A%3E%20The%20full%20diff%20can%20be%20seen%20at%0A%3E%20http%3A%2F%2Fanonscm.debian.org%2Fgitweb%2F%3Fp%3Dpkg-perl%2Fpackages%2Fliblwp-protocol-https-perl.git%3Ba%3Dcommitdiff%3Bh%3D52883a3%0A%3E%20%0A%3E%20Commit%20message%3A%0A%3E%20%0A%3E%20%20%20%20%20Add%20746579-fix-peer-certificate-verification.patch%20patch%0A%3E%20%20%20%20%20%0A%3E%20%20%20%20%20Fixes%20%22HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20disables%20peer%20certificate%0A%3E%20%20%20%20%20verification%20for%20IO%3A%3ASocket%3A%3ASSL%22.%20When%20the%20intention%20was%20to%20only%0A%3E%20%20%20%20%20disable%20hostname%20verification%20LWP%3A%3AProtocol%3A%3AHTTPS%20disabled%20also%20the%0A%3E%20%20%20%20%20peer%20certificate%20verification%20completely.%0A%3E%20%20%20%20%20%0A%3E%20%20%20%20%20Thanks%3A%20Jakub%20Wilk%20and%20Steffen%20Ullrich%0A%3E%20%20%20%20%20%0A%3E%20%20%20%20%20Closes%3A%20%23746579%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Pending%20fixes%20for%20bugs%20in%20the%20liblwp-protocol-https-perl%20package&amp;References=%3CE1WgonY-0001F8-3N%40moszumanska.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=pkg-perl-maintainers%40lists.alioth.debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> pkg-perl-maintainers@lists.alioth.debian.org</div>
<div class="header"><span class="headerfield">To:</span> 746579@bugs.debian.org, 746579-submitter@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Pending fixes for bugs in the liblwp-protocol-https-perl package</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 04 May 2014 05:17:12 +0000</div>
</div>
<pre class="message">tag 746579 + pending
thanks

Some bugs in the liblwp-protocol-https-perl package are closed in
revision 52883a3bed1d53924ed86d4551efb1e1510a1594 in branch &#39;master&#39;
by Salvatore Bonaccorso

The full diff can be seen at
<a href="http://anonscm.debian.org/gitweb/?p=pkg-perl/packages/liblwp-protocol-https-perl.git;a=commitdiff;h=52883a3">http://anonscm.debian.org/gitweb/?p=pkg-perl/packages/liblwp-protocol-https-perl.git;a=commitdiff;h=52883a3</a>

Commit message:

    Add 746579-fix-peer-certificate-verification.patch patch
    
    Fixes &quot;HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate
    verification for IO::Socket::SSL&quot;. When the intention was to only
    disable hostname verification LWP::Protocol::HTTPS disabled also the
    peer certificate verification completely.
    
    Thanks: Jakub Wilk and Steffen Ullrich
    
    Closes: #<a href="bugreport.cgi?bug=746579">746579</a>



</pre>

<div class="msgreceived"><hr><p>
<a name="29"></a>
<!-- request_addr: Jakub Wilk &lt;jwilk@debian.org&gt; -->
<!-- time:1399180886 -->
<strong>Message sent on</strong>
to <code>Jakub Wilk &lt;jwilk@debian.org&gt;</code>:<br>
Bug#746579.
 (Sun, 04 May 2014 05:21:26 GMT) (<a href="bugreport.cgi?bug=746579;msg=30">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=30">mbox</a>, <a href="#29">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="32"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399185905 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>liblwp-protocol-https-perl</code>.
 (Sun, 04 May 2014 06:45:05 GMT) (<a href="bugreport.cgi?bug=746579;msg=33">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=33">mbox</a>, <a href="#32">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="34"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1399185905 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>.
 (Sun, 04 May 2014 06:45:05 GMT) (<a href="bugreport.cgi?bug=746579;msg=35">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=35">mbox</a>, <a href="#34">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="36"></a><a name="msg36"></a><a href="#36">Message #36</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=36">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=36">mbox</a>, <a href="mailto:746579@bugs.debian.org?References=%3C53655F7E.2050106%40gmx.net%3E%0A%20%3C20140504064205.GA27156%40eldamar.local%3E&amp;subject=Re%3A%20Bug%23746579%3A%20Fix%20can%20be%20found%20here&amp;body=On%20Sun%2C%204%20May%202014%2008%3A42%3A05%20%2B0200%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Steffen%2C%0A%3E%20%0A%3E%20On%20Sat%2C%20May%2003%2C%202014%20at%2011%3A28%3A30PM%20%2B0200%2C%20Steffen%20Ullrich%20wrote%3A%0A%3E%20%3E%20https%3A%2F%2Fgithub.com%2Flibwww-perl%2Flwp-protocol-https%2Fpull%2F14%0A%3E%20%0A%3E%20Thanks%20for%20the%20patch%2C%20I%20have%20commited%20it%20to%20the%20git%20repo%5B1%5D%2C%20but%20now%0A%3E%20there%20is%20the%20t%2Fhttps_proxy.t%20test%20failing%20which%20needs%20first%20fixing%3A%0A%3E%20%0A%3E%20----cut---------cut---------cut---------cut---------cut---------cut-----%0A%3E%20%24%20prove%20-v%20t%2Fhttps_proxy.t%20%0A%3E%20t%2Fhttps_proxy.t%20..%20%0A%3E%201..56%0A%3E%20ok%201%20-%20noproxy%20http%3A%2F%2F127.0.0.1%3A44545%2Ffoo%20-%3E%20A.1%40nossl%0A%3E%20ok%202%20-%20URL%20in%20request%20-%3E%20%2Ffoo%0A%3E%20ok%203%20-%20noproxy%20http%3A%2F%2F127.0.0.1%3A44545%2Fbar%20-%3E%20A.2%40nossl%0A%3E%20ok%204%20-%20URL%20in%20request%20-%3E%20%2Fbar%0A%3E%20ok%205%20-%20noproxy%20http%3A%2F%2F127.0.0.1%3A46930%2Ffoo%20-%3E%20B.1%40nossl%0A%3E%20ok%206%20-%20URL%20in%20request%20-%3E%20%2Ffoo%0A%3E%20ok%207%20-%20noproxy%20http%3A%2F%2F127.0.0.1%3A46930%2Fbar%20-%3E%20B.2%40nossl%0A%3E%20ok%208%20-%20URL%20in%20request%20-%3E%20%2Fbar%0A%3E%20ok%209%20-%20noproxy%20http%3A%2F%2F127.0.0.1%3A44545%2Ftor%20-%3E%20A.3%40nossl%0A%3E%20ok%2010%20-%20URL%20in%20request%20-%3E%20%2Ftor%0A%3E%20ok%2011%20-%20noproxy%20http%3A%2F%2F127.0.0.1%3A46930%2Ftor%20-%3E%20B.3%40nossl%0A%3E%20ok%2012%20-%20URL%20in%20request%20-%3E%20%2Ftor%0A%3E%20ok%2013%20-%20proxy%20http%3A%2F%2Ffoo%2Ffoo%20-%3E%20C.1.auth%40nossl%0A%3E%20ok%2014%20-%20URL%20in%20request%20-%3E%20http%3A%2F%2Ffoo%2Ffoo%0A%3E%20ok%2015%20-%20proxy%20http%3A%2F%2Ffoo%2Fbar%20-%3E%20C.2.auth%40nossl%0A%3E%20ok%2016%20-%20URL%20in%20request%20-%3E%20http%3A%2F%2Ffoo%2Fbar%0A%3E%20ok%2017%20-%20proxy%20http%3A%2F%2Fbar%2Ffoo%20-%3E%20C.3.auth%40nossl%0A%3E%20ok%2018%20-%20URL%20in%20request%20-%3E%20http%3A%2F%2Fbar%2Ffoo%0A%3E%20ok%2019%20-%20proxy%20http%3A%2F%2Fbar%2Fbar%20-%3E%20C.4.auth%40nossl%0A%3E%20ok%2020%20-%20URL%20in%20request%20-%3E%20http%3A%2F%2Fbar%2Fbar%0A%3E%20ok%2021%20-%20proxy%20http%3A%2F%2Ffoo%2Ftor%20-%3E%20C.5.auth%40nossl%0A%3E%20ok%2022%20-%20URL%20in%20request%20-%3E%20http%3A%2F%2Ffoo%2Ftor%0A%3E%20ok%2023%20-%20proxy%20http%3A%2F%2Fbar%2Ftor%20-%3E%20C.6.auth%40nossl%0A%3E%20ok%2024%20-%20URL%20in%20request%20-%3E%20http%3A%2F%2Fbar%2Ftor%0A%3E%20%23%20creating%20cert%20for%20direct.ssl.access%0A%3E%20unexpected%20response%3A%20500%20Can%27t%20connect%20to%20127.0.0.1%3A44545%0A%3E%20Content-Type%3A%20text%2Fplain%0A%3E%20Client-Date%3A%20Sun%2C%2004%20May%202014%2006%3A35%3A46%20GMT%0A%3E%20Client-Warning%3A%20Internal%20response%0A%3E%20%0A%3E%20Can%27t%20connect%20to%20127.0.0.1%3A44545%0A%3E%20%0A%3E%20%23%20Looks%20like%20you%20planned%2056%20tests%20but%20ran%2024.%0A%3E%20%23%20Looks%20like%20your%20test%20exited%20with%20255%20just%20after%2024.%0A%3E%20%23%20SSL%20handshake%20failed%3A%20SSL%20connect%20accept%20failed%20because%20of%20handshake%20problems%20error%3A14094418%3ASSL%20routines%3ASSL3_READ_BYTES%3Atlsv1%20alert%20unknown%20ca%0A%3E%20Dubious%2C%20test%20returned%20255%20%28wstat%2065280%2C%200xff00%29%0A%3E%20Failed%2032%2F56%20subtests%20%0A%3E%20%0A%3E%20Test%20Summary%20Report%0A%3E%20-------------------%0A%3E%20t%2Fhttps_proxy.t%20%28Wstat%3A%2065280%20Tests%3A%2024%20Failed%3A%200%29%0A%3E%20%20%20Non-zero%20exit%20status%3A%20255%0A%3E%20%20%20Parse%20errors%3A%20Bad%20plan.%20%20You%20planned%2056%20tests%20but%20ran%2024.%0A%3E%20Files%3D1%2C%20Tests%3D24%2C%20%201%20wallclock%20secs%20%28%200.02%20usr%20%200.01%20sys%20%2B%20%200.19%20cusr%20%200.01%20csys%20%3D%20%200.23%20CPU%29%0A%3E%20Result%3A%20FAIL%0A%3E%20----cut---------cut---------cut---------cut---------cut---------cut-----%0A%3E%20%0A%3E%20%20%5B1%5D%20http%3A%2F%2Fanonscm.debian.org%2Fgitweb%2F%3Fp%3Dpkg-perl%2Fpackages%2Fliblwp-protocol-https-perl.git%3Ba%3Dcommitdiff%3Bh%3D52883a3%0A&amp;In-Reply-To=%3C20140504064205.GA27156%40eldamar.local%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Steffen Ullrich &lt;coyote.frank@gmx.net&gt;, 746579@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#746579: Fix can be found here</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 4 May 2014 08:42:05 +0200</div>
</div>
<pre class="message">Hi Steffen,

On Sat, May 03, 2014 at 11:28:30PM +0200, Steffen Ullrich wrote:
&gt; <a href="https://github.com/libwww-perl/lwp-protocol-https/pull/14">https://github.com/libwww-perl/lwp-protocol-https/pull/14</a>

Thanks for the patch, I have commited it to the git repo[1], but now
there is the t/https_proxy.t test failing which needs first fixing:

----cut---------cut---------cut---------cut---------cut---------cut-----
$ prove -v t/https_proxy.t 
t/https_proxy.t .. 
1..56
ok 1 - noproxy <a href="http://127.0.0.1:44545/foo">http://127.0.0.1:44545/foo</a> -&gt; A.1@nossl
ok 2 - URL in request -&gt; /foo
ok 3 - noproxy <a href="http://127.0.0.1:44545/bar">http://127.0.0.1:44545/bar</a> -&gt; A.2@nossl
ok 4 - URL in request -&gt; /bar
ok 5 - noproxy <a href="http://127.0.0.1:46930/foo">http://127.0.0.1:46930/foo</a> -&gt; B.1@nossl
ok 6 - URL in request -&gt; /foo
ok 7 - noproxy <a href="http://127.0.0.1:46930/bar">http://127.0.0.1:46930/bar</a> -&gt; B.2@nossl
ok 8 - URL in request -&gt; /bar
ok 9 - noproxy <a href="http://127.0.0.1:44545/tor">http://127.0.0.1:44545/tor</a> -&gt; A.3@nossl
ok 10 - URL in request -&gt; /tor
ok 11 - noproxy <a href="http://127.0.0.1:46930/tor">http://127.0.0.1:46930/tor</a> -&gt; B.3@nossl
ok 12 - URL in request -&gt; /tor
ok 13 - proxy <a href="http://foo/foo">http://foo/foo</a> -&gt; C.1.auth@nossl
ok 14 - URL in request -&gt; <a href="http://foo/foo">http://foo/foo</a>
ok 15 - proxy <a href="http://foo/bar">http://foo/bar</a> -&gt; C.2.auth@nossl
ok 16 - URL in request -&gt; <a href="http://foo/bar">http://foo/bar</a>
ok 17 - proxy <a href="http://bar/foo">http://bar/foo</a> -&gt; C.3.auth@nossl
ok 18 - URL in request -&gt; <a href="http://bar/foo">http://bar/foo</a>
ok 19 - proxy <a href="http://bar/bar">http://bar/bar</a> -&gt; C.4.auth@nossl
ok 20 - URL in request -&gt; <a href="http://bar/bar">http://bar/bar</a>
ok 21 - proxy <a href="http://foo/tor">http://foo/tor</a> -&gt; C.5.auth@nossl
ok 22 - URL in request -&gt; <a href="http://foo/tor">http://foo/tor</a>
ok 23 - proxy <a href="http://bar/tor">http://bar/tor</a> -&gt; C.6.auth@nossl
ok 24 - URL in request -&gt; <a href="http://bar/tor">http://bar/tor</a>
# creating cert for direct.ssl.access
unexpected response: 500 Can&#39;t connect to 127.0.0.1:44545
Content-Type: text/plain
Client-Date: Sun, 04 May 2014 06:35:46 GMT
Client-Warning: Internal response

Can&#39;t connect to 127.0.0.1:44545

# Looks like you planned 56 tests but ran 24.
# Looks like your test exited with 255 just after 24.
# SSL handshake failed: SSL connect accept failed because of handshake problems error:14094418:SSL routines:SSL3_READ_BYTES:tlsv1 alert unknown ca
Dubious, test returned 255 (wstat 65280, 0xff00)
Failed 32/56 subtests 

Test Summary Report
-------------------
t/https_proxy.t (Wstat: 65280 Tests: 24 Failed: 0)
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 56 tests but ran 24.
Files=1, Tests=24,  1 wallclock secs ( 0.02 usr  0.01 sys +  0.19 cusr  0.01 csys =  0.23 CPU)
Result: FAIL
----cut---------cut---------cut---------cut---------cut---------cut-----

 [1] <a href="http://anonscm.debian.org/gitweb/?p=pkg-perl/packages/liblwp-protocol-https-perl.git;a=commitdiff;h=52883a3">http://anonscm.debian.org/gitweb/?p=pkg-perl/packages/liblwp-protocol-https-perl.git;a=commitdiff;h=52883a3</a>

Regards,
Salvatore


</pre>

<div class="infmessage"><hr><p>
<a name="37"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399188971 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>liblwp-protocol-https-perl</code>.
 (Sun, 04 May 2014 07:36:11 GMT) (<a href="bugreport.cgi?bug=746579;msg=38">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=38">mbox</a>, <a href="#37">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="39"></a>
<!-- request_addr: Steffen Ullrich &lt;coyote.frank@gmx.net&gt; -->
<!-- time:1399188971 -->
<strong>Acknowledgement sent</strong>
to <code>Steffen Ullrich &lt;coyote.frank@gmx.net&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>.
 (Sun, 04 May 2014 07:36:11 GMT) (<a href="bugreport.cgi?bug=746579;msg=40">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=40">mbox</a>, <a href="#39">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="41"></a><a name="msg41"></a><a href="#41">Message #41</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=41">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=41">mbox</a>, <a href="mailto:746579@bugs.debian.org?In-Reply-To=%3C20140504071811.GA26567%40maulwuff.de%3E&amp;body=On%20Sun%2C%204%20May%202014%2009%3A18%3A11%20%2B0200%20Steffen%20Ullrich%20%3Ccoyote.frank%40gmx.net%3E%20wrote%3A%0A%3E%20On%20Sun%2C%20May%2004%2C%202014%20at%2008%3A42%3A05AM%20%2B0200%2C%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20Hi%20Steffen%2C%0A%3E%20%3E%20%0A%3E%20%3E%20On%20Sat%2C%20May%2003%2C%202014%20at%2011%3A28%3A30PM%20%2B0200%2C%20Steffen%20Ullrich%20wrote%3A%0A%3E%20%3E%20%3E%20https%3A%2F%2Fgithub.com%2Flibwww-perl%2Flwp-protocol-https%2Fpull%2F14%0A%3E%20%3E%20%0A%3E%20%3E%20Thanks%20for%20the%20patch%2C%20I%20have%20commited%20it%20to%20the%20git%20repo%5B1%5D%2C%20but%20now%0A%3E%20%3E%20there%20is%20the%20t%2Fhttps_proxy.t%20test%20failing%20which%20needs%20first%20fixing%3A%0A%3E%20%0A%3E%20I%27ve%20updated%20the%20test.%0A%3E%20It%20should%20have%20failed%20in%20previous%20versions%20too%20but%20did%20not%20because%20of%20the%0A%3E%20bug%20in%20LWP%3A%3AProtocol%3A%3Ahttps%20which%20got%20just%20fixed%20%3A%29%0A%3E%20I%27ve%20also%20added%20another%20fix%20to%20make%20it%20also%20workable%20for%20the%20old%20Net%3A%3ASSL%2FCrypt%3A%3ASSLeay.%0A%3E%20Still%20the%20same%20pull%20request.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Steffen%0A%3E%20%0A%3E%20%0A&amp;References=%3C53655F7E.2050106%40gmx.net%3E%0A%20%3C20140504064205.GA27156%40eldamar.local%3E%0A%20%3C20140504071811.GA26567%40maulwuff.de%3E&amp;subject=Re%3A%20Bug%23746579%3A%20Fix%20can%20be%20found%20here">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=coyote.frank%40gmx.net" alt="">
<div class="header"><span class="headerfield">From:</span> Steffen Ullrich &lt;coyote.frank@gmx.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 746579@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#746579: Fix can be found here</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 4 May 2014 09:18:11 +0200</div>
</div>
<pre class="message">On Sun, May 04, 2014 at 08:42:05AM +0200, Salvatore Bonaccorso &lt;carnil@debian.org&gt; wrote:
&gt; Hi Steffen,
&gt; 
&gt; On Sat, May 03, 2014 at 11:28:30PM +0200, Steffen Ullrich wrote:
&gt; &gt; <a href="https://github.com/libwww-perl/lwp-protocol-https/pull/14">https://github.com/libwww-perl/lwp-protocol-https/pull/14</a>
&gt; 
&gt; Thanks for the patch, I have commited it to the git repo[1], but now
&gt; there is the t/https_proxy.t test failing which needs first fixing:

I&#39;ve updated the test.
It should have failed in previous versions too but did not because of the
bug in LWP::Protocol::https which got just fixed :)
I&#39;ve also added another fix to make it also workable for the old Net::SSL/Crypt::SSLeay.
Still the same pull request.

Regards,
Steffen


</pre>

<div class="infmessage"><hr><p>
<a name="42"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399193644 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>liblwp-protocol-https-perl</code>.
 (Sun, 04 May 2014 08:54:04 GMT) (<a href="bugreport.cgi?bug=746579;msg=43">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=43">mbox</a>, <a href="#42">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="44"></a><a name="msg44"></a><a href="#44">Message #44</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=44">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=44">mbox</a>, <a href="mailto:746579@bugs.debian.org?body=On%20Sun%2C%204%20May%202014%2010%3A50%3A24%20%2B0200%20Jakub%20Wilk%20%3Cjwilk%40debian.org%3E%20wrote%3A%0A%3E%20%2A%20Jakub%20Wilk%20%3Cjwilk%40debian.org%3E%2C%202014-05-02%2C%2015%3A44%3A%0A%3E%20%3ESo%20the%20intention%20was%20to%20disable%20only%20hostname%20verification%2C%20for%20%0A%3E%20%3Ecompatibility%20with%20Crypt%3A%3ASSLeay%20%28why%3F%21%29%2C%20but%20the%20effect%20is%20that%20the%20%0A%3E%20%3ESSL_verify_mode%20is%20set%20to%200.%0A%3E%20%0A%3E%20To%20elaborate%20a%20bit%20on%20my%20%22why%3F%21%22%3A%0A%3E%20%0A%3E%20%2A%20There%27s%20nothing%20in%20the%20names%20of%20HTTPS_CA_%2A%20that%20would%20suggests%20that%20%0A%3E%20these%20variables%20are%20specific%20to%20Crypt%3A%3ASSLeay%2C%20or%20LWP%2C%20or%20even%20Perl.%20So%20%0A%3E%20people%20might%20have%20them%20set%20in%20their%20environment%20for%20purposes%20unrelated%20%0A%3E%20to%20Crypt%3A%3ASSLeay.%0A%3E%20%0A%3E%20%2A%20I%20suspect%20that%20these%20days%20many%20users%20of%20LWP%20don%27t%20even%20know%20what%20%0A%3E%20Crypt%3A%3ASSLeay%20is.%0A%3E%20%0A%3E%20%2A%20There%20is%20nothing%20in%20the%20LWP%20documentation%20that%20suggests%20that%20setting%20%0A%3E%20HTTPS_CA_%2A%20might%20have%20negative%20security%20effect.%0A%3E%20%0A%3E%20%0A%3E%20If%20for%20some%20reason%20%28I%20can%27t%20see%20such%20reason%2C%20but%20maybe%20I%27m%20missing%20%0A%3E%20something%29%20disabling%20hostname%20verification%20is%20desirable%20when%20HTTPS_CA_%2A%20%0A%3E%20is%20set%2C%20then%20it%20should%20be%20prominently%20documented.%0A%3E%20%0A%3E%20%0A%3E%20Regarding%20the%20proposed%20patch%2C%20I%20have%20doubts%20whether%20it%20is%20correct.%20%0A%3E%20My%20understanding%20of%20the%20documentation%5B0%5D%20is%20that%2C%20contrary%20to%20what%20the%20%0A%3E%20name%20of%20the%20option%20suggests%2C%20verify_hostname%20is%20supposed%20to%20%0A%3E%20enable%2Fdisable%20both%20certificate%20verification%20and%20that%20the%20certificate%20%0A%3E%20matches%20hostname.%20But%20after%20this%20patch%20applied%2C%20it%20will%20affect%20only%20the%20%0A%3E%20latter.%0A%3E%20%0A%3E%20%0A%3E%20%5B0%5D%20%E2%80%9CWhen%20TRUE%20LWP%20will%20for%20secure%20protocol%20schemes%20ensure%20it%20connects%20%0A%3E%20to%20servers%20that%20have%20a%20valid%20certificate%20matching%20the%20expected%20hostname.%20%0A%3E%20If%20FALSE%20no%20checks%20are%20made%20and%20you%20can%E2%80%99t%20be%20sure%20that%20you%20communicate%20%0A%3E%20with%20the%20expected%20peer.%E2%80%9D%0A%3E%20%0A%3E%20--%20%0A%3E%20Jakub%20Wilk%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20140504085007.GA6560%40jwilk.net%3E&amp;subject=Re%3A%20Bug%23746579%3A%20libwww-perl%3A%20HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20disables%0A%20peer%20certificate%20verification%20for%20IO%3A%3ASocket%3A%3ASSL&amp;References=%3C20140501152425.GA5143%40jwilk.net%3E%0A%20%3C20140502134342.GA2366%40jwilk.net%3E%0A%20%3C20140504085007.GA6560%40jwilk.net%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jwilk%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Jakub Wilk &lt;jwilk@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 746579@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#746579: libwww-perl: HTTPS_CA_DIR or HTTPS_CA_FILE disables
 peer certificate verification for IO::Socket::SSL</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 4 May 2014 10:50:24 +0200</div>
</div>
<pre class="message flowed">* Jakub Wilk &lt;jwilk@debian.org&gt;, 2014-05-02, 15:44:
&gt;So the intention was to disable only hostname verification, for 
&gt;compatibility with Crypt::SSLeay (why?!), but the effect is that the 
&gt;SSL_verify_mode is set to 0.

To elaborate a bit on my &quot;why?!&quot;:

* There&#39;s nothing in the names of HTTPS_CA_* that would suggests that 
these variables are specific to Crypt::SSLeay, or LWP, or even Perl. So 
people might have them set in their environment for purposes unrelated 
to Crypt::SSLeay.

* I suspect that these days many users of LWP don&#39;t even know what 
Crypt::SSLeay is.

* There is nothing in the LWP documentation that suggests that setting 
HTTPS_CA_* might have negative security effect.


If for some reason (I can&#39;t see such reason, but maybe I&#39;m missing 
something) disabling hostname verification is desirable when HTTPS_CA_* 
is set, then it should be prominently documented.


Regarding the proposed patch, I have doubts whether it is correct. 
My understanding of the documentation[0] is that, contrary to what the 
name of the option suggests, verify_hostname is supposed to 
enable/disable both certificate verification and that the certificate 
matches hostname. But after this patch applied, it will affect only the 
latter.


[0] “When TRUE LWP will for secure protocol schemes ensure it connects 
to servers that have a valid certificate matching the expected hostname. 
If FALSE no checks are made and you can’t be sure that you communicate 
with the expected peer.”

-- 
Jakub Wilk


</pre>

<div class="infmessage"><hr><p>
<a name="45"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1399269245 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#746579</code>; Package <code>liblwp-protocol-https-perl</code>.
 (Mon, 05 May 2014 05:54:05 GMT) (<a href="bugreport.cgi?bug=746579;msg=46">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=46">mbox</a>, <a href="#45">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="47"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1399269245 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;</code>.
 (Mon, 05 May 2014 05:54:05 GMT) (<a href="bugreport.cgi?bug=746579;msg=48">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=48">mbox</a>, <a href="#47">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="49"></a><a name="msg49"></a><a href="#49">Message #49</a> received at 746579@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=49">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=49">mbox</a>, <a href="mailto:746579@bugs.debian.org?References=%3C20140501152425.GA5143%40jwilk.net%3E%0A%20%3C20140502134342.GA2366%40jwilk.net%3E%0A%20%3C20140504085007.GA6560%40jwilk.net%3E%0A%20%3C20140505055159.GA16383%40lorien.valinor.li%3E&amp;subject=Re%3A%20Bug%23746579%3A%20libwww-perl%3A%20HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20disables%0A%20peer%20certificate%20verification%20for%20IO%3A%3ASocket%3A%3ASSL&amp;In-Reply-To=%3C20140505055159.GA16383%40lorien.valinor.li%3E&amp;body=On%20Mon%2C%205%20May%202014%2007%3A52%3A00%20%2B0200%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Jakub%2C%0A%3E%20%0A%3E%20On%20Sun%2C%20May%2004%2C%202014%20at%2010%3A50%3A24AM%20%2B0200%2C%20Jakub%20Wilk%20wrote%3A%0A%3E%20%3E%20%2A%20Jakub%20Wilk%20%3Cjwilk%40debian.org%3E%2C%202014-05-02%2C%2015%3A44%3A%0A%3E%20%3E%20%3ESo%20the%20intention%20was%20to%20disable%20only%20hostname%20verification%2C%20for%0A%3E%20%3E%20%3Ecompatibility%20with%20Crypt%3A%3ASSLeay%20%28why%3F%21%29%2C%20but%20the%20effect%20is%20that%0A%3E%20%3E%20%3Ethe%20SSL_verify_mode%20is%20set%20to%200.%0A%3E%20%3E%20%0A%3E%20%3E%20To%20elaborate%20a%20bit%20on%20my%20%22why%3F%21%22%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%2A%20There%27s%20nothing%20in%20the%20names%20of%20HTTPS_CA_%2A%20that%20would%20suggests%0A%3E%20%3E%20that%20these%20variables%20are%20specific%20to%20Crypt%3A%3ASSLeay%2C%20or%20LWP%2C%20or%20even%0A%3E%20%3E%20Perl.%20So%20people%20might%20have%20them%20set%20in%20their%20environment%20for%0A%3E%20%3E%20purposes%20unrelated%20to%20Crypt%3A%3ASSLeay.%0A%3E%20%3E%20%0A%3E%20%3E%20%2A%20I%20suspect%20that%20these%20days%20many%20users%20of%20LWP%20don%27t%20even%20know%20what%0A%3E%20%3E%20Crypt%3A%3ASSLeay%20is.%0A%3E%20%3E%20%0A%3E%20%3E%20%2A%20There%20is%20nothing%20in%20the%20LWP%20documentation%20that%20suggests%20that%0A%3E%20%3E%20setting%20HTTPS_CA_%2A%20might%20have%20negative%20security%20effect.%0A%3E%20%3E%20%0A%3E%20%3E%20If%20for%20some%20reason%20%28I%20can%27t%20see%20such%20reason%2C%20but%20maybe%20I%27m%20missing%0A%3E%20%3E%20something%29%20disabling%20hostname%20verification%20is%20desirable%20when%0A%3E%20%3E%20HTTPS_CA_%2A%20is%20set%2C%20then%20it%20should%20be%20prominently%20documented.%0A%3E%20%3E%20%0A%3E%20%3E%20%0A%3E%20%3E%20Regarding%20the%20proposed%20patch%2C%20I%20have%20doubts%20whether%20it%20is%20correct.%0A%3E%20%3E%20My%20understanding%20of%20the%20documentation%5B0%5D%20is%20that%2C%20contrary%20to%20what%0A%3E%20%3E%20the%20name%20of%20the%20option%20suggests%2C%20verify_hostname%20is%20supposed%20to%0A%3E%20%3E%20enable%2Fdisable%20both%20certificate%20verification%20and%20that%20the%0A%3E%20%3E%20certificate%20matches%20hostname.%20But%20after%20this%20patch%20applied%2C%20it%20will%0A%3E%20%3E%20affect%20only%20the%20latter.%0A%3E%20%3E%20%0A%3E%20%3E%20%0A%3E%20%3E%20%5B0%5D%20%E2%80%9CWhen%20TRUE%20LWP%20will%20for%20secure%20protocol%20schemes%20ensure%20it%0A%3E%20%3E%20connects%20to%20servers%20that%20have%20a%20valid%20certificate%20matching%20the%0A%3E%20%3E%20expected%20hostname.%20If%20FALSE%20no%20checks%20are%20made%20and%20you%20can%E2%80%99t%20be%20sure%0A%3E%20%3E%20that%20you%20communicate%20with%20the%20expected%20peer.%E2%80%9D%0A%3E%20%0A%3E%20Thanks%20for%20elaborating%20this%20and%20taking%20time.%0A%3E%20%0A%3E%20I%20have%20not%20yet%20uploaded%20a%20package%20with%20the%20commit%20applied.%20There%20is%0A%3E%20some%20discussion%20going%20on%20the%20issue%20tracker%20at%20%5B1%5D%2C%20which%20clarification%0A%3E%20from%20upstream%20of%20IO%3A%3ASocket%3A%3ASSL%20at%20%5B2%5D.%0A%3E%20%0A%3E%20%20%5B1%5D%20https%3A%2F%2Fgithub.com%2Flibwww-perl%2Flwp-protocol-https%2Fpull%2F14%0A%3E%20%20%5B2%5D%20https%3A%2F%2Fgithub.com%2Flibwww-perl%2Flwp-protocol-https%2Fpull%2F14%23issuecomment-42160001%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Salvatore%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Jakub Wilk &lt;jwilk@debian.org&gt;, 746579@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#746579: libwww-perl: HTTPS_CA_DIR or HTTPS_CA_FILE disables
 peer certificate verification for IO::Socket::SSL</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 5 May 2014 07:52:00 +0200</div>
</div>
<pre class="message">Hi Jakub,

On Sun, May 04, 2014 at 10:50:24AM +0200, Jakub Wilk wrote:
&gt; * Jakub Wilk &lt;jwilk@debian.org&gt;, 2014-05-02, 15:44:
&gt; &gt;So the intention was to disable only hostname verification, for
&gt; &gt;compatibility with Crypt::SSLeay (why?!), but the effect is that
&gt; &gt;the SSL_verify_mode is set to 0.
&gt; 
&gt; To elaborate a bit on my &quot;why?!&quot;:
&gt; 
&gt; * There&#39;s nothing in the names of HTTPS_CA_* that would suggests
&gt; that these variables are specific to Crypt::SSLeay, or LWP, or even
&gt; Perl. So people might have them set in their environment for
&gt; purposes unrelated to Crypt::SSLeay.
&gt; 
&gt; * I suspect that these days many users of LWP don&#39;t even know what
&gt; Crypt::SSLeay is.
&gt; 
&gt; * There is nothing in the LWP documentation that suggests that
&gt; setting HTTPS_CA_* might have negative security effect.
&gt; 
&gt; If for some reason (I can&#39;t see such reason, but maybe I&#39;m missing
&gt; something) disabling hostname verification is desirable when
&gt; HTTPS_CA_* is set, then it should be prominently documented.
&gt; 
&gt; 
&gt; Regarding the proposed patch, I have doubts whether it is correct.
&gt; My understanding of the documentation[0] is that, contrary to what
&gt; the name of the option suggests, verify_hostname is supposed to
&gt; enable/disable both certificate verification and that the
&gt; certificate matches hostname. But after this patch applied, it will
&gt; affect only the latter.
&gt; 
&gt; 
&gt; [0] “When TRUE LWP will for secure protocol schemes ensure it
&gt; connects to servers that have a valid certificate matching the
&gt; expected hostname. If FALSE no checks are made and you can’t be sure
&gt; that you communicate with the expected peer.”

Thanks for elaborating this and taking time.

I have not yet uploaded a package with the commit applied. There is
some discussion going on the issue tracker at [1], which clarification
from upstream of IO::Socket::SSL at [2].

 [1] <a href="https://github.com/libwww-perl/lwp-protocol-https/pull/14">https://github.com/libwww-perl/lwp-protocol-https/pull/14</a>
 [2] <a href="https://github.com/libwww-perl/lwp-protocol-https/pull/14#issuecomment-42160001">https://github.com/libwww-perl/lwp-protocol-https/pull/14#issuecomment-42160001</a>

Regards,
Salvatore


</pre>

<div class="msgreceived"><hr><p>
<a name="50"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1400014264 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;liblwp-protocol-https-perl: CVE-2014-3230: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate verification for IO::Socket::SSL&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;libwww-perl: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate verification for IO::Socket::SSL&#39;
            };
-->
<strong>Changed Bug title to &#39;liblwp-protocol-https-perl: CVE-2014-3230: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate verification for IO::Socket::SSL&#39; from &#39;libwww-perl: HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate verification for IO::Socket::SSL&#39;</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 13 May 2014 20:51:04 GMT) (<a href="bugreport.cgi?bug=746579;msg=51">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=51">mbox</a>, <a href="#50">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="52"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1400016249 -->
<strong>Reply sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Tue, 13 May 2014 21:24:09 GMT) (<a href="bugreport.cgi?bug=746579;msg=53">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=53">mbox</a>, <a href="#52">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="54"></a>
<!-- request_addr: Jakub Wilk &lt;jwilk@debian.org&gt; -->
<!-- time:1400016249 -->
<strong>Notification sent</strong>
to <code>Jakub Wilk &lt;jwilk@debian.org&gt;</code>:<br>
Bug acknowledged by developer.
 (Tue, 13 May 2014 21:24:09 GMT) (<a href="bugreport.cgi?bug=746579;msg=55">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=55">mbox</a>, <a href="#54">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="56"></a><a name="msg56"></a><a href="#56">Message #56</a> received at 746579-close@bugs.debian.org (<a href="bugreport.cgi?bug=746579;msg=56">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=56">mbox</a>, <a href="mailto:746579@bugs.debian.org?In-Reply-To=%3CE1WkK8h-0000ka-88%40franck.debian.org%3E&amp;body=On%20Tue%2C%2013%20May%202014%2021%3A21%3A31%20%2B0000%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20liblwp-protocol-https-perl%0A%3E%20Source-Version%3A%206.04-3%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20liblwp-protocol-https-perl%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20746579%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20%28supplier%20of%20updated%20liblwp-protocol-https-perl%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA512%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Tue%2C%2013%20May%202014%2022%3A45%3A39%20%2B0200%0A%3E%20Source%3A%20liblwp-protocol-https-perl%0A%3E%20Binary%3A%20liblwp-protocol-https-perl%0A%3E%20Architecture%3A%20source%20all%0A%3E%20Version%3A%206.04-3%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20medium%0A%3E%20Maintainer%3A%20Debian%20Perl%20Group%20%3Cpkg-perl-maintainers%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%0A%3E%20Description%3A%20%0A%3E%20%20liblwp-protocol-https-perl%20-%20HTTPS%20driver%20for%20LWP%3A%3AUserAgent%0A%3E%20Closes%3A%20746579%0A%3E%20Changes%3A%20%0A%3E%20%20liblwp-protocol-https-perl%20%286.04-3%29%20unstable%3B%20urgency%3Dmedium%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Team%20upload.%0A%3E%20%20.%0A%3E%20%20%20%20%5B%20gregor%20herrmann%20%5D%0A%3E%20%20%20%20%2A%20debian%2Fcontrol%3A%20remove%20Nicholas%20Bamber%20from%20Uploaders%20on%20request%20of%0A%3E%20%20%20%20%20%20the%20MIA%20team.%0A%3E%20%20%20%20%2A%20Strip%20trailing%20slash%20from%20metacpan%20URLs.%0A%3E%20%20.%0A%3E%20%20%20%20%5B%20Salvatore%20Bonaccorso%20%5D%0A%3E%20%20%20%20%2A%20Refresh%20cert.patch%20for%20offset%0A%3E%20%20%20%20%2A%20Add%20746579-fix-peer-certificate-verification.patch%20patch.%0A%3E%20%20%20%20%20%20Fixes%20%22HTTPS_CA_DIR%20or%20HTTPS_CA_FILE%20disables%20peer%20certificate%0A%3E%20%20%20%20%20%20verification%20for%20IO%3A%3ASocket%3A%3ASSL%22.%20When%20the%20intention%20was%20to%20only%0A%3E%20%20%20%20%20%20disable%20hostname%20verification%20LWP%3A%3AProtocol%3A%3AHTTPS%20disabled%20also%20the%0A%3E%20%20%20%20%20%20peer%20certificate%20verification%20completely.%20%28CVE-2014-3230%29%0A%3E%20%20%20%20%20%20Thanks%20to%20Jakub%20Wilk%20and%20Steffen%20Ullrich%20%28Closes%3A%20%23746579%29%0A%3E%20%20%20%20%2A%20Update%20fix-https-proxy%20for%20fixed%20behaviour%20of%20LWP%3A%3AProtocol%3A%3Ahttps%0A%3E%20Checksums-Sha1%3A%20%0A%3E%20%20454b1cfa58b971b400cc3db61586a2543b5a217c%202256%20liblwp-protocol-https-perl_6.04-3.dsc%0A%3E%20%20bac256c69981c68f2fb05ca75e0cb8ec4b84dffb%207320%20liblwp-protocol-https-perl_6.04-3.debian.tar.xz%0A&amp;subject=Re%3A%20Bug%23746579%3A%20fixed%20in%20liblwp-protocol-https-perl%206.04-3&amp;References=%3CE1WkK8h-0000ka-88%40franck.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 746579-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#746579: fixed in liblwp-protocol-https-perl 6.04-3</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 13 May 2014 21:21:31 +0000</div>
</div>
<pre class="message">Source: liblwp-protocol-https-perl
Source-Version: 6.04-3

We believe that the bug you reported is fixed in the latest version of
liblwp-protocol-https-perl, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 746579@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Salvatore Bonaccorso &lt;carnil@debian.org&gt; (supplier of updated liblwp-protocol-https-perl package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Tue, 13 May 2014 22:45:39 +0200
Source: liblwp-protocol-https-perl
Binary: liblwp-protocol-https-perl
Architecture: source all
Version: 6.04-3
Distribution: unstable
Urgency: medium
Maintainer: Debian Perl Group &lt;pkg-perl-maintainers@lists.alioth.debian.org&gt;
Changed-By: Salvatore Bonaccorso &lt;carnil@debian.org&gt;
Description: 
 liblwp-protocol-https-perl - HTTPS driver for LWP::UserAgent
Closes: <a href="bugreport.cgi?bug=746579">746579</a>
Changes: 
 liblwp-protocol-https-perl (6.04-3) unstable; urgency=medium
 .
   * Team upload.
 .
   [ gregor herrmann ]
   * debian/control: remove Nicholas Bamber from Uploaders on request of
     the MIA team.
   * Strip trailing slash from metacpan URLs.
 .
   [ Salvatore Bonaccorso ]
   * Refresh cert.patch for offset
   * Add 746579-fix-peer-certificate-verification.patch patch.
     Fixes &quot;HTTPS_CA_DIR or HTTPS_CA_FILE disables peer certificate
     verification for IO::Socket::SSL&quot;. When the intention was to only
     disable hostname verification LWP::Protocol::HTTPS disabled also the
     peer certificate verification completely. (<a href="https://security-tracker.debian.org/tracker/CVE-2014-3230">CVE-2014-3230</a>)
     Thanks to Jakub Wilk and Steffen Ullrich (Closes: #<a href="bugreport.cgi?bug=746579">746579</a>)
   * Update fix-https-proxy for fixed behaviour of LWP::Protocol::https
Checksums-Sha1: 
 454b1cfa58b971b400cc3db61586a2543b5a217c 2256 liblwp-protocol-https-perl_6.04-3.dsc
 bac256c69981c68f2fb05ca75e0cb8ec4b84dffb 7320 liblwp-protocol-https-perl_6.04-3.debian.tar.xz
 d828ebf12b7aa370dfe7db6014698c1105f10192 8274 liblwp-protocol-https-perl_6.04-3_all.deb
Checksums-Sha256: 
 9d9898b00bc092cff6ebb12c64edb50e964c4ce292b3ce8940dc2911ad2eba70 2256 liblwp-protocol-https-perl_6.04-3.dsc
 d405b8836241be9e30b8bb91384c798d5d78b426352c5d8ec71a77ed507de363 7320 liblwp-protocol-https-perl_6.04-3.debian.tar.xz
 40e5bdaee6a354b7103dbb26eaa9dc5fd518537e701b99866d34ea098540e01e 8274 liblwp-protocol-https-perl_6.04-3_all.deb
Files: 
 1e4e0d480936b3f31d2a73a70335ff6d 8274 perl optional liblwp-protocol-https-perl_6.04-3_all.deb
 ff0ea6f73469c69fc92edca6fe4aaa5c 2256 perl optional liblwp-protocol-https-perl_6.04-3.dsc
 6b4c3d272aae4de0f6d6ed5f2ec420dc 7320 perl optional liblwp-protocol-https-perl_6.04-3.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJTcoUIAAoJEAVMuPMTQ89EyUwP/28ir378pXUDnsOZH5jdhkmd
13OsIo25E+78XznYkGP0ZYg23ZcPHIjyWhWjfoFS1Hgf/jvOMWpnebz2LuWYq9j2
dTcGSC60BP7JhBBXsYYtLucw3p0/yrZbTqoOviSOFSe0hIjceIs8vfjVl80LgSg3
atjDYEYC1eQD5Q/gWjqhcZRJjzp44YEYic/5aDBr5PkZuhllYBWbzOVkRziraJAU
6t86ldGFCRC0JPFcxaGK8BfHGHcybHoRD5//jveyX6uWXIRNzVFbG8+f+NI4/F4q
a/BSAUpwPjuMv9k5MK00F4orakXODlOzpm2La2XFbaQRuDVp4fG2lRZGaREMvSTB
QzINoozQRLQYp0Nv3p3YinnQJgWMZCOB1uVWKL3w/IGqUKvqEipoYWGOFquCifPQ
3fAZoTX0dxLvvkLWs0zRvIdPz28PpIdwV+AJfZKVKTK7XJtOXO3VcqvmHAz7M7KE
c5JGslSGbuNjNsb7TYTZ7rYgtityGTDwCRX0vNqO0kfDSuu/4YFrMa+EaVeWSSUB
luZq8BiR04vA2L8n9c7UhpMNLitNkFHZr2b/XK1PT3vfvugHT7xvhBHotLOekzZN
1hGa9AE708sApyIFHXoc/Yg8MsjGxmb8jLKh5kA720tS/3Gtkz3n5qBBmuLLSjKB
jwBpd6UKBKGDYz5YTv/L
=nI/z
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="57"></a>
<!-- command:merge -->
<!-- requester: Vincent Lefevre &lt;vincent@vinc17.net&gt; -->
<!-- request_addr: 735422-submit@bugs.debian.org -->
<!-- time:1400054052 -->
<!-- new_data:
$new_data = {
              &#39;mergedwith&#39; =&gt; &#39;735422&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;mergedwith&#39; =&gt; &#39;&#39;
            };
-->
<strong>Merged <a href="bugreport.cgi?bug=735422">735422</a> <a href="bugreport.cgi?bug=746579">746579</a></strong>
Request was from <code>Vincent Lefevre &lt;vincent@vinc17.net&gt;</code>
to <code>735422-submit@bugs.debian.org</code>.
 (Wed, 14 May 2014 07:54:12 GMT) (<a href="bugreport.cgi?bug=746579;msg=58">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=58">mbox</a>, <a href="#57">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="59"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1402903632 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Mon, 16 Jun 2014 07:27:12 GMT) (<a href="bugreport.cgi?bug=746579;msg=60">full text</a>, <a href="bugreport.cgi?bug=746579;mbox=yes;msg=60">mbox</a>, <a href="#59">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=746579">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:29:17 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
