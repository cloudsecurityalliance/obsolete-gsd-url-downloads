<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/glance/+bug/1383973/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1383973 “image data cannot be removed when deleting a savin...” : Bugs : Glance</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1383973" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1383973/bug.atom" title="Bug 1383973 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="The image data in /var/lib/glance/images/ cannot be removed when I delete a image that status is saving.

1. create a image
 glance image-create --name image-v1 --disk-format raw --container-format bare --file xx.image --is-public true

2. list the created image, the status is saving
[root@node2 ~]# glance image-list
+--------------------------------------+----------+-------------+------------------+------+--------+
| ID                                   | Name     | Disk Format | Container F..." />
      <meta property="og:description" content="The image data in /var/lib/glance/images/ cannot be removed when I delete a image that status is saving.

1. create a image
 glance image-create --name image-v1 --disk-format raw --container-format bare --file xx.image --is-public true

2. list the created image, the status is saving
[root@node2 ~]# glance image-list
+--------------------------------------+----------+-------------+------------------+------+--------+
| ID                                   | Name     | Disk Format | Container F..." />
    

    
    
      <meta property="og:title" content="Bug #1383973 “image data cannot be removed when deleting a savin...” : Bugs : Glance" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1383973" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["api", "cache", "documentation", "domain-proxy", "gate", "i18n", "low-hanging-fruit", "metadef", "mitaka-backport-potential", "newton-backport-potential", "ocata-rc-potential", "ops", "scrubber", "security"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/glance/+bug/1383973/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/glance"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/355215744/glance-chipmunk-64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/glance">Glance</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/glance">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/glance">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/glance">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/glance">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/glance">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/glance">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    image data cannot be removed when deleting a saving status image
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1383973 reported by
      <a href="https://launchpad.net/~guoquan" class="sprite person">Quan Guo</a>
      <time title="2014-10-22 02:38:19 UTC" datetime="2014-10-22T02:38:19.119773+00:00">on 2014-10-22</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          

          
          <span class="bug-duplicate-details ellipsis single-line wide">
            <span class="sprite info"></span>
            This bug report is a duplicate of:&nbsp;
                <a href="/bugs/1398830" id="duplicate-of-warning-link-bugtasks" title="[OSSA 2015-003] Glance image leak when in saving state (CVE-2014-9623)">Bug #1398830: [OSSA 2015-003] Glance image leak when in saving state (CVE-2014-9623).</a>
          </span>
          
          

          <a id="change-duplicate-bug-bugtasks" href="+duplicate" title="Edit or remove linked duplicate bug" class="sprite edit action-icon standalone change-duplicate-bug">Edit</a>
          <a id="remove-duplicate-bug-bugtasks" href="+duplicate" title="Remove linked duplicate bug" class="sprite remove action-icon standalone remove-duplicate-bug">Remove</a>
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">24</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 2 people</span>
    </div>
  



    <table id="affected-software" class="duplicate listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary1702973">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1702973">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/glance">Glance</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/+bug/1383973/+editstatus" style="float: left" class="value statusFIXCOMMITTED">Fix Committed</a>
          <a href="https://bugs.launchpad.net/glance/+bug/1383973/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1702973">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~lzy-dev">Zhi Yan Liu</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    
  


        
        
          
  <tr id="tasksummary1790786">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/glance/icehouse">Icehouse</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/icehouse/+bug/1383973/+editstatus" style="float: left" class="value statusFIXCOMMITTED">Fix Committed</a>
          <a href="https://bugs.launchpad.net/glance/icehouse/+bug/1383973/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1790786">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/2014.1.4">Glance 2014.1.4</a>
        
      </div>
    </td>

    
  </tr>

  
    
  


        
        
          
  <tr id="tasksummary1767408">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/glance/juno">Juno</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/juno/+bug/1383973/+editstatus" style="float: left" class="value statusFIXCOMMITTED">Fix Committed</a>
          <a href="https://bugs.launchpad.net/glance/juno/+bug/1383973/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1767408">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/2014.2.2">Glance 2014.2.2</a>
        
      </div>
    </td>

    
  </tr>

  
    
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/glance/+bug/1383973/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/glance/+bug/1383973/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/glance/+bug/1383973/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>The image data in /var/lib/<wbr />glance/<wbr />images/ cannot be removed when I delete a image that status is saving.</p>
<p>1. create a image<br />
&nbsp;glance image-create --name image-v1 --disk-format raw --container-format bare --file xx.image --is-public true</p>
<p>2. list the created image, the status is saving<br />
[root@node2 ~]# glance image-list<br />
+------<wbr />-------<wbr />-------<wbr />-------<wbr />-------<wbr />----+--<wbr />-------<wbr />-+-----<wbr />-------<wbr />-+-----<wbr />-------<wbr />------+<wbr />------+<wbr />-------<wbr />-+<br />
| ID                                   | Name     | Disk Format | Container Format | Size | Status |<br />
+------<wbr />-------<wbr />-------<wbr />-------<wbr />-------<wbr />----+--<wbr />-------<wbr />-+-----<wbr />-------<wbr />-+-----<wbr />-------<wbr />------+<wbr />------+<wbr />-------<wbr />-+<br />
| 00ec3d8d-<wbr />41a5-4f7c-<wbr />9448-694099a39b<wbr />cf | image-v1 | raw         | bare             | 18   | saving |<br />
+------<wbr />-------<wbr />-------<wbr />-------<wbr />-------<wbr />----+--<wbr />-------<wbr />-+-----<wbr />-------<wbr />-+-----<wbr />-------<wbr />------+<wbr />------+<wbr />-------<wbr />-+</p>
<p>3. delete the created image<br />
glance image-delete image-v1</p>
<p>4. the image has been deleted but the image data still exists<br />
[root@node2 ~]# glance image-list<br />
+----+-<wbr />-----+-<wbr />-------<wbr />-----+-<wbr />-------<wbr />-------<wbr />---+---<wbr />---+---<wbr />-----+<br />
| ID | Name | Disk Format | Container Format | Size | Status |<br />
+----+-<wbr />-----+-<wbr />-------<wbr />-----+-<wbr />-------<wbr />-------<wbr />---+---<wbr />---+---<wbr />-----+<br />
+----+-<wbr />-----+-<wbr />-------<wbr />-----+-<wbr />-------<wbr />-------<wbr />---+---<wbr />---+---<wbr />-----+</p>
<p>[root@node2 ~]# ls /var/lib/<wbr />glance/<wbr />images<br />
00ec3d8d-<wbr />41a5-4f7c-<wbr />9448-694099a39b<wbr />cf</p>
<p>This problem exists in both v1 and v2 API.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="unofficial-tag" href="/glance/+bugs?field.tag=in-stable-icehouse">in-stable-icehouse</a>
            <a class="unofficial-tag" href="/glance/+bugs?field.tag=in-stable-juno">in-stable-juno</a>
          </span>
          
          <a href="+edit" title="Edit tags" id="tags-trigger" class="sprite edit action-icon">Edit</a>
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~yalei-wang" class="sprite person">yalei wang (yalei-wang)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-23T10:02:58.477929+00:00" title="2014-10-23 10:02:58 UTC">on 2014-10-23</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I think it is normal, should be cache mgt.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I think it is normal, should be cache mgt.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~guoquan" class="sprite person">Quan Guo (guoquan)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-24T02:07:02.568233+00:00" title="2014-10-24 02:07:02 UTC">on 2014-10-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi, ya lei, what do you mean about &#x27;cache mgt&#x27;?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, ya lei, what do you mean about 'cache mgt'?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T14:56:25.351460+00:00" title="2014-12-03 14:56:25 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Let&#x27;s see if someone gets bandwidth to confirm this soon.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Let's see if someone gets bandwidth to confirm this soon.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Public &#8594; Private Security
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T15:18:27.752427+00:00" title="2014-12-03 15:18:27 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I remain dubious of the benefit of switching this bug to private after it was public (and for over a month at that).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I remain dubious of the benefit of switching this bug to private after it was public (and for over a month at that).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
    
    <time title="2014-12-03 15:49:21 UTC" datetime="2014-12-03T15:49:21.712535+00:00">on 2014-12-03</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2014-12-03 15:54:44 UTC" datetime="2014-12-03T15:54:44.013100+00:00">on 2014-12-03</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>no longer affects</b>:
      </td>
      <td>
        ossa
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
    
    <time title="2014-12-03 16:03:40 UTC" datetime="2014-12-03T16:03:40.275212+00:00">on 2014-12-03</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T16:30:09.501684+00:00" title="2014-12-03 16:30:09 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The key reason is that currently glance can receives new image location and save it to database only after its bits saving logic return (affect by glance and glance_store logics). So before upload execution &#x27;thread&#x27; finish, glance doesn&#x27;t know any location information of that &#x27;saving&#x27; image, so delete &#x27;thread&#x27; just think theres&#x27; no any locations/bits of the image need to remove. Figuring out solution.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The key reason is that currently glance can receives new image location and save it to database only after its bits saving logic return (affect by glance and glance_store logics). So before upload execution 'thread' finish, glance doesn't know any location information of that 'saving' image, so delete 'thread' just think theres' no any locations/bits of the image need to remove. Figuring out solution.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T16:56:36.831297+00:00" title="2014-12-03 16:56:36 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks zhiyan.</p>
<p>Sounds like we need to save the location earlier, ie before we start writing the bits. Would that be possible?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks zhiyan.

Sounds like we need to save the location earlier, ie before we start writing the bits. Would that be possible?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T18:23:22.282391+00:00" title="2014-12-03 18:23:22 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Stuart,</p>
<p>Yes, it&#x27;s a sensible solution, I&#x27;m thinking the details of this approach to make sure it&#x27;s a best solution for this defect, it has some costs, e.g. how to get and handle these &#x27;placeholder&#x27;<wbr />/earlier location, and a little concerned on if this way can keep backward-compatible for glance code and client, e.g. not sure glance existing logics check image status instead of len(image.<wbr />locations)<wbr />, outside as well, e.g. to make sure image under &#x27;active&#x27; status before consume location data from metadata.</p>
<p>Thanks.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Stuart,

Yes, it's a sensible solution, I'm thinking the details of this approach to make sure it's a best solution for this defect, it has some costs, e.g. how to get and handle these 'placeholder'/earlier location, and a little concerned on if this way can keep backward-compatible for glance code and client, e.g. not sure glance existing logics check image status instead of len(image.locations), outside as well, e.g. to make sure image under 'active' status before consume location data from metadata.

Thanks.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T18:53:31.645518+00:00" title="2014-12-03 18:53:31 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hmm, it&#x27;s tricky because when the image is in the deleted state any access to the registry from the api using the user&#x27;s context (ie token) will return a 404 for the user.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hmm, it's tricky because when the image is in the deleted state any access to the registry from the api using the user's context (ie token) will return a 404 for the user.


</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-03T19:05:05.340317+00:00" title="2014-12-03 19:05:05 UTC">on 2014-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Also, coordinating between an upload being processed on one api node and a delete coming in from another is tricky.</p>
<p>The upload won&#x27;t be checking the database state so won&#x27;t immediately detect that the image has been deleted.</p>
<p>I don&#x27;t think we can disallow deleting images in a saving state either, because they could end up in a saving state eg if the upload node crashes.</p>
<p>It&#x27;s almost like we need a form of opportunistic scrubbing even when delayed delete is not enabled.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Also, coordinating between an upload being processed on one api node and a delete coming in from another is tricky.

The upload won't be checking the database state so won't immediately detect that the image has been deleted.

I don't think we can disallow deleting images in a saving state either, because they could end up in a saving state eg if the upload node crashes.

It's almost like we need a form of opportunistic scrubbing even when delayed delete is not enabled.

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
    
    <time title="2014-12-04 08:44:16 UTC" datetime="2014-12-04T08:44:16.335417+00:00">on 2014-12-04</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Zhi Yan Liu (lzy-dev)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lzy-dev" class="sprite person">Zhi Yan Liu (lzy-dev)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-12-31T08:12:27.291775+00:00" title="2014-12-31 08:12:27 UTC">on 2014-12-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed at <a rel="nofollow" href="https://review.openstack.org/#/c/144464/">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/c/<wbr />144464/</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed at https://review.openstack.org/#/c/144464/</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; In Progress
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-17T00:26:24.314257+00:00" title="2015-01-17 00:26:24 UTC">on 2015-01-17</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/11">
                <strong>Fix merged to glance (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/144464">https:/<wbr />/review.<wbr />openstack.<wbr />org/144464</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/glance/commit/?id=0dc8fbb3479a53c5bba8475d14f4c7206904c5ea">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?id=0dc8fbb3479<wbr />a53c5bba8475d14<wbr />f4c7206904c5ea</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit 0dc8fbb3479a53c<wbr />5bba8475d14f4c7<wbr />206904c5ea<br />
Author: Zhi Yan Liu &lt;email address hidden&gt;<br />
Date:   Tue Dec 30 22:25:50 2014 +0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Cleanup chunks for deleted image that was &#x27;saving&#x27;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently image data cannot be removed synchronously for an image that<br />
&nbsp;&nbsp;&nbsp;&nbsp;is in saving state. And when, the upload operation for such an image is<br />
&nbsp;&nbsp;&nbsp;&nbsp;completed the operator configured quota can be exceeded.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes the issue of left over chunks for an image which was<br />
&nbsp;&nbsp;&nbsp;&nbsp;deleted from saving status. However, by the limitation of the design we<br />
&nbsp;&nbsp;&nbsp;&nbsp;cannot enforce a global quota check for the image in saving status.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change introduces a inconsonance between http response codes of<br />
&nbsp;&nbsp;&nbsp;&nbsp;v1 and v2 APIs. The status codes which we will now see after the upload<br />
&nbsp;&nbsp;&nbsp;&nbsp;process completes on an image which was deleted mid way are:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;v1: 412 Precondition Failed<br />
&nbsp;&nbsp;&nbsp;&nbsp;v2: 410 Gone</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;SecurityImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;UpgradeImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;APIImpact</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1383973<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1398830<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1188532</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I47229b366c2536<wbr />7ec1bd48aec684e<wbr />0880f3dfe60<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Zhi Yan Liu &lt;email address hidden&gt;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/144464
Committed: https://git.openstack.org/cgit/openstack/glance/commit/?id=0dc8fbb3479a53c5bba8475d14f4c7206904c5ea
Submitter: Jenkins
Branch:    master

commit 0dc8fbb3479a53c5bba8475d14f4c7206904c5ea
Author: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
Date:   Tue Dec 30 22:25:50 2014 +0800

    Cleanup chunks for deleted image that was 'saving'
    
    Currently image data cannot be removed synchronously for an image that
    is in saving state. And when, the upload operation for such an image is
    completed the operator configured quota can be exceeded.
    
    This patch fixes the issue of left over chunks for an image which was
    deleted from saving status. However, by the limitation of the design we
    cannot enforce a global quota check for the image in saving status.
    
    This change introduces a inconsonance between http response codes of
    v1 and v2 APIs. The status codes which we will now see after the upload
    process completes on an image which was deleted mid way are:
    
    v1: 412 Precondition Failed
    v2: 410 Gone
    
    SecurityImpact
    UpgradeImpact
    APIImpact
    
    Closes-Bug: 1383973
    Closes-Bug: 1398830
    Closes-Bug: 1188532
    
    Change-Id: I47229b366c25367ec1bd48aec684e0880f3dfe60
    Signed-off-by: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-22T20:19:57.309886+00:00" title="2015-01-22 20:19:57 UTC">on 2015-01-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/12">
                <strong>Fix proposed to glance (stable/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/juno<br />
Review: <a rel="nofollow" href="https://review.openstack.org/149387">https:/<wbr />/review.<wbr />openstack.<wbr />org/149387</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/juno
Review: https://review.openstack.org/149387</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-22T21:22:29.271849+00:00" title="2015-01-22 21:22:29 UTC">on 2015-01-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/13">
                <strong>Fix proposed to glance (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/icehouse<br />
Review: <a rel="nofollow" href="https://review.openstack.org/149397">https:/<wbr />/review.<wbr />openstack.<wbr />org/149397</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/149397</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-23T11:36:29.634145+00:00" title="2015-01-23 11:36:29 UTC">on 2015-01-23</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/14">
                <strong>Fix merged to glance (stable/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/149387">https:/<wbr />/review.<wbr />openstack.<wbr />org/149387</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/glance/commit/?id=7d5d8657fd70b20518610b3c6f8e41e16c72fa31">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?id=7d5d8657fd7<wbr />0b20518610b3c6f<wbr />8e41e16c72fa31</a><br />
Submitter: Jenkins<br />
Branch:    stable/juno</p>
<p>commit 7d5d8657fd70b20<wbr />518610b3c6f8e41<wbr />e16c72fa31<br />
Author: Zhi Yan Liu &lt;email address hidden&gt;<br />
Date:   Tue Dec 30 22:25:50 2014 +0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Cleanup chunks for deleted image that was &#x27;saving&#x27;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently image data cannot be removed synchronously for an image that<br />
&nbsp;&nbsp;&nbsp;&nbsp;is in saving state. And when, the upload operation for such an image is<br />
&nbsp;&nbsp;&nbsp;&nbsp;completed the operator configured quota can be exceeded.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes the issue of left over chunks for an image which was<br />
&nbsp;&nbsp;&nbsp;&nbsp;deleted from saving status. However, by the limitation of the design we<br />
&nbsp;&nbsp;&nbsp;&nbsp;cannot enforce a global quota check for the image in saving status.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change introduces a inconsonance between http response codes of<br />
&nbsp;&nbsp;&nbsp;&nbsp;v1 and v2 APIs. The status codes which we will now see after the upload<br />
&nbsp;&nbsp;&nbsp;&nbsp;process completes on an image which was deleted mid way are:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;v1: 412 Precondition Failed<br />
&nbsp;&nbsp;&nbsp;&nbsp;v2: 410 Gone</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;SecurityImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;UpgradeImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;APIImpact</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1383973<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1398830<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1188532</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />api/v1/<wbr />upload_<wbr />utils.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />api/v2/<wbr />image_data.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />tests/unit/<wbr />test_domain_<wbr />proxy.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />tests/unit/<wbr />v1/test_<wbr />api.py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I47229b366c2536<wbr />7ec1bd48aec684e<wbr />0880f3dfe60<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Zhi Yan Liu &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0dc8fbb3479a53c<wbr />5bba8475d14f4c7<wbr />206904c5ea)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/149387
Committed: https://git.openstack.org/cgit/openstack/glance/commit/?id=7d5d8657fd70b20518610b3c6f8e41e16c72fa31
Submitter: Jenkins
Branch:    stable/juno

commit 7d5d8657fd70b20518610b3c6f8e41e16c72fa31
Author: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
Date:   Tue Dec 30 22:25:50 2014 +0800

    Cleanup chunks for deleted image that was 'saving'
    
    Currently image data cannot be removed synchronously for an image that
    is in saving state. And when, the upload operation for such an image is
    completed the operator configured quota can be exceeded.
    
    This patch fixes the issue of left over chunks for an image which was
    deleted from saving status. However, by the limitation of the design we
    cannot enforce a global quota check for the image in saving status.
    
    This change introduces a inconsonance between http response codes of
    v1 and v2 APIs. The status codes which we will now see after the upload
    process completes on an image which was deleted mid way are:
    
    v1: 412 Precondition Failed
    v2: 410 Gone
    
    SecurityImpact
    UpgradeImpact
    APIImpact
    
    Closes-Bug: 1383973
    Closes-Bug: 1398830
    Closes-Bug: 1188532
    
    Conflicts:
    	glance/api/v1/upload_utils.py
    	glance/api/v2/image_data.py
    	glance/tests/unit/test_domain_proxy.py
    	glance/tests/unit/v1/test_api.py
    
    Change-Id: I47229b366c25367ec1bd48aec684e0880f3dfe60
    Signed-off-by: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
    (cherry picked from commit 0dc8fbb3479a53c5bba8475d14f4c7206904c5ea)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-juno
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-23T14:46:42.736057+00:00" title="2015-01-23 14:46:42 UTC">on 2015-01-23</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/15">
                <strong>Fix proposed to glance (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/icehouse<br />
Review: <a rel="nofollow" href="https://review.openstack.org/149646">https:/<wbr />/review.<wbr />openstack.<wbr />org/149646</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/149646</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-23T15:04:01.424838+00:00" title="2015-01-23 15:04:01 UTC">on 2015-01-23</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/16">
                <strong>Change abandoned on glance (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Change abandoned by nikhil komawar (&lt;email address hidden&gt;) on branch: stable/icehouse<br />
Review: <a rel="nofollow" href="https://review.openstack.org/149397">https:/<wbr />/review.<wbr />openstack.<wbr />org/149397</a><br />
Reason: <a rel="nofollow" href="https://review.openstack.org/#/c/149646">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/c/<wbr />149646</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Change abandoned by nikhil komawar (nikhil.komawar@rackspace.com) on branch: stable/icehouse
Review: https://review.openstack.org/149397
Reason: https://review.openstack.org/#/c/149646</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1383973/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-01-23T16:45:41.908979+00:00" title="2015-01-23 16:45:41 UTC">on 2015-01-23</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1383973/comments/17">
                <strong>Fix merged to glance (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1383973/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/149646">https:/<wbr />/review.<wbr />openstack.<wbr />org/149646</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/glance/commit/?id=f1260cc771ee068651aa62b972bef49d9af81eb0">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?id=f1260cc771e<wbr />e068651aa62b972<wbr />bef49d9af81eb0</a><br />
Submitter: Jenkins<br />
Branch:    stable/icehouse</p>
<p>commit f1260cc771ee068<wbr />651aa62b972bef4<wbr />9d9af81eb0<br />
Author: Zhi Yan Liu &lt;email address hidden&gt;<br />
Date:   Tue Dec 30 22:25:50 2014 +0800</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Cleanup chunks for deleted image that was &#x27;saving&#x27;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently image data cannot be removed synchronously for an image that<br />
&nbsp;&nbsp;&nbsp;&nbsp;is in saving state. And when, the upload operation for such an image is<br />
&nbsp;&nbsp;&nbsp;&nbsp;completed the operator configured quota can be exceeded.<br />
&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes the issue of left over chunks for an image which was<br />
&nbsp;&nbsp;&nbsp;&nbsp;deleted from saving status. However, by the limitation of the design we<br />
&nbsp;&nbsp;&nbsp;&nbsp;cannot enforce a global quota check for the image in saving status.<br />
&nbsp;&nbsp;&nbsp;&nbsp;This change introduces a inconsonance between http response codes of<br />
&nbsp;&nbsp;&nbsp;&nbsp;v1 and v2 APIs. The status codes which we will now see after the upload<br />
&nbsp;&nbsp;&nbsp;&nbsp;process completes on an image which was deleted mid way are:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;v1: 412 Precondition Failed<br />
&nbsp;&nbsp;&nbsp;&nbsp;v2: 410 Gone</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;SecurityImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;UpgradeImpact<br />
&nbsp;&nbsp;&nbsp;&nbsp;APIImpact</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1383973<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1398830<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: 1188532</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />api/v1/<wbr />upload_<wbr />utils.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />api/v2/<wbr />image_data.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />quota/_<wbr />_init__<wbr />.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />tests/unit/<wbr />test_domain_<wbr />proxy.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />tests/unit/<wbr />test_quota.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;glance/<wbr />tests/unit/<wbr />v1/test_<wbr />api.py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Zhi Yan Liu &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0dc8fbb3479a53c<wbr />5bba8475d14f4c7<wbr />206904c5ea)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I47229b366c2536<wbr />7ec1bd48aec684e<wbr />0880f3dfe60</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/149646
Committed: https://git.openstack.org/cgit/openstack/glance/commit/?id=f1260cc771ee068651aa62b972bef49d9af81eb0
Submitter: Jenkins
Branch:    stable/icehouse

commit f1260cc771ee068651aa62b972bef49d9af81eb0
Author: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
Date:   Tue Dec 30 22:25:50 2014 +0800

    Cleanup chunks for deleted image that was 'saving'
    
    Currently image data cannot be removed synchronously for an image that
    is in saving state. And when, the upload operation for such an image is
    completed the operator configured quota can be exceeded.
    This patch fixes the issue of left over chunks for an image which was
    deleted from saving status. However, by the limitation of the design we
    cannot enforce a global quota check for the image in saving status.
    This change introduces a inconsonance between http response codes of
    v1 and v2 APIs. The status codes which we will now see after the upload
    process completes on an image which was deleted mid way are:
    
    v1: 412 Precondition Failed
    v2: 410 Gone
    
    SecurityImpact
    UpgradeImpact
    APIImpact
    
    Closes-Bug: 1383973
    Closes-Bug: 1398830
    Closes-Bug: 1188532
    
    Conflicts:
            glance/api/v1/upload_utils.py
            glance/api/v2/image_data.py
            glance/quota/__init__.py
            glance/tests/unit/test_domain_proxy.py
            glance/tests/unit/test_quota.py
            glance/tests/unit/v1/test_api.py
    
    Signed-off-by: Zhi Yan Liu &lt;zhiyanl@cn.ibm.com&gt;
    (cherry picked from commit 0dc8fbb3479a53c5bba8475d14f4c7206904c5ea)
    
    Change-Id: I47229b366c25367ec1bd48aec684e0880f3dfe60
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-icehouse
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/glance/+bug/1383973/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/glance/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/glance/+bug/1383973/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    
    
      <li class="bug-duplicate-details"><a id="change-duplicate-bug" title="Edit or remove linked duplicate bug" class="sprite edit change-duplicate-bug" href="https://bugs.launchpad.net/glance/+bug/1383973/+duplicate"></a>
      <span id="mark-duplicate-text">Duplicate of
        
          
            <a href="/bugs/1398830" id="duplicate-of" style="margin-right: 4px" title="[OSSA 2015-003] Glance image leak when in saving state (CVE-2014-9623)">bug #1398830</a>
            
          

          
        
      </span>


      <a id="remove-duplicate-bug" href="+duplicate" title="Remove linked duplicate bug" class="sprite remove action-icon remove-duplicate-bug" style="float: right;">Remove</a>

      </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/glance/+bug/1383973/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/glance/+bug/1383973/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/glance/+bug/1383973/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/glance/+bug/1383973/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/glance/+bug/1383973/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/glance/+bug/1383973/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1383973", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1383973"}, "information_type_data": {"PUBLIC": {"description": "Everyone can see this information.\n", "name": "Public", "is_private": false, "order": 0, "description_css_class": "choice-description", "value": "PUBLIC"}, "PUBLICSECURITY": {"description": "Everyone can see this security related information.\n", "name": "Public Security", "is_private": false, "order": 1, "description_css_class": "choice-description", "value": "PUBLICSECURITY"}, "USERDATA": {"description": "Only shared with users permitted to see private user information.\n", "name": "Private", "is_private": true, "order": 3, "description_css_class": "choice-description", "value": "USERDATA"}, "PRIVATESECURITY": {"description": "Only the security group can see this information.\n ", "name": "Private Security", "is_private": true, "order": 2, "description_css_class": "choice-description", "value": "PRIVATESECURITY"}}, "total_comments_and_activity": 46, "bug_is_private": false, "related_features": {}, "first visible_recent_comment": -23, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1383973", "web_link": "https://bugs.launchpad.net/bugs/1383973", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1383973, "private": false, "information_type": "Public", "name": null, "title": "image data cannot be removed when deleting a saving status image", "description": "The image data in /var/lib/glance/images/ cannot be removed when I delete a image that status is saving.\n\n1. create a image\n glance image-create --name image-v1 --disk-format raw --container-format bare --file xx.image --is-public true\n\n2. list the created image, the status is saving\n[root@node2 ~]# glance image-list\n+--------------------------------------+----------+-------------+------------------+------+--------+\n| ID                                   | Name     | Disk Format | Container Format | Size | Status |\n+--------------------------------------+----------+-------------+------------------+------+--------+\n| 00ec3d8d-41a5-4f7c-9448-694099a39bcf | image-v1 | raw         | bare             | 18   | saving |\n+--------------------------------------+----------+-------------+------------------+------+--------+\n\n3. delete the created image\nglance image-delete image-v1\n\n4. the image has been deleted but the image data still exists\n[root@node2 ~]# glance image-list\n+----+------+-------------+------------------+------+--------+\n| ID | Name | Disk Format | Container Format | Size | Status |\n+----+------+-------------+------------------+------+--------+\n+----+------+-------------+------------------+------+--------+\n\n[root@node2 ~]# ls /var/lib/glance/images\n00ec3d8d-41a5-4f7c-9448-694099a39bcf\n\nThis problem exists in both v1 and v2 API.", "owner_link": "https://bugs.launchpad.net/api/devel/~guoquan", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/bug_tasks", "duplicate_of_link": "https://bugs.launchpad.net/api/devel/bugs/1398830", "date_created": "2014-10-22T02:38:19.119773+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/subscriptions", "date_last_updated": "2015-03-13T00:03:42.997788+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 24, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/attachments", "security_related": false, "latest_patch_uploaded": null, "tags": ["in-stable-icehouse", "in-stable-juno"], "date_last_message": "2015-01-23T16:45:41.908979+00:00", "number_of_duplicates": 0, "message_count": 18, "users_affected_count": 2, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/users_unaffected", "users_affected_count_with_dupes": 2, "other_users_affected_count_with_dupes": 2, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1383973/linked_merge_proposals", "http_etag": "\"585a651fb9be1321a1b5471b1a0e070cd61d6089-45356beb133dda725614b3bd6134b3e0df781d1d\""}, "bugtask_data": {"1767408": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/glance/juno/+bug/1383973", "assignee_value": null, "user_can_edit_status": true, "bug_title": "image data cannot be removed when deleting a saving status image", "user_can_edit_milestone": false, "prefix": "glance_juno", "form_row_id": "task1767408", "target_is_product": false, "user_can_edit_importance": false, "assignee_is_team": null, "delete_link": "https://bugs.launchpad.net/glance/juno/+bug/1383973/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Committed", "importance_value": "Undecided", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1767408", "assignee_vocabulary_filters": [], "targetname": "Glance juno", "importance_widget_items": "[]", "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/2014.2.2", "id": 1767408}, "1790786": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/glance/icehouse/+bug/1383973", "assignee_value": null, "user_can_edit_status": true, "bug_title": "image data cannot be removed when deleting a saving status image", "user_can_edit_milestone": false, "prefix": "glance_icehouse", "form_row_id": "task1790786", "target_is_product": false, "user_can_edit_importance": false, "assignee_is_team": null, "delete_link": "https://bugs.launchpad.net/glance/icehouse/+bug/1383973/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Committed", "importance_value": "Undecided", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1790786", "assignee_vocabulary_filters": [], "targetname": "Glance icehouse", "importance_widget_items": "[]", "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/2014.1.4", "id": 1790786}, "1702973": {"assignee_vocabulary": "AllUserTeamsParticipation", "user_can_unassign": false, "bugtask_path": "/glance/+bug/1383973", "assignee_value": "lzy-dev", "user_can_edit_status": true, "bug_title": "image data cannot be removed when deleting a saving status image", "user_can_edit_milestone": false, "prefix": "glance", "form_row_id": "task1702973", "target_is_product": true, "user_can_edit_importance": false, "assignee_is_team": false, "delete_link": "https://bugs.launchpad.net/glance/+bug/1383973/+delete", "user_can_edit_assignee": false, "milestone_widget_items": "[]", "status_widget_items": "[]", "status_value": "Fix Committed", "importance_value": "Critical", "hide_assignee_team_selection": true, "user_can_delete": false, "row_id": "tasksummary1702973", "assignee_vocabulary_filters": [], "targetname": "Glance", "importance_widget_items": "[]", "milestone_value": null, "id": 1702973}}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1383973", "web_link": "https://bugs.launchpad.net/glance/+bug/1383973", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1383973", "milestone_link": null, "status": "Fix Committed", "importance": "Critical", "assignee_link": "https://bugs.launchpad.net/api/devel/~lzy-dev", "bug_target_display_name": "Glance", "bug_target_name": "glance", "bug_watch_link": null, "date_assigned": "2014-12-04T08:44:16.803867+00:00", "date_created": "2014-10-22T02:38:19.119773+00:00", "date_confirmed": "2014-12-03T16:03:41.133655+00:00", "date_incomplete": null, "date_in_progress": "2014-12-31T08:13:17.417891+00:00", "date_closed": null, "date_left_new": "2014-12-03T16:03:41.133655+00:00", "date_triaged": "2014-12-31T08:13:17.417891+00:00", "date_fix_committed": "2015-01-17T00:26:22.746710+00:00", "date_fix_released": null, "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~guoquan", "target_link": "https://bugs.launchpad.net/api/devel/glance", "title": "Bug #1383973 in Glance: \"image data cannot be removed when deleting a saving status image\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1383973/related_tasks", "is_complete": false, "http_etag": "\"d95eb08c906e9eaf6d76242fea2355f310fcd894-ee85d959ea12892f31c3420eec5bd8fa681091f6\""}, "initial_comment_batch_offset": 41};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 58 queries/external actions issued in 0.91 seconds

    Features: {'app.maintenance_message': None, 'visible_render_time': None, 'bugs.affected_count_includes_dupes.disabled': None, 'app.mainsite_only.canonical_url': None, 'bugs.nominations.bug_supervisors_can_target': 'on', 'baselayout.careers_link.disabled': None, 'hard_timeout': '9000', 'js.yui_version': None, 'profiling.enabled': None}

    r0d8de2b

    -->

</html>

