<!DOCTYPE html>
<html lang='en'>
<head>
<title>virglrenderer - VirGL virtual OpenGL renderer  (mirrored from https://gitlab.freedesktop.org/virgl/virglrenderer)</title>
<meta name='generator' content='cgit v1.2.1'/>
<meta name='robots' content='index, nofollow'/>
<link rel='stylesheet' type='text/css' href='https://cgit.freedesktop.org/cgit.css'/>
<link rel='shortcut icon' href='/favicon.ico'/>
<link rel='alternate' title='Atom feed' href='https://cgit.freedesktop.org/virglrenderer/atom/src/gallium/auxiliary/tgsi/tgsi_text.c?h=master' type='application/atom+xml'/>
<link rel='vcs-git' href='https://gitlab.freedesktop.org/virgl/virglrenderer' title='virglrenderer Git repository'/>
</head>
<body>
<div id='cgit'><table id='header'>
<tr>
<td class='logo' rowspan='2'><a href='/'><img src='https://cgit.freedesktop.org/logo.png' alt='cgit logo'/></a></td>
<td class='main'><a href='/'>index</a> : <a title='virglrenderer' href='/virglrenderer/'>virglrenderer</a></td><td class='form'><form method='get'>
<input type='hidden' name='id' value='28894a30a17a84529be102b21118e55d6c9f23fa'/><select name='h' onchange='this.form.submit();'>
<option value='224-astc-textures-are-not-fully-supported-when-running-on-gl-hosts'>224-astc-textures-are-not-fully-supported-when-running-on-gl-hosts</option>
<option value='branch-0.9.1'>branch-0.9.1</option>
<option value='jakob-socket-protoheader'>jakob-socket-protoheader</option>
<option value='jakob-vtest-print-segfaults'>jakob-vtest-print-segfaults</option>
<option value='jakob-vtest-refactor'>jakob-vtest-refactor</option>
<option value='jakob-vtest-space'>jakob-vtest-space</option>
<option value='master' selected='selected'>master</option>
<option value='virtio-gpu-next'>virtio-gpu-next</option>
</select> <input type='submit' value='switch'/></form></td></tr>
<tr><td class='sub'>VirGL virtual OpenGL renderer  (mirrored from https://gitlab.freedesktop.org/virgl/virglrenderer)</td><td class='sub right'>airlied</td></tr></table>
<table class='tabs'><tr><td>
<a href='/virglrenderer/'>summary</a><a href='/virglrenderer/refs/?id=28894a30a17a84529be102b21118e55d6c9f23fa'>refs</a><a href='/virglrenderer/log/src/gallium/auxiliary/tgsi/tgsi_text.c'>log</a><a href='/virglrenderer/tree/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>tree</a><a class='active' href='/virglrenderer/commit/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>commit</a><a href='/virglrenderer/diff/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>diff</a></td><td class='form'><form class='right' method='get' action='/virglrenderer/log/src/gallium/auxiliary/tgsi/tgsi_text.c'>
<input type='hidden' name='id' value='28894a30a17a84529be102b21118e55d6c9f23fa'/><select name='qt'>
<option value='grep'>log msg</option>
<option value='author'>author</option>
<option value='committer'>committer</option>
<option value='range'>range</option>
</select>
<input class='txt' type='search' size='10' name='q' value=''/>
<input type='submit' value='search'/>
</form>
</td></tr></table>
<div class='path'>path: <a href='/virglrenderer/commit/?id=28894a30a17a84529be102b21118e55d6c9f23fa'>root</a>/<a href='/virglrenderer/commit/src?id=28894a30a17a84529be102b21118e55d6c9f23fa'>src</a>/<a href='/virglrenderer/commit/src/gallium?id=28894a30a17a84529be102b21118e55d6c9f23fa'>gallium</a>/<a href='/virglrenderer/commit/src/gallium/auxiliary?id=28894a30a17a84529be102b21118e55d6c9f23fa'>auxiliary</a>/<a href='/virglrenderer/commit/src/gallium/auxiliary/tgsi?id=28894a30a17a84529be102b21118e55d6c9f23fa'>tgsi</a>/<a href='/virglrenderer/commit/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>tgsi_text.c</a></div><div class='content'><div class='cgit-panel'><b>diff options</b><form method='get'><input type='hidden' name='id' value='28894a30a17a84529be102b21118e55d6c9f23fa'/><table><tr><td colspan='2'/></tr><tr><td class='label'>context:</td><td class='ctrl'><select name='context' onchange='this.form.submit();'><option value='1'>1</option><option value='2'>2</option><option value='3' selected='selected'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='15'>15</option><option value='20'>20</option><option value='25'>25</option><option value='30'>30</option><option value='35'>35</option><option value='40'>40</option></select></td></tr><tr><td class='label'>space:</td><td class='ctrl'><select name='ignorews' onchange='this.form.submit();'><option value='0' selected='selected'>include</option><option value='1'>ignore</option></select></td></tr><tr><td class='label'>mode:</td><td class='ctrl'><select name='dt' onchange='this.form.submit();'><option value='0' selected='selected'>unified</option><option value='1'>ssdiff</option><option value='2'>stat only</option></select></td></tr><tr><td/><td class='ctrl'><noscript><input type='submit' value='reload'/></noscript></td></tr></table></form></div><table summary='commit info' class='commit-info'>
<tr><th>author</th><td>Li Qiang &lt;liq3ea@gmail.com&gt;</td><td class='right'>2017-01-23 02:44:03 -0500</td></tr>
<tr><th>committer</th><td>Dave Airlie &lt;airlied@redhat.com&gt;</td><td class='right'>2017-02-07 14:00:52 +1000</td></tr>
<tr><th>commit</th><td colspan='2' class='sha1'><a href='/virglrenderer/commit/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>28894a30a17a84529be102b21118e55d6c9f23fa</a> (<a href='/virglrenderer/patch/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>patch</a>)</td></tr>
<tr><th>tree</th><td colspan='2' class='sha1'><a href='/virglrenderer/tree/?id=28894a30a17a84529be102b21118e55d6c9f23fa'>ccf64f52c9d3f30b8ce0ba7d18af377e669543bd</a> /<a href='/virglrenderer/tree/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>src/gallium/auxiliary/tgsi/tgsi_text.c</a></td></tr>
<tr><th>parent</th><td colspan='2' class='sha1'><a href='/virglrenderer/commit/src/gallium/auxiliary/tgsi/tgsi_text.c?id=e534b51ca3c3cd25f3990589932a9ed711c59b27'>e534b51ca3c3cd25f3990589932a9ed711c59b27</a> (<a href='/virglrenderer/diff/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa&amp;id2=e534b51ca3c3cd25f3990589932a9ed711c59b27'>diff</a>)</td></tr></table>
<div class='commit-subject'>gallium/tgsi: fix oob access in parse instruction</div><div class='commit-msg'>When parsing texture instruction, it doesn't stop if the
'cur' is ',', the loop variable 'i' will also be increased
and be used to index the 'inst.TexOffsets' array. This can lead
an oob access issue. This patch avoid this.

Signed-off-by: Li Qiang &lt;liq3ea@gmail.com&gt;
Signed-off-by: Dave Airlie &lt;airlied@redhat.com&gt;
</div><div class='diffstat-header'><a href='/virglrenderer/diff/?id=28894a30a17a84529be102b21118e55d6c9f23fa'>Diffstat</a> (limited to 'src/gallium/auxiliary/tgsi/tgsi_text.c')</div><table summary='diffstat' class='diffstat'><tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/virglrenderer/diff/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>src/gallium/auxiliary/tgsi/tgsi_text.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
</table><div class='diffstat-summary'>1 files changed, 1 insertions, 1 deletions</div><table summary='diff' class='diff'><tr><td><div class='head'>diff --git a/src/gallium/auxiliary/tgsi/tgsi_text.c b/src/gallium/auxiliary/tgsi/tgsi_text.c<br/>index b94d204..ee23971 100644<br/>--- a/<a href='/virglrenderer/tree/src/gallium/auxiliary/tgsi/tgsi_text.c?id=e534b51ca3c3cd25f3990589932a9ed711c59b27'>src/gallium/auxiliary/tgsi/tgsi_text.c</a><br/>+++ b/<a href='/virglrenderer/tree/src/gallium/auxiliary/tgsi/tgsi_text.c?id=28894a30a17a84529be102b21118e55d6c9f23fa'>src/gallium/auxiliary/tgsi/tgsi_text.c</a></div><div class='hunk'>@@ -1097,7 +1097,7 @@ parse_instruction(</div><div class='ctx'> </div><div class='ctx'>    cur = ctx-&gt;cur;</div><div class='ctx'>    eat_opt_white( &amp;cur );</div><div class='del'>-   for (i = 0; inst.Instruction.Texture &amp;&amp; *cur == ','; i++) {</div><div class='add'>+   for (i = 0; inst.Instruction.Texture &amp;&amp; *cur == ',' &amp;&amp; i &lt; TGSI_FULL_MAX_TEX_OFFSETS; i++) {</div><div class='ctx'>          cur++;</div><div class='ctx'>          eat_opt_white( &amp;cur );</div><div class='ctx'>          ctx-&gt;cur = cur;</div></td></tr></table></div> <!-- class=content -->
<div class='footer'>generated by <a href='https://git.zx2c4.com/cgit/about/'>cgit v1.2.1</a> (<a href='https://git-scm.com/'>git 2.18.0</a>) at 2021-10-30 22:00:14 +0000</div>
</div> <!-- id=cgit -->
</body>
</html>
