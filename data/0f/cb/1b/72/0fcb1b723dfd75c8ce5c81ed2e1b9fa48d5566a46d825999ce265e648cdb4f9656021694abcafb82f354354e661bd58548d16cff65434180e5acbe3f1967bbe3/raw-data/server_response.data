
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Hibernation &#8212; Dovecot documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="https://s3-us-west-2.amazonaws.com/colors-css/2.2.0/colors.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Home Directories for Virtual Users" href="../home_directories_for_virtual_users/" />
    <link rel="prev" title="General Settings" href="../general_settings/" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="hibernation">
<span id="id1"></span><h1>Hibernation<a class="headerlink" href="#hibernation" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not supported on kqueue based systems currently, such as FreeBSD.</p>
</div>
<p>Dovecot supports moving connections that have issued IDLE to a special holding
process, called imap-hibernate. This process is responsible for holding the
idle processes until they need to be thawed.</p>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">imap_hibernate_timeout</span></code> specifies the delay before moving users to
<code class="docutils literal notranslate"><span class="pre">imap-hibernate</span></code> process. This requires inter-process communication between
<code class="docutils literal notranslate"><span class="pre">imap</span></code> and <code class="docutils literal notranslate"><span class="pre">imap-hibernate</span></code> process.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>imap_hibernate_timeout = 5s

service imap {
  # Note that this change will allow any process running as
  # $default_internal_user (dovecot) to access mails as any other user.
  # This may be insecure in some installations, which is why this isn&#39;t
  # done by default.
  unix_listener imap-master {
    user = $default_internal_user
  }
}

# The following is the default already in v2.3.1+:
service imap {
  extra_groups = $default_internal_group
}
service imap-hibernate {
  unix_listener imap-hibernate {
    mode = 0660
    group = $default_internal_group
  }
}
</pre></div>
</div>
</section>
<section id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>When client issues IDLE, the connection socket is moved to the hibernation
process. This process is responsible for keeping all connections that are
idling, until they issue some command that requires them to be thawed into a
imap process. This way, memory and CPU resources are saved, since there is only
one hibernation process.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../">
    <img class="logo" src="../../_static/dovecot.gif" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../settings/">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin_manual/">Administrative Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Configuration Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../authentication/">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config_file/">Dovecot Config File Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dict/">Dovecot Dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fts/">FTS (Full Text Search)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../haproxy/">HAProxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/">Guides and tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mail_location/">Mail Location Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespace/">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespace/#mailbox-settings">Mailbox settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../os/">OS Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/">Plugin configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/">Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quota/">Quota Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sieve/">Sieve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats/">Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acl/">Access Control Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common_configuration/">Common configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../director_settings/">Director Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dovecot_ssl_configuration/">Dovecot SSL configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dovemon/">Dovemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event_export/">Event Export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event_filter/">Event Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forwarding_parameters/">Forwarding parameters in IMAP/POP3/LMTP/SMTP proxying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general_backend_settings/">General Backend Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general_settings/">General Settings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Hibernation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../home_directories_for_virtual_users/">Home Directories for Virtual Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../imap_metadata/">IMAP METADATA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lastlogin_plugin/">Last Login Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lazy_expunge_plugin/">Lazy Expunge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lazy_expunge_plugin/#dumpster">Dumpster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mail_cache_settings/">Mail Cache Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mail_crypt_plugin/">mail-crypt-plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfs/">NFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notify_plugin/">Notify plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notify_status_plugin/">notify_status plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../old_stats/">stats (old_stats)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proxy_settings/">Proxy Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../push_notification/">Push Notification Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_configuration/">Quick Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quota_clone_plugin/">Quota Clone Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quota_plugin/">Quota Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../replication/">Replication with dsync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_usage/">Resource Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../service_configuration/">Service configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shared_mailboxes/">Shared mailboxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spam_reporting/">Spam Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssl_configuration/">SSL Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtual_attachments_plugin/">Virtual Attachments Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtual_plugin/">Virtual Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../welcome_plugin/">Welcome plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zlib_plugin/">Zlib plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats/openmetrics/">OpenMetrics exporter for statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats/old_statistics/">Old Statistics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide/">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_manual/">Developer Manual</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/dovecot/documentation/pulls/">Edit Documentation</a></li>
    
    <li class="toctree-l1"><a href="https://repo.dovecot.org/">Repositories</a></li>
    
    <li class="toctree-l1"><a href="https://dovecot.org/download.html">Download</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../">Documentation overview</a><ul>
  <li><a href="../">Configuration Manual</a><ul>
      <li>Previous: <a href="../general_settings/" title="previous chapter">General Settings</a></li>
      <li>Next: <a href="../home_directories_for_virtual_users/" title="next chapter">Home Directories for Virtual Users</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<hr>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2002-2019, Dovecot Authors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/configuration_manual/hibernation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>