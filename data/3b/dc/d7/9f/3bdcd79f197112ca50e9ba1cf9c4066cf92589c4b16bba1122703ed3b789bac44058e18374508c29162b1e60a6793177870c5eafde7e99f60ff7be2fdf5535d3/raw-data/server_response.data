<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 1011383005: Percent-encode illegal characters in Android page info popup URL -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '2d2e2df6b4ded35a8e7bedfddaf197d6';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/1011383005%252526ust%25253D1608651150665674%252526usg%25253DAFQjCNFAwAGopj9QxaeD889hdY6fyaAcyw%26service%3Dah">Sign out</a>

</div>
<div class="counter">(1679)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-1011383005">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/1011383005/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            1011383005</a>:
    Percent-encode illegal characters in Android page info popup URL  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            5 years, 9 months ago by <a href="/user/tsergeant" onMouseOver="M_showUserInfoPopup(this)">tsergeant</a>
          </div>
          <div><b>Modified:</b><br/>
            5 years, 9 months ago
          </div>
          <div><b>Reviewers:</b><br/>
            <span class='approval'><a href="/user/Ted%20C" onMouseOver="M_showUserInfoPopup(this)">Ted C</a></span>, <span class='approval'><a href="/user/Matt%20Giuca" onMouseOver="M_showUserInfoPopup(this)">Matt Giuca</a></span>
          </div>
          
          <div><b>CC:</b><br/>
            chromium-reviews, chrome-apps-syd-reviews_chromium.org, sashab, benwells, Matt Giuca
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/src.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/pending/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=chromium">
              chromium
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - c14d891d44f0afff64e56ed7c9702df1d807b1ee"
               href="/search?repo_guid=c14d891d44f0afff64e56ed7c9702df1d807b1ee">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">Percent-encode illegal characters in Android page info popup URL

This prevents whitespace and non-ASCII characters from being displayed in
the url, stopping attacks where a carefully crafted URL can be used
to display a message in the popup.

BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=466351">466351</a>
Committed: <a href="https://crrev.com/b1130cfc5dca2d5f01edafd7d50f795f391ab904">https://crrev.com/b1130cfc5dca2d5f01edafd7d50f795f391ab904</a>
Cr-Commit-Position: refs/heads/master@{#322296}
  </div>




  <h3>
    <a id="ps-1-pointer"
       href="/1011383005/#ps1"
       onclick="M_toggleSectionForPS('1011383005', '1')"
       class="toggled-section ">
      Patch Set 1
      
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 6
      
    </div>
  

  <div id="ps-1"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-20001-pointer"
       href="/1011383005/#ps20001"
       onclick="M_toggleSectionForPS('1011383005', '20001')"
       class="toggled-section ">
      Patch Set 2
      : Only encode when the URL contains unusual characters
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-20001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-60001-pointer"
       href="/1011383005/#ps60001"
       onclick="M_toggleSectionForPS('1011383005', '60001')"
       class="toggled-section ">
      Patch Set 3
      : Reformat
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 7
      
    </div>
  

  <div id="ps-60001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-80001-pointer"
       href="/1011383005/#ps80001"
       onclick="M_toggleSectionForPS('1011383005', '80001')"
       class="toggled-section ">
      Patch Set 4
      : Only encode whitespace characters
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 10
      
    </div>
  

  <div id="ps-80001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-100001-pointer"
       href="/1011383005/#ps100001"
       onclick="M_toggleSectionForPS('1011383005', '100001')"
       class="toggled-section ">
      Patch Set 5
      : Address comments
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 2
      
    </div>
  

  <div id="ps-100001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-140001-pointer"
       href="/1011383005/#ps140001"
       onclick="M_toggleSectionForPS('1011383005', '140001')"
       class="toggled-section ">
      Patch Set 6
      : Unicode test
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-140001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-30003-pointer"
       href="/1011383005/#ps30003"
       onclick="M_toggleSectionForPS('1011383005', '30003')"
       class="toggled-section opentriangle">
      Patch Set 7
      : Change unicode representation
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-30003"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 5 years, 9 months ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue1011383005_30003.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/1011383005/30003"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+67 lines, -1 line</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1011383005/patch/30003/160001">
            chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1011383005/diff/30003/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1011383005/diff2/1:30003/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java"
             title="Delta from patch set 1">1</a>
        
          <a href="/1011383005/diff2/20001:30003/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java"
             title="Delta from patch set 2">2</a>
        
          <a href="/1011383005/diff2/60001:30003/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java"
             title="Delta from patch set 3">3</a>
        
          <a href="/1011383005/diff2/80001:30003/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java"
             title="Delta from patch set 4">4</a>
        
        </td>
        
          <td style="white-space: nowrap">4 chunks</td>
          <td style="white-space: nowrap">+27 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1011383005_30003_160001.diff"
             title="Download patch for chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">A</td>
        <td>
          <a class="noul"
             href="/1011383005/patch/30003/160002">
            chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1011383005/diff/30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1011383005/diff2/1:30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java"
             title="Delta from patch set 1">1</a>
        
          <a href="/1011383005/diff2/20001:30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java"
             title="Delta from patch set 2">2</a>
        
          <a href="/1011383005/diff2/60001:30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java"
             title="Delta from patch set 3">3</a>
        
          <a href="/1011383005/diff2/80001:30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java"
             title="Delta from patch set 4">4</a>
        
          <a href="/1011383005/diff2/100001:30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java"
             title="Delta from patch set 5">5</a>
        
          <a href="/1011383005/diff2/140001:30003/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java"
             title="Delta from patch set 6">6</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+40 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1011383005_30003_160002.diff"
             title="Download patch for chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 30003;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 20 (6 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 20)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 20)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(20)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(20)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    generated"
           style="display: none"
           id="generated-msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          tsergeant@chromium.org changed reviewers: + tedchoc@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-19 02:51:59 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            ><a href="mailto:tsergeant@chromium.org">tsergeant@chromium.org</a> changed reviewers:
+ <a href="mailto:tedchoc@chromium.org">tedchoc@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          tedchoc@, please take a look.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-19 02:52:00 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            >tedchoc@, please take a look.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Matt Giuca</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          mgiuca@chromium.org changed reviewers: + mgiuca@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-19 03:12:56 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            ><a href="mailto:mgiuca@chromium.org">mgiuca@chromium.org</a> changed reviewers:
+ <a href="mailto:mgiuca@chromium.org">mgiuca@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Matt Giuca</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          Drive-by. https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java File chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java (right): https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode168 chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:168: // The set of characters which have syntactic ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-19 03:12:57 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            >Drive-by.

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode168" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:168:
// The set of characters which have syntactic meaning in a URL.
// This is the &quot;reserved&quot; character set from RFC 3986, plus the &#39;%&#39; character.

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode287" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:287:
// allowed in a URL (spaces, ASCII control characters, non-ASCII Unicode).
You are also allowing the following: &quot;&lt;&gt;\^`{|}
(Those characters are in neither the reserved nor unreserved sets, and are
therefore illegal in URLs.) Assuming my understanding of Uri.encode is correct
--- that it escapes all characters other than URI_RESERVED_CHARACTERS. So you
should mention that in the comment.

Also, explain the purpose of not simply calling encode with no |allow| argument:
// Do not use the default allowed character set of Uri.encode, as that will
escape reserved syntactic characters (eg, &#39;&amp;&#39;). We must only escape illegal
characters.

(Feel free to rephrase.)

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode288" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:288:
mFullUrl = Uri.encode(mWebContents.getVisibleUrl(), URI_RESERVED_CHARACTERS);
Would it make sense to break this line out into a separate testable function?

You could write a couple of tests that try URLs with characters from all the
different sets (reserved, unreserved, space, control, non-ASCII and the above
special illegal characters), to not only show that it behaves correctly, but
also demonstrate the purpose of this encoding.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          Patchset #3 (id:40001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-24 05:16:02 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >Patchset #3 (id:40001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          Updated to only perform the encode if the URL fragment contains whitespace. https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java File chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-24 05:33:47 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            >Updated to only perform the encode if the URL fragment contains whitespace.

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode168" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:168:
// The set of characters which have syntactic meaning in a URL.
On 2015/03/19 03:12:57, Matt Giuca (OOO til Mar 23) wrote:
&gt; // This is the &quot;reserved&quot; character set from RFC 3986, plus the &#39;%&#39; character.

Done.

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode288" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:288:
mFullUrl = Uri.encode(mWebContents.getVisibleUrl(), URI_RESERVED_CHARACTERS);
On 2015/03/19 03:12:57, Matt Giuca wrote:
&gt; Would it make sense to break this line out into a separate testable function?
&gt; 
&gt; You could write a couple of tests that try URLs with characters from all the
&gt; different sets (reserved, unreserved, space, control, non-ASCII and the above
&gt; special illegal characters), to not only show that it behaves correctly, but
&gt; also demonstrate the purpose of this encoding.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Matt Giuca</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java File chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java (right): https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode168 chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:168: // The set of characters which have syntactic meaning ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-24 06:28:37 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            ><a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode168" rel="nofollow">https://codereview.chromium.org/1011383005/diff/1/chrome/android/java/src/org...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:168:
// The set of characters which have syntactic meaning in a URL.
nit: I meant to append my extra comment, not replace (your comment was also
helpful). Feel free to put back, or just leave as-is.

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode312" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:312:
* Percent-encodes a URL fragment if it contains suspicious unicode whitespace
characters.
nit: Unicode is a proper noun (always capitalize when using in a sentence).

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode316" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:316:
public static String encodeSuspiciousFragment(String urlStr) {
What do you mean by &quot;fragment&quot; here? Do you mean simply &quot;a piece of a URL&quot;, or
the specific meaning of &quot;fragment&quot; which is the part after the &#39;#&#39;?

If it&#39;s the former, you should pick a different word for it. If it&#39;s the latter,
I don&#39;t see that reflected in the code (there is nothing here which goes after
the fragment only), in which case this should just be renamed to
encodeSuspiciousUrl.

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode317" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:317:
if (isSuspiciousUrl(urlStr)) {
I&#39;m not too keen on this behaviour, as you will be encoding non-suspicious
characters conditionally on the presence of other suspicious characters.

Using your test example:
&quot;Düsseldorf&quot; becomes &quot;Düsseldorf&quot;, but
&quot;Düsseldorf, Germany&quot; becomes &quot;D%C3%BCsseldorf,%20Germany&quot;.

If you don&#39;t have a reason to encode the &#39;ü&#39; in the former example, you should
not encode the &#39;ü&#39; in the latter either.

(At the very least, you should include both the &quot;Düsseldorf&quot; and &quot;Düsseldorf,
Germany&quot; examples in the tests, so it&#39;s clear what the behaviour is.)

If your new plan is essentially to only consider spaces to be a problem, then I
think you should just encode the space characters. That makes it hard to use
Uri.encode (since it requires a whitelist, not a blacklist), but since you are
prepared to manually iterate over the string, you could just call Uri.encode on
just the characters you identify as spaces, and then put them back together.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java File chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java (right): https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode312 chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:312: * Percent-encodes a URL fragment if it contains suspicious ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-25 01:55:24 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            ><a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode312" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:312:
* Percent-encodes a URL fragment if it contains suspicious unicode whitespace
characters.
On 2015/03/24 06:28:37, Matt Giuca wrote:
&gt; nit: Unicode is a proper noun (always capitalize when using in a sentence).

Done.

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode316" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:316:
public static String encodeSuspiciousFragment(String urlStr) {
On 2015/03/24 06:28:37, Matt Giuca wrote:
&gt; What do you mean by &quot;fragment&quot; here? Do you mean simply &quot;a piece of a URL&quot;, or
&gt; the specific meaning of &quot;fragment&quot; which is the part after the &#39;#&#39;?
&gt; 
&gt; If it&#39;s the former, you should pick a different word for it. If it&#39;s the
latter,
&gt; I don&#39;t see that reflected in the code (there is nothing here which goes after
&gt; the fragment only), in which case this should just be renamed to
&gt; encodeSuspiciousUrl.

The intention was that even though we&#39;re working on the entire URL, only the
fragment will ever be modified. Fixed, anyway.

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode317" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:317:
if (isSuspiciousUrl(urlStr)) {
On 2015/03/24 06:28:37, Matt Giuca wrote:
&gt; I&#39;m not too keen on this behaviour, as you will be encoding non-suspicious
&gt; characters conditionally on the presence of other suspicious characters.
&gt; 
&gt; Using your test example:
&gt; &quot;Düsseldorf&quot; becomes &quot;Düsseldorf&quot;, but
&gt; &quot;Düsseldorf, Germany&quot; becomes &quot;D%C3%BCsseldorf,%20Germany&quot;.
&gt; 
&gt; If you don&#39;t have a reason to encode the &#39;ü&#39; in the former example, you should
&gt; not encode the &#39;ü&#39; in the latter either.
&gt; 
&gt; (At the very least, you should include both the &quot;Düsseldorf&quot; and &quot;Düsseldorf,
&gt; Germany&quot; examples in the tests, so it&#39;s clear what the behaviour is.)
&gt; 
&gt; If your new plan is essentially to only consider spaces to be a problem, then
I
&gt; think you should just encode the space characters. That makes it hard to use
&gt; Uri.encode (since it requires a whitelist, not a blacklist), but since you are
&gt; prepared to manually iterate over the string, you could just call Uri.encode
on
&gt; just the characters you identify as spaces, and then put them back together.

Makes sense, Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Matt Giuca</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          lgtm with nits. https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java File chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java (right): https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode316 chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:316: public static String encodeSuspiciousFragment(String urlStr) { ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-25 03:23:24 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            >lgtm with nits.

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode316" rel="nofollow">https://codereview.chromium.org/1011383005/diff/60001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:316:
public static String encodeSuspiciousFragment(String urlStr) {
You should remove the last sentence of the documentation (which says it only
affects the fragment).

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode315" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:315:
char fragmentChar = urlStr.charAt(i);
nit: Rename fragmentChar to something else (maybe just &#39;c&#39;), since this is not
just the fragment.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Ted C</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          lgtm w/ nits. The test case would be good to see if it can be ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-25 19:55:38 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            >lgtm w/ nits.

The test case would be good to see if it can be switched out, but won&#39;t block on
it.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode312" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:312:
public static String encodeSuspiciousUrl(String urlStr) {
This name to me implies that the URL is suspicious.

Maybe just prepareUrlForDisplay or something.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode319" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:319:
|| fragmentChar == UNICODE_NBSP)
braces are required in java unless the statement and conditional can all fit on
a single line.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
File
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode13" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:13:
public class WebsiteSettingsPopupTest extends InstrumentationTestCase {
can this extend directly from TestCase instead of InstrumentationTestCase.

Would be good if this can stay as a simple junit test for now.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode32" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:32:
WebsiteSettingsPopup.encodeSuspiciousUrl(&quot;http://example.com/?q=a#Düsseldorf,
Germany&quot;),
&gt;100 chars</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          &gt; The test case would be good to see if it can be switched out, ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-25 23:44:47 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-10"
            >&gt; The test case would be good to see if it can be switched out, but won&#39;t block
on
&gt; it.

Can you clarify what you mean by that? Something other than rewriting it as
junit?

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
File
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode312" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:312:
public static String encodeSuspiciousUrl(String urlStr) {
On 2015/03/25 19:55:38, Ted C wrote:
&gt; This name to me implies that the URL is suspicious.
&gt; 
&gt; Maybe just prepareUrlForDisplay or something.

Done.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode315" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:315:
char fragmentChar = urlStr.charAt(i);
On 2015/03/25 03:23:24, Matt Giuca wrote:
&gt; nit: Rename fragmentChar to something else (maybe just &#39;c&#39;), since this is not
&gt; just the fragment.

Done.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode319" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:319:
|| fragmentChar == UNICODE_NBSP)
On 2015/03/25 19:55:38, Ted C wrote:
&gt; braces are required in java unless the statement and conditional can all fit
on
&gt; a single line.

Done.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
File
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode13" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:13:
public class WebsiteSettingsPopupTest extends InstrumentationTestCase {
On 2015/03/25 19:55:38, Ted C wrote:
&gt; can this extend directly from TestCase instead of InstrumentationTestCase.
&gt; 
&gt; Would be good if this can stay as a simple junit test for now.

Done.

<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode32" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:32:
WebsiteSettingsPopup.encodeSuspiciousUrl(&quot;http://example.com/?q=a#Düsseldorf,
Germany&quot;),
On 2015/03/25 19:55:38, Ted C wrote:
&gt; &gt;100 chars

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Matt Giuca</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java File chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java (right): https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode35 chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:35: &quot;http://example.com/?q=a#Düsseldorf,%20Germany&quot;); Please add a test with an astral character ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:02:09 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-11"
            ><a href="https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javates...</a>
File
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode35" rel="nofollow">https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javates...</a>
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:35:
&quot;http://example.com/?q=a#Düsseldorf,%20Germany&quot;);
Please add a test with an astral character (e.g., &#39;𝒜&#39;) so we can be sure your
iteration over the string correctly preserves them.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Ted C</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          On 2015/03/25 23:44:47, tsergeant wrote: &gt; &gt; The test case would be good to see ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:07:36 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-12"
            >On 2015/03/25 23:44:47, tsergeant wrote:
&gt; &gt; The test case would be good to see if it can be switched out, but won&#39;t
block
&gt; on
&gt; &gt; it.

Nope...that is it.

&gt; 
&gt; Can you clarify what you mean by that? Something other than rewriting it as
&gt; junit?
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
&gt; File
&gt; chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java
&gt; (right):
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode312" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
&gt;
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:312:
&gt; public static String encodeSuspiciousUrl(String urlStr) {
&gt; On 2015/03/25 19:55:38, Ted C wrote:
&gt; &gt; This name to me implies that the URL is suspicious.
&gt; &gt; 
&gt; &gt; Maybe just prepareUrlForDisplay or something.
&gt; 
&gt; Done.
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode315" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
&gt;
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:315:
&gt; char fragmentChar = urlStr.charAt(i);
&gt; On 2015/03/25 03:23:24, Matt Giuca wrote:
&gt; &gt; nit: Rename fragmentChar to something else (maybe just &#39;c&#39;), since this is
not
&gt; &gt; just the fragment.
&gt; 
&gt; Done.
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java#newcode319" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/java/src...</a>
&gt;
chrome/android/java/src/org/chromium/chrome/browser/WebsiteSettingsPopup.java:319:
&gt; || fragmentChar == UNICODE_NBSP)
&gt; On 2015/03/25 19:55:38, Ted C wrote:
&gt; &gt; braces are required in java unless the statement and conditional can all fit
&gt; on
&gt; &gt; a single line.
&gt; 
&gt; Done.
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
&gt; File
&gt;
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java
&gt; (right):
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode13" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
&gt;
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:13:
&gt; public class WebsiteSettingsPopupTest extends InstrumentationTestCase {
&gt; On 2015/03/25 19:55:38, Ted C wrote:
&gt; &gt; can this extend directly from TestCase instead of InstrumentationTestCase.
&gt; &gt; 
&gt; &gt; Would be good if this can stay as a simple junit test for now.
&gt; 
&gt; Done.
&gt; 
&gt;
<a href="https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode32" rel="nofollow">https://codereview.chromium.org/1011383005/diff/80001/chrome/android/javatest...</a>
&gt;
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:32:
&gt; WebsiteSettingsPopup.encodeSuspiciousUrl(&quot;http://example.com/?q=a#Düsseldorf,
&gt; Germany&quot;),
&gt; On 2015/03/25 19:55:38, Ted C wrote:
&gt; &gt; &gt;100 chars
&gt; 
&gt; Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          Patchset #6 (id:120001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:27:22 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-13"
            >Patchset #6 (id:120001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java File chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java (right): https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode35 chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:35: &quot;http://example.com/?q=a#Düsseldorf,%20Germany&quot;); On 2015/03/26 00:02:08, Matt Giuca wrote: &gt; Please ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:29:12 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-14"
            ><a href="https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java" rel="nofollow">https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javates...</a>
File
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java
(right):

<a href="https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java#newcode35" rel="nofollow">https://codereview.chromium.org/1011383005/diff/100001/chrome/android/javates...</a>
chrome/android/javatests/src/org/chromium/chrome/browser/WebsiteSettingsPopupTest.java:35:
&quot;http://example.com/?q=a#Düsseldorf,%20Germany&quot;);
On 2015/03/26 00:02:08, Matt Giuca wrote:
&gt; Please add a test with an astral character (e.g., &#39;𝒜&#39;) so we can be sure your
&gt; iteration over the string correctly preserves them.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          The CQ bit was checked by tsergeant@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:51:59 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-15"
            >The CQ bit was checked by <a href="mailto:tsergeant@chromium.org">tsergeant@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>tsergeant</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          The patchset sent to the CQ was uploaded after l-g-t-m from tedchoc@chromium.org, mgiuca@chromium.org Link to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:52:00 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-16"
            >The patchset sent to the CQ was uploaded after l-g-t-m from
<a href="mailto:tedchoc@chromium.org">tedchoc@chromium.org</a>, <a href="mailto:mgiuca@chromium.org">mgiuca@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/1011383005/#ps30003" rel="nofollow">https://codereview.chromium.org/1011383005/#ps30003</a>
(title: &quot;Change unicode representation&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-17">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1011383005/30003
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 00:52:39 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-17"
            >CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1011383005/30003" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1011383005/30003</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg19"
           name="18">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(18)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-18">
                          Committed patchset #7 (id:30003)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 01:57:04 UTC)
                <a href="#msg19">#19</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-18"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-18"
            >Committed patchset #7 (id:30003)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg20"
           name="19">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(19)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-19">
                          Patchset 7 (id:??) landed as https://crrev.com/b1130cfc5dca2d5f01edafd7d50f795f391ab904 Cr-Commit-Position: refs/heads/master@{#322296}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-26 01:57:48 UTC)
                <a href="#msg20">#20</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-19"
             >
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-19"
            >Patchset 7 (id:??) landed as
<a href="https://crrev.com/b1130cfc5dca2d5f01edafd7d50f795f391ab904" rel="nofollow">https://crrev.com/b1130cfc5dca2d5f01edafd7d50f795f391ab904</a>
Cr-Commit-Position: refs/heads/master@{#322296}</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 20)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 20)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(20)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(20)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 20;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 1011383005;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 1011383005: Percent-encode illegal characters in Android page info popup URL
     (Closed) </b><br/>
      Created 5 years, 9 months ago by tsergeant<br/>
      Modified 5 years, 9 months ago<br/>
      Reviewers: Ted C, Matt Giuca<br/>
      Base URL: https://chromium.googlesource.com/chromium/src.git@master<br/>
      Comments: 25
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
