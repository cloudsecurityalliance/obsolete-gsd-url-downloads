<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#726578 - pwgen: Multiple vulnerabilities in passwords generation - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=726578&quot;&gt;726578&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:726578@bugs.debian.org">#726578</a><br>
pwgen: Multiple vulnerabilities in passwords generation</h1>
<div class="versiongraph"></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=pwgen">pwgen</a>;
Maintainer for <a href="pkgreport.cgi?package=pwgen">pwgen</a> is <a href="pkgreport.cgi?maint=tytso%40mit.edu">Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</a>; Source for <a href="pkgreport.cgi?package=pwgen">pwgen</a> is <a href="pkgreport.cgi?src=pwgen">src:pwgen</a> (<a href="https://tracker.debian.org/pkg/pwgen">PTS</a>, <a href="https://buildd.debian.org/pwgen">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=pwgen">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=corsac%40debian.org">Yves-Alexis Perez &lt;corsac@debian.org&gt;</a></p>
  <p>Date: Wed, 16 Oct 2013 20:06:02 UTC</p>

<p>Severity: important</p>
<p>Tags: security</p>




</div>

<p><a href="mailto:726578@bugs.debian.org">Reply</a> or <a href="mailto:726578-subscribe@bugs.debian.org">subscribe</a> to this bug.</p>
<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=726578;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1381953966 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Wed, 16 Oct 2013 20:06:06 GMT) (<a href="bugreport.cgi?bug=726578;msg=2">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Yves-Alexis Perez &lt;corsac@debian.org&gt; -->
<!-- time:1381953966 -->
<strong>Acknowledgement sent</strong>
to <code>Yves-Alexis Perez &lt;corsac@debian.org&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Wed, 16 Oct 2013 20:06:06 GMT) (<a href="bugreport.cgi?bug=726578;msg=4">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=5">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=5">mbox</a>, <a href="mailto:726578@bugs.debian.org?In-Reply-To=%3C20131016200335.13060.22893.reportbug%40scapa%3E&amp;References=%3C20131016200335.13060.22893.reportbug%40scapa%3E&amp;subject=Re%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%20generation&amp;body=On%20Wed%2C%2016%20Oct%202013%2022%3A03%3A35%20%2B0200%20Yves-Alexis%20Perez%20%3Ccorsac%40debian.org%3E%20wrote%3A%0A%3E%20Package%3A%20pwgen%0A%3E%20Severity%3A%20grave%0A%3E%20Tags%3A%20security%0A%3E%20Justification%3A%20user%20security%20hole%0A%3E%20%0A%3E%20Hi%20Theodore%2C%0A%3E%20%0A%3E%20multiple%20CVEs%20were%20just%20assigned%20to%20pwgen%2C%20following%20the%20analysis%20by%0A%3E%20Solar%20Designer%20and%20other%20people%20%28see%20thread%20at%0A%3E%20http%3A%2F%2Fmarc.info%2F%3Fl%3Doss-security%26m%3D138015793928431%26w%3D2%29%0A%3E%20%0A%3E%20CVE-2013-4440%20non-tty%20passwords%20are%20trivially%20weak%20by%20default%0A%3E%20CVE-2013-4441%20Phonemes%20mode%20has%20heavy%20bias%20and%20is%20enabled%20by%20default%0A%3E%20CVE-2013-4442%20Silent%20fallback%20to%20insecure%20entropy%0A%3E%20CVE-2013-4443%20Secure%20mode%20has%20bias%20towards%20numbers%20and%20uppercase%20letters%0A%3E%20%0A%3E%20I%27m%20not%20too%20sure%20how%20to%20handle%20that%2C%20especially%20for%20stable%20releases%2C%0A%3E%20since%20it%20seems%20major%20refactoring%20might%20be%20needed%20to%20get%20rid%20of%20the%0A%3E%20weaknesses%20and%20bias.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20--%20%0A%3E%20Yves-Alexis%20Perez%0A%3E%20Debian%20Security%0A%3E%20%0A%3E%20--%20System%20Information%3A%0A%3E%20Debian%20Release%3A%20jessie%2Fsid%0A%3E%20%20%20APT%20prefers%20unstable%0A%3E%20%20%20APT%20policy%3A%20%28500%2C%20%27unstable%27%29%2C%20%28500%2C%20%27testing%27%29%2C%20%28500%2C%20%27stable%27%29%2C%20%28450%2C%20%27experimental%27%29%0A%3E%20Architecture%3A%20amd64%20%28x86_64%29%0A%3E%20%0A%3E%20Kernel%3A%20Linux%203.10-3-amd64%20%28SMP%20w%2F4%20CPU%20cores%29%0A%3E%20Locale%3A%20LANG%3Den_US.utf8%2C%20LC_CTYPE%3Den_US.utf8%20%28charmap%3DUTF-8%29%0A%3E%20Shell%3A%20%2Fbin%2Fsh%20linked%20to%20%2Fbin%2Fdash%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=corsac%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Yves-Alexis Perez &lt;corsac@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> pwgen: Multiple vulnerabilities in passwords generation</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 16 Oct 2013 22:03:35 +0200</div>
</div>
<pre class="message">Package: pwgen
Severity: grave
Tags: security
Justification: user security hole

Hi Theodore,

multiple CVEs were just assigned to pwgen, following the analysis by
Solar Designer and other people (see thread at
<a href="http://marc.info/?l=oss-security&amp;m=138015793928431&amp;w=2">http://marc.info/?l=oss-security&amp;m=138015793928431&amp;w=2</a>)

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4440">CVE-2013-4440</a> non-tty passwords are trivially weak by default
<a href="https://security-tracker.debian.org/tracker/CVE-2013-4441">CVE-2013-4441</a> Phonemes mode has heavy bias and is enabled by default
<a href="https://security-tracker.debian.org/tracker/CVE-2013-4442">CVE-2013-4442</a> Silent fallback to insecure entropy
<a href="https://security-tracker.debian.org/tracker/CVE-2013-4443">CVE-2013-4443</a> Secure mode has bias towards numbers and uppercase letters

I&#39;m not too sure how to handle that, especially for stable releases,
since it seems major refactoring might be needed to get rid of the
weaknesses and bias.

Regards,
-- 
Yves-Alexis Perez
Debian Security

-- System Information:
Debian Release: jessie/sid
  APT prefers unstable
  APT policy: (500, &#39;unstable&#39;), (500, &#39;testing&#39;), (500, &#39;stable&#39;), (450, &#39;experimental&#39;)
Architecture: amd64 (x86_64)

Kernel: Linux 3.10-3-amd64 (SMP w/4 CPU cores)
Locale: LANG=en_US.utf8, LC_CTYPE=en_US.utf8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash


</pre>

<div class="infmessage"><hr><p>
<a name="6"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1381998424 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Thu, 17 Oct 2013 08:27:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=7">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: Raphael Geissert &lt;geissert@debian.org&gt; -->
<!-- time:1381998424 -->
<strong>Acknowledgement sent</strong>
to <code>Raphael Geissert &lt;geissert@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Thu, 17 Oct 2013 08:27:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=9">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=10">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=10">mbox</a>, <a href="mailto:726578@bugs.debian.org?subject=Re%3A%20Bug%23726578%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%20generation&amp;body=On%20Thu%2C%2017%20Oct%202013%2010%3A21%3A53%20%2B0200%20Raphael%20Geissert%20%3Cgeissert%40debian.org%3E%20wrote%3A%0A%3E%20Hi%2C%0A%3E%20%0A%3E%20On%2016%20October%202013%2022%3A03%2C%20Yves-Alexis%20Perez%20%3Ccorsac%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20I%27m%20not%20too%20sure%20how%20to%20handle%20that%2C%20especially%20for%20stable%20releases%2C%0A%3E%20%3E%20since%20it%20seems%20major%20refactoring%20might%20be%20needed%20to%20get%20rid%20of%20the%0A%3E%20%3E%20weaknesses%20and%20bias.%0A%3E%20%0A%3E%20I%20think%20it%27s%20best%20to%20write%20a%20script%20that%20uses%20makepasswd%20and%20is%0A%3E%20command-line%20and%20output-compatible%20with%20pwgen.%0A%3E%20Basically%20changing%20everything%20under%20the%20hood%20without%20letting%20others%20know.%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20--%20%0A%3E%20Raphael%20Geissert%20-%20Debian%20Developer%0A%3E%20www.debian.org%20-%20get.debian.net%0A%3E%20%0A%3E%20%0A&amp;References=%3C20131016200335.13060.22893.reportbug%40scapa%3E%0A%20%3CCAA7hUgFXe7vcT9XNB3jk%2BgVfkVuiyK4HN0nVR%2BDNykWmmHRzpg%40mail.gmail.com%3E&amp;In-Reply-To=%3CCAA7hUgFXe7vcT9XNB3jk%2BgVfkVuiyK4HN0nVR%2BDNykWmmHRzpg%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=geissert%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Raphael Geissert &lt;geissert@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Yves-Alexis Perez &lt;corsac@debian.org&gt;, 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#726578: pwgen: Multiple vulnerabilities in passwords generation</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 17 Oct 2013 10:21:53 +0200</div>
</div>
<pre class="message">Hi,

On 16 October 2013 22:03, Yves-Alexis Perez &lt;corsac@debian.org&gt; wrote:
&gt; I&#39;m not too sure how to handle that, especially for stable releases,
&gt; since it seems major refactoring might be needed to get rid of the
&gt; weaknesses and bias.

I think it&#39;s best to write a script that uses makepasswd and is
command-line and output-compatible with pwgen.
Basically changing everything under the hood without letting others know.

Cheers,
-- 
Raphael Geissert - Debian Developer
www.debian.org - get.debian.net


</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1382005084 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Thu, 17 Oct 2013 10:18:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=12">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: Steven Chamberlain &lt;steven@pyro.eu.org&gt; -->
<!-- time:1382005084 -->
<strong>Acknowledgement sent</strong>
to <code>Steven Chamberlain &lt;steven@pyro.eu.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Thu, 17 Oct 2013 10:18:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=14">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=15">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=15">mbox</a>, <a href="mailto:726578@bugs.debian.org?In-Reply-To=%3C525FB87F.1030801%40pyro.eu.org%3E&amp;subject=Re%3A%20Bug%23726578%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%20generation&amp;body=On%20Thu%2C%2017%20Oct%202013%2011%3A14%3A23%20%2B0100%20Steven%20Chamberlain%20%3Csteven%40pyro.eu.org%3E%20wrote%3A%0A%3E%20Hi%2C%0A%3E%20%0A%3E%20I%20don%27t%20see%20that%20any%20major%20refactoring%20is%20needed%2C%20but%20rather%20the%20default%0A%3E%20assumed%20flags%20are%20unsafe%2C%20although%20changing%20them%20might%20be%20incompatible%0A%3E%20with%20some%20scripts%2Fapplications%20using%20pwgen.%0A%3E%20%0A%3E%20CVE-2013-4440%20non-tty%20passwords%20are%20trivially%20weak%20by%20default%0A%3E%20%0A%3E%20should%20ideally%20stop%20using%20-0A%20by%20default%20in%20non-tty%20mode%2C%20but%20could%0A%3E%20maybe%20warn%2Ffail%20if%20the%20caller%20doesn%27t%20override%20with%20-nc%2C%20which%20has%20been%0A%3E%20recommended%20in%20the%20man%20page%20until%20now.%0A%3E%20%0A%3E%20CVE-2013-4441%20Phonemes%20mode%20has%20heavy%20bias%20and%20is%20enabled%20by%20default%0A%3E%20%0A%3E%20assume%20-s%20by%20default%3F%20%20I%20think%20it%20uses%20the%20same%20character%20set%20but%20with%0A%3E%20more%20entropy%2C%20so%20only%20a%20human%20user%20should%20notice%20any%20difference%20at%20all.%0A%3E%20%20As%20long%20as%20the%20-s%20flag%20is%20set%20%2Abefore%2A%20parsing%20command%20line%20flags%2C%20it%0A%3E%20does%20not%20conflict%20with%20-0%20-A%20-B%20or%20-v.%0A%3E%20%0A%3E%20CVE-2013-4442%20Silent%20fallback%20to%20insecure%20entropy%0A%3E%20%0A%3E%20consider%20using%20%2Fdev%2Frandom%20instead%20of%20%2Fdev%2Furandom%3F%20%28Debian%20bug%20%23672241%29%0A%3E%20and%20in%20any%20case%20fail%20if%20it%20cannot%20be%20read%0A%3E%20%0A%3E%20CVE-2013-4443%20Secure%20mode%20has%20bias%20towards%20numbers%20and%20uppercase%20letters%0A%3E%20%0A%3E%20probably%20the%20least%20serious%20issue%3B%20%20-n%20guarantees%20at%20least%20one%20numeral%2C%0A%3E%20-c%20guarantees%20at%20least%20one%20capital%2C%20instead%20of%20being%20a%20completely%20random%0A%3E%20selection.%20%20Sometimes%20necessary%20if%20the%20password%20consumer%20enforces%20such%20a%0A%3E%20rule.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20--%20%0A%3E%20Steven%20Chamberlain%0A%3E%20steven%40pyro.eu.org%0A%3E%20%0A%3E%20%0A&amp;References=%3C525FB87F.1030801%40pyro.eu.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=steven%40pyro.eu.org" alt="">
<div class="header"><span class="headerfield">From:</span> Steven Chamberlain &lt;steven@pyro.eu.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#726578: pwgen: Multiple vulnerabilities in passwords generation</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 17 Oct 2013 11:14:23 +0100</div>
</div>
<pre class="message">Hi,

I don&#39;t see that any major refactoring is needed, but rather the default
assumed flags are unsafe, although changing them might be incompatible
with some scripts/applications using pwgen.

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4440">CVE-2013-4440</a> non-tty passwords are trivially weak by default

should ideally stop using -0A by default in non-tty mode, but could
maybe warn/fail if the caller doesn&#39;t override with -nc, which has been
recommended in the man page until now.

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4441">CVE-2013-4441</a> Phonemes mode has heavy bias and is enabled by default

assume -s by default?  I think it uses the same character set but with
more entropy, so only a human user should notice any difference at all.
 As long as the -s flag is set *before* parsing command line flags, it
does not conflict with -0 -A -B or -v.

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4442">CVE-2013-4442</a> Silent fallback to insecure entropy

consider using /dev/random instead of /dev/urandom? (Debian bug #672241)
and in any case fail if it cannot be read

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4443">CVE-2013-4443</a> Secure mode has bias towards numbers and uppercase letters

probably the least serious issue;  -n guarantees at least one numeral,
-c guarantees at least one capital, instead of being a completely random
selection.  Sometimes necessary if the password consumer enforces such a
rule.

Regards,
-- 
Steven Chamberlain
steven@pyro.eu.org


</pre>

<div class="infmessage"><hr><p>
<a name="16"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1382502429 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Wed, 23 Oct 2013 04:27:09 GMT) (<a href="bugreport.cgi?bug=726578;msg=17">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1382502429 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Wed, 23 Oct 2013 04:27:09 GMT) (<a href="bugreport.cgi?bug=726578;msg=19">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="20"></a><a name="msg20"></a><a href="#20">Message #20</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=20">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=20">mbox</a>, <a href="mailto:726578@bugs.debian.org?In-Reply-To=%3C20131023042255.GA22975%40lorien.valinor.li%3E&amp;References=%3C525FB87F.1030801%40pyro.eu.org%3E%0A%20%3C20131023042255.GA22975%40lorien.valinor.li%3E&amp;subject=Re%3A%20Bug%23726578%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%0A%20generation&amp;body=On%20Wed%2C%2023%20Oct%202013%2006%3A22%3A55%20%2B0200%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%0A%3E%20%0A%3E%20Small%20updates%20on%20the%20assigned%20CVE%27s%3A%0A%3E%20%0A%3E%20On%20Thu%2C%20Oct%2017%2C%202013%20at%2011%3A14%3A23AM%20%2B0100%2C%20Steven%20Chamberlain%20wrote%3A%0A%3E%20%3E%20CVE-2013-4443%20Secure%20mode%20has%20bias%20towards%20numbers%20and%20uppercase%20letters%0A%3E%20%3E%20%0A%3E%20%3E%20probably%20the%20least%20serious%20issue%3B%20%20-n%20guarantees%20at%20least%20one%20numeral%2C%0A%3E%20%3E%20-c%20guarantees%20at%20least%20one%20capital%2C%20instead%20of%20being%20a%20completely%20random%0A%3E%20%3E%20selection.%20%20Sometimes%20necessary%20if%20the%20password%20consumer%20enforces%20such%20a%0A%3E%20%3E%20rule.%0A%3E%20%0A%3E%20This%20indeed%20was%20rejected%2C%20see%20%5B1%5D%20and%20%5B2%5D.%0A%3E%20%0A%3E%20%20%5B1%5D%20http%3A%2F%2Fmarc.info%2F%3Fl%3Doss-security%26m%3D138247862202393%26w%3D2%0A%3E%20%20%5B2%5D%20http%3A%2F%2Fmarc.info%2F%3Fl%3Doss-security%26m%3D138249250706253%26w%3D2%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Salvatore%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#726578: pwgen: Multiple vulnerabilities in passwords
 generation</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 23 Oct 2013 06:22:55 +0200</div>
</div>
<pre class="message">Hi

Small updates on the assigned CVE&#39;s:

On Thu, Oct 17, 2013 at 11:14:23AM +0100, Steven Chamberlain wrote:
&gt; <a href="https://security-tracker.debian.org/tracker/CVE-2013-4443">CVE-2013-4443</a> Secure mode has bias towards numbers and uppercase letters
&gt; 
&gt; probably the least serious issue;  -n guarantees at least one numeral,
&gt; -c guarantees at least one capital, instead of being a completely random
&gt; selection.  Sometimes necessary if the password consumer enforces such a
&gt; rule.

This indeed was rejected, see [1] and [2].

 [1] <a href="http://marc.info/?l=oss-security&amp;m=138247862202393&amp;w=2">http://marc.info/?l=oss-security&amp;m=138247862202393&amp;w=2</a>
 [2] <a href="http://marc.info/?l=oss-security&amp;m=138249250706253&amp;w=2">http://marc.info/?l=oss-security&amp;m=138249250706253&amp;w=2</a>

Regards,
Salvatore


</pre>

<div class="infmessage"><hr><p>
<a name="21"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1389559877 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Sun, 12 Jan 2014 20:51:17 GMT) (<a href="bugreport.cgi?bug=726578;msg=22">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=22">mbox</a>, <a href="#21">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="23"></a>
<!-- request_addr: Arne Wichmann &lt;aw@anhrefn.saar.de&gt; -->
<!-- time:1389559877 -->
<strong>Acknowledgement sent</strong>
to <code>Arne Wichmann &lt;aw@anhrefn.saar.de&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Sun, 12 Jan 2014 20:51:17 GMT) (<a href="bugreport.cgi?bug=726578;msg=24">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="25"></a><a name="msg25"></a><a href="#25">Message #25</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=25">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=25">mbox</a>, <a href="mailto:726578@bugs.debian.org?body=On%20Sun%2C%2012%20Jan%202014%2021%3A27%3A14%20%2B0100%20Arne%20Wichmann%20%3Caw%40anhrefn.saar.de%3E%20wrote%3A%0A%3E%20Hi%21%0A%3E%20%0A%3E%20This%20grave%20problem%20is%20now%20open%20for%20more%20than%20two%20months.%20Is%20there%20any%20plan%0A%3E%20to%20resolve%20this%3F%0A%3E%20%0A%3E%20cu%0A%3E%20%0A%3E%20AW%0A%3E%20--%20%0A%3E%20%5B...%5D%20If%20you%20don%27t%20want%20to%20be%20restricted%2C%20don%27t%20agree%20to%20it.%20If%20you%20are%0A%3E%20coerced%2C%20comply%20as%20much%20as%20you%20must%20to%20protect%20yourself%2C%20just%20don%27t%20support%0A%3E%20it.%20Noone%20can%20free%20you%20but%20yourself.%20%28crag%2C%20on%20Debian%20Planet%29%0A%3E%20Arne%20Wichmann%20%28aw%40linux.de%29%0A&amp;subject=Re%3A%20Ping%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%20generation&amp;References=%3C20140112202714.GF7807%40anhrefn.saar.de%3E&amp;In-Reply-To=%3C20140112202714.GF7807%40anhrefn.saar.de%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=aw%40anhrefn.saar.de" alt="">
<div class="header"><span class="headerfield">From:</span> Arne Wichmann &lt;aw@anhrefn.saar.de&gt;</div>
<div class="header"><span class="headerfield">To:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Ping: pwgen: Multiple vulnerabilities in passwords generation</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 12 Jan 2014 21:27:14 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=726578;msg=25">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi!

This grave problem is now open for more than two months. Is there any plan
to resolve this?

cu

AW
-- 
[...] If you don&#39;t want to be restricted, don&#39;t agree to it. If you are
coerced, comply as much as you must to protect yourself, just don&#39;t support
it. Noone can free you but yourself. (crag, on Debian Planet)
Arne Wichmann (aw@linux.de)
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=726578;filename=signature.asc;msg=25">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="26"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1389570490 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Sun, 12 Jan 2014 23:48:10 GMT) (<a href="bugreport.cgi?bug=726578;msg=27">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=27">mbox</a>, <a href="#26">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="28"></a>
<!-- request_addr: Theodore Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1389570490 -->
<strong>Acknowledgement sent</strong>
to <code>Theodore Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Sun, 12 Jan 2014 23:48:10 GMT) (<a href="bugreport.cgi?bug=726578;msg=29">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=29">mbox</a>, <a href="#28">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="30"></a><a name="msg30"></a><a href="#30">Message #30</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=30">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=30">mbox</a>, <a href="mailto:726578@bugs.debian.org?body=On%20Sun%2C%2012%20Jan%202014%2018%3A45%3A00%20-0500%20Theodore%20Ts%27o%20%3Ctytso%40mit.edu%3E%20wrote%3A%0A%3E%20On%20Sun%2C%20Jan%2012%2C%202014%20at%2009%3A27%3A14PM%20%2B0100%2C%20Arne%20Wichmann%20wrote%3A%0A%3E%20%3E%20%0A%3E%20%3E%20This%20grave%20problem%20is%20now%20open%20for%20more%20than%20two%20months.%20Is%20there%20any%20plan%0A%3E%20%3E%20to%20resolve%20this%3F%0A%3E%20%0A%3E%20First%2C%20the%20CVE%20about%20having%20the%20unavailability%20of%20%2Fdev%2Frandom%20fail%0A%3E%20hard%20--%20sure%2C%20that%20should%20be%20a%20separate%20bug%20since%20that%27s%20a%20fix%20that%20I%0A%3E%20think%20is%20reasonable%20at%20this%20point.%20%20We%20can%20now%20guarantee%20that%0A%3E%20%2Fdev%2Frandom%20exists%20everywhere.%20%20%28And%20by%20that%20same%20token%2C%20if%20an%0A%3E%20attacker%20can%20cause%20%2Fdev%2Frandom%20not%20to%20be%20present%2C%20they%20probably%20have%0A%3E%20root%2C%20so%20you%27re%20probably%20toast%20anyway.%20%20So%20I%20don%27t%20think%20it%27s%20going%20to%0A%3E%20really%20improve%20things%20to%20remove%20the%20drand%28%29%20fallback%2C%20but%20I%20don%27t%20have%0A%3E%20strong%20feelings%20about%20that.%29%0A%3E%20%0A%3E%20%0A%3E%20Secondly%2C%20I%27ll%20note%20that%20one%20of%20the%20CVE%27s%20were%20rejected%20as%20not%20a%0A%3E%20vulnerability.%20%20%28In%20general%20it%20would%20have%20been%20better%20to%20have%20opened%0A%3E%20seperate%20bugs%20for%20each%20CVE.%29%0A%3E%20%0A%3E%20Finally%2C%20whether%20you%20think%20the%20other%20two%20CVE%27s%20justify%20this%20to%20be%0A%3E%20serious%2C%20let%20alone%20%22grave%22%20bug%20really%20depends%20on%20what%20you%20think%20the%0A%3E%20goals%20of%20pwgen%20are.%20%20To%20quote%20from%20the%20manual%20page%3A%0A%3E%20%0A%3E%20%20%20%20%20The%20%20pwgen%20%20program%20generates%20passwords%20which%20are%20designed%20to%20be%20easily%0A%3E%20%20%20%20%20memorized%20by%20humans%2C%20while%20being%20as%20secure%20%20as%20%20possible.%20%20%20Human-memo%E2%80%90%0A%3E%20%20%20%20%20rable%20%20passwords%20%20are%20%20never%20%20going%20%20to%20be%20as%20secure%20as%20completely%20com%E2%80%90%0A%3E%20%20%20%20%20pletely%20random%20passwords.%20%20In%20particular%2C%20passwords%20generated%20by%20%20pwgen%0A%3E%20%20%20%20%20without%20%20the%20%20-s%20option%20should%20not%20be%20used%20in%20places%20where%20the%20password%0A%3E%20%20%20%20%20could%20be%20attacked%20via%20an%20off-line%20brute-force%20attack.%20%20%20%20On%20%20the%20%20other%0A%3E%20%20%20%20%20hand%2C%20%20completely%20%20randomly%20%20generated%20%20passwords%20have%20a%20tendency%20to%20be%0A%3E%20%20%20%20%20written%20down%2C%20and%20are%20subject%20to%20being%20compromised%20in%20that%20fashion.%0A%3E%20%0A%3E%20So%20we%20could%20change%20the%20defaults%20to%20be%20%22pwgen%20-csy%2020%22%2C%20in%20which%20case%0A%3E%20you%20would%20get%20passwords%20like%20tihs%3A%0A%3E%20%0A%3E%20L%7DU%40lc_~i%5E%3En%7Cro%214uI-%201%60%3ByXlYVMW%25%3FE9%293A%267G%20%2A%2A%7D6BoBu%3D%21~3%29y%3F3v%5DOr%0A%3E%20%3E%3D%3E%3APC%3BH%3FE7%2A%2B6%24c%26-QH%20URGgjUNG%5B%5CdSw%5C%3Ep7F-%5D%20_AXZ~%28HYd8Q%23%25b%3E%21%5D%27u%3A%0A%3E%20~%290%3CI-%7B%29%7D_Ya%2AQ2nlWN%3B%20%5E%23t~1%2F%27sf%40%2Axz9GOhBuv%20e_%5B-_Fe%7BCD%23%5DDY8%26%40M%5Ea%0A%3E%20%0A%3E%20I%27m%20not%20sure%20that%20would%20be%20an%20improvement%2C%20as%20simply%20no%20one%20would%20use%0A%3E%20them.%0A%3E%20%0A%3E%20OK%2C%20how%20about%20this%3F%20%20%28Generated%20using%20pwgen%20-s%29.%0A%3E%20%0A%3E%20vQ6uwkMk%20lSswO2MB%20tA8dYPpl%20KU1pQ2Xh%202XfxRyrC%20Za2xKx7h%20psPwHZ0c%20dOsC0JBX%0A%3E%20JY3udA9c%20t6LzoiUq%20M0jR3AoS%20GOHkNE7G%20TeThsZz1%206cVi4ayY%20Poe4hPj7%20o2a7OpPC%0A%3E%20Xh24cRLO%201chQyseV%206c2k0O3B%20OkdgRxy4%20K6Vc4JY2%20ylO3IE9B%20gVvNxw6B%207wjcOXwF%0A%3E%20%0A%3E%20Again%2C%20this%20will%20make%20the%20professional%20paranoids%20happy%20%28although%0A%3E%20perhaps%20not%20as%20happy%20as%20%22%3E%3D%3E%3APC%3BH%3FE7%2A%2B6%24c%26-QH%22%29%2C%20but%20its%20not%20clear%20that%0A%3E%20real%20users%20would%20be%20any%20less%20likely%20to%20write%20%22ylO3IE9B%22%20on%20a%20sticky%0A%3E%20note%20which%20is%20pasted%20to%20their%20monitor%2C%20or%20just%20in%20a%20%22passwords%22%20file%0A%3E%20in%20their%20home%20directory.%0A%3E%20%0A%3E%20So%20ultimately%2C%20a%20lot%20of%20this%20is%20about%20an%20argument%20over%20defaults%2C%20and%20I%0A%3E%20think%20the%20higher%20level%20problem%20is%20that%20no%20matter%20what%20password%20policy%0A%3E%20you%20use%2C%20passwords%20are%20doomed%20as%20a%20technology.%20%20Anything%20which%20is%0A%3E%20secure%20against%20a%20brute%20force%20attack%20is%20impossible%20for%20a%20user%20to%20use%2C%0A%3E%20unless%20they%20share%20passwords%20across%20multiple%20sites%20so%20they%20only%20have%20to%0A%3E%20remember%20one%20password%20such%20as%20%22ylO3IE9B%22%20---%20at%20which%20point%20they%20get%0A&amp;subject=Re%3A%20Bug%23726578%3A%20Ping%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%0A%20generation&amp;References=%3C20140112202714.GF7807%40anhrefn.saar.de%3E%0A%20%3C20140112234500.GA15640%40thunk.org%3E&amp;In-Reply-To=%3C20140112234500.GA15640%40thunk.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=tytso%40mit.edu" alt="">
<div class="header"><span class="headerfield">From:</span> Theodore Ts&#39;o &lt;tytso@mit.edu&gt;</div>
<div class="header"><span class="headerfield">To:</span> Arne Wichmann &lt;aw@anhrefn.saar.de&gt;, 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#726578: Ping: pwgen: Multiple vulnerabilities in passwords
 generation</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 12 Jan 2014 18:45:00 -0500</div>
</div>
<pre class="message">On Sun, Jan 12, 2014 at 09:27:14PM +0100, Arne Wichmann wrote:
&gt; 
&gt; This grave problem is now open for more than two months. Is there any plan
&gt; to resolve this?

First, the CVE about having the unavailability of /dev/random fail
hard -- sure, that should be a separate bug since that&#39;s a fix that I
think is reasonable at this point.  We can now guarantee that
/dev/random exists everywhere.  (And by that same token, if an
attacker can cause /dev/random not to be present, they probably have
root, so you&#39;re probably toast anyway.  So I don&#39;t think it&#39;s going to
really improve things to remove the drand() fallback, but I don&#39;t have
strong feelings about that.)


Secondly, I&#39;ll note that one of the CVE&#39;s were rejected as not a
vulnerability.  (In general it would have been better to have opened
seperate bugs for each CVE.)

Finally, whether you think the other two CVE&#39;s justify this to be
serious, let alone &quot;grave&quot; bug really depends on what you think the
goals of pwgen are.  To quote from the manual page:

    The  pwgen  program generates passwords which are designed to be easily
    memorized by humans, while being as secure  as  possible.   Human-memo‐
    rable  passwords  are  never  going  to be as secure as completely com‐
    pletely random passwords.  In particular, passwords generated by  pwgen
    without  the  -s option should not be used in places where the password
    could be attacked via an off-line brute-force attack.    On  the  other
    hand,  completely  randomly  generated  passwords have a tendency to be
    written down, and are subject to being compromised in that fashion.

So we could change the defaults to be &quot;pwgen -csy 20&quot;, in which case
you would get passwords like tihs:

L}U@lc_~i^&gt;n|ro!4uI- 1`;yXlYVMW%?E9)3A&amp;7G **}6BoBu=!~3)y?3v]Or
&gt;=&gt;:PC;H?E7*+6$c&amp;-QH URGgjUNG[\dSw\&gt;p7F-] _AXZ~(HYd8Q#%b&gt;!]&#39;u:
~)0&lt;I-{)}_Ya*Q2nlWN; ^#t~1/&#39;sf@*xz9GOhBuv e_[-_Fe{CD#]DY8&amp;@M^a

I&#39;m not sure that would be an improvement, as simply no one would use
them.

OK, how about this?  (Generated using pwgen -s).

vQ6uwkMk lSswO2MB tA8dYPpl KU1pQ2Xh 2XfxRyrC Za2xKx7h psPwHZ0c dOsC0JBX
JY3udA9c t6LzoiUq M0jR3AoS GOHkNE7G TeThsZz1 6cVi4ayY Poe4hPj7 o2a7OpPC
Xh24cRLO 1chQyseV 6c2k0O3B OkdgRxy4 K6Vc4JY2 ylO3IE9B gVvNxw6B 7wjcOXwF

Again, this will make the professional paranoids happy (although
perhaps not as happy as &quot;&gt;=&gt;:PC;H?E7*+6$c&amp;-QH&quot;), but its not clear that
real users would be any less likely to write &quot;ylO3IE9B&quot; on a sticky
note which is pasted to their monitor, or just in a &quot;passwords&quot; file
in their home directory.

So ultimately, a lot of this is about an argument over defaults, and I
think the higher level problem is that no matter what password policy
you use, passwords are doomed as a technology.  Anything which is
secure against a brute force attack is impossible for a user to use,
unless they share passwords across multiple sites so they only have to
remember one password such as &quot;ylO3IE9B&quot; --- at which point they get
toast once some web site screws up in some way and gets penetrated by
bad guys.

					- Ted


</pre>

<div class="infmessage"><hr><p>
<a name="31"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1389697924 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Tue, 14 Jan 2014 11:12:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=32">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=32">mbox</a>, <a href="#31">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="33"></a>
<!-- request_addr: Arne Wichmann &lt;aw@anhrefn.saar.de&gt; -->
<!-- time:1389697924 -->
<strong>Acknowledgement sent</strong>
to <code>Arne Wichmann &lt;aw@anhrefn.saar.de&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Tue, 14 Jan 2014 11:12:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=34">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=34">mbox</a>, <a href="#33">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="35"></a><a name="msg35"></a><a href="#35">Message #35</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=35">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=35">mbox</a>, <a href="mailto:726578@bugs.debian.org?References=%3C20140112202714.GF7807%40anhrefn.saar.de%3E%0A%20%3C20140112234500.GA15640%40thunk.org%3E%0A%20%3C20140114110810.GA7732%40anhrefn.saar.de%3E&amp;body=On%20Tue%2C%2014%20Jan%202014%2012%3A08%3A11%20%2B0100%20Arne%20Wichmann%20%3Caw%40anhrefn.saar.de%3E%20wrote%3A%0A%3E%20Thank%20you%20for%20reacting%20quickly%21%0A%3E%20%0A%3E%20begin%20%20quotation%20%20from%20Theodore%20Ts%27o%20%28in%20%3C20140112234500.GA15640%40thunk.org%3E%29%3A%0A%3E%20%3E%20On%20Sun%2C%20Jan%2012%2C%202014%20at%2009%3A27%3A14PM%20%2B0100%2C%20Arne%20Wichmann%20wrote%3A%0A%3E%20%3E%20%3E%20This%20grave%20problem%20is%20now%20open%20for%20more%20than%20two%20months.%20Is%20there%20any%20plan%0A%3E%20%3E%20%3E%20to%20resolve%20this%3F%0A%3E%20%3E%20%0A%3E%20%3E%20First%2C%20the%20CVE%20about%20having%20the%20unavailability%20of%20%2Fdev%2Frandom%20fail%0A%3E%20%3E%20hard%20--%20sure%2C%20that%20should%20be%20a%20separate%20bug%20since%20that%27s%20a%20fix%20that%20I%0A%3E%20%3E%20think%20is%20reasonable%20at%20this%20point.%20%20We%20can%20now%20guarantee%20that%0A%3E%20%3E%20%2Fdev%2Frandom%20exists%20everywhere.%20%20%28And%20by%20that%20same%20token%2C%20if%20an%0A%3E%20%3E%20attacker%20can%20cause%20%2Fdev%2Frandom%20not%20to%20be%20present%2C%20they%20probably%20have%0A%3E%20%3E%20root%2C%20so%20you%27re%20probably%20toast%20anyway.%20%20So%20I%20don%27t%20think%20it%27s%20going%20to%0A%3E%20%3E%20really%20improve%20things%20to%20remove%20the%20drand%28%29%20fallback%2C%20but%20I%20don%27t%20have%0A%3E%20%3E%20strong%20feelings%20about%20that.%29%0A%3E%20%0A%3E%20So%20you%20might%20clone%20a%20new%20bug%20for%20this...%0A%3E%20%0A%3E%20%3E%20Secondly%2C%20I%27ll%20note%20that%20one%20of%20the%20CVE%27s%20were%20rejected%20as%20not%20a%0A%3E%20%3E%20vulnerability.%20%20%28In%20general%20it%20would%20have%20been%20better%20to%20have%20opened%0A%3E%20%3E%20seperate%20bugs%20for%20each%20CVE.%29%0A%3E%20%0A%3E%20Different%20maintainers%20have%20different%20preferences%20here%20-%20I%20will%20note%20that%0A%3E%20you%20want%20seperate%20bugs%20%28as%20we%20do%20for%20a%20number%20of%20other%20packages%29.%0A%3E%20%0A%3E%20%3E%20Finally%2C%20whether%20you%20think%20the%20other%20two%20CVE%27s%20justify%20this%20to%20be%0A%3E%20%3E%20serious%2C%20let%20alone%20%22grave%22%20bug%20really%20depends%20on%20what%20you%20think%20the%0A%3E%20%3E%20goals%20of%20pwgen%20are.%20%20To%20quote%20from%20the%20manual%20page%3A%0A%3E%20%0A%3E%20This%20is%20your%20decision%20-%20we%20try%20to%20use%20a%20fitting%20severity%20for%20every%20problem%2C%0A%3E%20but%20sometimes%20the%20cases%20are%20not%20so%20clear.%0A%3E%20%0A%3E%20%3E%20%20%20%20%20The%20%20pwgen%20%20program%20generates%20passwords%20which%20are%20designed%20to%20be%20easily%0A%3E%20%3E%20%20%20%20%20memorized%20by%20humans%2C%20while%20being%20as%20secure%20%20as%20%20possible.%20%20%20Human-memo%3F%3F%3F%0A%3E%20%3E%20%20%20%20%20rable%20%20passwords%20%20are%20%20never%20%20going%20%20to%20be%20as%20secure%20as%20completely%20com%3F%3F%3F%0A%3E%20%3E%20%20%20%20%20pletely%20random%20passwords.%20%20In%20particular%2C%20passwords%20generated%20by%20%20pwgen%0A%3E%20%3E%20%20%20%20%20without%20%20the%20%20-s%20option%20should%20not%20be%20used%20in%20places%20where%20the%20password%0A%3E%20%3E%20%20%20%20%20could%20be%20attacked%20via%20an%20off-line%20brute-force%20attack.%20%20%20%20On%20%20the%20%20other%0A%3E%20%3E%20%20%20%20%20hand%2C%20%20completely%20%20randomly%20%20generated%20%20passwords%20have%20a%20tendency%20to%20be%0A%3E%20%3E%20%20%20%20%20written%20down%2C%20and%20are%20subject%20to%20being%20compromised%20in%20that%20fashion.%0A%3E%20%3E%20%0A%3E%20%3E%20So%20we%20could%20change%20the%20defaults%20to%20be%20%22pwgen%20-csy%2020%22%2C%20in%20which%20case%0A%3E%20%3E%20you%20would%20get%20passwords%20like%20tihs%3A%0A%3E%20%3E%20%0A%3E%20%3E%20L%7DU%40lc_~i%5E%3En%7Cro%214uI-%201%60%3ByXlYVMW%25%3FE9%293A%267G%20%2A%2A%7D6BoBu%3D%21~3%29y%3F3v%5DOr%0A%3E%20%3E%20%3E%3D%3E%3APC%3BH%3FE7%2A%2B6%24c%26-QH%20URGgjUNG%5B%5CdSw%5C%3Ep7F-%5D%20_AXZ~%28HYd8Q%23%25b%3E%21%5D%27u%3A%0A%3E%20%3E%20~%290%3CI-%7B%29%7D_Ya%2AQ2nlWN%3B%20%5E%23t~1%2F%27sf%40%2Axz9GOhBuv%20e_%5B-_Fe%7BCD%23%5DDY8%26%40M%5Ea%0A%3E%20%3E%20%0A%3E%20%3E%20I%27m%20not%20sure%20that%20would%20be%20an%20improvement%2C%20as%20simply%20no%20one%20would%20use%0A%3E%20%3E%20them.%0A%3E%20%3E%20%0A%3E%20%3E%20OK%2C%20how%20about%20this%3F%20%20%28Generated%20using%20pwgen%20-s%29.%0A%3E%20%3E%20%0A%3E%20%3E%20vQ6uwkMk%20lSswO2MB%20tA8dYPpl%20KU1pQ2Xh%202XfxRyrC%20Za2xKx7h%20psPwHZ0c%20dOsC0JBX%0A%3E%20%3E%20JY3udA9c%20t6LzoiUq%20M0jR3AoS%20GOHkNE7G%20TeThsZz1%206cVi4ayY%20Poe4hPj7%20o2a7OpPC%0A%3E%20%3E%20Xh24cRLO%201chQyseV%206c2k0O3B%20OkdgRxy4%20K6Vc4JY2%20ylO3IE9B%20gVvNxw6B%207wjcOXwF%0A%3E%20%3E%20%0A%3E%20%3E%20Again%2C%20this%20will%20make%20the%20professional%20paranoids%20happy%20%28although%0A%3E%20%3E%20perhaps%20not%20as%20happy%20as%20%22%3E%3D%3E%3APC%3BH%3FE7%2A%2B6%24c%26-QH%22%29%2C%20but%20its%20not%20clear%20that%0A%3E%20%3E%20real%20users%20would%20be%20any%20less%20likely%20to%20write%20%22ylO3IE9B%22%20on%20a%20sticky%0A&amp;subject=Re%3A%20Bug%23726578%3A%20Ping%3A%20pwgen%3A%20Multiple%20vulnerabilities%20in%20passwords%0A%20generation&amp;In-Reply-To=%3C20140114110810.GA7732%40anhrefn.saar.de%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=aw%40anhrefn.saar.de" alt="">
<div class="header"><span class="headerfield">From:</span> Arne Wichmann &lt;aw@anhrefn.saar.de&gt;</div>
<div class="header"><span class="headerfield">To:</span> Theodore Ts&#39;o &lt;tytso@mit.edu&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#726578: Ping: pwgen: Multiple vulnerabilities in passwords
 generation</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 14 Jan 2014 12:08:11 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=726578;msg=35">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Thank you for reacting quickly!

begin  quotation  from Theodore Ts&#39;o (in &lt;20140112234500.GA15640@thunk.org&gt;):
&gt; On Sun, Jan 12, 2014 at 09:27:14PM +0100, Arne Wichmann wrote:
&gt; &gt; This grave problem is now open for more than two months. Is there any plan
&gt; &gt; to resolve this?
&gt; 
&gt; First, the CVE about having the unavailability of /dev/random fail
&gt; hard -- sure, that should be a separate bug since that&#39;s a fix that I
&gt; think is reasonable at this point.  We can now guarantee that
&gt; /dev/random exists everywhere.  (And by that same token, if an
&gt; attacker can cause /dev/random not to be present, they probably have
&gt; root, so you&#39;re probably toast anyway.  So I don&#39;t think it&#39;s going to
&gt; really improve things to remove the drand() fallback, but I don&#39;t have
&gt; strong feelings about that.)

So you might clone a new bug for this...

&gt; Secondly, I&#39;ll note that one of the CVE&#39;s were rejected as not a
&gt; vulnerability.  (In general it would have been better to have opened
&gt; seperate bugs for each CVE.)

Different maintainers have different preferences here - I will note that
you want seperate bugs (as we do for a number of other packages).

&gt; Finally, whether you think the other two CVE&#39;s justify this to be
&gt; serious, let alone &quot;grave&quot; bug really depends on what you think the
&gt; goals of pwgen are.  To quote from the manual page:

This is your decision - we try to use a fitting severity for every problem,
but sometimes the cases are not so clear.

&gt;     The  pwgen  program generates passwords which are designed to be easily
&gt;     memorized by humans, while being as secure  as  possible.   Human-memo???
&gt;     rable  passwords  are  never  going  to be as secure as completely com???
&gt;     pletely random passwords.  In particular, passwords generated by  pwgen
&gt;     without  the  -s option should not be used in places where the password
&gt;     could be attacked via an off-line brute-force attack.    On  the  other
&gt;     hand,  completely  randomly  generated  passwords have a tendency to be
&gt;     written down, and are subject to being compromised in that fashion.
&gt; 
&gt; So we could change the defaults to be &quot;pwgen -csy 20&quot;, in which case
&gt; you would get passwords like tihs:
&gt; 
&gt; L}U@lc_~i^&gt;n|ro!4uI- 1`;yXlYVMW%?E9)3A&amp;7G **}6BoBu=!~3)y?3v]Or
&gt; &gt;=&gt;:PC;H?E7*+6$c&amp;-QH URGgjUNG[\dSw\&gt;p7F-] _AXZ~(HYd8Q#%b&gt;!]&#39;u:
&gt; ~)0&lt;I-{)}_Ya*Q2nlWN; ^#t~1/&#39;sf@*xz9GOhBuv e_[-_Fe{CD#]DY8&amp;@M^a
&gt; 
&gt; I&#39;m not sure that would be an improvement, as simply no one would use
&gt; them.
&gt; 
&gt; OK, how about this?  (Generated using pwgen -s).
&gt; 
&gt; vQ6uwkMk lSswO2MB tA8dYPpl KU1pQ2Xh 2XfxRyrC Za2xKx7h psPwHZ0c dOsC0JBX
&gt; JY3udA9c t6LzoiUq M0jR3AoS GOHkNE7G TeThsZz1 6cVi4ayY Poe4hPj7 o2a7OpPC
&gt; Xh24cRLO 1chQyseV 6c2k0O3B OkdgRxy4 K6Vc4JY2 ylO3IE9B gVvNxw6B 7wjcOXwF
&gt; 
&gt; Again, this will make the professional paranoids happy (although
&gt; perhaps not as happy as &quot;&gt;=&gt;:PC;H?E7*+6$c&amp;-QH&quot;), but its not clear that
&gt; real users would be any less likely to write &quot;ylO3IE9B&quot; on a sticky
&gt; note which is pasted to their monitor, or just in a &quot;passwords&quot; file
&gt; in their home directory.

I do not have a really good idea on how to handle this. Some ideas come to
mind, mostly inspired by [1]:
- Improve the algorithm to be less biased. Though I see that would not be
  easy.
- Warn about the bias
- Use -s as default

[2] suggests, that there is a patch out there, but I have not yet looked at
it.

&gt; So ultimately, a lot of this is about an argument over defaults, and I
&gt; think the higher level problem is that no matter what password policy
&gt; you use, passwords are doomed as a technology.  Anything which is
&gt; secure against a brute force attack is impossible for a user to use,
&gt; unless they share passwords across multiple sites so they only have to
&gt; remember one password such as &quot;ylO3IE9B&quot; --- at which point they get
&gt; toast once some web site screws up in some way and gets penetrated by
&gt; bad guys.

I see the point, but that does not make the problem go away, and in many
cases you do not have so much of a choice, so the program does still have
its points.

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4440">CVE-2013-4440</a> has an easy fix, isn&#39;t it?

[1] <a href="http://www.openwall.com/lists/oss-security/2012/01/19/24">http://www.openwall.com/lists/oss-security/2012/01/19/24</a>
[2] <a href="http://marc.info/?l=oss-security&amp;m=138015793928431&amp;w=2">http://marc.info/?l=oss-security&amp;m=138015793928431&amp;w=2</a>

cu

AW
-- 
[...] If you don&#39;t want to be restricted, don&#39;t agree to it. If you are
coerced, comply as much as you must to protect yourself, just don&#39;t support
it. Noone can free you but yourself. (crag, on Debian Planet)
Arne Wichmann (aw@linux.de)
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=726578;filename=signature.asc;msg=35">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="36"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1413885605 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Tue, 21 Oct 2014 10:00:05 GMT) (<a href="bugreport.cgi?bug=726578;msg=37">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=37">mbox</a>, <a href="#36">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="38"></a>
<!-- request_addr: Adam Borowski &lt;kilobyte@angband.pl&gt; -->
<!-- time:1413885605 -->
<strong>Acknowledgement sent</strong>
to <code>Adam Borowski &lt;kilobyte@angband.pl&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Tue, 21 Oct 2014 10:00:05 GMT) (<a href="bugreport.cgi?bug=726578;msg=39">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=39">mbox</a>, <a href="#38">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="40"></a><a name="msg40"></a><a href="#40">Message #40</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=40">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=40">mbox</a>, <a href="mailto:726578@bugs.debian.org?In-Reply-To=%3C20141021095751.GA13570%40angband.pl%3E&amp;subject=Re%3A%20please%20tell%20me%20how%20is%20this%20a%20vulnerability&amp;body=On%20Tue%2C%2021%20Oct%202014%2011%3A57%3A52%20%2B0200%20Adam%20Borowski%20%3Ckilobyte%40angband.pl%3E%20wrote%3A%0A%3E%20Control%3A%20tags%20-1%20%2Bpatch%0A%3E%20%0A%3E%20So...%20how%20exactly%20are%20these%20vulnerabilities%3F%0A%3E%20%0A%3E%202.%20is%20what%20this%20program%20is%20supposed%20to%20do%3A%20produce%20_pronounceable_%20passwords%0A%3E%20instead%20of%20pure%20line%20noise.%20%20Sure%2C%20these%20do%20have%20less%20entropy%20than%20pure%20line%0A%3E%20noise%20for%20the%20same%20length%2C%20but%20the%20point%20is%20to%20make%20something%20that%27s%0A%3E%20possible%20to%20remember.%20%20If%20I%20wanted%20fully%20random%20unbiased%20ASCII%20characters%2C%0A%3E%20I%27d%20use%20a%20perl%20one-liner%20instead%20of%20a%20complex%20generator%20like%20pwgen.%0A%3E%20%0A%3E%20As%20for%204.%2C%20as%20Steven%20remarked%2C%20this%20is%20done%20intentionally%20to%20placate%0A%3E%20%22password%20quality%20checkers%22.%20%20Also%2C%20while%20allowing%20an%20all-lowercase%20password%0A%3E%202%5E-8%20of%20the%20time%20does%20have%20negligibly%20more%20resilience%20against%20an%20exhaustive%0A%3E%20attack%2C%20it%20is%20massively%20worse%20against%20attacks%20prevalent%20in%20the%20real%20world.%20%0A%3E%20Thus%2C%20paying%20this%20small%20amount%20of%20entropy%20is%20well%20worth%20it.%0A%3E%20%0A%3E%20And%20as%20for%203.%2C%20please%20read%20http%3A%2F%2Fwww.2uo.de%2Fmyths-about-urandom%2F%0A%3E%20Heck%2C%20FreeBSD%20doesn%27t%20even%20_have_%20%2Fdev%2Frandom%20in%20Linux%27s%20sense%20--%20and%20no%20one%0A%3E%20is%20calling%20it%20insecure.%0A%3E%20%0A%3E%20So%20these%20three%20points%20are%20complete%20non-issues.%0A%3E%20%0A%3E%20%0A%3E%20I%20do%20agree%20with%201.%2C%20though%2C%20so%20here%27s%20a%20patch%20to%20fix%20it.%0A%3E%20%0A%3E%20Let%27s%20have%20pwgen%20in%20jessie%21%0A%3E%20%0A%3E%20--%20%0A%3E%20%2F%2F%20If%20you%20believe%20in%20so-called%20%22intellectual%20property%22%2C%20please%20immediately%0A%3E%20%2F%2F%20cease%20using%20counterfeit%20alphabets.%20%20Instead%2C%20contact%20the%20nearest%20temple%0A%3E%20%2F%2F%20of%20Amon%2C%20whose%20priests%20will%20provide%20you%20with%20scribal%20services%20for%20all%0A%3E%20%2F%2F%20your%20writing%20needs%2C%20for%20Reasonable%20and%20Non-Discriminatory%20prices.%0A&amp;References=%3C20141021095751.GA13570%40angband.pl%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kilobyte%40angband.pl" alt="">
<div class="header"><span class="headerfield">From:</span> Adam Borowski &lt;kilobyte@angband.pl&gt;</div>
<div class="header"><span class="headerfield">To:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> please tell me how is this a vulnerability</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 21 Oct 2014 11:57:52 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=726578;msg=40">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Control: tags -1 +patch

So... how exactly are these vulnerabilities?

2. is what this program is supposed to do: produce _pronounceable_ passwords
instead of pure line noise.  Sure, these do have less entropy than pure line
noise for the same length, but the point is to make something that&#39;s
possible to remember.  If I wanted fully random unbiased ASCII characters,
I&#39;d use a perl one-liner instead of a complex generator like pwgen.

As for 4., as Steven remarked, this is done intentionally to placate
&quot;password quality checkers&quot;.  Also, while allowing an all-lowercase password
2^-8 of the time does have negligibly more resilience against an exhaustive
attack, it is massively worse against attacks prevalent in the real world. 
Thus, paying this small amount of entropy is well worth it.

And as for 3., please read <a href="http://www.2uo.de/myths-about-urandom/">http://www.2uo.de/myths-about-urandom/</a>
Heck, FreeBSD doesn&#39;t even _have_ /dev/random in Linux&#39;s sense -- and no one
is calling it insecure.

So these three points are complete non-issues.


I do agree with 1., though, so here&#39;s a patch to fix it.

Let&#39;s have pwgen in jessie!

-- 
// If you believe in so-called &quot;intellectual property&quot;, please immediately
// cease using counterfeit alphabets.  Instead, contact the nearest temple
// of Amon, whose priests will provide you with scribal services for all
// your writing needs, for Reasonable and Non-Discriminatory prices.
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=726578;filename=pwgen-notty.patch;msg=40">pwgen-notty.patch</a> (text/x-diff, attachment)]</pre>

<div class="msgreceived"><hr><p>
<a name="41"></a>
<!-- command:tag -->
<!-- requester: Adam Borowski &lt;kilobyte@angband.pl&gt; -->
<!-- request_addr: 726578-submit@bugs.debian.org -->
<!-- time:1413885605 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security patch&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<strong>Added tag(s) patch.</strong>
Request was from <code>Adam Borowski &lt;kilobyte@angband.pl&gt;</code>
to <code>726578-submit@bugs.debian.org</code>.
 (Tue, 21 Oct 2014 10:00:05 GMT) (<a href="bugreport.cgi?bug=726578;msg=42">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=42">mbox</a>, <a href="#41">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="43"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1414424357 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Mon, 27 Oct 2014 15:39:17 GMT) (<a href="bugreport.cgi?bug=726578;msg=44">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=44">mbox</a>, <a href="#43">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="45"></a>
<!-- request_addr: Adam Borowski &lt;kilobyte@angband.pl&gt; -->
<!-- time:1414424357 -->
<strong>Acknowledgement sent</strong>
to <code>Adam Borowski &lt;kilobyte@angband.pl&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Mon, 27 Oct 2014 15:39:17 GMT) (<a href="bugreport.cgi?bug=726578;msg=46">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=46">mbox</a>, <a href="#45">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="47"></a><a name="msg47"></a><a href="#47">Message #47</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=47">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=47">mbox</a>, <a href="mailto:726578@bugs.debian.org?subject=Re%3A%20CVE-2013-4442%20is%20not%20about%20%2Fdev%2Frandom%20vs%20%2Fdev%2Furandom&amp;body=On%20Mon%2C%2027%20Oct%202014%2016%3A34%3A59%20%2B0100%20Adam%20Borowski%20%3Ckilobyte%40angband.pl%3E%20wrote%3A%0A%3E%20It%20looks%20like%20this%20bug%20does%20mischaracterize%20CVE-2013-4442.%20%20Unlike%20what%27s%0A%3E%20said%20here%2C%20using%20%2Fdev%2Furandom%20instead%20of%20%2Fdev%2Frandom%20%28which%20contrary%20to%0A%3E%20popular%20wisdom%20is%20not%20an%20issue%29%20but%20that%2C%20if%20opening%20of%20these%20two%20devices%0A%3E%20fail%2C%20pwgen%20falls%20back%20to%20using%20pids%20and%20time.%0A%3E%20%0A%3E%20On%20BSD%20and%20Linux%2FGNU%2C%20%2Fdev%2Furandom%20is%20guaranteed%20so%20this%20might%20trigger%20if%3A%0A%3E%20%2A%20someone%20exhausts%20the%20system-wide%20descriptor%20limit%0A%3E%20%2A%20a%20chroot%20lacks%20the%20%2Fdev%20entries%0A%3E%20%2A%20the%20admin%20writes%20a%20pathologically%20bad%20selinux%20policy%0A%3E%20%0A%3E%20Let%27s%20track%20this%20as%20a%20separate%20bug.%20%20I%27d%20say%20that%20this%20is%20only%20a%20minor%0A%3E%20vulnerability%2C%20thus%20let%27s%20have%20it%20at%20%22important%22%20severity.%20%20pwgen%20has%20at%0A%3E%20least%20one%20RC%20issue%2C%20so%20it%20wouldn%27t%20be%20bad%20to%20fix%20for%20jessie%20but%20I%20don%27t%20find%0A%3E%20it%20as%20a%20must.%0A%3E%20%0A%3E%20--%20%0A%3E%20%2F%2F%20If%20you%20believe%20in%20so-called%20%22intellectual%20property%22%2C%20please%20immediately%0A%3E%20%2F%2F%20cease%20using%20counterfeit%20alphabets.%20%20Instead%2C%20contact%20the%20nearest%20temple%0A%3E%20%2F%2F%20of%20Amon%2C%20whose%20priests%20will%20provide%20you%20with%20scribal%20services%20for%20all%0A%3E%20%2F%2F%20your%20writing%20needs%2C%20for%20Reasonable%20and%20Non-Discriminatory%20prices.%0A%3E%20%0A%3E%20%0A&amp;References=%3C20141027153459.GA18568%40angband.pl%3E&amp;In-Reply-To=%3C20141027153459.GA18568%40angband.pl%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kilobyte%40angband.pl" alt="">
<div class="header"><span class="headerfield">From:</span> Adam Borowski &lt;kilobyte@angband.pl&gt;</div>
<div class="header"><span class="headerfield">To:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> CVE-2013-4442 is not about /dev/random vs /dev/urandom</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 27 Oct 2014 16:34:59 +0100</div>
</div>
<pre class="message">It looks like this bug does mischaracterize <a href="https://security-tracker.debian.org/tracker/CVE-2013-4442">CVE-2013-4442</a>.  Unlike what&#39;s
said here, using /dev/urandom instead of /dev/random (which contrary to
popular wisdom is not an issue) but that, if opening of these two devices
fail, pwgen falls back to using pids and time.

On BSD and Linux/GNU, /dev/urandom is guaranteed so this might trigger if:
* someone exhausts the system-wide descriptor limit
* a chroot lacks the /dev entries
* the admin writes a pathologically bad selinux policy

Let&#39;s track this as a separate bug.  I&#39;d say that this is only a minor
vulnerability, thus let&#39;s have it at &quot;important&quot; severity.  pwgen has at
least one RC issue, so it wouldn&#39;t be bad to fix for jessie but I don&#39;t find
it as a must.

-- 
// If you believe in so-called &quot;intellectual property&quot;, please immediately
// cease using counterfeit alphabets.  Instead, contact the nearest temple
// of Amon, whose priests will provide you with scribal services for all
// your writing needs, for Reasonable and Non-Discriminatory prices.


</pre>

<div class="infmessage"><hr><p>
<a name="48"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1414425785 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Mon, 27 Oct 2014 16:03:05 GMT) (<a href="bugreport.cgi?bug=726578;msg=49">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=49">mbox</a>, <a href="#48">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="50"></a>
<!-- request_addr: Adam Borowski &lt;kilobyte@angband.pl&gt; -->
<!-- time:1414425785 -->
<strong>Acknowledgement sent</strong>
to <code>Adam Borowski &lt;kilobyte@angband.pl&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Mon, 27 Oct 2014 16:03:05 GMT) (<a href="bugreport.cgi?bug=726578;msg=51">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=51">mbox</a>, <a href="#50">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="52"></a><a name="msg52"></a><a href="#52">Message #52</a> received at 726578@bugs.debian.org (<a href="bugreport.cgi?bug=726578;msg=52">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=52">mbox</a>, <a href="mailto:726578@bugs.debian.org?In-Reply-To=%3C20141027160005.GB20731%40angband.pl%3E&amp;subject=Re%3A%20remaining%20issues%20are%20non-bugs&amp;body=On%20Mon%2C%2027%20Oct%202014%2017%3A00%3A05%20%2B0100%20Adam%20Borowski%20%3Ckilobyte%40angband.pl%3E%20wrote%3A%0A%3E%20Control%3A%20severity%20-1%20important%0A%3E%20%0A%3E%20I%20have%20split%20two%20parts%20into%20separate%20bugs%2C%20I%20think%20the%20remainder%20are%20ok%3A%0A%3E%20%0A%3E%20CVE-2013-4440%20non-tty%20passwords%20are%20trivially%20weak%20by%20default%0A%3E%20%2A%20%23725507%2C%20my%20assessment%3A%20grave%0A%3E%20CVE-2013-4441%20Phonemes%20mode%20has%20heavy%20bias%20and%20is%20enabled%20by%20default%0A%3E%20%2A%20works%20as%20designed%0A%3E%20CVE-2013-4442%20Silent%20fallback%20to%20insecure%20entropy%0A%3E%20%2A%20%23767008%2C%20my%20assessment%3A%20important%0A%3E%20CVE-2013-4443%20Secure%20mode%20has%20bias%20towards%20numbers%20and%20uppercase%20letters%0A%3E%20%2A%20REJECTED%2C%20actually%20improves%20security%21%0A%3E%20%0A%3E%20CVE-2013-4443%20has%20been%20rejected%20from%20the%20CVE%20database.%0A%3E%20%0A%3E%20So%20let%27s%20discuss%20CVE-2013-4441.%20%20Such%20a%20bias%20means%20the%20program%20does%20what%0A%3E%20it%27s%20designed%20to%20do%3A%20it%20produces%20pronounceable%20passwords%20rather%20than%20a%20pure%0A%3E%20line%20noise.%20%20These%20are%20not%20necessarily%20less%20secure%20--%20you%20just%20need%20a%20longer%0A%3E%20length%20than%20on%20line%20noise.%20%20Recently%20this%20has%20been%20popularized%20as%20the%0A%3E%20%22correct%20horse%20battery%20staple%22%20issue%3A%20long%20passwords%20are%20far%2C%20far%20easier%20to%0A%3E%20memorize%20for%20a%20human%20than%20shorter%20but%20more%20complex%20ones%2C%20while%20being%20capable%0A%3E%20of%20providing%20as%20much%20or%20more%20entropy.%0A%3E%20%0A%3E%20What%20remains%20is%20that%20pwgen%27s%20default%20length%2C%208%20characters%2C%20might%20been%0A%3E%20adequate%20when%20the%20program%20was%20written%2C%20but%20is%20insecure%20today.%20%20But%20let%27s%0A%3E%20discuss%20that%20elsewhere.%0A%3E%20%0A%3E%20So%20I%20think%20this%20bug%20should%20be%20closed.%20%20Being%20not%20a%20security%20expert%20myself%2C%0A%3E%20I%27m%20merely%20degrading%20it%20to%20%22important%22%20for%20now%2C%20until%20someone%20else%20can%0A%3E%20confirm%20and%20close.%0A%3E%20%0A%3E%20I%27ll%20bump%20%23725507%20to%20grave%20after%20the%20next%20britney%20run.%0A%3E%20%0A%3E%20--%20%0A%3E%20%2F%2F%20If%20you%20believe%20in%20so-called%20%22intellectual%20property%22%2C%20please%20immediately%0A%3E%20%2F%2F%20cease%20using%20counterfeit%20alphabets.%20%20Instead%2C%20contact%20the%20nearest%20temple%0A%3E%20%2F%2F%20of%20Amon%2C%20whose%20priests%20will%20provide%20you%20with%20scribal%20services%20for%20all%0A%3E%20%2F%2F%20your%20writing%20needs%2C%20for%20Reasonable%20and%20Non-Discriminatory%20prices.%0A%3E%20%0A%3E%20%0A&amp;References=%3C20141027160005.GB20731%40angband.pl%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kilobyte%40angband.pl" alt="">
<div class="header"><span class="headerfield">From:</span> Adam Borowski &lt;kilobyte@angband.pl&gt;</div>
<div class="header"><span class="headerfield">To:</span> 726578@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> remaining issues are non-bugs</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 27 Oct 2014 17:00:05 +0100</div>
</div>
<pre class="message">Control: severity -1 important

I have split two parts into separate bugs, I think the remainder are ok:

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4440">CVE-2013-4440</a> non-tty passwords are trivially weak by default
* #725507, my assessment: grave
<a href="https://security-tracker.debian.org/tracker/CVE-2013-4441">CVE-2013-4441</a> Phonemes mode has heavy bias and is enabled by default
* works as designed
<a href="https://security-tracker.debian.org/tracker/CVE-2013-4442">CVE-2013-4442</a> Silent fallback to insecure entropy
* #767008, my assessment: important
<a href="https://security-tracker.debian.org/tracker/CVE-2013-4443">CVE-2013-4443</a> Secure mode has bias towards numbers and uppercase letters
* REJECTED, actually improves security!

<a href="https://security-tracker.debian.org/tracker/CVE-2013-4443">CVE-2013-4443</a> has been rejected from the CVE database.

So let&#39;s discuss <a href="https://security-tracker.debian.org/tracker/CVE-2013-4441">CVE-2013-4441</a>.  Such a bias means the program does what
it&#39;s designed to do: it produces pronounceable passwords rather than a pure
line noise.  These are not necessarily less secure -- you just need a longer
length than on line noise.  Recently this has been popularized as the
&quot;correct horse battery staple&quot; issue: long passwords are far, far easier to
memorize for a human than shorter but more complex ones, while being capable
of providing as much or more entropy.

What remains is that pwgen&#39;s default length, 8 characters, might been
adequate when the program was written, but is insecure today.  But let&#39;s
discuss that elsewhere.

So I think this bug should be closed.  Being not a security expert myself,
I&#39;m merely degrading it to &quot;important&quot; for now, until someone else can
confirm and close.

I&#39;ll bump #725507 to grave after the next britney run.

-- 
// If you believe in so-called &quot;intellectual property&quot;, please immediately
// cease using counterfeit alphabets.  Instead, contact the nearest temple
// of Amon, whose priests will provide you with scribal services for all
// your writing needs, for Reasonable and Non-Discriminatory prices.


</pre>

<div class="msgreceived"><hr><p>
<a name="53"></a>
<!-- requester: Adam Borowski &lt;kilobyte@angband.pl&gt; -->
<!-- request_addr: 726578-submit@bugs.debian.org -->
<!-- time:1414425785 -->
<strong>Severity set to &#39;important&#39; from &#39;grave&#39;</strong>
Request was from <code>Adam Borowski &lt;kilobyte@angband.pl&gt;</code>
to <code>726578-submit@bugs.debian.org</code>.
 (Mon, 27 Oct 2014 16:03:05 GMT) (<a href="bugreport.cgi?bug=726578;msg=54">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=54">mbox</a>, <a href="#53">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="55"></a>
<!-- command:tag -->
<!-- requester: Adam Borowski &lt;kilobyte@angband.pl&gt; -->
<!-- request_addr: 725507-submit@bugs.debian.org -->
<!-- time:1414434067 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security patch&#39;
            };
-->
<strong>Removed tag(s) patch.</strong>
Request was from <code>Adam Borowski &lt;kilobyte@angband.pl&gt;</code>
to <code>725507-submit@bugs.debian.org</code>.
 (Mon, 27 Oct 2014 18:21:07 GMT) (<a href="bugreport.cgi?bug=726578;msg=56">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=56">mbox</a>, <a href="#55">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="57"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt; -->
<!-- time:1446236284 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>:<br>
<code>Bug#726578</code>; Package <code>pwgen</code>.
 (Fri, 30 Oct 2015 20:18:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=58">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=58">mbox</a>, <a href="#57">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="59"></a>
<!-- request_addr: &quot;Interfax&quot; &lt;incoming@interfax.net&gt; -->
<!-- time:1446236284 -->
<strong>Acknowledgement sent</strong>
to <code>&quot;Interfax&quot; &lt;incoming@interfax.net&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Theodore Y. Ts&#39;o &lt;tytso@mit.edu&gt;</code>.
 (Fri, 30 Oct 2015 20:18:04 GMT) (<a href="bugreport.cgi?bug=726578;msg=60">full text</a>, <a href="bugreport.cgi?bug=726578;mbox=yes;msg=60">mbox</a>, <a href="#59">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=726578">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:28:08 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
