<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Roundup is a python-based, MIT licensed issue-tracking system with command-line, web and e-mail interfaces">
    <meta name="viewport" content="width=device-width">
    <title>
  
    Issue 5167: ModelStorage.write doesn&#39;t check field access for all fields - Tryton issue tracker
  
</title>
    <link rel="stylesheet" type="text/css" href="@@file/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="@@file/style.css">
  

  </head>
  <body>
    
      <div class="navbar sticky-top navbar-light bg-light">
  <a href="https://bugs.tryton.org/" class='navbar-brand'>
    <i class='icon-home'></i> Tryton issue tracker
  </a>
  <button class="navbar-toggler collapsed d-md-none" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
  </button>
  <form name="searchform" method="get" action="issue" class='form-inline my-2 my-lg-0 navbar-search'>
    <input type="hidden" name="@columns" value="id,activity,title,component,nosy,status"/>
    <input type="hidden" name="@sort" value="-activity">
    <input type="hidden" name="@group" value="priority">
    <input type="hidden" name="@filter" value="status">
    <input class="form-control form-control-sm mr-sm-2 search-query" id="search-text" type="search" name="@search_text">
    <input class="btn btn-sm btn-outline-success mr-2 my-2 my-sm-0" type="submit" value="Search" name="submit">
    <div class="form-check mr-2 w-auto">
        <input class="form-check-input" type="radio" name="status" id="status_notresolved" value="-1,1,2,3,4,5,6,7" checked/>
        <label class="form-check-label" for="status_notresolved">Open</label>
    </div>
    <div class="form-check w-auto">
        <input class="form-check-input" type="radio" name="status" id="status_all" value=""/>
        <label class="form-check-label" for="status_all">All</label>
    </div>
  </form>
</div>
    

    
      <div class='container-fluid'>
        <div class='row'>
          <div class='col-md-3 col-lg-2 d-md-block navigation collapse' id="navigation">
            <div class="navigation-sticky">
            
              


  <ul class='nav flex-column'>
    <li class='nav-header'>
      <i class='icon-fire'></i>Issues
    </li>
    

    <li class="nav-item">
      <a href="issue?@sort=-activity&amp;@group=priority&amp;@filter=status%2Cassignedto&amp;@columns=id%2Cactivity%2Ctitle%2Ccomponent%2Cnosy%2Cstatus&amp;@search_text=&amp;status=-1%2C1%2C2%2C3%2C4%2C5%2C6%2C7&amp;assignedto=-1&amp;@dispname=Show%20Unassigned&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a>
    </li>
    <li class="nav-item">
      <a href="https://bugs.tryton.org/?@dispname=Show%20All">Show All</a>
    </li>
    <li>
      <a href="issue?@template=search">Search</a>
    </li>
    <li>
      <form method="POST" class='form-inline' action="https://bugs.tryton.org/">
        <div class="form-group">
          <input type="hidden" name="@type" value="issue">
          <input type="hidden" name="@action" value="show">
          <input class="form-control form-control-sm d-inline-block w-25" type="text" name="@number">
          <input class="btn btn-sm btn-outline-secondary" type="submit" value="Show issue">
        </div>
      </form>
    </li>
    <li class="nav-item">
        <a href="@@file/graph/issue.html">Statistics</a>
    </li>
    </li>
  </ul>
  <hr>


<ul class='nav flex-column'>
  
  
  
</ul>





  <form method="POST" action='https://bugs.tryton.org/'>
    <ul class='nav flex-column'>
      <li class='nav-header'>
        <i class='icon-user'></i>Login
      </li>
      <li class="nav-item">
        <input class="form-control form-control-sm" type='text' name="__login_name" placeholder='username'>
      </li>
      <li class="nav-item">
        <input class="form-control form-control-sm" type="password" name="__login_password" placeholder='password'>
      </li>
      <li class="nav-item">
        <label class="form-control form-control-sm" class='checkbox'>
          <input type="checkbox" name="remember"> Remember me?
        </label>
      </li>
      <li class="nav-item">
        <input class="btn btn-sm btn-secondary" type="submit" value="Login">
      </li>
      <li class='vspace-one'>
        
          <a href="user?@template=register">Register</a>
        
      </li>
      <li class="nav-item">
        <a href="user?@template=forgotten">Lost&nbsp;your&nbsp;login?</a>
      </li>
    </ul>
    <input type="hidden" name="@action" value="Login">
    <input type="hidden" name="__came_from" value="https://bugs.tryton.org/issue5167">
  </form>
  <hr>


<ul class='nav flex-column'>
  <li class='nav-header'>
    <i class='icon-bookmark'></i>Help
  </li>
  <li>
    <a href="http://www.roundup-tracker.org">Roundup docs</a>
  </li>
</ul>
            
            </div>
          </div>

          <div class='col-md-9 col-lg-10 ml-sm-auto'>
            <div class='pb-2 mb-2 border-bottom'>
              <h3>
  
    Issue 5167
  
</h3>
              
              
            </div>

            
  

  
    
      <dl class="row row-cols-1 row-cols-lg-2 no-gutters">
  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Title</dt>
    <dd class="col col-8 col-md-9 col-lg-10">ModelStorage.write doesn&#39;t check field access for all fields</dd>
  </div>

  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Priority</dt>
    <dd class="col col-8 col-md-9 col-lg-8">bug</dd>
  </div>

  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Status</dt>
    <dd class="col col-8 col-md-9 col-lg-8">resolved</dd>
  </div>

  
  
  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Nosy list</dt>
    <dd class="col col-8 col-md-9 col-lg-10">ajacoutot, bch, ced, nicoe, sharkcz, yangoon</dd>
  </div>

  
  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Assigned to</dt>
    <dd class="col col-8 col-md-9 col-lg-8">ced</dd>
  </div>

  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Keywords</dt>
    <dd class="col col-8 col-md-9 col-lg-10">review</dd>
  </div>

</dl>
    
  

  
    <p>
      Created on <b>2015-12-03.12:42:34</b>
      by <b>ced</b>,
      last changed <b>71 months ago</b>
      by <b>ced</b>.
    </p>
  

  

  
    <h4>Messages</h4>
    
      
      <div class="anchor"  id="msg23389"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23389'>msg23389</a>
          <a href='msg23389'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-18.12:07:39
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt; @yangoon the CVE can be published.

Thanks, This is done on purpose:
<a href="https://security-tracker.debian.org/tracker/CVE-2015-0861" rel="nofollow noopener">https://security-tracker.debian.org/tracker/CVE-2015-0861</a></pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23388"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23388'>msg23388</a>
          <a href='msg23388'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-18.10:22:02
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">@yangoon the CVE can be published.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23373"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23373'>msg23373</a>
          <a href='msg23373'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-17.08:21:08
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">New <a href="http://hg.tryton.org/lookup/06230c381593">changeset 06230c381593</a> by C?dric Krier in branch 'default':
Check all fields when writing a sequence of records, values
<a href="http://hg.tryton.org/trytond/rev/06230c381593" rel="nofollow noopener">http://hg.tryton.org/trytond/rev/06230c381593</a>


New <a href="http://hg.tryton.org/lookup/70f988cd76ce">changeset 70f988cd76ce</a> by C?dric Krier in branch 'default':
Add test for for check fields when writing a sequence of records, values
<a href="http://hg.tryton.org/trytond/rev/70f988cd76ce" rel="nofollow noopener">http://hg.tryton.org/trytond/rev/70f988cd76ce</a>


New <a href="http://hg.tryton.org/lookup/f0564615ef28">changeset f0564615ef28</a> by C?dric Krier in branch '3.8':
Check all fields when writing a sequence of records, values
<a href="http://hg.tryton.org/trytond/rev/f0564615ef28" rel="nofollow noopener">http://hg.tryton.org/trytond/rev/f0564615ef28</a>


New <a href="http://hg.tryton.org/lookup/ed9ba85302a2">changeset ed9ba85302a2</a> by C?dric Krier in branch '3.6':
Check all fields when writing a sequence of records, values
<a href="http://hg.tryton.org/trytond/rev/ed9ba85302a2" rel="nofollow noopener">http://hg.tryton.org/trytond/rev/ed9ba85302a2</a>


New <a href="http://hg.tryton.org/lookup/c46c344a2183">changeset c46c344a2183</a> by C?dric Krier in branch '3.4':
Check all fields when writing a sequence of records, values
<a href="http://hg.tryton.org/trytond/rev/c46c344a2183" rel="nofollow noopener">http://hg.tryton.org/trytond/rev/c46c344a2183</a>


New <a href="http://hg.tryton.org/lookup/a671098903a2">changeset a671098903a2</a> by C?dric Krier in branch '3.2':
Check all fields when writing a sequence of records, values
<a href="http://hg.tryton.org/trytond/rev/a671098903a2" rel="nofollow noopener">http://hg.tryton.org/trytond/rev/a671098903a2</a></pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23372"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23372'>msg23372</a>
          <a href='msg23372'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-17.08:20:10
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">News published so the issue can be solved.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23370"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23370'>msg23370</a>
          <a href='msg23370'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-16.15:27:40
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">The releases have been published.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23317"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23317'>msg23317</a>
          <a href='msg23317'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-05.11:29:26
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt;&gt; I think this deserve a CVE number, @yangoon could you request one?
&gt; CVE requested.

CVE-2015-0861 was assigned from the Debian pool for this
issue. Please reference it in any upstream advisory for the new version.

Ok from our side for the embargo date.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23315"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23315'>msg23315</a>
          <a href='msg23315'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-05.02:47:17
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt; I think this deserve a CVE number, @yangoon could you request one?

CVE requested.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23314"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23314'>msg23314</a>
          <a href='msg23314'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-04.22:54:38
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Here is the <a href="//codereview.tryton.org/22631002">review22631002</a> that fixes the issue.
The review is accessible to reviewers so if someone wants to have access please send me an email with your rietveld account.

I think this security issue deserve a synchronised release for all affected series (3.8, 3.4 and 3.2).
I will be abroad the next week, so I propose to make the release the 16th December and publish the news the 17th.

I think this deserve a CVE number, @yangoon could you request one?</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg23298"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5167#msg23298'>msg23298</a>
          <a href='msg23298'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2015-12-03.12:42:33
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">The method checks only for the field defined in the first values dictionary [1] but it should check for all others dictionary from *args.

[1] <a href="http://hg.tryton.org/trytond/file/625e03224672/trytond/model/modelstorage.py#l151" rel="nofollow noopener">http://hg.tryton.org/trytond/file/625e03224672/trytond/model/modelstorage.py#l151</a></pre>
      
      </div>
    
  

  <div class='vspace-five'></div>

  
  
  <table class="history table table-condensed table-striped"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2015-12-18&nbsp;12:31:15</td><td>ced</td><td>set</td><td>status: chatting -> resolved</td></tr>
<tr><td>2015-12-18&nbsp;12:07:42</td><td>yangoon</td><td>set</td><td>status: resolved -> chatting<br />messages:
  + <a rel="nofollow noopener" href="msg23389">msg23389</a></td></tr>
<tr><td>2015-12-18&nbsp;10:22:10</td><td>ced</td><td>set</td><td>status: chatting -> resolved</td></tr>
<tr><td>2015-12-18&nbsp;10:22:03</td><td>ced</td><td>set</td><td>status: resolved -> chatting<br />messages:
  + <a rel="nofollow noopener" href="msg23388">msg23388</a></td></tr>
<tr><td>2015-12-17&nbsp;08:21:17</td><td>ced</td><td>set</td><td>status: chatting -> resolved</td></tr>
<tr><td>2015-12-17&nbsp;08:21:09</td><td>ced</td><td>set</td><td>status: resolved -> chatting<br />messages:
  + <a rel="nofollow noopener" href="msg23373">msg23373</a></td></tr>
<tr><td>2015-12-17&nbsp;08:20:11</td><td>ced</td><td>set</td><td>status: testing -> resolved<br />messages:
  + <a rel="nofollow noopener" href="msg23372">msg23372</a></td></tr>
<tr><td>2015-12-16&nbsp;15:27:40</td><td>ced</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg23370">msg23370</a></td></tr>
<tr><td>2015-12-05&nbsp;11:29:26</td><td>yangoon</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg23317">msg23317</a></td></tr>
<tr><td>2015-12-05&nbsp;02:47:18</td><td>yangoon</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg23315">msg23315</a></td></tr>
</table>
  
  <p>Showing 10 items.
  <a href="issue5167?show_all_history=yes">Show all history</a>
  (warning: this could be VERY long)</p>
  
  

          </div>
        </div>
      </div>
    

    
      <footer>
  <div class='container-fluid'>
    <div class="col-md-9 col-lg-10 ml-sm-auto">
    <hr>
    A
    <a href='http://www.roundup-tracker.org/'>roundup</a>
    production.
    </div>
  </div>
</footer>
    

    <script src='@@file/jquery-1.9.0.min.js'></script>
    <script src='@@file/bootstrap.min.js'></script>
    <script src='@@file/script.js'></script>
    
  

  </body>
</html>