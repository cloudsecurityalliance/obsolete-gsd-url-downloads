<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1901572 “snapd vulnerable to Library Injection from CWD” : Bugs : Snapcraft</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1901572" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1901572/bug.atom" title="Bug 1901572 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="I discovered that snapcraft will include the current directory as a search path for LD_LIBRARY_PATH when the home plug is enabled.
This means any snap package with the home plug, which are command line can be taken over if the user has a malicious file or directory in their CWD.

This was found when a snap package crashed due to libc.so.6 being in the CWD search path:

itszn@ubuntu:snap-escape$ ls tls/libc.so.6 
-rw-rw-r-- 1 itszn itszn 2030544 Oct 25 11:46 tls/libc.so.6
itszn@ubuntu:snap-esc..." />
      <meta property="og:description" content="I discovered that snapcraft will include the current directory as a search path for LD_LIBRARY_PATH when the home plug is enabled.
This means any snap package with the home plug, which are command line can be taken over if the user has a malicious file or directory in their CWD.

This was found when a snap package crashed due to libc.so.6 being in the CWD search path:

itszn@ubuntu:snap-escape$ ls tls/libc.so.6 
-rw-rw-r-- 1 itszn itszn 2030544 Oct 25 11:46 tls/libc.so.6
itszn@ubuntu:snap-esc..." />
    

    
    
      <meta property="og:title" content="Bug #1901572 “snapd vulnerable to Library Injection from CWD” : Bugs : Snapcraft" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1901572" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["18.10-build-caching", "18.10-build-vm", "18.10-extensions", "18.10-project-loading", "18.10-spread", "a11y", "appstream", "bionic", "bisect-done", "bitesize", "cherry-pick", "classic", "clean", "cleanbuild", "community-security", "desktop-file", "dirty", "disco", "dist-upgrade", "focal", "ftbfs", "groovy", "hirsute", "hw-specific", "impish", "integrations", "jammy", "kernel-bug", "manpage", "metabug", "multiarch", "needs-bisect", "needs-design", "needs-packaging", "needs-reassignment", "new-plugin", "package-conflict", "packaging", "patch", "patch-accepted-debian", "patch-accepted-upstream", "patch-forwarded-debian", "patch-forwarded-upstream", "patch-needswork", "patch-rejected", "patch-rejected-debian", "patch-rejected-upstream", "performing-bisect", "plugin", "py2-removal", "qt4-removal", "recording", "regression", "regression-proposed", "regression-release", "regression-update", "snap-docs", "sources", "stacktrace", "store", "string-fix", "suspend-resume", "systemd-boot", "testcase", "tests", "touch", "ui", "unmetdeps", "upgrade-software-version", "verification-done-bionic", "verification-done-focal", "verification-done-groovy", "verification-done-hirsute", "verification-done-impish", "verification-done-xenial", "verification-failed-bionic", "verification-failed-groovy", "verification-failed-impish", "verification-failed-xenial", "verification-needed-bionic", "verification-needed-focal", "verification-needed-groovy", "verification-needed-hirsute", "verification-needed-impish", "verification-needed-trusty", "verification-needed-xenial", "wayland", "wiki", "xenial"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/snapcraft"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/367599892/Snapcraft-logo-bird%4064.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/snapcraft">Snapcraft</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/snapcraft">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/snapcraft">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/snapcraft">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/snapcraft">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/snapcraft">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/snapcraft">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    snapd vulnerable to Library Injection from CWD
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1901572 reported by
      <a href="https://launchpad.net/~itszn" class="sprite person">itszn</a>
      <time title="2020-10-26 16:36:38 UTC" datetime="2020-10-26T16:36:38.582281+00:00">on 2020-10-26</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">262</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary2652105">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2652105">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/snapcraft">Snapcraft</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2652105">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~sergiusens">Sergio Schvezov</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2652105">
     <td colspan="7"><form action="/snapcraft/+bug/1901572/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/snapcraft">Snapcraft</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~itszn" class="sprite person">itszn</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2020-10-27 01:32:29 UTC" datetime="2020-10-27T01:32:29.425364+00:00">2020-10-27</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2020-10-30 11:43:41 UTC" datetime="2020-10-30T11:43:41.646909+00:00">2020-10-30</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2020-10-30 11:43:46 UTC" datetime="2020-10-30T11:43:46.905454+00:00">2020-10-30</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2020-10-30 11:43:41 UTC" datetime="2020-10-30T11:43:41.646909+00:00">2020-10-30</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2020-12-03 19:50:54 UTC" datetime="2020-12-03T19:50:54.017266+00:00">2020-12-03</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="snapcraft.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="snapcraft.target.option.package" name="snapcraft.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="snapcraft.target.distribution" name="snapcraft.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="snapcraft.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="snapcraft.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="snapcraft.target.package"
                         name="snapcraft.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;snapcraft.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('snapcraft.target.package');
              var select_menu = Y.DOM.byId('snapcraft.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-snapcraft-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "snapcraft.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-snapcraft-target-package", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-snapcraft-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="snapcraft.target.option.product" name="snapcraft.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="snapcraft" id="snapcraft.target.product"
                         name="snapcraft.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;snapcraft.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('snapcraft.target.product');
              var select_menu = Y.DOM.byId('snapcraft.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-snapcraft-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "snapcraft.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-snapcraft-target-product", "selected_value": "snapcraft", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-snapcraft-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="snapcraft.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="snapcraft.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="snapcraft.status" name="snapcraft.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="snapcraft.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="snapcraft.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="snapcraft.assignee.assign_to_me" name="snapcraft.assignee.option" value="snapcraft.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="snapcraft.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="snapcraft.assignee.assigned_to" name="snapcraft.assignee.option" value="snapcraft.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="snapcraft.assignee.assigned_to">
              Sergio Schvezov (sergiusens)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="snapcraft.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="snapcraft.comment_on_change" name="snapcraft.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary2652593">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ubuntu/+source/snapcraft/+bug/1901572/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2652593">
        <span class="yui3-activator-data-box">
            <a class="sprite package-source" href="https://bugs.launchpad.net/ubuntu/+source/snapcraft" title="Latest release: 3.0ubuntu2, uploaded to universe on 2020-09-08 13:59:09.501209+00:00 by Michael Vogt (mvo), maintained by Snapcraft Team (snapcraft)">snapcraft (Ubuntu)</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ubuntu/+source/snapcraft/+bug/1901572/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ubuntu/+source/snapcraft/+bug/1901572/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2652593">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~emitorino">Emilia Torino</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2652593">
     <td colspan="7"><form action="/ubuntu/+source/snapcraft/+bug/1901572/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ubuntu/+source/snapcraft">snapcraft (Ubuntu)</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~itszn" class="sprite person">itszn</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2020-10-29 03:00:41 UTC" datetime="2020-10-29T03:00:41.483491+00:00">2020-10-29</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2020-11-10 19:14:40 UTC" datetime="2020-11-10T19:14:40.271169+00:00">2020-11-10</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2020-11-10 19:14:15 UTC" datetime="2020-11-10T19:14:15.305514+00:00">2020-11-10</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2020-11-10 19:14:40 UTC" datetime="2020-11-10T19:14:40.271169+00:00">2020-11-10</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2020-12-03 18:16:14 UTC" datetime="2020-12-03T18:16:14.557677+00:00">2020-12-03</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ubuntu_snapcraft.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ubuntu_snapcraft.target.option.package" name="ubuntu_snapcraft.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ubuntu_snapcraft.target.distribution" name="ubuntu_snapcraft.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ubuntu_snapcraft.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ubuntu_snapcraft.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="snapcraft" id="ubuntu_snapcraft.target.package"
                         name="ubuntu_snapcraft.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_snapcraft.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_snapcraft.target.package');
              var select_menu = Y.DOM.byId('ubuntu_snapcraft.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_snapcraft-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "ubuntu_snapcraft.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-ubuntu_snapcraft-target-package", "selected_value": "snapcraft", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-ubuntu_snapcraft-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" id="ubuntu_snapcraft.target.option.product" name="ubuntu_snapcraft.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ubuntu_snapcraft.target.product"
                         name="ubuntu_snapcraft.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_snapcraft.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_snapcraft.target.product');
              var select_menu = Y.DOM.byId('ubuntu_snapcraft.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_snapcraft-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "ubuntu_snapcraft.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-ubuntu_snapcraft-target-product", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-ubuntu_snapcraft-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_snapcraft.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ubuntu_snapcraft.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ubuntu_snapcraft.status" name="ubuntu_snapcraft.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ubuntu_snapcraft.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceHIGH">High</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_snapcraft.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ubuntu_snapcraft.assignee.assign_to_me" name="ubuntu_snapcraft.assignee.option" value="ubuntu_snapcraft.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_snapcraft.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ubuntu_snapcraft.assignee.assigned_to" name="ubuntu_snapcraft.assignee.option" value="ubuntu_snapcraft.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ubuntu_snapcraft.assignee.assigned_to">
              Emilia Torino (emitorino)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ubuntu_snapcraft.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ubuntu_snapcraft.comment_on_change" name="ubuntu_snapcraft.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>I discovered that snapcraft will include the current directory as a search path for LD_LIBRARY_PATH when the home plug is enabled.<br />
This means any snap package with the home plug, which are command line can be taken over if the user has a malicious file or directory in their CWD.</p>
<p>This was found when a snap package crashed due to libc.so.6 being in the CWD search path:</p>
<p>itszn@ubuntu:<wbr />snap-escape$ ls tls/libc.so.6<br />
-rw-rw-r-- 1 itszn itszn 2030544 Oct 25 11:46 tls/libc.so.6<br />
itszn@ubuntu:<wbr />snap-escape$ vlc # random snap package<br />
Segmentation fault (core dumped)<br />
We can figure out why this is happening by checking strace:</p>
<p>&nbsp;&nbsp;$ sudo strace -f -v -e execve -s 1000 sudo -u itszn vlc 2&gt;&amp;1 | egrep &#x27;LD_LIBRARY_<wbr />PATH=[^<wbr />&quot;]+&quot;&#x27; -o | head -n 1<br />
&nbsp;&nbsp;LD_LIBRARY_<wbr />PATH=/var/<wbr />lib/snapd/<wbr />lib/gl:<wbr />/var/lib/<wbr />snapd/lib/<wbr />gl32:/var/<wbr />lib/snapd/<wbr />void:/snap/<wbr />vlc/1700/<wbr />lib/x86_<wbr />64-linux-<wbr />gnu:/snap/<wbr />vlc/1700/<wbr />usr/lib/<wbr />x86_64-<wbr />linux-gnu:<wbr />:/snap/<wbr />vlc/1700/<wbr />lib:/snap/<wbr />vlc/1700/<wbr />usr/lib:<wbr />/snap/vlc/<wbr />1700/lib/<wbr />x86_64-<wbr />linux-gnu:<wbr />/snap/vlc/<wbr />1700/usr/<wbr />lib/x86_<wbr />64-linux-<wbr />gnu&quot;<br />
In the above variable, we see a :: this is the result of an empty env variable being used. This leads to<br />
strange behavior in ld where it includes cwd in the search path (which I might also personally consider buggy).</p>
<p>The extra : is probably due to an empty path passed to either <a rel="nofollow" href="https://github.com/snapcore/snapcraft/blob/master/snapcraft/internal/project_loader/_env.py#L43">https:/<wbr />/github.<wbr />com/snapcore/<wbr />snapcraft/<wbr />blob/master/<wbr />snapcraft/<wbr />internal/<wbr />project_<wbr />loader/<wbr />_env.py#<wbr />L43</a> or <a rel="nofollow" href="https://github.com/snapcore/snapcraft/blob/master/snapcraft/internal/elf.py#L64">https:/<wbr />/github.<wbr />com/snapcore/<wbr />snapcraft/<wbr />blob/master/<wbr />snapcraft/<wbr />internal/<wbr />elf.py#<wbr />L64</a></p>
<p>This bug means that any library not provided by the first search paths will be loaded from CWD, including libc.so.6</p>
<p>A malicious libc.so.6 could be crafted to get code exec within the container when loaded. Additionally this file could<br />
be hidden in a subdirectory named either tls or x86_64.</p>
<p>This code execution can then abuse other plugs, such as the x11 plug, to interact with the rest of the<br />
system and run a script by sending key presses to an open terminal.</p>
<p>I have included a poc which will work with snaps using core-18 with home and x11 plugs. (for example VLC and Chromium)</p>
<p>The impact of this is large as it effects the most installed snaps (based on <a rel="nofollow" href="https://snapcraft.io/blog/popular-snaps-per-distro">https:/<wbr />/snapcraft.<wbr />io/blog/<wbr />popular-<wbr />snaps-per-<wbr />distro</a>) are vulnerable and include apps specifically made to open files from the cli. Additionally chromium is now shipping as a snap on ubuntu 20.04, meaning users who normally would not use snap are now becoming vulnerable to this.</p>
<p>POC:<br />
Example running vlc in the POC directory:</p>
<p>-------<wbr />-------<wbr />-------<wbr />-------<wbr />-------<wbr />--<br />
itszn@ubuntu:~$ tar xfvz snap-escape.tar.gz<br />
itszn@ubuntu:~$ cd snap-escape<br />
itszn@ubuntu:<wbr />snap-escape$ ls<br />
total 8<br />
-rw-rw-r-- 1 itszn itszn    0 Oct 25 11:04 amazing-movie.mp4<br />
-rw-rw-r-- 1 itszn itszn    0 Oct 25 11:28 cool-page.html<br />
-rw-rw-r-- 1 itszn itszn 2193 Oct 25 11:45 README.txt<br />
drwxrwxr-x 3 itszn itszn 4096 Oct 25 11:28 tls<br />
itszn@ubuntu:<wbr />snap-escape$ vlc<br />
Got code execution running as itszn inside snap container!</p>
<p>We can read/write any non-hidden (non-dot) file in<br />
+ echo &#x27;Hello from snap code exec&#x27; &gt; /home/itszn/pwned<br />
+ cat /home/itszn/pwned<br />
Hello from snap code exec</p>
<p>However we are still restricted by the container</p>
<p>We cannot access dotfiles<br />
+ echo &#x27;echo PWNED&#x27; &gt;&gt; /home/itszn/.bashrc<br />
./tls/s: 20: ./tls/s: cannot create /home/itszn/<wbr />.bashrc: Permission denied</p>
<p>Or other non-home files<br />
+ cat /etc/issue<br />
cat: /etc/issue: Permission denied</p>
<p>Luckily, this snap has the x11 plug<br />
We can use this escape the container!<br />
Starting container escape...</p>
<p>Escape Success!</p>
<p>We are now running code outside of snap container, we now have full privs of itszn</p>
<p>For example we now can read /etc/issue:<br />
+ cat /etc/issue<br />
Ubuntu 18.04.4 LTS \n \l</p>
<p>Or modify dotfiles<br />
+ echo &#x27;echo PWNED&#x27; &gt;&gt; /home/itszn/.bashrc<br />
+ tail -n 1 /home/itszn/.bashrc<br />
echo PWNED</p>
<p>Full escape and code execution~!<br />
-------<wbr />-------<wbr />-------<wbr />-------<wbr />------</p>
<p>Attached is the poc</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            
          </span>
          <span id="tag-list">
          </span>
          <a href="+edit" title="Add tags" id="tags-trigger" class="sprite add">Add tags</a>
          
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2020-27348" title="In some conditions, a snap package bu...">2020-27348</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~itszn" class="sprite person">itszn (itszn)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-10-26T16:39:12.190471+00:00" title="2020-10-26 16:39:12 UTC">on 2020-10-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Additionally here is the script I used to generate the malicious libc.so.6</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Additionally here is the script I used to generate the malicious libc.so.6</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~itszn" class="sprite person">itszn (itszn)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-10-29T03:00:26.322316+00:00" title="2020-10-29 03:00:26 UTC">on 2020-10-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Note: This was on Ubuntu 20.04 that it was tested. I have not tested on other distros.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Note: This was on Ubuntu 20.04 that it was tested. I have not tested on other distros.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jdstrand" class="sprite person">Jamie Strandboge (jdstrand)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-10-29T13:28:02.992635+00:00" title="2020-10-29 13:28:02 UTC">on 2020-10-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I agree that the LD_LIBRARY_PATH should be cleaned up.</p>
<p>In terms of the snap application, it is always going to be confined via the sandbox and will be as open or closed as this allows (eg, the x11 plug necessarily gives a lot of access due to the design of X, which is why things like xdotool allows you to do so much). Therefore, from the POV of the *snap*, this is not a security vulnerability (it doesn&#x27;t need the shared lib from the host, it could just do that (ie, use xdotool)).</p>
<p>In terms of the *user*, the user doesn&#x27;t need to hop through a snap application to break out of confinement, the user is already unconfined. In other words, the user doesn&#x27;t need to put a shared lib on the system, then run a snap to have access to /etc/issue or run xdotool. The user can just perform those actions directly.</p>
<p>Where things get more interesting though is that a malicious snap with the home interface connected could target other snaps by writing out a crafted library then wait for another snap to be executed from this directory. That crafted library could exfiltrate data or run other commands within the context of the other snap. As such, I think this does constitute a security vulnerability.</p>
<p>IME the bug is in snapcraft, but we should look at snapd to explore if we should harden its &#x27;environment&#x27; handling to remove the current directory from various env vars.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I agree that the LD_LIBRARY_PATH should be cleaned up.

In terms of the snap application, it is always going to be confined via the sandbox and will be as open or closed as this allows (eg, the x11 plug necessarily gives a lot of access due to the design of X, which is why things like xdotool allows you to do so much). Therefore, from the POV of the *snap*, this is not a security vulnerability (it doesn't need the shared lib from the host, it could just do that (ie, use xdotool)).

In terms of the *user*, the user doesn't need to hop through a snap application to break out of confinement, the user is already unconfined. In other words, the user doesn't need to put a shared lib on the system, then run a snap to have access to /etc/issue or run xdotool. The user can just perform those actions directly. 

Where things get more interesting though is that a malicious snap with the home interface connected could target other snaps by writing out a crafted library then wait for another snap to be executed from this directory. That crafted library could exfiltrate data or run other commands within the context of the other snap. As such, I think this does constitute a security vulnerability.

IME the bug is in snapcraft, but we should look at snapd to explore if we should harden its 'environment' handling to remove the current directory from various env vars.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~itszn" class="sprite person">itszn (itszn)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-10-29T15:11:31.269284+00:00" title="2020-10-29 15:11:31 UTC">on 2020-10-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>First I don&#x27;t totally know where the LD_LIBRARY_PATH is being messed up so I included snapcraft and snapd. Feel free to remove one or the other if not relevant.</p>
<p>Second, the attack vector here is that the user downloads something from the internet (let&#x27;s say fantastic_4.tar.gz) then uses a snap inside the downloaded directory. The malicious directory/libc could then gain code execution. Normally running a program in an attacker controlled directory should not result in attacker code execution and would be considered a bad security vulnerability (ie exploiting vlc on its own).</p>
<p>I agree that the code shipped with the snap and the user doing this to themselves is not a security concern, but most people download files and that&#x27;s where the danger is.</p>
<p>There are a lot of scenarios you could picture: vlc in a downloaded movie archive, code editor in a malicious source repo, chromium run by something like npm source watch, ghex being run on a suspicious binary to decide if it is malicious, docker building a docker image, etc.</p>
<p>In each example the user is running a snap in a potential downloaded directory which results in code execution which normally would not have happened if they had installed the app without snap.</p>
<p>This is not a great look for snap if this is not fixed</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">First I don't totally know where the LD_LIBRARY_PATH is being messed up so I included snapcraft and snapd. Feel free to remove one or the other if not relevant.

Second, the attack vector here is that the user downloads something from the internet (let's say fantastic_4.tar.gz) then uses a snap inside the downloaded directory. The malicious directory/libc could then gain code execution. Normally running a program in an attacker controlled directory should not result in attacker code execution and would be considered a bad security vulnerability (ie exploiting vlc on its own).

I agree that the code shipped with the snap and the user doing this to themselves is not a security concern, but most people download files and that's where the danger is.

There are a lot of scenarios you could picture: vlc in a downloaded movie archive, code editor in a malicious source repo, chromium run by something like npm source watch, ghex being run on a suspicious binary to decide if it is malicious, docker building a docker image, etc.

In each example the user is running a snap in a potential downloaded directory which results in code execution which normally would not have happened if they had installed the app without snap.

This is not a great look for snap if this is not fixed</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~itszn" class="sprite person">itszn (itszn)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-10-29T15:25:40.474474+00:00" title="2020-10-29 15:25:40 UTC">on 2020-10-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Additional yes I also think using this as a escalation from on snap to anouther a potential attack vector for this bug as well.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Additional yes I also think using this as a escalation from on snap to anouther a potential attack vector for this bug as well.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~sergiusens" class="sprite person">Sergio Schvezov (sergiusens)</a>
    
    <time title="2020-10-30 11:43:41 UTC" datetime="2020-10-30T11:43:41.381744+00:00">on 2020-10-30</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in snapcraft: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Sergio Schvezov (sergiusens)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~sbeattie" class="sprite person">Steve Beattie (sbeattie)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-11-03T00:26:10.731662+00:00" title="2020-11-03 00:26:10 UTC">on 2020-11-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Please use CVE-2020-27348 for this issue. Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Please use CVE-2020-27348 for this issue. Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~emitorino" class="sprite person">Emilia Torino (emitorino)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-11-10T19:13:41.155347+00:00" title="2020-11-10 19:13:41 UTC">on 2020-11-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hello itszn,</p>
<p>Thank you for the report. The security team and the snapcraft team are coordinating a security update to fix this issue. We will inform further as soon as we have more details.</p>
<p>I am removing snapd from this bug as is not affected by this vulnerability.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hello itszn,

Thank you for the report. The security team and the snapcraft team are coordinating a security update to fix this issue. We will inform further as soon as we have more details. 

I am removing snapd from this bug as is not affected by this vulnerability.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>no longer affects</b>:
      </td>
      <td>
        snapd
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in snapcraft (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Emilia Torino (emitorino)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~itszn" class="sprite person">itszn (itszn)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-11-25T23:29:21.737309+00:00" title="2020-11-25 23:29:21 UTC">on 2020-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi, have there been any updates on this?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, have there been any updates on this?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~alexmurray" class="sprite person">Alex Murray (alexmurray)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-11-25T23:57:32.639205+00:00" title="2020-11-25 23:57:32 UTC">on 2020-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes this is being actively worked on - emitorino is coordinating this from the security team and will provide more details soon.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes this is being actively worked on - emitorino is coordinating this from the security team and will provide more details soon.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~janitor" class="sprite person-inactive">Launchpad Janitor (janitor)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-12-03T18:16:13.123995+00:00" title="2020-12-03 18:16:13 UTC">on 2020-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package snapcraft - 2.43.1+18.04.1</p>
<p>---------------<br />
snapcraft (2.43.1+18.04.1) bionic-security; urgency=medium</p>
<p>&nbsp;&nbsp;[ Sergio Schvezov ]<br />
&nbsp;&nbsp;* SECURITY UPDATE: library injection vulnerability on strict mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;snaps built with snapcraft via misconfigured LD_LIBRARY_PATH<br />
&nbsp;&nbsp;&nbsp;&nbsp;- project_loader: do not export empty environment<br />
&nbsp;&nbsp;&nbsp;&nbsp;- meta: do not export empty environment. Warn on empty environment.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2020-27348<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/1901572" class="bug-link">#1901572</a></p>
<p>&nbsp;-- Emilia Torino &lt;email address hidden&gt;  Tue, 01 Dec 2020 09:10:42 -0300</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This bug was fixed in the package snapcraft - 2.43.1+18.04.1

---------------
snapcraft (2.43.1+18.04.1) bionic-security; urgency=medium

  [ Sergio Schvezov ]
  * SECURITY UPDATE: library injection vulnerability on strict mode
    snaps built with snapcraft via misconfigured LD_LIBRARY_PATH
    - project_loader: do not export empty environment
    - meta: do not export empty environment. Warn on empty environment.
    - CVE-2020-27348
    - LP: #1901572

 -- Emilia Torino &lt;emilia.torino@canonical.com&gt;  Tue, 01 Dec 2020 09:10:42 -0300</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in snapcraft (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~sergiusens" class="sprite person">Sergio Schvezov (sergiusens)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-12-03T19:50:53.600829+00:00" title="2020-12-03 19:50:53 UTC">on 2020-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Snapcraft 4.4.4</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Snapcraft 4.4.4</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in snapcraft: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~emitorino" class="sprite person">Emilia Torino (emitorino)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-12-03T21:00:25.286387+00:00" title="2020-12-03 21:00:25 UTC">on 2020-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The security update to fix this issue has been released. Please see <a rel="nofollow" href="https://discourse.ubuntu.com/t/usn-4661-1-snapcraft-vulnerability/19640">https:/<wbr />/discourse.<wbr />ubuntu.<wbr />com/t/usn-<wbr />4661-1-<wbr />snapcraft-<wbr />vulnerability/<wbr />19640</a>, <a rel="nofollow" href="https://ubuntu.com/security/notices/USN-4661-1">https:/<wbr />/ubuntu.<wbr />com/security/<wbr />notices/<wbr />USN-4661-<wbr />1</a> and <a rel="nofollow" href="https://forum.snapcraft.io/t/ann-snapcraft-4-4-4-library-injection-vulnerability-on-built-snaps/21465">https:/<wbr />/forum.<wbr />snapcraft.<wbr />io/t/ann-<wbr />snapcraft-<wbr />4-4-4-library-<wbr />injection-<wbr />vulnerability-<wbr />on-built-<wbr />snaps/21465</a>.</p>
<p>Thanks again itszn for your report and for helping us make Snapcraft better! We have decided to keep this bug private for one more week given the sensitiveness of the issue and the attached PoC you kindly provided us.</p>
<p>itszn: let us know if you have any further question.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The security update to fix this issue has been released. Please see https://discourse.ubuntu.com/t/usn-4661-1-snapcraft-vulnerability/19640, https://ubuntu.com/security/notices/USN-4661-1 and https://forum.snapcraft.io/t/ann-snapcraft-4-4-4-library-injection-vulnerability-on-built-snaps/21465.

Thanks again itszn for your report and for helping us make Snapcraft better! We have decided to keep this bug private for one more week given the sensitiveness of the issue and the attached PoC you kindly provided us. 

itszn: let us know if you have any further question.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/snapcraft/+bug/1901572/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~alexmurray" class="sprite person">Alex Murray (alexmurray)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-12-04T06:04:08.622908+00:00" title="2020-12-04 06:04:08 UTC">on 2020-12-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/snapcraft/+bug/1901572/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Deleted PoC etc before marking this public.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Deleted PoC etc before marking this public.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/snapcraft/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/snapcraft/+bug/1901572/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/snapcraft/+bug/1901572/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/snapcraft/+bug/1901572/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/snapcraft/+bug/1901572/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"bug_is_private": false, "information_type_data": {"PUBLICSECURITY": {"name": "Public Security", "description_css_class": "choice-description", "is_private": false, "value": "PUBLICSECURITY", "description": "Everyone can see this security related information.\n", "order": 1}, "PRIVATESECURITY": {"name": "Private Security", "description_css_class": "choice-description", "is_private": true, "value": "PRIVATESECURITY", "description": "Only the security group can see this information.\n ", "order": 2}, "PUBLIC": {"name": "Public", "description_css_class": "choice-description", "is_private": false, "value": "PUBLIC", "description": "Everyone can see this information.\n", "order": 0}, "USERDATA": {"name": "Private", "description_css_class": "choice-description", "is_private": true, "value": "USERDATA", "description": "Only shared with users permitted to see private user information.\n", "order": 3}}, "initial_comment_batch_offset": 41, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1901572", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1901572"}, "first visible_recent_comment": -26, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1901572", "web_link": "https://bugs.launchpad.net/bugs/1901572", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1901572, "private": false, "information_type": "Public Security", "name": null, "title": "snapd vulnerable to Library Injection from CWD", "description": "I discovered that snapcraft will include the current directory as a search path for LD_LIBRARY_PATH when the home plug is enabled.\nThis means any snap package with the home plug, which are command line can be taken over if the user has a malicious file or directory in their CWD.\n\nThis was found when a snap package crashed due to libc.so.6 being in the CWD search path:\n\nitszn@ubuntu:snap-escape$ ls tls/libc.so.6 \n-rw-rw-r-- 1 itszn itszn 2030544 Oct 25 11:46 tls/libc.so.6\nitszn@ubuntu:snap-escape$ vlc # random snap package \nSegmentation fault (core dumped)\nWe can figure out why this is happening by checking strace:\n\n  $ sudo strace -f -v -e execve -s 1000 sudo -u itszn vlc 2\u003e\u00261 | egrep 'LD_LIBRARY_PATH=[^\"]+\"' -o | head -n 1\n  LD_LIBRARY_PATH=/var/lib/snapd/lib/gl:/var/lib/snapd/lib/gl32:/var/lib/snapd/void:/snap/vlc/1700/lib/x86_64-linux-gnu:/snap/vlc/1700/usr/lib/x86_64-linux-gnu::/snap/vlc/1700/lib:/snap/vlc/1700/usr/lib:/snap/vlc/1700/lib/x86_64-linux-gnu:/snap/vlc/1700/usr/lib/x86_64-linux-gnu\"\nIn the above variable, we see a :: this is the result of an empty env variable being used. This leads to\nstrange behavior in ld where it includes cwd in the search path (which I might also personally consider buggy).\n\nThe extra : is probably due to an empty path passed to either https://github.com/snapcore/snapcraft/blob/master/snapcraft/internal/project_loader/_env.py#L43 or https://github.com/snapcore/snapcraft/blob/master/snapcraft/internal/elf.py#L64\n\nThis bug means that any library not provided by the first search paths will be loaded from CWD, including libc.so.6\n\nA malicious libc.so.6 could be crafted to get code exec within the container when loaded. Additionally this file could\nbe hidden in a subdirectory named either tls or x86_64.\n\nThis code execution can then abuse other plugs, such as the x11 plug, to interact with the rest of the\nsystem and run a script by sending key presses to an open terminal.\n\nI have included a poc which will work with snaps using core-18 with home and x11 plugs. (for example VLC and Chromium)\n\nThe impact of this is large as it effects the most installed snaps (based on https://snapcraft.io/blog/popular-snaps-per-distro) are vulnerable and include apps specifically made to open files from the cli. Additionally chromium is now shipping as a snap on ubuntu 20.04, meaning users who normally would not use snap are now becoming vulnerable to this.\n\nPOC:\nExample running vlc in the POC directory:\n\n-------------------------------------\nitszn@ubuntu:~$ tar xfvz snap-escape.tar.gz\nitszn@ubuntu:~$ cd snap-escape\nitszn@ubuntu:snap-escape$ ls\ntotal 8\n-rw-rw-r-- 1 itszn itszn    0 Oct 25 11:04 amazing-movie.mp4\n-rw-rw-r-- 1 itszn itszn    0 Oct 25 11:28 cool-page.html\n-rw-rw-r-- 1 itszn itszn 2193 Oct 25 11:45 README.txt\ndrwxrwxr-x 3 itszn itszn 4096 Oct 25 11:28 tls\nitszn@ubuntu:snap-escape$ vlc\nGot code execution running as itszn inside snap container!\n\nWe can read/write any non-hidden (non-dot) file in\n+ echo 'Hello from snap code exec' \u003e /home/itszn/pwned\n+ cat /home/itszn/pwned\nHello from snap code exec\n\nHowever we are still restricted by the container\n\nWe cannot access dotfiles\n+ echo 'echo PWNED' \u003e\u003e /home/itszn/.bashrc\n./tls/s: 20: ./tls/s: cannot create /home/itszn/.bashrc: Permission denied\n\nOr other non-home files\n+ cat /etc/issue\ncat: /etc/issue: Permission denied\n\nLuckily, this snap has the x11 plug\nWe can use this escape the container!\nStarting container escape...\n\n\n\nEscape Success!\n\nWe are now running code outside of snap container, we now have full privs of itszn\n\nFor example we now can read /etc/issue:\n+ cat /etc/issue\nUbuntu 18.04.4 LTS \\n \\l\n\n\nOr modify dotfiles\n+ echo 'echo PWNED' \u003e\u003e /home/itszn/.bashrc\n+ tail -n 1 /home/itszn/.bashrc\necho PWNED\n\nFull escape and code execution~!\n----------------------------------\n\nAttached is the poc", "owner_link": "https://bugs.launchpad.net/api/devel/~itszn", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/bug_tasks", "duplicate_of_link": null, "date_created": "2020-10-26T16:36:38.582281+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/subscriptions", "date_last_updated": "2020-12-04T06:04:15.894069+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 262, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/attachments", "security_related": true, "latest_patch_uploaded": null, "tags": [], "date_last_message": "2020-12-04T06:04:08.622908+00:00", "number_of_duplicates": 0, "message_count": 15, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1901572/linked_merge_proposals", "http_etag": "\"c757b7819e9c3721b46fde7bdd9157d92f7ef87f-299f575624f05d7bf84edc5ce6ed99c3be0d6f55\""}, "total_comments_and_activity": 36, "related_features": {}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/snapcraft/+bug/1901572", "web_link": "https://bugs.launchpad.net/snapcraft/+bug/1901572", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1901572", "milestone_link": null, "status": "Fix Released", "importance": "Critical", "assignee_link": "https://bugs.launchpad.net/api/devel/~sergiusens", "bug_target_display_name": "Snapcraft", "bug_target_name": "snapcraft", "bug_watch_link": null, "date_assigned": "2020-10-30T11:43:46.905454+00:00", "date_created": "2020-10-27T01:32:29.425364+00:00", "date_confirmed": "2020-10-30T11:43:41.646909+00:00", "date_incomplete": null, "date_in_progress": "2020-10-30T11:43:41.646909+00:00", "date_closed": "2020-12-03T19:50:54.017266+00:00", "date_left_new": "2020-10-30T11:43:41.646909+00:00", "date_triaged": "2020-10-30T11:43:41.646909+00:00", "date_fix_committed": "2020-12-03T19:50:54.017266+00:00", "date_fix_released": "2020-12-03T19:50:54.017266+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~itszn", "target_link": "https://bugs.launchpad.net/api/devel/snapcraft", "title": "Bug #1901572 in Snapcraft: \"snapd vulnerable to Library Injection from CWD\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/snapcraft/+bug/1901572/related_tasks", "is_complete": true, "http_etag": "\"9466c1f3f1dffcc81545848bd0b9972c6ce19e13-fdcbace0d37631947254c6cd79ee436d9efc7fb1\""}, "bugtask_data": {"2652105": {"bugtask_path": "/snapcraft/+bug/1901572", "bug_title": "snapd vulnerable to Library Injection from CWD", "user_can_delete": false, "milestone_value": null, "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "Snapcraft", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/snapcraft/+bug/1901572/+delete", "row_id": "tasksummary2652105", "target_is_product": true, "id": 2652105, "form_row_id": "task2652105", "assignee_vocabulary_filters": [], "prefix": "snapcraft", "importance_value": "Critical", "status_value": "Fix Released", "assignee_value": "sergiusens", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}, "2652593": {"bugtask_path": "/ubuntu/+source/snapcraft/+bug/1901572", "bug_title": "snapd vulnerable to Library Injection from CWD", "user_can_delete": false, "milestone_value": null, "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "snapcraft (Ubuntu)", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/ubuntu/+source/snapcraft/+bug/1901572/+delete", "row_id": "tasksummary2652593", "target_is_product": false, "id": 2652593, "form_row_id": "task2652593", "assignee_vocabulary_filters": [], "prefix": "ubuntu_snapcraft", "importance_value": "High", "status_value": "Fix Released", "assignee_value": "emitorino", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}}};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 65 queries/external actions issued in 0.64 seconds

    Features: {'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'bugs.affected_count_includes_dupes.disabled': None, 'baselayout.careers_link.disabled': None, 'js.yui_version': None, 'profiling.enabled': None, 'visible_render_time': None, 'hard_timeout': '9000', 'bugs.nominations.bug_supervisors_can_target': 'on', 'app.maintenance_message': None}

    r0d8de2b

    -->

</html>

