<!DOCTYPE html>
<html lang='en'>
<head>
<title>xorg/xserver - X server  (mirrored from https://gitlab.freedesktop.org/xorg/xserver)</title>
<meta name='generator' content='cgit v1.2.1'/>
<meta name='robots' content='index, nofollow'/>
<link rel='stylesheet' type='text/css' href='https://cgit.freedesktop.org/cgit.css'/>
<link rel='shortcut icon' href='/favicon.ico'/>
<link rel='alternate' title='Atom feed' href='https://cgit.freedesktop.org/xorg/xserver/atom/?h=master' type='application/atom+xml'/>
<link rel='vcs-git' href='https://gitlab.freedesktop.org/xorg/xserver' title='xorg/xserver Git repository'/>
</head>
<body>
<div id='cgit'><table id='header'>
<tr>
<td class='logo' rowspan='2'><a href='/'><img src='https://cgit.freedesktop.org/logo.png' alt='cgit logo'/></a></td>
<td class='main'><a href='/'>index</a> : <a title='xorg/xserver' href='/xorg/xserver/'>xorg/xserver</a></td><td class='form'><form method='get'>
<input type='hidden' name='id' value='05442de962d3dc624f79fc1a00eca3ffc5489ced'/><select name='h' onchange='this.form.submit();'>
<option value='COMPOSITEWRAP'>COMPOSITEWRAP</option>
<option value='CYGWIN'>CYGWIN</option>
<option value='DAMAGE-XFIXES'>DAMAGE-XFIXES</option>
<option value='Domain-branch'>Domain-branch</option>
<option value='IPv6-REVIEW'>IPv6-REVIEW</option>
<option value='XACE-SELINUX'>XACE-SELINUX</option>
<option value='XACE-modular'>XACE-modular</option>
<option value='XEVIE'>XEVIE</option>
<option value='XORG-6_8-branch'>XORG-6_8-branch</option>
<option value='XORG-RELEASE-1'>XORG-RELEASE-1</option>
<option value='XORG-RELEASE-1-STSF'>XORG-RELEASE-1-STSF</option>
<option value='XORG-RELEASE-1-TM'>XORG-RELEASE-1-TM</option>
<option value='XORG-STABLE'>XORG-STABLE</option>
<option value='XPRINT'>XPRINT</option>
<option value='autoconfig-for-7.2'>autoconfig-for-7.2</option>
<option value='bcook-backend'>bcook-backend</option>
<option value='compat_output'>compat_output</option>
<option value='dmx-2'>dmx-2</option>
<option value='dri-0-1-branch'>dri-0-1-branch</option>
<option value='dri2-swapbuffers'>dri2-swapbuffers</option>
<option value='exa-damagetrack'>exa-damagetrack</option>
<option value='glucose-2'>glucose-2</option>
<option value='gsr-current'>gsr-current</option>
<option value='input-hotplug'>input-hotplug</option>
<option value='lg3d'>lg3d</option>
<option value='lg3d-7.2'>lg3d-7.2</option>
<option value='lg3d-dev'>lg3d-dev</option>
<option value='lg3d-dev-0-6-1'>lg3d-dev-0-6-1</option>
<option value='lg3d-dev-0-6-1-1'>lg3d-dev-0-6-1-1</option>
<option value='lg3d-dev-0-6-1-current'>lg3d-dev-0-6-1-current</option>
<option value='lg3d-dev-0-6-1-latest'>lg3d-dev-0-6-1-latest</option>
<option value='lg3d-dev-0-6-2'>lg3d-dev-0-6-2</option>
<option value='lg3d-dev-0-6-latest'>lg3d-dev-0-6-latest</option>
<option value='lg3d-dev-0-7-0'>lg3d-dev-0-7-0</option>
<option value='lg3d-dev-0-7-1'>lg3d-dev-0-7-1</option>
<option value='lg3d-event'>lg3d-event</option>
<option value='lg3d-master'>lg3d-master</option>
<option value='master' selected='selected'>master</option>
<option value='mpx'>mpx</option>
<option value='no-pci-rework'>no-pci-rework</option>
<option value='orib-soc-2006'>orib-soc-2006</option>
<option value='panning-for-server-1.6'>panning-for-server-1.6</option>
<option value='pci-rework'>pci-rework</option>
<option value='randr-1.2'>randr-1.2</option>
<option value='randr-1.2-for-server-1.2'>randr-1.2-for-server-1.2</option>
<option value='randr-dpms'>randr-dpms</option>
<option value='sco_port_update'>sco_port_update</option>
<option value='server-1.10-branch'>server-1.10-branch</option>
<option value='server-1.11-branch'>server-1.11-branch</option>
<option value='server-1.12-branch'>server-1.12-branch</option>
<option value='server-1.13-branch'>server-1.13-branch</option>
<option value='server-1.14-branch'>server-1.14-branch</option>
<option value='server-1.15-branch'>server-1.15-branch</option>
<option value='server-1.16-branch'>server-1.16-branch</option>
<option value='server-1.17-branch'>server-1.17-branch</option>
<option value='server-1.18-branch'>server-1.18-branch</option>
<option value='server-1.19-branch'>server-1.19-branch</option>
<option value='server-1.2-branch'>server-1.2-branch</option>
<option value='server-1.20-branch'>server-1.20-branch</option>
<option value='server-1.3-branch'>server-1.3-branch</option>
<option value='server-1.4-branch'>server-1.4-branch</option>
<option value='server-1.5-branch'>server-1.5-branch</option>
<option value='server-1.6-branch'>server-1.6-branch</option>
<option value='server-1.6-enterleave'>server-1.6-enterleave</option>
<option value='server-1.7-branch'>server-1.7-branch</option>
<option value='server-1.7-nominations'>server-1.7-nominations</option>
<option value='server-1.8-branch'>server-1.8-branch</option>
<option value='server-1.9-branch'>server-1.9-branch</option>
<option value='server-1_0-branch'>server-1_0-branch</option>
<option value='server-1_1-branch'>server-1_1-branch</option>
<option value='server-21.1-branch'>server-21.1-branch</option>
<option value='transform-proposal'>transform-proposal</option>
<option value='wonderland-dev'>wonderland-dev</option>
<option value='xf-4_0_2-branch'>xf-4_0_2-branch</option>
<option value='xf-4_1-branch'>xf-4_1-branch</option>
<option value='xf-4_2-branch'>xf-4_2-branch</option>
<option value='xf-4_3-branch'>xf-4_3-branch</option>
<option value='xfixes_2_branch'>xfixes_2_branch</option>
<option value='xgl-0-0-1'>xgl-0-0-1</option>
<option value='xorg-server-1.2-apple'>xorg-server-1.2-apple</option>
<option value='xorg-server-1.4-apple'>xorg-server-1.4-apple</option>
<option value='xorg-server-1.5-apple'>xorg-server-1.5-apple</option>
<option value='xorg-server-1.6-apple'>xorg-server-1.6-apple</option>
<option value='xorg-server-1.7-apple'>xorg-server-1.7-apple</option>
<option value='xquartz-composite'>xquartz-composite</option>
<option value='xwayland-21.1'>xwayland-21.1</option>
</select> <input type='submit' value='switch'/></form></td></tr>
<tr><td class='sub'>X server  (mirrored from https://gitlab.freedesktop.org/xorg/xserver)</td><td class='sub right'>keithp</td></tr></table>
<table class='tabs'><tr><td>
<a href='/xorg/xserver/'>summary</a><a href='/xorg/xserver/refs/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>refs</a><a href='/xorg/xserver/log/'>log</a><a href='/xorg/xserver/tree/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>tree</a><a class='active' href='/xorg/xserver/commit/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>commit</a><a href='/xorg/xserver/diff/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>diff</a></td><td class='form'><form class='right' method='get' action='/xorg/xserver/log/'>
<input type='hidden' name='id' value='05442de962d3dc624f79fc1a00eca3ffc5489ced'/><select name='qt'>
<option value='grep'>log msg</option>
<option value='author'>author</option>
<option value='committer'>committer</option>
<option value='range'>range</option>
</select>
<input class='txt' type='search' size='10' name='q' value=''/>
<input type='submit' value='search'/>
</form>
</td></tr></table>
<div class='content'><div class='cgit-panel'><b>diff options</b><form method='get'><input type='hidden' name='id' value='05442de962d3dc624f79fc1a00eca3ffc5489ced'/><table><tr><td colspan='2'/></tr><tr><td class='label'>context:</td><td class='ctrl'><select name='context' onchange='this.form.submit();'><option value='1'>1</option><option value='2'>2</option><option value='3' selected='selected'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='15'>15</option><option value='20'>20</option><option value='25'>25</option><option value='30'>30</option><option value='35'>35</option><option value='40'>40</option></select></td></tr><tr><td class='label'>space:</td><td class='ctrl'><select name='ignorews' onchange='this.form.submit();'><option value='0' selected='selected'>include</option><option value='1'>ignore</option></select></td></tr><tr><td class='label'>mode:</td><td class='ctrl'><select name='dt' onchange='this.form.submit();'><option value='0' selected='selected'>unified</option><option value='1'>ssdiff</option><option value='2'>stat only</option></select></td></tr><tr><td/><td class='ctrl'><noscript><input type='submit' value='reload'/></noscript></td></tr></table></form></div><table summary='commit info' class='commit-info'>
<tr><th>author</th><td>Michal Srb &lt;msrb@suse.com&gt;</td><td class='right'>2017-05-24 15:54:39 +0300</td></tr>
<tr><th>committer</th><td>Peter Hutterer &lt;peter.hutterer@who-t.net&gt;</td><td class='right'>2017-06-19 11:58:44 +1000</td></tr>
<tr><th>commit</th><td colspan='2' class='sha1'><a href='/xorg/xserver/commit/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>05442de962d3dc624f79fc1a00eca3ffc5489ced</a> (<a href='/xorg/xserver/patch/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>patch</a>)</td></tr>
<tr><th>tree</th><td colspan='2' class='sha1'><a href='/xorg/xserver/tree/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>f5f0d72f7f9685230b29b7ba46e19957c93fd49b</a></td></tr>
<tr><th>parent</th><td colspan='2' class='sha1'><a href='/xorg/xserver/commit/?id=d82c3cee02a99cf7861d1effaa5c7d38683a7783'>d82c3cee02a99cf7861d1effaa5c7d38683a7783</a> (<a href='/xorg/xserver/diff/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced&amp;id2=d82c3cee02a99cf7861d1effaa5c7d38683a7783'>diff</a>)</td></tr></table>
<div class='commit-subject'>Xi: Zero target buffer in SProcXSendExtensionEvent.</div><div class='commit-msg'>Make sure that the xEvent eventT is initialized with zeros, the same way as
in SProcSendEvent.

Some event swapping functions do not overwrite all 32 bytes of xEvent
structure, for example XSecurityAuthorizationRevoked. Two cooperating
clients, one swapped and the other not, can send
XSecurityAuthorizationRevoked event to each other to retrieve old stack data
from X server. This can be potentialy misused to go around ASLR or
stack-protector.

Signed-off-by: Michal Srb &lt;msrb@suse.com&gt;
Reviewed-by: Peter Hutterer &lt;peter.hutterer@who-t.net&gt;
Signed-off-by: Peter Hutterer &lt;peter.hutterer@who-t.net&gt;
</div><div class='diffstat-header'><a href='/xorg/xserver/diff/?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>Diffstat</a></div><table summary='diffstat' class='diffstat'><tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/xorg/xserver/diff/Xi/sendexev.c?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>Xi/sendexev.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
</table><div class='diffstat-summary'>1 files changed, 1 insertions, 1 deletions</div><table summary='diff' class='diff'><tr><td><div class='head'>diff --git a/Xi/sendexev.c b/Xi/sendexev.c<br/>index 11d82029f..1cf118ab6 100644<br/>--- a/<a href='/xorg/xserver/tree/Xi/sendexev.c?id=d82c3cee02a99cf7861d1effaa5c7d38683a7783'>Xi/sendexev.c</a><br/>+++ b/<a href='/xorg/xserver/tree/Xi/sendexev.c?id=05442de962d3dc624f79fc1a00eca3ffc5489ced'>Xi/sendexev.c</a></div><div class='hunk'>@@ -78,7 +78,7 @@ SProcXSendExtensionEvent(ClientPtr client)</div><div class='ctx'> {</div><div class='ctx'>     CARD32 *p;</div><div class='ctx'>     int i;</div><div class='del'>-    xEvent eventT;</div><div class='add'>+    xEvent eventT = { .u.u.type = 0 };</div><div class='ctx'>     xEvent *eventP;</div><div class='ctx'>     EventSwapPtr proc;</div><div class='ctx'> </div></td></tr></table></div> <!-- class=content -->
<div class='footer'>generated by <a href='https://git.zx2c4.com/cgit/about/'>cgit v1.2.1</a> (<a href='https://git-scm.com/'>git 2.18.0</a>) at 2021-10-30 22:00:21 +0000</div>
</div> <!-- id=cgit -->
</body>
</html>
