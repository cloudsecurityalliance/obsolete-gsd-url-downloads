<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 956333002: Refactor TimeBase to post tasks.  Workers to use real Idle tasks. -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '35439bf0c70de387ebf258d6757e53fb';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/956333002%252526ust%25253D1608716395204154%252526usg%25253DAFQjCNG2xYrq4iP73WiAPsaw7a1YZf7pvg%26service%3Dah">Sign out</a>

</div>
<div class="counter">(305)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-956333002">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/956333002/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            956333002</a>:
    Refactor TimeBase to post tasks.  Workers to use real Idle tasks.  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            5 years, 10 months ago by <a href="/user/alex%20clarke%20(OOO%20till%2029th)" onMouseOver="M_showUserInfoPopup(this)">alex clarke (OOO till 29th)</a>
          </div>
          <div><b>Modified:</b><br/>
            5 years, 6 months ago
          </div>
          <div><b>Reviewers:</b><br/>
            <span class='approval'><a href="/user/Sami" onMouseOver="M_showUserInfoPopup(this)">Sami</a></span>, <span class='approval'><a href="/user/rmcilroy" onMouseOver="M_showUserInfoPopup(this)">rmcilroy</a></span>
          </div>
          
          <div><b>CC:</b><br/>
            rmcilroy_chromium.org  blink-reviews, kinuko+worker_chromium.org, horo+watch_chromium.org, falken, picksi1
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/blink.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=blink">
              blink
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - 82804f94bf4b4d551c864ff2ef44317633f76246"
               href="/search?repo_guid=82804f94bf4b4d551c864ff2ef44317633f76246">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">This patch refactors TimerBase to post tasks, and deletes the
obsolete Blink TimerHeap.  Unfortunately this meant refactoring
WorkerThreads too (ideally that would have been done in a
separate patch).  I have change them to use the new
WorkerScheduler's idle tasks for v8 GC.

ATTN Sheriffs: If there are weird layout test flakes all of a
sudden, this patch may be the cause since the interleaving of 
blink timers with other chromium tasks will change.


BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=463143">463143</a>, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=416362">416362</a>, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=480522">480522</a>

  </div>




  <h3>
    <a id="ps-1-pointer"
       href="/956333002/#ps1"
       onclick="M_toggleSectionForPS('956333002', '1')"
       class="toggled-section ">
      Patch Set 1
      
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-1"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-20001-pointer"
       href="/956333002/#ps20001"
       onclick="M_toggleSectionForPS('956333002', '20001')"
       class="toggled-section ">
      Patch Set 2
      : Fix bug with CancellableTask destruction after blink heap has gone away
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-20001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-40001-pointer"
       href="/956333002/#ps40001"
       onclick="M_toggleSectionForPS('956333002', '40001')"
       class="toggled-section ">
      Patch Set 3
      : Fix unit test
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-40001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-60001-pointer"
       href="/956333002/#ps60001"
       onclick="M_toggleSectionForPS('956333002', '60001')"
       class="toggled-section ">
      Patch Set 4
      : Fix a bunch of stuff
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 1
      
    </div>
  

  <div id="ps-60001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-80001-pointer"
       href="/956333002/#ps80001"
       onclick="M_toggleSectionForPS('956333002', '80001')"
       class="toggled-section ">
      Patch Set 5
      : New timer task
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-80001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-100001-pointer"
       href="/956333002/#ps100001"
       onclick="M_toggleSectionForPS('956333002', '100001')"
       class="toggled-section ">
      Patch Set 6
      : Delete even more!
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-100001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-160001-pointer"
       href="/956333002/#ps160001"
       onclick="M_toggleSectionForPS('956333002', '160001')"
       class="toggled-section ">
      Patch Set 7
      : Changed the idle implementation
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 5
      
    </div>
  

  <div id="ps-160001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-200001-pointer"
       href="/956333002/#ps200001"
       onclick="M_toggleSectionForPS('956333002', '200001')"
       class="toggled-section ">
      Patch Set 8
      : Rebased
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 30
      
    </div>
  

  <div id="ps-200001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-220001-pointer"
       href="/956333002/#ps220001"
       onclick="M_toggleSectionForPS('956333002', '220001')"
       class="toggled-section ">
      Patch Set 9
      : Simplify now the quiescence is handled in chromium
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 2
      
    </div>
  

  <div id="ps-220001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-240001-pointer"
       href="/956333002/#ps240001"
       onclick="M_toggleSectionForPS('956333002', '240001')"
       class="toggled-section ">
      Patch Set 10
      : Ross&#39;s long GC deadlines
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-240001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-260001-pointer"
       href="/956333002/#ps260001"
       onclick="M_toggleSectionForPS('956333002', '260001')"
       class="toggled-section ">
      Patch Set 11
      : Now uses the WebThread&#39;s WebScheduler
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 14
      
    </div>
  

  <div id="ps-260001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-280001-pointer"
       href="/956333002/#ps280001"
       onclick="M_toggleSectionForPS('956333002', '280001')"
       class="toggled-section ">
      Patch Set 12
      : Unit tests for TimerBase!!!
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-280001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-300001-pointer"
       href="/956333002/#ps300001"
       onclick="M_toggleSectionForPS('956333002', '300001')"
       class="toggled-section ">
      Patch Set 13
      : Make WorkerThreadTest thread safe
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-300001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-320001-pointer"
       href="/956333002/#ps320001"
       onclick="M_toggleSectionForPS('956333002', '320001')"
       class="toggled-section ">
      Patch Set 14
      : Rebase
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 17
      
    </div>
  

  <div id="ps-320001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-340001-pointer"
       href="/956333002/#ps340001"
       onclick="M_toggleSectionForPS('956333002', '340001')"
       class="toggled-section ">
      Patch Set 15
      : Some of Ross&#39;s suggestions
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 10
      
    </div>
  

  <div id="ps-340001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-360001-pointer"
       href="/956333002/#ps360001"
       onclick="M_toggleSectionForPS('956333002', '360001')"
       class="toggled-section ">
      Patch Set 16
      : Fix compilation of TimerTest.cpp on gcc
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-360001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-380001-pointer"
       href="/956333002/#ps380001"
       onclick="M_toggleSectionForPS('956333002', '380001')"
       class="toggled-section ">
      Patch Set 17
      : Fix componant build
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-380001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-400001-pointer"
       href="/956333002/#ps400001"
       onclick="M_toggleSectionForPS('956333002', '400001')"
       class="toggled-section ">
      Patch Set 18
      : Ross&#39;s comments
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-400001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-420001-pointer"
       href="/956333002/#ps420001"
       onclick="M_toggleSectionForPS('956333002', '420001')"
       class="toggled-section ">
      Patch Set 19
      : Test using rAF
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-420001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-440001-pointer"
       href="/956333002/#ps440001"
       onclick="M_toggleSectionForPS('956333002', '440001')"
       class="toggled-section ">
      Patch Set 20
      : Fix ScrollableAreaTest on mac
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-440001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-460001-pointer"
       href="/956333002/#ps460001"
       onclick="M_toggleSectionForPS('956333002', '460001')"
       class="toggled-section ">
      Patch Set 21
      : Make shutdown of workers safe
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-460001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-480001-pointer"
       href="/956333002/#ps480001"
       onclick="M_toggleSectionForPS('956333002', '480001')"
       class="toggled-section ">
      Patch Set 22
      : Fix some UAF and other fun bugs
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-480001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-500001-pointer"
       href="/956333002/#ps500001"
       onclick="M_toggleSectionForPS('956333002', '500001')"
       class="toggled-section ">
      Patch Set 23
      : Fixed several deadlocks.
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-500001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-520001-pointer"
       href="/956333002/#ps520001"
       onclick="M_toggleSectionForPS('956333002', '520001')"
       class="toggled-section opentriangle">
      Patch Set 24
      : Rebase
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-520001"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 5 years, 8 months ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue956333002_520001.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/956333002/520001"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+1505 lines, -896 lines</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530006">
            LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+24 lines, -7 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530006.diff"
             title="Download patch for LayoutTests/fast/dom/HTMLImageElement/image-innerHTML.html">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530007">
            LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/280001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+8 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530007.diff"
             title="Download patch for LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530008">
            LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/280001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+8 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530008.diff"
             title="Download patch for LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-window-stop.html">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530009">
            LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+3 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530009.diff"
             title="Download patch for LayoutTests/http/tests/security/suborigins/resources/childsuborigin.php">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530010">
            Source/core/Init.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/Init.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/Init.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/Init.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/Init.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/Init.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/Init.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/Init.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/Init.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/Init.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/Init.cpp"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+0 lines, -5 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530010.diff"
             title="Download patch for Source/core/Init.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530011">
            Source/core/animation/CompositorAnimationsTestHelper.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/animation/CompositorAnimationsTestHelper.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/animation/CompositorAnimationsTestHelper.h"
             title="Delta from patch set 10">10</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+7 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530011.diff"
             title="Download patch for Source/core/animation/CompositorAnimationsTestHelper.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530012">
            Source/core/core.gypi
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/core.gypi">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/core.gypi"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/core.gypi"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/core.gypi"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/core.gypi"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/core.gypi"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/core.gypi"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/core.gypi"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/core.gypi"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/core.gypi"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/core.gypi"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/core.gypi"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/core.gypi"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/core.gypi"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/core.gypi"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/core/core.gypi"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/core/core.gypi"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/core/core.gypi"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/core/core.gypi"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/core/core.gypi"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/core/core.gypi"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/core/core.gypi"
             title="Delta from patch set 21">21</a>
        
          <a href="/956333002/diff2/480001:520001/Source/core/core.gypi"
             title="Delta from patch set 22">22</a>
        
          <a href="/956333002/diff2/500001:520001/Source/core/core.gypi"
             title="Delta from patch set 23">23</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530012.diff"
             title="Download patch for Source/core/core.gypi">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530013">
            Source/core/fetch/CachingCorrectnessTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/fetch/CachingCorrectnessTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/fetch/CachingCorrectnessTest.cpp"
             title="Delta from patch set 14">14</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+7 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530013.diff"
             title="Download patch for Source/core/fetch/CachingCorrectnessTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530014">
            Source/core/fetch/ResourceTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/fetch/ResourceTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/fetch/ResourceTest.cpp"
             title="Delta from patch set 10">10</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+7 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530014.diff"
             title="Download patch for Source/core/fetch/ResourceTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530015">
            Source/core/frame/DOMTimerCoordinator.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/frame/DOMTimerCoordinator.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/frame/DOMTimerCoordinator.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/frame/DOMTimerCoordinator.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/frame/DOMTimerCoordinator.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/frame/DOMTimerCoordinator.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/frame/DOMTimerCoordinator.cpp"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530015.diff"
             title="Download patch for Source/core/frame/DOMTimerCoordinator.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530016">
            Source/core/workers/WorkerGlobalScope.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/workers/WorkerGlobalScope.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/core/workers/WorkerGlobalScope.cpp"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530016.diff"
             title="Download patch for Source/core/workers/WorkerGlobalScope.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530017">
            Source/core/workers/WorkerLoaderProxy.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/workers/WorkerLoaderProxy.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/core/workers/WorkerLoaderProxy.h"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+3 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530017.diff"
             title="Download patch for Source/core/workers/WorkerLoaderProxy.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530019">
            Source/core/workers/WorkerThread.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/workers/WorkerThread.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 21">21</a>
        
          <a href="/956333002/diff2/480001:520001/Source/core/workers/WorkerThread.h"
             title="Delta from patch set 22">22</a>
        
        </td>
        
          <td style="white-space: nowrap">5 chunks</td>
          <td style="white-space: nowrap">+26 lines, -4 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530019.diff"
             title="Download patch for Source/core/workers/WorkerThread.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530018">
            Source/core/workers/WorkerThread.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/workers/WorkerThread.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 21">21</a>
        
          <a href="/956333002/diff2/480001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 22">22</a>
        
          <a href="/956333002/diff2/500001:520001/Source/core/workers/WorkerThread.cpp"
             title="Delta from patch set 23">23</a>
        
        </td>
        
          <td style="white-space: nowrap">14 chunks</td>
          <td style="white-space: nowrap">+108 lines, -135 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530018.diff"
             title="Download patch for Source/core/workers/WorkerThread.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">A</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530020">
            Source/core/workers/WorkerThreadTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/core/workers/WorkerThreadTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/core/workers/WorkerThreadTest.cpp"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+457 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530020.diff"
             title="Download patch for Source/core/workers/WorkerThreadTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">D</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530002">
            Source/platform/PlatformThreadData.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/PlatformThreadData.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/280001:520001/Source/platform/PlatformThreadData.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/PlatformThreadData.h"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -59 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530002.diff"
             title="Download patch for Source/platform/PlatformThreadData.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">D</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530001">
            Source/platform/PlatformThreadData.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/PlatformThreadData.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/280001:520001/Source/platform/PlatformThreadData.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/PlatformThreadData.cpp"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -63 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530001.diff"
             title="Download patch for Source/platform/PlatformThreadData.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">D</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530003">
            Source/platform/SharedTimer.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/SharedTimer.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/SharedTimer.cpp"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -48 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530003.diff"
             title="Download patch for Source/platform/SharedTimer.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">D</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530005">
            Source/platform/ThreadTimers.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/ThreadTimers.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/ThreadTimers.h"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -67 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530005.diff"
             title="Download patch for Source/platform/ThreadTimers.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">D</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530004">
            Source/platform/ThreadTimers.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/ThreadTimers.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/ThreadTimers.cpp"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -151 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530004.diff"
             title="Download patch for Source/platform/ThreadTimers.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530022">
            Source/platform/Timer.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/Timer.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/Timer.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/Timer.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/Timer.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/Timer.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/Timer.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/Timer.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/Timer.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/Timer.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/Timer.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/Timer.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/platform/Timer.h"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/Timer.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/Timer.h"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/platform/Timer.h"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/platform/Timer.h"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/platform/Timer.h"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/platform/Timer.h"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/platform/Timer.h"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/platform/Timer.h"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/platform/Timer.h"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/platform/Timer.h"
             title="Delta from patch set 21">21</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+26 lines, -20 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530022.diff"
             title="Download patch for Source/platform/Timer.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530021">
            Source/platform/Timer.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/Timer.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 21">21</a>
        
          <a href="/956333002/diff2/480001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 22">22</a>
        
          <a href="/956333002/diff2/500001:520001/Source/platform/Timer.cpp"
             title="Delta from patch set 23">23</a>
        
        </td>
        
          <td style="white-space: nowrap">6 chunks</td>
          <td style="white-space: nowrap">+46 lines, -309 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530021.diff"
             title="Download patch for Source/platform/Timer.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">A</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530023">
            Source/platform/TimerTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/TimerTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/platform/TimerTest.cpp"
             title="Delta from patch set 15">15</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+680 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530023.diff"
             title="Download patch for Source/platform/TimerTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530024">
            Source/platform/blink_platform.gypi
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/blink_platform.gypi">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 21">21</a>
        
          <a href="/956333002/diff2/480001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 22">22</a>
        
          <a href="/956333002/diff2/500001:520001/Source/platform/blink_platform.gypi"
             title="Delta from patch set 23">23</a>
        
        </td>
        
          <td style="white-space: nowrap">4 chunks</td>
          <td style="white-space: nowrap">+1 line, -6 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530024.diff"
             title="Download patch for Source/platform/blink_platform.gypi">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530025">
            Source/platform/blink_platform_tests.gyp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/blink_platform_tests.gyp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 20">20</a>
        
          <a href="/956333002/diff2/460001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 21">21</a>
        
          <a href="/956333002/diff2/480001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 22">22</a>
        
          <a href="/956333002/diff2/500001:520001/Source/platform/blink_platform_tests.gyp"
             title="Delta from patch set 23">23</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530025.diff"
             title="Download patch for Source/platform/blink_platform_tests.gyp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530026">
            Source/platform/scroll/ScrollableAreaTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/platform/scroll/ScrollableAreaTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/Source/platform/scroll/ScrollableAreaTest.cpp"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+78 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530026.diff"
             title="Download patch for Source/platform/scroll/ScrollableAreaTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530027">
            Source/web/tests/TextFinderTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/web/tests/TextFinderTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/280001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/web/tests/TextFinderTest.cpp"
             title="Delta from patch set 13">13</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -5 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530027.diff"
             title="Download patch for Source/web/tests/TextFinderTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530028">
            Source/wtf/CurrentTime.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/Source/wtf/CurrentTime.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/Source/wtf/CurrentTime.h"
             title="Delta from patch set 16">16</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530028.diff"
             title="Download patch for Source/wtf/CurrentTime.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530029">
            public/platform/Platform.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/public/platform/Platform.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/public/platform/Platform.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/public/platform/Platform.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/public/platform/Platform.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/public/platform/Platform.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/public/platform/Platform.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/public/platform/Platform.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/public/platform/Platform.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/public/platform/Platform.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/public/platform/Platform.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/public/platform/Platform.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/public/platform/Platform.h"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/public/platform/Platform.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/public/platform/Platform.h"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/public/platform/Platform.h"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/public/platform/Platform.h"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/public/platform/Platform.h"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/public/platform/Platform.h"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/public/platform/Platform.h"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/public/platform/Platform.h"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/public/platform/Platform.h"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+0 lines, -6 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530029.diff"
             title="Download patch for public/platform/Platform.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/956333002/patch/520001/530030">
            public/platform/WebScheduler.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/956333002/diff/520001/public/platform/WebScheduler.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/956333002/diff2/1:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/956333002/diff2/20001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/956333002/diff2/40001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 3">3</a>
        
          <a href="/956333002/diff2/60001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 4">4</a>
        
          <a href="/956333002/diff2/80001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 5">5</a>
        
          <a href="/956333002/diff2/100001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 6">6</a>
        
          <a href="/956333002/diff2/160001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 7">7</a>
        
          <a href="/956333002/diff2/200001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 8">8</a>
        
          <a href="/956333002/diff2/220001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 9">9</a>
        
          <a href="/956333002/diff2/240001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 10">10</a>
        
          <a href="/956333002/diff2/260001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 11">11</a>
        
          <a href="/956333002/diff2/280001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 12">12</a>
        
          <a href="/956333002/diff2/300001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 13">13</a>
        
          <a href="/956333002/diff2/320001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 14">14</a>
        
          <a href="/956333002/diff2/340001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 15">15</a>
        
          <a href="/956333002/diff2/360001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 16">16</a>
        
          <a href="/956333002/diff2/380001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 17">17</a>
        
          <a href="/956333002/diff2/400001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 18">18</a>
        
          <a href="/956333002/diff2/420001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 19">19</a>
        
          <a href="/956333002/diff2/440001:520001/public/platform/WebScheduler.h"
             title="Delta from patch set 20">20</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+10 lines, -2 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue956333002_520001_530030.diff"
             title="Download patch for public/platform/WebScheduler.h">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 520001;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 41 (15 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 41)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 41)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(41)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(41)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    "
           
           id="msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-02-27 17:44:00 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            ></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-02-27 17:44:01 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            ></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          skyostil@chromium.org changed reviewers: + skyostil@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-02-27 18:29:52 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            ><a href="mailto:skyostil@chromium.org">skyostil@chromium.org</a> changed reviewers:
+ <a href="mailto:skyostil@chromium.org">skyostil@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          https://codereview.chromium.org/956333002/diff/60001/Source/core/dom/ScriptRunnerTest.cpp File Source/core/dom/ScriptRunnerTest.cpp (right): https://codereview.chromium.org/956333002/diff/60001/Source/core/dom/ScriptRunnerTest.cpp#newcode90 Source/core/dom/ScriptRunnerTest.cpp:90: Scheduler::shutdown(); I wonder if we should have some testing ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-02-27 18:29:52 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            ><a href="https://codereview.chromium.org/956333002/diff/60001/Source/core/dom/ScriptRunnerTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/60001/Source/core/dom/ScriptRu...</a>
File Source/core/dom/ScriptRunnerTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/60001/Source/core/dom/ScriptRunnerTest.cpp#newcode90" rel="nofollow">https://codereview.chromium.org/956333002/diff/60001/Source/core/dom/ScriptRu...</a>
Source/core/dom/ScriptRunnerTest.cpp:90: Scheduler::shutdown();
I wonder if we should have some testing helper for temporarily replacing the
Platform? It&#39;s spectacularly easy to get this wrong.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          Patchset #7 (id:120001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 9 months ago
		(2015-03-19 11:34:50 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >Patchset #7 (id:120001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          skyostil@chromium.org changed reviewers: + rmcilroy@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-02 10:59:19 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            ><a href="mailto:skyostil@chromium.org">skyostil@chromium.org</a> changed reviewers:
+ <a href="mailto:rmcilroy@chromium.org">rmcilroy@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          If there&#39;s any way to split out killing the timer heap from implementing idle work ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-02 10:59:20 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            >If there&#39;s any way to split out killing the timer heap from implementing idle
work on the worker thread, let&#39;s do that since there are a lot of moving parts
here.

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.cpp#newcode237" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:237: class WorkerThreadWaitUntilIdleTask :
public WebThread::Task, public WebThread::IdleTask  {
Maybe &quot;wait until quiescence&quot; would be a better term since idle is very
overloaded here.

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.cpp#newcode338" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:338: dontStartIdleTaskYet();
endIdlePeriod() to match the chromium side terms?

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.h (right):

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.h#newcode135" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.h:135: void dontStartIdleTaskYet();
Should these be talking about the idle period instead of a task?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          I&#39;m not entirely sure how to land the Worker idle changes separately (they&#39;d have to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-08 15:43:35 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            >I&#39;m not entirely sure how to land the Worker idle changes separately (they&#39;d
have to go first since TimerBase refactor unavoidably affects the main thread
and workers).

I guess it might be possible to get the WorkerSharedTimer to somehow post tasks
onto the new WorkerScheduler.  Looking at the chromium implementation of
SharedTimer there seems to be one timer shared across all threads (that seems
somewhat odd), unless it turns out there&#39;s one BlinkPlatformImpl per thread.

If it turns out that there is a lot of (temporary) plumbing on the chromium side
to support splitting this up I&#39;d argue against doing so.

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.cpp#newcode237" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:237: class WorkerThreadWaitUntilIdleTask :
public WebThread::Task, public WebThread::IdleTask  {
On 2015/04/02 10:59:19, Sami wrote:
&gt; Maybe &quot;wait until quiescence&quot; would be a better term since idle is very
&gt; overloaded here.

Done.

<a href="https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/WorkerThread.cpp#newcode338" rel="nofollow">https://codereview.chromium.org/956333002/diff/160001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:338: dontStartIdleTaskYet();
On 2015/04/02 10:59:19, Sami wrote:
&gt; endIdlePeriod() to match the chromium side terms?

I&#39;m not really convinced those terms are helpful in blink.  They have well
defined meanings in chromium, but this business of not starting idle tasks is
pretty much a hack.  I&#39;d like to see it go away since IMO only the scheduler
should know anything about idle periods.

Besides, surely dontStartIdleTaskYet accurately describes what it&#39;s doing?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          Fair enough if there&#39;s no easy way to split this up. I&#39;ve added one suggestion ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-09 10:52:30 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            >Fair enough if there&#39;s no easy way to split this up. I&#39;ve added one suggestion
how to reduce the size anyway.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptRunnerTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptR...</a>
File Source/core/dom/ScriptRunnerTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptRunnerTest.cpp#newcode89" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptR...</a>
Source/core/dom/ScriptRunnerTest.cpp:89: Scheduler::shutdown();
Why is this change needed?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode236" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:236: // TODO(scheduler-dev): Ideally the
WorkerScheduler should determine Quiescence rather than doing it here.
nit: I think we should use real usernames for TODOs since I don&#39;t see anyone
else using aliases like this.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode340" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:340: maybeStartIdleTask();
This reads a little poorly (&quot;don&#39;t do idle ... oh wait I might have changed my
mind so maybe do it after all&quot;). Should we add something like
startPollingForQuietPeriod?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode508" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:508: // check every
|m_minQuietPeriodMsBeforeDoingIdleGc| if any tasks have been run.  If they
havent we can start doing idle GCs.
s/havent/haven&#39;t/

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode509" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:509: // NOTE we use the IdleTaskAfterWakeup
call to work out if something has run.  It&#39;s execution
nit: Its

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.h (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.h#newcode132" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.h:132: void
setMinQuietPeriodBeforeDoingIdleGcForTesting(long long
minQuietPeriodBeforeDoingIdleGc)
For better or worse, &quot;double seconds&quot; is the preferred monotonic time data type
in Blink. I&#39;m not sure why delays use long long but IMO that shouldn&#39;t be needed
here (feel free to keep in long long internally if you want). Also please make
the unit obvious in the function and parameter names.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.h#newcode148" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.h:148: void dontStartIdleTaskYet();
Okay, I think I agree that it&#39;s probably better not to talk about idle periods
here. However the naming could be a little more consistent since you don&#39;t
&quot;start&quot; tasks but either &quot;post&quot; or &quot;run&quot; them. How about
dontPostIdleTaskYet()/maybePostIdleTask(), or better yet:
dontStartIdleGcYet()/maybeStartIdleGc()/idleGc()?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThreadTest.cpp#newcode1" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:1: // Copyright 2015 The Chromium
Authors. All rights reserved.
If we want to make this patch smaller, landing this test scaffolding first is
one option.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThreadTest.cpp#newcode177" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:177:
EXPECT_CALL(*m_mockWorkerReportingProxy, workerGlobalScopeStarted(_)).Times(1);
Could these be moved to a helper setup function? They don&#39;t seem related to idle
gc.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadTimers.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadT...</a>
File Source/platform/ThreadTimers.cpp (left):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadTimers.cpp#oldcode103" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadT...</a>
Source/platform/ThreadTimers.cpp:103: TRACE_EVENT_SET_SAMPLING_STATE(&quot;blink&quot;,
&quot;BlinkInternal&quot;);
I assume this is for sampled trace events? Can we keep it working?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp</a>
File Source/platform/Timer.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp#newcode94" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:94: // Keep heap valid while changing the next-fire
time.
This comment looks out of date.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp#newcode107" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:107: // Currently only the main thread has a
scheduler, so we need to check which thread we are posting from.
Do we still need this distinction?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp#newcode137" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:137: ASSERT(false &amp;&amp; &quot;IMPLEMENT ME!&quot;);
Any thoughts on how to implement this? Is this used by the inspector or
something?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h</a>
File Source/platform/Timer.h (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h#newcode83" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h...</a>
Source/platform/Timer.h:83: // NOTE we can&#39;t use CancellableTaskFactory here,
because the destructor of
&quot;Some memory access&quot; sounds a little vague. IIRC one of the problems was that
CancellableTaskFactory will have a pointer to the PartitionAlloc heap, which
isn&#39;t there anymore after Blink shuts down. Is that the problem with the unit
tests too or was that something else?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
File Source/platform/scheduler/Scheduler.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.cpp#newcode92" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
Source/platform/scheduler/Scheduler.cpp:92: ASSERT(WTF::isMainThread());
The comment says this function can be called from any thread?

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
File Source/platform/scheduler/Scheduler.h (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.h#newcode51" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
Source/platform/scheduler/Scheduler.h:51: // For Blink Timer tasks, e.g.
DOMTimers,  Can only be called from the blink main thread.
nit: s/C/c/ or start a new sentence.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          Many of the comment no longer apply after moving the quiescence check to chromium. https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptRunnerTest.cpp ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-10 15:29:42 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            >Many of the comment no longer apply after moving the quiescence check to
chromium.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptRunnerTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptR...</a>
File Source/core/dom/ScriptRunnerTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptRunnerTest.cpp#newcode89" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/dom/ScriptR...</a>
Source/core/dom/ScriptRunnerTest.cpp:89: Scheduler::shutdown();
On 2015/04/09 10:52:29, Sami wrote:
&gt; Why is this change needed

I think this was due to some shutdown problems.  Fortunately this no longer
seems to be needed.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode236" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:236: // TODO(scheduler-dev): Ideally the
WorkerScheduler should determine Quiescence rather than doing it here.
On 2015/04/09 10:52:29, Sami wrote:
&gt; nit: I think we should use real usernames for TODOs since I don&#39;t see anyone
&gt; else using aliases like this.

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode340" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:340: maybeStartIdleTask();
On 2015/04/09 10:52:29, Sami wrote:
&gt; This reads a little poorly (&quot;don&#39;t do idle ... oh wait I might have changed my
&gt; mind so maybe do it after all&quot;). Should we add something like
&gt; startPollingForQuietPeriod?

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode508" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:508: // check every
|m_minQuietPeriodMsBeforeDoingIdleGc| if any tasks have been run.  If they
havent we can start doing idle GCs.
On 2015/04/09 10:52:29, Sami wrote:
&gt; s/havent/haven&#39;t/

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.cpp#newcode509" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:509: // NOTE we use the IdleTaskAfterWakeup
call to work out if something has run.  It&#39;s execution
On 2015/04/09 10:52:29, Sami wrote:
&gt; nit: Its

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.h (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.h#newcode132" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.h:132: void
setMinQuietPeriodBeforeDoingIdleGcForTesting(long long
minQuietPeriodBeforeDoingIdleGc)
On 2015/04/09 10:52:29, Sami wrote:
&gt; For better or worse, &quot;double seconds&quot; is the preferred monotonic time data
type
&gt; in Blink. I&#39;m not sure why delays use long long but IMO that shouldn&#39;t be
needed
&gt; here (feel free to keep in long long internally if you want). Also please make
&gt; the unit obvious in the function and parameter names.

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThread.h#newcode148" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.h:148: void dontStartIdleTaskYet();
On 2015/04/09 10:52:29, Sami wrote:
&gt; Okay, I think I agree that it&#39;s probably better not to talk about idle periods
&gt; here. However the naming could be a little more consistent since you don&#39;t
&gt; &quot;start&quot; tasks but either &quot;post&quot; or &quot;run&quot; them. How about
&gt; dontPostIdleTaskYet()/maybePostIdleTask(), or better yet:
&gt; dontStartIdleGcYet()/maybeStartIdleGc()/idleGc()?

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThreadTest.cpp#newcode1" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:1: // Copyright 2015 The Chromium
Authors. All rights reserved.
On 2015/04/09 10:52:29, Sami wrote:
&gt; If we want to make this patch smaller, landing this test scaffolding first is
&gt; one option.

Acknowledged.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/WorkerThreadTest.cpp#newcode177" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:177:
EXPECT_CALL(*m_mockWorkerReportingProxy, workerGlobalScopeStarted(_)).Times(1);
On 2015/04/09 10:52:29, Sami wrote:
&gt; Could these be moved to a helper setup function? They don&#39;t seem related to
idle
&gt; gc.

Done.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadTimers.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadT...</a>
File Source/platform/ThreadTimers.cpp (left):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadTimers.cpp#oldcode103" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/ThreadT...</a>
Source/platform/ThreadTimers.cpp:103: TRACE_EVENT_SET_SAMPLING_STATE(&quot;blink&quot;,
&quot;BlinkInternal&quot;);
On 2015/04/09 10:52:29, Sami wrote:
&gt; I assume this is for sampled trace events? Can we keep it working?

Done.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp</a>
File Source/platform/Timer.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.cpp#newcode137" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:137: ASSERT(false &amp;&amp; &quot;IMPLEMENT ME!&quot;);
On 2015/04/09 10:52:29, Sami wrote:
&gt; Any thoughts on how to implement this? Is this used by the inspector or
&gt; something?

The callsite for this has gone away, yay!

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h</a>
File Source/platform/Timer.h (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h#newcode83" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/Timer.h...</a>
Source/platform/Timer.h:83: // NOTE we can&#39;t use CancellableTaskFactory here,
because the destructor of
On 2015/04/09 10:52:29, Sami wrote:
&gt; &quot;Some memory access&quot; sounds a little vague. IIRC one of the problems was that
&gt; CancellableTaskFactory will have a pointer to the PartitionAlloc heap, which
&gt; isn&#39;t there anymore after Blink shuts down. Is that the problem with the unit
&gt; tests too or was that something else?

It was with the unit tests.  Clarified the comment slightly.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
File Source/platform/scheduler/Scheduler.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.cpp#newcode92" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
Source/platform/scheduler/Scheduler.cpp:92: ASSERT(WTF::isMainThread());
On 2015/04/09 10:52:30, Sami wrote:
&gt; The comment says this function can be called from any thread?

Good point, removing.

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
File Source/platform/scheduler/Scheduler.h (right):

<a href="https://codereview.chromium.org/956333002/diff/200001/Source/platform/scheduler/Scheduler.h#newcode51" rel="nofollow">https://codereview.chromium.org/956333002/diff/200001/Source/platform/schedul...</a>
Source/platform/scheduler/Scheduler.h:51: // For Blink Timer tasks, e.g.
DOMTimers,  Can only be called from the blink main thread.
On 2015/04/09 10:52:30, Sami wrote:
&gt; nit: s/C/c/ or start a new sentence.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>rmcilroy</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp File Source/core/workers/WorkerThread.cpp (left): https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp#oldcode515 Source/core/workers/WorkerThread.cpp:515: int64_t delay = kLongIdleHandlerDelayMs; I&#39;ve just realized that this ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-13 13:55:07 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-10"
            ><a href="https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (left):

<a href="https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp#oldcode515" rel="nofollow">https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:515: int64_t delay =
kLongIdleHandlerDelayMs;
I&#39;ve just realized that this was previously sending a 1s idle notification to
the GC. The V8 GC does some GC steps (e.g. compaction) only when the idle
notification is ~1s, so with the new approach we aren&#39;t going to get any
compaction on the worker which is bad.
I have an OKR for this Q2 which would allow us to do &quot;abortable&quot; compaction
which would avoid this need, however for now I think we are going to need to
keep some kind of long 1s GC tasks to enable webworkers to shrink their memory.

Maybe as a temporary measure we can use the 
CanExceedIdleDeadlineIfRequired in the idle task and send a 1s idle time if this
returns true.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp File Source/core/workers/WorkerThread.cpp (left): https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp#oldcode515 Source/core/workers/WorkerThread.cpp:515: int64_t delay = kLongIdleHandlerDelayMs; On 2015/04/13 13:55:07, rmcilroy wrote: ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-14 13:04:35 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-11"
            ><a href="https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (left):

<a href="https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/WorkerThread.cpp#oldcode515" rel="nofollow">https://codereview.chromium.org/956333002/diff/220001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:515: int64_t delay =
kLongIdleHandlerDelayMs;
On 2015/04/13 13:55:07, rmcilroy wrote:
&gt; I&#39;ve just realized that this was previously sending a 1s idle notification to
&gt; the GC. The V8 GC does some GC steps (e.g. compaction) only when the idle
&gt; notification is ~1s, so with the new approach we aren&#39;t going to get any
&gt; compaction on the worker which is bad.
&gt; I have an OKR for this Q2 which would allow us to do &quot;abortable&quot; compaction
&gt; which would avoid this need, however for now I think we are going to need to
&gt; keep some kind of long 1s GC tasks to enable webworkers to shrink their
memory.
&gt; 
&gt; Maybe as a temporary measure we can use the 
&gt; CanExceedIdleDeadlineIfRequired in the idle task and send a 1s idle time if
this
&gt; returns true.

OK I can do that, but I need to wire CanExceedIdleDeadlineIfRequired into
WebThread and add the plumbing in chromium.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          PTAL
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-15 15:15:39 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-12"
            >PTAL</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          Some minor comments. https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h File Source/core/workers/WorkerLoaderProxy.h (right): https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h#newcode88 Source/core/workers/WorkerLoaderProxy.h:88: protected: Could you add a comment ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-16 14:23:39 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-13"
            >Some minor comments.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerLoaderProxy.h (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h#newcode88" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerLoaderProxy.h:88: protected:
Could you add a comment saying this is for testing?

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThread.cpp#newcode301" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:301:
m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE, new
WorkerThreadIdleTask(this));
There&#39;s no way this can run after this thread object has been destroyed, right?

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThreadTest.cpp#newcode189" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:189: bool gcDone = false;
Should this be some kind of thread safe primitive instead, or at least volatile?
Ditto for the other tests.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThreadTest.cpp#newcode243" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:243: while (taskCount &lt; 10)
Is this thread safe?

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/TestingPlatformSupport.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Testing...</a>
File Source/platform/TestingPlatformSupport.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/TestingPlatformSupport.cpp#newcode70" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Testing...</a>
Source/platform/TestingPlatformSupport.cpp:70: fprintf(stderr,
&quot;TestingPlatformSupport\n&quot;);
Left in by mistake?

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp</a>
File Source/platform/Timer.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp#newcode126" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:126: // NOTE repeating timers drift, but it&#39;s
preserving the functionality of the old TimerHeap.
Should we link to crbug.com/328700 here or is this a different issue?

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp#newcode129" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:129: fired();
Is it worth having a trace event around this or is it obvious from a trace that
we&#39;re running a timer callback?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          PTAL https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h File Source/core/workers/WorkerLoaderProxy.h (right): https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h#newcode88 Source/core/workers/WorkerLoaderProxy.h:88: protected: On 2015/04/16 14:23:38, Sami wrote: &gt; Could ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-16 17:20:01 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-14"
            >PTAL

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerLoaderProxy.h (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerLoaderProxy.h#newcode88" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerLoaderProxy.h:88: protected:
On 2015/04/16 14:23:38, Sami wrote:
&gt; Could you add a comment saying this is for testing?

Done.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThread.cpp#newcode301" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:301:
m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE, new
WorkerThreadIdleTask(this));
On 2015/04/16 14:23:38, Sami wrote:
&gt; There&#39;s no way this can run after this thread object has been destroyed,
right?

I don&#39;t think so because when the thread goes away the SchedulerHelper gets
deleted which deletes the TQM and the queues get flushed.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThreadTest.cpp#newcode189" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:189: bool gcDone = false;
On 2015/04/16 14:23:38, Sami wrote:
&gt; Should this be some kind of thread safe primitive instead, or at least
volatile?
&gt; Ditto for the other tests.

I added some mutexes and a ThreadCondition

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/WorkerThreadTest.cpp#newcode243" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:243: while (taskCount &lt; 10)
On 2015/04/16 14:23:38, Sami wrote:
&gt; Is this thread safe?

Done.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/TestingPlatformSupport.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Testing...</a>
File Source/platform/TestingPlatformSupport.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/TestingPlatformSupport.cpp#newcode70" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Testing...</a>
Source/platform/TestingPlatformSupport.cpp:70: fprintf(stderr,
&quot;TestingPlatformSupport\n&quot;);
On 2015/04/16 14:23:38, Sami wrote:
&gt; Left in by mistake?

Done.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp</a>
File Source/platform/Timer.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp#newcode126" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:126: // NOTE repeating timers drift, but it&#39;s
preserving the functionality of the old TimerHeap.
On 2015/04/16 14:23:39, Sami wrote:
&gt; Should we link to crbug.com/328700 here or is this a different issue?

Yeah that may be related.

<a href="https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.cpp#newcode129" rel="nofollow">https://codereview.chromium.org/956333002/diff/260001/Source/platform/Timer.c...</a>
Source/platform/Timer.cpp:129: fired();
On 2015/04/16 14:23:39, Sami wrote:
&gt; Is it worth having a trace event around this or is it obvious from a trace
that
&gt; we&#39;re running a timer callback?

You can tell with out a trace event, but it would be easier if we add one here.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>rmcilroy</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          Loving all the red :). A couple of comments but looks good overall for the ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 12:59:33 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-15"
            >Loving all the red :). A couple of comments but looks good overall for the bits
I understand.

<a href="https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events...</a>
File
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html
(right):

<a href="https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html#newcode7" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events...</a>
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html:7:
window.onload = function() {
Could we make the layouttest changes in a seperate CL (I assume they work both
with and without these changes?).

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptLoader.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptL...</a>
File Source/core/dom/ScriptLoader.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptLoader.cpp#newcode325" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptL...</a>
Source/core/dom/ScriptLoader.cpp:325: fprintf(stderr,
&quot;ScriptLoader::executeScript\n&quot;);
leftover debugging?

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode301" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:301:
m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE, new
WorkerThreadIdleTask(this));
Can we just use WTF::Bind here to avoid having to create the
WorkerThreadIdleTask class?

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode465" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:465: gcDeadlineSeconds =
Platform::current()-&gt;monotonicallyIncreasingTime() + 1.0;
add back the kLongIdleHandlerDelay as a constant and use it here instead of the
literal &#39;1.0&#39;

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds))
nit - I would prefer this function is inlined - i.e.: 
  bool gcFinished = false;
  if (deadlineSeconds &gt; Platform::current()-&gt;monotonicallyIncreasingTime())
    gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);

  if (gcFinished) {
    ...

I think this is a bit cleaner (and is similar to how V8Initilizer does it. WDYT?

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h</a>
File Source/platform/Timer.h (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h#newcode82" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h...</a>
Source/platform/Timer.h:82: // CancellableTaskFactory::CancellableTask does some
memory access (causes various tests to crash on shtdown).
/s/shtdown/shutdown</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html File LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html (right): https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html#newcode7 LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html:7: window.onload = function() { On 2015/04/17 12:59:32, rmcilroy wrote: ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 13:37:08 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-16"
            ><a href="https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events...</a>
File
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html
(right):

<a href="https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html#newcode7" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events...</a>
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html:7:
window.onload = function() {
On 2015/04/17 12:59:32, rmcilroy wrote:
&gt; Could we make the layouttest changes in a seperate CL (I assume they work both
&gt; with and without these changes?).

Possibly.  I think that might depend on who does the owners review.

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptLoader.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptL...</a>
File Source/core/dom/ScriptLoader.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptLoader.cpp#newcode325" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/dom/ScriptL...</a>
Source/core/dom/ScriptLoader.cpp:325: fprintf(stderr,
&quot;ScriptLoader::executeScript\n&quot;);
On 2015/04/17 12:59:32, rmcilroy wrote:
&gt; leftover debugging?

Done.

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode301" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:301:
m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE, new
WorkerThreadIdleTask(this));
On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; Can we just use WTF::Bind here to avoid having to create the
&gt; WorkerThreadIdleTask class?

I wish I could but the type ereasure of WTF::bind for member function pointers
with parameters seems broken. I get errors like this if I try:

m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE,
WTF::bind(&amp;WorkerThread::idleTask, this));


../../third_party/WebKit/public/platform/WebScheduler.h:74:10: note: candidate
function not viable: no known conversion from &#39;PassOwnPtr&lt;Function&lt;typename
FunctionWrapper&lt;void (WorkerThread::*)(double)&gt;::ResultType ()&gt;&gt;&#39; to
&#39;PassOwnPtr&lt;Function&lt;void (double)&gt;&gt;&#39; for 2nd argument
    void postIdleTaskAfterWakeup(const WebTraceLocation&amp;, PassOwnPtr&lt;IdleTask&gt;);

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode465" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:465: gcDeadlineSeconds =
Platform::current()-&gt;monotonicallyIncreasingTime() + 1.0;
On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; add back the kLongIdleHandlerDelay as a constant and use it here instead of
the
&gt; literal &#39;1.0&#39;

Done.

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds))
On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; nit - I would prefer this function is inlined - i.e.: 
&gt;   bool gcFinished = false;
&gt;   if (deadlineSeconds &gt; Platform::current()-&gt;monotonicallyIncreasingTime())
&gt;     gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
&gt; 
&gt;   if (gcFinished) {
&gt;     ...
&gt; 
&gt; I think this is a bit cleaner (and is similar to how V8Initilizer does it.
WDYT?

I split the doIdleGc function off so I could test this.  Any idea how to test it
if I do what you suggest?

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h</a>
File Source/platform/Timer.h (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h#newcode82" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/platform/Timer.h...</a>
Source/platform/Timer.h:82: // CancellableTaskFactory::CancellableTask does some
memory access (causes various tests to crash on shtdown).
On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; /s/shtdown/shutdown

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-17">
                          Thanks Alex, lgtm. I&#39;ll let Ross okay the idle gc logic. https://codereview.chromium.org/956333002/diff/340001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html File LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html (right): ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 15:34:32 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-17"
            >Thanks Alex, lgtm. I&#39;ll let Ross okay the idle gc logic.

<a href="https://codereview.chromium.org/956333002/diff/340001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/LayoutTests/fast/events...</a>
File
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html
(right):

<a href="https://codereview.chromium.org/956333002/diff/340001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html#newcode2" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/LayoutTests/fast/events...</a>
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html:2:
// We need to wait until the iframe has finished loading before navigating or
These layout test tweaks could be landed separately to cut down on the moving
parts here.

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThread.cpp#newcode253" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:253: RawPtr&lt;WorkerThread&gt; m_thread;
// Not owned?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg19"
           name="18">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(18)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-18">
                          The CQ bit was checked by alexclarke@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:01:33 UTC)
                <a href="#msg19">#19</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-18"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-18"
            >The CQ bit was checked by <a href="mailto:alexclarke@chromium.org">alexclarke@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg20"
           name="19">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(19)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-19">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/956333002/340001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:02:32 UTC)
                <a href="#msg20">#20</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-19"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-19"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/956333002/340001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/956333002/340001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg21"
           name="20">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(20)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>rmcilroy</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-20">
                          WorkerThread and WorkerThreadTest lgtm. Thanks! https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html File LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html (right): https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html#newcode7 LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html:7: window.onload = function() { ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:33:22 UTC)
                <a href="#msg21">#21</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-20"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-20"
            >WorkerThread and WorkerThreadTest lgtm. Thanks!

<a href="https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events...</a>
File
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html
(right):

<a href="https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html#newcode7" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/LayoutTests/fast/events...</a>
LayoutTests/fast/events/resources/subframe-stop-load-in-unload-handler-using-document-write.html:7:
window.onload = function() {
On 2015/04/17 13:37:08, alexclarke1 wrote:
&gt; On 2015/04/17 12:59:32, rmcilroy wrote:
&gt; &gt; Could we make the layouttest changes in a seperate CL (I assume they work
both
&gt; &gt; with and without these changes?).
&gt; 
&gt; Possibly.  I think that might depend on who does the owners review.

I&#39;m not sure what you mean here. LayoutTest changes don&#39;t need OWNER&#39;s reviews
so you could land these changes independently of this change if it&#39;s possible (I
think this would make it clearer that the change shouldn&#39;t change behaviour well
written layouttests if it didn&#39;t modify any itself, but I don&#39;t really mind
either way).

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode301" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:301:
m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE, new
WorkerThreadIdleTask(this));
On 2015/04/17 13:37:08, alexclarke1 wrote:
&gt; On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; &gt; Can we just use WTF::Bind here to avoid having to create the
&gt; &gt; WorkerThreadIdleTask class?
&gt; 
&gt; I wish I could but the type ereasure of WTF::bind for member function pointers
&gt; with parameters seems broken. I get errors like this if I try:
&gt; 
&gt; m_webScheduler-&gt;postIdleTaskAfterWakeup(FROM_HERE,
&gt; WTF::bind(&amp;WorkerThread::idleTask, this));
&gt; 
&gt; 
&gt; ../../third_party/WebKit/public/platform/WebScheduler.h:74:10: note: candidate
&gt; function not viable: no known conversion from &#39;PassOwnPtr&lt;Function&lt;typename
&gt; FunctionWrapper&lt;void (WorkerThread::*)(double)&gt;::ResultType ()&gt;&gt;&#39; to
&gt; &#39;PassOwnPtr&lt;Function&lt;void (double)&gt;&gt;&#39; for 2nd argument
&gt;     void postIdleTaskAfterWakeup(const WebTraceLocation&amp;,
PassOwnPtr&lt;IdleTask&gt;);

Ahh sad. In that case this is fine.

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds))
On 2015/04/17 13:37:08, alexclarke1 wrote:
&gt; On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; &gt; nit - I would prefer this function is inlined - i.e.: 
&gt; &gt;   bool gcFinished = false;
&gt; &gt;   if (deadlineSeconds &gt; Platform::current()-&gt;monotonicallyIncreasingTime())
&gt; &gt;     gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
&gt; &gt; 
&gt; &gt;   if (gcFinished) {
&gt; &gt;     ...
&gt; &gt; 
&gt; &gt; I think this is a bit cleaner (and is similar to how V8Initilizer does it.
&gt; WDYT?
&gt; 
&gt; I split the doIdleGc function off so I could test this.  Any idea how to test
it
&gt; if I do what you suggest?

I missed you were using this in testing. In that case this is fine, but for
clarity let&#39;s change doIdleGc to:

  bool gcFinished = false;
  if (deadlineSeconds &gt; Platform::current()-&gt;monotonicallyIncreasingTime())
    gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
  return gcFinished;

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode221" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:221: , m_taskCount(taskCount)
Could we make the public constructor not take &#39;taskCount&#39; as an argument and add
a private constructor which does (it took me a while to work out why the test
below was passing &#39;0&#39; for this argument).

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode303" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:303: TEST_F(WorkerThreadTest,
ShortGcDeadline)
Could we add one more test which ensures that if there is a task which is
scheduled to run &lt;50ms after the start of the idle period that the idle deadline
is &lt;50ms (i.e., only the remaining time until the other task is scheduled to
run).

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode329" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:329: // The deadlin should be short if
there&#39;s a task that needs to run shortly after the idle period starts.
/s/deadlin/deadline</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg22"
           name="21">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(21)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-21">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:38:25 UTC)
                <a href="#msg22">#22</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-21"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-21"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg23"
           name="22">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(22)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-22">
                          Dry run: Try jobs failed on following builders: mac_blink_compile_dbg on tryserver.blink (JOB_FAILED, http://build.chromium.org/p/tryserver.blink/builders/mac_blink_compile_dbg/builds/42193)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:38:27 UTC)
                <a href="#msg23">#23</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-22"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-22"
            >Dry run: Try jobs failed on following builders:
  mac_blink_compile_dbg on tryserver.blink (JOB_FAILED,
<a href="http://build.chromium.org/p/tryserver.blink/builders/mac_blink_compile_dbg/builds/42193" rel="nofollow">http://build.chromium.org/p/tryserver.blink/builders/mac_blink_compile_dbg/bu...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg24"
           name="23">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(23)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-23">
                          The CQ bit was checked by alexclarke@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:47:58 UTC)
                <a href="#msg24">#24</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-23"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-23"
            >The CQ bit was checked by <a href="mailto:alexclarke@chromium.org">alexclarke@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg25"
           name="24">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(24)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-24">
                          The patchset sent to the CQ was uploaded after l-g-t-m from skyostil@chromium.org, rmcilroy@chromium.org Link to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:47:58 UTC)
                <a href="#msg25">#25</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-24"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-24"
            >The patchset sent to the CQ was uploaded after l-g-t-m from
<a href="mailto:skyostil@chromium.org">skyostil@chromium.org</a>, <a href="mailto:rmcilroy@chromium.org">rmcilroy@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/956333002/#ps360001" rel="nofollow">https://codereview.chromium.org/956333002/#ps360001</a>
(title: &quot;Fix compilation of TimerTest.cpp on gcc&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg26"
           name="25">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(25)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-25">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/956333002/360001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 16:48:10 UTC)
                <a href="#msg26">#26</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-25"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-25"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/956333002/360001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/956333002/360001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg27"
           name="26">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(26)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-26">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 17:32:42 UTC)
                <a href="#msg27">#27</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-26"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-26"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg28"
           name="27">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(27)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-27">
                          Dry run: Try jobs failed on following builders: mac_blink_compile_dbg on tryserver.blink (JOB_FAILED, http://build.chromium.org/p/tryserver.blink/builders/mac_blink_compile_dbg/builds/42198)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-17 17:32:45 UTC)
                <a href="#msg28">#28</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-27"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-27"
            >Dry run: Try jobs failed on following builders:
  mac_blink_compile_dbg on tryserver.blink (JOB_FAILED,
<a href="http://build.chromium.org/p/tryserver.blink/builders/mac_blink_compile_dbg/builds/42198" rel="nofollow">http://build.chromium.org/p/tryserver.blink/builders/mac_blink_compile_dbg/bu...</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg29"
           name="28">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(28)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-28">
                          The CQ bit was checked by alexclarke@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 09:48:34 UTC)
                <a href="#msg29">#29</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-28"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-28"
            >The CQ bit was checked by <a href="mailto:alexclarke@chromium.org">alexclarke@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg30"
           name="29">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(29)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-29">
                          The patchset sent to the CQ was uploaded after l-g-t-m from skyostil@chromium.org, rmcilroy@chromium.org Link to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 09:48:34 UTC)
                <a href="#msg30">#30</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-29"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-29"
            >The patchset sent to the CQ was uploaded after l-g-t-m from
<a href="mailto:skyostil@chromium.org">skyostil@chromium.org</a>, <a href="mailto:rmcilroy@chromium.org">rmcilroy@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/956333002/#ps380001" rel="nofollow">https://codereview.chromium.org/956333002/#ps380001</a>
(title: &quot;Fix componant build&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg31"
           name="30">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(30)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-30">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/956333002/380001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 09:49:22 UTC)
                <a href="#msg31">#31</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-30"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-30"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/956333002/380001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/956333002/380001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg32"
           name="31">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(31)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-31">
                          https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp File Source/core/workers/WorkerThread.cpp (right): https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467 Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds)) On 2015/04/17 16:33:22, rmcilroy wrote: &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 10:06:54 UTC)
                <a href="#msg32">#32</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-31"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-31"
            ><a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds))
On 2015/04/17 16:33:22, rmcilroy wrote:
&gt; On 2015/04/17 13:37:08, alexclarke1 wrote:
&gt; &gt; On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; &gt; &gt; nit - I would prefer this function is inlined - i.e.: 
&gt; &gt; &gt;   bool gcFinished = false;
&gt; &gt; &gt;   if (deadlineSeconds &gt;
Platform::current()-&gt;monotonicallyIncreasingTime())
&gt; &gt; &gt;     gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
&gt; &gt; &gt; 
&gt; &gt; &gt;   if (gcFinished) {
&gt; &gt; &gt;     ...
&gt; &gt; &gt; 
&gt; &gt; &gt; I think this is a bit cleaner (and is similar to how V8Initilizer does it.
&gt; &gt; WDYT?
&gt; &gt; 
&gt; &gt; I split the doIdleGc function off so I could test this.  Any idea how to
test
&gt; it
&gt; &gt; if I do what you suggest?
&gt; 
&gt; I missed you were using this in testing. In that case this is fine, but for
&gt; clarity let&#39;s change doIdleGc to:
&gt; 
&gt;   bool gcFinished = false;
&gt;   if (deadlineSeconds &gt; Platform::current()-&gt;monotonicallyIncreasingTime())
&gt;     gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
&gt;   return gcFinished;

OK although I may get asked to change it back since I got the impression that
blink style prefers early return where possible.

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThread.cpp#newcode253" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:253: RawPtr&lt;WorkerThread&gt; m_thread;
On 2015/04/17 15:34:31, Sami wrote:
&gt; // Not owned?

Done.

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode303" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:303: TEST_F(WorkerThreadTest,
ShortGcDeadline)
On 2015/04/17 16:33:22, rmcilroy wrote:
&gt; Could we add one more test which ensures that if there is a task which is
&gt; scheduled to run &lt;50ms after the start of the idle period that the idle
deadline
&gt; is &lt;50ms (i.e., only the remaining time until the other task is scheduled to
&gt; run).

Done but I realized this throws up an interesting issue: If there is a delayed
task scheduled for some time during the next idle period,
canExceedIdleDeadlineIfRequired returns true and we get a 1s gc deadline.  Is
this desirable?

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode329" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:329: // The deadlin should be short if
there&#39;s a task that needs to run shortly after the idle period starts.
On 2015/04/17 16:33:22, rmcilroy wrote:
&gt; /s/deadlin/deadline

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg33"
           name="32">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(32)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-32">
                          The CQ bit was checked by alexclarke@chromium.org to run a CQ dry run
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 15:56:58 UTC)
                <a href="#msg33">#33</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-32"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-32"
            >The CQ bit was checked by <a href="mailto:alexclarke@chromium.org">alexclarke@chromium.org</a> to run a CQ dry run</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg34"
           name="33">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(33)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-33">
                          The patchset sent to the CQ was uploaded after l-g-t-m from skyostil@chromium.org, rmcilroy@chromium.org Link to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 15:56:59 UTC)
                <a href="#msg34">#34</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-33"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-33"
            >The patchset sent to the CQ was uploaded after l-g-t-m from
<a href="mailto:skyostil@chromium.org">skyostil@chromium.org</a>, <a href="mailto:rmcilroy@chromium.org">rmcilroy@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/956333002/#ps440001" rel="nofollow">https://codereview.chromium.org/956333002/#ps440001</a>
(title: &quot;Fix ScrollableAreaTest on mac&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg35"
           name="34">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(34)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-34">
                          Dry run: CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/956333002/440001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 15:57:17 UTC)
                <a href="#msg35">#35</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-34"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-34"
            >Dry run: CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/956333002/440001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/956333002/440001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg36"
           name="35">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(35)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>rmcilroy</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-35">
                          https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp File Source/core/workers/WorkerThread.cpp (right): https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467 Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds)) On 2015/04/20 10:06:53, alexclarke1 wrote: &gt; On ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 20:56:50 UTC)
                <a href="#msg36">#36</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-35"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-35"
            ><a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThread.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/WorkerThread.cpp#newcode467" rel="nofollow">https://codereview.chromium.org/956333002/diff/320001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThread.cpp:467: if (doIdleGc(gcDeadlineSeconds))
On 2015/04/20 10:06:53, alexclarke1 wrote:
&gt; On 2015/04/17 16:33:22, rmcilroy wrote:
&gt; &gt; On 2015/04/17 13:37:08, alexclarke1 wrote:
&gt; &gt; &gt; On 2015/04/17 12:59:33, rmcilroy wrote:
&gt; &gt; &gt; &gt; nit - I would prefer this function is inlined - i.e.: 
&gt; &gt; &gt; &gt;   bool gcFinished = false;
&gt; &gt; &gt; &gt;   if (deadlineSeconds &gt;
&gt; Platform::current()-&gt;monotonicallyIncreasingTime())
&gt; &gt; &gt; &gt;     gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt;   if (gcFinished) {
&gt; &gt; &gt; &gt;     ...
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; I think this is a bit cleaner (and is similar to how V8Initilizer does
it.
&gt; &gt; &gt; WDYT?
&gt; &gt; &gt; 
&gt; &gt; &gt; I split the doIdleGc function off so I could test this.  Any idea how to
&gt; test
&gt; &gt; it
&gt; &gt; &gt; if I do what you suggest?
&gt; &gt; 
&gt; &gt; I missed you were using this in testing. In that case this is fine, but for
&gt; &gt; clarity let&#39;s change doIdleGc to:
&gt; &gt; 
&gt; &gt;   bool gcFinished = false;
&gt; &gt;   if (deadlineSeconds &gt; Platform::current()-&gt;monotonicallyIncreasingTime())
&gt; &gt;     gcFinished = isolate()-&gt;IdleNotificationDeadline(deadlineSeconds);
&gt; &gt;   return gcFinished;
&gt; 
&gt; OK 

Thanks!

&gt; although I may get asked to change it back since I got the impression that
&gt; blink style prefers early return where possible.

My interpretation of that rule is Blink style prefers early returns for &#39;early
outs&#39; (e.g., if (x==NULL) return), however this was an early return for the
expected case. I may be wrong in that interpretation though.

In any case I think this is much clearer since it makes clear what the return
value of idleNotification represents, which I don&#39;t think is clear otherwise.

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
File Source/core/workers/WorkerThreadTest.cpp (right):

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode221" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:221: , m_taskCount(taskCount)
On 2015/04/17 16:33:22, rmcilroy wrote:
&gt; Could we make the public constructor not take &#39;taskCount&#39; as an argument and
add
&gt; a private constructor which does (it took me a while to work out why the test
&gt; below was passing &#39;0&#39; for this argument).

Still to do?

<a href="https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/WorkerThreadTest.cpp#newcode303" rel="nofollow">https://codereview.chromium.org/956333002/diff/340001/Source/core/workers/Wor...</a>
Source/core/workers/WorkerThreadTest.cpp:303: TEST_F(WorkerThreadTest,
ShortGcDeadline)
On 2015/04/20 10:06:54, alexclarke1 wrote:
&gt; On 2015/04/17 16:33:22, rmcilroy wrote:
&gt; &gt; Could we add one more test which ensures that if there is a task which is
&gt; &gt; scheduled to run &lt;50ms after the start of the idle period that the idle
&gt; deadline
&gt; &gt; is &lt;50ms (i.e., only the remaining time until the other task is scheduled to
&gt; &gt; run).
&gt; 
&gt; Done but I realized this throws up an interesting issue: If there is a delayed
&gt; task scheduled for some time during the next idle period,
&gt; canExceedIdleDeadlineIfRequired returns true and we get a 1s gc deadline.  Is
&gt; this desirable?

CanExceedIdleDeadlineIfRequired should only return true if there is no pending
task scheduled within the next 50ms idle period (that&#39;s what&#39;s implementented by
the SchedulerHelper anyway).</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg37"
           name="36">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(36)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-36">
                          The CQ bit was unchecked by commit-bot@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 21:08:28 UTC)
                <a href="#msg37">#37</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-36"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-36"
            >The CQ bit was unchecked by <a href="mailto:commit-bot@chromium.org">commit-bot@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg38"
           name="37">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(37)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-37">
                          Dry run: Try jobs failed on following builders: mac_blink_rel on tryserver.blink (JOB_FAILED, http://build.chromium.org/p/tryserver.blink/builders/mac_blink_rel/builds/52592)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-20 21:08:30 UTC)
                <a href="#msg38">#38</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-37"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-37"
            >Dry run: Try jobs failed on following builders:
  mac_blink_rel on tryserver.blink (JOB_FAILED,
<a href="http://build.chromium.org/p/tryserver.blink/builders/mac_blink_rel/builds/52592" rel="nofollow">http://build.chromium.org/p/tryserver.blink/builders/mac_blink_rel/builds/52592</a>)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg39"
           name="38">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(38)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-38">
                          Patchset #7 (id:140001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-23 12:49:18 UTC)
                <a href="#msg39">#39</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-38"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-38"
            >Patchset #7 (id:140001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg40"
           name="39">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(39)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alex clarke (OOO till 29th)</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-39">
                          Patchset #8 (id:180001) has been deleted
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 8 months ago
		(2015-04-23 12:49:37 UTC)
                <a href="#msg40">#40</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-39"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-39"
            >Patchset #8 (id:180001) has been deleted</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg41"
           name="40">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(40)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Sami</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-40">
                          FYI, I moved this to https://codereview.chromium.org/1134523002.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 7 months ago
		(2015-05-07 15:57:27 UTC)
                <a href="#msg41">#41</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-40"
             >
          <div class="message-body">
            
            <pre name="cl-message-40"
            >FYI, I moved this to <a href="https://codereview.chromium.org/1134523002" rel="nofollow">https://codereview.chromium.org/1134523002</a>.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 41)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 41)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(41)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(41)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 41;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 956333002;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 956333002: Refactor TimeBase to post tasks.  Workers to use real Idle tasks.
     (Closed) </b><br/>
      Created 5 years, 10 months ago by alex clarke (OOO till 29th)<br/>
      Modified 5 years, 6 months ago<br/>
      Reviewers: Sami, rmcilroy<br/>
      Base URL: https://chromium.googlesource.com/chromium/blink.git@master<br/>
      Comments: 79
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
