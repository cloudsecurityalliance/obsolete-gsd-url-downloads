<!DOCTYPE html>
<html lang="en">
  <head>
    <title>960 &ndash; (CVE-2019-14553) server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/75609f26e54e89ee3ae27c8744d7baad.css?1532037811" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1532037772"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "960 – (CVE-2019-14553) server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot",
                             "show_bug.cgi?id=960" );
        document.title = "960 – (CVE-2019-14553) server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "960 – (CVE-2019-14553) server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1532039702"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="TianoCore TianoCore Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugzilla-tianocore-org
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_EDK2
                 bz_component_Code
                 bz_bug_960 yui-skin-sam">

  <div id="header"><div id="banner">
  </div>

    <div id="titles">
      <span id="title">TianoCore Bugzilla &ndash; Bug&nbsp;960</span>

        <span id="subtitle" class="subheader">server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot</span>

        <span id="information" class="header_addl_info">Last modified: 2019-11-04 06:36:52 EST</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=960&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=960" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
      <input type="checkbox" id="Bugzilla_remember_top" 
             name="Bugzilla_remember" value="on" class="bz_remember"
             >
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>


  <li id="forgot_container_top">
    <span class="separator">| </span>
    <a id="forgot_link_top" href="show_bug.cgi?id=960&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_top')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_top"
          class="mini_forgot bz_default_hidden">
      <label for="login_top">Login:</label>
      <input name="loginname" size="20" id="login_top" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_top" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_top" name="token"
             value="1635630784-pVYCdBS4WenwAICELZJ_oFqr6n0Qu875jefDgNnmoQY">
      <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
    </form>
  </li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2019-11-04 06:36:52">
  <input type="hidden" name="id" value="960">
  <input type="hidden" name="token" value="1635630785-VeJBD2QwqswRhSKEDNc3RqfKpj1R_Bg109ZDkbOf50g">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=960"><b>Bug&nbsp;960</b></a> <span id="summary_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2019-14553</span>)
      - <span id="short_desc_nonedit_display">server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span><span title="server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot">server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 ...
        </span>
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'server certificate with invalid domain name (CN) accepted in HTTPS-over-IPv6 boot' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>CVE-2019-14553
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >EDK2

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=EDK2"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Code

  (<a href="buglist.cgi?component=Code&amp;product=EDK2&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>
<td>Current
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">All
        All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>High
       normal
      </td>
    </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'unassigned\x40tianocore.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>


    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2018-05-29 10:22 EDT by <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2019-11-04 06:36 EST
      (<a href="show_activity.cgi?id=960">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>16 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="bret.barkelew">bret.barkelew</option>
                <option value="dannf">dannf</option>
                <option value="dwmw2">dwmw2</option>
                <option value="edk2+bugs+int+994+563148131503455288">edk2+bugs+int+994+563148131503455288</option>
                <option value="ericj">ericj</option>
                <option value="glin">glin</option>
                <option value="jian.j.wang">jian.j.wang</option>
                <option value="jiaxin.wu">jiaxin.wu</option>
                <option value="lersek">lersek</option>
                <option value="philmd">philmd</option>
                <option value="qin.long">qin.long</option>
                <option value="rocky.ni">rocky.ni</option>
                <option value="rschiron">rschiron</option>
                <option value="ryan.r.ware">ryan.r.ware</option>
                <option value="ting.ye">ting.ye</option>
                <option value="vincent.zimmer">vincent.zimmer</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 
<tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_industrystandardspecifications">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_industrystandardspecifications"
  >EDK II Code First industry standard specifications:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_industrystandardspecifications" >---

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_branch">


  <a 
      title="Which github repository?"
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_branch"
  >Branch URL:</a>

</th>
  <td class="field_value "
      id="field_container_cf_branch" >

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_release_observed">


  <a 
      title="Release(s) the issue is observed"
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_release_observed"
  >Release(s) the issue is observed:</a>

</th>
  <td class="field_value "
      id="field_container_cf_release_observed" >EDK II Master

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_target_os">


  <a 
      title="The operating system the target platform is running when the issue is observed. If the issue is observed before an OS is booted, then use default '---'. Provide the detailed OS version information in the Description."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_target_os"
  >The OS the target platform is running:</a>

</th>
  <td class="field_value "
      id="field_container_cf_target_os" >---

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_package">


  <a 
      title="A custom Multiple-Selection Box field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_package"
  >Package:</a>

</th>
  <td class="field_value "
      id="field_container_cf_package" >CryptoPkg, NetworkPkg

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_releases_to_fix">


  <a 
      title="Release(s) the issues must be fixed"
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_releases_to_fix"
  >Release(s) the issues must be fixed:</a>

</th>
  <td class="field_value "
      id="field_container_cf_releases_to_fix" >EDK II Master

</td>
    </tr>
    <tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_documents">


  <a 
      title="A custom Multiple-Selection Box field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_documents"
  >Tianocore documents:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_documents" >

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="2" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_zip bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=185"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Patches to support https hostname validation</span></b></a>

          <span class="bz_attach_extra_info">
              (7.89 KB,
                application/zip)

            <br>
            <a href="#attach_185"
               title="Go to the comment associated with the attachment">2018-07-17 03:02 EDT</a>,

            <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=185&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_application_x-zip-compressed bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=206"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Patches For HTTPS HostName Validation</span></b></a>

          <span class="bz_attach_extra_info">
              (7.73 KB,
                application/x-zip-compressed)

            <br>
            <a href="#attach_206"
               title="Go to the comment associated with the attachment">2018-08-19 23:46 EDT</a>,

            <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=206&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_application_x-zip-compressed bz_tr_obsolete bz_default_hidden">
        <td>
            <a href="attachment.cgi?id=208"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Patches For HTTPS HostName Validation (Included the comments from Laszlo)</span></b></a>

          <span class="bz_attach_extra_info">
              (8.41 KB,
                application/x-zip-compressed)

            <br>
            <a href="#attach_208"
               title="Go to the comment associated with the attachment">2018-08-21 23:00 EDT</a>,

            <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=208&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=422"
               title="View the content of the attachment">
          <b>test certificate generator script</b></a>

          <span class="bz_attach_extra_info">
              (4.64 KB,
                text/plain)

            <br>
            <a href="#attach_422"
               title="Go to the comment associated with the attachment">2019-10-26 00:58 EDT</a>,

            <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=422&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (3)
        </span>
        <a href="attachment.cgi?bugid=960&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=960&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1458056812" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-05-29 10:22:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hi,

* I created a new CA certificate, and a new website certificate (signed by
  the former). I set up dhcpd (IPv4) and Apache to serve HTTPSv4, using the
  website certificate. I also imported the CA certificate into OVMF, and the
  HTTPSv4 boot succeeded. The website is called (IP only, no DNS)
  &quot;192.168.124.2&quot;, and this is the Common Name in the website certificate
  too.

  As a part of verifying the environment, I tested the netboot file with
  &quot;curl -v -I&quot;, against the CA certificate, and &quot;curl&quot; accepts the website
  certificate:

<span class="quote">&gt; $ curl -I -v \
&gt;     <a href="https://192.168.124.2/RHEL-7.4-20170711.0-Server-x86_64-boot.iso">https://192.168.124.2/RHEL-7.4-20170711.0-Server-x86_64-boot.iso</a>
&gt; * About to connect() to 192.168.124.2 port 443 (#0)
&gt; *   Trying 192.168.124.2...
&gt; * Connected to 192.168.124.2 (192.168.124.2) port 443 (#0)
&gt; * Initializing NSS with certpath: sql:/etc/pki/nssdb
&gt; *   CAfile: /etc/pki/tls/certs/ca-bundle.crt
&gt;   CApath: none
&gt; * SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
&gt; * Server certificate:
&gt; *       subject: CN=192.168.124.2,OU=RHBZ 1536624,O=Laszlo Ersek Website,L=Budapest,ST=Budapest,C=HU
&gt; *       start date: May 29 10:10:23 2018 GMT
&gt; *       expire date: Jun 28 10:10:23 2018 GMT
&gt; *       common name: 192.168.124.2
&gt; *       issuer: <a href="mailto:E=lersek&#64;redhat.com">E=lersek&#64;redhat.com</a>,CN=Laszlo Ersek CA,OU=RHBZ 1536624,O=Laszlo Ersek,L=Budapest,ST=Budapest,C=HU
&gt; &gt; HEAD /RHEL-7.4-20170711.0-Server-x86_64-boot.iso HTTP/1.1
&gt; &gt; User-Agent: curl/7.29.0
&gt; &gt; Host: 192.168.124.2
&gt; &gt; Accept: */*
&gt; &gt;
&gt; &lt; HTTP/1.1 200 OK
&gt; &lt; Date: Tue, 29 May 2018 13:35:52 GMT
&gt; &lt; Server: Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips
&gt; &lt; Last-Modified: Tue, 11 Jul 2017 05:01:59 GMT
&gt; &lt; ETag: &quot;1c800000-5540399693fc0&quot;
&gt; &lt; Accept-Ranges: bytes
&gt; &lt; Content-Length: 478150656
&gt; &lt; Content-Type: application/octet-stream</span >

* As next step, I enabled IPv6. The IPv6 address of the same server (and the
  same network interface) is &quot;fd33:eb1b:9b36::2&quot;. I wrote the dhcpd6 (IPv6)
  configuration such that the bootfile URL returned to OVMF would point to
  this address.

  As a part of verifying the environment, I tested the netboot file with
  &quot;curl -v -I&quot; again. Using the IPv6 address to reach the server, &quot;curl&quot; now
  aborts the connection, because the website certificate from above is good
  for &quot;192.168.124.2&quot; only, and not for &quot;fd33:eb1b:9b36::2&quot;:

<span class="quote">&gt; $ curl --globoff -v -I \
&gt;     <a href="https://'[fd33:eb1b:9b36::2]'/RHEL-7.4-20170711.0-Server-x86_64-boot.iso">https://'[fd33:eb1b:9b36::2]'/RHEL-7.4-20170711.0-Server-x86_64-boot.iso</a>
&gt; * About to connect() to fd33:eb1b:9b36::2 port 443 (#0)
&gt; *   Trying fd33:eb1b:9b36::2...
&gt; * Connected to fd33:eb1b:9b36::2 (fd33:eb1b:9b36::2) port 443 (#0)
&gt; * Initializing NSS with certpath: sql:/etc/pki/nssdb
&gt; *   CAfile: /etc/pki/tls/certs/ca-bundle.crt
&gt;   CApath: none
&gt; * Server certificate:
&gt; *       subject: CN=192.168.124.2,OU=RHBZ 1536624,O=Laszlo Ersek Website,L=Budapest,ST=Budapest,C=HU
&gt; *       start date: May 29 10:10:23 2018 GMT
&gt; *       expire date: Jun 28 10:10:23 2018 GMT
&gt; *       common name: 192.168.124.2
&gt; *       issuer: <a href="mailto:E=lersek&#64;redhat.com">E=lersek&#64;redhat.com</a>,CN=Laszlo Ersek CA,OU=RHBZ 1536624,O=Laszlo Ersek,L=Budapest,ST=Budapest,C=HU
&gt; * NSS error -12276 (SSL_ERROR_BAD_CERT_DOMAIN)
&gt; * Unable to communicate securely with peer: requested domain name does not match the server's certificate.
&gt; * Closing connection 0</span >

  This is the correct HTTPSv6 client behavior, and the Apache configuration
  will have to be extended (with a new IPv6 virtual host stanza that has its
  own matching website certificate).

  However, the HTTPSv6 boot succeeds at this stage:

<span class="quote">&gt; &gt;&gt;Start HTTP Boot over IPv6....
&gt;   Station IPv6 address is FD33:EB1B:9B36:0:0:0:0:C8</span >
&gt;
<span class="quote">&gt;   URI: <a href="https://[fd33:eb1b:9b36::2]/RHEL-7.4-20170711.0-Server-x86_64-boot.iso">https://[fd33:eb1b:9b36::2]/RHEL-7.4-20170711.0-Server-x86_64-boot.iso</a>
&gt;   File Size: 478150656 Bytes
&gt;   Downloading...23%</span >

  This means that the website at fd33:eb1b:9b36::2 successfully impersonated
  the website at 192.168.124.2, for HTTPSv6 boot.


The edk2 wiki article at
&lt;<a href="https://github.com/tianocore/tianocore.github.io/wiki/HTTPS-Boot">https://github.com/tianocore/tianocore.github.io/wiki/HTTPS-Boot</a>&gt; says that
edk2 HTTPS implements one-way authentication, thus I believe the above is
not intended behavior.

The OpenSSL wiki has a relevant article at
&lt;<a href="https://wiki.openssl.org/index.php/Hostname_validation">https://wiki.openssl.org/index.php/Hostname_validation</a>&gt;. One important part
is setting &quot;SSL_VERIFY_PEER&quot; with SSL_set_verify(). Indeed,
&quot;NetworkPkg/HttpDxe/HttpsSupport.c&quot; sets EFI_TLS_VERIFY_PEER (value 1) by
default, and that equals SSL_VERIFY_PEER:

  TlsConfigureSession()  [NetworkPkg/HttpDxe/HttpsSupport.c]
    TlsSetSessionData()  [NetworkPkg/TlsDxe/TlsProtocol.c]
      TlsSetVerify()     [CryptoPkg/Library/TlsLib/TlsConfig.c]
        SSL_set_verify()

However, edk2 never calls either X509_VERIFY_PARAM_set1_host() or
SSL_set1_host(), which would be the other critical piece, according to the
OpenSSL wiki article.

CryptoPkg has an API called X509GetCommonName(), but we don't appear to use
that either, for this purpose.

Can someone please confirm? Thanks!</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-05-29 10:45:04 EDT
        </span>

      </div>




<pre class="bz_comment_text">(Small correction: &quot;same server&quot; -- yes, &quot;same network interface&quot; -- no. I used a separate network interface for IPv6. I don't think this correction makes any difference, but it's better to be precise.)</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Qin Long</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-05-30 04:54:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">Laszlo,

Yes, I think this is one left bug on EDKII TLS Stack.
We enabled the SSL_set_verify() with default SSL_VERIFY_PEER, but didn't set the expected hostname (by X509_VERIFY_PARAM_set1_host or SSL_set1_host) for validation. Then in fact, hostname checks are not performed on the peer certificate (which will be under potential Man-in-middle attack).

Will work with Jiaxin on this. This hostname validation may cover many opens: DNS wildcard support; DANE/DNSSEC consideration; CN/AltSubject in Cert, etc ...

And, thanks for raising this.


Best Regards &amp; Thanks,
LONG, Qin</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-06-07 23:28:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">Add my comments:

For UEFI client, we set the EFI_TLS_VERIFY_PEER is intended to verify the certificate *chain* so as to accomplish server certificate verification (One way authentication requirement). So, mapping to OpenSSL, it’s equivalent to set the SSL_VERIFY_PEER via SSL_set_verify(). Combining the implementation of OpenSSL, *hostname validation* is not part of the certificate *chain verification*. So, the peer name check is not performed during the chain verification. 

Talking to the hostname validation, I think it means the name within the certificate presented by the server should match the hostname in the URL used by the client. I agree it’s the necessary verfication so as to avoid the potential but limited Man-In-The-Middle attacks. OpenSSL also provides the interface for the caller to enable the peer name verification (SSL_set_hostflags / SSL_set1_host). But UEFI TLS doesn’t follow that. Unfortunately, there is no APIs for the user to set which hostname should be checked via UEFI TLS protocol. 

If we want to support hostname validation, looks the API changes are necessary. I will continue work with Qin to support that. 

Thanks,
Jiaxin</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vincent Zimmer</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-06-13 22:14:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">agree on issue.  ecr prepared to address api gap</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-05 12:00:08 EDT
        </span>

      </div>




<pre class="bz_comment_text">Vincent, Jiaxin, Qin -- does Intel plan to request a CVE number for this vulnerability? Thanks!</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-17 03:02:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=185" name="attach_185" title="Patches to support https hostname validation">attachment 185</a> <a href="attachment.cgi?id=185&amp;action=edit" title="Patches to support https hostname validation">[details]</a></span>
Patches to support https hostname validation

Hi Laszlo,

Can you help to review and verify the attached patches?

Thanks,
Jiaxin</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gary Lin</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-17 03:53:19 EDT
        </span>

      </div>




<pre class="bz_comment_text">The patches work for me.

After applying the patches, OVMF only accepts the server with the name in the certificate CN. If I set an arbitrary name in the certificate, I got the errors:

TlsDoHandshake SSL_HANDSHAKE_ERROR State=0x4 SSL_ERROR_SSL
TlsDoHandshake ERROR 0x1416F086=L14:F16F:R86</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-17 04:00:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">
Thanks the verification. 

ERROR code (0x1416F086=L14:F16F:R86) returned from TlsDoHandshake() is the expected result:

# define ERR_LIB_SSL             20
# define SSL_F_TLS_PROCESS_SERVER_CERTIFICATE             367
# define SSL_R_CERTIFICATE_VERIFY_FAILED                  134</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-17 16:35:49 EDT
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=185" name="attach_185" title="Patches to support https hostname validation">attachment 185</a> <a href="attachment.cgi?id=185&amp;action=edit" title="Patches to support https hostname validation">[details]</a></span>
Patches to support https hostname validation

Hi Jiaxin,

I just got back from PTO. I'll try to look at your patches soon, thank you for attaching them. For now I'll only fix the &quot;MIME Type&quot; and the &quot;patch&quot; metadata on the attachment -- the attachment is a ZIP archive, so &quot;MIME Type&quot; should be &quot;application/zip&quot; (not &quot;text/plain&quot;), plus &quot;patch&quot; should be unchecked. (If you tick &quot;patch&quot;, then Bugzilla will assume that the attachment is indeed a textual patch file, and it will offer an in-browser &quot;Diff view&quot;. That can't work for ZIP attachments.)

Thanks!
Laszlo</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-17 20:43:52 EDT
        </span>

      </div>




<pre class="bz_comment_text">Yes, you are right. Thanks the correction.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-18 05:19:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hi Jiaxin,

I applied the patches from <a href="show_bug.cgi?id=960#c6">comment 6</a> on top of f63a3e286765
(&quot;UefiCpuPkg/MpInitLib: Load uCode once for each core.&quot;, 2018-07-18).

(1) when applying the patches, git issued some warnings, due to trailing
whitespace:

<span class="quote">&gt; Applying: MdePkg/Include/Protocol/Tls.h: Add the data type of
&gt; EfiTlsVerifyHost
&gt; warning: 9 lines add whitespace errors.</span >
&gt;
<span class="quote">&gt; Applying: CryptoPkg/TlsLib: Add the library to check the specified host
&gt; name.
&gt; warning: 5 lines add whitespace errors.</span >
&gt;
<span class="quote">&gt; Applying: NetworkPkg/TlsDxe: Support host validation feature.
&gt; warning: 6 lines add whitespace errors.</span >
&gt;
<span class="quote">&gt; Applying: NetworkPkg/HttpDxe: Set the hostname for the verification.
&gt; warning: 1 line adds whitespace errors.</span >

If you look at the paches with &quot;git show --color&quot;, then the trailing
whitespace is displayed in red, so it's not hard to remove.

--*--

Before testing the patches, I tried to briefly review them.

(2) For patch #1:

The changes seem to match the related Mantis ticket (1921). However, I don't
understand why the comments &quot;Session Configuration&quot; and &quot;Session
information&quot; are removed. I thought that the reason for inserting
&quot;EfiTlsVerifyHost&quot; in the middle was exactly that we wanted to keep it under
&quot;Session Configuration&quot;, separate from &quot;Session information&quot;. If those
comments no longer make sense, then we could simply add &quot;EfiTlsVerifyHost&quot;
at the end, just before &quot;EfiTlsSessionDataTypeMaximum&quot;. And then
&quot;EfiTlsVerifyHost&quot; would automatically get the value 11, without manual
assignment.

(Note that, in patch #1, I mostly focused on the EFI_TLS_SESSION_DATA_TYPE
changes only, not the flags.)

(3) For patch #2:

(3a) First, I think we should compare the return value of SSL_set1_host()
explicitly against 0, for complying with the edk2 coding style.

(3b) Second, I couldn't figure out whether SSL_set1_host() creates an
internal deep-copy of the hostname that is passed to it. Can you confirm
that? The examples (both in the wiki, and in the SSL_set1_host() API
documentation) only use string literals for host names. We should avoid both
that SSL_set1_host() save just a pointer to storage that goes away soon
after, and that SSL_set1_host() create a deep copy of the hostname that is
leaked if e.g. the HTTPS boot fails and the TLS connection is closed.

Actually, this might be something we should clarify at the spec level. I
notice that Tls*Get*SessionData() doesn't yet get support for the new data
type (and that's OK); however, I think we should clarify whether the caller
is free to release the hostname after setting the new item.

(4) For patch #3:

(4a) First, the multi-line controlling expressions for the &quot;if&quot; statements
don't appear indented according to the edk2 coding style.

(4b) Second, after the This-&gt;GetSessionData() method, I think we shouldn't
*just* check that Status is fine, but we should also check that, on output,
&quot;VerifyMethodSize&quot; equals sizeof VerifyMethod. Because, GetSessionData()
does not return an error if the session datum is *smaller* than the buffer
provided by the caller. Just an idea anyway; you might consider this overly
cautious.

(5) For patch #4:

(5a) First, considering the high-level protocol usage in
TlsConfigureSession(), and the lifecycle of the hostname, I *think* the
patch should be fine. Basically we pass a reference to
&quot;HttpInstance-&gt;RemoteHost&quot; down to SSL_set1_host(). My understanding is that
the latter will create a deep copy (and release it when the TLS session is
torn down), while we release &quot;HttpInstance-&gt;RemoteHost&quot; ourselves. Is my
understanding correct?

(5b) Second, I believe we don't really have to add the &quot;VerifyHost&quot; field to
the TLS_CONFIG_DATA structure. In TlsConfigureSession(), we could just use a
temporary (local variable) EFI_TLS_VERIFY_HOST object. But, the way you
wrote it, is consistent with the rest of the code, so I guess it's OK.

(5c) Third, and most importantly, I don't understand the change in the
EfiHttpRequest() function. The intent seems to be stripping the '[' and ']'
characters around numeric IPv6 addresses, but why is that necessary?

And, if it really is necessary, I think it should be in a separate patch.

(5d) Furthermore, the change introduces a leak to the EfiHttpRequest()
function. If the AllocatePool() call fails, we jump to &quot;Error1&quot; with
(HostName==NULL) -- and then we will leak &quot;TempHostName&quot;.

In fact, for stripping the '[' and ']' characters, I suggest:

- A more careful format check -- in addition to the current check, verify
  explicitly if the string length is at least 2 (or, string *size* is at
  least 3), and that the last (non-NUL) character is ']',

- After the check, you can strip the brackets *without* additional memory
  allocation. CopyMem() is required to work between overlapping buffers
  (similarly to memmove()), so you can simply move the substring starting at
  offset 1 to the beginning of the string, and then NUL-terminate the string
  in-place so that the trailing ']' disappears. This way you can eliminate
  &quot;TempHostName&quot;.

- An optimization could be a new, OUT OPTIONAL parameter for the
  HttpUrlGetHostName() API in HttpLib, namely &quot;HostNameSize&quot;. This would
  save you the external AsciiStrSize() call(s). Of course, if you do this,
  it should be in a separate patch.

(I guess it would be better to discuss the patches on edk2-devel, after we
have good initial test results, and you post the patches for real -- I just
couldn't resist commenting on the code at once. But, Bugzilla is not a good
medium for patch reviews, so I agree that the review really belongs on the
list.)

--*--

I'll come back with test results for the current patch set in a later
comment.</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-18 05:49:27 EDT
        </span>

      </div>




<pre class="bz_comment_text">Regarding (5c) -- I think I got it now. In URL encoding, the IPv6 address is protected with [] so that the colons (&quot;:&quot;) are not mistaken for port number separators and such. But, in the Common Name field of the certificate, the IPv6 address is stored without the [] brackets. So, for comparison, we have to grab the hostname from the URL, and strip the brackets.

I still claim that this should be done in a separate patch -- the &quot;HttpInstance-&gt;RemoteHost&quot; field should not contain the brackets in its own right, regardless of TLS hostname verification. The brackets are not part of the (numeric) hostname, they are part of the URL encoding only, AIUI.</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-18 07:20:10 EDT
        </span>

      </div>




<pre class="bz_comment_text">I tested the patches in <a href="show_bug.cgi?id=960#c6">comment 6</a>, on top of commit f63a3e286765.

I first tested both HTTPSv4 and HTTPSv6 with valid certificates, and then
both with invalid certificates. For the invalid cert tests, I swapped the
certificates between each other, so that the cert issued for the numeric
IPv4 address would be returned by Apache on the IPv6 interface, and the cert
issued for the numeric IPv6 address would be returned by Apache on the IPv4
interface.

All four tests passed -- the valid certificate cases booted (both HTTPSv4
and HTTPSv6), and the invalid cert cases were rejected (both HTTPSv4 and
HTTPSv6). In the latter two cases, the error message was the same as
reported by Gary in <a href="show_bug.cgi?id=960#c7">comment 7</a>:

<span class="quote">&gt; TlsDoHandshake SSL_HANDSHAKE_ERROR State=0x4 SSL_ERROR_SSL
&gt; TlsDoHandshake ERROR 0x1416F086=L14:F16F:R86</span >

In addition, I confirmed that all four results were consistent with those
returned by &quot;curl -v -I&quot;.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-19 01:56:18 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Laszlo Ersek from <a href="show_bug.cgi?id=960#c11">comment #11</a>)
<span class="quote">&gt; Hi Jiaxin,
&gt; 
&gt; I applied the patches from <a href="show_bug.cgi?id=960#c6">comment 6</a> on top of f63a3e286765
&gt; (&quot;UefiCpuPkg/MpInitLib: Load uCode once for each core.&quot;, 2018-07-18).
&gt; 
&gt; (1) when applying the patches, git issued some warnings, due to trailing
&gt; whitespace:
&gt; 
&gt; &gt; Applying: MdePkg/Include/Protocol/Tls.h: Add the data type of
&gt; &gt; EfiTlsVerifyHost
&gt; &gt; warning: 9 lines add whitespace errors.
&gt; &gt;
&gt; &gt; Applying: CryptoPkg/TlsLib: Add the library to check the specified host
&gt; &gt; name.
&gt; &gt; warning: 5 lines add whitespace errors.
&gt; &gt;
&gt; &gt; Applying: NetworkPkg/TlsDxe: Support host validation feature.
&gt; &gt; warning: 6 lines add whitespace errors.
&gt; &gt;
&gt; &gt; Applying: NetworkPkg/HttpDxe: Set the hostname for the verification.
&gt; &gt; warning: 1 line adds whitespace errors.
&gt; 
&gt; If you look at the paches with &quot;git show --color&quot;, then the trailing
&gt; whitespace is displayed in red, so it's not hard to remove.
&gt; 
&gt; --*--</span >


Thanks, I will fix them within next version patches.


<span class="quote">&gt; 
&gt; Before testing the patches, I tried to briefly review them.
&gt; 
&gt; (2) For patch #1:
&gt; 
&gt; The changes seem to match the related Mantis ticket (1921). However, I don't
&gt; understand why the comments &quot;Session Configuration&quot; and &quot;Session
&gt; information&quot; are removed. I thought that the reason for inserting
&gt; &quot;EfiTlsVerifyHost&quot; in the middle was exactly that we wanted to keep it under
&gt; &quot;Session Configuration&quot;, separate from &quot;Session information&quot;. If those
&gt; comments no longer make sense, then we could simply add &quot;EfiTlsVerifyHost&quot;
&gt; at the end, just before &quot;EfiTlsSessionDataTypeMaximum&quot;. And then
&gt; &quot;EfiTlsVerifyHost&quot; would automatically get the value 11, without manual
&gt; assignment.
&gt; </span >


It was removed by mistake. In the latest version ECR, we keep &quot;EfiTlsVerifyHost&quot; in the middle of enum, so, I will add it back.  


<span class="quote">&gt; (Note that, in patch #1, I mostly focused on the EFI_TLS_SESSION_DATA_TYPE
&gt; changes only, not the flags.)
&gt; 
&gt; (3) For patch #2:
&gt; 
&gt; (3a) First, I think we should compare the return value of SSL_set1_host()
&gt; explicitly against 0, for complying with the edk2 coding style.
&gt; </span >


Agree.


<span class="quote">&gt; (3b) Second, I couldn't figure out whether SSL_set1_host() creates an
&gt; internal deep-copy of the hostname that is passed to it. Can you confirm
&gt; that? The examples (both in the wiki, and in the SSL_set1_host() API
&gt; documentation) only use string literals for host names. We should avoid both
&gt; that SSL_set1_host() save just a pointer to storage that goes away soon
&gt; after, and that SSL_set1_host() create a deep copy of the hostname that is
&gt; leaked if e.g. the HTTPS boot fails and the TLS connection is closed.
&gt; </span >


SSL_set1_host() invokes OPENSSL_strndup() to allocate its own maintained memory, it doesn't use the pointer directly. Besides, memory leak will not happen since it will be freed once we close the session (Already comfirmed).    


<span class="quote">&gt; Actually, this might be something we should clarify at the spec level. I
&gt; notice that Tls*Get*SessionData() doesn't yet get support for the new data
&gt; type (and that's OK); however, I think we should clarify whether the caller
&gt; is free to release the hostname after setting the new item.
&gt; </span >

For TlsGetSessionData(), I don't perform to support get the host info currently, so just return unsupported.

For the setting operation, all the data pointer from the API parameter will not be saved to openssl directly (Actually, it's not allowed). So, it's depend on the consumer whether need to free the data pass in. Usually, we need to clarify the additional free steps for the data out, not data in. 
 

<span class="quote">&gt; (4) For patch #3:
&gt; 
&gt; (4a) First, the multi-line controlling expressions for the &quot;if&quot; statements
&gt; don't appear indented according to the edk2 coding style.
&gt; </span >


Thanks the reminder.


<span class="quote">&gt; (4b) Second, after the This-&gt;GetSessionData() method, I think we shouldn't
&gt; *just* check that Status is fine, but we should also check that, on output,
&gt; &quot;VerifyMethodSize&quot; equals sizeof VerifyMethod. Because, GetSessionData()
&gt; does not return an error if the session datum is *smaller* than the buffer
&gt; provided by the caller. Just an idea anyway; you might consider this overly
&gt; cautious.
&gt; </span >


If EFI_SUCCESS returned from GetSessionData(), the data size must be equal to the sizeof data type. Spec also declares &quot;On output, it means the size of copied Data buffer if EFI_SUCCESS&quot;. So, I think just check that Status is fine.


<span class="quote">&gt; (5) For patch #4:
&gt; 
&gt; (5a) First, considering the high-level protocol usage in
&gt; TlsConfigureSession(), and the lifecycle of the hostname, I *think* the
&gt; patch should be fine. Basically we pass a reference to
&gt; &quot;HttpInstance-&gt;RemoteHost&quot; down to SSL_set1_host(). My understanding is that
&gt; the latter will create a deep copy (and release it when the TLS session is
&gt; torn down), while we release &quot;HttpInstance-&gt;RemoteHost&quot; ourselves. Is my
&gt; understanding correct?
&gt; </span >


Yes, correct.


<span class="quote">&gt; (5b) Second, I believe we don't really have to add the &quot;VerifyHost&quot; field to
&gt; the TLS_CONFIG_DATA structure. In TlsConfigureSession(), we could just use a
&gt; temporary (local variable) EFI_TLS_VERIFY_HOST object. But, the way you
&gt; wrote it, is consistent with the rest of the code, so I guess it's OK.
&gt; 
&gt; (5c) Third, and most importantly, I don't understand the change in the
&gt; EfiHttpRequest() function. The intent seems to be stripping the '[' and ']'
&gt; characters around numeric IPv6 addresses, but why is that necessary?
&gt; </span >


You have explained in <a href="show_bug.cgi?id=960#c12">Comment 12</a> :).


<span class="quote">&gt; And, if it really is necessary, I think it should be in a separate patch.</span >


Agree, will follow that.


<span class="quote">&gt; 
&gt; (5d) Furthermore, the change introduces a leak to the EfiHttpRequest()
&gt; function. If the AllocatePool() call fails, we jump to &quot;Error1&quot; with
&gt; (HostName==NULL) -- and then we will leak &quot;TempHostName&quot;.
&gt; </span >


Agree, thanks point that.


<span class="quote">&gt; In fact, for stripping the '[' and ']' characters, I suggest:
&gt; 
&gt; - A more careful format check -- in addition to the current check, verify
&gt;   explicitly if the string length is at least 2 (or, string *size* is at
&gt;   least 3), and that the last (non-NUL) character is ']',
&gt; 
&gt; - After the check, you can strip the brackets *without* additional memory
&gt;   allocation. CopyMem() is required to work between overlapping buffers
&gt;   (similarly to memmove()), so you can simply move the substring starting at
&gt;   offset 1 to the beginning of the string, and then NUL-terminate the string
&gt;   in-place so that the trailing ']' disappears. This way you can eliminate
&gt;   &quot;TempHostName&quot;.
&gt; </span >


Thanks the suggestion:).


<span class="quote">&gt; - An optimization could be a new, OUT OPTIONAL parameter for the
&gt;   HttpUrlGetHostName() API in HttpLib, namely &quot;HostNameSize&quot;. This would
&gt;   save you the external AsciiStrSize() call(s). Of course, if you do this,
&gt;   it should be in a separate patch.
&gt; </span >


I prefer to keep the current API definition since the change will bring the compatibility issue. 


<span class="quote">&gt; (I guess it would be better to discuss the patches on edk2-devel, after we
&gt; have good initial test results, and you post the patches for real -- I just
&gt; couldn't resist commenting on the code at once. But, Bugzilla is not a good
&gt; medium for patch reviews, so I agree that the review really belongs on the
&gt; list.)
&gt; </span >


For the security consideration, we *CAN NOT* discuss the patches on edk2-devel. Besides, the Spec is not published yet.


<span class="quote">&gt; --*--
&gt; 
&gt; I'll come back with test results for the current patch set in a later
&gt; comment.</span >



Thanks,
Jiaxin</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-07-19 06:33:06 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hi Jiaxin,

thanks for the responses, everything looks fine to me. Specifically,

(In reply to jiaxinwu from <a href="show_bug.cgi?id=960#c14">comment #14</a>)
<span class="quote">&gt; (In reply to Laszlo Ersek from <a href="show_bug.cgi?id=960#c11">comment #11</a>)</span >

<span class="quote">&gt; &gt; (4b) Second, after the This-&gt;GetSessionData() method, I think we shouldn't
&gt; &gt; *just* check that Status is fine, but we should also check that, on output,
&gt; &gt; &quot;VerifyMethodSize&quot; equals sizeof VerifyMethod. Because, GetSessionData()
&gt; &gt; does not return an error if the session datum is *smaller* than the buffer
&gt; &gt; provided by the caller. Just an idea anyway; you might consider this overly
&gt; &gt; cautious.
&gt; 
&gt; If EFI_SUCCESS returned from GetSessionData(), the data size must be equal
&gt; to the sizeof data type. Spec also declares &quot;On output, it means the size of
&gt; copied Data buffer if EFI_SUCCESS&quot;. So, I think just check that Status is
&gt; fine.</span >

the spec says, in general about the GetSessionData() interface,

  DataSize  Total size of session data. On input, it means the size of Data
            buffer. On output, it means the size of copied Data buffer if
            EFI_SUCCESS, and means the size of desired Data buffer if
            EFI_BUFFER_TOO_SMALL.

and in particular about (DataType == EfiTlsVerifyMethod),

  EfiTlsVerifyMethod  TLS session verify method. The corresponding Data is of
                      type EFI_TLS_VERIFY.

IOW, if GetSessionData() returns EFI_SUCCESS, then *in general* the output DataSize may be less than the input (available) DataSize, but it may not be less than the size of the *particular* data type that was requested with the DataType parameter.

So, this looks OK as well. Thanks!</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-19 23:46:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=206" name="attach_206" title="Patches For HTTPS HostName Validation">attachment 206</a> <a href="attachment.cgi?id=206&amp;action=edit" title="Patches For HTTPS HostName Validation">[details]</a></span>
Patches For HTTPS HostName Validation


Attach the new version patches according the feedbacks.</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-21 12:40:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">I compared the patches from <a href="show_bug.cgi?id=960#c16">comment 16</a> against those in <a href="show_bug.cgi?id=960#c6">comment 6</a>.

* For patches #1 and #2:

Acked-by: Laszlo Ersek &lt;<a href="mailto:lersek&#64;redhat.com">lersek&#64;redhat.com</a>&gt;

* For patch #3:

- The patch adds one LF line terminator. It should be a CRLF:

<span class="quote">&gt; diff --git a/NetworkPkg/TlsDxe/TlsProtocol.c b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; index ada7c493493b..e922ca5c54d7 100644
&gt; --- a/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; +++ b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; &#64;&#64; -181,7 +181,7 &#64;&#64; TlsSetSessionData (
&gt;      }</span >
&gt;
<span class="quote">&gt;      Status = This-&gt;GetSessionData (This, EfiTlsVerifyMethod, &amp;VerifyMethod, &amp;VerifyMethodSize);
&gt; -    if (EFI_ERROR (Status)) {
&gt; +    if (EFI_ERROR (Status)) {
&gt;        goto ON_EXIT;
&gt;      }</span >
&gt;

- An indentation is still not correct:

<span class="quote">&gt; diff --git a/NetworkPkg/TlsDxe/TlsProtocol.c b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; index ada7c493493b..b12442d47383 100644
&gt; --- a/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; +++ b/NetworkPkg/TlsDxe/TlsProtocol.c
&gt; &#64;&#64; -175,13 +175,13 &#64;&#64; TlsSetSessionData (</span >
&gt;
<span class="quote">&gt;      if ((TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_NO_WILDCARDS) != 0 &amp;&amp;
&gt;          ((TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_NO_PARTIAL_WILDCARDS) != 0 ||
&gt; -        (TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_MULTI_LABEL_WILDCARDS) != 0)) {
&gt; +         (TlsVerifyHost-&gt;Flags &amp; EFI_TLS_VERIFY_FLAG_MULTI_LABEL_WILDCARDS) != 0)) {
&gt;        Status = EFI_INVALID_PARAMETER;
&gt;        goto ON_EXIT;
&gt;      }</span >

With those fixed, for patch #3:

Acked-by: Laszlo Ersek &lt;<a href="mailto:lersek&#64;redhat.com">lersek&#64;redhat.com</a>&gt;

* For patch #4:

My remarks (5c) / (5d) -- see <a href="show_bug.cgi?id=960#c11">comment 11</a>, <a href="show_bug.cgi?id=960#c12">comment 12</a> -- have been addressed
meanwhile, separately in commit 7191827f90b4 (&quot;NetworkPkg/HttpDxe: Strip
square brackets in IPv6 expressed HostName.&quot;, 2018-08-03). Thus,

Acked-by: Laszlo Ersek &lt;<a href="mailto:lersek&#64;redhat.com">lersek&#64;redhat.com</a>&gt;

Thanks!</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-21 23:00:21 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=208" name="attach_208" title="Patches For HTTPS HostName Validation (Included the comments from Laszlo)">attachment 208</a> <a href="attachment.cgi?id=208&amp;action=edit" title="Patches For HTTPS HostName Validation (Included the comments from Laszlo)">[details]</a></span>
Patches For HTTPS HostName Validation (Included the comments from Laszlo)


Refined the patches according Laszlo's comments.

Appreciate Laszlo's carefully checking.

Thanks,
Jiaxin</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-22 04:11:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to jiaxinwu from <a href="show_bug.cgi?id=960#c18">comment #18</a>)
<span class="quote">&gt; Created <span class="bz_obsolete"><a href="attachment.cgi?id=208" name="attach_208" title="Patches For HTTPS HostName Validation (Included the comments from Laszlo)">attachment 208</a> <a href="attachment.cgi?id=208&amp;action=edit" title="Patches For HTTPS HostName Validation (Included the comments from Laszlo)">[details]</a></span>
&gt; Patches For HTTPS HostName Validation (Included the comments from Laszlo)
&gt; 
&gt; Refined the patches according Laszlo's comments.</span >

These look good to me, thank you!</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-22 05:03:11 EDT
        </span>

      </div>




<pre class="bz_comment_text">Jiaxin,

when do you plan to upstream these patches to edk2?

I realize that the spec changes (Mantis#1921) might need to go in first. Do
we have an ETA on that?

- The latest public spec release is &quot;2.7 Errata A&quot;.

- The final version of &quot;2.7 Errata B&quot; was uploaded, for USWG review, on
  2018-07-26 19:22:24 (in US West Coast time).

- So I don't think Mantis#1921 can be addressed in &quot;2.7 Errata B&quot;; instead,
  we might need &quot;2.7 Errata C&quot;. See also Vincent's comment
  &lt;<a href="https://mantis.uefi.org/mantis/view.php?id=1921#c5934">https://mantis.uefi.org/mantis/view.php?id=1921#c5934</a>&gt; on the Mantis
  ticket.

Do we really have to wait with the edk2 patches until &quot;Errata C&quot; are out?

--*--

Also, to repeat my question from <a href="show_bug.cgi?id=960#c5">comment 5</a> -- has a CVE number been
requested to track this issue? If not:

- why not?

- should I ask RH Product Security to request a CVE number?


Please allow us insight into your schedule for this issue. Thanks.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vincent Zimmer</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-22 21:25:47 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Laszlo Ersek from <a href="show_bug.cgi?id=960#c5">comment #5</a>)
<span class="quote">&gt; Vincent, Jiaxin, Qin -- does Intel plan to request a CVE number for this
&gt; vulnerability? Thanks!</span >

Intel will assign a CVE - TBD right now. 

Here's our CVSS grading.  

Severity
 
CVSS Base Score: 5.9

Access Vector (AV): Network

Access Complexity (AC): High

Confidentiality (C): High

Integrity (I): High

Availability (A): None

CVSS v3 Vector: 

AV:N/AC:H/PR:H/UI:N/S:U/C:H/I:H/A:N/E:F/RL:O/RC:C/CR:M/IR:M/AR:L/MAV:N/MAC:H/MPR:H/MUI:N/MS:U/MC:H/MI:H/MA:N</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">jiaxinwu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2018-08-22 21:52:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Laszlo Ersek from <a href="show_bug.cgi?id=960#c20">comment #20</a>)
<span class="quote">&gt; Jiaxin,
&gt; 
&gt; when do you plan to upstream these patches to edk2?
&gt; 
&gt; I realize that the spec changes (Mantis#1921) might need to go in first. Do
&gt; we have an ETA on that?
&gt; 
&gt; - The latest public spec release is &quot;2.7 Errata A&quot;.
&gt; 
&gt; - The final version of &quot;2.7 Errata B&quot; was uploaded, for USWG review, on
&gt;   2018-07-26 19:22:24 (in US West Coast time).
&gt; 
&gt; - So I don't think Mantis#1921 can be addressed in &quot;2.7 Errata B&quot;; instead,
&gt;   we might need &quot;2.7 Errata C&quot;. See also Vincent's comment
&gt;   &lt;<a href="https://mantis.uefi.org/mantis/view.php?id=1921#c5934">https://mantis.uefi.org/mantis/view.php?id=1921#c5934</a>&gt; on the Mantis
&gt;   ticket.
&gt; 
&gt; Do we really have to wait with the edk2 patches until &quot;Errata C&quot; are out?
&gt; </span >


To upstream these patches to edk2, we have to wait until the UEFI Spec ready. 
         

<span class="quote">&gt; --*--
&gt; 
&gt; Also, to repeat my question from <a href="show_bug.cgi?id=960#c5">comment 5</a> -- has a CVE number been
&gt; requested to track this issue? If not:
&gt; 
&gt; - why not?
&gt; 
&gt; - should I ask RH Product Security to request a CVE number?
&gt; </span >


Vincent gave the answer in <a href="show_bug.cgi?id=960#c21">comment 21</a>.


<span class="quote">&gt; 
&gt; Please allow us insight into your schedule for this issue. Thanks.</span ></pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-02-26 11:54:19 EST
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Vincent Zimmer from <a href="show_bug.cgi?id=960#c21">comment #21</a>)

<span class="quote">&gt; Intel will assign a CVE - TBD right now. </span >

This was six months ago. Please assign a CVE number to this BZ. Thanks.</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-03-07 12:17:27 EST
        </span>

      </div>




<pre class="bz_comment_text">Jiaxin, to repeat my question from <a href="show_bug.cgi?id=960#c20">comment 20</a> / August 2018, when is the UEFI spec v2.8 going to be released, with the spec fix? And when is the code going to be published? Will the code fix be part of edk2-stable201906? Thanks.</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-04-04 09:09:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">Hello Jiaxin, UEFI-2.8 has been published at &lt;<a href="https://uefi.org/specifications">https://uefi.org/specifications</a>&gt;. That effectively ends the embargo. Can we please open up this BZ to the public, and post the patches to the (new) mailing list? Thanks.</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-05-22 03:08:59 EDT
        </span>

      </div>




<pre class="bz_comment_text">Another month has passed, without any updates whatsoever.

Is the fix now targeted at edk2-stable201908?</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-05-22 03:13:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">(BTW it's been one week shy of a full year since I reported this bug: 2018-05-29.)</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wang, Jian J</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-13 16:13:39 EDT
        </span>

      </div>




<pre class="bz_comment_text">Sorry, missed the notification email. Let's end the embargo and disclosure the patch.</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Riccardo Schirone</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-14 05:18:55 EDT
        </span>

      </div>




<pre class="bz_comment_text">Could we have a CVE before disclosure for better tracking? Thanks.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wang, Jian J</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-14 17:35:20 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Riccardo Schirone from <a href="show_bug.cgi?id=960#c29">comment #29</a>)
<span class="quote">&gt; Could we have a CVE before disclosure for better tracking? Thanks.</span >

Of course. Working on it.</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Woodhouse</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-20 11:06:51 EDT
        </span>

      </div>




<pre class="bz_comment_text">In patch 2 in TlsSetVerifyHost() you unconditionally call SSL_set1_host(), which calls X509_VERIFY_PARAM_set1_host() on the underlying verify params.

For IP addresses you need X509_VERIFY_PARAM_set1_ip() (or ip_asc).

I'm not sure there's an SSL_set1_ip() function, or s-&gt;params is available now. You might need to install your own verify func on the SSL and then do it there, instead of using SSL_set1_host. After filing the bug upstream with OpenSSL, of course.

(Don't forget IPv6 addresses are in [] so you need to cope with that when checking if the &quot;hostname&quot; is really an IP literal).</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Woodhouse</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-20 11:17:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">Note: the callback you're after is the final argument to SSL_set_verify(), which you are calling from TlsSetVerify() with a NULL argument. You need to point it at your own function of type SSL_verify_cb which does the checking correctly.

For an example, see OpenConnect's ssl_app_verify_callback() at
<a href="http://git.infradead.org/users/dwmw2/openconnect.git/blob/HEAD:/openssl.c#l121">http://git.infradead.org/users/dwmw2/openconnect.git/blob/HEAD:/openssl.c#l121</a>
and match_cert_hostname() at
<a href="http://git.infradead.org/users/dwmw2/openconnect.git/blob/HEAD:/openssl.c#l1363">http://git.infradead.org/users/dwmw2/openconnect.git/blob/HEAD:/openssl.c#l1363</a></pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Woodhouse</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-20 16:49:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">See <a href="https://github.com/openssl/openssl/pull/9201">https://github.com/openssl/openssl/pull/9201</a></pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wang, Jian J</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-23 22:05:28 EDT
        </span>

      </div>




<pre class="bz_comment_text">(Comments from patch developer[Jiaxin])

I think from TLS part, there is no problem to call SSL_set1_host directly since TlsSetVerifyHost is to set the specified host name that need to be verified. In UEFI Spec 2.8, we intended to add one new data type named “EfiTlsVerifyHost” for the TLS protocol consumer to enable the *host name* check when needed.

Besides, it’s tolerant to set IP addresses in &quot;host name&quot; fields, there is a specific iPAddress alternative name format, designed to hold IPv4 or IPv6. See <a href="https://tools.ietf.org/html/rfc5280#section-4.2.1.6">https://tools.ietf.org/html/rfc5280#section-4.2.1.6</a>

So, I think there is no necessary for the patch to provide additional API to check the ip.</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Woodhouse</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-24 03:51:55 EDT
        </span>

      </div>




<pre class="bz_comment_text">
<span class="quote">&gt; Besides, it’s tolerant to set IP addresses in &quot;host name&quot; fields, </span >

No.

Empirically, and by code inspection, OpenSSL is not tolerant to IP addresses in the string you pass to SSL_set1_host().

If you meant anything else with the pronoun &quot;it&quot; in your sentence, then you were looking in the wrong place :)

<span class="quote">&gt; So, I think there is no necessary for the patch to provide additional API to 
&gt; check the ip.</span >

I find this response rather surprising, given that testing is failing and code inspection shows it would never have been expected to work.

Perhaps I'm missing something. Please demonstrate your own testing showing that URLs with IPv6 literals of the form <a href="https://[2001:8b0:10b:1236::1]/">https://[2001:8b0:10b:1236::1]/</a> are working and being validated correctly. Or even Legacy IP.</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Woodhouse</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-24 03:56:25 EDT
        </span>

      </div>




<pre class="bz_comment_text">
<span class="quote">&gt; So, I think there is no necessary for the patch to provide additional API to check the ip.</span >

Looking harder for a way I can interpret this which makes sense... if you mean we don't need an additional API on the UEFI side, and should just accept the IP literal in the existing TlsSetVerifyHost() function, then distinguish between hostname and IP literals for itself to call the correct OpenSSL APIs, then I agree.

I would have suggested that for OpenSSL too in my pull request, except that would have made it inconsistent with its own X509_VERIFY_PARAM_* functions which do force the user to distinguish between the two.</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-24 11:19:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Can we please open up this BZ to the public. From the thread at [*], the problem is public knowledge anyway, at this point. (Not to mention the UEFI 2.8 release in March/April 2019.)

[*] Re: [edk2-devel] reg: Multiple Host Name Certificate
    <a href="https://edk2.groups.io/g/devel/message/42591">https://edk2.groups.io/g/devel/message/42591</a>
    <a href="http://mid.mail-archive.com/B4DE137BDB63634BAC03BD9DE765F197028B255A3A&#64;VENUS1.in.megatrends.com">http://mid.mail-archive.com/B4DE137BDB63634BAC03BD9DE765F197028B255A3A&#64;VENUS1.in.megatrends.com</a>

Thanks.</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bret Barkelew</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-06-24 17:36:31 EDT
        </span>

      </div>




<pre class="bz_comment_text">Second the motion to open this bug up so that a fix can be collaborated on in the open. We have changes we would like to contribute.</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vincent Zimmer</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-07-01 17:17:22 EDT
        </span>

      </div>




<pre class="bz_comment_text">from the 6/27 infosec meeting
&quot;Support immediate un-embargo&quot;
960 - No objections to immediate un-embargo</pre>
    </div>

    <div id="c40" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bret Barkelew</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-07-01 17:36:12 EDT
        </span>

      </div>




<pre class="bz_comment_text">We have a PR currently up for Mu...
<a href="https://github.com/microsoft/mu_basecore/pull/31">https://github.com/microsoft/mu_basecore/pull/31</a>

We made one change to the hostname flags to support host matching functionality that is important to us. Happy to discuss an alternate API to allow platform specification.

We may have to make another change or two to support building on GCC. Evaluating CI build results now.</pre>
    </div>

    <div id="c41" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wang, Jian J</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-09-25 01:45:01 EDT
        </span>

      </div>




<pre class="bz_comment_text">CVE-2019-14553</pre>
    </div>

    <div id="c42" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-09-30 19:22:17 EDT
        </span>

      </div>




<pre class="bz_comment_text">[edk2-devel] [PATCH v1 0/4]
Support HTTPS HostName validation feature(CVE-2019-14553)

<a href="https://edk2.groups.io/g/devel/message/48183">https://edk2.groups.io/g/devel/message/48183</a>
<a href="http://mid.mail-archive.com/20190927034441.3096-1-Jiaxin.wu&#64;intel.com">http://mid.mail-archive.com/20190927034441.3096-1-Jiaxin.wu&#64;intel.com</a></pre>
    </div>

    <div id="c43" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-10-15 19:15:03 EDT
        </span>

      </div>




<pre class="bz_comment_text">Tried to edk2-ify David's suggestions, but they don't seem to work (in
my implementation anyway). See the failures in the Notes section of the
RFC patch:

  [edk2-devel [RFC v1 5/4]
  CryptoPkg/TlsLib: accept peer certs via both DNS names and IP addresses

  <a href="http://mid.mail-archive.com/20191015230839.27708-1-lersek&#64;redhat.com">http://mid.mail-archive.com/20191015230839.27708-1-lersek&#64;redhat.com</a>
  <a href="https://edk2.groups.io/g/devel/message/49034">https://edk2.groups.io/g/devel/message/49034</a>

(Discussion should continue on the list, I just like to capture postings
in the BZ too.)</pre>
    </div>

    <div id="c44" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-10-24 15:48:34 EDT
        </span>

      </div>




<pre class="bz_comment_text">Taking this bug per

<a href="http://mid.mail-archive.com/21320051-2364-803f-8b35-58c3f4323c15&#64;redhat.com">http://mid.mail-archive.com/21320051-2364-803f-8b35-58c3f4323c15&#64;redhat.com</a>
<a href="https://edk2.groups.io/g/devel/message/49435">https://edk2.groups.io/g/devel/message/49435</a></pre>
    </div>

    <div id="c45" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-10-26 00:58:07 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=422" name="attach_422" title="test certificate generator script">attachment 422</a> <a href="attachment.cgi?id=422&amp;action=edit" title="test certificate generator script">[details]</a></span>
test certificate generator script

I'm about to post v2 to the list. After an excruciating test session, I
have good test results. Before I post the series, I'll capture two
things here:

(1) A bash script that I wrote for generating test certificates. (See
the script, it has more comments.)

(2) Below, the test matrix, using the test certificates, and the v2
series (to be posted), applied on top of commit 6996ec88a244
(&quot;NetworkPkg: Add missing components to DSC file&quot;, 2019-10-24).

<span class="quote">&gt;| Server Certificate     URL                   cURL              edk2 unpatched    edk2 patched
&gt;| ---------------------  --------------------  ----------------  ----------------  ----------------
&gt;| Common      Subject    hostname    resolves  status  expected  status  expected  status  expected
&gt;| Name        Alt. Name              to IPvX
&gt;| -------------------------------------------------------------------------------------------------
&gt;| IP-literal  -          IP-literal  IPv4      accept  COMPAT/1  accept  NO/2      reject  yes
&gt;| IP-literal  -          IP-literal  IPv6      accept  COMPAT/1  accept  NO/2      reject  yes
&gt;| IP-literal  -          domainname  IPv4      reject  yes       accept  NO/2      reject  yes
&gt;| IP-literal  -          domainname  IPv6      reject  yes       accept  NO/2      reject  yes
&gt;| IP-literal  IP         IP-literal  IPv4      accept  yes       accept  yes       accept  yes
&gt;| IP-literal  IP         IP-literal  IPv6      accept  yes       accept  yes       accept  yes
&gt;| IP-literal  IP         domainname  IPv4      reject  yes       accept  NO/2      reject  yes
&gt;| IP-literal  IP         domainname  IPv6      reject  yes       accept  NO/2      reject  yes
&gt;| domainname  -          IP-literal  IPv4      reject  yes       accept  NO/2      reject  yes
&gt;| domainname  -          IP-literal  IPv6      reject  yes       accept  NO/2      reject  yes
&gt;| domainname  -          domainname  IPv4      accept  yes       accept  yes       accept  yes
&gt;| domainname  -          domainname  IPv6      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         IP-literal  IPv4      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         IP-literal  IPv6      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         domainname  IPv4      accept  yes       accept  yes       accept  yes
&gt;| domainname  IP         domainname  IPv6      accept  yes       accept  yes       accept  yes</span >

Remarks:

#1 -- should not be accepted: an IP literal in the URL must match the IP
address in the SAN, regardless of the Common Name; but cURL accepts it
for compatibility

#2 -- this is (or exemplifies) CVE-2019-14553


Another word on my test setup: I have 4 httpd setups (covering the 4
&quot;Server Certificate&quot; cases), and 2 dhcpd[6] setups (covering the two
&quot;URL hostname&quot; cases, for both IPv4 and IPv6). While working through the
&quot;cURL&quot; / &quot;edk2 unpatched&quot; / &quot;edk2 pached&quot; columns, I'd switch httpd and
dhcpd[6] between said sets of config files as necessary.</pre>
    </div>

    <div id="c46" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-10-26 01:39:36 EDT
        </span>

      </div>




<pre class="bz_comment_text">Posted

  [edk2-devel] [PATCH v2 0/8]
  support server identity validation in HTTPS Boot (CVE-2019-14553)

  <a href="http://mid.mail-archive.com/20191026053719.10453-1-lersek&#64;redhat.com">http://mid.mail-archive.com/20191026053719.10453-1-lersek&#64;redhat.com</a>
  <a href="https://edk2.groups.io/g/devel/message/49462">https://edk2.groups.io/g/devel/message/49462</a></pre>
    </div>

    <div id="c47" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-11-02 07:24:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Laszlo Ersek from <a href="show_bug.cgi?id=960#c46">comment #46</a>)
<span class="quote">&gt; Posted
&gt; 
&gt;   [edk2-devel] [PATCH v2 0/8]
&gt;   support server identity validation in HTTPS Boot (CVE-2019-14553)
&gt; 
&gt;   <a href="http://mid.mail-archive.com/20191026053719.10453-1-lersek&#64;redhat.com">http://mid.mail-archive.com/20191026053719.10453-1-lersek&#64;redhat.com</a>
&gt;   <a href="https://edk2.groups.io/g/devel/message/49462">https://edk2.groups.io/g/devel/message/49462</a></span >

Pushed as commit range b15646484eaf..e2fc50812895. Closing this BZ.</pre>
    </div>

    <div id="c48" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=960#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Laszlo Ersek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2019-11-04 06:36:52 EST
        </span>

      </div>




<pre class="bz_comment_text">(The mail-archive.com link doesn't seem to work, from <a href="show_bug.cgi?id=960#c46">comment 46</a>; here's another alternative link: &lt;<a href="https://www.redhat.com/archives/edk2-devel-archive/2019-October/msg01133.html">https://www.redhat.com/archives/edk2-devel-archive/2019-October/msg01133.html</a>&gt;.)</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=960">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=960">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=960">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=960&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=960" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
      <input type="checkbox" id="Bugzilla_remember_bottom" 
             name="Bugzilla_remember" value="on" class="bz_remember"
             >
      <label for="Bugzilla_remember_bottom">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>


  <li id="forgot_container_bottom">
    <span class="separator">| </span>
    <a id="forgot_link_bottom" href="show_bug.cgi?id=960&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_bottom')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_bottom"
          class="mini_forgot bz_default_hidden">
      <label for="login_bottom">Login:</label>
      <input name="loginname" size="20" id="login_bottom" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_bottom" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_bottom" name="token"
             value="1635630785-duE5CCafSTMfUfwKSF-ROBh-rFAYzMOVpKV0PATEsS0">
      <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
    </form>
  </li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>