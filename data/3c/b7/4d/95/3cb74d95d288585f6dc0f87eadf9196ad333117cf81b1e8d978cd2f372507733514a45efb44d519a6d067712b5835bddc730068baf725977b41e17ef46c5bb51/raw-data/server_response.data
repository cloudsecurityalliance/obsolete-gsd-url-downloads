<!DOCTYPE html>
<html lang="en">
  <head>
    <title>575688 &ndash; (CVE-2021-41033) Prevent downloading artifacts over unencrypted HTTP by default</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/03c4bb46b12126a79867f9a9f5323634.css?1593441374" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1593441374"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugs',
                maxusermatches: 10
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "575688 – (CVE-2021-41033) Prevent downloading artifacts over unencrypted HTTP by default",
                             "show_bug.cgi?id=575688" );
        document.title = "575688 – (CVE-2021-41033) Prevent downloading artifacts over unencrypted HTTP by default";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "575688 – (CVE-2021-41033) Prevent downloading artifacts over unencrypted HTTP by default", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1593441374"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body 
        class="bugs-eclipse-org-bugs
                 bz_bug
                 bz_status_NEW
                 bz_product_Equinox
                 bz_component_p2
                 bz_bug_575688 yui-skin-sam">

  <div id="header"><!-- 1.0@bugzilla.org -->





<!--  START OF SOLSTICE HEADER -->
 <link rel="stylesheet" type="text/css" href="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css" />
 <script src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>
 <style type="text/css">
    @import url('https://www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/barebone.min.css')
    </style>
    <script
      src="https://www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/barebone.min.js">
    </script><header role="banner" class="barebone-layout thin-header padding-top-5 padding-bottom-5"  id="header-wrapper">
  <div class="container-fluid reset">
    <div class="row-fluid" id="header-row">
            <div class="col-sm-8 col-md-6 col-lg-4" id="header-left">
        <div class="wrapper-logo-default"><a href="https://www.eclipse.org/"><img class="logo-eclipse-default img-responsive hidden-xs" alt="logo" src="/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png"/></a></div>
      </div>            <div class="col-sm-16 col-md-18 col-lg-20" id="main-menu-wrapper">
  <div class="navbar yamm" id="main-menu">
    <div id="navbar-collapse-1" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li class="visible-thin"><a href="https://www.eclipse.org/downloads/" target="_self">Download</a></li><li><a href="https://www.eclipse.org/users/" target="_self">Getting Started</a></li><li><a href="https://www.eclipse.org/membership/" target="_self">Members</a></li><li><a href="https://www.eclipse.org/projects/" target="_self">Projects</a></li>                  <li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Community <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Participate <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul></li><li class="dropdown visible-xs"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Working Groups <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul></li>          <!-- More -->
          <li class="dropdown eclipse-more hidden-xs">
            <a data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li>
                <!-- Content container to add padding -->
                <div class="yamm-content">
                  <div class="row">
                    <ul class="col-sm-8 list-unstyled"><li><p><strong>Community</strong></p></li><li><a href="http://marketplace.eclipse.org">Marketplace</a></li><li><a href="http://events.eclipse.org">Events</a></li><li><a href="http://www.planeteclipse.org/">Planet Eclipse</a></li><li><a href="https://www.eclipse.org/community/eclipse_newsletter/">Newsletter</a></li><li><a href="https://www.youtube.com/user/EclipseFdn">Videos</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Participate</strong></p></li><li><a href="https://bugs.eclipse.org/bugs/">Report a Bug</a></li><li><a href="https://www.eclipse.org/forums/">Forums</a></li><li><a href="https://www.eclipse.org/mail/">Mailing Lists</a></li><li><a href="https://wiki.eclipse.org/">Wiki</a></li><li><a href="https://wiki.eclipse.org/IRC">IRC</a></li><li><a href="https://www.eclipse.org/contribute/">How to Contribute</a></li></ul><ul class="col-sm-8 list-unstyled"><li><p><strong>Working Groups</strong></p></li><li><a href="http://wiki.eclipse.org/Auto_IWG">Automotive</a></li><li><a href="http://iot.eclipse.org">Internet of Things</a></li><li><a href="http://locationtech.org">LocationTech</a></li><li><a href="http://lts.eclipse.org">Long-Term Support</a></li><li><a href="http://polarsys.org">PolarSys</a></li><li><a href="http://science.eclipse.org">Science</a></li><li><a href="http://www.openmdm.org">OpenMDM</a></li></ul>                  </div>
                </div>
              </li>
            </ul>
          </li>
              </ul>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="wrapper-logo-mobile"><a class="navbar-brand visible-xs" href="https://www.eclipse.org/"><img class="logo-eclipse-default-mobile img-responsive" alt="logo" src="/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png"/></a></div>    </div>
  </div>
</div>
    </div>
  </div>
</header>
<!--  END OF SOLSTICE HEADER -->

    <div id="titles">
      <span id="title">Bugzilla &ndash; Bug&nbsp;575688</span>

        <span id="subtitle" class="subheader">Prevent downloading artifacts over unencrypted HTTP by default</span>

        <span id="information" class="header_addl_info">Last modified: 2021-10-07 09:00:01 EDT</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=575688&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=575688" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2021-10-07 09:00:01">
  <input type="hidden" name="id" value="575688">
  <input type="hidden" name="token" value="1635619068-Jb0CJWZJy1tIJRZBTVnVrqG-NqXbrISgb3hqREZux2A">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=575688"><b>Bug&nbsp;575688</b></a> <span id="summary_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2021-41033</span>)
      - <span id="short_desc_nonedit_display">Prevent downloading artifacts over unencrypted HTTP by default</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>Prevent downloading artifacts over unencrypted HTTP by default
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'Prevent downloading artifacts over unencrypted HTTP by default' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">NEW
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>CVE-2021-41033
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Equinox

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Eclipse Project

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Equinox"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >p2

  (<a href="buglist.cgi?component=p2&amp;product=Equinox&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>

      <td>unspecified &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">PC
        Windows 10
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P3
       normal<span id="votes_container">
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=575688#vote_575688">vote</a>)
  </span>
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th>
        <td>--- &#160; <a href="https://dev.eclipse.org/committers/bugs/bugz_manager.php"><img src="//dev.eclipse.org/small_icons/apps/accessories-text-editor.png" alt="Edit" title="Edit these values" /></a></td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">P2 Inbox</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=equinox.p2-inbox&#64;eclipse.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=equinox.p2-inbox&#64;eclipse.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">


  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#qa_contact"
  >QA Contact:</a>

</th>
      <td><span class="vcard">
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'equinox.p2-inbox\x40eclipse.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >security

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Emit warning (in log) when p2 is contacting a repo with unsafe (eg http) protocol"
   href="show_bug.cgi?id=576428">576428</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Emit warning (in log) when no or only unsafe checksum algorithms are used for an artifact"
   href="show_bug.cgi?id=576429">576429</a> 
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
<a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Build artifacts made available at the Eclipse Foundation are verifiably the ones built by respective projects."
   href="show_bug.cgi?id=575904">575904</a> 
  </td>
  </tr>

    <tr>
      <th>&nbsp;</th>

      <td id="show_dependency_tree_or_graph">
        Show dependency <a href="showdependencytree.cgi?id=575688&amp;hide_resolved=1">tree</a>

      </td>
    </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2021-08-28 20:13 EDT by <span class="vcard"><span class="fn">Some User</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2021-10-07 09:00 EDT
      (<a href="show_activity.cgi?id=575688">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>13 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="akurtakov">akurtakov</option>
                <option value="dave.nice">dave.nice</option>
                <option value="deep.amin">deep.amin</option>
                <option value="denis.roy">denis.roy</option>
                <option value="eclipse.tjw">eclipse.tjw</option>
                <option value="Ed.Merks">Ed.Merks</option>
                <option value="kitlo">kitlo</option>
                <option value="mircea.gherzan">mircea.gherzan</option>
                <option value="mistria">mistria</option>
                <option value="nutstree+eclipse">nutstree+eclipse</option>
                <option value="stepper">stepper</option>
                <option value="tjwatson">tjwatson</option>
                <option value="wayne.beaton">wayne.beaton</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ><ul class="bug_urls">
          <li><img src="//dev.eclipse.org/images/bugs-16x16.png"> <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Build artifacts made available at the Eclipse Foundation are verifiably the ones built by respective projects."
   href="show_bug.cgi?id=575904">575904</a>
          </li></ul>

</td>
    </tr> 

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="attachment.cgi?id=287207"
               title="View the content of the attachment">
          <b>A list fo repositories and their non-https absolute child URIs</b></a>

          <span class="bz_attach_extra_info">
              (346.93 KB,
                application/octet-stream)

            <br>
            <a href="#attach_287207"
               title="Go to the comment associated with the attachment">2021-09-24 09:25 EDT</a>,

            <span class="vcard"><span class="fn">Ed Merks</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Ed.Merks&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Ed.Merks&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
          </span>
        </td>

          <td class="bz_attach_flags">
              <i>no flags</i>
          </td>

        <td>
          <a href="attachment.cgi?id=287207&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="3">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=575688&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=575688&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=575688&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1463425338" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Some User</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-28 20:13:29 EDT
        </span>

      </div>




<pre class="bz_comment_text">I originally raised this for Tycho at <a href="https://github.com/eclipse/tycho/issues/248">https://github.com/eclipse/tycho/issues/248</a> and was asked by Mickael Istria to first ask here regarding this.

The main point is that downloading artifacts over unencrypted HTTP can allow man-in-the-middle attacks. Recent Maven releases have started blocking artifact downloads over unencrypted HTTP by default.
Please have a look at the above mentioned GitHub issue for more information.

What is your opinion on this?</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Merks</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Ed.Merks&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Ed.Merks&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-29 03:16:21 EDT
        </span>

      </div>




<pre class="bz_comment_text">People behind firewalls often have problems with https access failing...

Also, artifacts have checksums that would prevent successfully tampering the files themselves.</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-29 04:11:46 EDT
        </span>

      </div>




<pre class="bz_comment_text">
<span class="quote">&gt; Also, artifacts have checksums that would prevent successfully tampering the
&gt; files themselves.</span >

The checksums in metadata can be tamperws as well, and since usually metadata come from the same site as artifacts, checksums are not a reliable source of trust; and they basically never were meant to be used for security,but more to detect transfer issues.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Merks</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Ed.Merks&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Ed.Merks&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-29 04:19:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">The artifacts generally come from mirrors while the site information comes from the original site, e.g., download.eclipse.org. 

So whether https is used for the artifacts is somewhat orthogonal to whether https is used to access the metadata.

Are we concerned about site tampering as well?  Or just network tampering?  Because if the https access to download.eclipse.org is safe/secure, then the checksums are also safe/secure.  


After all, we use checksums for downloads such as this:

<a href="https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2021-06/R/eclipse-java-2021-06-R-win32-x86_64.zip">https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2021-06/R/eclipse-java-2021-06-R-win32-x86_64.zip</a>

Note that I'm just asking questions and making observations not saying what's right or wrong.

This bugzilla specifically mentions artifacts while I think the issue of security is broader than just the artifacts...

Also with signing, you can't really tamper signatures can you?</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-29 11:42:36 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Ed Merks from <a href="show_bug.cgi?id=575688#c3">comment #3</a>)
<span class="quote">&gt; The artifacts generally come from mirrors while the site information comes
&gt; from the original site, e.g., download.eclipse.org. </span >

I'm thinking about p2 repos in general, not about download.eclipse.org in particular. But if one tries to hack between download.eclipse.org and the user who tries to install (eg acts as a man in the middle that can modify output -thing that should be less possible with https than with http), then they can also tweak the metadata to disable mirrors.
Basically, someone who wants to build an attack over p2 installation (inject their own artifacts instead of using reference ones) would be more successful just hacking the metadata and directing p2 to alternative sites and artifacts. Metadata are probably the weakest point of the process.

<span class="quote">&gt; Are we concerned about site tampering as well?  Or just network tampering? 
&gt; Because if the https access to download.eclipse.org is safe/secure, then the
&gt; checksums are also safe/secure.</span >

I don't know about site tampering, but if we are concerned about network tampering then I think it's fair to make HTTP disbled by default as suggested by reported.

<span class="quote">&gt; After all, we use checksums for downloads such as this:
&gt; <a href="https://www.eclipse.org/downloads/download.php?file=/technology/epp/">https://www.eclipse.org/downloads/download.php?file=/technology/epp/</a>
&gt; downloads/release/2021-06/R/eclipse-java-2021-06-R-win32-x86_64.zip</span >

What makes that checksums can be seen as a security verification approach is that the checksum comes from a source that is supposed to be trusted by user (assuming user trust eclipse.org and https is enough to ensure data integrity).
It seems to me https plays an important role in ensuring we get correct checksums from the trusted site.
 
<span class="quote">&gt; This bugzilla specifically mentions artifacts while I think the issue of
&gt; security is broader than just the artifacts...</span >

I agree and as mentioned above, metadata is probably more important than artifacts, it's probably a wider issue of whether we should fetch any http content by default in p2.

<span class="quote">&gt; Also with signing, you can't really tamper signatures can you?</span >

One can tamper signatures, but they would then become invalid and the various checks in place would refuse to install the artifact with a wrong signature.
However, it's possible to change to another signature, and this signature would be from another signer, that could try to use a &quot;facade&quot; that makes it seem official (eg writing ECLIРSE -with a cyrillic Р character instead of latin P), but this concern is not specific to p2 or HTTPS.</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eike Stepper</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=stepper&#64;esc-net.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=stepper&#64;esc-net.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-29 12:52:05 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mickael Istria from <a href="show_bug.cgi?id=575688#c4">comment #4</a>)
<span class="quote">&gt; 
&gt; I'm thinking about p2 repos in general, not about download.eclipse.org in
&gt; particular. [...]</span >

<span class="quote">&gt; [...] but if we are concerned about network
&gt; tampering then I think it's fair to make HTTP disbled by default as
&gt; suggested by reporter.</span >

I'm a little bit confused about the motivation and the goal of this bug. 

Is it all about the particular services at eclipse.org and perhaps related mirrors? In that case you could perhaps say &quot;we are concerned (or not)&quot;. 

But if you speak about p2 as a deployable technology and perhaps other non-Eclipse.org deployments, how can we be concerned about something (such as https access) not being disabled or not being the default configuration? Wouldn't that all be the responsibility of the deployer?

Or am I completely misunderstanding the suggestion of the reporter?</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-30 05:30:14 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Eike Stepper from <a href="show_bug.cgi?id=575688#c5">comment #5</a>)
<span class="quote">&gt; Is it all about the particular services at eclipse.org and perhaps related
&gt; mirrors? In that case you could perhaps say &quot;we are concerned (or not)&quot;. </span >

No, the scope of this bug is p2 in general; and should we let p2 use HTTP by default if it's know to be vulnerable to man-in-the-middle attacks.

<span class="quote">&gt; But if you speak about p2 as a deployable technology and perhaps other
&gt; non-Eclipse.org deployments, how can we be concerned about something (such
&gt; as https access) not being disabled or not being the default configuration?
&gt; Wouldn't that all be the responsibility of the deployer?</span >

I think it's easy to always say &quot;that's the responsibility of the deployer&quot;, but in reality the underlying technology that does the installation (eg p2 or Maven) has a huge influence on how people will deploy.
If we start having p2 disabling HTTP by default, then we send a clear sign to all providers that they should move to HTTPs and thus p2 becomes a lever of increased security instead of just dropping the ball to someplace else.
See this interesting change from Maven: <a href="https://maven.apache.org/docs/3.8.1/release-notes.html#cve-2021-26291">https://maven.apache.org/docs/3.8.1/release-notes.html#cve-2021-26291</a> . This is what triggered the discussion here; p2 should probably have a similar CVE filed.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eike Stepper</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=stepper&#64;esc-net.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=stepper&#64;esc-net.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-30 05:55:43 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mickael Istria from <a href="show_bug.cgi?id=575688#c6">comment #6</a>)
<span class="quote">&gt; If we start having p2 disabling HTTP by default, then we send a clear sign
&gt; to all providers that they should move to HTTPs and thus p2 becomes a lever
&gt; of increased security instead of just dropping the ball to someplace else.</span >

So what about all folks that happily use p2 in http environments where such attacks aren't possible through other means, for example private and corporate networks? Would your clear sign make their services stop working?</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-30 06:00:06 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Eike Stepper from <a href="show_bug.cgi?id=575688#c7">comment #7</a>)
<span class="quote">&gt; So what about all folks that happily use p2 in http environments where such
&gt; attacks aren't possible through other means, for example private and
&gt; corporate networks? Would your clear sign make their services stop working?</span >

Good question. As far as I know, there wasn't too much negative feedback about Maven, which isn't too different. So I'm under the impression that although this can be an issue for some cases, requiring those cases to adapt might be less an issue than letting man-in-the-middle attack widely possible.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Some User</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-30 19:38:51 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Also, artifacts have checksums that would prevent successfully tampering the files themselves.</span >

To me it looks like at least for mirrors this metadata could be used to verify the integrity of downloads, that includes:
- Not downloading anything else (without checksums) from the mirror
- Requiring that every artifact listed in the original repository has checksum and file size information
- Not trusting insecure hash algorithms (?)

I am not very familiar with p2 (as well as Tycho), so it could be that they already behave this way.
Maybe trusting mirrors is also a different topic (and should be discussed in a separate issue?), but it was also one of the concerns I voiced on the GitHub issue.

<span class="quote">&gt;&gt; So what about all folks that happily use p2 in http environments where such
&gt;&gt; attacks aren't possible through other means, for example private and
&gt;&gt; corporate networks? Would your clear sign make their services stop working?</span >
&gt;
<span class="quote">&gt; Good question. As far as I know, there wasn't too much negative feedback about
&gt; Maven, which isn't too different.</span >

I am afraid the situation for Maven is a different one. For Maven you have Maven Central containing the majority of the artifacts. Additionally in the past the big Maven repositories have dropped unencrypted HTTP support (thanks to the effort of multiple security researchers), see <a href="https://blog.sonatype.com/central-repository-moving-to-https">https://blog.sonatype.com/central-repository-moving-to-https</a>. So most users of Maven had already switched to HTTPS before Maven now dropped support for it. Additionally the other aspect of the Maven vulnerability was that Maven uses repositories declared by dependencies. However, due to Maven's Repository Order logic (<a href="https://maven.apache.org/guides/mini/guide-multiple-repositories.html#repository-order">https://maven.apache.org/guides/mini/guide-multiple-repositories.html#repository-order</a>) in most (if not all cases) it would not have used the repositories declared by dependencies, because it already found the artifacts in Maven Central.
Another aspect for Maven is also that there is no &quot;auto-updater&quot;, so it is very likely that a lot of users are still using versions below 3.8.1. It might therefore be difficult to tell how many are actually affected by unencrypted HTTP being blocked by default.

For Tycho the situation is a different one:
- A large majority of code examples I saw (and even the ones inside the Tycho repository) are using unencrypted HTTP URLs, at least for the Eclipse p2 repositories.
- There is (from my understanding) no one big p2 repository like Maven Central, so most users of Tycho have declared a custom repository (and as above, the URL most likely uses HTTP).
- p2's support of mirrors (and maybe other features as well) define URLs inside the repository metadata. And even for the latest Eclipse repository some URLs (e.g. `p2.mirrorsURL`) still use HTTP.
- The Eclipse repositories (such as <a href="http://download.eclipse.org/releases/2021-06/">http://download.eclipse.org/releases/2021-06/</a>) don't upgrade HTTP to HTTPS when accessed from the browser. So when a user copies the URL (or edits an older download URL) they will keep using unencrypted HTTP unless they manually change it as well.

These were the reasons why I originally proposed (for Tycho) in the GitHub issue to automatically upgrade URLs to HTTPS (opt-out). This would at least address the main point of this issue which is the vulnerability against man-in-the-middle attacks. In the future it might then be a cleaner solution to block HTTP URLs instead (opt-out).
Though as raised by Mickael Istria on the GitHub issue, upgrading to HTTPS might lead to unexpected (or cryptic) failures in case the repository does not properly support HTTPS. So the tooling would have to handle such errors (but only when they occurred for the automatic HTTP -&gt; HTTPS upgrade) and wrap the exception in an exception with more useful message, explaining that an upgrade was attempted.

What do you think?</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-31 04:52:41 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Some User from <a href="show_bug.cgi?id=575688#c9">comment #9</a>)
<span class="quote">&gt; To me it looks like at least for mirrors this metadata could be used to
&gt; verify the integrity of downloads, that includes:
&gt; - Not downloading anything else (without checksums) from the mirror
&gt; - Requiring that every artifact listed in the original repository has
&gt; checksum and file size information
&gt; - Not trusting insecure hash algorithms (?)</span >

Those checksum &amp; size metadata are not mandatory, but in practice, they're always here in artifacts.xml file that are defined in a p2 repo. So yes, they are used to verify that the content we get from the site or a mirror does match what's expected by the metadata.
However, those metadata files can be accessed by HTTP so they're also the target of man-in-the-middle attack. In practice, someone who want to hack and installation would only need to replace the metadata files, from there, they can do basically whatever they want, like fetching from another URL or some other mirrors.
So it seems like we can assume that as long as metadata are immune to attacks and contain checksums+size, the whole installation is almost immune to attacks.

<span class="quote">&gt; Maybe trusting mirrors is also a different topic (and should be discussed in
&gt; a separate issue?), but it was also one of the concerns I voiced on the
&gt; GitHub issue.</span >

As discussed above, I think we can assume that in the mirrors can be trusted as the content we get from them is verified against checksum retrieved from the &quot;master&quot; site.

<span class="quote">&gt; I am afraid the situation for Maven is a different one. For Maven you have
&gt; Maven Central containing the majority of the artifacts.</span >

Same for p2: 1 main p2 repository ( <a href="https://download.eclipse.org/releases/latest/">https://download.eclipse.org/releases/latest/</a> ) and many other ones wherever else.

<span class="quote">&gt; Additionally in the
&gt; past the big Maven repositories have dropped unencrypted HTTP support</span >

Same for download.eclipse.org, and many other download servers, which has disabled HTTP support some time ago.

<span class="quote">&gt; Additionally the other aspect of the Maven vulnerability was that Maven
&gt; uses repositories declared by dependencies. However, due to Maven's
&gt; Repository Order logic
&gt; (<a href="https://maven.apache.org/guides/mini/guide-multiple-repositories">https://maven.apache.org/guides/mini/guide-multiple-repositories</a>.
&gt; html#repository-order) in most (if not all cases) it would not have used the
&gt; repositories declared by dependencies, because it already found the
&gt; artifacts in Maven Central.</span >

Headless p2 (used by eg. Tycho or CLI) doesn't inject extra repositories without user explicitly adding them.
With the UI, there is a &quot;Contact all software sites&quot; checkbox, which is usually turned on in order to allow resolving dependencies over other repositories. IIRC, the Eclipse IDE comes with 2 repositories enabled by default: latest EPP and latest Platform.

<span class="quote">&gt; For Tycho the situation is a different one:</span >

Tycho-specific issues are to be discussed on Tycho issue tracker. Let's keep them aside of this discussion which is focused on p2.

<span class="quote">&gt; - p2's support of mirrors (and maybe other features as well) define URLs
&gt; inside the repository metadata. And even for the latest Eclipse repository
&gt; some URLs (e.g. `p2.mirrorsURL`) still use HTTP.</span >

As discussed above, if we have checksums in the metadata and metadata are fetched with HTTPS, then it should be impossible to get an incorrect/corrupted/tampered artifact. All of people who have used Eclipse IDE &amp; p2 for a long time were actually hit at least once by an installation process that was failing because of some mirror serving wrong (out of date) content and artifact wasn't matching expected checksum.

<span class="quote">&gt; - The Eclipse repositories (such as
&gt; <a href="http://download.eclipse.org/releases/2021-06/">http://download.eclipse.org/releases/2021-06/</a>) don't upgrade HTTP to HTTPS
&gt; when accessed from the browser. So when a user copies the URL (or edits an
&gt; older download URL) they will keep using unencrypted HTTP unless they
&gt; manually change it as well.</span >

Can you please report it to the infra team for consideration? That would be at <a href="https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Community&amp;component=Servers">https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Community&amp;component=Servers</a></pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexander Kurtakov</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=akurtakov&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=akurtakov&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-31 05:11:29 EDT
        </span>

      </div>




<pre class="bz_comment_text">What about going the slow path here? I'm afraid that disabling http/upgrading to https will break way too much at once. So what about:
* add heavy warning about http usage for 2021-12 release
* disable http for 2022-03 with ability for users to enable it explicitly via some command line parameter (no UI for that as it's too much effort and will make users push for the change respective providers)
* remove the command line option for 2022-06 or 09</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-31 05:18:59 EDT
        </span>

      </div>




<pre class="bz_comment_text">Even slower, I think we could just do nothing in p2 in the end, and just focus on the infra forcing redirection from http to https.
We don't need to disable http fully, only the metadata needs to be protected (assuming they contain checksums).

<span class="quote">&gt; * add heavy warning about http usage for 2021-12 release</span >

+1, it would be nice to show such warning in the UI, with a worrying symbol like web browser are doing in the wizard when user enters an URI with http protocol; and with some log when http is used in order to fetch metadata.</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Some User</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-08-31 19:51:03 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; Those checksum &amp; size metadata are not mandatory, but in practice, they're 
&gt; always here in artifacts.xml file that are defined in a p2 repo.</span >

But that would require changes nonetheless to fail if an artifact is downloaded over HTTP or from a mirror, and no checksum information is available. If I see that correctly, the current behavior is to simply download the artifact without any checks.

<span class="quote">&gt;&gt; Additionally in the past the big Maven repositories have dropped unencrypted 
&gt;&gt; HTTP support
&gt; Same for download.eclipse.org, and many other download servers, which has 
&gt; disabled HTTP support some time ago.</span >

Has it really &quot;disabled&quot; HTTP support? At least from the browser I seem to be able to download <a href="http://download.eclipse.org/releases/latest/compositeArtifacts.jar">http://download.eclipse.org/releases/latest/compositeArtifacts.jar</a> (note the 'http:') just fine without any issues.
Maven has really _dropped_ HTTP support. When I try to access <a href="http://repo1.maven.org">http://repo1.maven.org</a> I get an HTTP 501, and therefore builds tools would fail.

<span class="quote">&gt; Headless p2 (used by eg. Tycho or CLI) doesn't inject extra repositories without user explicitly adding them.</span >

My point here was rather that, despite Maven offering the possibility for dependencies to declare custom repositories, in reality they would rarely or never be used by Maven for the dependency lookup. Whereas for p2 there seem to be multiple places within the metadata where URLs can specified. For the `mirrorsURL` it would indeed not be a problem (assuming that checksums are verified). But another example I noticed is <a href="https://download.eclipse.org/releases/oxygen/compositeArtifacts.jar">https://download.eclipse.org/releases/oxygen/compositeArtifacts.jar</a> which specifies an unecrypted HTTP URL. So for p2 there might be more places to look out for, and more situations where in reality URLs in the metadata are actually used, and can therefore not be changed manually to use HTTPS by the user of p2 / Tycho.

<span class="quote">&gt; Even slower, I think we could just do nothing in p2 in the end, and just focus on the infra forcing redirection from http to https.</span >

Is &quot;infra&quot; here referring to p2 components or the download.eclipse.org site? In case of the latter, then this would not really be effective:
1. Users might be using other repositories where unencrypted HTTP access is still supported
2. Having the server upgrade / redirect from HTTP to HTTPS adds no security. Unless the client enforces this upgrade, an attacker could easily make the client continue using HTTP or respond with an HTTP redirect to their own malicious repository using HTTPS.

<span class="quote">&gt; Can you please report it to the infra team for consideration? That would be at <a href="https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Community&amp;component=Servers">https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Community&amp;component=Servers</a></span >

Have created <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - download.eclipse.org/releases/ and download.eclipse.org/technology/ do not upgrade HTTP to HTTPS"
   href="show_bug.cgi?id=575731">https://bugs.eclipse.org/bugs/show_bug.cgi?id=575731</a> for that.

I have also found <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Use HTTPS for download.eclipse.org"
   href="show_bug.cgi?id=444350">https://bugs.eclipse.org/bugs/show_bug.cgi?id=444350</a> which overlaps in parts with the discussion we are having here.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eike Stepper</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=stepper&#64;esc-net.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=stepper&#64;esc-net.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-01 03:20:54 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mickael Istria from <a href="show_bug.cgi?id=575688#c12">comment #12</a>)
<span class="quote">&gt; I think we could just do nothing in p2 in the end, and just
&gt; focus on the infra forcing redirection from http to https.</span >

I agree and I appreciate your effort to make Eclipse.org an even safer place. Should this bugzilla moved out of p2's inbox then? What about Eclipse Foundation|Community|Infrastructure?</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-07 13:07:06 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mickael Istria from <a href="show_bug.cgi?id=575688#c12">comment #12</a>)
<span class="quote">&gt; I think we could just do nothing in p2 in the end, and just
&gt; focus on the infra forcing redirection from http to https.</span >

I've kind of changed my mind here (again) as I believe it's also important to drive towards more security. However, I don't think we need to enforce HTTPS for artifacts: as the discussion reveals if metadata are free from man-in-the-middle attacks (thanks to HTTPS) and artifacts have good checksums/size info, then it's fine to download with HTTP and compare the received file with what is in metadata and reject it if it doesn't match.

&#64;Eike: are you aware of concrete setups that would be broken by such a change? Are those worth avoiding a global security gain if they are given one option to allow http?</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eike Stepper</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=stepper&#64;esc-net.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=stepper&#64;esc-net.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-08 03:00:58 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Mickael Istria from <a href="show_bug.cgi?id=575688#c15">comment #15</a>)
<span class="quote">&gt; &#64;Eike: are you aware of concrete setups that would be broken by such a
&gt; change? Are those worth avoiding a global security gain if they are given
&gt; one option to allow http?</span >

I'm not sure what change you're proposing now. For all I know p2 is behaving already such that tampered artifacts can not be installed if the metadata can not be hacked. Whether metadata can be hacked (via http) or not (via https) is a decision of the metadata provider. If you want to give the end user more choice you can add a new option in p2 to disallow the use of metadata over http. But if you make that new option the new default you'll probably break someone. Is that your new proposal?</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-08 04:04:19 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Eike Stepper from <a href="show_bug.cgi?id=575688#c16">comment #16</a>)
<span class="quote">&gt; Whether metadata can be hacked (via http) or not (via
&gt; https) is a decision of the metadata provider.</span >

Yes, but since metadata do provide the essential part of ensuring we get the right artifacts (ie checksums), this is the critical point to protect against man-in-the-middle attacks. If metadata are safe (not hacked) and do contain checksums to verify artifact, then the overall installation is fine and that the retrieved artifacts do match expectation of the metadata provider.
My proposal would be that we move -progressively- towards disabling fetching metadta via http to encourage the metadata provider to move to the safer https and to protect end-users of the Eclipse IDE or most Eclipse RCP applications against such man-in-the-middle attacks when installing artifacts.
I'm not certain that as a technology that's about installing software, we should really consider that we need to consider the metadata provider decision to be hackable as a 1st class citizen; compared to p2's decision of preventing its millions of users against man-in-the-middle attacks.

<span class="quote">&gt; If you want to give the end
&gt; user more choice you can add a new option in p2 to disallow the use of
&gt; metadata over http.</span >

Yes, that would be 1 increment; this + a warning when using http.

<span class="quote">&gt; But if you make that new option the new default you'll
&gt; probably break someone.</span >

We're somehow already kind of breaking millions of users by making their p2 installations vulnarable to man-in-the-middle attacks.
IMO, the balance is on the side of more security rather than on the side of backward compatibility.
And even about backward compatibility, this was my previous question, are you concretely aware about 1 case where moving away from http to https would be a major issue? Do you happen to personally support one of them? Ie is your reluctance based on a current need you have, or more on a dogmatic (not to be read negatively) backward compatibility concern? As far as I see, most p2 repos that get provided in open-source (be it with download.eclipse.org, or bintray, or GitHub sites, or major Nexus instances...) are using https by default as the underlying server simply abandoned http; and it's been so for some time now; so I don't foresee such a restriction towards https for p2 metadata as a big concern, especially if we plan for it over 6 months and communicate about it early enough.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Some User</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-11 19:08:12 EDT
        </span>

      </div>




<pre class="bz_comment_text">I really like the direction in which this discussion is moving now; but as mentioned by <a href="show_bug.cgi?id=575688#c13">comment#13</a> there is metadata out there which uses HTTP URLs, such as composite repository metadata created for older Eclipse releases. Disabling unencrypted HTTP would prevent users from using these repositories at all, forcing them to allow all unencrypted HTTP usage. As mentioned before I would therefore suggest the following setting with the following values:
insecureHttpConnections:
  - block
    Completely blocks all unencrypted HTTP connections (potential exception might be mirrors, assuming that mirror usage always enforces checksums; currently not the case).
  - use-https / upgrade-to-https
    Always uses HTTPS for connections, even if URLs use HTTP. However, a warning should be logged in these cases, explaining that an HTTP URL was encountered and the connection will be upgraded. Connection errors need to be handled properly to indicate to the user that an HTTPS upgrade was attempted, but failed.
  - allow
    Same as the current behavior; vulnerable to man-in-the-middle attacks. For connections using unencrypted HTTP a warning should be logged. Additionally it would be good to log a warning at the start just for that fact that &quot;allow&quot; was chosen (even if no HTTP URLs are encountered).

Initially the default should become &quot;use-https&quot;, as pointed out by Mickael Istria the major repositories do support HTTPS so this would not be a breaking change, even for old metadata using HTTP URLs.
The next step in the future could be then to make &quot;block&quot; block; this will definitely guarantee then that maintainers become aware and ideally use HTTP URLs, protecting those who are using older or different libraries no enforcing usage of HTTPS yet. Users can still switch manually back to &quot;use-https&quot; if necessary.

Eventually you will probably need to talk about CVEs again, when a solution has been implemented. If Maven got one for nearly the same situation, p2 and dependent projects will need CVEs too. If done properly code scanning tools such as GitHub's Dependabot can then notice the vulnerable dependencies and help making sure that developers upgrade their dependencies or build tools (such as Tycho).</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Some User</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=some-eclipse-user-84964571335246229170&#64;vodafonemail.de" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-11 19:10:44 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; to make &quot;block&quot; block</span >

Sorry, meant

<span class="quote">&gt; to make &quot;block&quot; the default</span ></pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-13 03:01:53 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Some User from <a href="show_bug.cgi?id=575688#c18">comment #18</a>)
<span class="quote">&gt; Disabling unencrypted HTTP would prevent users from using these repositories
&gt; at all, forcing them to allow all unencrypted HTTP usage.</span >

I don't see it as an issue. The case of some people needing to enable HTTP because of some repos using HTTP is more an issue that has to become the responsibility of the user (enabling http) and/or of the provider p2 repo (enabling https). I don't think p2 has to try to be smart here, since the final goal is to make most p2 repo provider stop using http at all.

<span class="quote">&gt; As mentioned
&gt; before I would therefore suggest the following setting with the following
&gt; values:
&gt; insecureHttpConnections:
&gt;   - block [...]
&gt;   - use-https / upgrade-to-https [...]
&gt;   - allow [...]</span >

IMO, only block and allow are enough.
 
<span class="quote">&gt; Eventually you will probably need to talk about CVEs again, when a solution
&gt; has been implemented. If Maven got one for nearly the same situation, p2 and
&gt; dependent projects will need CVEs too. If done properly code scanning tools
&gt; such as GitHub's Dependabot can then notice the vulnerable dependencies and
&gt; help making sure that developers upgrade their dependencies or build tools
&gt; (such as Tycho).</span >

Right, that makes sense.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mickael Istria</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=mistria&#64;redhat.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=mistria&#64;redhat.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-13 03:16:42 EDT
        </span>

      </div>




<pre class="bz_comment_text">I opened <a href="https://gitlab.eclipse.org/eclipsefdn/emo-team/emo/-/issues/97">https://gitlab.eclipse.org/eclipsefdn/emo-team/emo/-/issues/97</a> to start formalizing the CVE report. Note that I'm not experienced at all with CVEs, so I basically won't ba able to take care of it without guidance and assistance.

In the best case, this becomes a CVE and the CVE is interpreted as severe enough to allow direct action such as disabling HTTP fully by default in p2; and just have some option (eg a system property) to re-enable it.</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Merks</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Ed.Merks&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Ed.Merks&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-13 11:10:40 EDT
        </span>

      </div>




<pre class="bz_comment_text">I think the title doesn't really reflect the problem... I think the proposal is to focus on secure access to the metadata which is completely different from what the title suggests.

<span class="quote">&gt; (In reply to Mickael Istria from <a href="show_bug.cgi?id=575688#c20">comment #20</a>)
&gt; (In reply to Some User from <a href="show_bug.cgi?id=575688#c18">comment #18</a>)
&gt; &gt; Disabling unencrypted HTTP would prevent users from using these repositories
&gt; &gt; at all, forcing them to allow all unencrypted HTTP usage.
&gt; 
&gt; I don't see it as an issue. The case of some people needing to enable HTTP
&gt; because of some repos using HTTP is more an issue that has to become the
&gt; responsibility of the user (enabling http) and/or of the provider p2 repo
&gt; (enabling https). I don't think p2 has to try to be smart here, since the
&gt; final goal is to make most p2 repo provider stop using http at all.
&gt; </span >

I'm concerned that a large number of marketplace listings will be broken and even repositories at Eclipse will be broken.  I can gather data to back that concern up with facts after I'm back from traveling...

The problem as I see it is that the user is not in a good position to fix composite sites or site references.  They must rely on someone else to fix them and those who need to fix the sites may well be quite unresponsive leaving the user with a bad impression of Eclipse.  Yes we can tell them it's for their safety and comfort but it seems me could make it more comfortable without making it less safe. I.e., why not just upgrade to https automatically so that things just continue to work except when the site host itself does no support https?  That seems less likely to cause problems than simply blocking access and then requiring the site itself to be fixed...


<span class="quote">&gt; &gt; As mentioned
&gt; &gt; before I would therefore suggest the following setting with the following
&gt; &gt; values:
&gt; &gt; insecureHttpConnections:
&gt; &gt;   - block [...]
&gt; &gt;   - use-https / upgrade-to-https [...]
&gt; &gt;   - allow [...]
&gt; 
&gt; IMO, only block and allow are enough.
&gt;  </span >

If you can only provide two options for whatever reason, redirect or allow seems also sufficient to address the problem.</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wayne Beaton</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=wayne.beaton&#64;eclipse-foundation.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=wayne.beaton&#64;eclipse-foundation.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-13 16:54:15 EDT
        </span>

      </div>




<pre class="bz_comment_text">I've assigned CVE-2021-41033 and have reported this as vulnerability against Eclipse Equinox.</pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Merks</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Ed.Merks&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Ed.Merks&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-24 09:25:02 EDT
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=287207" name="attach_287207" title="A list fo repositories and their non-https absolute child URIs">attachment 287207</a> <a href="attachment.cgi?id=287207&amp;action=edit" title="A list fo repositories and their non-https absolute child URIs">[details]</a></span>
A list fo repositories and their non-https absolute child URIs

These are the +1400 cases where a download.eclipse.org repository has an absolute child URI that is not https.</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ed Merks</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=Ed.Merks&#64;gmail.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=Ed.Merks&#64;gmail.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-24 10:53:11 EDT
        </span>

      </div>




<pre class="bz_comment_text">BTW, I've included these as errors in the report:

<a href="https://download.eclipse.org/oomph/archive/p2-index/">https://download.eclipse.org/oomph/archive/p2-index/</a></pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Chris Notenboom</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=nutstree+eclipse&#64;outlook.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=nutstree+eclipse&#64;outlook.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-28 16:48:48 EDT
        </span>

      </div>




<pre class="bz_comment_text">I think the CVE registration is possible generating a lot of false positives for developers using tools like owasp. Especially because of the high rating.

As I understand the solution is not yet released, which makes upgrading to a safe version impossible.

We use the FileLocator from org.eclipse.equinox.common, which is at this moment version 3.15.0 on mvn central. However the CVE states that the bug can be found in  every &quot;eclipse.equinox&quot; bundle up to version 4.21

a) is org.eclipse.equinox.common correctly marked as vulnerable by this CVE or is it about other parts of the equinox bundle?
b) if org.eclipse.equinox.common is vulnerable, is it possible to make the CVE more precise with specific different versions? As it is right now org.eclipse.equinox.common will need a version of 4.22 to not be marked as vulnerable which is probably not the expected next version.</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wayne Beaton</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=wayne.beaton&#64;eclipse-foundation.org" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=wayne.beaton&#64;eclipse-foundation.org" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-09-28 23:17:31 EDT
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; a) is org.eclipse.equinox.common correctly marked as vulnerable by this CVE
&gt; or is it about other parts of the equinox bundle?</span >

Our practice has been to set the &quot;product name&quot; in CVEs to the project. In this case, I set the product name to &quot;Eclipse Equinox&quot;. 

The short version is that I don't know how the data that we provide to Mitre through the CVE programme is converted into the information that tools like owasp use, so I'm not sure what we need to do differently. It's time to sort that out. Pointers welcome.</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=575688#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Watson</span> <a href="http://wiki.eclipse.org/ECA"><img class="cla_dec" src="https://accounts.eclipse.org/user/eca/badge?mail=tjwatson&#64;us.ibm.com" alt="CLA" title="Eclipse Contributor Agreement" /></a> <a href="https://eclipse.org/donate/"><img class="cla_dec" src="//www.eclipse.org/donate/web-api/friends_decorator.php?email=tjwatson&#64;us.ibm.com" alt="Friend" title="Friend of Eclipse" /></a>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2021-10-04 12:04:31 EDT
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Chris Notenboom from <a href="show_bug.cgi?id=575688#c26">comment #26</a>)
<span class="quote">&gt; I think the CVE registration is possible generating a lot of false positives
&gt; for developers using tools like owasp. Especially because of the high rating.
&gt; 
&gt; As I understand the solution is not yet released, which makes upgrading to a
&gt; safe version impossible.
&gt; 
&gt; We use the FileLocator from org.eclipse.equinox.common, which is at this
&gt; moment version 3.15.0 on mvn central. However the CVE states that the bug
&gt; can be found in  every &quot;eclipse.equinox&quot; bundle up to version 4.21
&gt; 
&gt; a) is org.eclipse.equinox.common correctly marked as vulnerable by this CVE
&gt; or is it about other parts of the equinox bundle?
&gt; b) if org.eclipse.equinox.common is vulnerable, is it possible to make the
&gt; CVE more precise with specific different versions? As it is right now
&gt; org.eclipse.equinox.common will need a version of 4.22 to not be marked as
&gt; vulnerable which is probably not the expected next version.</span >

The version 3.15 of org.eclipse.equinox.common is a bundle version while version 4.21 must be referring to the Eclipse Equinox project release version.  With that said, the statement in the CVE is a distraction:

&quot;In all released versions of Eclipse Equinox, at least until version 4.21 (September 2021)...&quot;

Here we are only talking about the p2 bundles that deal communicating with remote p2 repositories.  This has nothing to do with all the other bundles included in Equinox.  The org.eclipse.equinox.common is not affected by this Equinox p2 issue.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=575688">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=575688">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=575688">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=575688&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=575688" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        placeholder="Login">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
  <span class="separator">| </span>
  <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>