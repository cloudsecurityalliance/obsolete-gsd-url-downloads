<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>7558d03e6498e970b761aa44fff6b2c659202d95 - platform/hardware/qcom/media - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/hardware/qcom/media/%2B/7558d03e6498e970b761aa44fff6b2c659202d95">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/hardware/">hardware</a> / <a class="Breadcrumbs-crumb" href="/platform/hardware/qcom/">qcom</a> / <a class="Breadcrumbs-crumb" href="/platform/hardware/qcom/media/">media</a> / <span class="Breadcrumbs-crumb">7558d03e6498e970b761aa44fff6b2c659202d95</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>7558d03e6498e970b761aa44fff6b2c659202d95</td><td><span>[<a href="/platform/hardware/qcom/media/+log/7558d03e6498e970b761aa44fff6b2c659202d95">log</a>]</span> <span>[<a href="/platform/hardware/qcom/media/+archive/7558d03e6498e970b761aa44fff6b2c659202d95.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Praveen Chavan &lt;pchavan@codeaurora.org&gt;</td><td>Wed Jun 15 17:51:39 2016 -0700</td></tr><tr><th class="Metadata-title">committer</th><td>The Android Automerger &lt;android-build@google.com&gt;</td><td>Thu Jun 23 15:06:38 2016 -0700</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/">923870cc8a43f711987c175cb030d7cb863e9106</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95%5E">d575ecf607056d8e3328ef2eb56c52e98f81e87d</a> <span>[<a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">DO NOT MERGE mm-video-v4l2: venc: add checks before accessing heap pointers

Heap pointers do not point to user virtual addresses in case
of secure session.
Set them to NULL and add checks to avoid accesing them

Bug: 28815329
Bug: 28920116

Change-Id: <a href="https://android-review.googlesource.com/#/q/I94fd5808e753b58654d65e175d3857ef46ffba26">I94fd5808e753b58654d65e175d3857ef46ffba26</a>
</pre><ul class="DiffTree"><li><a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/mm-video-v4l2/vidc/venc/src/omx_video_base.cpp">mm-video-v4l2/vidc/venc/src/omx_video_base.cpp</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95%5E%21/#F0">diff</a>]</span></li><li><a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/mm-video-v4l2/vidc/venc/src/omx_video_encoder.cpp">mm-video-v4l2/vidc/venc/src/omx_video_encoder.cpp</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95%5E%21/#F1">diff</a>]</span></li><li><a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/mm-video-v4l2/vidc/venc/src/video_encoder_device_v4l2.cpp">mm-video-v4l2/vidc/venc/src/video_encoder_device_v4l2.cpp</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95%5E%21/#F2">diff</a>]</span></li></ul><div class="DiffSummary">3 files changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 923870cc8a43f711987c175cb030d7cb863e9106</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - CleanSpec.mk"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/CleanSpec.mk">CleanSpec.mk</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - libc2dcolorconvert/"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/libc2dcolorconvert/">libc2dcolorconvert/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - libstagefrighthw/"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/libstagefrighthw/">libstagefrighthw/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - mm-core/"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/mm-core/">mm-core/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - mm-video-legacy/"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/mm-video-legacy/">mm-video-legacy/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - mm-video-v4l2/"><a class="FileList-itemLink" href="/platform/hardware/qcom/media/+/7558d03e6498e970b761aa44fff6b2c659202d95/mm-video-v4l2/">mm-video-v4l2/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>