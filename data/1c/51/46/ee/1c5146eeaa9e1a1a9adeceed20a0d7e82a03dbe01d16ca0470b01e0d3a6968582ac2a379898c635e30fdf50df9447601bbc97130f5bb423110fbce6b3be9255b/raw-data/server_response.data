<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 2071433003: Reland: service worker: Don&#39;t control a subframe of an insecure context -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '83d3be554f39b50b0db9e9a0a2631766';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/2071433003%252526ust%25253D1608693851912133%252526usg%25253DAFQjCNFUHlYAtBEEuA_bZ0ZRr7ucVaTNGA%26service%3Dah">Sign out</a>

</div>
<div class="counter">(187)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-2071433003">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/2071433003/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            2071433003</a>:
    Reland: service worker: Don&#39;t control a subframe of an insecure context  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            4 years, 6 months ago by <a href="/user/falken" onMouseOver="M_showUserInfoPopup(this)">falken</a>
          </div>
          <div><b>Modified:</b><br/>
            4 years, 6 months ago
          </div>
          <div><b>Reviewers:</b><br/>
            <a href="/user/Devlin" onMouseOver="M_showUserInfoPopup(this)">Devlin</a>, <a href="/user/dcheng" onMouseOver="M_showUserInfoPopup(this)">dcheng</a>, <span class='approval'><a href="/user/kinuko" onMouseOver="M_showUserInfoPopup(this)">kinuko</a></span>, <a href="/user/alexmos" onMouseOver="M_showUserInfoPopup(this)">alexmos</a>, <a href="/user/horo" onMouseOver="M_showUserInfoPopup(this)">horo</a>, <a href="/user/jww" onMouseOver="M_showUserInfoPopup(this)">jww</a>, <a href="/user/clamy" onMouseOver="M_showUserInfoPopup(this)">clamy</a>
          </div>
          
          <div><b>CC:</b><br/>
            chromium-reviews, kenjibaheux+watch_chromium.org, tzik, nasko+codewatch_chromium.org, eae+blinkwatch, kinuko+watch, rwlbuis, extensions-reviews_chromium.org, jam, blink-reviews-dom_chromium.org, dglazkov+blink, darin-cc_chromium.org, blink-reviews, chromium-apps-reviews_chromium.org, blink-reviews-api_chromium.org, blink-worker-reviews_chromium.org, mlamouri+watch-content_chromium.org, creis+watch_chromium.org, jsbell+serviceworker_chromium.org, sof, nhiroki, michaeln, mlamouri+watch-blink_chromium.org, serviceworker-reviews, kinuko+serviceworker, mkwst+moarreviews-renderer_chromium.org, horo+watch_chromium.org
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/src.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/pending/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=chromium">
              chromium
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - c14d891d44f0afff64e56ed7c9702df1d807b1ee"
               href="/search?repo_guid=c14d891d44f0afff64e56ed7c9702df1d807b1ee">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">Reland: service worker: Don't control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to <a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=607543">607543</a>
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation
TBR=reviewers from the original review

Original review: <a href="https://codereview.chromium.org/2009453002">https://codereview.chromium.org/2009453002</a>

Committed: <a href="https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243">https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243</a>
Cr-Commit-Position: refs/heads/master@{#400093}
  </div>




  <h3>
    <a id="ps-1-pointer"
       href="/2071433003/#ps1"
       onclick="M_toggleSectionForPS('2071433003', '1')"
       class="toggled-section ">
      Patch Set 1
      : original patch
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-1"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-20001-pointer"
       href="/2071433003/#ps20001"
       onclick="M_toggleSectionForPS('2071433003', '20001')"
       class="toggled-section opentriangle">
      Patch Set 2
      : revised
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-20001"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 4 years, 6 months ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue2071433003_20001.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/2071433003/20001"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+558 lines, -148 lines</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30002">
            chrome/browser/chrome_content_browser_client.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/chrome/browser/chrome_content_browser_client.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30002.diff"
             title="Download patch for chrome/browser/chrome_content_browser_client.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30001">
            chrome/browser/chrome_content_browser_client.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/chrome/browser/chrome_content_browser_client.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+6 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30001.diff"
             title="Download patch for chrome/browser/chrome_content_browser_client.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30003">
            chrome/browser/extensions/service_worker_apitest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/chrome/browser/extensions/service_worker_apitest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">3 chunks</td>
          <td style="white-space: nowrap">+20 lines, -3 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30003.diff"
             title="Download patch for chrome/browser/extensions/service_worker_apitest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30004">
            content/browser/service_worker/service_worker_browsertest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_browsertest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+6 lines, -5 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30004.diff"
             title="Download patch for content/browser/service_worker/service_worker_browsertest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30005">
            content/browser/service_worker/service_worker_context_core.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_context_core.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+7 lines, -7 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30005.diff"
             title="Download patch for content/browser/service_worker/service_worker_context_core.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30006">
            content/browser/service_worker/service_worker_context_request_handler_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_context_request_handler_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+6 lines, -5 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30006.diff"
             title="Download patch for content/browser/service_worker/service_worker_context_request_handler_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30007">
            content/browser/service_worker/service_worker_context_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_context_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+12 lines, -4 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30007.diff"
             title="Download patch for content/browser/service_worker/service_worker_context_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30008">
            content/browser/service_worker/service_worker_controllee_request_handler.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_controllee_request_handler.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+12 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30008.diff"
             title="Download patch for content/browser/service_worker/service_worker_controllee_request_handler.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30009">
            content/browser/service_worker/service_worker_controllee_request_handler_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_controllee_request_handler_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">8 chunks</td>
          <td style="white-space: nowrap">+13 lines, -12 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30009.diff"
             title="Download patch for content/browser/service_worker/service_worker_controllee_request_handler_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30011">
            content/browser/service_worker/service_worker_dispatcher_host.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_dispatcher_host.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30011.diff"
             title="Download patch for content/browser/service_worker/service_worker_dispatcher_host.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30010">
            content/browser/service_worker/service_worker_dispatcher_host.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_dispatcher_host.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">3 chunks</td>
          <td style="white-space: nowrap">+12 lines, -5 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30010.diff"
             title="Download patch for content/browser/service_worker/service_worker_dispatcher_host.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30012">
            content/browser/service_worker/service_worker_dispatcher_host_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_dispatcher_host_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">5 chunks</td>
          <td style="white-space: nowrap">+13 lines, -7 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30012.diff"
             title="Download patch for content/browser/service_worker/service_worker_dispatcher_host_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30013">
            content/browser/service_worker/service_worker_handle_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_handle_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+3 lines, -2 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30013.diff"
             title="Download patch for content/browser/service_worker/service_worker_handle_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30014">
            content/browser/service_worker/service_worker_job_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_job_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+6 lines, -5 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30014.diff"
             title="Download patch for content/browser/service_worker/service_worker_job_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30016">
            content/browser/service_worker/service_worker_provider_host.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_provider_host.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/content/browser/service_worker/service_worker_provider_host.h"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">6 chunks</td>
          <td style="white-space: nowrap">+28 lines, -2 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30016.diff"
             title="Download patch for content/browser/service_worker/service_worker_provider_host.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30015">
            content/browser/service_worker/service_worker_provider_host.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_provider_host.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/content/browser/service_worker/service_worker_provider_host.cc"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">8 chunks</td>
          <td style="white-space: nowrap">+25 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30015.diff"
             title="Download patch for content/browser/service_worker/service_worker_provider_host.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30017">
            content/browser/service_worker/service_worker_provider_host_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_provider_host_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/content/browser/service_worker/service_worker_provider_host_unittest.cc"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">4 chunks</td>
          <td style="white-space: nowrap">+70 lines, -14 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30017.diff"
             title="Download patch for content/browser/service_worker/service_worker_provider_host_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30018">
            content/browser/service_worker/service_worker_registration.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_registration.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/content/browser/service_worker/service_worker_registration.cc"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30018.diff"
             title="Download patch for content/browser/service_worker/service_worker_registration.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30019">
            content/browser/service_worker/service_worker_request_handler_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_request_handler_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+9 lines, -9 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30019.diff"
             title="Download patch for content/browser/service_worker/service_worker_request_handler_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30020">
            content/browser/service_worker/service_worker_storage_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_storage_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">3 chunks</td>
          <td style="white-space: nowrap">+3 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30020.diff"
             title="Download patch for content/browser/service_worker/service_worker_storage_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30021">
            content/browser/service_worker/service_worker_url_request_job_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_url_request_job_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">13 chunks</td>
          <td style="white-space: nowrap">+17 lines, -20 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30021.diff"
             title="Download patch for content/browser/service_worker/service_worker_url_request_job_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30022">
            content/browser/service_worker/service_worker_version_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_version_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30022.diff"
             title="Download patch for content/browser/service_worker/service_worker_version_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30023">
            content/browser/service_worker/service_worker_write_to_cache_job_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/browser/service_worker/service_worker_write_to_cache_job_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+5 lines, -3 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30023.diff"
             title="Download patch for content/browser/service_worker/service_worker_write_to_cache_job_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30025">
            content/child/service_worker/service_worker_network_provider.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/child/service_worker/service_worker_network_provider.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+11 lines, -4 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30025.diff"
             title="Download patch for content/child/service_worker/service_worker_network_provider.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30024">
            content/child/service_worker/service_worker_network_provider.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/child/service_worker/service_worker_network_provider.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">5 chunks</td>
          <td style="white-space: nowrap">+25 lines, -11 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30024.diff"
             title="Download patch for content/child/service_worker/service_worker_network_provider.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30026">
            content/common/service_worker/service_worker_messages.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/common/service_worker/service_worker_messages.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+13 lines, -2 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30026.diff"
             title="Download patch for content/common/service_worker/service_worker_messages.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30027">
            content/public/browser/content_browser_client.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/public/browser/content_browser_client.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+6 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30027.diff"
             title="Download patch for content/public/browser/content_browser_client.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30028">
            content/renderer/render_frame_impl.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/renderer/render_frame_impl.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -2 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30028.diff"
             title="Download patch for content/renderer/render_frame_impl.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30029">
            content/renderer/service_worker/service_worker_context_client.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/renderer/service_worker/service_worker_context_client.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30029.diff"
             title="Download patch for content/renderer/service_worker/service_worker_context_client.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30030">
            content/renderer/shared_worker/embedded_shared_worker_stub.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/content/renderer/shared_worker/embedded_shared_worker_stub.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+2 lines, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30030.diff"
             title="Download patch for content/renderer/shared_worker/embedded_shared_worker_stub.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">A</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30031">
            third_party/WebKit/LayoutTests/http/tests/serviceworker/insecure-parent-frame.html
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/LayoutTests/http/tests/serviceworker/insecure-parent-frame.html">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/third_party/WebKit/LayoutTests/http/tests/serviceworker/insecure-parent-frame.html"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+85 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30031.diff"
             title="Download patch for third_party/WebKit/LayoutTests/http/tests/serviceworker/insecure-parent-frame.html">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">A</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30032">
            third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-inscope.html
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-inscope.html">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-inscope.html"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+12 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30032.diff"
             title="Download patch for third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-inscope.html">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">A</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30033">
            third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-parent.html
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-parent.html">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/2071433003/diff2/1:20001/third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-parent.html"
             title="Delta from patch set 1">1</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+16 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30033.diff"
             title="Download patch for third_party/WebKit/LayoutTests/http/tests/serviceworker/resources/insecure-parent.html">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30035">
            third_party/WebKit/Source/core/dom/Document.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/Source/core/dom/Document.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -1 line</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30035.diff"
             title="Download patch for third_party/WebKit/Source/core/dom/Document.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30034">
            third_party/WebKit/Source/core/dom/Document.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/Source/core/dom/Document.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">4 chunks</td>
          <td style="white-space: nowrap">+10 lines, -21 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30034.diff"
             title="Download patch for third_party/WebKit/Source/core/dom/Document.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30037">
            third_party/WebKit/Source/core/frame/Frame.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/Source/core/frame/Frame.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+9 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30037.diff"
             title="Download patch for third_party/WebKit/Source/core/frame/Frame.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30036">
            third_party/WebKit/Source/core/frame/Frame.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/Source/core/frame/Frame.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+9 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30036.diff"
             title="Download patch for third_party/WebKit/Source/core/frame/Frame.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30038">
            third_party/WebKit/Source/web/WebFrame.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/Source/web/WebFrame.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+8 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30038.diff"
             title="Download patch for third_party/WebKit/Source/web/WebFrame.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30039">
            third_party/WebKit/Source/web/tests/WebFrameTest.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/Source/web/tests/WebFrameTest.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+58 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30039.diff"
             title="Download patch for third_party/WebKit/Source/web/tests/WebFrameTest.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/2071433003/patch/20001/30040">
            third_party/WebKit/public/web/WebFrame.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/2071433003/diff/20001/third_party/WebKit/public/web/WebFrame.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+9 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue2071433003_20001_30040.diff"
             title="Download patch for third_party/WebKit/public/web/WebFrame.h">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 20001;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 18 (8 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 18)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 18)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(18)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(18)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    generated"
           style="display: none"
           id="generated-msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          Description was changed from ========== Reland: service worker: Don&#39;t control a subframe of an insecure ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 02:35:05 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            >Description was changed from

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation

Review-Url: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
Cr-Commit-Position: refs/heads/master@{#398229}
==========

to

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          falken@chromium.org changed reviewers: + kinuko@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 02:38:42 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            ><a href="mailto:falken@chromium.org">falken@chromium.org</a> changed reviewers:
+ <a href="mailto:kinuko@chromium.org">kinuko@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          kinuko: Would you be able to review this reland? The diff from the previous patch ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 02:38:43 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            >kinuko: Would you be able to review this reland?

The diff from the previous patch is the delta from patchset 1.

The problem with the previous patch was that Clients.claim() could also cause an
insecure context to be controlled. The new patch checks for that and adds a test
case.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>kinuko</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          lgtm.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 03:33:59 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            >lgtm.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          Description was changed from ========== Reland: service worker: Don&#39;t control a subframe of an insecure ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 04:25:16 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >Description was changed from

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
==========

to

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation
TBR=reviewers from the original review

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          falken@chromium.org changed reviewers: + alexmos@chromium.org, clamy@chromium.org, dcheng@chromium.org, jww@chromium.org, rdevlin.cronin@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 04:25:16 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            ><a href="mailto:falken@chromium.org">falken@chromium.org</a> changed reviewers:
+ <a href="mailto:alexmos@chromium.org">alexmos@chromium.org</a>, <a href="mailto:clamy@chromium.org">clamy@chromium.org</a>, <a href="mailto:dcheng@chromium.org">dcheng@chromium.org</a>,
<a href="mailto:jww@chromium.org">jww@chromium.org</a>, <a href="mailto:rdevlin.cronin@chromium.org">rdevlin.cronin@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          TBRing owners from previous review
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 04:25:44 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            >TBRing owners from previous review</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          falken@chromium.org changed reviewers: + horo@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 04:26:39 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            ><a href="mailto:falken@chromium.org">falken@chromium.org</a> changed reviewers:
+ <a href="mailto:horo@chromium.org">horo@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          The CQ bit was checked by falken@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 04:26:50 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            >The CQ bit was checked by <a href="mailto:falken@chromium.org">falken@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/2071433003/20001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 04:27:03 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            >CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/2071433003/20001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/2071433003/20001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   generated"
           style="display: none"
           id="generated-msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          Description was changed from ========== Reland: service worker: Don&#39;t control a subframe of an insecure ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 06:10:18 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-10"
            >Description was changed from

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation
TBR=reviewers from the original review

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
==========

to

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation
TBR=reviewers from the original review

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          Committed patchset #2 (id:20001)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 06:10:20 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-11"
            >Committed patchset #2 (id:20001)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   generated"
           style="display: none"
           id="generated-msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          Description was changed from ========== Reland: service worker: Don&#39;t control a subframe of an insecure ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 06:12:06 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-12"
            >Description was changed from

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation
TBR=reviewers from the original review

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>
==========

to

==========
Reland: service worker: Don&#39;t control a subframe of an insecure context

We must check isSecureContext when creating the network provider to
adhere to
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged" rel="nofollow">https://w3c.github.io/webappsec/specs/powerfulfeatures/#settings-privileged</a>.

We already did this for getRegistration(), register(), unregister() but must
also do this when deciding whether to control an in-scope document.

BUG=607543
CQ_INCLUDE_TRYBOTS=tryserver.chromium.linux:linux_site_isolation
TBR=reviewers from the original review

Original review: <a href="https://codereview.chromium.org/2009453002" rel="nofollow">https://codereview.chromium.org/2009453002</a>

Committed: <a href="https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243" rel="nofollow">https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243</a>
Cr-Commit-Position: refs/heads/master@{#400093}
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          Patchset 2 (id:??) landed as https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243 Cr-Commit-Position: refs/heads/master@{#400093}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 06:12:07 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-13"
            >Patchset 2 (id:??) landed as
<a href="https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243" rel="nofollow">https://crrev.com/ad1850962644e19cdb040d60eb236e0ebc23c243</a>
Cr-Commit-Position: refs/heads/master@{#400093}</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>dcheng</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          Sorry, I didn&#39;t see this CL till now. I thought about it a bit more ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-16 08:59:44 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-14"
            >Sorry, I didn&#39;t see this CL till now.

I thought about it a bit more the last few days, and I don&#39;t think we should add
the Blink public API for this. It means we can&#39;t share the code, but I think
that&#39;s fine: this is a one-off thing for service workers, as far as I can tell.
If it becomes useful for other things, then we can revisit exposing it in the
public API.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>falken</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          On 2016/06/16 08:59:44, dcheng wrote: &gt; Sorry, I didn&#39;t see this CL till now. &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-17 00:52:34 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-15"
            >On 2016/06/16 08:59:44, dcheng wrote:
&gt; Sorry, I didn&#39;t see this CL till now.
&gt; 
&gt; I thought about it a bit more the last few days, and I don&#39;t think we should
add
&gt; the Blink public API for this. It means we can&#39;t share the code, but I think
&gt; that&#39;s fine: this is a one-off thing for service workers, as far as I can
tell.
&gt; If it becomes useful for other things, then we can revisit exposing it in the
&gt; public API.

I don&#39;t have a strong opinion (the early patchsets on the previous review did
that) but jww@ and alexmos@ expressed a strong preference for sharing the code.

I&#39;m loath to revert this now since I want it to pass through canary and get it
merged ASAP.

I&#39;ll fire up a patch to change the public API part and see how it looks.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>dcheng</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          On 2016/06/17 00:52:34, falken wrote: &gt; On 2016/06/16 08:59:44, dcheng wrote: &gt; &gt; Sorry, I ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-17 06:49:24 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-16"
            >On 2016/06/17 00:52:34, falken wrote:
&gt; On 2016/06/16 08:59:44, dcheng wrote:
&gt; &gt; Sorry, I didn&#39;t see this CL till now.
&gt; &gt; 
&gt; &gt; I thought about it a bit more the last few days, and I don&#39;t think we should
&gt; add
&gt; &gt; the Blink public API for this. It means we can&#39;t share the code, but I think
&gt; &gt; that&#39;s fine: this is a one-off thing for service workers, as far as I can
&gt; tell.
&gt; &gt; If it becomes useful for other things, then we can revisit exposing it in
the
&gt; &gt; public API.
&gt; 
&gt; I don&#39;t have a strong opinion (the early patchsets on the previous review did
&gt; that) but jww@ and alexmos@ expressed a strong preference for sharing the
code.
&gt; 
&gt; I&#39;m loath to revert this now since I want it to pass through canary and get it
&gt; merged ASAP.
&gt; 

Sorry, I was unclear: we definitely shouldn&#39;t revert this patch.

&gt; I&#39;ll fire up a patch to change the public API part and see how it looks.

A followup CL is fine for this investigation.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>alexmos</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-17">
                          On 2016/06/17 00:52:34, falken wrote: &gt; On 2016/06/16 08:59:44, dcheng wrote: &gt; &gt; Sorry, I ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                4 years, 6 months ago
		(2016-06-17 06:52:19 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             >
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-17"
            >On 2016/06/17 00:52:34, falken wrote:
&gt; On 2016/06/16 08:59:44, dcheng wrote:
&gt; &gt; Sorry, I didn&#39;t see this CL till now.
&gt; &gt; 
&gt; &gt; I thought about it a bit more the last few days, and I don&#39;t think we should
&gt; add
&gt; &gt; the Blink public API for this. It means we can&#39;t share the code, but I think
&gt; &gt; that&#39;s fine: this is a one-off thing for service workers, as far as I can
&gt; tell.
&gt; &gt; If it becomes useful for other things, then we can revisit exposing it in
the
&gt; &gt; public API.
&gt; 
&gt; I don&#39;t have a strong opinion (the early patchsets on the previous review did
&gt; that) but jww@ and alexmos@ expressed a strong preference for sharing the
code.
&gt; 
&gt; I&#39;m loath to revert this now since I want it to pass through canary and get it
&gt; merged ASAP.
&gt; 
&gt; I&#39;ll fire up a patch to change the public API part and see how it looks.

FWIW, I supported sharing the code before we knew that we couldn&#39;t merge the
duplicate calls in public API, but had the same concern as Daniel for that
(<a href="https://codereview.chromium.org/2009453002/diff/120001/third_party/WebKit/public/web/WebFrame.h#newcode555" rel="nofollow">https://codereview.chromium.org/2009453002/diff/120001/third_party/WebKit/pub...</a>),
so I&#39;m ok with following Daniel&#39;s suggestion in a followup CL.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 18)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 18)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(18)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(18)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 18;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 2071433003;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 2071433003: Reland: service worker: Don&#39;t control a subframe of an insecure context
     (Closed) </b><br/>
      Created 4 years, 6 months ago by falken<br/>
      Modified 4 years, 6 months ago<br/>
      Reviewers: kinuko, Devlin, dcheng, alexmos, jww, clamy, horo<br/>
      Base URL: https://chromium.googlesource.com/chromium/src.git@master<br/>
      Comments: 0
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
