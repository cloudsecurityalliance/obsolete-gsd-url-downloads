<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#876511 - formail: CVE-2017-16844: heap-based buffer overflow in loadbuf() - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=876511&quot;&gt;876511&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:876511@bugs.debian.org">#876511</a><br>
formail: CVE-2017-16844: heap-based buffer overflow in loadbuf()</h1>
<div class="versiongraph"><a href="version.cgi?package=procmail;found=procmail%2F3.22-24;found=procmail%2F3.22-25;collapse=1;fixed=procmail%2F3.22-26;fixed=procmail%2F3.22-25%2Bdeb9u1;fixed=procmail%2F3.22-24%2Bdeb8u1;info=1;absolute=0"><img alt="version graph" src="version.cgi?height=2;collapse=1;found=procmail%2F3.22-24;found=procmail%2F3.22-25;width=2;package=procmail;absolute=0;fixed=procmail%2F3.22-26;fixed=procmail%2F3.22-25%2Bdeb9u1;fixed=procmail%2F3.22-24%2Bdeb8u1"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=procmail">procmail</a>;
Maintainer for <a href="pkgreport.cgi?package=procmail">procmail</a> is <a href="pkgreport.cgi?maint=sanvila%40debian.org">Santiago Vila &lt;sanvila@debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=procmail">procmail</a> is <a href="pkgreport.cgi?src=procmail">src:procmail</a> (<a href="https://tracker.debian.org/pkg/procmail">PTS</a>, <a href="https://buildd.debian.org/procmail">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=procmail">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=jwilk%40jwilk.net">Jakub Wilk &lt;jwilk@jwilk.net&gt;</a></p>
  <p>Date: Sat, 23 Sep 2017 02:03:02 UTC</p>

<p>Severity: normal</p>
<p>Tags: security</p>

<p>Found in versions procmail/3.22-24, procmail/3.22-25</p>
<p>Fixed in versions procmail/3.22-26, procmail/3.22-25+deb9u1, procmail/3.22-24+deb8u1</p>

<p><strong>Done:</strong> Santiago Vila &lt;sanvila@debian.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p></div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=876511;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, jwilk@jwilk.net, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1506132185 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, jwilk@jwilk.net, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Sat, 23 Sep 2017 02:03:05 GMT) (<a href="bugreport.cgi?bug=876511;msg=2">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="3"></a><a name="msg3"></a><a href="#3">Message #3</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=3">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=3">mbox</a>, <a href="mailto:876511@bugs.debian.org?References=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E&amp;subject=Re%3A%20formail%3A%20heap-based%20buffer%20overflow%20in%20loadbuf%28%29&amp;In-Reply-To=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E&amp;body=On%20Sat%2C%2023%20Sep%202017%2000%3A24%3A35%20%2B0200%20Jakub%20Wilk%20%3Cjwilk%40jwilk.net%3E%20wrote%3A%0A%3E%20Package%3A%20procmail%0A%3E%20Version%3A%203.22-25%2Bb1%0A%3E%20Tags%3A%20security%0A%3E%20%0A%3E%20formail%20crashes%20on%20the%20attached%20file%3A%0A%3E%20%0A%3E%20%20%20%20%24%20zcat%20overflow.822.gz%20%7C%20formail%20-r%0A%3E%20%20%20%20%2A%2A%2A%20Error%20in%20%60formail%27%3A%20corrupted%20size%20vs.%20prev_size%3A%200x584565a8%20%2A%2A%2A%0A%3E%20%20%20%20...%0A%3E%20%20%20%20Aborted%0A%3E%20%0A%3E%20I%20believe%20the%20culrpit%20is%20the%20loadbuf%28%29%20function.%20It%20looks%20like%20this%3A%0A%3E%20%0A%3E%20%20%20%20void%20loadbuf%28text%2Clen%29const%20char%2Aconst%20text%3Bconst%20size_t%20len%3B%0A%3E%20%20%20%20%7B%20if%28buffilled%2Blen%3Ebuflen%29%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%20%20%20%20%20%20%20%20buf%3Drealloc%28buf%2Cbuflen%2B%3DBsize%29%3B%0A%3E%20%20%20%20%20%20tmemmove%28buf%2Bbuffilled%2Ctext%2Clen%29%3Bbuffilled%2B%3Dlen%3B%0A%3E%20%20%20%20%7D%0A%3E%20%0A%3E%20When%20the%20buffer%20is%20too%20small%2C%20the%20function%20tries%20to%20resize%20it%2C%20but%20only%20%0A%3E%20by%20Bsize%20%28%3D128%29%20bytes.%20This%20is%20not%20necessarily%20enough.%0A%3E%20%0A%3E%20%0A%3E%20Found%20using%20American%20Fuzzy%20Lop%3A%0A%3E%20http%3A%2F%2Flcamtuf.coredump.cx%2Fafl%2F%0A%3E%20%0A%3E%20--%20System%20Information%3A%0A%3E%20Architecture%3A%20i386%0A%3E%20%0A%3E%20Versions%20of%20packages%20procmail%20depends%20on%3A%0A%3E%20ii%20%20libc6%20%202.24-17%0A%3E%20%0A%3E%20--%20%0A%3E%20Jakub%20Wilk%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jwilk%40jwilk.net" alt="">
<div class="header"><span class="headerfield">From:</span> Jakub Wilk &lt;jwilk@jwilk.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> submit@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> formail: heap-based buffer overflow in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 23 Sep 2017 00:24:35 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=876511;msg=3">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message flowed">Package: procmail
Version: 3.22-25+b1
Tags: security

formail crashes on the attached file:

  $ zcat overflow.822.gz | formail -r
  *** Error in `formail&#39;: corrupted size vs. prev_size: 0x584565a8 ***
  ...
  Aborted

I believe the culrpit is the loadbuf() function. It looks like this:

  void loadbuf(text,len)const char*const text;const size_t len;
  { if(buffilled+len&gt;buflen)                        /* buf can&#39;t hold the text */
       buf=realloc(buf,buflen+=Bsize);
    tmemmove(buf+buffilled,text,len);buffilled+=len;
  }

When the buffer is too small, the function tries to resize it, but only 
by Bsize (=128) bytes. This is not necessarily enough.


Found using American Fuzzy Lop:
<a href="http://lcamtuf.coredump.cx/afl/">http://lcamtuf.coredump.cx/afl/</a>

-- System Information:
Architecture: i386

Versions of packages procmail depends on:
ii  libc6  2.24-17

-- 
Jakub Wilk
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=876511;filename=overflow.822.gz;msg=3">overflow.822.gz</a> (application/gzip, attachment)]</pre>

<div class="msgreceived"><hr><p>
<a name="4"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1510867263 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;formail: CVE-2017-16844: heap-based buffer overflow in loadbuf()&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;formail: heap-based buffer overflow in loadbuf()&#39;
            };
-->
<strong>Changed Bug title to &#39;formail: CVE-2017-16844: heap-based buffer overflow in loadbuf()&#39; from &#39;formail: heap-based buffer overflow in loadbuf()&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Thu, 16 Nov 2017 21:21:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=5">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=5">mbox</a>, <a href="#4">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="6"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1510868703 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Thu, 16 Nov 2017 21:45:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=7">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: Santiago Vila &lt;sanvila@unex.es&gt; -->
<!-- time:1510868703 -->
<strong>Acknowledgement sent</strong>
to <code>Santiago Vila &lt;sanvila@unex.es&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>.
 (Thu, 16 Nov 2017 21:45:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=9">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 876511@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=10">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=10">mbox</a>, <a href="mailto:876511@bugs.debian.org?body=On%20Thu%2C%2016%20Nov%202017%2022%3A35%3A05%20%2B0100%20Santiago%20Vila%20%3Csanvila%40unex.es%3E%20wrote%3A%0A%3E%20On%20Sat%2C%20Sep%2023%2C%202017%20at%2012%3A24%3A35AM%20%2B0200%2C%20Jakub%20Wilk%20wrote%3A%0A%3E%20%3E%20Package%3A%20procmail%0A%3E%20%3E%20Version%3A%203.22-25%2Bb1%0A%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20%0A%3E%20%3E%20formail%20crashes%20on%20the%20attached%20file%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%20%20%24%20zcat%20overflow.822.gz%20%7C%20formail%20-r%0A%3E%20%3E%20%20%20%2A%2A%2A%20Error%20in%20%60formail%27%3A%20corrupted%20size%20vs.%20prev_size%3A%200x584565a8%20%2A%2A%2A%0A%3E%20%3E%20%20%20...%0A%3E%20%3E%20%20%20Aborted%0A%3E%20%3E%20%0A%3E%20%3E%20I%20believe%20the%20culrpit%20is%20the%20loadbuf%28%29%20function.%20It%20looks%20like%20this%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%20%20void%20loadbuf%28text%2Clen%29const%20char%2Aconst%20text%3Bconst%20size_t%20len%3B%0A%3E%20%3E%20%20%20%7B%20if%28buffilled%2Blen%3Ebuflen%29%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%3E%20%20%20%20%20%20%20%20buf%3Drealloc%28buf%2Cbuflen%2B%3DBsize%29%3B%0A%3E%20%3E%20%20%20%20%20tmemmove%28buf%2Bbuffilled%2Ctext%2Clen%29%3Bbuffilled%2B%3Dlen%3B%0A%3E%20%3E%20%20%20%7D%0A%3E%20%3E%20%0A%3E%20%3E%20When%20the%20buffer%20is%20too%20small%2C%20the%20function%20tries%20to%20resize%20it%2C%20but%20only%20by%0A%3E%20%3E%20Bsize%20%28%3D128%29%20bytes.%20This%20is%20not%20necessarily%20enough.%0A%3E%20%0A%3E%20Thanks%20for%20the%20report%20and%20sorry%20for%20my%20late%20reply.%0A%3E%20%0A%3E%20Based%20on%20your%20analysis%2C%20it%20would%20seem%20that%20keeping%20trying%20the%20realloc%0A%3E%20until%20the%20condition%20inside%20the%20if%20becomes%20false%20would%20fix%20this.%0A%3E%20%0A%3E%20I%20don%27t%20have%20an%20i386%20system%20around.%20Can%20you%20try%20the%20following%0A%3E%20%28trivial%29%20attached%20patch%3F%0A%3E%20%0A%3E%20Salvatore%3A%20If%20this%20patch%20solves%20the%20issue%20and%20I%20upload%20it%20for%20unstable%2C%0A%3E%20would%20you%20like%20me%20to%20care%2Fhelp%20about%20stable%20as%20well%3F%0A%3E%20%28following%20your%20indications%29.%0A%3E%20%0A%3E%20Thanks.%0A&amp;References=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E%0A%20%3C20171116213505.aujharr3etryrr6m%40nuc%3E&amp;subject=Re%3A%20Bug%23876511%3A%20formail%3A%20heap-based%20buffer%20overflow%20in%20loadbuf%28%29&amp;In-Reply-To=%3C20171116213505.aujharr3etryrr6m%40nuc%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=sanvila%40unex.es" alt="">
<div class="header"><span class="headerfield">From:</span> Santiago Vila &lt;sanvila@unex.es&gt;</div>
<div class="header"><span class="headerfield">To:</span> Jakub Wilk &lt;jwilk@jwilk.net&gt;, 876511@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#876511: formail: heap-based buffer overflow in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 16 Nov 2017 22:35:05 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=876511;msg=10">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On Sat, Sep 23, 2017 at 12:24:35AM +0200, Jakub Wilk wrote:
&gt; Package: procmail
&gt; Version: 3.22-25+b1
&gt; Tags: security
&gt; 
&gt; formail crashes on the attached file:
&gt; 
&gt;   $ zcat overflow.822.gz | formail -r
&gt;   *** Error in `formail&#39;: corrupted size vs. prev_size: 0x584565a8 ***
&gt;   ...
&gt;   Aborted
&gt; 
&gt; I believe the culrpit is the loadbuf() function. It looks like this:
&gt; 
&gt;   void loadbuf(text,len)const char*const text;const size_t len;
&gt;   { if(buffilled+len&gt;buflen)                        /* buf can&#39;t hold the text */
&gt;        buf=realloc(buf,buflen+=Bsize);
&gt;     tmemmove(buf+buffilled,text,len);buffilled+=len;
&gt;   }
&gt; 
&gt; When the buffer is too small, the function tries to resize it, but only by
&gt; Bsize (=128) bytes. This is not necessarily enough.

Thanks for the report and sorry for my late reply.

Based on your analysis, it would seem that keeping trying the realloc
until the condition inside the if becomes false would fix this.

I don&#39;t have an i386 system around. Can you try the following
(trivial) attached patch?

Salvatore: If this patch solves the issue and I upload it for unstable,
would you like me to care/help about stable as well?
(following your indications).

Thanks.
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=876511;filename=formisc.c.patch.txt;msg=10">formisc.c.patch.txt</a> (text/plain, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1510873562 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Thu, 16 Nov 2017 23:06:02 GMT) (<a href="bugreport.cgi?bug=876511;msg=12">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: Santiago Vila &lt;sanvila@unex.es&gt; -->
<!-- time:1510873562 -->
<strong>Acknowledgement sent</strong>
to <code>Santiago Vila &lt;sanvila@unex.es&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>.
 (Thu, 16 Nov 2017 23:06:02 GMT) (<a href="bugreport.cgi?bug=876511;msg=14">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 876511@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=15">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=15">mbox</a>, <a href="mailto:876511@bugs.debian.org?body=On%20Fri%2C%2017%20Nov%202017%2000%3A03%3A05%20%2B0100%20Santiago%20Vila%20%3Csanvila%40unex.es%3E%20wrote%3A%0A%3E%20I%20managed%20to%20reproduce%20the%20problem%20%28but%20not%20a%20crash%20as%20such%29%20on%20a%0A%3E%20Debian%208%20machine%20%28i386%29%20from%20Digital%20Ocean%20%28it%20is%20increasingly%0A%3E%20difficult%20to%20find%20a%20i386%20machine%20these%20days%29.%0A%3E%20%0A%3E%20In%20this%20machine%2C%20the%20output%20of%20formail%20with%20sample%20email%20had%20garbage%0A%3E%20chars%2C%20and%20the%20garbage%20was%20different%20every%20time.%20The%20patch%20seems%20to%0A%3E%20fix%20the%20problem.%0A%3E%20%0A%3E%20I%20believe%20the%20patch%20to%20be%20correct%2C%20so%20I%27ve%20uploaded%203.22-26%20with%20it.%0A%3E%20%0A%3E%20Thanks.%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20171116230305.yhddxtytq6nb5zgq%40nuc%3E&amp;References=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E%0A%20%3C20171116230305.yhddxtytq6nb5zgq%40nuc%3E&amp;subject=Re%3A%20Bug%23876511%3A%20formail%3A%20heap-based%20buffer%20overflow%20in%20loadbuf%28%29">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=sanvila%40unex.es" alt="">
<div class="header"><span class="headerfield">From:</span> Santiago Vila &lt;sanvila@unex.es&gt;</div>
<div class="header"><span class="headerfield">To:</span> Jakub Wilk &lt;jwilk@jwilk.net&gt;, 876511@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#876511: formail: heap-based buffer overflow in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 17 Nov 2017 00:03:05 +0100</div>
</div>
<pre class="message">I managed to reproduce the problem (but not a crash as such) on a
Debian 8 machine (i386) from Digital Ocean (it is increasingly
difficult to find a i386 machine these days).

In this machine, the output of formail with sample email had garbage
chars, and the garbage was different every time. The patch seems to
fix the problem.

I believe the patch to be correct, so I&#39;ve uploaded 3.22-26 with it.

Thanks.


</pre>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- request_addr: Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1510875547 -->
<strong>Reply sent</strong>
to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Thu, 16 Nov 2017 23:39:07 GMT) (<a href="bugreport.cgi?bug=876511;msg=17">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: Jakub Wilk &lt;jwilk@jwilk.net&gt; -->
<!-- time:1510875547 -->
<strong>Notification sent</strong>
to <code>Jakub Wilk &lt;jwilk@jwilk.net&gt;</code>:<br>
Bug acknowledged by developer.
 (Thu, 16 Nov 2017 23:39:07 GMT) (<a href="bugreport.cgi?bug=876511;msg=19">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="20"></a><a name="msg20"></a><a href="#20">Message #20</a> received at 876511-close@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=20">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=20">mbox</a>, <a href="mailto:876511@bugs.debian.org?body=On%20Thu%2C%2016%20Nov%202017%2023%3A35%3A01%20%2B0000%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20procmail%0A%3E%20Source-Version%3A%203.22-26%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20procmail%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20876511%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%20%28supplier%20of%20updated%20procmail%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Thu%2C%2016%20Nov%202017%2023%3A42%3A36%20%2B0100%0A%3E%20Source%3A%20procmail%0A%3E%20Binary%3A%20procmail%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%203.22-26%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20medium%0A%3E%20Maintainer%3A%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%0A%3E%20Changed-By%3A%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20procmail%20%20%20-%20Versatile%20e-mail%20processor%0A%3E%20Closes%3A%20876511%0A%3E%20Changes%3A%0A%3E%20%20procmail%20%283.22-26%29%20unstable%3B%20urgency%3Dmedium%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Fix%20buffer%20overflow%20in%20loadbuf%28%29.%20Closes%3A%20%23876511.%0A%3E%20%20%20%20%20%20Reported%20by%20Jakub%20Wilk%20using%20American%20Fuzzy%20Lop.%0A%3E%20%20%20%20%20%20For%20reference%2C%20this%20is%20CVE-2017-16844.%0A%3E%20Checksums-Sha1%3A%0A%3E%20%20c0d1d7fd5b2b09f2df4c33dca5878304459ce040%201320%20procmail_3.22-26.dsc%0A%3E%20%20e3bc9065f6d2aa7f230ed0b380ab9c103ce56da7%2020152%20procmail_3.22-26.debian.tar.xz%0A%3E%20%20a19b9bfeea58d5e1b5a12429189508ab499488ce%203857%20procmail_3.22-26_source.buildinfo%0A%3E%20Checksums-Sha256%3A%0A%3E%20%20aa1d2edc716c28ce8547b49c36acc745eb4f0a1db1f1d362233a8c81060a3518%201320%20procmail_3.22-26.dsc%0A%3E%20%20f1b9d15277013f2ae300a73a51417efc4eaf283f3629986dc8470cdab11f9fb3%2020152%20procmail_3.22-26.debian.tar.xz%0A%3E%20%2095ad70de092dbdd008a81afa52280703a22046e1f01e381d622b3ea4f2ce7988%203857%20procmail_3.22-26_source.buildinfo%0A%3E%20Files%3A%0A%3E%20%20cbcdaa0ff0c9f576dc496bf4054e4a12%201320%20mail%20standard%20procmail_3.22-26.dsc%0A%3E%20%2056b2ef59dade568b6e5e9ca4e618fec7%2020152%20mail%20standard%20procmail_3.22-26.debian.tar.xz%0A%3E%20%2007d414301b40a88bc9d7de067c323bf9%203857%20mail%20standard%20procmail_3.22-26_source.buildinfo%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNATURE-----%0A%3E%20%0A%3E%20iQEzBAEBCAAdFiEE1Uw7%2Bv%2BwQt44LaXXQc5%2FC58bizIFAloOF7cACgkQQc5%2FC58b%0A&amp;In-Reply-To=%3CE1eFTgT-0005jd-LI%40fasolo.debian.org%3E&amp;References=%3CE1eFTgT-0005jd-LI%40fasolo.debian.org%3E&amp;subject=Re%3A%20Bug%23876511%3A%20fixed%20in%20procmail%203.22-26">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=sanvila%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Santiago Vila &lt;sanvila@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 876511-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#876511: fixed in procmail 3.22-26</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 16 Nov 2017 23:35:01 +0000</div>
</div>
<pre class="message">Source: procmail
Source-Version: 3.22-26

We believe that the bug you reported is fixed in the latest version of
procmail, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 876511@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Santiago Vila &lt;sanvila@debian.org&gt; (supplier of updated procmail package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Thu, 16 Nov 2017 23:42:36 +0100
Source: procmail
Binary: procmail
Architecture: source
Version: 3.22-26
Distribution: unstable
Urgency: medium
Maintainer: Santiago Vila &lt;sanvila@debian.org&gt;
Changed-By: Santiago Vila &lt;sanvila@debian.org&gt;
Description:
 procmail   - Versatile e-mail processor
Closes: <a href="bugreport.cgi?bug=876511">876511</a>
Changes:
 procmail (3.22-26) unstable; urgency=medium
 .
   * Fix buffer overflow in loadbuf(). Closes: #<a href="bugreport.cgi?bug=876511">876511</a>.
     Reported by Jakub Wilk using American Fuzzy Lop.
     For reference, this is <a href="https://security-tracker.debian.org/tracker/CVE-2017-16844">CVE-2017-16844</a>.
Checksums-Sha1:
 c0d1d7fd5b2b09f2df4c33dca5878304459ce040 1320 procmail_3.22-26.dsc
 e3bc9065f6d2aa7f230ed0b380ab9c103ce56da7 20152 procmail_3.22-26.debian.tar.xz
 a19b9bfeea58d5e1b5a12429189508ab499488ce 3857 procmail_3.22-26_source.buildinfo
Checksums-Sha256:
 aa1d2edc716c28ce8547b49c36acc745eb4f0a1db1f1d362233a8c81060a3518 1320 procmail_3.22-26.dsc
 f1b9d15277013f2ae300a73a51417efc4eaf283f3629986dc8470cdab11f9fb3 20152 procmail_3.22-26.debian.tar.xz
 95ad70de092dbdd008a81afa52280703a22046e1f01e381d622b3ea4f2ce7988 3857 procmail_3.22-26_source.buildinfo
Files:
 cbcdaa0ff0c9f576dc496bf4054e4a12 1320 mail standard procmail_3.22-26.dsc
 56b2ef59dade568b6e5e9ca4e618fec7 20152 mail standard procmail_3.22-26.debian.tar.xz
 07d414301b40a88bc9d7de067c323bf9 3857 mail standard procmail_3.22-26_source.buildinfo

-----BEGIN PGP SIGNATURE-----

iQEzBAEBCAAdFiEE1Uw7+v+wQt44LaXXQc5/C58bizIFAloOF7cACgkQQc5/C58b
izLmygf9HMG7e8ObDBlFQcFiMqvL+beeTlma62DpolkqbZlSkkfvrG7ZzBa/KWI1
6agCAM08EbZT97MiUvFJIDkoVwjMxpWzVgoUMQ3cEQLZNmIBi9a/sOPuzhriHCuf
zCo5S/qPYHa3XfXsnJLBCf1RKvK/4UPJXEnH2doKjjqKcg07MNsHaJA5LN+Y44+W
JI0yTIYTqfVZpxIlg5fiVML+SGVYQHfG6WSFUJFQLY8fDLgLeu4jkWxnqiET/r8k
T7EhU+49XilLO1P3zC6QaVIJyAvjDPOlnRbJyuS0Uc+1Nav89q+awp5xdGEfyxjt
lv50jxOkwWDLur1jXMVVYcZyWUbftg==
=HqOO
-----END PGP SIGNATURE-----



</pre>

<div class="infmessage"><hr><p>
<a name="21"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1510921982 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Fri, 17 Nov 2017 12:33:02 GMT) (<a href="bugreport.cgi?bug=876511;msg=22">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=22">mbox</a>, <a href="#21">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="23"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1510921982 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>.
 (Fri, 17 Nov 2017 12:33:02 GMT) (<a href="bugreport.cgi?bug=876511;msg=24">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="25"></a><a name="msg25"></a><a href="#25">Message #25</a> received at 876511@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=25">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=25">mbox</a>, <a href="mailto:876511@bugs.debian.org?subject=Re%3A%20Bug%23876511%3A%20formail%3A%20heap-based%20buffer%20overflow%20in%20loadbuf%28%29&amp;References=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E%0A%20%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E%0A%20%3C20171116213505.aujharr3etryrr6m%40nuc%3E%0A%20%3C20171117123055.76opgzz7dumtvmze%40lorien.valinor.li%3E&amp;In-Reply-To=%3C20171117123055.76opgzz7dumtvmze%40lorien.valinor.li%3E&amp;body=On%20Fri%2C%2017%20Nov%202017%2013%3A30%3A55%20%2B0100%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Santiago%2C%20hi%20Jakub%2C%0A%3E%20%0A%3E%20On%20Thu%2C%20Nov%2016%2C%202017%20at%2010%3A35%3A05PM%20%2B0100%2C%20Santiago%20Vila%20wrote%3A%0A%3E%20%3E%20On%20Sat%2C%20Sep%2023%2C%202017%20at%2012%3A24%3A35AM%20%2B0200%2C%20Jakub%20Wilk%20wrote%3A%0A%3E%20%3E%20%3E%20Package%3A%20procmail%0A%3E%20%3E%20%3E%20Version%3A%203.22-25%2Bb1%0A%3E%20%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20%3E%20%0A%3E%20%3E%20%3E%20formail%20crashes%20on%20the%20attached%20file%3A%0A%3E%20%3E%20%3E%20%0A%3E%20%3E%20%3E%20%20%20%24%20zcat%20overflow.822.gz%20%7C%20formail%20-r%0A%3E%20%3E%20%3E%20%20%20%2A%2A%2A%20Error%20in%20%60formail%27%3A%20corrupted%20size%20vs.%20prev_size%3A%200x584565a8%20%2A%2A%2A%0A%3E%20%3E%20%3E%20%20%20...%0A%3E%20%3E%20%3E%20%20%20Aborted%0A%3E%20%3E%20%3E%20%0A%3E%20%3E%20%3E%20I%20believe%20the%20culrpit%20is%20the%20loadbuf%28%29%20function.%20It%20looks%20like%20this%3A%0A%3E%20%3E%20%3E%20%0A%3E%20%3E%20%3E%20%20%20void%20loadbuf%28text%2Clen%29const%20char%2Aconst%20text%3Bconst%20size_t%20len%3B%0A%3E%20%3E%20%3E%20%20%20%7B%20if%28buffilled%2Blen%3Ebuflen%29%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%3E%20%3E%20%20%20%20%20%20%20%20buf%3Drealloc%28buf%2Cbuflen%2B%3DBsize%29%3B%0A%3E%20%3E%20%3E%20%20%20%20%20tmemmove%28buf%2Bbuffilled%2Ctext%2Clen%29%3Bbuffilled%2B%3Dlen%3B%0A%3E%20%3E%20%3E%20%20%20%7D%0A%3E%20%3E%20%3E%20%0A%3E%20%3E%20%3E%20When%20the%20buffer%20is%20too%20small%2C%20the%20function%20tries%20to%20resize%20it%2C%20but%20only%20by%0A%3E%20%3E%20%3E%20Bsize%20%28%3D128%29%20bytes.%20This%20is%20not%20necessarily%20enough.%0A%3E%20%3E%20%0A%3E%20%3E%20Thanks%20for%20the%20report%20and%20sorry%20for%20my%20late%20reply.%0A%3E%20%3E%20%0A%3E%20%3E%20Based%20on%20your%20analysis%2C%20it%20would%20seem%20that%20keeping%20trying%20the%20realloc%0A%3E%20%3E%20until%20the%20condition%20inside%20the%20if%20becomes%20false%20would%20fix%20this.%0A%3E%20%3E%20%0A%3E%20%3E%20I%20don%27t%20have%20an%20i386%20system%20around.%20Can%20you%20try%20the%20following%0A%3E%20%3E%20%28trivial%29%20attached%20patch%3F%0A%3E%20%3E%20%0A%3E%20%3E%20Salvatore%3A%20If%20this%20patch%20solves%20the%20issue%20and%20I%20upload%20it%20for%20unstable%2C%0A%3E%20%3E%20would%20you%20like%20me%20to%20care%2Fhelp%20about%20stable%20as%20well%3F%0A%3E%20%3E%20%28following%20your%20indications%29.%0A%3E%20%0A%3E%20It%27s%20possibly%20fine%20to%20fix%20this%20via%20a%20DSA%2C%20although%20I%27m%20not%20sure%20if%0A%3E%20it%27s%20limited%20to%20denial-of-service.%20Can%20you%20propose%20debdiffs%20for%0A%3E%20jessie-security%20and%20stretch-security%20to%20team%40security.debian.org%3F%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Salvatore%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Santiago Vila &lt;sanvila@unex.es&gt;, 876511@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Jakub Wilk &lt;jwilk@jwilk.net&gt;,
	Debian Security Team &lt;team@security.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#876511: formail: heap-based buffer overflow in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 17 Nov 2017 13:30:55 +0100</div>
</div>
<pre class="message">Hi Santiago, hi Jakub,

On Thu, Nov 16, 2017 at 10:35:05PM +0100, Santiago Vila wrote:
&gt; On Sat, Sep 23, 2017 at 12:24:35AM +0200, Jakub Wilk wrote:
&gt; &gt; Package: procmail
&gt; &gt; Version: 3.22-25+b1
&gt; &gt; Tags: security
&gt; &gt; 
&gt; &gt; formail crashes on the attached file:
&gt; &gt; 
&gt; &gt;   $ zcat overflow.822.gz | formail -r
&gt; &gt;   *** Error in `formail&#39;: corrupted size vs. prev_size: 0x584565a8 ***
&gt; &gt;   ...
&gt; &gt;   Aborted
&gt; &gt; 
&gt; &gt; I believe the culrpit is the loadbuf() function. It looks like this:
&gt; &gt; 
&gt; &gt;   void loadbuf(text,len)const char*const text;const size_t len;
&gt; &gt;   { if(buffilled+len&gt;buflen)                        /* buf can&#39;t hold the text */
&gt; &gt;        buf=realloc(buf,buflen+=Bsize);
&gt; &gt;     tmemmove(buf+buffilled,text,len);buffilled+=len;
&gt; &gt;   }
&gt; &gt; 
&gt; &gt; When the buffer is too small, the function tries to resize it, but only by
&gt; &gt; Bsize (=128) bytes. This is not necessarily enough.
&gt; 
&gt; Thanks for the report and sorry for my late reply.
&gt; 
&gt; Based on your analysis, it would seem that keeping trying the realloc
&gt; until the condition inside the if becomes false would fix this.
&gt; 
&gt; I don&#39;t have an i386 system around. Can you try the following
&gt; (trivial) attached patch?
&gt; 
&gt; Salvatore: If this patch solves the issue and I upload it for unstable,
&gt; would you like me to care/help about stable as well?
&gt; (following your indications).

It&#39;s possibly fine to fix this via a DSA, although I&#39;m not sure if
it&#39;s limited to denial-of-service. Can you propose debdiffs for
jessie-security and stretch-security to team@security.debian.org?

Regards,
Salvatore


</pre>

<div class="msgreceived"><hr><p>
<a name="26"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1510921986 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;procmail/3.22-24&#39;,
                                    &#39;procmail/3.22-25&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;procmail/3.22-25&#39;
                                  ]
            };
-->
<strong>Marked as found in versions procmail/3.22-24.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 17 Nov 2017 12:33:06 GMT) (<a href="bugreport.cgi?bug=876511;msg=27">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=27">mbox</a>, <a href="#26">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="28"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1510950963 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Fri, 17 Nov 2017 20:36:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=29">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=29">mbox</a>, <a href="#28">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="30"></a><a name="msg30"></a><a href="#30">Message #30</a> received at 876511@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=30">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=30">mbox</a>, <a href="mailto:876511@bugs.debian.org?In-Reply-To=%3C20171117203358.6cbthi56s6c7wrzz%40jwilk.net%3E&amp;References=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E%0A%20%3C20171116213505.aujharr3etryrr6m%40nuc%3E%0A%20%3C20171117203358.6cbthi56s6c7wrzz%40jwilk.net%3E&amp;subject=Re%3A%20Bug%23876511%3A%20formail%3A%20heap-based%20buffer%20overflow%20in%20loadbuf%28%29&amp;body=On%20Fri%2C%2017%20Nov%202017%2021%3A33%3A58%20%2B0100%20Jakub%20Wilk%20%3Cjwilk%40jwilk.net%3E%20wrote%3A%0A%3E%20%2A%20Santiago%20Vila%20%3Csanvila%40unex.es%3E%2C%202017-11-16%2C%2022%3A35%3A%0A%3E%20%3E-%7B%20if%28buffilled%2Blen%3Ebuflen%29%09%09%09%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%3E%2B%7B%20while%28buffilled%2Blen%3Ebuflen%29%09%09%09%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%3E%20%20%20%20%20%20buf%3Drealloc%28buf%2Cbuflen%2B%3DBsize%29%3B%0A%3E%20%0A%3E%20The%20patch%20looks%20to%20me%2C%20and%20I%20confirm%20that%20it%20fixes%20the%20crash.%0A%3E%20%0A%3E%20--%20%0A%3E%20Jakub%20Wilk%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jwilk%40jwilk.net" alt="">
<div class="header"><span class="headerfield">From:</span> Jakub Wilk &lt;jwilk@jwilk.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> 876511@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#876511: formail: heap-based buffer overflow in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 17 Nov 2017 21:33:58 +0100</div>
</div>
<pre class="message flowed">* Santiago Vila &lt;sanvila@unex.es&gt;, 2017-11-16, 22:35:
&gt;-{ if(buffilled+len&gt;buflen)			  /* buf can&#39;t hold the text */
&gt;+{ while(buffilled+len&gt;buflen)			  /* buf can&#39;t hold the text */
&gt;      buf=realloc(buf,buflen+=Bsize);

The patch looks to me, and I confirm that it fixes the crash.

-- 
Jakub Wilk


</pre>

<div class="infmessage"><hr><p>
<a name="31"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1511090823 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Sun, 19 Nov 2017 11:27:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=32">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=32">mbox</a>, <a href="#31">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="33"></a>
<!-- request_addr: Pierre-Elliott Bécue &lt;becue@crans.org&gt; -->
<!-- time:1511090823 -->
<strong>Acknowledgement sent</strong>
to <code>Pierre-Elliott Bécue &lt;becue@crans.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>.
 (Sun, 19 Nov 2017 11:27:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=34">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=34">mbox</a>, <a href="#33">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="35"></a><a name="msg35"></a><a href="#35">Message #35</a> received at 876511@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=35">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=35">mbox</a>, <a href="mailto:876511@bugs.debian.org?body=On%20Sun%2C%2019%20Nov%202017%2012%3A18%3A28%20%2B0100%20Pierre-Elliott%20%3D%3Fiso-8859-1%3FQ%3FB%3DE9cue%3F%3D%20%3Cbecue%40crans.org%3E%20wrote%3A%0A%3E%20Actually%2C%20there%20might%20be%20another%20issue%3A%0A%3E%20%0A%3E%20%3E%2B%7B%20while%28buffilled%2Blen%3Ebuflen%29%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%3E%20%20%20%20%20%20buf%3Drealloc%28buf%2Cbuflen%2B%3DBsize%29%3B%0A%3E%20%0A%3E%20If%20buffilled%20%3E%20INT_MAX%20-%20len%2C%20I%20think%20this%20loop%20won%27t%20work%20and%20so%20that%0A%3E%20one%27ll%20have%20the%20same%20overflow%20as%20the%20tmemmove%20will%20be%20executed%20without%20any%0A%3E%20resize.%0A%3E%20%0A%3E%20I%27m%20not%20sure%20how%20it%20could%20be%20exploited%2C%20and%20I%20might%20be%20wrong%2C%20but%20maybe%20one%0A%3E%20should%20also%20check%20that%3F%0A%3E%20%0A%3E%20--%20%0A%3E%20PEB%0A&amp;References=%3C20171119111828.xieynkwjmkk5aafj%40crans.org%3E&amp;In-Reply-To=%3C20171119111828.xieynkwjmkk5aafj%40crans.org%3E&amp;subject=Re%3A%20formail%3A%20CVE-2017-16844%3A%20heap-based%20buffer%20overflow%20in%20loadbuf%28%29">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=becue%40crans.org" alt="">
<div class="header"><span class="headerfield">From:</span> Pierre-Elliott Bécue &lt;becue@crans.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 876511@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> formail: CVE-2017-16844: heap-based buffer overflow in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 19 Nov 2017 12:18:28 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=876511;msg=35">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Actually, there might be another issue:

&gt;+{ while(buffilled+len&gt;buflen)           /* buf can&#39;t hold the text */
&gt;      buf=realloc(buf,buflen+=Bsize);

If buffilled &gt; INT_MAX - len, I think this loop won&#39;t work and so that
one&#39;ll have the same overflow as the tmemmove will be executed without any
resize.

I&#39;m not sure how it could be exploited, and I might be wrong, but maybe one
should also check that?

-- 
PEB
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=876511;filename=signature.asc;msg=35">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="36"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1511094063 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
<code>Bug#876511</code>; Package <code>procmail</code>.
 (Sun, 19 Nov 2017 12:21:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=37">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=37">mbox</a>, <a href="#36">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="38"></a>
<!-- request_addr: Santiago Vila &lt;sanvila@unex.es&gt; -->
<!-- time:1511094063 -->
<strong>Acknowledgement sent</strong>
to <code>Santiago Vila &lt;sanvila@unex.es&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>.
 (Sun, 19 Nov 2017 12:21:03 GMT) (<a href="bugreport.cgi?bug=876511;msg=39">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=39">mbox</a>, <a href="#38">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="40"></a><a name="msg40"></a><a href="#40">Message #40</a> received at 876511@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=40">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=40">mbox</a>, <a href="mailto:876511@bugs.debian.org?body=On%20Sun%2C%2019%20Nov%202017%2013%3A16%3A46%20%2B0100%20Santiago%20Vila%20%3Csanvila%40unex.es%3E%20wrote%3A%0A%3E%20On%20Sun%2C%20Nov%2019%2C%202017%20at%2012%3A18%3A28PM%20%2B0100%2C%20Pierre-Elliott%20B%C3%A9cue%20wrote%3A%0A%3E%20%3E%20Actually%2C%20there%20might%20be%20another%20issue%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%3E%2B%7B%20while%28buffilled%2Blen%3Ebuflen%29%20%20%20%20%20%20%20%20%20%20%20%2F%2A%20buf%20can%27t%20hold%20the%20text%20%2A%2F%0A%3E%20%3E%20%3E%20%20%20%20%20%20buf%3Drealloc%28buf%2Cbuflen%2B%3DBsize%29%3B%0A%3E%20%3E%20%0A%3E%20%3E%20If%20buffilled%20%3E%20INT_MAX%20-%20len%2C%20I%20think%20this%20loop%20won%27t%20work%20and%20so%20that%0A%3E%20%3E%20one%27ll%20have%20the%20same%20overflow%20as%20the%20tmemmove%20will%20be%20executed%20without%20any%0A%3E%20%3E%20resize.%0A%3E%20%3E%20%0A%3E%20%3E%20I%27m%20not%20sure%20how%20it%20could%20be%20exploited%2C%20and%20I%20might%20be%20wrong%2C%20but%20maybe%20one%0A%3E%20%3E%20should%20also%20check%20that%3F%0A%3E%20%0A%3E%20All%20variables%20involved%20are%20size_t%2C%20which%20is%20at%20least%2032%20bits%20on%20i386.%0A%3E%20%0A%3E%20I%20guess%20you%20would%20need%20a%204GB-long%20email%20message%20to%20%22exploit%22%20that.%0A%3E%20%0A%3E%20However%2C%20if%20your%20inbox%20allow%20such%20big%20messages%2C%20then%20you%20don%27t%20need%20an%0A%3E%20exploit%20at%20all.%20The%20message%20itself%20would%20already%20create%20a%20Denial%20Of%0A%3E%20Service%20issue.%20So%20this%20minor%20issue%20about%20size_t%20variables%20would%20be%20the%0A%3E%20least%20of%20our%20worries.%0A%3E%20%0A%3E%20Thanks.%0A%3E%20%0A%3E%20%0A&amp;References=%3C20170922222434.6ukgzkhmieapaqwt%40jwilk.net%3E%0A%20%3C20171119111828.xieynkwjmkk5aafj%40crans.org%3E%0A%20%3C20171119121646.exkxkx6b2swnpxsk%40nuc%3E&amp;In-Reply-To=%3C20171119121646.exkxkx6b2swnpxsk%40nuc%3E&amp;subject=Re%3A%20Bug%23876511%3A%20formail%3A%20CVE-2017-16844%3A%20heap-based%20buffer%20overflow%0A%20in%20loadbuf%28%29">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=sanvila%40unex.es" alt="">
<div class="header"><span class="headerfield">From:</span> Santiago Vila &lt;sanvila@unex.es&gt;</div>
<div class="header"><span class="headerfield">To:</span> Pierre-Elliott Bécue &lt;becue@crans.org&gt;,
	876511@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#876511: formail: CVE-2017-16844: heap-based buffer overflow
 in loadbuf()</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 19 Nov 2017 13:16:46 +0100</div>
</div>
<pre class="message">On Sun, Nov 19, 2017 at 12:18:28PM +0100, Pierre-Elliott Bécue wrote:
&gt; Actually, there might be another issue:
&gt; 
&gt; &gt;+{ while(buffilled+len&gt;buflen)           /* buf can&#39;t hold the text */
&gt; &gt;      buf=realloc(buf,buflen+=Bsize);
&gt; 
&gt; If buffilled &gt; INT_MAX - len, I think this loop won&#39;t work and so that
&gt; one&#39;ll have the same overflow as the tmemmove will be executed without any
&gt; resize.
&gt; 
&gt; I&#39;m not sure how it could be exploited, and I might be wrong, but maybe one
&gt; should also check that?

All variables involved are size_t, which is at least 32 bits on i386.

I guess you would need a 4GB-long email message to &quot;exploit&quot; that.

However, if your inbox allow such big messages, then you don&#39;t need an
exploit at all. The message itself would already create a Denial Of
Service issue. So this minor issue about size_t variables would be the
least of our worries.

Thanks.


</pre>

<div class="msgreceived"><hr><p>
<a name="41"></a>
<!-- request_addr: Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1511131915 -->
<strong>Reply sent</strong>
to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Sun, 19 Nov 2017 22:51:55 GMT) (<a href="bugreport.cgi?bug=876511;msg=42">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=42">mbox</a>, <a href="#41">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="43"></a>
<!-- request_addr: Jakub Wilk &lt;jwilk@jwilk.net&gt; -->
<!-- time:1511131915 -->
<strong>Notification sent</strong>
to <code>Jakub Wilk &lt;jwilk@jwilk.net&gt;</code>:<br>
Bug acknowledged by developer.
 (Sun, 19 Nov 2017 22:51:55 GMT) (<a href="bugreport.cgi?bug=876511;msg=44">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=44">mbox</a>, <a href="#43">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="45"></a><a name="msg45"></a><a href="#45">Message #45</a> received at 876511-close@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=45">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=45">mbox</a>, <a href="mailto:876511@bugs.debian.org?body=On%20Sun%2C%2019%20Nov%202017%2022%3A47%3A14%20%2B0000%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20procmail%0A%3E%20Source-Version%3A%203.22-25%2Bdeb9u1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20procmail%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20876511%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%20%28supplier%20of%20updated%20procmail%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Sun%2C%2019%20Nov%202017%2000%3A50%3A34%20%2B0100%0A%3E%20Source%3A%20procmail%0A%3E%20Binary%3A%20procmail%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%203.22-25%2Bdeb9u1%0A%3E%20Distribution%3A%20stretch-security%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%0A%3E%20Changed-By%3A%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20procmail%20%20%20-%20Versatile%20e-mail%20processor%0A%3E%20Closes%3A%20876511%0A%3E%20Changes%3A%0A%3E%20%20procmail%20%283.22-25%2Bdeb9u1%29%20stretch-security%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Fix%20buffer%20overflow%20in%20loadbuf%28%29.%20Closes%3A%20%23876511.%0A%3E%20%20%20%20%20%20Reported%20by%20Jakub%20Wilk%20using%20American%20Fuzzy%20Lop.%0A%3E%20%20%20%20%20%20For%20reference%2C%20this%20is%20CVE-2017-16844.%0A%3E%20Checksums-Sha1%3A%0A%3E%20%200173d72fcd61cda46ca66363939704e40b4b6195%201348%20procmail_3.22-25%2Bdeb9u1.dsc%0A%3E%20%20cd4e44c15559816453fd60349e5a32289f6f2965%20226817%20procmail_3.22.orig.tar.gz%0A%3E%20%20e4d6f9cb38c29d11521fd081fca75adeeb2486d5%2020148%20procmail_3.22-25%2Bdeb9u1.debian.tar.xz%0A%3E%20%20548c5a66172301a584512f2efd1973b95cbaf81f%203983%20procmail_3.22-25%2Bdeb9u1_source.buildinfo%0A%3E%20Checksums-Sha256%3A%0A%3E%20%2082a68568288e4a90915f03061475c3f7751bec8e3e4958f07820804d7076607b%201348%20procmail_3.22-25%2Bdeb9u1.dsc%0A%3E%20%20087c75b34dd33d8b9df5afe9e42801c9395f4bf373a784d9bc97153b0062e117%20226817%20procmail_3.22.orig.tar.gz%0A%3E%20%20f5b5b88ad0227fe17550112cc6904a0f7cb4c518dd7e880d77ed262e8e0d512c%2020148%20procmail_3.22-25%2Bdeb9u1.debian.tar.xz%0A%3E%20%206f5593d3e204161253b0ba2bbb49501896fe6fba23d97ef071509c8264370692%203983%20procmail_3.22-25%2Bdeb9u1_source.buildinfo%0A%3E%20Files%3A%0A%3E%20%20e590abc5c0af8037cc94bb9505ad1e43%201348%20mail%20standard%20procmail_3.22-25%2Bdeb9u1.dsc%0A%3E%20%201678ea99b973eb77eda4ecf6acae53f1%20226817%20mail%20standard%20procmail_3.22.orig.tar.gz%0A%3E%20%207b2168bea67bf9d4cbb1278fa630d1d6%2020148%20mail%20standard%20procmail_3.22-25%2Bdeb9u1.debian.tar.xz%0A%3E%20%20c3d8efc6dc9eac9c3ca0b3a48c44e73c%203983%20mail%20standard%20procmail_3.22-25%2Bdeb9u1_source.buildinfo%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23876511%3A%20fixed%20in%20procmail%203.22-25%2Bdeb9u1&amp;References=%3CE1eGYMs-000EdU-84%40fasolo.debian.org%3E&amp;In-Reply-To=%3CE1eGYMs-000EdU-84%40fasolo.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=sanvila%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Santiago Vila &lt;sanvila@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 876511-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#876511: fixed in procmail 3.22-25+deb9u1</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 19 Nov 2017 22:47:14 +0000</div>
</div>
<pre class="message">Source: procmail
Source-Version: 3.22-25+deb9u1

We believe that the bug you reported is fixed in the latest version of
procmail, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 876511@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Santiago Vila &lt;sanvila@debian.org&gt; (supplier of updated procmail package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Sun, 19 Nov 2017 00:50:34 +0100
Source: procmail
Binary: procmail
Architecture: source
Version: 3.22-25+deb9u1
Distribution: stretch-security
Urgency: high
Maintainer: Santiago Vila &lt;sanvila@debian.org&gt;
Changed-By: Santiago Vila &lt;sanvila@debian.org&gt;
Description:
 procmail   - Versatile e-mail processor
Closes: <a href="bugreport.cgi?bug=876511">876511</a>
Changes:
 procmail (3.22-25+deb9u1) stretch-security; urgency=high
 .
   * Fix buffer overflow in loadbuf(). Closes: #<a href="bugreport.cgi?bug=876511">876511</a>.
     Reported by Jakub Wilk using American Fuzzy Lop.
     For reference, this is <a href="https://security-tracker.debian.org/tracker/CVE-2017-16844">CVE-2017-16844</a>.
Checksums-Sha1:
 0173d72fcd61cda46ca66363939704e40b4b6195 1348 procmail_3.22-25+deb9u1.dsc
 cd4e44c15559816453fd60349e5a32289f6f2965 226817 procmail_3.22.orig.tar.gz
 e4d6f9cb38c29d11521fd081fca75adeeb2486d5 20148 procmail_3.22-25+deb9u1.debian.tar.xz
 548c5a66172301a584512f2efd1973b95cbaf81f 3983 procmail_3.22-25+deb9u1_source.buildinfo
Checksums-Sha256:
 82a68568288e4a90915f03061475c3f7751bec8e3e4958f07820804d7076607b 1348 procmail_3.22-25+deb9u1.dsc
 087c75b34dd33d8b9df5afe9e42801c9395f4bf373a784d9bc97153b0062e117 226817 procmail_3.22.orig.tar.gz
 f5b5b88ad0227fe17550112cc6904a0f7cb4c518dd7e880d77ed262e8e0d512c 20148 procmail_3.22-25+deb9u1.debian.tar.xz
 6f5593d3e204161253b0ba2bbb49501896fe6fba23d97ef071509c8264370692 3983 procmail_3.22-25+deb9u1_source.buildinfo
Files:
 e590abc5c0af8037cc94bb9505ad1e43 1348 mail standard procmail_3.22-25+deb9u1.dsc
 1678ea99b973eb77eda4ecf6acae53f1 226817 mail standard procmail_3.22.orig.tar.gz
 7b2168bea67bf9d4cbb1278fa630d1d6 20148 mail standard procmail_3.22-25+deb9u1.debian.tar.xz
 c3d8efc6dc9eac9c3ca0b3a48c44e73c 3983 mail standard procmail_3.22-25+deb9u1_source.buildinfo

-----BEGIN PGP SIGNATURE-----

iQEzBAEBCAAdFiEE1Uw7+v+wQt44LaXXQc5/C58bizIFAloQylQACgkQQc5/C58b
izIhQwf+PoCH4TP8TA/Okagbl+R2xRzJt9jPioTkZ5HoNTHXaznWNx6OIkikheFV
dr0up/szJuGh7yazL7nyepylWEgs5AgBvmHCt+LJv+EfRrrwG+dOlqBj6bsOkl+r
MOIdiOWNH6VI25dsyLoPEGjlSFDjFuqbWmTeyfyqatIaJEwWTtqvjr9Oy9CJzh8G
OQfEQIW8IagM7T7qik/34dMFGktQdFpDboBZUb2Ztk6EALcUKtPOMHxRfFQZcIgw
NZLic2y84aQfZYwW9Ids6yX6tps36XQnZcLETd3hzCoS55uiOP4DtP4N1WP7hr3/
ejg4+JKEz0F3XIk4LIvtXv9DuwMQjA==
=7OCt
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="46"></a>
<!-- request_addr: Santiago Vila &lt;sanvila@debian.org&gt; -->
<!-- time:1511131917 -->
<strong>Reply sent</strong>
to <code>Santiago Vila &lt;sanvila@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Sun, 19 Nov 2017 22:51:57 GMT) (<a href="bugreport.cgi?bug=876511;msg=47">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=47">mbox</a>, <a href="#46">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="48"></a>
<!-- request_addr: Jakub Wilk &lt;jwilk@jwilk.net&gt; -->
<!-- time:1511131918 -->
<strong>Notification sent</strong>
to <code>Jakub Wilk &lt;jwilk@jwilk.net&gt;</code>:<br>
Bug acknowledged by developer.
 (Sun, 19 Nov 2017 22:51:58 GMT) (<a href="bugreport.cgi?bug=876511;msg=49">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=49">mbox</a>, <a href="#48">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="50"></a><a name="msg50"></a><a href="#50">Message #50</a> received at 876511-close@bugs.debian.org (<a href="bugreport.cgi?bug=876511;msg=50">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=50">mbox</a>, <a href="mailto:876511@bugs.debian.org?References=%3CE1eGYNO-000EqH-4S%40fasolo.debian.org%3E&amp;In-Reply-To=%3CE1eGYNO-000EqH-4S%40fasolo.debian.org%3E&amp;subject=Re%3A%20Bug%23876511%3A%20fixed%20in%20procmail%203.22-24%2Bdeb8u1&amp;body=On%20Sun%2C%2019%20Nov%202017%2022%3A47%3A46%20%2B0000%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20procmail%0A%3E%20Source-Version%3A%203.22-24%2Bdeb8u1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20procmail%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20876511%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%20%28supplier%20of%20updated%20procmail%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Sun%2C%2019%20Nov%202017%2001%3A05%3A26%20%2B0100%0A%3E%20Source%3A%20procmail%0A%3E%20Binary%3A%20procmail%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%203.22-24%2Bdeb8u1%0A%3E%20Distribution%3A%20jessie-security%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%0A%3E%20Changed-By%3A%20Santiago%20Vila%20%3Csanvila%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20procmail%20%20%20-%20Versatile%20e-mail%20processor%0A%3E%20Closes%3A%20876511%0A%3E%20Changes%3A%0A%3E%20%20procmail%20%283.22-24%2Bdeb8u1%29%20jessie-security%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Fix%20buffer%20overflow%20in%20loadbuf%28%29.%20Closes%3A%20%23876511.%0A%3E%20%20%20%20%20%20Reported%20by%20Jakub%20Wilk%20using%20American%20Fuzzy%20Lop.%0A%3E%20%20%20%20%20%20For%20reference%2C%20this%20is%20CVE-2017-16844.%0A%3E%20Checksums-Sha1%3A%0A%3E%20%20f9e080b97052103ea1a82f95415af0629b9a9aab%201333%20procmail_3.22-24%2Bdeb8u1.dsc%0A%3E%20%20cd4e44c15559816453fd60349e5a32289f6f2965%20226817%20procmail_3.22.orig.tar.gz%0A%3E%20%2086463dccbb441a0ce3eb4ca59210fa27c1adde67%2020092%20procmail_3.22-24%2Bdeb8u1.debian.tar.xz%0A%3E%20Checksums-Sha256%3A%0A%3E%20%20b8abb10db29e82fa3813a98e0f1b8a0a6dba93e5f99f9cabdb07381371585c94%201333%20procmail_3.22-24%2Bdeb8u1.dsc%0A%3E%20%20087c75b34dd33d8b9df5afe9e42801c9395f4bf373a784d9bc97153b0062e117%20226817%20procmail_3.22.orig.tar.gz%0A%3E%20%209c0e8394c03054a15d03a165c11bd8b4043405c7f5113bcad7c4074363208512%2020092%20procmail_3.22-24%2Bdeb8u1.debian.tar.xz%0A%3E%20Files%3A%0A%3E%20%209ef181683b1b3889b0c3c2f031e0a1bf%201333%20mail%20standard%20procmail_3.22-24%2Bdeb8u1.dsc%0A%3E%20%201678ea99b973eb77eda4ecf6acae53f1%20226817%20mail%20standard%20procmail_3.22.orig.tar.gz%0A%3E%20%20ac822eb2a88dc5e2d73d19ab008ff7d9%2020092%20mail%20standard%20procmail_3.22-24%2Bdeb8u1.debian.tar.xz%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNATURE-----%0A%3E%20Version%3A%20GnuPG%20v1%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=sanvila%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Santiago Vila &lt;sanvila@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 876511-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#876511: fixed in procmail 3.22-24+deb8u1</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 19 Nov 2017 22:47:46 +0000</div>
</div>
<pre class="message">Source: procmail
Source-Version: 3.22-24+deb8u1

We believe that the bug you reported is fixed in the latest version of
procmail, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 876511@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Santiago Vila &lt;sanvila@debian.org&gt; (supplier of updated procmail package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Sun, 19 Nov 2017 01:05:26 +0100
Source: procmail
Binary: procmail
Architecture: source
Version: 3.22-24+deb8u1
Distribution: jessie-security
Urgency: high
Maintainer: Santiago Vila &lt;sanvila@debian.org&gt;
Changed-By: Santiago Vila &lt;sanvila@debian.org&gt;
Description:
 procmail   - Versatile e-mail processor
Closes: <a href="bugreport.cgi?bug=876511">876511</a>
Changes:
 procmail (3.22-24+deb8u1) jessie-security; urgency=high
 .
   * Fix buffer overflow in loadbuf(). Closes: #<a href="bugreport.cgi?bug=876511">876511</a>.
     Reported by Jakub Wilk using American Fuzzy Lop.
     For reference, this is <a href="https://security-tracker.debian.org/tracker/CVE-2017-16844">CVE-2017-16844</a>.
Checksums-Sha1:
 f9e080b97052103ea1a82f95415af0629b9a9aab 1333 procmail_3.22-24+deb8u1.dsc
 cd4e44c15559816453fd60349e5a32289f6f2965 226817 procmail_3.22.orig.tar.gz
 86463dccbb441a0ce3eb4ca59210fa27c1adde67 20092 procmail_3.22-24+deb8u1.debian.tar.xz
Checksums-Sha256:
 b8abb10db29e82fa3813a98e0f1b8a0a6dba93e5f99f9cabdb07381371585c94 1333 procmail_3.22-24+deb8u1.dsc
 087c75b34dd33d8b9df5afe9e42801c9395f4bf373a784d9bc97153b0062e117 226817 procmail_3.22.orig.tar.gz
 9c0e8394c03054a15d03a165c11bd8b4043405c7f5113bcad7c4074363208512 20092 procmail_3.22-24+deb8u1.debian.tar.xz
Files:
 9ef181683b1b3889b0c3c2f031e0a1bf 1333 mail standard procmail_3.22-24+deb8u1.dsc
 1678ea99b973eb77eda4ecf6acae53f1 226817 mail standard procmail_3.22.orig.tar.gz
 ac822eb2a88dc5e2d73d19ab008ff7d9 20092 mail standard procmail_3.22-24+deb8u1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAEBCAAGBQJaEMruAAoJEEHOfwufG4sygGsH/jWOs5yyypIWl3TwJcKTAt7w
Y3DTmvEtCYz8n7meonBZtwXlGScm1oPptdKlpOxKgfQrfafauizS0zgkzVyK1zPM
2oGwT4g+KaSYlnidekFMcL1IFvBapemfYovhDb6iKkxlkgR+JAUdjK1uD8Dk+kXq
NRqFygqU/O0QIQPwLNXcem4Eqc7R/4HEFD1eHydmYNaF4ctWI5lrHf27dLTijgbw
tjJWkFZw5Ux19QbDpHXSnkbh+zm/ePADV9statIDXhogCp4O4kKRYsm5ETxjHqdm
DbIGxlsRIqF8XrX5XWwTTG2my86cah+5qJzci8gjOcPBsV5QFksfDLzAlkvCxAk=
=LMD2
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="51"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1513581980 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Mon, 18 Dec 2017 07:26:20 GMT) (<a href="bugreport.cgi?bug=876511;msg=52">full text</a>, <a href="bugreport.cgi?bug=876511;mbox=yes;msg=52">mbox</a>, <a href="#51">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=876511">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:34:53 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
