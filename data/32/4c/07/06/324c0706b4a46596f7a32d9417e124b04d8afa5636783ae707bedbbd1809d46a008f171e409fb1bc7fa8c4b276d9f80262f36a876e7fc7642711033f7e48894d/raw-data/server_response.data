<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/glance/+bug/1482371/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1482371 “[OSSA 2015-019] Image status can be changed by pas...” : Bugs : Glance</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1482371" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1482371/bug.atom" title="Bug 1482371 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="Using Glance v1, one is able to change the status of an image to any one of the valid statuses by passing the header 'x-image-meta-status' with PUT on /images/&lt;image id&gt;.  This bug provides a way for an image to transition states that are otherwise not possible in an image's lifecycle.

See http://paste.openstack.org/show/pNL7kvIZUz7cWJQwX64d/ for a reproduction of this behavior on devstack.

As shown in the above paste, though one is able to change the status of an active image to queued, up..." />
      <meta property="og:description" content="Using Glance v1, one is able to change the status of an image to any one of the valid statuses by passing the header 'x-image-meta-status' with PUT on /images/&lt;image id&gt;.  This bug provides a way for an image to transition states that are otherwise not possible in an image's lifecycle.

See http://paste.openstack.org/show/pNL7kvIZUz7cWJQwX64d/ for a reproduction of this behavior on devstack.

As shown in the above paste, though one is able to change the status of an active image to queued, up..." />
    

    
    
      <meta property="og:title" content="Bug #1482371 “[OSSA 2015-019] Image status can be changed by pas...” : Bugs : Glance" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1482371" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["api", "cache", "documentation", "domain-proxy", "gate", "i18n", "low-hanging-fruit", "metadef", "mitaka-backport-potential", "newton-backport-potential", "ocata-rc-potential", "ops", "scrubber", "security"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/glance/+bug/1482371/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/glance"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/355215744/glance-chipmunk-64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/glance">Glance</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/glance">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/glance">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/glance">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/glance">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/glance">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/glance">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    [OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1482371 reported by
      <a href="https://launchpad.net/~hemanth-makkapati" class="sprite person">Hemanth Makkapati</a>
      <time title="2015-08-06 20:14:09 UTC" datetime="2015-08-06T20:14:09.370832+00:00">on 2015-08-06</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">18</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary1886787">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/+bug/1482371/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1886787">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/glance">Glance</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/+bug/1482371/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/glance/+bug/1482371/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1886787">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~stuart-mclaren">Stuart McLaren</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/11.0.0">Glance 11.0.0 "liberty"</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1886787">
     <td colspan="7"><form action="/glance/+bug/1482371/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance">Glance</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~hemanth-makkapati" class="sprite person">Hemanth Makkapati</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2015-08-06 20:14:09 UTC" datetime="2015-08-06T20:14:09.370832+00:00">2015-08-06</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2015-08-06 20:29:02 UTC" datetime="2015-08-06T20:29:02.742769+00:00">2015-08-06</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2015-08-06 20:32:41 UTC" datetime="2015-08-06T20:32:41.986091+00:00">2015-08-06</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2015-09-22 18:35:00 UTC" datetime="2015-09-22T18:35:00.635134+00:00">2015-09-22</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2015-09-26 08:18:02 UTC" datetime="2015-09-26T08:18:02.251231+00:00">2015-09-26</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="glance.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="glance.target.option.package" name="glance.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="glance.target.distribution" name="glance.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="glance.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="glance.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="glance.target.package"
                         name="glance.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;glance.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('glance.target.package');
              var select_menu = Y.DOM.byId('glance.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-glance-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_team_text": "Remove team", "header": "Select a package", "show_remove_button": false, "selected_value": null, "step_title": "Search by name", "show_assign_me_button": false, "vocabulary_filters": [], "vocabulary_name": "DistributionPackage", "input_element": "glance.target.package", "show_widget_id": "show-widget-glance-target-package", "assign_me_text": "Pick me", "show_create_team": false, "remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "selected_value_metadata": null};
        var show_widget_id = 'show-widget-glance-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="glance.target.option.product" name="glance.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="glance" id="glance.target.product"
                         name="glance.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;glance.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('glance.target.product');
              var select_menu = Y.DOM.byId('glance.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-glance-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_team_text": "Remove team", "header": "Select a project", "show_remove_button": false, "selected_value": "glance", "step_title": "Search", "show_assign_me_button": false, "vocabulary_filters": [], "vocabulary_name": "Product", "input_element": "glance.target.product", "show_widget_id": "show-widget-glance-target-product", "assign_me_text": "Pick me", "show_create_team": false, "remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "selected_value_metadata": null};
        var show_widget_id = 'show-widget-glance-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance.status" name="glance.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="glance.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Glance 11.0.0
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance.assignee.assign_to_me" name="glance.assignee.option" value="glance.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="glance.assignee.assigned_to" name="glance.assignee.option" value="glance.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="glance.assignee.assigned_to">
              Stuart McLaren (stuart-mclaren)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance.comment_on_change" name="glance.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1945072">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/juno/+bug/1482371/+editstatus">
        &#8203;
      </a>
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/glance/juno">Juno</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/juno/+bug/1482371/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/glance/juno/+bug/1482371/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1945072">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/2014.2.4">Glance 2014.2.4</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1945072">
     <td colspan="7"><form action="/glance/juno/+bug/1482371/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance/juno">Glance juno</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~apevec" class="sprite person">Alan Pevec</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2015-11-14 10:32:04 UTC" datetime="2015-11-14T10:32:04.151547+00:00">2015-11-14</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2015-11-14 15:04:30 UTC" datetime="2015-11-14T15:04:30.675664+00:00">2015-11-14</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2015-11-14 15:04:30 UTC" datetime="2015-11-14T15:04:30.675664+00:00">2015-11-14</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2015-11-19 21:40:50 UTC" datetime="2015-11-19T21:40:50.708356+00:00">2015-11-19</time>
      </td>
    </tr>
  </table>
  <div class="field">
    
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_juno.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_juno.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_juno.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance_juno.status" name="glance_juno.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="glance_juno.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Glance 2014.2.4
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_juno.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="glance_juno.assignee.assign_to_nobody" name="glance_juno.assignee.option" value="glance_juno.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_juno.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance_juno.assignee.assign_to_me" name="glance_juno.assignee.option" value="glance_juno.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_juno.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance_juno.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance_juno.comment_on_change" name="glance_juno.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1982897">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/kilo/+bug/1482371/+editstatus">
        &#8203;
      </a>
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/glance/kilo">Kilo</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/kilo/+bug/1482371/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/glance/kilo/+bug/1482371/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1982897">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/glance/+milestone/2015.1.3">Glance 2015.1.3</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1982897">
     <td colspan="7"><form action="/glance/kilo/+bug/1482371/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance/kilo">Glance kilo</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~davewalker" class="sprite person">Dave Walker</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-01-21 20:19:24 UTC" datetime="2016-01-21T20:19:24.476519+00:00">2016-01-21</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2016-01-21 20:19:55 UTC" datetime="2016-01-21T20:19:55.715464+00:00">2016-01-21</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2016-01-21 20:19:55 UTC" datetime="2016-01-21T20:19:55.715464+00:00">2016-01-21</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2016-01-21 23:12:58 UTC" datetime="2016-01-21T23:12:58.903868+00:00">2016-01-21</time>
      </td>
    </tr>
  </table>
  <div class="field">
    
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_kilo.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_kilo.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance_kilo.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance_kilo.status" name="glance_kilo.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="glance_kilo.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Glance 2015.1.3
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance_kilo.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="glance_kilo.assignee.assign_to_nobody" name="glance_kilo.assignee.option" value="glance_kilo.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_kilo.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance_kilo.assignee.assign_to_me" name="glance_kilo.assignee.option" value="glance_kilo.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance_kilo.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance_kilo.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance_kilo.comment_on_change" name="glance_kilo.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1886798">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ossa/+bug/1482371/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1886798">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ossa/+bug/1482371/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ossa/+bug/1482371/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1886798">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1886798">
     <td colspan="7"><form action="/ossa/+bug/1482371/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ossa">OpenStack Security Advisory</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2015-08-06 20:30:23 UTC" datetime="2015-08-06T20:30:23.552305+00:00">2015-08-06</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2015-08-10 17:33:08 UTC" datetime="2015-08-10T17:33:08.380828+00:00">2015-08-10</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2015-09-08 14:10:44 UTC" datetime="2015-09-08T14:10:44.009968+00:00">2015-09-08</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2015-09-23 15:30:18 UTC" datetime="2015-09-23T15:30:18.404373+00:00">2015-09-23</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ossa.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ossa.target.option.package" name="ossa.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ossa.target.distribution" name="ossa.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ossa.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ossa.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ossa.target.package"
                         name="ossa.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.package');
              var select_menu = Y.DOM.byId('ossa.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_team_text": "Remove team", "header": "Select a package", "show_remove_button": false, "selected_value": null, "step_title": "Search by name", "show_assign_me_button": false, "vocabulary_filters": [], "vocabulary_name": "DistributionPackage", "input_element": "ossa.target.package", "show_widget_id": "show-widget-ossa-target-package", "assign_me_text": "Pick me", "show_create_team": false, "remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "selected_value_metadata": null};
        var show_widget_id = 'show-widget-ossa-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ossa.target.option.product" name="ossa.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ossa" id="ossa.target.product"
                         name="ossa.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.product');
              var select_menu = Y.DOM.byId('ossa.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_team_text": "Remove team", "header": "Select a project", "show_remove_button": false, "selected_value": "ossa", "step_title": "Search", "show_assign_me_button": false, "vocabulary_filters": [], "vocabulary_name": "Product", "input_element": "ossa.target.product", "show_widget_id": "show-widget-ossa-target-product", "assign_me_text": "Pick me", "show_create_team": false, "remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "selected_value_metadata": null};
        var show_widget_id = 'show-widget-ossa-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ossa.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ossa.status" name="ossa.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ossa.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="ossa.assignee.assign_to_nobody" name="ossa.assignee.option" value="ossa.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ossa.assignee.assign_to_me" name="ossa.assignee.option" value="ossa.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ossa.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ossa.comment_on_change" name="ossa.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/glance/+bug/1482371/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/glance/+bug/1482371/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/glance/+bug/1482371/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>Using Glance v1, one is able to change the status of an image to any one of the valid statuses by passing the header &#x27;x-image-<wbr />meta-status&#x27; with PUT on /images/&lt;image id&gt;.  This bug provides a way for an image to transition states that are otherwise not possible in an image&#x27;s lifecycle.</p>
<p>See <a rel="nofollow" href="http://paste.openstack.org/show/pNL7kvIZUz7cWJQwX64d/">http://<wbr />paste.openstack<wbr />.org/show/<wbr />pNL7kvIZUz7cWJQ<wbr />wX64d/</a> for a reproduction of this behavior on devstack.</p>
<p>As shown in the above paste, though one is able to change the status of an active image to queued, uploading data after re-setting the status to queued fails with a 400[1].  Though the purpose of [1] appears to be slightly different, it&#x27;s fortunately saving us from badly breaking the immutability guarantees of glance images.</p>
<p>[1] <a rel="nofollow" href="https://github.com/openstack/glance/blob/master/glance/api/v1/images.py#L760-L765">https:/<wbr />/github.<wbr />com/openstack/<wbr />glance/<wbr />blob/master/<wbr />glance/<wbr />api/v1/<wbr />images.<wbr />py#L760-<wbr />L765</a></p>
<p>NOTE: Marking this as a security vulnerability for now as users would be able to activate the deactivated images on their own. This probably affects deployments only where v1 is exposed publicly. However, it&#x27;s probably worth discussing this from a security perspective as well.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="unofficial-tag" href="/glance/+bugs?field.tag=in-stable-juno">in-stable-juno</a>
            <a class="unofficial-tag" href="/glance/+bugs?field.tag=in-stable-kilo">in-stable-kilo</a>
          </span>
          
          <a href="+edit" title="Edit tags" id="tags-trigger" class="sprite edit action-icon">Edit</a>
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2015-5251" title="OpenStack Image Service (Glance) befo...">2015-5251</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
    
    <time title="2015-08-06 20:29:02 UTC" datetime="2015-08-06T20:29:02.438314+00:00">on 2015-08-06</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Triaged
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-06T20:31:37.089439+00:00" title="2015-08-06 20:31:37 UTC">on 2015-08-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-06T20:31:50.590464+00:00" title="2015-08-06 20:31:50 UTC">on 2015-08-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This is a valid bug in Glance. It&#x27;s not very insecure but, if combined with certain features of v2 like deactivation of an image (that&#x27;s only allowed by admin by default), this change may result into bad image state and potentially give attackers the access to unauthorized image data.</p>
<p>Also, this has a per-condition that the v1 endpoint for Glance needs to be exposed. Not all deployments allow this and is not a standard, recommended practice.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This is a valid bug in Glance. It's not very insecure but, if combined with certain features of v2 like deactivation of an image (that's only allowed by admin by default), this change may result into bad image state and potentially give attackers the access to unauthorized image data.

Also, this has a per-condition that the v1 endpoint for Glance needs to be exposed. Not all deployments allow this and is not a standard, recommended practice.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; nikhil komawar (nikhil-komawar)
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
    
    <time title="2015-08-06 20:32:44 UTC" datetime="2015-08-06T20:32:44.823463+00:00">on 2015-08-06</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-06T20:35:19.721943+00:00" title="2015-08-06 20:35:19 UTC">on 2015-08-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Possible solution is to validate the headers and give back a 400 if &#x27;x-image-<wbr />meta-status&#x27; key is found in the update call.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Possible solution is to validate the headers and give back a 400 if 'x-image-meta-status' key is found in the update call.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-06T21:13:17.684256+00:00" title="2015-08-06 21:13:17 UTC">on 2015-08-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;m happy to see that the immutability does not seem to be threatened currently. That gives us way more room to breath.</p>
<p>Even still being security issue I think this should be made public as this bug was widely discussed in weekly glance team meeting: <a rel="nofollow" href="http://eavesdrop.openstack.org/meetings/glance/2015/glance.2015-08-06-14.03.log.txt">http://<wbr />eavesdrop.<wbr />openstack.<wbr />org/meetings/<wbr />glance/<wbr />2015/glance.<wbr />2015-08-<wbr />06-14.03.<wbr />log.txt</a> 14:29 +</p>
<p>Yes the image might get rendered unusable via mechanism that was never supposed to be there is quite a bit less worrying than what was discussed on the meeting.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I'm happy to see that the immutability does not seem to be threatened currently. That gives us way more room to breath.

Even still being security issue I think this should be made public as this bug was widely discussed in weekly glance team meeting: http://eavesdrop.openstack.org/meetings/glance/2015/glance.2015-08-06-14.03.log.txt 14:29 +

Yes the image might get rendered unusable via mechanism that was never supposed to be there is quite a bit less worrying than what was discussed on the meeting.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-06T21:29:38.564846+00:00" title="2015-08-06 21:29:38 UTC">on 2015-08-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>After having a chat with Hemanth, I&#x27;d like to pull back that previous statement about opening this bug. There is attack vector that has not been discussed openly. If admin has deactivated image due to malicious content/behavior, that image can be put back to queued and activated without approval.</p>
<p>This would allow booting new VMs from that potentially malicious image. So lets keep this closed for now.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">After having a chat with Hemanth, I'd like to pull back that previous statement about opening this bug. There is attack vector that has not been discussed openly. If admin has deactivated image due to malicious content/behavior, that image can be put back to queued and activated without approval.

This would allow booting new VMs from that potentially malicious image. So lets keep this closed for now.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-07T11:57:10.576261+00:00" title="2015-08-07 11:57:10 UTC">on 2015-08-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;ve found a couple of ways to change the image bytes (break the immutability guarantee).</p>
<p>1. Set the image back to queued and upload using v2</p>
<p>(<a rel="nofollow" href="http://paste.openstack.org/show/412169">http://<wbr />paste.openstack<wbr />.org/show/<wbr />412169</a>)</p>
<p>2. Use --location to replace the image location</p>
<p>(<a rel="nofollow" href="http://paste.openstack.org/show/412172">http://<wbr />paste.openstack<wbr />.org/show/<wbr />412172</a>)</p>
<p>When set_image_location is allowed by policy it&#x27;s always possible for a user to upload new<br />
bytes to the location behind glance&#x27;s back. But previously that would result in a checksum error<br />
when the user went to download the replaced bytes. The change in behaviour here is that the<br />
checksum, size, etc of the image are changed so the download will not raise any error.</p>
<p>I tried copy-from to change the image bytes, and I also tried setting the image status from the nova client.<br />
Both failed to do anything bad.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I've found a couple of ways to change the image bytes (break the immutability guarantee).


1. Set the image back to queued and upload using v2

(http://paste.openstack.org/show/412169)

2. Use --location to replace the image location

(http://paste.openstack.org/show/412172)

When set_image_location is allowed by policy it's always possible for a user to upload new
bytes to the location behind glance's back. But previously that would result in a checksum error
when the user went to download the replaced bytes. The change in behaviour here is that the
checksum, size, etc of the image are changed so the download will not raise any error.


I tried copy-from to change the image bytes, and I also tried setting the image status from the nova client.
Both failed to do anything bad.

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hemanth-makkapati" class="sprite person">Hemanth Makkapati (hemanth-makkapati)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-07T18:05:39.673198+00:00" title="2015-08-07 18:05:39 UTC">on 2015-08-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Oh well! I didn&#x27;t try uploading with v2. Good find, Stuart!</p>
<p>Also, mucking with my test environment further, I discovered that one can change created_at as well using the header &#x27;x-image-<wbr />meta-created_<wbr />at&#x27;. I haven&#x27;t tried doing the same with updated_at, deleted_at and deleted fields but I don&#x27;t see anything that stops them from getting modified either. I will try it here in a bit.</p>
<p>A lot of it has to do with the whitelisting of headers here, <a rel="nofollow" href="https://github.com/openstack/glance/blob/master/glance/common/utils.py#L59-L70">https:/<wbr />/github.<wbr />com/openstack/<wbr />glance/<wbr />blob/master/<wbr />glance/<wbr />common/<wbr />utils.py#<wbr />L59-L70</a>.</p>
<p>It appears that this was done very explicitly. Does anyone know what could be the reason for it?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Oh well! I didn't try uploading with v2. Good find, Stuart! 

Also, mucking with my test environment further, I discovered that one can change created_at as well using the header 'x-image-meta-created_at'. I haven't tried doing the same with updated_at, deleted_at and deleted fields but I don't see anything that stops them from getting modified either. I will try it here in a bit.

A lot of it has to do with the whitelisting of headers here, https://github.com/openstack/glance/blob/master/glance/common/utils.py#L59-L70. 

It appears that this was done very explicitly. Does anyone know what could be the reason for it? </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T08:51:50.747872+00:00" title="2015-08-10 08:51:50 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>From memory, those whitelisted headers are headers that are legal to return in a response to a user.</p>
<p>I think the idea was to prevent the leaking of a header that we don&#x27;t want to return. So, when we return<br />
a v1 response to a user the set of &#x27;x-image-meta-...&#x27; headers that is possible for the user to see is defined<br />
by this whitelist. (There had been a bug where we were returning something the user shouldn&#x27;t see as a<br />
header).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">From memory, those whitelisted headers are headers that are legal to return in a response to a user.

I think the idea was to prevent the leaking of a header that we don't want to return. So, when we return
a v1 response to a user the set of 'x-image-meta-...' headers that is possible for the user to see is defined
by this whitelist. (There had been a bug where we were returning something the user shouldn't see as a
header).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T14:38:15.452069+00:00" title="2015-08-10 14:38:15 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Hemanth @Nikhil</p>
<p>Is this something you guys have a chance to start work on?</p>
<p>If not, I can try to find time to take a look.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Hemanth @Nikhil

Is this something you guys have a chance to start work on?

If not, I can try to find time to take a look.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hemanth-makkapati" class="sprite person">Hemanth Makkapati (hemanth-makkapati)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T15:43:18.426833+00:00" title="2015-08-10 15:43:18 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for the note on whitelisted headers. What you said makes sense but it seems the whitelisting is used in a different context here. It&#x27;s used for accepting headers in the request as opposed to returning headers in the response.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for the note on whitelisted headers. What you said makes sense but it seems the whitelisting is used in a different context here. It's used for accepting headers in the request as opposed to returning headers in the response.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T15:56:16.292482+00:00" title="2015-08-10 15:56:16 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Looking again at the whitelisting of headers. It looks like previously any &#x27;x-image-meta-blah&#x27; header that the user provided would be passed from the api to the registry. The whitelist meant that any unexpected &#x27;x-image-meta-xxx&#x27; headers  would be rejected with 400. (But the whitelist doesn&#x27;t attempt to handle different behaviour for any of the defined headers.)</p>
<p>In v2 an attempt to write to a &#x27;read only&#x27; property such as status or updated_at, or a reserved property such as &#x27;owner&#x27; will raise a 403 (Forbidden).</p>
<p>In v1, if an attempt to write to &#x27;owner&#x27; is made the &#x27;x-image-<wbr />meta-owner&#x27; header will effectively just be dropped and 200 will be returned. If the image is active and an attempt is made to change size, checksum a 403 will be returned.</p>
<p>We&#x27;ll need to decide the behaviour for attempts to update &#x27;status&#x27;, &#x27;updated_at&#x27; etc, ie whether to silently drop them or return 403.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Looking again at the whitelisting of headers. It looks like previously any 'x-image-meta-blah' header that the user provided would be passed from the api to the registry. The whitelist meant that any unexpected 'x-image-meta-xxx' headers  would be rejected with 400. (But the whitelist doesn't attempt to handle different behaviour for any of the defined headers.)

In v2 an attempt to write to a 'read only' property such as status or updated_at, or a reserved property such as 'owner' will raise a 403 (Forbidden).

In v1, if an attempt to write to 'owner' is made the 'x-image-meta-owner' header will effectively just be dropped and 200 will be returned. If the image is active and an attempt is made to change size, checksum a 403 will be returned.

We'll need to decide the behaviour for attempts to update 'status', 'updated_at' etc, ie whether to silently drop them or return 403.


</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hemanth-makkapati" class="sprite person">Hemanth Makkapati (hemanth-makkapati)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T16:07:25.010787+00:00" title="2015-08-10 16:07:25 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Stuart,<br />
Nikhil was going to take a crack at it. But, I&#x27;m not sure of the current status. I think he is travelling currently. So, feel free to give it a go.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Stuart,
Nikhil was going to take a crack at it. But, I'm not sure of the current status. I think he is travelling currently. So, feel free to give it a go. </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2015-08-10 17:33:08 UTC" datetime="2015-08-10T17:33:08.139195+00:00">on 2015-08-10</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Incomplete &#8594; Confirmed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T17:37:01.022934+00:00" title="2015-08-10 17:37:01 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Here&#x27;s the current behaviour for the various headers which can be supplied:</p>
<p>x-image-<wbr />meta-location: 400 (ok)<br />
x-image-meta-size: 403 (ok)<br />
x-image-<wbr />meta-is_<wbr />public: N/A<br />
x-image-<wbr />meta-disk_<wbr />format: N/A<br />
x-image-<wbr />meta-container_<wbr />format: N/A<br />
x-image-meta-name: N/A<br />
x-image-<wbr />meta-status: 200 (bad, <a href="/bugs/1482371" class="bug-link">bug 1482371</a>)<br />
x-image-<wbr />meta-copy_<wbr />from: 200 (dropped, ok)<br />
x-image-meta-uri: 200 (dropped, ok)<br />
x-image-<wbr />meta-checksum: 403 (ok)<br />
x-image-<wbr />meta-created_<wbr />at: 200 (dropped, ok)<br />
x-image-<wbr />meta-updated_<wbr />at: 200 (dropped, ok)<br />
x-image-<wbr />meta-deleted_<wbr />at: 200 (dropped, ok)<br />
x-image-<wbr />meta-min_<wbr />ram: N/A<br />
x-image-<wbr />meta-min_<wbr />disk: N/A<br />
x-image-meta-owner: 200 (dropped, ok)<br />
x-image-meta-store: 200 (dropped, ok)<br />
x-image-meta-id: 500 (bad, new <a href="/bugs/1483353" class="bug-link">bug 1483353</a>)<br />
x-image-<wbr />meta-protected: N/A<br />
x-image-<wbr />meta-deleted: 200 (dropped, ok)<br />
x-image-<wbr />meta-virtual_<wbr />size: N/A</p>
<p>It probably makes sense to return 403 for &#x27;id&#x27;, since the current behaviour won&#x27;t update any other parameters when id is provided.</p>
<p>In the case of status we could consider just ignoring it, ie matching the behaviour of &#x27;owner&#x27;, ie it is not really something &#x27;settable&#x27; in v1, so ignore it.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Here's the current behaviour for the various headers which can be supplied:

x-image-meta-location: 400 (ok)
x-image-meta-size: 403 (ok)
x-image-meta-is_public: N/A
x-image-meta-disk_format: N/A
x-image-meta-container_format: N/A
x-image-meta-name: N/A
x-image-meta-status: 200 (bad, bug 1482371)
x-image-meta-copy_from: 200 (dropped, ok)
x-image-meta-uri: 200 (dropped, ok)
x-image-meta-checksum: 403 (ok)
x-image-meta-created_at: 200 (dropped, ok)
x-image-meta-updated_at: 200 (dropped, ok)
x-image-meta-deleted_at: 200 (dropped, ok)
x-image-meta-min_ram: N/A
x-image-meta-min_disk: N/A
x-image-meta-owner: 200 (dropped, ok)
x-image-meta-store: 200 (dropped, ok)
x-image-meta-id: 500 (bad, new bug 1483353)
x-image-meta-protected: N/A
x-image-meta-deleted: 200 (dropped, ok)
x-image-meta-virtual_size: N/A

It probably makes sense to return 403 for 'id', since the current behaviour won't update any other parameters when id is provided.

In the case of status we could consider just ignoring it, ie matching the behaviour of 'owner', ie it is not really something 'settable' in v1, so ignore it.



</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-10T17:45:48.455938+00:00" title="2015-08-10 17:45:48 UTC">on 2015-08-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>However, we get a &#x27;400&#x27; in the case of an invalid status -- we should probably try not to change this.</p>
<p>$ curl -v -X PUT <a rel="nofollow" href="http://127.0.0.1:9292/v1/images/eda41b92-a79f-46d1-8248-dfcb5e9227ae">http://<wbr />127.0.0.<wbr />1:9292/<wbr />v1/images/<wbr />eda41b92-<wbr />a79f-46d1-<wbr />8248-dfcb5e9227<wbr />ae</a>  -H &#x27;X-Auth-Token: 7535a1be77e3459<wbr />e8e4928aae02a80<wbr />42&#x27;  -H &#x27;x-image-meta-id: 1234&#x27; -H &#x27;x-image-<wbr />meta-status: huh&#x27;<br />
* Hostname was NOT found in DNS cache<br />
*   Trying 127.0.0.1...<br />
* Connected to 127.0.0.1 (127.0.0.1) port 9292 (#0)<br />
<span class="foldable-quoted">
&gt; PUT /v1/images/<wbr />eda41b92-<wbr />a79f-46d1-<wbr />8248-dfcb5e9227<wbr />ae HTTP/1.1<br />
&gt; User-Agent: curl/7.35.0<br />
&gt; Host: 127.0.0.1:9292<br />
&gt; Accept: */*<br />
&gt; X-Auth-Token: 7535a1be77e3459<wbr />e8e4928aae02a80<wbr />42<br />
&gt; x-image-meta-id: 1234<br />
&gt; x-image-<wbr />meta-status: huh<br />
&gt;<br />
</span>

&lt; HTTP/1.1 400 Bad Request<br />
&lt; Content-Length: 370<br />
&lt; Content-Type: text/html; charset=UTF-8<br />
&lt; X-Openstack-<wbr />Request-<wbr />Id: req-req-<wbr />0a5b4e62-<wbr />325e-4add-<wbr />a5aa-1863eb3b5a<wbr />95<br />
&lt; Date: Mon, 10 Aug 2015 17:43:29 GMT<br />
&lt;<br />
&lt;html&gt;<br />
&nbsp;&lt;head&gt;<br />
&nbsp;&nbsp;&lt;title&gt;400 Bad Request&lt;/title&gt;<br />
&nbsp;&lt;/head&gt;<br />
&nbsp;&lt;body&gt;<br />
&nbsp;&nbsp;&lt;h1&gt;400 Bad Request&lt;/h1&gt;<br />
&nbsp;&nbsp;Failed to update image metadata. Got error: 400 Bad Request</p>
<p>The server could not comply with the request since it is either malformed or otherwise incorrect.</p>
<p>&nbsp;Failed to update image metadata. Got error: Invalid image status &#x27;huh&#x27; for image.  &lt;br /&gt;&lt;br /&gt;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">However, we get a '400' in the case of an invalid status -- we should probably try not to change this.

$ curl -v -X PUT http://127.0.0.1:9292/v1/images/eda41b92-a79f-46d1-8248-dfcb5e9227ae  -H 'X-Auth-Token: 7535a1be77e3459e8e4928aae02a8042'  -H 'x-image-meta-id: 1234' -H 'x-image-meta-status: huh'
* Hostname was NOT found in DNS cache
*   Trying 127.0.0.1...
* Connected to 127.0.0.1 (127.0.0.1) port 9292 (#0)
&gt; PUT /v1/images/eda41b92-a79f-46d1-8248-dfcb5e9227ae HTTP/1.1
&gt; User-Agent: curl/7.35.0
&gt; Host: 127.0.0.1:9292
&gt; Accept: */*
&gt; X-Auth-Token: 7535a1be77e3459e8e4928aae02a8042
&gt; x-image-meta-id: 1234
&gt; x-image-meta-status: huh
&gt; 
&lt; HTTP/1.1 400 Bad Request
&lt; Content-Length: 370
&lt; Content-Type: text/html; charset=UTF-8
&lt; X-Openstack-Request-Id: req-req-0a5b4e62-325e-4add-a5aa-1863eb3b5a95
&lt; Date: Mon, 10 Aug 2015 17:43:29 GMT
&lt; 
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;400 Bad Request&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;400 Bad Request&lt;/h1&gt;
  Failed to update image metadata. Got error: 400 Bad Request

The server could not comply with the request since it is either malformed or otherwise incorrect.

 Failed to update image metadata. Got error: Invalid image status 'huh' for image.  &lt;br /&gt;&lt;br /&gt;
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-11T10:14:30.997451+00:00" title="2015-08-11 10:14:30 UTC">on 2015-08-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>A reference to nova code setting x-image-<wbr />meta-status:</p>
<p><a rel="nofollow" href="https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184">https:/<wbr />/github.<wbr />com/openstack/<wbr />nova/blob/<wbr />master/<wbr />plugins/<wbr />xenserver/<wbr />xenapi/<wbr />etc/xapi.<wbr />d/plugins/<wbr />glance#<wbr />L184</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">A reference to nova code setting x-image-meta-status:

https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-11T13:12:20.394093+00:00" title="2015-08-11 13:12:20 UTC">on 2015-08-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I think the order of validation should be:</p>
<p>1) Check whether the header being passed is valid/allowed.<br />
2) Check if the value provided is valid.</p>
<p>The reason I believe the above is correct s that doing it the other way around we&#x27;d give the attacker hints of what status are valid. This might not be such a big issue since image&#x27;s status are public anyway but still, I believe that would be the right workflow.</p>
<p>There&#x27;s no point on letting the user guess the right status to then let the user know that status can&#x27;t be updated.</p>
<p>Hope the above makes sense.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I think the order of validation should be:

1) Check whether the header being passed is valid/allowed.
2) Check if the value provided is valid.

The reason I believe the above is correct s that doing it the other way around we'd give the attacker hints of what status are valid. This might not be such a big issue since image's status are public anyway but still, I believe that would be the right workflow. 

There's no point on letting the user guess the right status to then let the user know that status can't be updated.

Hope the above makes sense.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-11T14:57:41.574939+00:00" title="2015-08-11 14:57:41 UTC">on 2015-08-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4442953/+files/status.patch">Suggested patch</a>
        <a class="sprite edit action-icon" href="/glance/+bug/1482371/+attachment/4442953">Edit</a>
        (8.3 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Here&#x27;s a first pass at a patch.</p>
<p>There&#x27;s probably no perfect solution here. This is hopefully someways backward compatible/sane.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Here's a first pass at a patch.

There's probably no perfect solution here. This is hopefully someways backward compatible/sane.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-12T08:59:38.583145+00:00" title="2015-08-12 08:59:38 UTC">on 2015-08-12</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>As mentioned in my previous comment, I think it&#x27;d be better to raise 403 in every case as a general thing. I believe we should do that in v2, at least. Nonetheless, I think the current patch is good and it preserves the current behavior on v1, which is in maintenance mode.</p>
<p>+1 for the patch, tested locally. Thanks, Stuart.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">As mentioned in my previous comment, I think it'd be better to raise 403 in every case as a general thing. I believe we should do that in v2, at least. Nonetheless, I think the current patch is good and it preserves the current behavior on v1, which is in maintenance mode.

+1 for the patch, tested locally. Thanks, Stuart.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-12T13:59:10.783433+00:00" title="2015-08-12 13:59:10 UTC">on 2015-08-12</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Stuart, the patch looks good to me, too.  I don&#x27;t see a way to disallow &#x27;setting&#x27; to the same status without causing major problems ... that was a good catch to notice nova setting status as part of snapshotting on xenserver.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Stuart, the patch looks good to me, too.  I don't see a way to disallow 'setting' to the same status without causing major problems ... that was a good catch to notice nova setting status as part of snapshotting on xenserver.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-24T14:45:34.972144+00:00" title="2015-08-24 14:45:34 UTC">on 2015-08-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Stuart, Tristan, Grant,</p>
<p>I think we have fix we can agree, any progress on publication schedule?</p>
<p>We&#x27;re two weeks from the OSSA confirmation and Wednesday 2 weeks from patch agreement.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Stuart, Tristan, Grant,

I think we have fix we can agree, any progress on publication schedule?

We're two weeks from the OSSA confirmation and Wednesday 2 weeks from patch agreement.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-24T23:16:00.346459+00:00" title="2015-08-24 23:16:00 UTC">on 2015-08-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Please review this impact description for correctness. I will use it to request a CVE for this issue once I&#x27;ve verified that it is accurate.</p>
<p>Title: Glance v1 API image status manipulation<br />
Reporter: Hemanth Makkapati (Rackspace)<br />
Products: Glance<br />
Affects:  all 2013.2 and 2014.1 versions, 2014.2 versions through 2014.2.3,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and 2015.1 versions through 2015.1.1</p>
<p>Description:<br />
Hemanth Makkapati of Rackspace reported a vulnerability in Glance. By submitting<br />
a HTTP PUT request with a &#x27;x-image-<wbr />meta-status&#x27; header, a malicious tenant can<br />
manipulate the status of public images without requiring administrative<br />
privileges. This may allow an attacker to reactivate a malicious images that<br />
was disabled by an administrator, potentially impacting other tenants. Only setups<br />
using the Glance v1 API are affected by this flaw.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Please review this impact description for correctness. I will use it to request a CVE for this issue once I've verified that it is accurate.  

Title: Glance v1 API image status manipulation
Reporter: Hemanth Makkapati (Rackspace)
Products: Glance
Affects:  all 2013.2 and 2014.1 versions, 2014.2 versions through 2014.2.3,
          and 2015.1 versions through 2015.1.1

Description:
Hemanth Makkapati of Rackspace reported a vulnerability in Glance. By submitting
a HTTP PUT request with a 'x-image-meta-status' header, a malicious tenant can
manipulate the status of public images without requiring administrative
privileges. This may allow an attacker to reactivate a malicious images that 
was disabled by an administrator, potentially impacting other tenants. Only setups
using the Glance v1 API are affected by this flaw.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T08:40:11.367448+00:00" title="2015-08-25 08:40:11 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Grant,</p>
<p>Thanks for that. As Stuart pointed out on comment #6 it would be also possible to upload replacement data utilizing v2 API after the initial status change over v1 API. This would break the immutability promise we have.</p>
<p>Rest, please correct me, but this issue was only affecting images owned by tenant (and admins), right? One couldn&#x27;t alter images they did not own.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Grant,

Thanks for that. As Stuart pointed out on comment #6 it would be also possible to upload replacement data utilizing v2 API after the initial status change over v1 API. This would break the immutability promise we have.

Rest, please correct me, but this issue was only affecting images owned by tenant (and admins), right? One couldn't alter images they did not own.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/23" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T10:31:43.918237+00:00" title="2015-08-25 10:31:43 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/23"> #23</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Grant</p>
<p>Some tweaks:</p>
<p>&quot;By submitting a HTTP PUT request with a &#x27;x-image-<wbr />meta-status&#x27; header, a malicious tenant can<br />
manipulate the status of public images without requiring administrative<br />
privileges.&quot;</p>
<p>This isn&#x27;t specific to public images. Also, the admin privilege is a bit of a red herring I think. Basically, standard users can only modify  the state of  images that they own (as Erno says above).</p>
<p>Maybe something like:</p>
<p>&quot;By submitting a HTTP PUT request with a &#x27;x-image-<wbr />meta-status&#x27; header, a tenant can<br />
manipulate the status of their images. In some cases this then allows replacing the image contents  by reuploading them -- which should not be allowed as &#x27;active&#x27; images are considered immutable.&quot;</p>
<p>&quot;Only setups using the Glance v1 API are affected by this flaw.&quot;</p>
<p>&quot;Only setups using the Glance v1 API allow the illegal modification of image status. Only setups which also use the v2 API may allow a subsequent re-upload of image contents.&quot;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Grant

Some tweaks:

"By submitting a HTTP PUT request with a 'x-image-meta-status' header, a malicious tenant can
manipulate the status of public images without requiring administrative
privileges."

This isn't specific to public images. Also, the admin privilege is a bit of a red herring I think. Basically, standard users can only modify  the state of  images that they own (as Erno says above).

Maybe something like:

"By submitting a HTTP PUT request with a 'x-image-meta-status' header, a tenant can
manipulate the status of their images. In some cases this then allows replacing the image contents  by reuploading them -- which should not be allowed as 'active' images are considered immutable."


"Only setups using the Glance v1 API are affected by this flaw."

"Only setups using the Glance v1 API allow the illegal modification of image status. Only setups which also use the v2 API may allow a subsequent re-upload of image contents."
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/24" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T12:16:26.265925+00:00" title="2015-08-25 12:16:26 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/24"> #24</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Given a tenant can&#x27;t actually alter images which aren&#x27;t under their control, what are the exploit scenarios for this vulnerability? Simply reenabling images of theirs which the admin has disabled, or substituting a malicious replacement image after conclusion of an audit validating the image being surreptitiously replaced?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Given a tenant can't actually alter images which aren't under their control, what are the exploit scenarios for this vulnerability? Simply reenabling images of theirs which the admin has disabled, or substituting a malicious replacement image after conclusion of an audit validating the image being surreptitiously replaced?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/25" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T12:29:45.947927+00:00" title="2015-08-25 12:29:45 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/25"> #25</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Jeremy,</p>
<p>Yes, both of those scenarios are valid.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Jeremy,

Yes, both of those scenarios are valid.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/26" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T12:38:47.232713+00:00" title="2015-08-25 12:38:47 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/26"> #26</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Lets say, cloud has workflow for 3rd party images where the image gets uploaded by 3rd party, validated and marked public by cloud admin. With this bug the 3rd party can replace the image (and it&#x27;s checksum) after it has been made public providing for example malicious payload breaking the immutability promise glance has. This would need V1 &amp; V2 APIs.</p>
<p>The other possibility is that private/<wbr />shared/<wbr />public image gets flagged malicious and disabled for further analysis. Tenant can move it back from being disabled to active and allow booting from it again. Only V1 API is needed for such actions.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Lets say, cloud has workflow for 3rd party images where the image gets uploaded by 3rd party, validated and marked public by cloud admin. With this bug the 3rd party can replace the image (and it's checksum) after it has been made public providing for example malicious payload breaking the immutability promise glance has. This would need V1 &amp; V2 APIs.

The other possibility is that private/shared/public image gets flagged malicious and disabled for further analysis. Tenant can move it back from being disabled to active and allow booting from it again. Only V1 API is needed for such actions.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/27" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T13:25:03.890815+00:00" title="2015-08-25 13:25:03 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/27"> #27</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>You can also work around the storage usage limit by toggling images between &#x27;killed&#x27; and &#x27;active&#x27;. ie toggle them to &#x27;killed&#x27; so you won&#x27;t be 1) billed for them 2) they wont count towards your storage useage; then toggle back to active before you want to boot them.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">You can also work around the storage usage limit by toggling images between 'killed' and 'active'. ie toggle them to 'killed' so you won't be 1) billed for them 2) they wont count towards your storage useage; then toggle back to active before you want to boot them.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/28" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T13:49:28.772578+00:00" title="2015-08-25 13:49:28 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/28"> #28</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Toggling images back from the dead seems like an iffy exploit scenario, since I would expect service providers to delete these in an effort to reclaim space anyway. The surreptitious replacement however, if it&#x27;s documented that image-to-UUID mapping is immutable, does at least seem like a failing in a security guarantee users might depend on.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Toggling images back from the dead seems like an iffy exploit scenario, since I would expect service providers to delete these in an effort to reclaim space anyway. The surreptitious replacement however, if it's documented that image-to-UUID mapping is immutable, does at least seem like a failing in a security guarantee users might depend on.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/29" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T14:46:14.627281+00:00" title="2015-08-25 14:46:14 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/29"> #29</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I want to stress the point Hemanth made somewhere above about image activate/<wbr />deactivate.</p>
<p>In Kilo, Glance added a security feature that allows an admin to &quot;deactivate&quot; an image while a deployer investigates it.  (The image still exists, its record is still visible, but Glance will refuse to download the image data, and hence instances can&#x27;t be booted from it.)  An image owner with access to the v1 API can use this exploit to put the image back into active status, which pretty much negates the deactivation security feature.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I want to stress the point Hemanth made somewhere above about image activate/deactivate.

In Kilo, Glance added a security feature that allows an admin to "deactivate" an image while a deployer investigates it.  (The image still exists, its record is still visible, but Glance will refuse to download the image data, and hence instances can't be booted from it.)  An image owner with access to the v1 API can use this exploit to put the image back into active status, which pretty much negates the deactivation security feature. </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/30" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T16:19:31.152321+00:00" title="2015-08-25 16:19:31 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/30"> #30</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>If standard users can only modify the state of images that they own, whenever an admin deactivate an image, what would prevent the user to re-upload it instead of switching the status of the deactivated image back to active ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">If standard users can only modify the state of images that they own, whenever an admin deactivate an image, what would prevent the user to re-upload it instead of switching the status of the deactivated image back to active ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/31" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-08-25T16:46:46.502522+00:00" title="2015-08-25 16:46:46 UTC">on 2015-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/31"> #31</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Also if an admin deactivates the image and then the user reactivates it through this bug, can&#x27;t the admin just delete the image (after making a copy for themselves) or, for that matter, disable the (now obviously abusive) tenant entirely?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Also if an admin deactivates the image and then the user reactivates it through this bug, can't the admin just delete the image (after making a copy for themselves) or, for that matter, disable the (now obviously abusive) tenant entirely?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/32" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-02T18:21:04.597109+00:00" title="2015-09-02 18:21:04 UTC">on 2015-09-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/32"> #32</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Ok. How about this? Cover all the cases above?</p>
<p>Title: Glance v1 API image status manipulation<br />
Reporter: Hemanth Makkapati (Rackspace)<br />
Products: Glance<br />
Affects: all 2013.2 and 2014.1 versions, 2014.2 versions through 2014.2.3,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and 2015.1 versions through 2015.1.1</p>
<p>Description:<br />
Hemanth Makkapati of Rackspace reported a vulnerability in Glance. By submitting a HTTP PUT request with a &#x27;x-image-<wbr />meta-status&#x27; header, a tenant can manipulate the status of their images. A malicious tenant may exploit this flaw to reactivate disabled images, bypass  storage quotas and in some cases replace image contents. Setups using the Glance v1 API allow the illegal modification of image status. Setups which also use the v2 API may allow a subsequent re-upload of image contents.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Ok. How about this? Cover all the cases above? 

Title: Glance v1 API image status manipulation
Reporter: Hemanth Makkapati (Rackspace)
Products: Glance
Affects: all 2013.2 and 2014.1 versions, 2014.2 versions through 2014.2.3,
          and 2015.1 versions through 2015.1.1

Description:
Hemanth Makkapati of Rackspace reported a vulnerability in Glance. By submitting a HTTP PUT request with a 'x-image-meta-status' header, a tenant can manipulate the status of their images. A malicious tenant may exploit this flaw to reactivate disabled images, bypass  storage quotas and in some cases replace image contents. Setups using the Glance v1 API allow the illegal modification of image status. Setups which also use the v2 API may allow a subsequent re-upload of image contents.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/33" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-04T18:31:02.615359+00:00" title="2015-09-04 18:31:02 UTC">on 2015-09-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/33"> #33</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Grant&#x27;s updated impact description in comment #32 looks great.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Grant's updated impact description in comment #32 looks great.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/34" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-04T18:46:53.629123+00:00" title="2015-09-04 18:46:53 UTC">on 2015-09-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/34"> #34</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I agree, Grant&#x27;s impact description in comment #32 lgtm.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I agree, Grant's impact description in comment #32 lgtm.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/35" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-04T18:54:13.214885+00:00" title="2015-09-04 18:54:13 UTC">on 2015-09-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/35"> #35</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks. CVE requested.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks. CVE requested.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2015-09-08 14:10:43 UTC" datetime="2015-09-08T14:10:43.635003+00:00">on 2015-09-08</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; In Progress
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
    
    <time title="2015-09-08 17:27:39 UTC" datetime="2015-09-08T17:27:39.857844+00:00">on 2015-09-08</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
          Image status can be changed by passing header &#x27;x-image-meta-status&#x27; with<br />- PUT operation using v1<br />+ PUT operation using v1 (CVE-2015-5251)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/36" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-10T18:29:11.294586+00:00" title="2015-09-10 18:29:11 UTC">on 2015-09-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/36">
                <strong>Re: Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/36"> #36</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Can someone take another look at the patch for this and organize backports as required? I will send out the pre-OSSA and set the disclosure date once we have that. Thanks.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Can someone take another look at the patch for this and organize backports as required? I will send out the pre-OSSA and set the disclosure date once we have that. Thanks.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/37" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-11T07:27:41.821376+00:00" title="2015-09-11 07:27:41 UTC">on 2015-09-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/37"> #37</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Grant, I just took another look at the patch. Looks fine. I&#x27;m happy to help w/ the backports. Let me know when it&#x27;ll be schedule. I&#x27;m in CEST.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Grant, I just took another look at the patch. Looks fine. I'm happy to help w/ the backports. Let me know when it'll be schedule. I'm in CEST.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/38" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-14T14:51:22.970838+00:00" title="2015-09-14 14:51:22 UTC">on 2015-09-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/38"> #38</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4464098/+files/0001-Prevent-image-status-being-directly-modified-via-v1.patch-juno">Juno backport</a>
        <a class="sprite edit action-icon" href="/glance/+bug/1482371/+attachment/4464098">Edit</a>
        (8.9 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/39" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-14T14:51:49.883617+00:00" title="2015-09-14 14:51:49 UTC">on 2015-09-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/39"> #39</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4464110/+files/0001-Prevent-image-status-being-directly-modified-via-v1.patch-kilo">Kilo backport</a>
        <a class="sprite edit action-icon" href="/glance/+bug/1482371/+attachment/4464110">Edit</a>
        (8.9 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/40" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-14T14:52:16.304030+00:00" title="2015-09-14 14:52:16 UTC">on 2015-09-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/40"> #40</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4464111/+files/0001-Prevent-image-status-being-directly-modified-via-v1.patch-liberty">Liberty (using format-patch)</a>
        <a class="sprite edit action-icon" href="/glance/+bug/1482371/+attachment/4464111">Edit</a>
        (8.8 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/41" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~flaper87" class="sprite person">Flavio Percoco (flaper87)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-14T14:53:25.313117+00:00" title="2015-09-14 14:53:25 UTC">on 2015-09-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/41"> #41</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;ve uploaded the backports for kilo and juno and I&#x27;ve also re-generated the one for liberty using git-tools.</p>
<p>Please, do verify them and let me know. These patches are the ones the will be published when this bug will be disclosed</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I've uploaded the backports for kilo and juno and I've also re-generated the one for liberty using git-tools.

Please, do verify them and let me know. These patches are the ones the will be published when this bug will be disclosed </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/42" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-14T22:02:51.659504+00:00" title="2015-09-14 22:02:51 UTC">on 2015-09-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/42"> #42</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Patch applies correctly and tests seems ok. I confirm this fixed the issue in stable/kilo.</p>
<p>Can we get another +2 from glance-coresec ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Patch applies correctly and tests seems ok. I confirm this fixed the issue in stable/kilo.

Can we get another +2 from glance-coresec ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/43" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-15T09:14:33.849631+00:00" title="2015-09-15 09:14:33 UTC">on 2015-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/43"> #43</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>+2</p>
<p>Thanks Flavio!</p>
<p>There is at least one operator who has deployed a version of this patch successfully.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">+2

Thanks Flavio!

There is at least one operator who has deployed a version of this patch successfully.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/44" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-15T11:42:14.135518+00:00" title="2015-09-15 11:42:14 UTC">on 2015-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/44"> #44</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>To reiterate the boilerplate in the bug description, please avoid (even private) disclosure of the vulnerability and associated patches to other individuals not already approved for access to this information. Deploying the patches in production in a large service provider runs the risk that others within the same organization have access to the details of this fix in advance of the downstream pre-notification.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">To reiterate the boilerplate in the bug description, please avoid (even private) disclosure of the vulnerability and associated patches to other individuals not already approved for access to this information. Deploying the patches in production in a large service provider runs the risk that others within the same organization have access to the details of this fix in advance of the downstream pre-notification.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/45" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-15T12:12:40.089640+00:00" title="2015-09-15 12:12:40 UTC">on 2015-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/45"> #45</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>+2 looks good to go on all branches. ( glance-core ! glance-coresec)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">+2 looks good to go on all branches. ( glance-core ! glance-coresec)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~gmurphy" class="sprite person">Grant Murphy (gmurphy)</a>
    
    <time title="2015-09-22 14:07:00 UTC" datetime="2015-09-22T14:07:00.445464+00:00">on 2015-09-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/46" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T14:09:33.694452+00:00" title="2015-09-22 14:09:33 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/46">
                <strong>Fix proposed to glance (stable/kilo)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/46"> #46</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/kilo<br />
Review: <a rel="nofollow" href="https://review.openstack.org/226337">https:/<wbr />/review.<wbr />openstack.<wbr />org/226337</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/kilo
Review: https://review.openstack.org/226337</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/47" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T14:10:08.328216+00:00" title="2015-09-22 14:10:08 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/47">
                <strong>Fix proposed to glance (stable/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/47"> #47</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/juno<br />
Review: <a rel="nofollow" href="https://review.openstack.org/226338">https:/<wbr />/review.<wbr />openstack.<wbr />org/226338</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/juno
Review: https://review.openstack.org/226338</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/48" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T14:43:41.585117+00:00" title="2015-09-22 14:43:41 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/48">
                <strong>Change abandoned on glance (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/48"> #48</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Change abandoned by Flavio Percoco (&lt;email address hidden&gt;) on branch: master<br />
Review: <a rel="nofollow" href="https://review.openstack.org/226355">https:/<wbr />/review.<wbr />openstack.<wbr />org/226355</a><br />
Reason: <a rel="nofollow" href="https://review.openstack.org/#/q/I44fadf32abb57c962b67467091c3f51c1ccc25e6,n,z">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/q/<wbr />I44fadf32abb57c<wbr />962b67467091c3f<wbr />51c1ccc25e6,<wbr />n,z</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Change abandoned by Flavio Percoco (fpercoco@redhat.com) on branch: master
Review: https://review.openstack.org/226355
Reason: https://review.openstack.org/#/q/I44fadf32abb57c962b67467091c3f51c1ccc25e6,n,z</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
    
    <time title="2015-09-22 15:36:03 UTC" datetime="2015-09-22T15:36:03.519465+00:00">on 2015-09-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        none &#8594; liberty-rc1
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
    
    <time title="2015-09-22 17:49:57 UTC" datetime="2015-09-22T17:49:57.567430+00:00">on 2015-09-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nikhil komawar (nikhil-komawar) &#8594; Stuart McLaren (stuart-mclaren)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/49" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T18:35:01.756938+00:00" title="2015-09-22 18:35:01 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/49">
                <strong>Fix merged to glance (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/49"> #49</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/226336">https:/<wbr />/review.<wbr />openstack.<wbr />org/226336</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/glance/commit/?id=34f9f037136061f7437761e86ea9f0864b297619">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?id=34f9f037136<wbr />061f7437761e86e<wbr />a9f0864b297619</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit 34f9f037136061f<wbr />7437761e86ea9f0<wbr />864b297619<br />
Author: Stuart McLaren &lt;email address hidden&gt;<br />
Date:   Tue Aug 11 10:37:09 2015 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Prevent image status being directly modified via v1</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Users shouldn&#x27;t be able to change an image&#x27;s status directly via the<br />
&nbsp;&nbsp;&nbsp;&nbsp;v1 API.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Some existing consumers of Glance set the x-image-meta-status header in<br />
&nbsp;&nbsp;&nbsp;&nbsp;requests to the Glance API, eg:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<a rel="nofollow" href="https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184">https:/<wbr />/github.<wbr />com/openstack/<wbr />nova/blob/<wbr />master/<wbr />plugins/<wbr />xenserver/<wbr />xenapi/<wbr />etc/xapi.<wbr />d/plugins/<wbr />glance#<wbr />L184</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;We should try to prevent users setting &#x27;status&#x27; via v1, but without breaking<br />
&nbsp;&nbsp;&nbsp;&nbsp;existing benign API calls such as these.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;I&#x27;ve adopted the following approach (which has some prior art in &#x27;protected properties&#x27;).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;If a PUT request is received which contains an x-image-meta-status header:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;* The user provided status is ignored if it matches the current image<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status (this prevents benign calls such as the nova one above from<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breaking). The usual code (eg 200) will be returned.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;* If the user provided status doesn&#x27;t match the current image status (ie<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there is a real attempt to change the value) 403 will be returned. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will break any calls which currently intentionally change the status.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;APIImpact</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: 1482371</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I44fadf32abb57c<wbr />962b67467091c3f<wbr />51c1ccc25e6</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/226336
Committed: https://git.openstack.org/cgit/openstack/glance/commit/?id=34f9f037136061f7437761e86ea9f0864b297619
Submitter: Jenkins
Branch:    master

commit 34f9f037136061f7437761e86ea9f0864b297619
Author: Stuart McLaren &lt;stuart.mclaren@hp.com&gt;
Date:   Tue Aug 11 10:37:09 2015 +0000

    Prevent image status being directly modified via v1
    
    Users shouldn't be able to change an image's status directly via the
    v1 API.
    
    Some existing consumers of Glance set the x-image-meta-status header in
    requests to the Glance API, eg:
    
    https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184
    
    We should try to prevent users setting 'status' via v1, but without breaking
    existing benign API calls such as these.
    
    I've adopted the following approach (which has some prior art in 'protected properties').
    
    If a PUT request is received which contains an x-image-meta-status header:
    
    * The user provided status is ignored if it matches the current image
      status (this prevents benign calls such as the nova one above from
      breaking). The usual code (eg 200) will be returned.
    
    * If the user provided status doesn't match the current image status (ie
      there is a real attempt to change the value) 403 will be returned. This
      will break any calls which currently intentionally change the status.
    
    APIImpact
    
    Closes-bug: 1482371
    
    Change-Id: I44fadf32abb57c962b67467091c3f51c1ccc25e6
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Triaged &#8594; Fix Committed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2015-09-22 18:52:00 UTC" datetime="2015-09-22T18:52:00.609659+00:00">on 2015-09-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Image status can be changed by passing header &#x27;x-image-meta-status&#x27; with<br />- PUT operation using v1 (CVE-2015-5251)<br />+ [OSSA 2015-019] Image status can be changed by passing header &#x27;x-image-<br />+ meta-status&#x27; with PUT operation using v1 (CVE-2015-5251)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/50" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T18:52:44.915534+00:00" title="2015-09-22 18:52:44 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/50">
                <strong>Related fix merged to ossa (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/50"> #50</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/226343">https:/<wbr />/review.<wbr />openstack.<wbr />org/226343</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/ossa/commit/?id=1a4a56ab6698c274c64517d6e3f9cf1a045609b6">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />ossa/commit/<wbr />?id=1a4a56ab669<wbr />8c274c64517d6e3<wbr />f9cf1a045609b6</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit 1a4a56ab6698c27<wbr />4c64517d6e3f9cf<wbr />1a045609b6<br />
Author: Grant Murphy &lt;email address hidden&gt;<br />
Date:   Tue Sep 22 07:20:00 2015 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adds OSSA-2015-019</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #1482371<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I7d5fe8c6b3fd5c<wbr />0936af809ed7cf3<wbr />0247c966a9b</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/226343
Committed: https://git.openstack.org/cgit/openstack/ossa/commit/?id=1a4a56ab6698c274c64517d6e3f9cf1a045609b6
Submitter: Jenkins
Branch:    master

commit 1a4a56ab6698c274c64517d6e3f9cf1a045609b6
Author: Grant Murphy &lt;grant.murphy@hpe.com&gt;
Date:   Tue Sep 22 07:20:00 2015 -0700

    Adds OSSA-2015-019
    
    Related-Bug: #1482371
    Change-Id: I7d5fe8c6b3fd5c0936af809ed7cf30247c966a9b
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/51" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T20:03:33.047891+00:00" title="2015-09-22 20:03:33 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/51">
                <strong>Fix merged to glance (stable/kilo)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/51"> #51</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/226337">https:/<wbr />/review.<wbr />openstack.<wbr />org/226337</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/glance/commit/?id=9beca533f42ae1fc87418de0c360e19bc59b24b5">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?id=9beca533f42<wbr />ae1fc87418de0c3<wbr />60e19bc59b24b5</a><br />
Submitter: Jenkins<br />
Branch:    stable/kilo</p>
<p>commit 9beca533f42ae1f<wbr />c87418de0c360e1<wbr />9bc59b24b5<br />
Author: Stuart McLaren &lt;email address hidden&gt;<br />
Date:   Tue Aug 11 10:37:09 2015 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Prevent image status being directly modified via v1</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Users shouldn&#x27;t be able to change an image&#x27;s status directly via the<br />
&nbsp;&nbsp;&nbsp;&nbsp;v1 API.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Some existing consumers of Glance set the x-image-meta-status header in<br />
&nbsp;&nbsp;&nbsp;&nbsp;requests to the Glance API, eg:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<a rel="nofollow" href="https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184">https:/<wbr />/github.<wbr />com/openstack/<wbr />nova/blob/<wbr />master/<wbr />plugins/<wbr />xenserver/<wbr />xenapi/<wbr />etc/xapi.<wbr />d/plugins/<wbr />glance#<wbr />L184</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;We should try to prevent users setting &#x27;status&#x27; via v1, but without breaking<br />
&nbsp;&nbsp;&nbsp;&nbsp;existing benign API calls such as these.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;I&#x27;ve adopted the following approach (which has some prior art in &#x27;protected properties&#x27;).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;If a PUT request is received which contains an x-image-meta-status header:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;* The user provided status is ignored if it matches the current image<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status (this prevents benign calls such as the nova one above from<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breaking). The usual code (eg 200) will be returned.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;* If the user provided status doesn&#x27;t match the current image status (ie<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there is a real attempt to change the value) 403 will be returned. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will break any calls which currently intentionally change the status.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;APIImpact</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: 1482371</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I44fadf32abb57c<wbr />962b67467091c3f<wbr />51c1ccc25e6<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 4d08db5b6d42323<wbr />ac1958ef3b7417d<wbr />875e7bea8c)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/226337
Committed: https://git.openstack.org/cgit/openstack/glance/commit/?id=9beca533f42ae1fc87418de0c360e19bc59b24b5
Submitter: Jenkins
Branch:    stable/kilo

commit 9beca533f42ae1fc87418de0c360e19bc59b24b5
Author: Stuart McLaren &lt;stuart.mclaren@hp.com&gt;
Date:   Tue Aug 11 10:37:09 2015 +0000

    Prevent image status being directly modified via v1
    
    Users shouldn't be able to change an image's status directly via the
    v1 API.
    
    Some existing consumers of Glance set the x-image-meta-status header in
    requests to the Glance API, eg:
    
    https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184
    
    We should try to prevent users setting 'status' via v1, but without breaking
    existing benign API calls such as these.
    
    I've adopted the following approach (which has some prior art in 'protected properties').
    
    If a PUT request is received which contains an x-image-meta-status header:
    
    * The user provided status is ignored if it matches the current image
      status (this prevents benign calls such as the nova one above from
      breaking). The usual code (eg 200) will be returned.
    
    * If the user provided status doesn't match the current image status (ie
      there is a real attempt to change the value) 403 will be returned. This
      will break any calls which currently intentionally change the status.
    
    APIImpact
    
    Closes-bug: 1482371
    
    Change-Id: I44fadf32abb57c962b67467091c3f51c1ccc25e6
    (cherry picked from commit 4d08db5b6d42323ac1958ef3b7417d875e7bea8c)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-kilo
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1482371/comments/52" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-09-22T23:55:48.408711+00:00" title="2015-09-22 23:55:48 UTC">on 2015-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/glance/+bug/1482371/comments/52">
                <strong>Fix merged to glance (stable/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1482371/comments/52"> #52</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/226338">https:/<wbr />/review.<wbr />openstack.<wbr />org/226338</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/glance/commit/?id=45be8e1c620c50f3cbca76f561945200a8843bc8">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?id=45be8e1c620<wbr />c50f3cbca76f561<wbr />945200a8843bc8</a><br />
Submitter: Jenkins<br />
Branch:    stable/juno</p>
<p>commit 45be8e1c620c50f<wbr />3cbca76f5619452<wbr />00a8843bc8<br />
Author: Stuart McLaren &lt;email address hidden&gt;<br />
Date:   Tue Aug 11 10:37:09 2015 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Prevent image status being directly modified via v1</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Users shouldn&#x27;t be able to change an image&#x27;s status directly via the<br />
&nbsp;&nbsp;&nbsp;&nbsp;v1 API.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Some existing consumers of Glance set the x-image-meta-status header in<br />
&nbsp;&nbsp;&nbsp;&nbsp;requests to the Glance API, eg:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<a rel="nofollow" href="https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184">https:/<wbr />/github.<wbr />com/openstack/<wbr />nova/blob/<wbr />master/<wbr />plugins/<wbr />xenserver/<wbr />xenapi/<wbr />etc/xapi.<wbr />d/plugins/<wbr />glance#<wbr />L184</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;We should try to prevent users setting &#x27;status&#x27; via v1, but without breaking<br />
&nbsp;&nbsp;&nbsp;&nbsp;existing benign API calls such as these.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;I&#x27;ve adopted the following approach (which has some prior art in &#x27;protected properties&#x27;).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;If a PUT request is received which contains an x-image-meta-status header:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;* The user provided status is ignored if it matches the current image<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status (this prevents benign calls such as the nova one above from<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breaking). The usual code (eg 200) will be returned.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;* If the user provided status doesn&#x27;t match the current image status (ie<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there is a real attempt to change the value) 403 will be returned. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will break any calls which currently intentionally change the status.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;APIImpact</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: 1482371</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I44fadf32abb57c<wbr />962b67467091c3f<wbr />51c1ccc25e6<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 4d08db5b6d42323<wbr />ac1958ef3b7417d<wbr />875e7bea8c)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 9beca533f42ae1f<wbr />c87418de0c360e1<wbr />9bc59b24b5)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/226338
Committed: https://git.openstack.org/cgit/openstack/glance/commit/?id=45be8e1c620c50f3cbca76f561945200a8843bc8
Submitter: Jenkins
Branch:    stable/juno

commit 45be8e1c620c50f3cbca76f561945200a8843bc8
Author: Stuart McLaren &lt;stuart.mclaren@hp.com&gt;
Date:   Tue Aug 11 10:37:09 2015 +0000

    Prevent image status being directly modified via v1
    
    Users shouldn't be able to change an image's status directly via the
    v1 API.
    
    Some existing consumers of Glance set the x-image-meta-status header in
    requests to the Glance API, eg:
    
    https://github.com/openstack/nova/blob/master/plugins/xenserver/xenapi/etc/xapi.d/plugins/glance#L184
    
    We should try to prevent users setting 'status' via v1, but without breaking
    existing benign API calls such as these.
    
    I've adopted the following approach (which has some prior art in 'protected properties').
    
    If a PUT request is received which contains an x-image-meta-status header:
    
    * The user provided status is ignored if it matches the current image
      status (this prevents benign calls such as the nova one above from
      breaking). The usual code (eg 200) will be returned.
    
    * If the user provided status doesn't match the current image status (ie
      there is a real attempt to change the value) 403 will be returned. This
      will break any calls which currently intentionally change the status.
    
    APIImpact
    
    Closes-bug: 1482371
    
    Change-Id: I44fadf32abb57c962b67467091c3f51c1ccc25e6
    (cherry picked from commit 4d08db5b6d42323ac1958ef3b7417d875e7bea8c)
    (cherry picked from commit 9beca533f42ae1fc87418de0c360e19bc59b24b5)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-juno
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2015-09-23 15:30:17 UTC" datetime="2015-09-23T15:30:17.888222+00:00">on 2015-09-23</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2015-09-26 08:18:01 UTC" datetime="2015-09-26T08:18:01.585926+00:00">on 2015-09-26</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2015-10-15 13:34:03 UTC" datetime="2015-10-15T13:34:03.601787+00:00">on 2015-10-15</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        liberty-rc1 &#8594; 11.0.0
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/glance/+bug/1482371/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/glance/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/glance/+bug/1482371/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/glance/+bug/1482371/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/glance/+bug/1482371/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/glance/+bug/1482371/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/glance/+bug/1482371/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/glance/+bug/1482371/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/glance/+bug/1482371/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/glance/+bug/1482371/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/glance/+bug/1482371/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4442953/+files/status.patch">Suggested patch</a>
        <small>
          (<a href="/glance/+bug/1482371/+attachment/4442953">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4464098/+files/0001-Prevent-image-status-being-directly-modified-via-v1.patch-juno">Juno backport</a>
        <small>
          (<a href="/glance/+bug/1482371/+attachment/4464098">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4464110/+files/0001-Prevent-image-status-being-directly-modified-via-v1.patch-kilo">Kilo backport</a>
        <small>
          (<a href="/glance/+bug/1482371/+attachment/4464110">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/glance/+bug/1482371/+attachment/4464111/+files/0001-Prevent-image-status-being-directly-modified-via-v1.patch-liberty">Liberty (using format-patch)</a>
        <small>
          (<a href="/glance/+bug/1482371/+attachment/4464111">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/glance/+bug/1482371/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"initial_comment_batch_offset": 41, "first visible_recent_comment": 12, "related_features": {}, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1482371", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1482371"}, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1482371", "web_link": "https://bugs.launchpad.net/bugs/1482371", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1482371, "private": false, "information_type": "Public", "name": null, "title": "[OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)", "description": "Using Glance v1, one is able to change the status of an image to any one of the valid statuses by passing the header 'x-image-meta-status' with PUT on /images/\u003cimage id\u003e.  This bug provides a way for an image to transition states that are otherwise not possible in an image's lifecycle.\n\nSee http://paste.openstack.org/show/pNL7kvIZUz7cWJQwX64d/ for a reproduction of this behavior on devstack.\n\nAs shown in the above paste, though one is able to change the status of an active image to queued, uploading data after re-setting the status to queued fails with a 400[1].  Though the purpose of [1] appears to be slightly different, it's fortunately saving us from badly breaking the immutability guarantees of glance images.\n\n[1] https://github.com/openstack/glance/blob/master/glance/api/v1/images.py#L760-L765\n\nNOTE: Marking this as a security vulnerability for now as users would be able to activate the deactivated images on their own. This probably affects deployments only where v1 is exposed publicly. However, it's probably worth discussing this from a security perspective as well.", "owner_link": "https://bugs.launchpad.net/api/devel/~hemanth-makkapati", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/bug_tasks", "duplicate_of_link": null, "date_created": "2015-08-06T20:14:09.370832+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/subscriptions", "date_last_updated": "2016-01-21T23:13:00.466499+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 18, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/attachments", "security_related": false, "latest_patch_uploaded": "2015-09-14T14:52:16.304030+00:00", "tags": ["in-stable-juno", "in-stable-kilo"], "date_last_message": "2015-09-22T23:55:48.408711+00:00", "number_of_duplicates": 0, "message_count": 53, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1482371/linked_merge_proposals", "http_etag": "\"bd32793f9a102365078b963ae80da4366f5ef015-511769966cde1b5b490893a8086675f5a31c8ee4\""}, "bugtask_data": {"1945072": {"milestone_widget_items": "[]", "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/glance/juno/+bug/1482371/+delete", "user_can_edit_status": true, "bugtask_path": "/glance/juno/+bug/1482371", "row_id": "tasksummary1945072", "importance_value": "Undecided", "importance_widget_items": "[]", "id": 1945072, "user_can_delete": false, "targetname": "Glance juno", "user_can_edit_importance": false, "assignee_vocabulary_filters": [], "bug_title": "[OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)", "assignee_value": null, "hide_assignee_team_selection": true, "user_can_edit_assignee": false, "form_row_id": "task1945072", "target_is_product": false, "assignee_is_team": null, "status_value": "Fix Released", "user_can_unassign": false, "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/2014.2.4", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_milestone": false, "prefix": "glance_juno"}, "1982897": {"milestone_widget_items": "[]", "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/glance/kilo/+bug/1482371/+delete", "user_can_edit_status": true, "bugtask_path": "/glance/kilo/+bug/1482371", "row_id": "tasksummary1982897", "importance_value": "Undecided", "importance_widget_items": "[]", "id": 1982897, "user_can_delete": false, "targetname": "Glance kilo", "user_can_edit_importance": false, "assignee_vocabulary_filters": [], "bug_title": "[OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)", "assignee_value": null, "hide_assignee_team_selection": true, "user_can_edit_assignee": false, "form_row_id": "task1982897", "target_is_product": false, "assignee_is_team": null, "status_value": "Fix Released", "user_can_unassign": false, "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/2015.1.3", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_milestone": false, "prefix": "glance_kilo"}, "1886787": {"milestone_widget_items": "[]", "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/glance/+bug/1482371/+delete", "user_can_edit_status": true, "bugtask_path": "/glance/+bug/1482371", "row_id": "tasksummary1886787", "importance_value": "Critical", "importance_widget_items": "[]", "id": 1886787, "user_can_delete": false, "targetname": "Glance", "user_can_edit_importance": false, "assignee_vocabulary_filters": [], "bug_title": "[OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)", "assignee_value": "stuart-mclaren", "hide_assignee_team_selection": true, "user_can_edit_assignee": false, "form_row_id": "task1886787", "target_is_product": true, "assignee_is_team": false, "status_value": "Fix Released", "user_can_unassign": false, "milestone_value": "https://bugs.launchpad.net/api/devel/glance/+milestone/11.0.0", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_milestone": false, "prefix": "glance"}, "1886798": {"milestone_widget_items": "[]", "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/ossa/+bug/1482371/+delete", "user_can_edit_status": true, "bugtask_path": "/ossa/+bug/1482371", "row_id": "tasksummary1886798", "importance_value": "Undecided", "importance_widget_items": "[]", "id": 1886798, "user_can_delete": false, "targetname": "OpenStack Security Advisory", "user_can_edit_importance": false, "assignee_vocabulary_filters": [], "bug_title": "[OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)", "assignee_value": null, "hide_assignee_team_selection": true, "user_can_edit_assignee": false, "form_row_id": "task1886798", "target_is_product": true, "assignee_is_team": null, "status_value": "Fix Released", "user_can_unassign": false, "milestone_value": null, "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_milestone": false, "prefix": "ossa"}}, "bug_is_private": false, "context": {"self_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1482371", "web_link": "https://bugs.launchpad.net/glance/+bug/1482371", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1482371", "milestone_link": "https://bugs.launchpad.net/api/devel/glance/+milestone/11.0.0", "status": "Fix Released", "importance": "Critical", "assignee_link": "https://bugs.launchpad.net/api/devel/~stuart-mclaren", "bug_target_display_name": "Glance", "bug_target_name": "glance", "bug_watch_link": null, "date_assigned": "2015-08-06T20:32:41.986091+00:00", "date_created": "2015-08-06T20:14:09.370832+00:00", "date_confirmed": "2015-08-06T20:29:02.742769+00:00", "date_incomplete": null, "date_in_progress": "2015-09-22T18:35:00.635134+00:00", "date_closed": "2015-09-26T08:18:02.251231+00:00", "date_left_new": "2015-08-06T20:29:02.742769+00:00", "date_triaged": "2015-08-06T20:29:02.742769+00:00", "date_fix_committed": "2015-09-22T18:35:00.635134+00:00", "date_fix_released": "2015-09-26T08:18:02.251231+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~hemanth-makkapati", "target_link": "https://bugs.launchpad.net/api/devel/glance", "title": "Bug #1482371 in Glance: \"[OSSA 2015-019] Image status can be changed by passing header 'x-image-meta-status' with PUT operation using v1 (CVE-2015-5251)\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1482371/related_tasks", "is_complete": true, "http_etag": "\"a8c43e1cd430009d066541106422e67c2b19bb68-c7085774ae1ba0c980e6815f8c2db44f829ecfe5\""}, "information_type_data": {"PUBLIC": {"value": "PUBLIC", "is_private": false, "order": 0, "name": "Public", "description": "Everyone can see this information.\n", "description_css_class": "choice-description"}, "PRIVATESECURITY": {"value": "PRIVATESECURITY", "is_private": true, "order": 2, "name": "Private Security", "description": "Only the security group can see this information.\n ", "description_css_class": "choice-description"}, "USERDATA": {"value": "USERDATA", "is_private": true, "order": 3, "name": "Private", "description": "Only shared with users permitted to see private user information.\n", "description_css_class": "choice-description"}, "PUBLICSECURITY": {"value": "PUBLICSECURITY", "is_private": false, "order": 1, "name": "Public Security", "description": "Everyone can see this security related information.\n", "description_css_class": "choice-description"}}, "total_comments_and_activity": 94};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 64 queries/external actions issued in 1.04 seconds

    Features: {'bugs.nominations.bug_supervisors_can_target': 'on', 'hard_timeout': '9000', 'visible_render_time': None, 'bugs.affected_count_includes_dupes.disabled': None, 'app.mainsite_only.canonical_url': None, 'app.maintenance_message': None, 'js.yui_version': None, 'disclosure.dsp_picker.enabled': 'on', 'profiling.enabled': None, 'baselayout.careers_link.disabled': None}

    r0d8de2b

    -->

</html>

