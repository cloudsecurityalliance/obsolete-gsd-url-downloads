<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1227462 - (CVE-2016-2817) chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1227462">
<meta property="og:description"
      content="VERIFIED (lgreco) in WebExtensions - Untriaged. Last updated 2020-01-06.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P1">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1227462 - (CVE-2016-2817) chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1227462&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1227462">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1227462">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/yui.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/global.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/util.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"flags\":{\"tracking\":{\"cf_status_firefox46\":\"verified\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox95\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_status_firefox45\":\"wontfix\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_status_firefox47\":\"verified\",\"cf_tracking_firefox94\":\"---\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_tracking_firefox95\":\"---\",\"cf_status_firefox48\":\"verified\",\"cf_tracking_firefox45\":\"+\",\"cf_status_firefox94\":\"---\",\"cf_status_firefox44\":\"wontfix\",\"cf_status_firefox_esr38\":\"unaffected\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_tracking_firefox46\":\"+\",\"cf_status_firefox_esr91\":\"---\",\"cf_tracking_firefox47\":\"+\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_firefox_esr45\":\"wontfix\",\"cf_status_firefox_esr78\":\"---\",\"cf_tracking_firefox93\":\"---\"},\"project\":{\"cf_root_cause\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_fission_milestone\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_a11y_review_project_flag\":\"---\"},\"blocking\":{\"cf_blocking_webextensions\":\"---\"}},\"types\":[\"blocking\",\"tracking\"],\"comments\":{\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox46\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox45\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox47\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1227462;
  BUGZILLA.bug_title = '1227462 - (CVE-2016-2817) chrome.tabs.update\/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL';
  BUGZILLA.bug_summary = 'chrome.tabs.update\/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1227462';
  BUGZILLA.bug_keywords = 'csectype-priv-escalation, dev-doc-complete, regression, sec-moderate',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/field.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/comments.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1227462">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1227462"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1227462 - (CVE-2016-2817) chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="tTedPQCEWP5cgV4cUixUG0qfIJGookFqUfSaP8bTDN0mKXrdO5iz4sq0vdrGdInreSK8yVkLlDGOQfvwJtzF29qQm8fCM4XiJRHVMjbVS8AqHhWbQZI8WFvb7G7IARr8ncjmfAnkAqDxD6gBzkV0wsRTOu4aNBHd4YXSYy90m4DeScsgDMX93aDRoSbmOU1YyvUSg8dVrlydWyB4NcZ43EvMCbulMlYP4KlPTOsr8sqDRQk7hcoDmuOE54CLF6oY">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1227462" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635622838-fPd0qL3uCg1tqH5pQPWUnauCqk5rwi7hUNZ5dsjW9lI">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1227462" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1227462" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1227462">Bug 1227462</a>
          <span class="edit-hide">(CVE-2016-2817)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2015-11-24 02:44 PST" data-time="1448361899">6 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2016-02-29 02:39 PST" data-time="1456742366">6 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">chrome<wbr>.tabs<wbr>.update/create APIs should call check<wbr>Load<wbr>URI with DISALLOW<wbr>_INHERIT<wbr>_PRINCIPAL</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (WebExtensions :: Untriaged, defect, P1)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=WebExtensions" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">WebExtensions
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">WebExtensions</div>
            <div class="description">File feature requests and bugs related to the WebExtension add-on API.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=WebExtensions&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=WebExtensions"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="WebExtensions"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=WebExtensions&component=Untriaged#Untriaged" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Untriaged
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">WebExtensions :: Untriaged</div>
            <div class="description">File feature requests and bugs related to the WebExtension add-on API.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=WebExtensions&amp;component=Untriaged&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=WebExtensions&amp;component=Untriaged&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=WebExtensions&amp;component=Untriaged"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="WebExtensions" data-component="Untriaged"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P1
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (firefox44 wontfix, firefox45+ wontfix, firefox46+ verified, firefox47+ verified, firefox48 verified, firefox-esr38 unaffected, firefox-esr45 wontfix)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla47

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox44</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox44&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox45</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox45&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox45&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox46</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox46&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox47</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox48</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr38</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr38&amp;o1=equals&amp;v1=unaffected">unaffected</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr45</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox44</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox44-dirty">
  <select id="cf_status_firefox44" name="cf_status_firefox44">
        <option value="wontfix"
          id="v2432_cf_status_firefox44" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox45</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox45-dirty">
  <select id="cf_tracking_firefox45" name="cf_tracking_firefox45">
        <option value="+"
          id="v2493_cf_tracking_firefox45" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox45-dirty">
  <select id="cf_status_firefox45" name="cf_status_firefox45">
        <option value="wontfix"
          id="v2487_cf_status_firefox45" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox46</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox46-dirty">
  <select id="cf_tracking_firefox46" name="cf_tracking_firefox46">
        <option value="+"
          id="v2556_cf_tracking_firefox46" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox46-dirty">
  <select id="cf_status_firefox46" name="cf_status_firefox46">
        <option value="verified"
          id="v2564_cf_status_firefox46" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox47</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox47-dirty">
  <select id="cf_tracking_firefox47" name="cf_tracking_firefox47">
        <option value="+"
          id="v2603_cf_tracking_firefox47" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox47-dirty">
  <select id="cf_status_firefox47" name="cf_status_firefox47">
        <option value="verified"
          id="v2612_cf_status_firefox47" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox48</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox48-dirty">
  <select id="cf_status_firefox48" name="cf_status_firefox48">
        <option value="verified"
          id="v2678_cf_status_firefox48" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr38</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr38-dirty">
  <select id="cf_status_firefox_esr38" name="cf_status_firefox_esr38">
        <option value="unaffected"
          id="v2147_cf_status_firefox_esr38" selected
        >unaffected
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr45</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr45-dirty">
  <select id="cf_status_firefox_esr45" name="cf_status_firefox_esr45">
        <option value="wontfix"
          id="v2553_cf_status_firefox_esr45" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

      <div class="field edit-show" style="display:none"
>
    <div class="name">Blocking Flags:
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">webextensions</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_blocking_webextensions-dirty">
  <select id="cf_blocking_webextensions" name="cf_blocking_webextensions">
        <option value="---"
          id="v2817_cf_blocking_webextensions" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: sdna.muneaki.nishimura, Assigned: rpl, Mentored)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_339062" ><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=339062" > <span class="fna">rpl</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-bug_mentors"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors"><div class="vcard vcard_106098" ><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=106098" > <span class="fna">kmag</span></a>
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_507051" ><img src="https://secure.gravatar.com/avatar/7e8b2996acb6304c9b7b7000f408632a?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=507051" > <span class="fna">sdna.muneaki.nishimura</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_372685" ><img src="https://secure.gravatar.com/avatar/b2fec98200b3938bef69471c7005458c?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=372685" > <span class="fna">mixedpuppy</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="15">15 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Need to check permissions for programmatic content script injection"
   href="/show_bug.cgi?id=1193837">1193837</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Implement permissions API and optional_permissions manifest property"
   href="/show_bug.cgi?id=1197420">1197420</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list" id="field-blocked"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - tabs.create without an URL should create a new tab pointed on the correct &quot;about:&quot; page and the url bar should be empty"
   href="/show_bug.cgi?id=1242588">1242588</a>
      </div>

        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1227462&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1227462">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates" id="-help-link" class="help">Duplicates:
        </a>
    </div>


  
    <div class="value">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - tabs.update with javascript:-URL does not run code"
   href="/show_bug.cgi?id=1287646">1287646</a>
      </div>

    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (4 keywords, Whiteboard: [good first bug][tabs] triaged  [adv-main46+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2016-2817

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-priv-escalation&amp;resolution=---">csectype-priv-escalation</a>, 
          <a href="/buglist.cgi?keywords=dev-doc-complete&amp;resolution=---">dev-doc-complete</a>, 
          <a href="/buglist.cgi?keywords=regression&amp;resolution=---">regression</a>, 
          <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[good first bug][tabs] triaged  [adv-main46+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">1
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_397635" ><a class="email " href="/user_profile?user_id=397635" > <span class="fna">andy+bugzilla</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#c8"
            class="rel-time-title activity-ref"
            title="6 years ago"
        data-time="1448394847"
      >blocking-webextensions</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_397635" ><a class="email " href="/user_profile?user_id=397635" > <span class="fna">andy+bugzilla</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Bugs which block the next release of Web Extensions." for="flag-1298688">blocking-webextensions</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1298688-dirty">
      <select id="flag-1298688" name="flag-1298688"
        title="Bugs which block the next release of Web Extensions."
        class="bug-flag">
          <option value="+" selected>+</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee-1298688-container" style="display:none"><input
    name="requestee-1298688"
    value="" class="requestee bz_autocomplete_user"  id="requestee-1298688" 
  >
        </div>
      <td>

  </tr>
          </tbody>
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a10219273_1689"
            class="rel-time-title activity-ref"
            title="6 years ago"
        data-time="1458236273"
      >sec-bounty</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag-1362015">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1362015-dirty">
      <select id="flag-1362015" name="flag-1362015"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
            <option value="+" selected>+</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (8 files, 28 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8691313">uxss.xpi</a>
        </div>
        <div>
            <a href="#c0" class="attach-time activity-ref"><span class="rel-time" title="2015-11-24 02:44 PST" data-time="1448361899">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_507051" ><a class="email " href="/user_profile?user_id=507051" > <span class="fna">Muneaki Nishimura</span></a>
</div></span>
        </div>
        <div class="attach-info">967 bytes,
          application/zip        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8691313&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8691314">Screenshots on my environment</a>
        </div>
        <div>
            <a href="#c1" class="attach-time activity-ref"><span class="rel-time" title="2015-11-24 02:46 PST" data-time="1448362005">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_507051" ><a class="email " href="/user_profile?user_id=507051" > <span class="fna">Muneaki Nishimura</span></a>
</div></span>
        </div>
        <div class="attach-info">419.23 KB,
          application/pdf        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8691314&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8706412">0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch</a>
        </div>
        <div>
            <a href="#c11" class="attach-time activity-ref"><span class="rel-time" title="2016-01-11 08:18 PST" data-time="1452529107">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.79 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8706412&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8706412&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8706412">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8706414">0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch</a>
        </div>
        <div>
            <a href="#c12" class="attach-time activity-ref"><span class="rel-time" title="2016-01-11 08:20 PST" data-time="1452529228">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">5.21 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c14"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1452529228"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8706414&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8706414&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8706414">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8707641">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c17" class="attach-time activity-ref"><span class="rel-time" title="2016-01-13 14:43 PST" data-time="1452725006">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.49 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c19"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1452725006"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8707641&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8707641&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8707641">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8707651">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c18" class="attach-time activity-ref"><span class="rel-time" title="2016-01-13 14:58 PST" data-time="1452725923">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.79 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8707651&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8707651&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8707651">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8709380">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c21" class="attach-time activity-ref"><span class="rel-time" title="2016-01-19 04:30 PST" data-time="1453206610">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.49 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c21"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453206610"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8709380&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8709380&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709380">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8709382">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c22" class="attach-time activity-ref"><span class="rel-time" title="2016-01-19 04:33 PST" data-time="1453206800">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.68 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c25"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453206800"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8709382&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8709382&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709382">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8709383">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c23" class="attach-time activity-ref"><span class="rel-time" title="2016-01-19 04:34 PST" data-time="1453206897">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.33 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c26"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453206897"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8709383&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8709383&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709383">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8709385">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c24" class="attach-time activity-ref"><span class="rel-time" title="2016-01-19 04:36 PST" data-time="1453206991">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.28 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c27"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453206991"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8709385&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8709385&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709385">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710003">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c28" class="attach-time activity-ref"><span class="rel-time" title="2016-01-20 08:54 PST" data-time="1453308887">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.69 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710003&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710003&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710003">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710004">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c29" class="attach-time activity-ref"><span class="rel-time" title="2016-01-20 09:03 PST" data-time="1453309415">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.50 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c33"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453325617"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710004&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710004&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710004">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710008">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c30" class="attach-time activity-ref"><span class="rel-time" title="2016-01-20 09:13 PST" data-time="1453310031">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">2.52 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710008&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710008&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710008">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710011">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c31" class="attach-time activity-ref"><span class="rel-time" title="2016-01-20 09:18 PST" data-time="1453310290">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.27 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c35"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453325894"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710011&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710011&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710011">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710579">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c36" class="attach-time activity-ref"><span class="rel-time" title="2016-01-21 10:39 PST" data-time="1453401593">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.53 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710579&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710579&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710579">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710580">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c37" class="attach-time activity-ref"><span class="rel-time" title="2016-01-21 10:43 PST" data-time="1453401789">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.47 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#a5040972_339062"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453402871"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710580&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710580&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710580">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710588">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c38" class="attach-time activity-ref"><span class="rel-time" title="2016-01-21 10:56 PST" data-time="1453402565">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">2.46 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c43"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453402565"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710588&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710588&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710588">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710594">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c39" class="attach-time activity-ref"><span class="rel-time" title="2016-01-21 11:00 PST" data-time="1453402844">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.28 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c44"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453402844"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710594&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710594&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710594">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710597">0005-Bug-1227462-fix-tabs.onUpdated-test-case.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c40" class="attach-time activity-ref"><span class="rel-time" title="2016-01-21 11:03 PST" data-time="1453403033">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.61 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#a5051056_106098"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453403033"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710597&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710597&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710597">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710972">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c45" class="attach-time activity-ref"><span class="rel-time" title="2016-01-22 04:01 PST" data-time="1453464061">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">2.38 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710972&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710972&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710972">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710973">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c46" class="attach-time activity-ref"><span class="rel-time" title="2016-01-22 04:04 PST" data-time="1453464263">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.42 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c46"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453464263"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710973&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710973&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710973">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710975">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</a>
        </div>
        <div>
            <a href="#c47" class="attach-time activity-ref"><span class="rel-time" title="2016-01-22 04:10 PST" data-time="1453464609">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.65 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c47"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453464609"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710975&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710975&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710975">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8710976">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</a>
        </div>
        <div>
            <a href="#c48" class="attach-time activity-ref"><span class="rel-time" title="2016-01-22 04:14 PST" data-time="1453464850">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.26 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c48"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1453464850"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8710976&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8710976&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710976">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8717298">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c49" class="attach-time activity-ref"><span class="rel-time" title="2016-02-08 19:11 PST" data-time="1454987503">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.88 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c53"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1454989535"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8717298&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8717298&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8717298">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8717299">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c50" class="attach-time activity-ref"><span class="rel-time" title="2016-02-08 19:13 PST" data-time="1454987598">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">8.20 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#c54"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1454989868"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8717299&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8717299&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8717299">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8718004">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c55" class="attach-time activity-ref"><span class="rel-time" title="2016-02-10 11:20 PST" data-time="1455132038">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.61 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c55"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455132038"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8718004&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8718004&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8718004">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8718005">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c56" class="attach-time activity-ref"><span class="rel-time" title="2016-02-10 11:21 PST" data-time="1455132109">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">8.29 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c56"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455132109"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8718005&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8718005&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8718005">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721380">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c57" class="attach-time activity-ref"><span class="rel-time" title="2016-02-19 10:17 PST" data-time="1455905836">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.70 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c57"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455905836"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c60"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455906930"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721380&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721380&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721380">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721381">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c58" class="attach-time activity-ref"><span class="rel-time" title="2016-02-19 10:17 PST" data-time="1455905868">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">8.38 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c58"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455905868"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721381&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721381&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721381">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721493">Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c61" class="attach-time activity-ref"><span class="rel-time" title="2016-02-19 14:31 PST" data-time="1455921078">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.89 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#a7560680_106098"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455921078"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_451704" ><span class="fn">lizzard</span>
</div>:
              <a href="#c80"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455933542"
            >
              approval-mozilla-aurora+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721493&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721493&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721493">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721494">Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c62" class="attach-time activity-ref"><span class="rel-time" title="2016-02-19 14:33 PST" data-time="1455921220">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.78 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#a7560687_106098"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455921220"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_495955" ><span class="fn">Sylvestre</span>
</div>:
              <a href="#c79"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1455933519"
            >
              approval-mozilla-beta-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721494&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721494&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721494">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721711">Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c68" class="attach-time activity-ref"><span class="rel-time" title="2016-02-20 14:15 PST" data-time="1456006549">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">6.91 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721711&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721711&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721711">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721713">Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c70" class="attach-time activity-ref"><span class="rel-time" title="2016-02-20 14:35 PST" data-time="1456007751">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">6.90 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#a7916811_106098"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1456007751"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721713&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721713&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721713">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8721714">Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Beta__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c71" class="attach-time activity-ref"><span class="rel-time" title="2016-02-20 14:38 PST" data-time="1456007925">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">6.84 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_106098" ><span class="fn">kmag</span>
</div>:
              <a href="#a7916798_106098"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1456007925"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8721714&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8721714&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721714">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8723632">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c73" class="attach-time activity-ref"><span class="rel-time" title="2016-02-25 09:24 PST" data-time="1456421041">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.70 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c73"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1456421041"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8723632&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8723632&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8723632">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8723633">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</a>
        </div>
        <div>
            <a href="#c74" class="attach-time activity-ref"><span class="rel-time" title="2016-02-25 09:25 PST" data-time="1456421118">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_339062" ><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div></span>
        </div>
        <div class="attach-info">8.37 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_339062" ><span class="fn">rpl</span>
</div>:
              <a href="#c74"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1456421118"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8723633&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8723633&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8723633">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="YV2uDqsLdOayBTkDJrT8IzDHLrSyCW9v7RBuK7vMfWmFam0D">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="10959649" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_507051" ><img src="https://secure.gravatar.com/avatar/7e8b2996acb6304c9b7b7000f408632a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_507051" ><a class="email " href="/user_profile?user_id=507051" > <span class="fna">Muneaki Nishimura</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 02:44 PST" data-time="1448361899">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8691313"
         class="attachment"
         data-id="8691313" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="uxss.xpi">
      <meta itemprop="contentSize" content="967">
      <meta itemprop="encodingFormat" content="application/zip">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8691313" itemprop="contentUrl">
        <span id="att-8691313-description" itemprop="description">uxss.xpi</span></a>
        — <a href="attachment.cgi?id=8691313&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-0" data-comment-id="10959649">User Agent: Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36

Steps to reproduce:

The 'chrome.tabs.update' API allows to navigate tabs to javascript: URLs without any permissions. It can be used for universal XSS attacks to all documents that are opening. It affects not only to ordinary websites but also other extensions. If an other extension'd page is shown in a tab, then script can be  injected from the malicious extension with no permissions, i.e., obtain the target extension's privilege.
Attached is a sample extension that can reproduce the issue.


Actual results:

1. Open arbitrary web sites and extension's page on tabs
2. Click the button of this extension
3. Alert dialog with their current document.location is shown on each tab



Expected results:

The 'chrome.tabs.update' should prohibits navigation to harmful URLs e.g., javascript: and data:. Chrome do so.</pre></div><div class="change-set" id="c1"><div class="comment" data-id="10959652" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_507051" ><img src="https://secure.gravatar.com/avatar/7e8b2996acb6304c9b7b7000f408632a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_507051" ><a class="email " href="/user_profile?user_id=507051" > <span class="fna">Muneaki Nishimura</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 02:46 PST" data-time="1448362005">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8691314"
         class="attachment"
         data-id="8691314" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="uxss_screenshots.pdf">
      <meta itemprop="contentSize" content="429287">
      <meta itemprop="encodingFormat" content="application/pdf">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8691314" itemprop="contentUrl">
        <span id="att-8691314-description" itemprop="description">Screenshots on my environment</span></a>
        — <a href="attachment.cgi?id=8691314&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-1" data-comment-id="10959652">I attached screenshots when the issue reproduced on my PC.</pre></div><div class="change-set" id="a12978_7044"><div class="change" id="aa12978_7044">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_7044" id="a12978_7044"><img src="https://secure.gravatar.com/avatar/3301a62f3707d6bcef9542d316fb587f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_7044" id="a12978_7044"><a class="email " href="/user_profile?user_id=7044" > <span class="fna">Benjamin Smedberg</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a12978_7044"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a12978_7044">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a12978_7044">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 06:21 PST" data-time="1448374877">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Component: General &rarr; WebExtensions</div><div class="change">Flags: needinfo?(amckay)</div><div class="change">Product: Core &rarr; Toolkit</div></div></div><div class="change-set" id="a26184_397635"><div class="change" id="aa26184_397635">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_397635" id="a26184_397635"><img src="https://secure.gravatar.com/avatar/4ae11454315077053052b613d6d77241?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_397635" id="a26184_397635"><a class="email " href="/user_profile?user_id=397635" > <span class="fna">Andy McKay</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26184_397635"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26184_397635">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a26184_397635">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 10:01 PST" data-time="1448388083">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(amckay)</span></div></div></div><div class="change-set" id="c2"><div class="comment" data-id="10961025" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a26184_397635"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a26184_397635"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 10:21 PST" data-time="1448389298">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="10961025">Regular add-ons can do this an more already, of course, hopefully bad stuff caught in review. WebExtensions have stricter limits, this is somewhere between sec-moderate and sec-high.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-priv-escalation&amp;resolution=---">csectype-priv-escalation</a>, 
          
            <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a></div></div></div><div class="change-set" id="a27455_1689"><div class="change" id="aa27455_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a27455_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a27455_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a27455_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a27455_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a27455_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 10:22 PST" data-time="1448389354">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Need to check permissions for programmatic content script injection"
   href="/show_bug.cgi?id=1193837">1193837</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Implement permissions API and optional_permissions manifest property"
   href="/show_bug.cgi?id=1197420">1197420</a></div><div class="change">Group: <span class="activity-deleted">core-security</span></div></div></div><div class="change-set" id="a27477_1689"><div class="change" id="aa27477_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a27477_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a27477_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a27477_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a27477_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a27477_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 10:22 PST" data-time="1448389376">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">No longer blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Need to check permissions for programmatic content script injection"
   href="/show_bug.cgi?id=1193837">1193837</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Implement permissions API and optional_permissions manifest property"
   href="/show_bug.cgi?id=1197420">1197420</a></div><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Need to check permissions for programmatic content script injection"
   href="/show_bug.cgi?id=1193837">1193837</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Implement permissions API and optional_permissions manifest property"
   href="/show_bug.cgi?id=1197420">1197420</a></div></div></div><div class="change-set" id="c3"><div class="comment" data-id="10961069" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a27477_1689"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a27477_1689"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 10:36 PST" data-time="1448390180">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="10961069">There are probably a few other places we need to do this as well. And it should technically be `checkLoadURIStrWithPrincipal`, but that's not as summary-friendly.</pre><div class="activity"><div class="change">Mentor: kmaglione+bmo</div><div class="change">Summary: Universal XSS in previleged contexts by chrome.tabs.update &rarr; chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL</div><div class="change">Whiteboard: [good first bug]</div></div></div><div class="change-set" id="a32874_397635"><div class="change" id="aa32874_397635">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_397635" id="a32874_397635"><img src="https://secure.gravatar.com/avatar/4ae11454315077053052b613d6d77241?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_397635" id="a32874_397635"><a class="email " href="/user_profile?user_id=397635" > <span class="fna">Andy McKay</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a32874_397635"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a32874_397635">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a32874_397635">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 11:52 PST" data-time="1448394773">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [good first bug] &rarr; [good first bug][tabs]</div></div></div><div class="change-set" id="a32948_397635"><div class="change" id="aa32948_397635">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_397635" id="a32948_397635"><img src="https://secure.gravatar.com/avatar/4ae11454315077053052b613d6d77241?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_397635" id="a32948_397635"><a class="email " href="/user_profile?user_id=397635" > <span class="fna">Andy McKay</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a32948_397635"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a32948_397635">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a32948_397635">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 11:54 PST" data-time="1448394847">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: blocking-webextensions?</div></div></div><div class="change-set" id="c4"><div class="comment" data-id="10962383" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_539518" id="a32948_397635"><img src="https://secure.gravatar.com/avatar/f860e50ea0004805292128fb602bc651?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_539518" id="a32948_397635"><a class="email " href="/user_profile?user_id=539518" > <span class="fna">Tyler Steiman</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 16:30 PST" data-time="1448411401">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="10962383">I'd love to work on this if I could get some more information and what part of the source code is involved here.</pre><div class="activity"><div class="change">Flags: needinfo?(kmaglione+bmo)</div></div></div><div class="change-set" id="c5"><div class="comment" data-id="10962451" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a32948_397635"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a32948_397635"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-24 16:47 PST" data-time="1448412478">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="10962451">For tabs.update and tabs.create, the checks need to happen somewhere near:

<a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/browser/components/extensions/ext-tabs.js#337">https://dxr.mozilla.org/mozilla-central/source/browser/components/extensions/ext-tabs.js#337</a>
<a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/browser/components/extensions/ext-tabs.js#267">https://dxr.mozilla.org/mozilla-central/source/browser/components/extensions/ext-tabs.js#267</a>

The principal for checkLoadURI should be `context.contentWindow.document.nodePrincipal`. There are a few places we do similar checks in ext-utils.js, if you need examples.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="a145022_106098"><div class="change" id="aa145022_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a145022_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a145022_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a145022_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-11-25 19:02 PST" data-time="1448506921">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: nobody &rarr; ma.steiman</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="11008074" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_507051" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/7e8b2996acb6304c9b7b7000f408632a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_507051" id="a145022_106098"><a class="email " href="/user_profile?user_id=507051" > <span class="fna">Muneaki Nishimura</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-12-15 11:36 PST" data-time="1450208170">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="11008074">It seems that an similar issue was fixed on the Firefox 43 and that severity is critical.
<a rel="nofollow" href="https://www.mozilla.org/en-US/security/advisories/mfsa2015-148/">https://www.mozilla.org/en-US/security/advisories/mfsa2015-148/</a>
I'm not sure what was the difference between that issue and this, anyway if needed please rate the severity of this bug again.</pre></div><div class="change-set" id="c7"><div class="comment" data-id="11008106" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-12-15 11:46 PST" data-time="1450208780">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="11008106">That issue exposed elevated privileges to web content. This exposes elevated privileges to extension code, which is more trusted than web code, and currently comes with no promises of privilege separation. At the time this bug was reported, we still hadn't implemented permissions checking for `tabs.executeScript`, for instance.</pre></div><div class="change-set" id="c8"><div class="comment" data-id="11043595" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_397635" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/4ae11454315077053052b613d6d77241?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_397635" id="a145022_106098"><a class="email " href="/user_profile?user_id=397635" > <span class="fna">Andy McKay</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-04 09:23 PST" data-time="1451928221">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="11043595">(In reply to Tyler Steiman from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c4">comment #4</a>)
<span class="quote">&gt; I'd love to work on this if I could get some more information and what part
&gt; of the source code is involved here.</span >

Have you had chance to look at this yet?</pre><div class="activity"><div class="change">Flags: blocking-webextensions? &rarr; blocking-webextensions+</div></div></div><div class="change-set" id="c9"><div class="comment" data-id="11060733" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-08 18:40 PST" data-time="1452307258">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="11060733">Luca, this might be a good bug for you. We have a `checkLoadURL` method in the `context` objects (which are ExtensionPage instances) now.</pre><div class="activity"><div class="change">Assignee: ma.steiman &rarr; nobody</div></div></div><div class="change-set" id="c10"><div class="comment" data-id="11064427" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-11 08:16 PST" data-time="1452529006">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="11064427">(In reply to Kris Maglione [:kmag] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c9">comment #9</a>)
<span class="quote">&gt; Luca, this might be a good bug for you. We have a `checkLoadURL` method in
&gt; the `context` objects (which are ExtensionPage instances) now.</span >

Thanks Kris, I've done a couple of tests about how Chromium behaves in this scenarios and it looks that &quot;javascript:&quot; URLs are checked like javascript evaluation requests on the tabs.update target (mostly like in tabs.executeScript).

tabs.create
- &quot;javascript:&quot; URLs execute successfully in a new &quot;about:blank&quot; tab
- &quot;about:&quot; or &quot;chrome:&quot; URLs do load correctly in a new tab

tabs.update
- &quot;javascript:&quot; URLs
  - logged error: Cannot access a chrome:// URL
  - logged error: Cannot access a chrome-extension:// URL of different extension
  - logged error: Cannot access contents of url &quot;http...&quot;. 
                  Extension manifest must request permission to access this host.
- &quot;about:&quot; or &quot;chrome:&quot; URLs do load correctly in the existent tab

checkLoadURL seems to intended to check if a defined URL can be loaded by the current context (the ExtensionPage, but I didn't find any current usage of it) instead of doing the evaluation based on the principal of the target tab.

I'm going to upload a proposed patch which:
- define a new &quot;checkAccessTargetPrincipal&quot; helper in the ExtensionPage prototype
- introduce activeTab and whitelists's MatchPattern behavior in the tabs.update API method
- introduce more tests in the tabs.update test file

In the test cases I have to add a group which tests the error logged by trying accessing 
a tab from a different extension (currently the raise an exception if I try to load a second
extension)</pre></div><div class="change-set" id="c11"><div class="comment" data-id="11064433" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-11 08:18 PST" data-time="1452529107">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8706412"
         class="attachment patch obsolete"
         data-id="8706412" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">
      <meta itemprop="contentSize" content="3879">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8706412">
          <a class="link" href="attachment.cgi?id=8706412&amp;action=diff">
        <span id="att-8706412-description" itemprop="description">0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8706412&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8706412">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-11" data-comment-id="11064433">This draft patch contains the proposed changes to the ExtensionPage and tabs.update.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8706412&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch"
           class=""
        >Attachment #8706412</a> -
        Flags: feedback?(kmaglione+bmo)</div></div></div><div class="change-set" id="c12"><div class="comment" data-id="11064439" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-11 08:20 PST" data-time="1452529228">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8706414"
         class="attachment patch obsolete"
         data-id="8706414" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">
      <meta itemprop="contentSize" content="5338">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8706414">
          <a class="link" href="attachment.cgi?id=8706414&amp;action=diff">
        <span id="att-8706414-description" itemprop="description">0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8706414&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8706414">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-12" data-comment-id="11064439">This patch introduces more tests on tabs.update (in particular its behaviour on &quot;javascript:&quot; url applied to different kinds of target tabs)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8706414&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch"
           class=""
        >Attachment #8706414</a> -
        Flags: feedback?(kmaglione+bmo)</div></div></div><div class="change-set" id="c13"><div class="comment" data-id="11066259" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-11 14:46 PST" data-time="1452552398">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="11066259">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8706412" name="attach_8706412" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">attachment 8706412</a> <a href="/attachment.cgi?id=8706412&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[details]</a> <a href="/attachment.cgi?id=8706412&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8706412'>[review]</a>
0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8706412" name="attach_8706412" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">attachment 8706412</a> <a href="/attachment.cgi?id=8706412&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[details]</a> <a href="/attachment.cgi?id=8706412&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8706412'>[review]</a>:
-----------------------------------------------------------------

I'm not sure we need to do anything this complicated.

The checkLoadURI function is the correct way to check if a principal is allowed to load a URI. It already has special logic for dealing with extension principals, and if that's insufficient, it should be fixed at the platform level.

The principal of the target tab doesn't really matter. If we do the check with the DISALLOW_INHERIT_PRINCIPAL flag, javascript: and data: URLs which inherit the page's principal won't be accepted, no matter what the principal is.

I suppose we could add a special case to allow it when the extension has access to that page, but it doesn't seem necessary. They can already execute scripts via `executeScript`, which already has the appropriate checks in place.

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +331,5 &#64;&#64;
<span class="quote">&gt;          let tabbrowser = tab.ownerDocument.defaultView.gBrowser;
&gt; +
&gt; +        let matchesHost;
&gt; +
&gt; +        TabManager.for(extension).addActiveTabPermission(TabManager.activeTab);</span >

I don't understand why we would do this.

&#64;&#64; +347,3 &#64;&#64;
<span class="quote">&gt;          if (updateProperties.url !== null) {
&gt; +          let updateURI = Services.io.newURI(updateProperties.url, null, null);
&gt; +          let targetPrincipal = tab.linkedBrowser.contentDocument.nodePrincipal;</span >

This won't work under e10s.

&#64;&#64; +350,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +          // TODO: checkAccessTarget should set runtime.lastError
&gt; +          if (updateURI.scheme !== &quot;javascript&quot; ||
&gt; +              context.checkAccessTargetPrincipal(targetPrincipal, matchesHost)) {
&gt; +            tab.linkedBrowser.loadURI(updateProperties.url);</span >

This check isn't safe under e10s. The tab may have loaded a different document by the time we load a URL into it.

::: toolkit/components/extensions/Extension.jsm
&#64;&#64; +247,5 &#64;&#64;
<span class="quote">&gt;    get principal() {
&gt;      return this.contentWindow.document.nodePrincipal;
&gt;    },
&gt;  
&gt; +  checkAccessTargetPrincipal(targetPrincipal, matchesHost) {</span >

I don't think this is necessary.

As far as cross-origin requests go, we already check this at the platform layer.

For load access, we do the same, though it's probably somewhat more restrictive than this check at the moment.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8706412&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch"
           class=""
        >Attachment #8706412</a> -
        Flags: <span class="activity-deleted">feedback?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="c14"><div class="comment" data-id="11066287" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-11 14:55 PST" data-time="1452552902">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="11066287">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8706414" name="attach_8706414" title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">attachment 8706414</a> <a href="/attachment.cgi?id=8706414&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">[details]</a> <a href="/attachment.cgi?id=8706414&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8706414'>[review]</a>
0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8706414" name="attach_8706414" title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">attachment 8706414</a> <a href="/attachment.cgi?id=8706414&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">[details]</a> <a href="/attachment.cgi?id=8706414&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8706414'>[review]</a>:
-----------------------------------------------------------------

f+ on the general implementation, but I think the behavior we're testing for should be different.

::: browser/components/extensions/test/browser/browser_ext_tabs_update.js
&#64;&#64; +51,5 &#64;&#64;
<span class="quote">&gt; +function* testAccessTarget(url, permissions) {
&gt; +  let extension = ExtensionTestUtils.loadExtension({
&gt; +    manifest: {
&gt; +      &quot;permissions&quot;: [&quot;tabs&quot;].concat(permissions),
&gt; +      &quot;webAccessibleResources&quot;: [ &quot;tab.html&quot; ],</span >

No spaces around square brackets.

&#64;&#64; +89,5 &#64;&#64;
<span class="quote">&gt; +      });
&gt; +    },
&gt; +  });
&gt; +
&gt; +  let awaitExtensionTabURL = extension.awaitMessage(&quot;ready&quot;);</span >

There's no need to do this ahead of time. Just use `yield extension.awaitMessage(&quot;ready&quot;)` when you need it.

&#64;&#64; +101,5 &#64;&#64;
<span class="quote">&gt; +  info(`Testing on tab with URL ${url}`);
&gt; +
&gt; +
&gt; +  let tab1 = yield BrowserTestUtils.openNewForegroundTab(gBrowser, url);
&gt; +  gBrowser.selectedTab = tab1;</span >

This isn't necessary. `openNewForegroundTab` already does it.

&#64;&#64; +109,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +  yield BrowserTestUtils.removeTab(tab1);
&gt; +  yield extension.unload();
&gt; +
&gt; +  let errors = Services.console.getMessageArray() || [];</span >

This is problematic for a few reasons. You need to use `SimpleTest.monitorConsole` before you start your test and `endMonitorConsole` when you're done. There are a few other tests that do this.

&#64;&#64; +125,5 &#64;&#64;
<span class="quote">&gt; +  info(&quot;Start testing tabs.update on javascript URLs&quot;);
&gt; +
&gt; +  let testCases = [{
&gt; +    tabURL: &quot;<a rel="nofollow" href="http://example.net">http://example.net</a>&quot;,
&gt; +    extensionSpecialPermissions: [&quot;activeTab&quot;],</span >

The active tab permission should only grant permission for the active tab after the user has interacted with it (e.g., by clicking the extension's toolbar button), so it shouldn't apply here.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8706414&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch"
           class=""
        >Attachment #8706414</a> -
        Flags: feedback?(kmaglione+bmo) &rarr; feedback+</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="11068021" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_428608" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/1f41f3ef916e1c1fc9401cf3212a6708?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_428608" id="a145022_106098"><a class="email " href="/user_profile?user_id=428608" > <span class="fna">Frederik Braun [:freddy] - vacation (back Nov 1st)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-12 04:40 PST" data-time="1452602447">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="11068021">(In reply to Luca Greco [:rpl] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c10">comment #10</a>)
<span class="quote">&gt; (In reply to Kris Maglione [:kmag] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c9">comment #9</a>)
&gt; &gt; Luca, this might be a good bug for you. We have a `checkLoadURL` method in
&gt; &gt; the `context` objects (which are ExtensionPage instances) now.
&gt; 
&gt; Thanks Kris, I've done a couple of tests about how Chromium behaves in this
&gt; scenarios and it looks that &quot;javascript:&quot; URLs are checked like javascript
&gt; evaluation requests on the tabs.update target (mostly like in
&gt; tabs.executeScript).</span >


This comparison should include tests for data: URLs as their behavior is very different between Chrome and Firefox (i.e., data: inherits context in Firefox, but gets a blank context in Chrome)</pre></div><div class="change-set" id="c16"><div class="comment" data-id="11068217" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-12 06:00 PST" data-time="1452607244">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="11068217">(In reply to Kris Maglione [:kmag] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c13">comment #13</a>)
<span class="quote">&gt; Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8706412" name="attach_8706412" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">attachment 8706412</a> <a href="/attachment.cgi?id=8706412&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[details]</a> <a href="/attachment.cgi?id=8706412&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8706412'>[review]</a>
&gt; 0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch
&gt; 
&gt; Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8706412" name="attach_8706412" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">attachment 8706412</a> <a href="/attachment.cgi?id=8706412&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[details]</a> <a href="/attachment.cgi?id=8706412&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8706412'>[review]</a>:
&gt; -----------------------------------------------------------------
&gt; 
&gt; I'm not sure we need to do anything this complicated.
&gt; 
&gt; The checkLoadURI function is the correct way to check if a principal is
&gt; allowed to load a URI. It already has special logic for dealing with
&gt; extension principals, and if that's insufficient, it should be fixed at the
&gt; platform level.
&gt; 
&gt; The principal of the target tab doesn't really matter. If we do the check
&gt; with the DISALLOW_INHERIT_PRINCIPAL flag, javascript: and data: URLs which
&gt; inherit the page's principal won't be accepted, no matter what the principal
&gt; is.
&gt; 
&gt; I suppose we could add a special case to allow it when the extension has
&gt; access to that page, but it doesn't seem necessary. They can already execute
&gt; scripts via `executeScript`, which already has the appropriate checks in
&gt; place.</span >

I agree, as tabs.executeScript is a better and more explicit way to execute javascript code in the context of a target tab window, I think we can be more restrictive on what kind of url we can load in a tab using tabs.update (and put a note about this in the &quot;WebExtensions - Chrome incompatibilities&quot; MDN doc page).

I'm going to rewrite the patch to simply use the checkLoadURL to test the url and change the tests accordingly (e.g. the different expected error messages, and use different combinations of existent tab url and url to be loaded using tabs.update, like &quot;about:&quot;, regular webpages url, &quot;javascript:&quot; and &quot;data:&quot; url, as suggested by Frederik)</pre></div><div class="change-set" id="c17"><div class="comment" data-id="11074294" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-13 14:43 PST" data-time="1452725006">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8707641"
         class="attachment patch obsolete"
         data-id="8707641" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="1526">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8707641">
          <a class="link" href="attachment.cgi?id=8707641&amp;action=diff">
        <span id="att-8707641-description" itemprop="description">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8707641&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8707641">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-17" data-comment-id="11074294">This patch is an update version of the <span class="bz_obsolete"><a href="/attachment.cgi?id=8706412" name="attach_8706412" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">Attachment 8706412</a> <a href="/attachment.cgi?id=8706412&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[details]</a> <a href="/attachment.cgi?id=8706412&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch">[diff]</a></span> which implements the more restricted tabs.update.

This new &quot;tabs.update&quot; version may load into a target tab:

- regular web pages URLs
- non privileged &quot;about:&quot; URLs (e.g. about:blank)
- pages from the same extension

it cannot load into a target tab:
- privileged &quot;about:&quot; URLs (e.g. about:config)
- javascript URLs
- data URLs</pre><div class="activity"><div class="change">Assignee: nobody &rarr; lgreco</div><div class="change">
        <a href="/attachment.cgi?id=8706412&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-check-it-has-permissi.patch"
           class=""
        >Attachment #8706412</a> -
        Attachment is obsolete: true</div><div class="change">Status: NEW &rarr; ASSIGNED</div><div class="change">
        <a href="/attachment.cgi?id=8707641&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8707641</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c18"><div class="comment" data-id="11074345" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-13 14:58 PST" data-time="1452725923">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8707651"
         class="attachment patch obsolete"
         data-id="8707651" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4900">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8707651">
          <a class="link" href="attachment.cgi?id=8707651&amp;action=diff">
        <span id="att-8707651-description" itemprop="description">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8707651&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8707651">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-18" data-comment-id="11074345">This patch is a rework of the new test from <span class="bz_obsolete"><a href="/attachment.cgi?id=0706414" name="attach_0706414" title="v2">Attachment 0706414</a> <a href="/attachment.cgi?id=0706414&amp;action=edit" title="v2">[details]</a> <a href="/attachment.cgi?id=0706414&amp;action=diff" title="v2">[diff]</a></span>

It checks which kind of URL can be loaded in different types of existing tabs and when it will log an error
(and it checks that successes and failures only depend from the URL that is going to be loaded, and do not depend from the url that is currently loaded in the target tab)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8706414&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-on-javascript-URLs.-r-k.patch"
           class=""
        >Attachment #8706414</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8707651&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8707651</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="11078265" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-14 16:51 PST" data-time="1452819068">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="11078265">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8707641" name="attach_8707641" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">attachment 8707641</a> <a href="/attachment.cgi?id=8707641&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8707641&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8707641'>[review]</a>
0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8707641" name="attach_8707641" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">attachment 8707641</a> <a href="/attachment.cgi?id=8707641&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8707641&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8707641'>[review]</a>:
-----------------------------------------------------------------

We need to do this for tabs.create as well.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8707641&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8707641</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c20"><div class="comment" data-id="11078318" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-14 17:02 PST" data-time="1452819770">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="11078318">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8707651" name="attach_8707651" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8707651</a> <a href="/attachment.cgi?id=8707651&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8707651&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8707651'>[review]</a>
0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8707651" name="attach_8707651" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8707651</a> <a href="/attachment.cgi?id=8707651&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8707651&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8707651'>[review]</a>:
-----------------------------------------------------------------

Let's move this to its own test file. It's probably going to trigger timeouts on debug builds if it runs with the other update tests.

::: browser/components/extensions/test/browser/browser_ext_tabs_update.js
&#64;&#64; +52,5 &#64;&#64;
<span class="quote">&gt; +  let extension = ExtensionTestUtils.loadExtension({
&gt; +    manifest: {
&gt; +      &quot;backgound&quot;: { scripts: [&quot;background.js&quot;] },
&gt; +      &quot;permissions&quot;: [&quot;tabs&quot;],
&gt; +      &quot;webAccessibleResources&quot;: [ &quot;tab.html&quot; ],</span >

No spaces inside of square brackets.

&#64;&#64; +78,5 &#64;&#64;
<span class="quote">&gt; +          for (let tab of tabs.slice(1)) {
&gt; +            updates.push(new Promise((resolve, reject) =&gt; {
&gt; +              browser.tabs.update(tab.id, {
&gt; +                url: tabsUpdateURL,
&gt; +              }, resolve);</span >

We're only intending to update one tab, right?

&#64;&#64; +178,5 &#64;&#64;
<span class="quote">&gt; +          .map((check) =&gt; Object.assign({}, check, { existentTabURL }))
&gt; +          .filter(el =&gt; el.tabsUpdateURL != el.existentTabURL);
&gt; +
&gt; +    return acc.concat(testSet);
&gt; +  }, []);</span >

I don't think we need to do this anymore. We're not checking what's currently loaded into the tab, so it shouldn't make a difference.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8707651&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8707651</a> -
        Flags: <span class="activity-deleted">review?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="c21"><div class="comment" data-id="11086947" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 04:30 PST" data-time="1453206610">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8709380"
         class="attachment patch obsolete"
         data-id="8709380" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="1522">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8709380">
          <a class="link" href="attachment.cgi?id=8709380&amp;action=diff">
        <span id="att-8709380-description" itemprop="description">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8709380&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709380">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-21" data-comment-id="11086947">Same patch as <span class="bz_obsolete"><a href="/attachment.cgi?id=8707641" name="attach_8707641" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">Attachment 8707641</a> <a href="/attachment.cgi?id=8707641&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8707641&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> (just rebased)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8707641&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8707641</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8709380&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8709380</a> -
        Flags: review+</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="11086953" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 04:33 PST" data-time="1453206800">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8709382"
         class="attachment patch obsolete"
         data-id="8709382" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4792">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8709382">
          <a class="link" href="attachment.cgi?id=8709382&amp;action=diff">
        <span id="att-8709382-description" itemprop="description">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8709382&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709382">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-22" data-comment-id="11086953">Updated test case for the new tabs.update behavior:

- split the test case in a separated test file
- simplified as suggested in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c20">Comment 20</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8707651&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8707651</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8709382&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8709382</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="11086957" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 04:34 PST" data-time="1453206897">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8709383"
         class="attachment patch obsolete"
         data-id="8709383" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="1365">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8709383">
          <a class="link" href="attachment.cgi?id=8709383&amp;action=diff">
        <span id="att-8709383-description" itemprop="description">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8709383&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709383">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-23" data-comment-id="11086957">This patch introduces the checkLoadURL on tabs.create as well.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709383&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8709383</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c24"><div class="comment" data-id="11086959" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 04:36 PST" data-time="1453206991">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8709385"
         class="attachment patch obsolete"
         data-id="8709385" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4381">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8709385">
          <a class="link" href="attachment.cgi?id=8709385&amp;action=diff">
        <span id="att-8709385-description" itemprop="description">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8709385&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8709385">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-24" data-comment-id="11086959">This patch introduces a new test file which tests the new tabs.create behaviour.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709385&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8709385</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="11089920" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 17:00 PST" data-time="1453251603">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="11089920">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8709382" name="attach_8709382" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8709382</a> <a href="/attachment.cgi?id=8709382&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8709382&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8709382'>[review]</a>
0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8709382" name="attach_8709382" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8709382</a> <a href="/attachment.cgi?id=8709382&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8709382&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8709382'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/test/browser/browser_ext_tabs_update_url.js
&#64;&#64; +47,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +  info(`tab.update URL &quot;${tabsUpdateURL}&quot; on tab with URL &quot;${existentTabURL}&quot;`);
&gt; +
&gt; +  let tab1 = yield BrowserTestUtils.openNewForegroundTab(gBrowser, existentTabURL);
&gt; +  gBrowser.selectedTab = tab1;</span >

|openNewForegroundTab| should take care of this.

&#64;&#64; +52,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +  extension.sendMessage(&quot;start&quot;, tabsUpdateURL);
&gt; +  yield extension.awaitMessage(&quot;done&quot;);
&gt; +
&gt; +  yield BrowserTestUtils.removeTab(tab1);</span >

It would be good to check the final URL of the tab before we remove it.

&#64;&#64; +57,5 &#64;&#64;
<span class="quote">&gt; +  yield extension.unload();
&gt; +
&gt; +  let errors = Services.console.getMessageArray() || [];
&gt; +
&gt; +  Services.console.reset();</span >

I mentioned this before: We should really use |SimpleTest.monitorConsole| and |SimpleTest.endMonitorConsole| for this.

Console messages are handled asynchronously, so unless you take special precautions, there's a race here. Clearing the console is also not really good test etiquette.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709382&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8709382</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c26"><div class="comment" data-id="11090010" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 17:37 PST" data-time="1453253825">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="11090010">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8709383" name="attach_8709383" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">attachment 8709383</a> <a href="/attachment.cgi?id=8709383&amp;action=edit" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8709383&amp;action=diff" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8709383'>[review]</a>
0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8709383" name="attach_8709383" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">attachment 8709383</a> <a href="/attachment.cgi?id=8709383&amp;action=edit" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8709383&amp;action=diff" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8709383'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +264,5 &#64;&#64;
<span class="quote">&gt;          let url = createProperties.url || aboutNewTabService.newTabURL;
&gt;          url = context.uri.resolve(url);
&gt;  
&gt; +        if (!context.checkLoadURL(url)) {
&gt; +          Cu.reportError(`Permission denied on tabs.create with url &quot;${url}&quot;`);</span >

Let's skip this for now. checkLoadURI already reports the error. We can add more specific reporting when we add lastError support.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709383&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8709383</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c27"><div class="comment" data-id="11090011" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-19 17:39 PST" data-time="1453253951">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="11090011">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8709385" name="attach_8709385" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">attachment 8709385</a> <a href="/attachment.cgi?id=8709385&amp;action=edit" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8709385&amp;action=diff" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8709385'>[review]</a>
0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8709385" name="attach_8709385" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">attachment 8709385</a> <a href="/attachment.cgi?id=8709385&amp;action=edit" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8709385&amp;action=diff" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8709385'>[review]</a>:
-----------------------------------------------------------------

r=me with the same caveats as the tabs.update tests.

::: browser/components/extensions/test/browser/browser_ext_tabs_create_url.js
&#64;&#64; +31,5 &#64;&#64;
<span class="quote">&gt; +        browser.tabs.create({ url: tabsCreateURL }, (tab) =&gt; {
&gt; +          if (tab) {
&gt; +            browser.tabs.remove(tab.id);
&gt; +          }
&gt; +          browser.test.sendMessage(&quot;done&quot;);</span >

Please check that the tab is undefined when we're expecting an error.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709385&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8709385</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c28"><div class="comment" data-id="11091910" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 08:54 PST" data-time="1453308887">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710003"
         class="attachment patch obsolete"
         data-id="8710003" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="4803">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710003">
          <a class="link" href="attachment.cgi?id=8710003&amp;action=diff">
        <span id="att-8710003-description" itemprop="description">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710003&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710003">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-28" data-comment-id="11091910">To cover some of the review comments on the test cases, I had to apply some of the changes on this first patch (and I reworked the method to be
more readable and to better reproduce some of the expected behaviour, based on more tests on other Chromium based browsers): 

- removed Cu.reportError (I reported the error there mainly to prevents them to become new silent errors sources, but the runtime.lastError is not so far so, I agree and prefer to leave a comment in the mean time and then update the test case to check it in the callbacks, and remove completely any console service usage in the tests)

- reworked tabs.update to ensure to better reproduce some details of the API behaviour on Chromium:

  - the callback tab parameter should be null when the request is totally invalid

  - the URL in the callback tab parameter should be the requested one 
    (Chromium don't care if the loading is not yet started or completed, 
    on the contrary the other tab fields, e.g. the title, are unmodified)

The new version of this patch introduces a small tweak in ext-utils.js:
    
- small tweak on TabManager.convert(...) to ensure it accepts and returns 
  undefined when its tab parameter is undefined or null

NOTE: added f? due to the reworked tab.update method and the small change to ext-utils.js</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709380&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8709380</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710003&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710003</a> -
        Flags: feedback?(kmaglione+bmo)</div></div></div><div class="change-set" id="c29"><div class="comment" data-id="11091929" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 09:03 PST" data-time="1453309415">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710004"
         class="attachment patch obsolete"
         data-id="8710004" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4611">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710004">
          <a class="link" href="attachment.cgi?id=8710004&amp;action=diff">
        <span id="att-8710004-description" itemprop="description">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710004&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710004">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-29" data-comment-id="11091929">This new version introduces the suggested changes, the result is a simplified and cleaner version of the new test file introduced by this patch.

- removed any Service.console usage (it is definitely better to check the runtime.lastError in this test case, once it lands and the tabs API methods support it)
    
- removed gBrowser.selectedTab (ouch! sorry, I forgot to removed it from this patch)

- test the tab in the tabs.update callback:
  - on error, tab should be null 
  - on success, tab should be defined and the tab.url should be url in the tabs.update request</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709382&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8709382</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c30"><div class="comment" data-id="11091962" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 09:13 PST" data-time="1453310031">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710008"
         class="attachment patch obsolete"
         data-id="8710008" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="2576">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710008">
          <a class="link" href="attachment.cgi?id=8710008&amp;action=diff">
        <span id="att-8710008-description" itemprop="description">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710008&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710008">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-30" data-comment-id="11091962">- fixed bug (aboutNewTabService.newTabURL is usually an &quot;about:&quot; or a &quot;chrome:&quot; URL and it will not pass checkLoadURL)

- fixed nit, moved the &quot;TODO: runtime.lastError&quot; out of the &quot;if (callback)&quot; branch

- minor rework of the tabs.create method, which better reproduces some details of the chrome behavior:

  - the URL in the tab Details should be pre-populated with the requested URL,
  - the callback tab parameter should be undefined when the request is invalid

NOTE: added f? due to the rework on the tabs.create method and the fix applied to do not break the &quot;aboutNewTabService.newTabURL&quot; scenario</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709383&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8709383</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710008&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710008</a> -
        Flags: feedback?(kmaglione+bmo)</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="11091979" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 09:18 PST" data-time="1453310290">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710011"
         class="attachment patch obsolete"
         data-id="8710011" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4371">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710011">
          <a class="link" href="attachment.cgi?id=8710011&amp;action=diff">
        <span id="att-8710011-description" itemprop="description">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710011&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710011">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-31" data-comment-id="11091979">This new version of the last patch introduces the suggested changes, plus the same simplifications and clean up introduced in the last version of the other test file (the tabs.update test file from <span class="bz_obsolete"><a href="/attachment.cgi?id=8710004" name="attach_8710004" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">Attachment 8710004</a> <a href="/attachment.cgi?id=8710004&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710004&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span>).</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8709385&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8709385</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="11092937" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 13:28 PST" data-time="1453325316">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="11092937">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710003" name="attach_8710003" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">attachment 8710003</a> <a href="/attachment.cgi?id=8710003&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710003&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710003'>[review]</a>
0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710003" name="attach_8710003" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">attachment 8710003</a> <a href="/attachment.cgi?id=8710003&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710003&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710003'>[review]</a>:
-----------------------------------------------------------------

Let's save this for a separate bug. Most of it isn't especially related to the issue here.

(In reply to Luca Greco [:rpl] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c28">comment #28</a>)
<span class="quote">&gt;   - the URL in the callback tab parameter should be the requested one 
&gt;     (Chromium don't care if the loading is not yet started or completed, 
&gt;     on the contrary the other tab fields, e.g. the title, are unmodified)</span >

I'm on the fence about this. I've run into it before, but I'm not sure the
solution is to special case the URL in the callback arguments. Ideally we
should maintain some kind of internal state so queries also return the updated
URL, but that requires clearing it when we know the load failed.

Can you file a separate bug, and we can discuss it further there?

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +325,5 &#64;&#64;
<span class="quote">&gt;          let tabbrowser = tab.ownerDocument.defaultView.gBrowser;
&gt; +
&gt; +        // An update is valid if at least one of the supported updateProperties is valid
&gt; +        // and the request is going to be handled.
&gt; +        let isValidTabUpdate = false;</span >

I don't think emulating this behavior is necessary. It's not documented, and it doesn't seem useful enough to justify the added complexity.

::: browser/components/extensions/ext-utils.js
&#64;&#64; +421,5 &#64;&#64;
<span class="quote">&gt;    },
&gt;  
&gt;    convert(tab) {
&gt; +    if (!tab) {
&gt; +      return undefined;</span >

I'd rather not do this if we can avoid it. If there are places where we're expecting the tab to be null, we can do |tab &amp;&amp; tabManager.convert(...)|.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710003&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710003</a> -
        Flags: <span class="activity-deleted">feedback?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="c33"><div class="comment" data-id="11092960" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 13:33 PST" data-time="1453325617">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="11092960">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710004" name="attach_8710004" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8710004</a> <a href="/attachment.cgi?id=8710004&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710004&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710004'>[review]</a>
0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710004" name="attach_8710004" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8710004</a> <a href="/attachment.cgi?id=8710004&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710004&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710004'>[review]</a>:
-----------------------------------------------------------------

f+, but let's save the callback URL checks for a follow-up, if we decide to make those changes.

In the mean time, let's just use an onUpdated observer. You can steal the helper function I added here, if it helps: <a rel="nofollow" href="https://hg.mozilla.org/integration/fx-team/file/8fc9a5eeede3/browser/components/extensions/test/browser/browser_ext_pageAction_context.js#l180">https://hg.mozilla.org/integration/fx-team/file/8fc9a5eeede3/browser/components/extensions/test/browser/browser_ext_pageAction_context.js#l180</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710004&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710004</a> -
        Flags: feedback+</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="11092969" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 13:35 PST" data-time="1453325740">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="11092969">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710008" name="attach_8710008" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">attachment 8710008</a> <a href="/attachment.cgi?id=8710008&amp;action=edit" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710008&amp;action=diff" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710008'>[review]</a>
0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710008" name="attach_8710008" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">attachment 8710008</a> <a href="/attachment.cgi?id=8710008&amp;action=edit" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710008&amp;action=diff" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710008'>[review]</a>:
-----------------------------------------------------------------

Let's also save this for a follow-up.

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +265,5 &#64;&#64;
<span class="quote">&gt;          url = context.uri.resolve(url);
&gt;  
&gt; +        // Skip checkLoadURL if the URL has been populated from the aboutNewTabService,
&gt; +        // (it is usually an &quot;about:&quot; or &quot;chrome:&quot; URL).
&gt; +        if (url != aboutNewTabService.newTabURL &amp;&amp; !context.checkLoadURL(url)) {</span >

I'd rather not special case the new tab URL. Extensions can already load it by simply not passing a URL. If we decide to add a separate special case for it, it should be on the platform side rather than here.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710008&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710008</a> -
        Flags: <span class="activity-deleted">feedback?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="c35"><div class="comment" data-id="11092980" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a145022_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-20 13:38 PST" data-time="1453325894">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="11092980">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710011" name="attach_8710011" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">attachment 8710011</a> <a href="/attachment.cgi?id=8710011&amp;action=edit" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710011&amp;action=diff" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710011'>[review]</a>
0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710011" name="attach_8710011" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">attachment 8710011</a> <a href="/attachment.cgi?id=8710011&amp;action=edit" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710011&amp;action=diff" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710011'>[review]</a>:
-----------------------------------------------------------------

Same as the other patch. f+, but let's save the URL property checks for a separate bug.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710011&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710011</a> -
        Flags: feedback+</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="11096130" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 10:39 PST" data-time="1453401593">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710579"
         class="attachment patch obsolete"
         data-id="8710579" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="3615">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710579">
          <a class="link" href="attachment.cgi?id=8710579&amp;action=diff">
        <span id="att-8710579-description" itemprop="description">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710579&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710579">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-36" data-comment-id="11096130">Updated the patch with the following changes:

- removed the change on ext-utils.js

- changed the detection of invalid tabs.update requests
  (I think that we have to handle this new scenario, 
  the tabs.update apparently can only fail on invalid tabId on Chromium,
  so this is a Firefox special case, and I think that returning 
  the tab details to the callback when we have basically discarded
  the request can be misleading)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710003&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710003</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710579&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710579</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="11096147" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 10:43 PST" data-time="1453401789">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710580"
         class="attachment patch obsolete"
         data-id="8710580" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4577">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710580">
          <a class="link" href="attachment.cgi?id=8710580&amp;action=diff">
        <span id="att-8710580-description" itemprop="description">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710580&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710580">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-37" data-comment-id="11096147">Updated &quot;tabs.update test case&quot; patch:

- removed assertion on the tab.url (which will be discussed and eventually fixed in a follow up)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710004&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710004</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710580&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710580</a> -
        Flags: review+</div></div></div><div class="change-set" id="c38"><div class="comment" data-id="11096216" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 10:56 PST" data-time="1453402565">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710588"
         class="attachment patch obsolete"
         data-id="8710588" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="2523">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710588">
          <a class="link" href="attachment.cgi?id=8710588&amp;action=diff">
        <span id="att-8710588-description" itemprop="description">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710588&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710588">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-38" data-comment-id="11096216">Updated patch on tabs.create:

- cleaned up the tabs.create changes

I had to handle the empty url differently because on empty URLs:

- context.uri.resolve will resolve it as an URL relative to the
  context base URI
- gBrowser.addTab will open a tab on &quot;about:blank&quot;, instead of opening
  it on the expected URL

Currently, if we do not use aboutNewTabService.newTabURL, we break a number
of test cases that are counting on this.

Nevertheless, I think that the current implementation is wrong because,
I think it is supposed to behave like the keyboard shortcut or the menu item
that let the user opening a new tab, and:

- the &quot;chrome://...&quot; URL is visible in the location bar (and it shouldn't)
- on a private window it should show &quot;about:privatebrowsing&quot; instead of
  &quot;about:newtab&quot;

I've some ideas (and a preliminary patch for it, I need to complete to fix the test cases),
but it would be better to move the discussion in a separate bugzilla issue as a follow-up.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710008&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710008</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710588&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710588</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c39"><div class="comment" data-id="11096244" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a145022_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a145022_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 11:00 PST" data-time="1453402844">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710594"
         class="attachment patch obsolete"
         data-id="8710594" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="3354">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710594">
          <a class="link" href="attachment.cgi?id=8710594&amp;action=diff">
        <span id="att-8710594-description" itemprop="description">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710594&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710594">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-39" data-comment-id="11096244">Updated tabs.create test:

- removed all the kind of URLs which are already tested by the other tabs.create test file (now it tests only invalid URLs)

Maybe I should rename the file accordingly.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710011&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710011</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710594&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710594</a> -
        Flags: feedback?(kmaglione+bmo)</div></div></div><div class="change-set" id="a5040972_339062"><div class="change" id="aa5040972_339062">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5040972_339062"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_339062" id="a5040972_339062"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5040972_339062"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5040972_339062">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a5040972_339062">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 11:01 PST" data-time="1453402871">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710580&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710580</a> -
        Flags: review+ &rarr; feedback+</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="11096269" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5040972_339062"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5040972_339062"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 11:03 PST" data-time="1453403033">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710597"
         class="attachment patch obsolete"
         data-id="8710597" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0005-Bug-1227462-fix-tabs.onUpdated-test-case.-r-kmag.patch">
      <meta itemprop="contentSize" content="1645">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710597">
          <a class="link" href="attachment.cgi?id=8710597&amp;action=diff">
        <span id="att-8710597-description" itemprop="description">0005-Bug-1227462-fix-tabs.onUpdated-test-case.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710597&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710597">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-40" data-comment-id="11096269">Small change on the test file for tabs.onUpdated, which cannot use anymore &quot;about:preferences&quot; as a valid url for the tabs.update method call
that is used to generate the update events.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710597&amp;action=edit"
           title="0005-Bug-1227462-fix-tabs.onUpdated-test-case.-r-kmag.patch"
           class=""
        >Attachment #8710597</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="11096840" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5040972_339062"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a5040972_339062"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 13:33 PST" data-time="1453411989">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="11096840">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710579" name="attach_8710579" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">attachment 8710579</a> <a href="/attachment.cgi?id=8710579&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710579&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710579'>[review]</a>
0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710579" name="attach_8710579" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">attachment 8710579</a> <a href="/attachment.cgi?id=8710579&amp;action=edit" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710579&amp;action=diff" title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710579'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +323,5 &#64;&#64;
<span class="quote">&gt;        update: function(tabId, updateProperties, callback) {
&gt;          let tab = tabId !== null ? TabManager.getTab(tabId) : TabManager.activeTab;
&gt;          let tabbrowser = tab.ownerDocument.defaultView.gBrowser;
&gt; +
&gt; +        if (tab) {</span >

Let's just return early here if there's no matching tab.

&#64;&#64; +353,5 &#64;&#64;
<span class="quote">&gt; +              let keyIsNotURL = (k) =&gt; k !== &quot;url&quot;;
&gt; +              let valueIsNotNull = (k) =&gt; updateProperties[k] !== null;
&gt; +              let otherUpdatedProperties = Object.keys(updateProperties)
&gt; +                                                 .filter(keyIsNotURL)
&gt; +                                                 .some(valueIsNotNull);</span >

I don't think there's any reason to try to exactly mimic Chrome's behavior here. Let's just check this first. If the URL is illegal, we should return immediately with an error, rather than trying to handle cases where we update other properties but then reject the URL.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710579&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710579</a> -
        Flags: <span class="activity-deleted">review?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="c42"><div class="comment" data-id="11096858" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5040972_339062"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a5040972_339062"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 13:36 PST" data-time="1453412172">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="11096858">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710580" name="attach_8710580" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8710580</a> <a href="/attachment.cgi?id=8710580&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710580&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710580'>[review]</a>
0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710580" name="attach_8710580" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">attachment 8710580</a> <a href="/attachment.cgi?id=8710580&amp;action=edit" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710580&amp;action=diff" title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710580'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/test/browser/browser_ext_tabs_update_url.js
&#64;&#64; +4,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +function* testTabsUpdateURL(existentTabURL, tabsUpdateURL, isErrorExpected) {
&gt; +  let extension = ExtensionTestUtils.loadExtension({
&gt; +    manifest: {
&gt; +      &quot;backgound&quot;: { scripts: [&quot;background.js&quot;] },</span >

This line is unnecessary (and should probably be an error).

&#64;&#64; +31,5 &#64;&#64;
<span class="quote">&gt; +            if (isErrorExpected) {
&gt; +              // TODO: check runtime.lastError once supported
&gt; +              browser.test.assertEq(undefined, tab, &quot;on error tab should be undefined&quot;);
&gt; +            } else {
&gt; +              browser.test.assertTrue(!!tab, &quot;on success the tab should be defined&quot;);</span >

No need for the !!</pre></div><div class="change-set" id="c43"><div class="comment" data-id="11096877" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5040972_339062"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a5040972_339062"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 13:40 PST" data-time="1453412417">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="11096877">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710588" name="attach_8710588" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">attachment 8710588</a> <a href="/attachment.cgi?id=8710588&amp;action=edit" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710588&amp;action=diff" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710588'>[review]</a>
0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710588" name="attach_8710588" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">attachment 8710588</a> <a href="/attachment.cgi?id=8710588&amp;action=edit" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[details]</a> <a href="/attachment.cgi?id=8710588&amp;action=diff" title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710588'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +278,4 &#64;&#64;
<span class="quote">&gt;  
&gt;          function createInWindow(window) {
&gt; +          if (!url) {
&gt; +            url = aboutNewTabService.newTabURL;</span >

Let's just set this in the `else` of `if (createProperties.url)`

&#64;&#64; +299,5 &#64;&#64;
<span class="quote">&gt;              window.gBrowser.pinTab(tab);
&gt;            }
&gt;  
&gt;            if (callback) {
&gt; +            runSafe(context, callback, tab &amp;&amp; TabManager.convert(extension, tab));</span >

`tab` should never be null here, so let's skip the `tab &amp;&amp; `</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710588&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710588</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c44"><div class="comment" data-id="11096905" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5040972_339062"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a5040972_339062"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 13:47 PST" data-time="1453412831">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="11096905">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8710594" name="attach_8710594" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">attachment 8710594</a> <a href="/attachment.cgi?id=8710594&amp;action=edit" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710594&amp;action=diff" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710594'>[review]</a>
0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8710594" name="attach_8710594" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">attachment 8710594</a> <a href="/attachment.cgi?id=8710594&amp;action=edit" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[details]</a> <a href="/attachment.cgi?id=8710594&amp;action=diff" title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8710594'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/test/browser/browser_ext_tabs_create_url.js
&#64;&#64; +4,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +function* testTabsCreateInvalidURL(tabsCreateURL) {
&gt; +  let extension = ExtensionTestUtils.loadExtension({
&gt; +    manifest: {
&gt; +      &quot;backgound&quot;: { scripts: [&quot;background.js&quot;] },</span >

This isn't necessary.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710594&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710594</a> -
        Flags: feedback?(kmaglione+bmo) &rarr; feedback+</div></div></div><div class="change-set" id="a5051056_106098"><div class="change" id="aa5051056_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5051056_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a5051056_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5051056_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5051056_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a5051056_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-21 13:49 PST" data-time="1453412955">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710597&amp;action=edit"
           title="0005-Bug-1227462-fix-tabs.onUpdated-test-case.-r-kmag.patch"
           class=""
        >Attachment #8710597</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c45"><div class="comment" data-id="11098669" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5051056_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5051056_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-22 04:01 PST" data-time="1453464061">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710972"
         class="attachment patch obsolete"
         data-id="8710972" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="2438">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710972">
          <a class="link" href="attachment.cgi?id=8710972&amp;action=diff">
        <span id="att-8710972-description" itemprop="description">0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710972&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710972">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-45" data-comment-id="11098669">First patch of the queue, updated with the suggested tweaks:

- return early if there isn't any matching tab
- return early if the URL is invalid (even if it isn't the only property that the add-on wants to update)

In both the above cases the callback |tab| parameter will be |undefined|.

Thanks a lot Kris for your feedback on this:

this &quot;invalid URL&quot; scenario is &quot;Firefox&quot;-specific, so I wasn't really try to mimic any particular Chrome behaviour, but I wanted to find a behaviour for Firefox which could be reasonable (and I think that the last suggested behaviour is pretty good and that it will not be misleading)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710579&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710579</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c46"><div class="comment" data-id="11098672" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5051056_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5051056_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-22 04:04 PST" data-time="1453464263">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710973"
         class="attachment patch obsolete"
         data-id="8710973" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="4523">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710973">
          <a class="link" href="attachment.cgi?id=8710973&amp;action=diff">
        <span id="att-8710973-description" itemprop="description">0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710973&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710973">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-46" data-comment-id="11098672">Fixed the two small nits on the new tabs.update test file.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710580&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710580</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710973&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710973</a> -
        Flags: feedback+</div></div></div><div class="change-set" id="c47"><div class="comment" data-id="11098681" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5051056_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5051056_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-22 04:10 PST" data-time="1453464609">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710975"
         class="attachment patch obsolete"
         data-id="8710975" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch">
      <meta itemprop="contentSize" content="1688">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710975">
          <a class="link" href="attachment.cgi?id=8710975&amp;action=diff">
        <span id="att-8710975-description" itemprop="description">0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710975&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710975">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-47" data-comment-id="11098681">Updated the patch on tabs.create, applying the following suggested tweaks:

- set the &quot;newtab&quot; fallback url in the else branch
- remove the |tab &amp;&amp; ...| because tab should never be null

Set the previous r+ flag.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710588&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710588</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710975&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710975</a> -
        Flags: review+</div></div></div><div class="change-set" id="c48"><div class="comment" data-id="11098686" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5051056_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5051056_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-22 04:14 PST" data-time="1453464850">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8710976"
         class="attachment patch obsolete"
         data-id="8710976" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch">
      <meta itemprop="contentSize" content="3342">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8710976">
          <a class="link" href="attachment.cgi?id=8710976&amp;action=diff">
        <span id="att-8710976-description" itemprop="description">0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8710976&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8710976">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-48" data-comment-id="11098686">Fixed the nit on the new tabs.create test file, and renamed it to &quot;browser_ext_tabs_create_invalid_url.js&quot;.

Set the previous f+ flag.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710594&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710594</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710976&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710976</a> -
        Flags: feedback+</div></div></div><div class="change-set" id="a5570308_106098"><div class="change" id="aa5570308_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5570308_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a5570308_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5570308_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5570308_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a5570308_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-27 14:03 PST" data-time="1453932207">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - tabs.create without an URL should create a new tab pointed on the correct &quot;about:&quot; page and the url bar should be empty"
   href="/show_bug.cgi?id=1242588">1242588</a></div></div></div><div class="change-set" id="a5645704_501107"><div class="change" id="aa5645704_501107">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_501107" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/361933c8ea0c36ed1468babff3fb0592?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_501107" id="a5645704_501107"><a class="email " href="/user_profile?user_id=501107" > <span class="fna">:shell escalante</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5645704_501107"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5645704_501107">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a5645704_501107">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-01-28 11:00 PST" data-time="1454007603">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Priority: -- &rarr; P1</div><div class="change">Whiteboard: [good first bug][tabs] &rarr; [good first bug][tabs] triaged</div></div></div><div class="change-set" id="c49"><div class="comment" data-id="11149190" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-08 19:11 PST" data-time="1454987503">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8717298"
         class="attachment patch obsolete"
         data-id="8717298" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">
      <meta itemprop="contentSize" content="4992">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8717298">
          <a class="link" href="attachment.cgi?id=8717298&amp;action=diff">
        <span id="att-8717298-description" itemprop="description">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8717298&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8717298">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710972&amp;action=edit"
           title="0001-Bug-1227462-tabs.update-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710972</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710975&amp;action=edit"
           title="0003-Bug-1227462-tabs.create-should-call-checkLoadURL.-r-.patch"
           class=""
        >Attachment #8710975</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c50"><div class="comment" data-id="11149191" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-08 19:13 PST" data-time="1454987598">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8717299"
         class="attachment patch obsolete"
         data-id="8717299" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">
      <meta itemprop="contentSize" content="8392">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8717299">
          <a class="link" href="attachment.cgi?id=8717299&amp;action=diff">
        <span id="att-8717299-description" itemprop="description">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8717299&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8717299">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8710597&amp;action=edit"
           title="0005-Bug-1227462-fix-tabs.onUpdated-test-case.-r-kmag.patch"
           class=""
        >Attachment #8710597</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710973&amp;action=edit"
           title="0002-Bug-1227462-Test-tabs.update-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710973</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8710976&amp;action=edit"
           title="0004-Bug-1227462-Test-tabs.create-URLs.-r-kmag.patch"
           class=""
        >Attachment #8710976</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c51"><div class="comment" data-id="11149219" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-08 19:45 PST" data-time="1454989535">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="11149219">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8717298" name="attach_8717298" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">attachment 8717298</a> <a href="/attachment.cgi?id=8717298&amp;action=edit" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8717298&amp;action=diff" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8717298'>[review]</a>
1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch

This patch is a rebased and updated version of the past main two patches attached to this issue:

- squashed the two patches for tabs.update and tabs.create in a single patch
- ported to the new Promise based API

- checkLoadURL:
  - the new |dontReportErrors| option prevents it from logging into the console errors which we are already reporting using a rejected promise / runtime.lastError

- tabs.create
  - checks the request url, if specified, and do not open a new tab if the url 
    is not allowed (and return a rejected Promise to set the lastError accordingly)
  - preserved the changes introduce by <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - tabs.create without an URL should create a new tab pointed on the correct &quot;about:&quot; page and the url bar should be empty"
   href="/show_bug.cgi?id=1242588">Bug 1242588</a> (new tab url if url is missing)

- tabs.update
  - rejects and set lastError if no tab is found with the requested tabId
  - rejects and set lastError if the requested url is not allowed
  - the requested url is resolved using context.uri.resolved (as tabs.create already does)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8717298&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8717298</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c52"><div class="comment" data-id="11149222" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-08 19:51 PST" data-time="1454989868">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="11149222">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8717299" name="attach_8717299" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">attachment 8717299</a> <a href="/attachment.cgi?id=8717299&amp;action=edit" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8717299&amp;action=diff" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8717299'>[review]</a>
2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch

Updated version of the patches with the new two test cases &quot;browser_ext_tabs_create_invalid_url.js&quot; and &quot;browser_ext_tabs_update_url.js&quot; (ported to the new Promise based API, added assertion related to the Promise rejected error message) and the small tweak on the &quot;browser_ext_tabs_onUpdated.js&quot; test.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8717299&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8717299</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c53"><div class="comment" data-id="11151876" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a5645704_501107"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-09 14:15 PST" data-time="1455056134">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-53" data-comment-id="11151876">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8717298" name="attach_8717298" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">attachment 8717298</a> <a href="/attachment.cgi?id=8717298&amp;action=edit" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8717298&amp;action=diff" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8717298'>[review]</a>
1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8717298" name="attach_8717298" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">attachment 8717298</a> <a href="/attachment.cgi?id=8717298&amp;action=edit" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8717298&amp;action=diff" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8717298'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/ext-tabs.js
&#64;&#64; +293,5 &#64;&#64;
<span class="quote">&gt;  
&gt; +          let url;
&gt; +
&gt; +          if (createProperties.url !== null) {
&gt; +            url = context.uri.resolve(createProperties.url);</span >

I'd rather keep this check in the createInWindow function. I know we technically don't need to wait for the window to load before checking if the URL is legal, but I'd find it easier to follow if all of URL processing was in one place.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8717298&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8717298</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c54"><div class="comment" data-id="11151897" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a5645704_501107"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-09 14:20 PST" data-time="1455056439">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="11151897">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8717299" name="attach_8717299" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">attachment 8717299</a> <a href="/attachment.cgi?id=8717299&amp;action=edit" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8717299&amp;action=diff" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8717299'>[review]</a>
2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8717299" name="attach_8717299" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">attachment 8717299</a> <a href="/attachment.cgi?id=8717299&amp;action=edit" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8717299&amp;action=diff" title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8717299'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/extensions/test/browser/browser_ext_tabs_create_invalid_url.js
&#64;&#64; +41,5 &#64;&#64;
<span class="quote">&gt; +add_task(function* () {
&gt; +  info(&quot;Start testing tabs.create on invalid URLs&quot;);
&gt; +
&gt; +  let dataURLPage = `
&gt; +    data:text/html,&lt;!DOCTYPE html&gt;</span >

Please make sure to trim the leading whitespace from this.

::: browser/components/extensions/test/browser/browser_ext_tabs_update_url.js
&#64;&#64; +5,5 &#64;&#64;
<span class="quote">&gt; +function* testTabsUpdateURL(existentTabURL, tabsUpdateURL, isErrorExpected) {
&gt; +  let extension = ExtensionTestUtils.loadExtension({
&gt; +    manifest: {
&gt; +      &quot;permissions&quot;: [&quot;tabs&quot;],
&gt; +      &quot;webAccessibleResources&quot;: [&quot;tab.html&quot;],</span >

This shouldn't be necessary. Also, if it is necessary it needs to be &quot;web_accessible_resources&quot;.

&#64;&#64; +25,5 &#64;&#64;
<span class="quote">&gt; +    background: function() {
&gt; +      browser.test.sendMessage(&quot;ready&quot;, browser.runtime.getURL(&quot;tab.html&quot;));
&gt; +
&gt; +      browser.test.onMessage.addListener((msg, tabsUpdateURL, isErrorExpected) =&gt; {
&gt; +        let onTabsUpdated = (tab) =&gt; isErrorExpected ?</span >

Please use if-else statements for these.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8717299&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8717299</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c55"><div class="comment" data-id="11155012" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-10 11:20 PST" data-time="1455132038">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8718004"
         class="attachment patch obsolete"
         data-id="8718004" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">
      <meta itemprop="contentSize" content="3701">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8718004">
          <a class="link" href="attachment.cgi?id=8718004&amp;action=diff">
        <span id="att-8718004-description" itemprop="description">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8718004&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8718004">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-55" data-comment-id="11155012">Updated patch (applied changes based on the last review comments)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8717298&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8717298</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8718004&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8718004</a> -
        Flags: review+</div></div></div><div class="change-set" id="c56"><div class="comment" data-id="11155021" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-10 11:21 PST" data-time="1455132109">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8718005"
         class="attachment patch obsolete"
         data-id="8718005" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">
      <meta itemprop="contentSize" content="8491">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8718005">
          <a class="link" href="attachment.cgi?id=8718005&amp;action=diff">
        <span id="att-8718005-description" itemprop="description">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8718005&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8718005">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-56" data-comment-id="11155021">Updated patch (applied minor changes based on the last review comments)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8717299&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8717299</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8718005&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8718005</a> -
        Flags: review+</div></div></div><div class="change-set" id="c57"><div class="comment" data-id="11179967" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 10:17 PST" data-time="1455905836">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721380"
         class="attachment patch obsolete"
         data-id="8721380" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">
      <meta itemprop="contentSize" content="3793">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721380">
          <a class="link" href="attachment.cgi?id=8721380&amp;action=diff">
        <span id="att-8721380-description" itemprop="description">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8721380&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721380">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-57" data-comment-id="11179967">Patch rebased, previous review flag state set.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8718004&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8718004</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8721380&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8721380</a> -
        Flags: review+</div></div></div><div class="change-set" id="c58"><div class="comment" data-id="11179968" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 10:17 PST" data-time="1455905868">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721381"
         class="attachment patch obsolete"
         data-id="8721381" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">
      <meta itemprop="contentSize" content="8586">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721381">
          <a class="link" href="attachment.cgi?id=8721381&amp;action=diff">
        <span id="att-8721381-description" itemprop="description">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8721381&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721381">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-58" data-comment-id="11179968">Patch rebased, previous review flag state set.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8718005&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8718005</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8721381&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8721381</a> -
        Flags: review+</div></div></div><div class="change-set" id="c59"><div class="comment" data-id="11180024" data-no="59"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-59" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a5645704_501107"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 10:35 PST" data-time="1455906930">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-59" data-comment-id="11180024">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8721380" name="attach_8721380" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">attachment 8721380</a> <a href="/attachment.cgi?id=8721380&amp;action=edit" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721380&amp;action=diff" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721380'>[review]</a>
1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch

[Security approval request comment]
How easily could an exploit be constructed based on the patch?

   Any webextension addon can trivially exploit this issue to gain access to
   higher privileges provided by tabs with higher privileged origins, 
   by targeting them using chrome.tabs.create/chrome.tabs.update with 
   &quot;data:&quot; or &quot;javascript:&quot; URLs.
   
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?

   
   The attached xpi file, the new tests included and the early comments 
   describe the issue with enough details:

   In the initial version of the webextension sandbox mechanisms,
   the chrome.tabs.create and chrome.tabs.update API methods
   didn't check the URL which the addon wants to load in a new or
   existent tab.

   &quot;data:&quot; and &quot;javascript:&quot; URLs inherit the existent principal,
   which means that the addon will be able to run arbitrary javascript code
   with the privileges of the principal currently associated with the document
   loaded in the tab (and some of the tabs could have higher privileges than the
   webextension addons, e.g. about:addons, &quot;about:config&quot;)

Which older supported branches are affected by this flaw?

   Firefox &gt;= 42, because this issue has been introduced in the initial import 
   of the WebExtension implementation.

   it is worth to mention that the new security sandboxing for WebExtensions
   was still in a prototype stage in those versions, and this level of sandbox
   restriction isn't enforced on no one of the other existent extensions types.

If not all supported branches, which bug introduced the flaw?

   N/A

Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?

   Backport this fix is possible but a rewrite is needed, because some of the
   internals are changed over the time.

How likely is this patch to cause regressions; how much testing does it need?

   This patch can only affect addons based on webextensions APIs, 

   we have added new test cases to test the new restrictions and fixed tests 
   that were based on wrong assumptions.

   It's still possible that this would also cause problems for webextensions 
   which might depend on being able to load data: or javascript: URLs, 
   which they may not be doing for malicious reasons (especially those who
   have been ported from Chrome which allows the use of this kind of URLs).</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721380&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8721380</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c60"><div class="comment" data-id="11180113" data-no="60"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-60" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5645704_501107"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a5645704_501107"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-60"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-60" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c60">Comment 60</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 11:04 PST" data-time="1455908665">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-60">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-60" data-comment-id="11180113">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8721380" name="attach_8721380" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">attachment 8721380</a> <a href="/attachment.cgi?id=8721380&amp;action=edit" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721380&amp;action=diff" title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721380'>[review]</a>
1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch

sec-approval+.

We should take this on Aurora and Beta. Please make and/or nominate patches today.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721380&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8721380</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="a7546816_280903"><div class="change" id="aa7546816_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7546816_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a7546816_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7546816_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7546816_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a7546816_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 11:05 PST" data-time="1455908715">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox44&amp;o1=isnotempty">status-firefox44</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox44&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox45&amp;o1=isnotempty">status-firefox45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox45&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=isnotempty">status-firefox46</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr38&amp;o1=isnotempty">status-firefox-esr38</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr38&amp;o1=equals&amp;v1=unaffected">unaffected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox45&amp;o1=isnotempty">tracking-firefox45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox45&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox46&amp;o1=isnotempty">tracking-firefox46</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox46&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=isnotempty">tracking-firefox47</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="a7552426_1689"><div class="change" id="aa7552426_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a7552426_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a7552426_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7552426_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7552426_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a7552426_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 12:38 PST" data-time="1455914325">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a> &rarr; <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a></div></div></div><div class="change-set" id="c61"><div class="comment" data-id="11180700" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-61" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7552426_1689"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7552426_1689"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 14:31 PST" data-time="1455921078">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721493"
         class="attachment patch"
         data-id="8721493" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">
      <meta itemprop="contentSize" content="5012">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721493">
          <a class="link" href="attachment.cgi?id=8721493&amp;action=diff">
        <span id="att-8721493-description" itemprop="description">Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch</span></a>
        — <a href="attachment.cgi?id=8721493&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721493">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-61" data-comment-id="11180700">Backport to Aurora of the changes needed to fix this issue (and an existent test that needs to be fixed once the fix is applied).

Try push:
- <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=d9050889c35b">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=d9050889c35b</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721493&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721493</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c62"><div class="comment" data-id="11180712" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-62" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7552426_1689"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7552426_1689"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 14:33 PST" data-time="1455921220">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721494"
         class="attachment patch"
         data-id="8721494" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="g_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">
      <meta itemprop="contentSize" content="4893">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721494">
          <a class="link" href="attachment.cgi?id=8721494&amp;action=diff">
        <span id="att-8721494-description" itemprop="description">Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch</span></a>
        — <a href="attachment.cgi?id=8721494&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721494">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-62" data-comment-id="11180712">Backport to Beta of the changes needed to fix this issue (and an existent test that needs to be fixed once the fix is applied).

Try push:
- <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=ed65761212cc">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=ed65761212cc</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721494&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721494</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="a7560680_106098"><div class="change" id="aa7560680_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7560680_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a7560680_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7560680_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7560680_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a7560680_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 14:56 PST" data-time="1455922579">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721493&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721493</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="a7560687_106098"><div class="change" id="aa7560687_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a7560687_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7560687_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7560687_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a7560687_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 14:56 PST" data-time="1455922586">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721494&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721494</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c63"><div class="comment" data-id="11180804" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-63" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a7560687_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 14:57 PST" data-time="1455922627">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-63" data-comment-id="11180804">Luca, do your tests apply cleanly to beta and aurora?</pre><div class="activity"><div class="change">Flags: needinfo?(lgreco)</div></div></div><div class="change-set" id="c64"><div class="comment" data-id="11181223" data-no="64"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-64" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a7560687_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 17:58 PST" data-time="1455933519">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-64" data-comment-id="11181223">Comment on <span class=""><a href="/attachment.cgi?id=8721494" name="attach_8721494" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">attachment 8721494</a> <a href="/attachment.cgi?id=8721494&amp;action=edit" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721494&amp;action=diff" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721494'>[review]</a>
Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch

Approval Request Comment
See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c59">comment 59</a>.

[String/UUID change made/needed]:

None.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721494&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721494</a> -
        Flags: sec-approval?</div><div class="change">
        <a href="/attachment.cgi?id=8721494&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721494</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c65"><div class="comment" data-id="11181224" data-no="65"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-65" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a7560687_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-65"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-65" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c65">Comment 65</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 17:59 PST" data-time="1455933542">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-65">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-65" data-comment-id="11181224">Comment on <span class=""><a href="/attachment.cgi?id=8721493" name="attach_8721493" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">attachment 8721493</a> <a href="/attachment.cgi?id=8721493&amp;action=edit" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721493&amp;action=diff" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721493'>[review]</a>
Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch

Approval Request Comment
See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c59">comment 59</a>.

[String/UUID change made/needed]:

None.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721493&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721493</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="c66"><div class="comment" data-id="11181365" data-no="66"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-66" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a7560687_106098"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-66"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-66" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c66">Comment 66</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 21:39 PST" data-time="1455946777">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-66">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-66" data-comment-id="11181365">Comment on <span class=""><a href="/attachment.cgi?id=8721494" name="attach_8721494" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">attachment 8721494</a> <a href="/attachment.cgi?id=8721494&amp;action=edit" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721494&amp;action=diff" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721494'>[review]</a>
Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch

sec-approval is only needed for trunk.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721494&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721494</a> -
        Flags: <span class="activity-deleted">sec-approval?</span></div></div></div><div class="change-set" id="c67"><div class="comment" data-id="11181368" data-no="67"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-67" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a7560687_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-67"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-67" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c67">Comment 67</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-19 21:42 PST" data-time="1455946973">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-67">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-67" data-comment-id="11181368">Sorry, I thought I'd cleared that flag.</pre></div><div class="change-set" id="c68"><div class="comment" data-id="11181988" data-no="68"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-68" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7560687_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-68"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-68" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c68">Comment 68</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-20 14:15 PST" data-time="1456006549">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-68">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721711"
         class="attachment patch obsolete"
         data-id="8721711" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="ug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch">
      <meta itemprop="contentSize" content="7072">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721711">
          <a class="link" href="attachment.cgi?id=8721711&amp;action=diff">
        <span id="att-8721711-description" itemprop="description">Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8721711&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721711">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-68" data-comment-id="11181988">Backport to Aurora of new test cases which explicitly tests the allowed and disallowed URLS.

Unfortunately the original patch couldn't be used like it was because in Aurora the WebExtensions APIs do not support lastError and the Promise-based behaviour.

Try push:
- <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=51e428bf9654">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=51e428bf9654</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721711&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721711</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c69"><div class="comment" data-id="11181992" data-no="69"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-69" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7560687_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-69"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-69" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c69">Comment 69</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-20 14:23 PST" data-time="1456007035">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-69">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-69" data-comment-id="11181992">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8721711" name="attach_8721711" title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch">attachment 8721711</a> <a href="/attachment.cgi?id=8721711&amp;action=edit" title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721711&amp;action=diff" title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721711'>[review]</a>
Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch

Wrong patch attached by mistake, set as obsolete.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721711&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721711</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8721711&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721711</a> -
        Flags: <span class="activity-deleted">review?(kmaglione+bmo)</span></div></div></div><div class="change-set" id="c70"><div class="comment" data-id="11181996" data-no="70"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-70" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7560687_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-70"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-70" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c70">Comment 70</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-20 14:35 PST" data-time="1456007751">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-70">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721713"
         class="attachment patch"
         data-id="8721713" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="ug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch">
      <meta itemprop="contentSize" content="7066">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721713">
          <a class="link" href="attachment.cgi?id=8721713&amp;action=diff">
        <span id="att-8721713-description" itemprop="description">Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch</span></a>
        — <a href="attachment.cgi?id=8721713&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721713">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-70" data-comment-id="11181996">Backport of the new test cases on Aurora.

Pushed to try:
- <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=c3ec9328bfb8">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=c3ec9328bfb8</a></pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(lgreco)</span></div><div class="change">
        <a href="/attachment.cgi?id=8721713&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721713</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="c71"><div class="comment" data-id="11182002" data-no="71"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-71" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7560687_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7560687_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-71"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-71" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c71">Comment 71</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-20 14:38 PST" data-time="1456007925">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-71">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8721714"
         class="attachment patch"
         data-id="8721714" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="-Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Beta__r_kmag.patch">
      <meta itemprop="contentSize" content="7009">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8721714">
          <a class="link" href="attachment.cgi?id=8721714&amp;action=diff">
        <span id="att-8721714-description" itemprop="description">Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Beta__r_kmag.patch</span></a>
        — <a href="attachment.cgi?id=8721714&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8721714">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-71" data-comment-id="11182002">Backport of the new tests on Beta (the only difference between this patch and the patch applied on Aurora is related to the changes on the browser.ini file).

Pushed to try:
- <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=d42d3c66e6d9">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=d42d3c66e6d9</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721714&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721714</a> -
        Flags: review?(kmaglione+bmo)</div></div></div><div class="change-set" id="a7916798_106098"><div class="change" id="aa7916798_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7916798_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a7916798_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7916798_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7916798_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a7916798_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-23 17:51 PST" data-time="1456278697">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721714&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721714</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="a7916811_106098"><div class="change" id="aa7916811_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7916811_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a7916811_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7916811_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7916811_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a7916811_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-23 17:51 PST" data-time="1456278710">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721713&amp;action=edit"
           title="Bug_1227462___Backport_test_tabs_create_update_on_allowed_and_disallowed_URLs_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721713</a> -
        Flags: review?(kmaglione+bmo) &rarr; review+</div></div></div><div class="change-set" id="c72"><div class="comment" data-id="11194845" data-no="72"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-72" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a7916811_106098"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_495955" id="a7916811_106098"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-72"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-72" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c72">Comment 72</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-25 06:12 PST" data-time="1456409560">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-72">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-72" data-comment-id="11194845">For now, I am not planning to take this uplift:
* not landed in m-c yet (on purpose? in this case 47 should not be marked as affected)
* I don't have the risk evaluation
* it is a sec moderate</pre></div><div class="change-set" id="c73"><div class="comment" data-id="11195476" data-no="73"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-73" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7916811_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7916811_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-73"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-73" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c73">Comment 73</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-25 09:24 PST" data-time="1456421041">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-73">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8723632"
         class="attachment patch"
         data-id="8723632" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch">
      <meta itemprop="contentSize" content="3785">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8723632">
          <a class="link" href="attachment.cgi?id=8723632&amp;action=diff">
        <span id="att-8723632-description" itemprop="description">1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch</span></a>
        — <a href="attachment.cgi?id=8723632&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8723632">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-73" data-comment-id="11195476">Unfortunately I had to update this patch (the one which is going to land on m-c), because the previous version will not pass one of newly added eslint rules.

Re-applied the previous r+ flag, 'cause it differs only in the fixed eslint errors (unneeded spaces inside object's curly brackets).</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721380&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8721380</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8723632&amp;action=edit"
           title="1-Bug_1227462___tabs_create_and_tabs_update_should_check_URLs_using_checkLoadURL__r_kmag.patch"
           class=""
        >Attachment #8723632</a> -
        Flags: review+</div></div></div><div class="change-set" id="c74"><div class="comment" data-id="11195479" data-no="74"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-74" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a7916811_106098"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a7916811_106098"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-74"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-74" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c74">Comment 74</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-25 09:25 PST" data-time="1456421118">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-74">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8723633"
         class="attachment patch"
         data-id="8723633" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch">
      <meta itemprop="contentSize" content="8568">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8723633">
          <a class="link" href="attachment.cgi?id=8723633&amp;action=diff">
        <span id="att-8723633-description" itemprop="description">2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch</span></a>
        — <a href="attachment.cgi?id=8723633&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1227462&attachment=8723633">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-74" data-comment-id="11195479">Unfortunately, as for the previous one, I had to update this patch (the one which is going to land on m-c), because the previous version will not pass one of the newly added eslint rules.

Re-applied the previous r+ flag, 'cause it differs only in the fixed eslint errors (unneeded spaces inside object's curly brackets).</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721381&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8721381</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8723633&amp;action=edit"
           title="2-Bug_1227462___Test_tabs_create_update_on_allowed_and_disallowed_URLs__r_kmag.patch"
           class=""
        >Attachment #8723633</a> -
        Flags: review+</div></div></div><div class="change-set" id="c75"><div class="comment" data-id="11195508" data-no="75"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-75" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a7916811_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_106098" id="a7916811_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-75"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-75" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c75">Comment 75</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-25 09:32 PST" data-time="1456421572">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-75">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-75" data-comment-id="11195508">I didn't realize this hadn't landed on m-c yet.

Luca, is there a reason you haven't requested checkin yet?</pre><div class="activity"><div class="change">Flags: needinfo?(lgreco)</div></div></div><div class="change-set" id="a8060700_339062"><div class="change" id="aa8060700_339062">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a8060700_339062"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_339062" id="a8060700_339062"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8060700_339062"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8060700_339062">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a8060700_339062">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-25 09:49 PST" data-time="1456422599">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></div><div class="change">Whiteboard: [good first bug][tabs] triaged &rarr; [good first bug][tabs] triaged  [checkin needed for attachments 8723632, 8723633]</div></div></div><div class="change-set" id="c76"><div class="comment" data-id="11195606" data-no="76"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-76" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a8060700_339062"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a8060700_339062"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-76"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-76" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c76">Comment 76</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-25 09:54 PST" data-time="1456422893">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-76">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-76" data-comment-id="11195606">(In reply to Kris Maglione [:kmag] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c75">comment #75</a>)
<span class="quote">&gt; I didn't realize this hadn't landed on m-c yet.
&gt; 
&gt; Luca, is there a reason you haven't requested checkin yet?</span >

Fixed eslint errors in the patches that will be merged in m-c (and added in the whiteboard comment about which attachments should to land on m-c)</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(lgreco)</span></div></div></div><div class="change-set" id="c77"><div class="comment" data-id="11198573" data-no="77"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-77" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_510726" id="a8060700_339062"><img src="https://secure.gravatar.com/avatar/4c5aee4c6938e29b1576314d2de9c6e7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_510726" id="a8060700_339062"><a class="email " href="/user_profile?user_id=510726" > <span class="fna">Pulsebot</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-77"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-77" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c77">Comment 77</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-26 07:25 PST" data-time="1456500339">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-77">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-77" data-comment-id="11198573"><a rel="nofollow" href="https://hg.mozilla.org/integration/fx-team/rev/cc5fbcbece94">https://hg.mozilla.org/integration/fx-team/rev/cc5fbcbece94</a>
<a rel="nofollow" href="https://hg.mozilla.org/integration/fx-team/rev/5efb021d57d9">https://hg.mozilla.org/integration/fx-team/rev/5efb021d57d9</a></pre><div class="activity"><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></span></div></div></div><div class="change-set" id="c78"><div class="comment" data-id="11202557" data-no="78"
       data-tags="bugherder">
    
    <table class="layout-table change-head " id="ch-78" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_277293" id="a8060700_339062"><img src="https://secure.gravatar.com/avatar/8378311bf1bd5e9eddc7896a07688876?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_277293" id="a8060700_339062"><a class="email disabled" href="/user_profile?user_id=277293" > <span class="fna">Carsten Book [:Tomcat]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-78"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-78" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c78">Comment 78</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-29 02:39 PST" data-time="1456742366">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-78">
        <td colspan="2" class="comment-tags"><span class="comment-tag">bugherder</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-78" data-comment-id="11202557"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/cc5fbcbece94">https://hg.mozilla.org/mozilla-central/rev/cc5fbcbece94</a>
<a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/5efb021d57d9">https://hg.mozilla.org/mozilla-central/rev/5efb021d57d9</a></pre><div class="activity"><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2016-02-29 02:39 PST" data-time="1456742366">6 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla47</div></div></div><div class="change-set" id="c79"><div class="comment" data-id="11202948" data-no="79"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-79" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a8060700_339062"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_495955" id="a8060700_339062"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-79"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-79" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c79">Comment 79</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-29 05:27 PST" data-time="1456752423">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-79">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-79" data-comment-id="11202948">Comment on <span class=""><a href="/attachment.cgi?id=8721494" name="attach_8721494" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">attachment 8721494</a> <a href="/attachment.cgi?id=8721494&amp;action=edit" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721494&amp;action=diff" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721494'>[review]</a>
Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch

I am sorry but this is too late. This is RC week and we only take critical fixes.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721494&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Beta__r_kmag.patch"
           class=""
        >Attachment #8721494</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta-</div></div></div><div class="change-set" id="a8390710_495955"><div class="change" id="aa8390710_495955">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a8390710_495955"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_495955" id="a8390710_495955"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8390710_495955"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8390710_495955">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a8390710_495955">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-29 05:30 PST" data-time="1456752609">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox45&amp;o1=isnotempty">status-firefox45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox45&amp;o1=equals&amp;v1=wontfix">wontfix</a></div></div></div><div class="change-set" id="c80"><div class="comment" data-id="11208729" data-no="80"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-80" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a8390710_495955"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a8390710_495955"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-80"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-80" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c80">Comment 80</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-01 13:08 PST" data-time="1456866523">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-80">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-80" data-comment-id="11208729">Comment on <span class=""><a href="/attachment.cgi?id=8721493" name="attach_8721493" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">attachment 8721493</a> <a href="/attachment.cgi?id=8721493&amp;action=edit" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">[details]</a> <a href="/attachment.cgi?id=8721493&amp;action=diff" title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1227462&amp;attachment=8721493'>[review]</a>
Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch

Fix for regression from 42. May risk regressions in web extensions. We are a few days away from 46 moving to beta, so we should keep an eye on this in testing.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8721493&amp;action=edit"
           title="Bug_1227462___Backport_chrome_tabs_update_create_APIs_DISALLOW_INHERIT_PRINCIPAL_to_Aurora__r_kmag.patch"
           class=""
        >Attachment #8721493</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c81"><div class="comment" data-id="11211286" data-no="81"
       data-tags="bugherder uplift">
    
    <table class="layout-table change-head " id="ch-81" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_277293" id="a8390710_495955"><img src="https://secure.gravatar.com/avatar/8378311bf1bd5e9eddc7896a07688876?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_277293" id="a8390710_495955"><a class="email disabled" href="/user_profile?user_id=277293" > <span class="fna">Carsten Book [:Tomcat]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-81"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-81" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c81">Comment 81</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-02 07:53 PST" data-time="1456934034">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-81">
        <td colspan="2" class="comment-tags"><span class="comment-tag">bugherder</span><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-81" data-comment-id="11211286"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-aurora/rev/09ca754e5fb7">https://hg.mozilla.org/releases/mozilla-aurora/rev/09ca754e5fb7</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=isnotempty">status-firefox46</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a9093932_395186"><div class="change" id="aa9093932_395186">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_395186" id="a9093932_395186"><img src="https://secure.gravatar.com/avatar/576b94c81f8ad97e58d63f12e5fdb00c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_395186" id="a9093932_395186"><a class="email disabled" href="/user_profile?user_id=395186" > <span class="fna">Will Bamberg [:wbamberg]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9093932_395186"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9093932_395186">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a9093932_395186">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-08 08:50 PST" data-time="1457455831">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=dev-doc-needed&amp;resolution=---">dev-doc-needed</a></div></div></div><div class="change-set" id="a9872448_280903"><div class="change" id="aa9872448_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a9872448_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a9872448_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9872448_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9872448_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a9872448_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-17 10:05 PDT" data-time="1458234347">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty?</div></div></div><div class="change-set" id="a9874359_1689"><div class="change" id="aa9874359_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a9874359_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a9874359_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9874359_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9874359_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a9874359_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-17 10:37 PDT" data-time="1458236258">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">sec-bounty?</span></div></div></div><div class="change-set" id="a9874374_1689"><div class="change" id="aa9874374_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a9874374_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a9874374_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9874374_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9874374_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a9874374_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-17 10:37 PDT" data-time="1458236273">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty?</div></div></div><div class="change-set" id="a10219273_1689"><div class="change" id="aa10219273_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a10219273_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a10219273_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a10219273_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a10219273_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-21 10:26 PDT" data-time="1458581172">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty? &rarr; sec-bounty+</div></div></div><div class="change-set" id="c82"><div class="comment" data-id="11282936" data-no="82"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-82" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_395186" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/576b94c81f8ad97e58d63f12e5fdb00c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_395186" id="a10219273_1689"><a class="email disabled" href="/user_profile?user_id=395186" > <span class="fna">Will Bamberg [:wbamberg]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-82"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-82" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c82">Comment 82</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-28 15:15 PDT" data-time="1459203324">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-82">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-82" data-comment-id="11282936">docs:
<a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Chrome_incompatibilities#tabs">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Chrome_incompatibilities#tabs</a>
<a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/create">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/create</a>
<a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/update">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/update</a>

does this cover it, Luca?</pre><div class="activity"><div class="change">Flags: needinfo?(lgreco)</div></div></div><div class="change-set" id="c83"><div class="comment" data-id="11285173" data-no="83"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-83" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a10219273_1689"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-83"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-83" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c83">Comment 83</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-29 09:32 PDT" data-time="1459269174">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-83">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-83" data-comment-id="11285173">(In reply to Will Bamberg [:wbamberg] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c82">comment #82</a>)
<span class="quote">&gt; docs:
&gt; <a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/</a>
&gt; Chrome_incompatibilities#tabs
&gt; <a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/create">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/create</a>
&gt; <a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/update">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/update</a>
&gt; 
&gt; does this cover it, Luca?</span >

Yes, I think that the changes in the docs cover this Chrome incompatibility, Thanks Will!

If you think that it could be an useful addition: starting from Firefox 47 the chrome.runtime.lastError is set when an privileged URL is used, with `URL not allowed: ${url}` as the error message,  and, if the addon doesn't check it in the callback, then it will be logged to the console (which are currently visible in the Browser Console).</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(lgreco)</span></div></div></div><div class="change-set" id="c84"><div class="comment" data-id="11285536" data-no="84"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-84" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_395186" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/576b94c81f8ad97e58d63f12e5fdb00c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_395186" id="a10219273_1689"><a class="email disabled" href="/user_profile?user_id=395186" > <span class="fna">Will Bamberg [:wbamberg]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-84"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-84" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c84">Comment 84</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-29 11:10 PDT" data-time="1459275004">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-84">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-84" data-comment-id="11285536">This is a good call! I've not described the exact error message, as I'd worry that might be too volatile, but I've noted this in:
<a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/create">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/create</a>
<a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/update">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/tabs/update</a>
...and also beefed up the lastError docs: <a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/Runtime/lastError">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/Runtime/lastError</a> to be more helpful.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=dev-doc-needed&amp;resolution=---">dev-doc-needed</a> &rarr; <a href="/buglist.cgi?keywords=dev-doc-complete&amp;resolution=---">dev-doc-complete</a></div></div></div><div class="change-set" id="c85"><div class="comment" data-id="11290477" data-no="85"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-85" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_522000" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/ec561b842650e65a4a312f6e5bcae35a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_522000" id="a10219273_1689"><a class="email " href="/user_profile?user_id=522000" > <span class="fna">Vasilica Tamas, QA [:vtamas]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-85"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-85" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c85">Comment 85</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-31 04:39 PDT" data-time="1459424353">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-85">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-85" data-comment-id="11290477">I was able to reproduce the initial issue mentioned in Description on Firefox 44.0a1 (2015-09-22) under Windows 10 64-bit.

Manually tested using the uxss.xpi on Firefox 48.0a1 (2016-03-29), Firefox 47.0a2 (2016-03-29) and Firefox 46 beta 6 under Windows 10 64-bit, Ubuntu 12.04 32-bit and Mac OS X 10.11 and noticed the following:
- The alert dialog is no longer displayed across all Firefox versions
- A browser console error is thrown on Firefox 47.0a2 and Firefox 48.0a1 while clicking on the webextension’s icon:     
Unchecked lastError value: Error: URL not allowed: javascript:alert(document.location);   ExtensionUtils.jsm:240


Luca,any thoughts about this error? Could you please confirm that this is the intended behaviour?</pre><div class="activity"><div class="change">Flags: needinfo?(lgreco)</div></div></div><div class="change-set" id="c86"><div class="comment" data-id="11294090" data-no="86"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-86" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_339062" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/cb15f57474d95eb43c5d903ae3fa34ae?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_339062" id="a10219273_1689"><a class="email " href="/user_profile?user_id=339062" > <span class="fna">Luca Greco [:rpl] [:luca] [:lgreco]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-86"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-86" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c86">Comment 86</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-01 07:41 PDT" data-time="1459521664">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-86">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-86" data-comment-id="11294090">(In reply to Vasilica Mihasca, QA [:vasilica_mihasca] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c85">comment #85</a>)
<span class="quote">&gt; I was able to reproduce the initial issue mentioned in Description on
&gt; Firefox 44.0a1 (2015-09-22) under Windows 10 64-bit.
&gt; 
&gt; Manually tested using the uxss.xpi on Firefox 48.0a1 (2016-03-29), Firefox
&gt; 47.0a2 (2016-03-29) and Firefox 46 beta 6 under Windows 10 64-bit, Ubuntu
&gt; 12.04 32-bit and Mac OS X 10.11 and noticed the following:
&gt; - The alert dialog is no longer displayed across all Firefox versions
&gt; - A browser console error is thrown on Firefox 47.0a2 and Firefox 48.0a1
&gt; while clicking on the webextension’s icon:     
&gt; Unchecked lastError value: Error: URL not allowed:
&gt; javascript:alert(document.location);   ExtensionUtils.jsm:240
&gt;  
&gt; Luca,any thoughts about this error? Could you please confirm that this is
&gt; the intended behaviour?</span >

Sure, intended behaviour confirmed.

This behavior is now documented in the Chrome incompatibilities:

- <a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Chrome_incompatibilities#tabs">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Chrome_incompatibilities#tabs</a>

In Chromium-based browsers some of these URLs are currently allowed, and so, starting from Firefox 47 where runtime.lastError has been introduced, an Error message is logged in the browser console if not explicitly checked in the addon source code, as now documented on MDN:

-  <a rel="nofollow" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/Runtime/lastError">https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/Runtime/lastError</a></pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(lgreco)</span></div></div></div><div class="change-set" id="c87"><div class="comment" data-id="11297782" data-no="87"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-87" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_522000" id="a10219273_1689"><img src="https://secure.gravatar.com/avatar/ec561b842650e65a4a312f6e5bcae35a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_522000" id="a10219273_1689"><a class="email " href="/user_profile?user_id=522000" > <span class="fna">Vasilica Tamas, QA [:vtamas]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-87"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-87" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c87">Comment 87</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-03 22:28 PDT" data-time="1459747692">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-87">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-87" data-comment-id="11297782">Thanks Luca!

Based on <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c85">Comment 85</a> and <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - chrome.tabs.update/create APIs should call checkLoadURI with DISALLOW_INHERIT_PRINCIPAL"
   href="/show_bug.cgi?id=1227462#c86">Comment 86</a>, I am marking this bug as Verified.</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=isnotempty">status-firefox46</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=isnotempty">status-firefox48</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=verified">verified</a></div></div></div><div class="change-set" id="a12738211_280903"><div class="change" id="aa12738211_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a12738211_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a12738211_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a12738211_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a12738211_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a12738211_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-19 14:08 PDT" data-time="1461100110">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">Whiteboard: [good first bug][tabs] triaged  [checkin needed for attachments 8723632, 8723633] &rarr; [good first bug][tabs] triaged  [checkin needed for attachments 8723632, 8723633][adv-main46+]</div></div></div><div class="change-set" id="a12833550_280903"><div class="change" id="aa12833550_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a12833550_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a12833550_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a12833550_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a12833550_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a12833550_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-20 16:37 PDT" data-time="1461195449">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2016-2817</div></div></div><div class="change-set" id="a20535677_106098"><div class="change" id="aa20535677_106098">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_106098" id="a20535677_106098"><img src="https://secure.gravatar.com/avatar/06a624a82dd4430f86e9a67b300eecb3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_106098" id="a20535677_106098"><a class="email " href="/user_profile?user_id=106098" > <span class="fna">Kris Maglione [:kmag]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a20535677_106098"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a20535677_106098">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a20535677_106098">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-18 20:06 PDT" data-time="1468897576">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Duplicate of this bug: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - tabs.update with javascript:-URL does not run code"
   href="/show_bug.cgi?id=1287646">1287646</a></div></div></div><div class="change-set" id="a39797169_135518"><div class="change" id="aa39797169_135518">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_135518" id="a39797169_135518"><img src="https://secure.gravatar.com/avatar/2b6c1ba0915a97a81d59ca1e101e6d74?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_135518" id="a39797169_135518"><a class="email " href="/user_profile?user_id=135518" > <span class="fna">Phil Ringnalda (:philor)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a39797169_135518"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a39797169_135518">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a39797169_135518">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-26 17:31 PST" data-time="1488159068">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [good first bug][tabs] triaged  [checkin needed for attachments 8723632, 8723633][adv-main46+] &rarr; [good first bug][tabs] triaged  [adv-main46+]</div></div></div><div class="change-set" id="a81076799_546015"><div class="change" id="aa81076799_546015">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_546015" id="a81076799_546015"><img src="https://secure.gravatar.com/avatar/d0465b8931b44330f542efbeeae855da?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_546015" id="a81076799_546015"><a class="email " href="/user_profile?user_id=546015" > <span class="fna">BMO Automation</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a81076799_546015"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a81076799_546015">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#a81076799_546015">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-06-19 13:04 PDT" data-time="1529438698">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Product: Toolkit &rarr; WebExtensions</div></div></div><div class="change-set ca-654133" id="c89"><div class="comment" data-id="14572260" data-no="89"
       data-tags="spam">
    
    <table class="layout-table change-head " id="ch-89" style="display:none" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_654133" id="a81076799_546015"><img src="https://secure.gravatar.com/avatar/bfad826e3eea317e7bbf831a8f297b92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_654133" id="a81076799_546015"><a class="email " href="/user_profile?user_id=654133" > <span class="fna">joony kohe</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-89"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-89" style="display:none">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c89">Comment 89</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-03 12:05 PST" data-time="1578081915">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-89">
        <td colspan="2" class="comment-tags"><span class="comment-tag">spam</span>
        </td>
      </tr>
    </table>

    
      <table class="layout-table change-head default-collapsed" id="cc-89"
             role="presentation">
      <tr>
        <td class="comment-collapse-reason"
            title="kbjoon2426 [2 years ago]">
            Comment hidden (spam)
        </td>
        <td class="comment-actions">
          <button type="button" class="change-spinner minor iconic" id="ccs-89"
                  aria-label="Expand"
                  aria-expanded="false"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </td>
      </tr>
      </table>
  </div><div
        class="comment-text markdown-body "
        id="ct-89" data-comment-id="14572260" data-ismarkdown="true"  style="display:none"><p>Best information unfortunatelY I had to update this patch (the one which is going to land on m-c), because the previous version will not pass one of newly added eslint The best Bugzilla Mozilla Browser best information blogs</p>
<p>Hi Marie and many thanks for your great interview of Rick Hanson regarding inner strength. Will certainly be watching the interview again. You did a wonderful job I<br>
&lt;a href=&quot;<a href="https://www.sattamatka.company/%22%3Esatta" rel="nofollow">https://www.sattamatka.company/&quot;&gt;satta</a> matka, indian matka, boss matka&lt;/a&gt;</p>
</div></div><div class="change-set ca-654133" id="c90"><div class="comment" data-id="14572264" data-no="90"
       data-tags="spam">
    
    <table class="layout-table change-head " id="ch-90" style="display:none" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_654133" id="a81076799_546015"><img src="https://secure.gravatar.com/avatar/bfad826e3eea317e7bbf831a8f297b92?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_654133" id="a81076799_546015"><a class="email " href="/user_profile?user_id=654133" > <span class="fna">joony kohe</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-90"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-90" style="display:none">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c90">Comment 90</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-03 12:07 PST" data-time="1578082036">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-90">
        <td colspan="2" class="comment-tags"><span class="comment-tag">spam</span>
        </td>
      </tr>
    </table>

    
      <table class="layout-table change-head default-collapsed" id="cc-90"
             role="presentation">
      <tr>
        <td class="comment-collapse-reason"
            title="kbjoon2426 [2 years ago]">
            Comment hidden (spam)
        </td>
        <td class="comment-actions">
          <button type="button" class="change-spinner minor iconic" id="ccs-90"
                  aria-label="Expand"
                  aria-expanded="false"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </td>
      </tr>
      </table>
  </div><div
        class="comment-text markdown-body "
        id="ct-90" data-comment-id="14572264" data-ismarkdown="true"  style="display:none"><p>Best information unfortunatelY I had to update this patch (the one which is going to land on m-c), because the previous version will not pass one of newly added eslint The best Bugzilla Mozilla Browser best information blogs</p>
<p>Hi Marie and many thanks for your great interview of Rick Hanson regarding inner strength. Will certainly be watching the interview again. You did a wonderful job I <a href="https://www.sattamatka.company/" rel="nofollow">https://www.sattamatka.company/</a></p>
</div></div><div class="change-set" id="c91"><div class="comment" data-id="14574976" data-no="91"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-91" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_575867" id="a81076799_546015"><img src="https://secure.gravatar.com/avatar/9eb8612b118640351041fb0877c5fc8f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_575867" id="a81076799_546015"><a class="email " href="/user_profile?user_id=575867" > <span class="fna">Release mgmt bot [:sylvestre / :calixte / :marco for bugbug]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-91"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-91" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1227462#c91">Comment 91</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-06 04:13 PST" data-time="1578312783">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-91">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-91" data-comment-id="14574976" data-ismarkdown="true" ><p><a href="https://github.com/mozilla/bugbug/" rel="nofollow">Bugbug</a> thinks this bug is a regression, but please revert this change in case of error.</p>
</div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=regression&amp;resolution=---">regression</a></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1227462&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>