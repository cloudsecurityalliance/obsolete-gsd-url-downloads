<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Roundup is a python-based, MIT licensed issue-tracking system with command-line, web and e-mail interfaces">
    <meta name="viewport" content="width=device-width">
    <title>
  
    Issue 5808: file_open allows to open file outside trytond root - Tryton issue tracker
  
</title>
    <link rel="stylesheet" type="text/css" href="@@file/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="@@file/style.css">
  

  </head>
  <body>
    
      <div class="navbar sticky-top navbar-light bg-light">
  <a href="https://bugs.tryton.org/" class='navbar-brand'>
    <i class='icon-home'></i> Tryton issue tracker
  </a>
  <button class="navbar-toggler collapsed d-md-none" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
  </button>
  <form name="searchform" method="get" action="issue" class='form-inline my-2 my-lg-0 navbar-search'>
    <input type="hidden" name="@columns" value="id,activity,title,component,nosy,status"/>
    <input type="hidden" name="@sort" value="-activity">
    <input type="hidden" name="@group" value="priority">
    <input type="hidden" name="@filter" value="status">
    <input class="form-control form-control-sm mr-sm-2 search-query" id="search-text" type="search" name="@search_text">
    <input class="btn btn-sm btn-outline-success mr-2 my-2 my-sm-0" type="submit" value="Search" name="submit">
    <div class="form-check mr-2 w-auto">
        <input class="form-check-input" type="radio" name="status" id="status_notresolved" value="-1,1,2,3,4,5,6,7" checked/>
        <label class="form-check-label" for="status_notresolved">Open</label>
    </div>
    <div class="form-check w-auto">
        <input class="form-check-input" type="radio" name="status" id="status_all" value=""/>
        <label class="form-check-label" for="status_all">All</label>
    </div>
  </form>
</div>
    

    
      <div class='container-fluid'>
        <div class='row'>
          <div class='col-md-3 col-lg-2 d-md-block navigation collapse' id="navigation">
            <div class="navigation-sticky">
            
              


  <ul class='nav flex-column'>
    <li class='nav-header'>
      <i class='icon-fire'></i>Issues
    </li>
    

    <li class="nav-item">
      <a href="issue?@sort=-activity&amp;@group=priority&amp;@filter=status%2Cassignedto&amp;@columns=id%2Cactivity%2Ctitle%2Ccomponent%2Cnosy%2Cstatus&amp;@search_text=&amp;status=-1%2C1%2C2%2C3%2C4%2C5%2C6%2C7&amp;assignedto=-1&amp;@dispname=Show%20Unassigned&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a>
    </li>
    <li class="nav-item">
      <a href="https://bugs.tryton.org/?@dispname=Show%20All">Show All</a>
    </li>
    <li>
      <a href="issue?@template=search">Search</a>
    </li>
    <li>
      <form method="POST" class='form-inline' action="https://bugs.tryton.org/">
        <div class="form-group">
          <input type="hidden" name="@type" value="issue">
          <input type="hidden" name="@action" value="show">
          <input class="form-control form-control-sm d-inline-block w-25" type="text" name="@number">
          <input class="btn btn-sm btn-outline-secondary" type="submit" value="Show issue">
        </div>
      </form>
    </li>
    <li class="nav-item">
        <a href="@@file/graph/issue.html">Statistics</a>
    </li>
    </li>
  </ul>
  <hr>


<ul class='nav flex-column'>
  
  
  
</ul>





  <form method="POST" action='https://bugs.tryton.org/'>
    <ul class='nav flex-column'>
      <li class='nav-header'>
        <i class='icon-user'></i>Login
      </li>
      <li class="nav-item">
        <input class="form-control form-control-sm" type='text' name="__login_name" placeholder='username'>
      </li>
      <li class="nav-item">
        <input class="form-control form-control-sm" type="password" name="__login_password" placeholder='password'>
      </li>
      <li class="nav-item">
        <label class="form-control form-control-sm" class='checkbox'>
          <input type="checkbox" name="remember"> Remember me?
        </label>
      </li>
      <li class="nav-item">
        <input class="btn btn-sm btn-secondary" type="submit" value="Login">
      </li>
      <li class='vspace-one'>
        
          <a href="user?@template=register">Register</a>
        
      </li>
      <li class="nav-item">
        <a href="user?@template=forgotten">Lost&nbsp;your&nbsp;login?</a>
      </li>
    </ul>
    <input type="hidden" name="@action" value="Login">
    <input type="hidden" name="__came_from" value="https://bugs.tryton.org/issue5808">
  </form>
  <hr>


<ul class='nav flex-column'>
  <li class='nav-header'>
    <i class='icon-bookmark'></i>Help
  </li>
  <li>
    <a href="http://www.roundup-tracker.org">Roundup docs</a>
  </li>
</ul>
            
            </div>
          </div>

          <div class='col-md-9 col-lg-10 ml-sm-auto'>
            <div class='pb-2 mb-2 border-bottom'>
              <h3>
  
    Issue 5808
  
</h3>
              
              
            </div>

            
  

  
    
      <dl class="row row-cols-1 row-cols-lg-2 no-gutters">
  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Title</dt>
    <dd class="col col-8 col-md-9 col-lg-10">file_open allows to open file outside trytond root</dd>
  </div>

  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Priority</dt>
    <dd class="col col-8 col-md-9 col-lg-8">urgent</dd>
  </div>

  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Status</dt>
    <dd class="col col-8 col-md-9 col-lg-8">resolved</dd>
  </div>

  
  
  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Nosy list</dt>
    <dd class="col col-8 col-md-9 col-lg-10">ajacoutot, bch, ced, nicoe, pokoli, sharkcz, yangoon</dd>
  </div>

  
  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Assigned to</dt>
    <dd class="col col-8 col-md-9 col-lg-8">ced</dd>
  </div>

  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Keywords</dt>
    <dd class="col col-8 col-md-9 col-lg-10">review</dd>
  </div>

</dl>
    
  

  
    <p>
      Created on <b>2016-08-20.10:25:56</b>
      by <b>ced</b>,
      last changed <b>62 months ago</b>
      by <b>ced</b>.
    </p>
  

  

  
    <h4>Messages</h4>
    
      
      <div class="anchor"  id="msg28228"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg28228'>msg28228</a>
          <a href='msg28228'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-31.12:28:10
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">News published.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg28212"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg28212'>msg28212</a>
          <a href='msg28212'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-30.14:49:46
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">The releases have been published.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg27996"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg27996'>msg27996</a>
          <a href='msg27996'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-25.19:55:30
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Here is <a href="//codereview.tryton.org/32491003">review32491003</a> for the announce.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg27883"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg27883'>msg27883</a>
          <a href='msg27883'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-23.10:10:14
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Please use CVE-2016-1242 for this issue.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg27833"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg27833'>msg27833</a>
          <a href='msg27833'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-20.15:25:04
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">All current maintained series.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg27830"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg27830'>msg27830</a>
          <a href='msg27830'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-20.12:46:37
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">I will request the CVE. Do we already know the affected versions?</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg27829"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg27829'>msg27829</a>
          <a href='msg27829'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-20.10:28:22
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Here is <a href="//codereview.tryton.org/28691002">review28691002</a>
I think we could schedule security release with <a href="issue5795">issue5795</a>

@yangoon Could you get another CVE number for this one?</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg27828"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue5808#msg27828'>msg27828</a>
          <a href='msg27828'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2016-08-20.10:25:56
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">I found that file_open does not sanitize the name against up-level reference.
This allows to open any file that trytond has read access.
I see one particular case where this could be used. It is the field 'name' on Report definition which represent the relative path to the report template. As this field is writeable by the group "admin", this allow any "admin" user to forge a path to read file outside trytond directory (or egg path).
This behaviour could be an issue on shared hosting environment where trytond's administrators are not the same as the host administrators.</pre>
      
      </div>
    
  

  <div class='vspace-five'></div>

  
  
  <table class="history table table-condensed table-striped"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2016-08-31&nbsp;12:28:11</td><td>ced</td><td>set</td><td>status: testing -> resolved<br />messages:
  + <a rel="nofollow noopener" href="msg28228">msg28228</a></td></tr>
<tr><td>2016-08-30&nbsp;14:49:46</td><td>ced</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg28212">msg28212</a></td></tr>
<tr><td>2016-08-25&nbsp;19:55:31</td><td>ced</td><td>set</td><td>reviews: 28691002 -> 28691002,32491003<br />messages:
  + <a rel="nofollow noopener" href="msg27996">msg27996</a></td></tr>
<tr><td>2016-08-23&nbsp;10:10:14</td><td>yangoon</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg27883">msg27883</a></td></tr>
<tr><td>2016-08-20&nbsp;15:25:04</td><td>ced</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg27833">msg27833</a></td></tr>
<tr><td>2016-08-20&nbsp;12:46:38</td><td>yangoon</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg27830">msg27830</a></td></tr>
<tr><td>2016-08-20&nbsp;10:28:22</td><td>ced</td><td>set</td><td>status: in-progress -> testing<br />reviews: 28691002<br />messages:
  + <a rel="nofollow noopener" href="msg27829">msg27829</a><br />keyword:
  + <a rel="nofollow noopener" href="keyword26">review</a></td></tr>
<tr><td>2016-08-20&nbsp;10:25:56</td><td>ced</td><td>create</td><td></td></tr>
</table>
  
  <p>Showing 10 items.
  <a href="issue5808?show_all_history=yes">Show all history</a>
  (warning: this could be VERY long)</p>
  
  

          </div>
        </div>
      </div>
    

    
      <footer>
  <div class='container-fluid'>
    <div class="col-md-9 col-lg-10 ml-sm-auto">
    <hr>
    A
    <a href='http://www.roundup-tracker.org/'>roundup</a>
    production.
    </div>
  </div>
</footer>
    

    <script src='@@file/jquery-1.9.0.min.js'></script>
    <script src='@@file/bootstrap.min.js'></script>
    <script src='@@file/script.js'></script>
    
  

  </body>
</html>