<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>913d9e8d93d6b81bb8eac3fc2c1426651f5b259d - platform/external/libhevc - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/external/libhevc/%2B/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/external/">external</a> / <a class="Breadcrumbs-crumb" href="/platform/external/libhevc/">libhevc</a> / <span class="Breadcrumbs-crumb">913d9e8d93d6b81bb8eac3fc2c1426651f5b259d</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>913d9e8d93d6b81bb8eac3fc2c1426651f5b259d</td><td><span>[<a href="/platform/external/libhevc/+log/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d">log</a>]</span> <span>[<a href="/platform/external/libhevc/+archive/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Naveen Kumar Ponnusamy &lt;naveenkumar.p@ittiam.com&gt;</td><td>Tue Mar 14 10:06:04 2017 +0530</td></tr><tr><th class="Metadata-title">committer</th><td>gitbuildkicker &lt;android-build@google.com&gt;</td><td>Mon Apr 17 16:24:02 2017 -0700</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/">7c0dec52f27529794fbede2810632e3add3179aa</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d%5E">bcfc7124f6ef9f1ec128fb2e90de774a5b33d199</a> <span>[<a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">Check only allocated mv bufs for releasing from reference

When checking mv bufs for releasing from reference, unallocated
mv bufs were also checked. This issue was fixed by restricting
the loop count to allocated number of mv bufs.

Bug: 34896906
Bug: 34819017

Change-Id: <a href="https://android-review.googlesource.com/#/q/If832f590b301f414d4cd5206414efc61a70c17cb">If832f590b301f414d4cd5206414efc61a70c17cb</a>
(cherry picked from commit 23bfe3e06d53ea749073a5d7ceda84239742b2c2)
</pre><ul class="DiffTree"><li><a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder/ihevcd_parse_slice_header.c">decoder/ihevcd_parse_slice_header.c</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d%5E%21/#F0">diff</a>]</span></li><li><a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder/ihevcd_ref_list.c">decoder/ihevcd_ref_list.c</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d%5E%21/#F1">diff</a>]</span></li><li><a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder/ihevcd_structs.h">decoder/ihevcd_structs.h</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d%5E%21/#F2">diff</a>]</span></li><li><a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder/ihevcd_utils.c">decoder/ihevcd_utils.c</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d%5E%21/#F3">diff</a>]</span></li></ul><div class="DiffSummary">4 files changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 7c0dec52f27529794fbede2810632e3add3179aa</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - MODULE_LICENSE_APACHE2"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/MODULE_LICENSE_APACHE2">MODULE_LICENSE_APACHE2</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NOTICE"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/NOTICE">NOTICE</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - common/"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/common/">common/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.arm.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.arm.mk">decoder.arm.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.arm64.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.arm64.mk">decoder.arm64.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.mips.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.mips.mk">decoder.mips.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.mips64.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.mips64.mk">decoder.mips64.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.mk">decoder.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.x86.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.x86.mk">decoder.x86.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - decoder.x86_64.mk"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder.x86_64.mk">decoder.x86_64.mk</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - decoder/"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/decoder/">decoder/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - test/"><a class="FileList-itemLink" href="/platform/external/libhevc/+/913d9e8d93d6b81bb8eac3fc2c1426651f5b259d/test/">test/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>