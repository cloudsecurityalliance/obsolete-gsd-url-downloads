<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title>Bug 737456 – lockscreen bypass by holding down printscreen key</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<link href="https://bugzilla.gnome.org/" rel="Top"/>
<link href="showdependencytree.cgi?id=737456&amp;hide_resolved=1" rel="Show" title="Dependency Tree"/>
<link href="show_bug.cgi?format=multiple&amp;id=737456" rel="Show" title="Printer-Friendly Version"/>
<link href="skins/standard/global.css" rel="alternate stylesheet" title="Classic"/><link href="js/yui/assets/skins/sam/autocomplete.css" rel="stylesheet" type="text/css"/><link href="js/yui/assets/skins/sam/calendar.css" rel="stylesheet" type="text/css"/><link href="skins/standard/global.css" rel="stylesheet" type="text/css"/><link href="skins/standard/show_bug.css" rel="stylesheet" type="text/css"/><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css" rel="stylesheet"
        type="text/css" >
<![endif]-->
<link href="skins/contrib/Gnome/global.css" rel="stylesheet" title="Gnome" type="text/css"/>
<script src="js/yui/yahoo-dom-event/yahoo-dom-event.js" type="text/javascript"></script><script src="js/yui/cookie/cookie-min.js" type="text/javascript"></script><script src="js/yui/datasource/datasource-min.js" type="text/javascript"></script><script src="js/yui/connection/connection-min.js" type="text/javascript"></script><script src="js/yui/json/json-min.js" type="text/javascript"></script><script src="js/yui/autocomplete/autocomplete-min.js" type="text/javascript"></script><script src="js/yui/calendar/calendar-min.js" type="text/javascript"></script><script src="js/global.js" type="text/javascript"></script>
<script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 50
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 737456 – lockscreen bypass by holding down printscreen key",  
                             "show_bug.cgi?id=737456" );
        document.title = "Bug 737456 – lockscreen bypass by holding down printscreen key";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 737456 – lockscreen bypass by holding down printscreen key", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script src="js/util.js" type="text/javascript"></script><script src="js/field.js" type="text/javascript"></script>
<link href="./search_plugin.cgi" rel="search" title="GNOME Bugzilla" type="application/opensearchdescription+xml"/>
<link href="images/favicon.ico" rel="shortcut icon"/><link href="extensions/TraceParser/web/style.css" rel="stylesheet" type="text/css"/>
</head>
<body class="bugzilla-gnome-org bz_bug bz_status_RESOLVED bz_product_gnome-shell bz_component_lock-screen bz_bug_737456 yui-skin-sam" onload="">
<div id="header">
<div id="banner">
</div>
<table border="0" cellpadding="0" cellspacing="0" id="titles">
<tr>
<td id="title">
<p>GNOME Bugzilla – Bug 737456</p>
</td>
<td id="subtitle">
<p class="subheader">lockscreen bypass by holding down printscreen key</p>
</td>
<td id="information">
<p class="header_addl_info">Last modified: 2015-04-15 13:15:45 UTC</p>
</td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" class="bz_default_hidden" id="lang_links_container"><tr><td>
</td></tr></table>
<ul class="links"><li><a href="./">Home</a></li></ul>
</div>
<div id="bugzilla-body">
<div style="margin-bottom: 50px; margin-top: 50px; padding: 40px; text-align: center; background-color: rgb(74,134,207); border: rgb(57,104,161); color: rgb(255,255,255); line-height: 300%;">After an <a href="https://wiki.gnome.org/Initiatives/DevelopmentInfrastructure" style="color: rgb(255,255,255);">evaluation</a>, GNOME has moved from Bugzilla to <a href="https://gitlab.gnome.org/" style="color: rgb(255,255,255);">GitLab</a>. <a href="https://wiki.gnome.org/GitLab" style="color: rgb(255,255,255);">Learn more about GitLab</a>. <br/><span style="background-color: #EE0000; font-size: xx-large;"><b>No new issues can be reported in GNOME Bugzilla anymore.</b></span>
<br/><span style="background-color: #EE0000; font-size: xx-large;"><b>To report an issue in a GNOME project, <a href="https://gitlab.gnome.org/GNOME" style="color: rgb(255,255,255);">go to GNOME GitLab</a></b>.</span><br/>Do <b>not</b> go to GNOME Gitlab for: <a href="https://sourceforge.net/p/bluefish/tickets" style="color: rgb(255,255,255);">Bluefish</a>, <a href="https://github.com/doxygen/doxygen/issues" style="color: rgb(255,255,255);">Doxygen</a>, <a href="https://bugs.gnucash.org/" style="color: rgb(255,255,255);">GnuCash</a>, <a href="https://gitlab.freedesktop.org/gstreamer/" style="color: rgb(255,255,255);">GStreamer</a>, <a href="https://github.com/afcowie/java-gnome/issues" style="color: rgb(255,255,255);">java-gnome</a>, <a href="https://github.com/ldtp/ldtp2/issues" style="color: rgb(255,255,255);">LDTP</a>, <a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues" style="color: rgb(255,255,255);">NetworkManager</a>, <a href="https://github.com/tomboy-notes/tomboy/issues" style="color: rgb(255,255,255);">Tomboy</a>.</div>
<script type="text/javascript">
<!--

//-->
</script>
<form action="process_bug.cgi" id="changeform" method="post" name="changeform">
<input name="delta_ts" type="hidden" value="2015-04-15 13:15:45"/>
<input name="longdesclength" type="hidden" value="43"/>
<input name="id" type="hidden" value="737456"/>
<input name="token" type="hidden" value="1626120531-GlSCR1nWEHDUOV5WQ-dVbCRix8VB5reKU0L5Kf5nu14"/>
<div class="bz_alias_short_desc_container edit_form">
<a href="show_bug.cgi?id=737456"><b>Bug 737456</b></a> -<span class="bz_default_hidden" id="summary_alias_container">
<span id="short_desc_nonedit_display">lockscreen bypass by holding down printscreen key</span>
</span>
<div id="summary_alias_input">
<table id="summary">
<tr>
<td colspan="2">
</td>
</tr>
<tr><th class="field_label" id="field_label_short_desc">
<label accesskey="s" for="short_desc">
<a class="field_help_link" href="page.cgi?id=fields.html#short_desc" title="The bug summary is a short sentence which succinctly describes what the bug is about.">Summary:</a>
</label>
</th>
<td>lockscreen bypass by holding down printscreen key
          </td>
</tr>
</table>
</div>
</div>
<script type="text/javascript">
    hideAliasAndSummary('lockscreen bypass by holding down printscreen key', '');
  </script>
<table class="edit_form">
<tr>
<td class="bz_show_bug_column" id="bz_show_bug_column_1">
<table>
<tr>
<th class="field_label">
<a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
<td id="bz_field_status">
<span id="static_bug_status">RESOLVED
          FIXED
      </span>
</td>
</tr>
<tr>
<td class="bz_section_spacer" colspan="2"></td>
</tr>
<tr><th class="field_label" id="field_label_product">
<a class="field_help_link" href="describecomponents.cgi" title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list.">Product:</a>
</th>
<td class="field_value" id="field_container_product">gnome-shell</td>
</tr>
<tr class="bz_default_hidden"><th class="field_label" id="field_label_classification">
<a class="field_help_link" href="page.cgi?id=fields.html#classification" title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.">Classification:</a>
</th>
<td class="field_value" id="field_container_classification">Core</td>
</tr>
<tr><th class="field_label" id="field_label_component">
<a class="field_help_link" href="describecomponents.cgi?product=gnome-shell" title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.">Component:</a>
</th>
<td class="field_value" id="field_container_component">lock-screen</td>
</tr>
<tr><th class="field_label" id="field_label_version">
<label for="version">
<a class="field_help_link" href="page.cgi?id=fields.html#version" title="The version field defines the version of the software the bug was found in.">Version:</a>
</label>
</th>
<td>3.14.x
  </td>
</tr>
<tr><th class="field_label" id="field_label_rep_platform">
<label accesskey="h" for="rep_platform">
<a class="field_help_link" href="page.cgi?id=fields.html#rep_platform" title='The hardware platform the bug was observed on. Note: When searching, selecting the option "All" only finds bugs whose value for this field is literally the word "All".'>Hardware:</a>
</label>
</th>
<td class="field_value">Other
       Linux
      </td>
</tr>
<tr>
<td class="bz_section_spacer" colspan="2"></td>
</tr>
<tr>
<th class="field_label">
<label accesskey="i" for="priority">
<a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
<td>High
       major
      </td>
</tr>
<tr>
<th class="field_label">
<label for="target_milestone">
<a href="page.cgi?id=fields.html#target_milestone">
            Target Milestone</a></label>:
        </th><td>---
  </td>
</tr>
<tr>
<th class="field_label">
<a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
<td><span class="vcard">gnome-shell-maint
</span>
</td>
</tr>
<tr><th class="field_label" id="field_label_qa_contact">
<label accesskey="q" for="qa_contact">
<a class="field_help_link" href="page.cgi?id=fields.html#qa_contact" title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.">QA Contact:</a>
</label>
</th>
<td><span class="vcard">gnome-shell-maint
</span>
</td>
</tr>
<script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'gnome-shell-maint\x40gnome.bugs',
        'gnome-shell-maint\x40gnome.bugs');
    </script>
<tr>
<td class="bz_section_spacer" colspan="2"></td>
</tr>
<tr><th class="field_label" id="field_label_bug_file_loc">
<label accesskey="u" for="bug_file_loc">
<a class="field_help_link" href="page.cgi?id=fields.html#bug_file_loc" title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.">URL:</a>
</label>
</th>
<td>
<span id="bz_url_input_area">
</span>
</td>
</tr>
<tr><th class="field_label" id="field_label_status_whiteboard">
<label accesskey="w" for="status_whiteboard">
<a class="field_help_link" href="page.cgi?id=fields.html#status_whiteboard" title="Each bug has a free-form single line text entry box for adding tags and status information.">Whiteboard:</a>
</label>
</th><td colspan="2">3.14.1  
  </td>
</tr>

<tr>
<td class="bz_section_spacer" colspan="2"></td>
</tr>
<tr>
<th class="field_label">
<label for="duplicates">Duplicates</label>:
    </th>
<td class="field_value" colspan="2">
<span id="duplicates"><a class="bz_bug_link bz_status_RESOLVED bz_closed" href="show_bug.cgi?id=699844" title="RESOLVED DUPLICATE - No throttling on screenshot repeat rate">699844</a>
</span>
      (<a href="buglist.cgi?bug_id=699844">view as bug list</a>)
    </td>
</tr>
<tr><th class="field_label" id="field_label_dependson">
<a class="field_help_link" href="page.cgi?id=fields.html#dependson" title="The bugs listed here must be resolved before this bug can be resolved.">Depends on:</a>
</th>
<td>
<span id="dependson_input_area">
</span>
</td>
</tr>
<tr><th class="field_label" id="field_label_blocked">
<a class="field_help_link" href="page.cgi?id=fields.html#blocked" title="This bug must be resolved before the bugs listed in this field can be resolved.">Blocks:</a>
</th>
<td>
<span id="blocked_input_area">
</span>
</td>
</tr>
<tr>
<th> </th>

</tr>
</table>
</td>
<td>
<div class="bz_column_spacer"> </div>
</td>
<td class="bz_show_bug_column" id="bz_show_bug_column_2">
<table cellpadding="3" cellspacing="1">
<tr>
<th class="field_label">
      Reported:
    </th>
<td>2014-09-26 17:45 UTC by <span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</td>
</tr>
<tr>
<th class="field_label">
      Modified:
    </th>
<td>2015-04-15 13:15 UTC 
    </td>
</tr>

<tr>
<td class="bz_section_spacer" colspan="2"></td>
</tr>
<tr><th class="field_label" id="field_label_see_also">
<a class="field_help_link" href="page.cgi?id=fields.html#see_also" title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.">See Also:</a>
</th>
<td class="field_value" id="field_container_see_also"></td>
</tr>
<tr><th class="field_label" id="field_label_cf_gnome_target">
<a class="field_help_link" href="page.cgi?id=fields.html#cf_gnome_target" title="A custom Drop Down field in this installation of GNOME Bugzilla.">GNOME target:</a>
</th>
<td class="field_value" colspan="2" id="field_container_cf_gnome_target">---</td>
</tr>
<tr><th class="field_label" id="field_label_cf_gnome_version">
<a class="field_help_link" href="page.cgi?id=fields.html#cf_gnome_version" title="A custom Drop Down field in this installation of GNOME Bugzilla.">GNOME version:</a>
</th>
<td class="field_value" colspan="2" id="field_container_cf_gnome_version">3.13/3.14</td>
</tr>
<tr>
<td class="bz_section_spacer" colspan="2"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="3">
<hr id="bz_top_half_spacer"/>
</td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" id="bz_big_form_parts"><tr>
<td>
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>
<br/>
<table cellpadding="4" cellspacing="0" id="attachment_table">
<tr id="a0">
<th align="left" colspan="3">
      Attachments
    </th>
</tr>
<tr class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden" id="a1">
<td valign="top">
<a href="attachment.cgi?id=287237" title="View the content of the attachment">
<b><span class="bz_obsolete">Only allow screenshots in the user session</span></b></a>
<span class="bz_attach_extra_info">
              (2.77 KB,
                patch)

            <br/>
<a href="#attach_287237" title="Go to the comment associated with the attachment">2014-09-27 11:15 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">rejected
          </td>
<td valign="top">
<a href="attachment.cgi?id=287237&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287237">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden" id="a2">
<td valign="top">
<a href="attachment.cgi?id=287244" title="View the content of the attachment">
<b><span class="bz_obsolete">shell-screenshot: Add rate limiting</span></b></a>
<span class="bz_attach_extra_info">
              (3.58 KB,
                patch)

            <br/>
<a href="#attach_287244" title="Go to the comment associated with the attachment">2014-09-27 11:39 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">reviewed
          </td>
<td valign="top">
<a href="attachment.cgi?id=287244&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287244">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden" id="a3">
<td valign="top">
<a href="attachment.cgi?id=287248" title="View the content of the attachment">
<b><span class="bz_obsolete">shell-screenshot: Only allow one screenshot request at a time</span></b></a>
<span class="bz_attach_extra_info">
              (3.22 KB,
                patch)

            <br/>
<a href="#attach_287248" title="Go to the comment associated with the attachment">2014-09-27 12:47 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">reviewed
          </td>
<td valign="top">
<a href="attachment.cgi?id=287248&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287248">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden" id="a4">
<td valign="top">
<a href="attachment.cgi?id=287251" title="View the content of the attachment">
<b><span class="bz_obsolete">shell-screenshot: Only allow one screenshot request at a time per sender</span></b></a>
<span class="bz_attach_extra_info">
              (18.01 KB,
                patch)

            <br/>
<a href="#attach_287251" title="Go to the comment associated with the attachment">2014-09-27 14:57 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">none
          </td>
<td valign="top">
<a href="attachment.cgi?id=287251&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287251">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden" id="a5">
<td valign="top">
<a href="attachment.cgi?id=287270" title="View the content of the attachment">
<b><span class="bz_obsolete">shell-screenshot: Only allow one screenshot request at a time per sender</span></b></a>
<span class="bz_attach_extra_info">
              (20.33 KB,
                patch)

            <br/>
<a href="#attach_287270" title="Go to the comment associated with the attachment">2014-09-28 08:02 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">needs-work
          </td>
<td valign="top">
<a href="attachment.cgi?id=287270&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287270">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden" id="a6">
<td valign="top">
<a href="attachment.cgi?id=287647" title="View the content of the attachment">
<b><span class="bz_obsolete">shell-screenshot: Only allow one screenshot request at a time per sender</span></b></a>
<span class="bz_attach_extra_info">
              (20.81 KB,
                patch)

            <br/>
<a href="#attach_287647" title="Go to the comment associated with the attachment">2014-10-03 08:29 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">needs-work
          </td>
<td valign="top">
<a href="attachment.cgi?id=287647&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287647">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch" id="a7">
<td valign="top">
<a href="attachment.cgi?id=287671" title="View the content of the attachment">
<b>shell-screenshot: Only allow one screenshot request at a time per sender</b></a>
<span class="bz_attach_extra_info">
              (21.39 KB,
                patch)

            <br/>
<a href="#attach_287671" title="Go to the comment associated with the attachment">2014-10-03 13:25 UTC</a>,

            <span class="vcard">drago01
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">committed
          </td>
<td valign="top">
<a href="attachment.cgi?id=287671&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287671">Review</a>
</td>
</tr>
<tr class="bz_contenttype_text_plain bz_patch" id="a8">
<td valign="top">
<a href="attachment.cgi?id=287941" title="View the content of the attachment">
<b>media-keys: Disallow screenshots when locked</b></a>
<span class="bz_attach_extra_info">
              (2.86 KB,
                patch)

            <br/>
<a href="#attach_287941" title="Go to the comment associated with the attachment">2014-10-07 10:34 UTC</a>,

            <span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
</td>
<td class="bz_attach_status" valign="top">committed
          </td>
<td valign="top">
<a href="attachment.cgi?id=287941&amp;action=edit">Details</a>  |
    <a href="review?bug=737456&amp;attachment=287941">Review</a>
</td>
</tr>

</table>
<br/>
</td>
<td>
</td>
</tr></table>
<div id="comments"><script src="js/comments.js" type="text/javascript">
</script>
<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>
<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table cellpadding="0" cellspacing="0" class="bz_comment_table"><tr>
<td>
<div class="bz_comment bz_first_comment" id="c0">
<div class="bz_first_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c0">Description</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-26 17:45:27 UTC
        </span>
</div>
<pre class="bz_comment_text">TIL that the printscreen key combination works even when the screen is locked.

At first i thought this was only good for filling up the home directory of people who were away from their keyboards.

Then i tried holding the key down and discovered that the RAM used by gnome-shell rapidly increased (maybe because the screenshots were taken faster than they could be written to disk?  vmstat said that the RAM wasn't in either "buffer" or "cache" though)

if i held the key down long enough (on my test system, that meant 5-10 seconds) gnome-shell would crash (killed by the kernel's oom-killer, according to dmesg), revealing the applications that were behind it.

This showed the contents of the user's screen, which is a violation of one goal of "lock screen"

Even worse, if any application had keyboard focus i could type in that application and take action there, so if (for example) the application was gnome-terminal with a running shell, i could basically do anything as the logged in user.

A few seconds later, gnome-shell respawned (i don't know the architecture well enough to know what respawned it) and i was locked out again, but not before being able to take action in the dialog that should have been hidden.

Platform details: Debian unstable, gnome 3.14, amd64 architecture, older (~2009) macbook air with tiny spinning-disk hard drive.</pre>
</div><div class="bz_comment" id="c1">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c1">Comment 1</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-26 17:53:12 UTC
        </span>
</div>
<pre class="bz_comment_text">ah, i forgot to mention: this machine doesn't have a physical "PrtSc" button, so i set up one of the function keys to trigger the "Save a screenshot to Pictures" action via Preferences » Keyboard » Shortcuts » Screenshots

I suspect the attack would work just as well on a machine (or USB kbd) that has a PrtSc button without making the preferences change, but i haven't tested that.</pre>
</div><div class="bz_comment" id="c2">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c2">Comment 2</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Elad Alfassa</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-26 18:25:37 UTC
        </span>
</div>
<pre class="bz_comment_text">Ouch, this is a serious issue indeed.

So what we have here is basically two issues:
1) Taking a screenshot causes a memory leak
2) Crashing the shell in the lock screen gives you access to the locked session.

Both don't sound easy to fix at all, but #2 is the more critical one, I think.

A workaround would be disabling the option to take screenshots in the lock screen, but it's fragile because if someone finds some other way to crash the shell when locked (and I don't doubt that they will), we'll have the same issue again.</pre>
</div><div class="bz_comment" id="c3">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c3">Comment 3</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Jasper St. Pierre (not reading bugmail)</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 01:12:10 UTC
        </span>
</div>
<pre class="bz_comment_text">2) has already been taken care of. It was #691987.

The issue is that for a short period of time, while gnome-shell is restarting, we show the raw X windows.</pre>
</div><div class="bz_comment" id="c4">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c4">Comment 4</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 11:15:14 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=287237" name="attach_287237" title="Only allow screenshots in the user session">attachment 287237</a> <a href="attachment.cgi?id=287237&amp;action=edit" title="Only allow screenshots in the user session">[details]</a></span> <a href="review?bug=737456&amp;attachment=287237">[review]</a>
Only allow screenshots in the user session

We currently disallow screencasts in all session types but the user session to
prevent someone with access to the machine from filling up the disk with
screencasts. Screenshots can be abused the same way so restrict them as well.</pre>
</div><div class="bz_comment" id="c5">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c5">Comment 5</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 11:23:03 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c2">comment #2</a>)
<span class="quote">&gt; Ouch, this is a serious issue indeed.
&gt; 
&gt; So what we have here is basically two issues:
&gt; 1) Taking a screenshot causes a memory leak</span>

Doesn't look like a leak. What happens is that when we take a screenshot we create a thread that writes the data to disk (which holds a reference on the data). So if you flood the system with screenshot requests you end up with tons of threads that holds the screenshot data. 

There aren't infinitely number of threads that can be run at once and the disk writes take time. Both together cause that "leak" ... we probably should rate limit the screenshot requests to avoid that.

<span class="quote">&gt; 2) Crashing the shell in the lock screen gives you access to the locked
&gt; session.</span>

It doesn't until the restart takes a lot of time there is a time window where the windows are accessible. If you hit the OOM killer lots of stuff needs to get paged in and thus that window becomes bigger. So a crash by itself is not enough to access things. 

Not sure what crazy side effects that might have if any but ... Jasper can we simply unmap all windows when we lock and map them on unlock?

<span class="quote">&gt; A workaround would be disabling the option to take screenshots in the lock
&gt; screen, but it's fragile because if someone finds some other way to crash the
&gt; shell when locked (and I don't doubt that they will), we'll have the same issue
&gt; again.</span>

We should do that anyway (see commit message).</pre>
</div><div class="bz_comment" id="c6">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c6">Comment 6</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 11:39:40 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=287244" name="attach_287244" title="shell-screenshot: Add rate limiting">attachment 287244</a> <a href="attachment.cgi?id=287244&amp;action=edit" title="shell-screenshot: Add rate limiting">[details]</a></span> <a href="review?bug=737456&amp;attachment=287244">[review]</a>
shell-screenshot: Add rate limiting

We currently allow infinite number of screenshot requests to be active at
the same time, which can "dos" the system and cause OOM.

So limit the number of screenshots requests and simply fail if the user tries
to do more at once.</pre>
</div><div class="bz_comment" id="c7">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c7">Comment 7</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Colin Walters</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 12:25:20 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287244" name="attach_287244" title="shell-screenshot: Add rate limiting">attachment 287244</a> <a href="attachment.cgi?id=287244&amp;action=edit" title="shell-screenshot: Add rate limiting">[details]</a></span> <a href="review?bug=737456&amp;attachment=287244">[review]</a>:

Wouldn't it be simpler to just allow one screenshot at a time?  Just have a boolean "screenshot_running" or something.</pre>
</div><div class="bz_comment" id="c8">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c8">Comment 8</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 12:47:08 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c7">comment #7</a>)
<span class="quote">&gt; Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287244" name="attach_287244" title="shell-screenshot: Add rate limiting">attachment 287244</a> <a href="attachment.cgi?id=287244&amp;action=edit" title="shell-screenshot: Add rate limiting">[details]</a></span> <a href="review?bug=737456&amp;attachment=287244">[review]</a>:
&gt; 
&gt; Wouldn't it be simpler to just allow one screenshot at a time?  Just have a
&gt; boolean "screenshot_running" or something.</span>

Indeed that makes sense.</pre>
</div><div class="bz_comment" id="c9">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c9">Comment 9</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 12:47:34 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=287248" name="attach_287248" title="shell-screenshot: Only allow one screenshot request at a time">attachment 287248</a> <a href="attachment.cgi?id=287248&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time">[details]</a></span> <a href="review?bug=737456&amp;attachment=287248">[review]</a>
shell-screenshot: Only allow one screenshot request at a time

We currently allow infinite number of screenshot requests to be active at
the same time, which can "dos" the system and cause OOM.

So fail subsequent requests when a screenshot operation is already running.</pre>
</div><div class="bz_comment" id="c10">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c10">Comment 10</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 13:43:17 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c5">comment #5</a>)
<span class="quote">&gt; we probably should rate limit the screenshot requests to avoid that.</span>

Yes. gnome-settings-daemon used to disable auto-repeat for all but a select few keybindings (volume/brightness being the only ones I recall off-hand), we should probably start doing the same.


<span class="quote">&gt; &gt; A workaround would be disabling the option to take screenshots in the lock
&gt; &gt; screen, but it's fragile because if someone finds some other way to crash the
&gt; &gt; shell when locked (and I don't doubt that they will), we'll have the same issue
&gt; &gt; again.
&gt; 
&gt; We should do that anyway (see commit message).</span>

No strong opinion, but allowing screenshots when locked was not accidental - there are cases where it comes in handy (reviews, bug reports, ...), and the potential for filling up the disc is much smaller than with screencasting (depending on the max-screencast-length setting, starting recording once vs. hitting PrintScrn for hours).</pre>
</div><div class="bz_comment" id="c11">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c11">Comment 11</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 13:57:10 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287248" name="attach_287248" title="shell-screenshot: Only allow one screenshot request at a time">attachment 287248</a> <a href="attachment.cgi?id=287248&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time">[details]</a></span> <a href="review?bug=737456&amp;attachment=287248">[review]</a>:

::: src/shell-screenshot.c
@@ +43,3 @@
 
+/* Used to rate limit the screenshot requests */
+static gboolean _screenshot_running = FALSE;

I don't see why this needs to be separate from the instance struct - in fact, with screenshots being limited to one at a time, there's no need anymore to keep screenshot_data separate either ...</pre>
</div><div class="bz_comment" id="c12">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c12">Comment 12</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:04:38 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c11">comment #11</a>)
<span class="quote">&gt; Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287248" name="attach_287248" title="shell-screenshot: Only allow one screenshot request at a time">attachment 287248</a> <a href="attachment.cgi?id=287248&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time">[details]</a></span> <a href="review?bug=737456&amp;attachment=287248">[review]</a>:
&gt; 
&gt; ::: src/shell-screenshot.c
&gt; @@ +43,3 @@
&gt; 
&gt; +/* Used to rate limit the screenshot requests */
&gt; +static gboolean _screenshot_running = FALSE;
&gt; 
&gt; I don't see why this needs to be separate from the instance struct - in fact,
&gt; with screenshots being limited to one at a time, there's no need anymore to
&gt; keep screenshot_data separate either ...</span>

Well done it that way because ShellScreenshot is not a singleton and the shell uses a new instance for each request. But sure we could change that as well.</pre>
</div><div class="bz_comment" id="c13">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c13">Comment 13</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:06:21 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c10">comment #10</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=737456#c5">comment #5</a>)
&gt; &gt; we probably should rate limit the screenshot requests to avoid that.
&gt; 
&gt; Yes. gnome-settings-daemon used to disable auto-repeat for all but a select few
&gt; keybindings (volume/brightness being the only ones I recall off-hand), we
&gt; should probably start doing the same.</span>

Restricting screenshots to one at a time makes sense to me, however we should still look into addressing the auto-repeat issue(*) - users can set up shortcuts for arbitrary commands(**), and we don't have a way to filter out the potentially expensive ones (opening 10 gimp instances or so) ...


(*)  not necessarily for 3.14.1 though
(**) at least those are disabled on the lock screen</pre>
</div><div class="bz_comment" id="c14">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c14">Comment 14</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:10:37 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c12">comment #12</a>)
<span class="quote">&gt; Well done it that way because ShellScreenshot is not a singleton and the shell
&gt; uses a new instance for each request. But sure we could change that as well.</span>

Oh, missed that - patch looks good to me then. Though maybe we want to do what we do for Screencasting, and limit screenshots to one per sender at any given time?</pre>
</div><div class="bz_comment" id="c15">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c15">Comment 15</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:25:23 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c13">comment #13</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=737456#c10">comment #10</a>)
&gt; &gt; (In reply to <a href="show_bug.cgi?id=737456#c5">comment #5</a>)
&gt; &gt; &gt; we probably should rate limit the screenshot requests to avoid that.
&gt; &gt; 
&gt; &gt; Yes. gnome-settings-daemon used to disable auto-repeat for all but a select few
&gt; &gt; keybindings (volume/brightness being the only ones I recall off-hand), we
&gt; &gt; should probably start doing the same.
&gt; 
&gt; Restricting screenshots to one at a time makes sense to me, however we should
&gt; still look into addressing the auto-repeat issue(*) - users can set up
&gt; shortcuts for arbitrary commands(**), and we don't have a way to filter out the
&gt; potentially expensive ones (opening 10 gimp instances or so) ...</span>

There are almost infinite ways for a user to screw himself when the session is active. So I am not too worried about this case (unless it can happen on accident). The look screen is a different story though because it supposed to provide some kind of "protection".</pre>
</div><div class="bz_comment" id="c16">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c16">Comment 16</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:30:57 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c15">comment #15</a>)
<span class="quote">&gt; So I am not too worried about this case (unless it can happen on
&gt; accident). The look screen is a different story though because it supposed to
&gt; provide some kind of "protection".</span>

I agree that the lock screen is different, in the session the issue becomes just a polish thing - repeating a shortcut action when the key is not released quickly enough is just wrong for 99.9% of all shortcuts.</pre>
</div><div class="bz_comment" id="c17">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c17">Comment 17</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:32:28 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c16">comment #16</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=737456#c15">comment #15</a>)
&gt; &gt; So I am not too worried about this case (unless it can happen on
&gt; &gt; accident). The look screen is a different story though because it supposed to
&gt; &gt; provide some kind of "protection".
&gt; 
&gt; I agree that the lock screen is different, in the session the issue becomes
&gt; just a polish thing - repeating a shortcut action when the key is not released
&gt; quickly enough is just wrong for 99.9% of all shortcuts.</span>

Oh yeah I don't  disagree with you. That comment meant to say "yes does not have to happen for 3.14.1".</pre>
</div><div class="bz_comment" id="c18">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c18">Comment 18</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:33:03 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c14">comment #14</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=737456#c12">comment #12</a>)
&gt; &gt; Well done it that way because ShellScreenshot is not a singleton and the shell
&gt; &gt; uses a new instance for each request. But sure we could change that as well.
&gt; 
&gt; Oh, missed that - patch looks good to me then. Though maybe we want to do what
&gt; we do for Screencasting, and limit screenshots to one per sender at any given
&gt; time?</span>

Yeah can do that. We should be consistent here.</pre>
</div><div class="bz_comment" id="c19">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c19">Comment 19</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 14:57:13 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=287251" name="attach_287251" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287251</a> <a href="attachment.cgi?id=287251&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287251">[review]</a>
shell-screenshot: Only allow one screenshot request at a time per sender

We currently allow infinite number of screenshot requests to be active at
the same time, which can "dos" the system and cause OOM.

So fail subsequent requests for the same sender when a screenshot operation
is already running.</pre>
</div><div class="bz_comment" id="c20">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c20">Comment 20</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Elad Alfassa</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-27 16:46:55 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c3">comment #3</a>)
<span class="quote">&gt; 2) has already been taken care of. It was #691987.
&gt; 
&gt; The issue is that for a short period of time, while gnome-shell is restarting,
&gt; we show the raw X windows.</span>

Yes, and for that short period of time those windows are not only shown (which is a bad enough privacy issue on it's own), but also accept input (which makes the already-bad issue even worse). Considering the fact that we can't never be 100% sure that the shell will never crash during the lock screen, it would be nice if you could hide those windows even if the shell crashes when the screen is locked.</pre>
</div><div class="bz_comment" id="c21">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c21">Comment 21</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-28 08:02:10 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=287270" name="attach_287270" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287270</a> <a href="attachment.cgi?id=287270&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287270">[review]</a>
shell-screenshot: Only allow one screenshot request at a time per sender

We currently allow infinite number of screenshot requests to be active at
the same time, which can "dos" the system and cause OOM.

So fail subsequent requests for the same sender when a screenshot operation
is already running.

---

Moved the screenshot_data stuff into ShellScreenshotPrivate</pre>
</div><div class="bz_comment" id="c22">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c22">Comment 22</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-29 14:56:40 UTC
        </span>
</div>
<pre class="bz_comment_text">One other hardening measure would be to forcefully terminate the entire user session if the gnome-shell exits abnormally while serving as the lockscreen.

I don't know exactly how to do this, though, or whether this usability/security tradeoff is acceptable to the GNOME project.</pre>
</div><div class="bz_comment" id="c23">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c23">Comment 23</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Elad Alfassa</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-29 15:11:42 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c22">comment #22</a>)
<span class="quote">&gt; One other hardening measure would be to forcefully terminate the entire user
&gt; session if the gnome-shell exits abnormally while serving as the lockscreen.
&gt; 
&gt; I don't know exactly how to do this, though, or whether this usability/security
&gt; tradeoff is acceptable to the GNOME project.</span>

I really rather if we didn't. Losing your work due to a shell crash would not be nice at all.

drago01 suggested a more interesting solution in <a href="show_bug.cgi?id=737456#c5">comment 5</a>, but I don't know how feasible it is. (would the shell be able to restore the windows if they were unmaped and then it crashed in the lock screen, for example?)</pre>
</div><div class="bz_comment" id="c24">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c24">Comment 24</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-29 16:30:45 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c23">comment #23</a>)
<span class="quote">&gt; I really rather if we didn't. Losing your work due to a shell crash would not
&gt; be nice at all.</span>

To be clear, i'm talking about terminating the session on gnome-shell abnormal failure *only* when when it's serving as the lockscreen.

A gnome-shell crash during a normal session shouldn't be affected.</pre>
</div><div class="bz_comment" id="c25">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c25">Comment 25</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-09-29 16:42:22 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c24">comment #24</a>)
<span class="quote">&gt; To be clear, i'm talking about terminating the session on gnome-shell abnormal
&gt; failure *only* when when it's serving as the lockscreen.</span>

Still, that would only change
  "expose open windows until the shell restarts"
to
  "expose open windows until the session is terminated"

There is nothing preventing users from locking the screen when they have unsaved work around, so there is indeed the potential to with users' data, for the little gain of making the window in which information is exposed a bit smaller.</pre>
</div><div class="bz_comment" id="c26">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c26">Comment 26</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-02 17:43:36 UTC
        </span>
</div>
<pre class="bz_comment_text">This is being discussed on oss-security for a possible CVE assignment:

 <a href="http://www.openwall.com/lists/oss-security/2014/09/29/17">http://www.openwall.com/lists/oss-security/2014/09/29/17</a>
 <a href="http://www.openwall.com/lists/oss-security/2014/10/02/35">http://www.openwall.com/lists/oss-security/2014/10/02/35</a>
 <a href="http://www.openwall.com/lists/oss-security/2014/10/02/38">http://www.openwall.com/lists/oss-security/2014/10/02/38</a></pre>
</div><div class="bz_comment" id="c27">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c27">Comment 27</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-02 22:35:50 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287270" name="attach_287270" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287270</a> <a href="attachment.cgi?id=287270&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287270">[review]</a>:

I can still DOS the shell :-(
Not sure that's due to the logic bug pointed out below, or whether we need to limit screenshots a bit more ...

::: js/ui/screenshot.js
@@ +72,3 @@
 
+    _ensureShooterForSender: function(sender) {
+        let shooter = this._screenShooter.get(sender);

I wonder if it'd be worth handling uniqueness also in JS (something like:

  _createScreenshot(invocation) {
    let sender = invocation.get_sender();
    if (this._shooters.has(sender) {
        invocation.return_value(...);
        return null;
    }
    shooter = ...;
    return shooter;
  };

  let screenshot = this._createShooter(invocation);
  if (!screenshot)
      return;

That would make it easier to limit screenshots further in the future if it turns out to be desirable (just do GLib.timeout_add(DEFAULT, 200, _removeShooter) in _onScreenshotComplete).

@@ +97,3 @@
+        this._screenShooter.delete(sender);
+
+        return true;

Unused return value (I know this is following the screencast code, but it's not unused there)

@@ +149,1 @@
         screenshot.screenshot_area (x, y, width, height, filename,

So this doesn't quite work:

 (1) call Screenshot
    -&gt; create object, start taking screenshot
 (2) call Screenshot
    -&gt; screenshot returns error, is removed from map
 (3) call Screenshot
    -&gt; create object, start taking 2nd screenshot
  ...

In other words, rather than limiting screenshots to one-per-sender, we just filter out every other invocation.

::: src/shell-screenshot.c
@@ +50,2 @@
 {
+  g_type_class_add_private (klass, sizeof (ShellScreenshotPrivate));

We could start using G_DEFINE_TYPE_WITH_PRIVATE

@@ +433,3 @@
+  ShellScreenshotPrivate *priv = screenshot-&gt;priv;
+
+  if (priv-&gt;is_running) {

Or maybe if (priv-&gt;filename != NULL) ?

@@ +535,3 @@
+  if (priv-&gt;is_running) {
+    if (callback)
+      callback (screenshot, FALSE, NULL, "");

So this is a bit weird: if we're already taking a screenshot, we return directly ...

@@ +539,3 @@
+  }
+
+  priv-&gt;filename = g_strdup (filename);

... otherwise we set up our data ...

@@ +546,3 @@
     {
+      priv-&gt;filename_used = g_strdup ("");
+      result = g_simple_async_result_new (G_OBJECT (screenshot), on_screenshot_written, NULL, shell_screenshot_screenshot_window);

... and do an early return (but going through on_screenshot_written this time, to free the data) in case there's no focus window.
Those should really use the same "if (priv-&gt;is_running || !window)" code path (I don't see why we should go through GAsyncResult here, but don't really mind either way)</pre>
</div><div class="bz_comment" id="c28">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c28">Comment 28</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-02 22:40:29 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c27">comment #27</a>)
<span class="quote">&gt; Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287270" name="attach_287270" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287270</a> <a href="attachment.cgi?id=287270&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287270">[review]</a>:
&gt; 
&gt; I can still DOS the shell :-(
&gt; Not sure that's due to the logic bug pointed out below, or whether we need to
&gt; limit screenshots a bit more ...</span>

From a quick test, this snippet appears to do the job for me:

--- a/js/ui/screenshot.js
+++ b/js/ui/screenshot.js
@@ -107,13 +107,14 @@ const ScreenshotService = new Lang.Class({
     },

     _onScreenshotComplete: function(obj, result, area, filenameUsed, flash, invocation) {
-        if (flash &amp;&amp; result) {
-            let flashspot = new Flashspot(area);
-            flashspot.fire();
+        if (result) {
+            if (flash) {
+                let flashspot = new Flashspot(area);
+                flashspot.fire();
+            }
+            this._removeShooterForSender(invocation.get_sender());
         }

-        this._removeShooterForSender(invocation.get_sender());
-
         let retval = GLib.Variant.new('(bs)', [result, filenameUsed]);
         invocation.return_value(retval);
     },</pre>
</div><div class="bz_comment" id="c29">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c29">Comment 29</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 08:29:36 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class="bz_obsolete"><a href="attachment.cgi?id=287647" name="attach_287647" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287647</a> <a href="attachment.cgi?id=287647&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287647">[review]</a>
shell-screenshot: Only allow one screenshot request at a time per sender

We currently allow infinite number of screenshot requests to be active at
the same time, which can "dos" the system and cause OOM.

So fail subsequent requests for the same sender when a screenshot operation
is already running.

---

Adressed review comments.</pre>
</div><div class="bz_comment" id="c30">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c30">Comment 30</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 09:55:50 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287647" name="attach_287647" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287647</a> <a href="attachment.cgi?id=287647&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287647">[review]</a>:

'needs-work' because some rebase broke it, the comments are really just nits

::: js/ui/screenshot.js
@@ +92,3 @@
+        }
+
+        return this. _ensureShooterForSender(sender);

The function is only called here, and the code now boils down to:

  if (!shooters.has(sender)) {
      s = shooters.get(sender);
      if (!s)
          s = new Screenshot();
  }

which is a bit silly. But more importantly, the sneaky whitespace breaks everything :-)

::: src/shell-screenshot.c
@@ +53,3 @@
 shell_screenshot_init (ShellScreenshot *screenshot)
 {
+  screenshot-&gt;priv = SHELL_SCREENSHOT_GET_PRIVATE (screenshot);

shell_screenshot_get_instance_private ()</pre>
</div><div class="bz_comment" id="c31">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c31">Comment 31</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 13:25:06 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=287671" name="attach_287671" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287671</a> <a href="attachment.cgi?id=287671&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287671">[review]</a>
shell-screenshot: Only allow one screenshot request at a time per sender

We currently allow infinite number of screenshot requests to be active at
the same time, which can "dos" the system and cause OOM.

So fail subsequent requests for the same sender when a screenshot operation
is already running.

---

&lt;drago01&gt; fmuellner: <a href="http://paste.fedoraproject.org/138866/34036314/">http://paste.fedoraproject.org/138866/34036314/</a> I have added another change
&lt;drago01&gt; fmuellner: currently when I try to "dos" I get screens of the flash so I changed it to wait for the flash to finish as well
&lt;drago01&gt; not sure if we want that but screenshooting the flash seems wrong</pre>
</div><div class="bz_comment" id="c32">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c32">Comment 32</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 14:14:39 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class=""><a href="attachment.cgi?id=287671" name="attach_287671" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287671</a> <a href="attachment.cgi?id=287671&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287671">[review]</a>:

(In reply to <a href="show_bug.cgi?id=737456#c31">comment #31</a>)
<span class="quote">&gt; &lt;drago01&gt; not sure if we want that but screenshooting the flash seems wrong</span>

Makes sense to me, but then you need to also call removeShooter() for "flash-less" screenshots ...

::: src/shell-screenshot.h
@@ +22,3 @@
 #define SHELL_IS_SCREENSHOT_CLASS(klass)   (G_TYPE_CHECK_CLASS_TYPE ((klass), SHELL_TYPE_SCREENSHOT))
 #define SHELL_SCREENSHOT_GET_CLASS(obj)    (G_TYPE_INSTANCE_GET_CLASS ((obj), SHELL_TYPE_SCREENSHOT, ShellScreenshotClass))
+#define SHELL_SCREENSHOT_GET_PRIVATE(obj)  (G_TYPE_INSTANCE_GET_PRIVATE ((obj), SHELL_TYPE_SCREENSHOT, ShellScreenshotPrivate))

Unused</pre>
</div><div class="bz_comment" id="c33">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c33">Comment 33</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 14:23:49 UTC
        </span>
</div>
<pre class="bz_comment_text">Comment on <span class=""><a href="attachment.cgi?id=287671" name="attach_287671" title="shell-screenshot: Only allow one screenshot request at a time per sender">attachment 287671</a> <a href="attachment.cgi?id=287671&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> <a href="review?bug=737456&amp;attachment=287671">[review]</a>
shell-screenshot: Only allow one screenshot request at a time per sender

<span class=""><a href="attachment.cgi?id=287671" name="attach_287671" title="shell-screenshot: Only allow one screenshot request at a time per sender">Attachment 287671</a> <a href="attachment.cgi?id=287671&amp;action=edit" title="shell-screenshot: Only allow one screenshot request at a time per sender">[details]</a></span> pushed as <a href="https://git.gnome.org/browse/gnome-shell/commit/?id=f02b007">f02b007</a> - shell-screenshot: Only allow one screenshot request at a time per sender

Pushed with the "flashless" case fixed and without the unused macro.</pre>
</div><div class="bz_comment" id="c34">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c34">Comment 34</a>
</span>
<span class="bz_comment_user">
<span class="vcard">drago01
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 15:21:22 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class="bz_obsolete"><a href="attachment.cgi?id=287237" name="attach_287237" title="Only allow screenshots in the user session">attachment 287237</a> <a href="attachment.cgi?id=287237&amp;action=edit" title="Only allow screenshots in the user session">[details]</a></span> <a href="review?bug=737456&amp;attachment=287237">[review]</a>:

We agreed on IRC that the best compromise here is to simply only allow screenshots to be saved to the clipboard while the screen is locked.
That way taking screenshots is not impossible but someone with access to the machine can't simply abuse it to fill the disk.</pre>
</div><div class="bz_comment" id="c35">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c35">Comment 35</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 16:35:31 UTC
        </span>
</div>
<pre class="bz_comment_text">Interesting, thanks for reporting back to those of us who weren't on IRC.

I just tested on my debian sid system, and it looks to me like the clipboard is normally cleared across screenlock/unlock.

i did: 
 * select some text with the mouse
 * copy it to the clipboard
 * paste it to convince myself that it was in the clipboard
 * wait for the screen to lock
 * unlock the screen
 * try to paste again: nothing is produced

I don't know where the clipboard is cleared -- at screenlock, or at unlock -- if it is cleared at unlock, the screenshotting to the clipboard won't work.

If it is cleared at lock, then this proposal means that an unauthenticated person can inject the screenshot into the clipboard during a screenlock, which seems a little weird.  Can an unauthenticated person inject anything else into the clipboard while the screen is locked?</pre>
</div><div class="bz_comment" id="c36">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c36">Comment 36</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 18:55:30 UTC
        </span>
</div>
<pre class="bz_comment_text">(In reply to <a href="show_bug.cgi?id=737456#c35">comment #35</a>)
<span class="quote">&gt; I just tested on my debian sid system, and it looks to me like the clipboard is
&gt; normally cleared across screenlock/unlock.
&gt; 
&gt; i did: 
&gt;  * select some text with the mouse
&gt;  * copy it to the clipboard
&gt;  * paste it to convince myself that it was in the clipboard
&gt;  * wait for the screen to lock
&gt;  * unlock the screen
&gt;  * try to paste again: nothing is produced</span>

Yes, the clipboard is cleared on lock. Otherwise the password entry can leak information by unmasking it (right-click -&gt; show text) and pasting the clipboard's content.


<span class="quote">&gt; If it is cleared at lock, then this proposal means that an unauthenticated
&gt; person can inject the screenshot into the clipboard during a screenlock, which
&gt; seems a little weird.</span>

Weird maybe, but is it actually harmful? This is of course not the reason to allow this, but there are legitimate use cases for taking screenshots in the lock screen (illustrating a bug, showing off a feature, ...). Those are not terribly important, but if the strongest arguments against them is that it's a little weird when used by someone else, I don't see why we should not account for them :-)



<span class="quote">&gt;  Can an unauthenticated person inject anything else into
&gt; the clipboard while the screen is locked?</span>

Yes. Hit Escape to reveal the password entry, right click and select "Show Text" - after that you can enter arbitrary text and copy it to the clipboard.</pre>
</div><div class="bz_comment" id="c37">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c37">Comment 37</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Daniel Kahn Gillmor</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-03 20:22:28 UTC
        </span>
</div>
<pre class="bz_comment_text">This is now CVE-2014-7300</pre>
</div><div class="bz_comment" id="c38">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c38">Comment 38</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-07 10:34:48 UTC
        </span>
</div>
<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=287941" name="attach_287941" title="media-keys: Disallow screenshots when locked">attachment 287941</a> <a href="attachment.cgi?id=287941&amp;action=edit" title="media-keys: Disallow screenshots when locked">[details]</a></span> <a href="review?bug=737456&amp;attachment=287941">[review]</a>
media-keys: Disallow screenshots when locked

Allowing random people to create files in the user's home folder
while the screen is locked is unexpected at best, so block the
corresponding shortcuts (while still allowing taking screenshots
to the clipboard for bug reports/reviews etc.).
While at it, adjust the shortcut for screencasts as well (though
the change their is purely informational, as screencasts are already
blocked by the shell while locked).</pre>
</div><div class="bz_comment" id="c39">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c39">Comment 39</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Rui Matos</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-07 11:15:39 UTC
        </span>
</div>
<pre class="bz_comment_text">Review of <span class=""><a href="attachment.cgi?id=287941" name="attach_287941" title="media-keys: Disallow screenshots when locked">attachment 287941</a> <a href="attachment.cgi?id=287941&amp;action=edit" title="media-keys: Disallow screenshots when locked">[details]</a></span> <a href="review?bug=737456&amp;attachment=287941">[review]</a>:

Looks fine to me</pre>
</div><div class="bz_comment" id="c40">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c40">Comment 40</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Florian Müllner</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-07 12:41:28 UTC
        </span>
</div>
<pre class="bz_comment_text"><span class=""><a href="attachment.cgi?id=287941" name="attach_287941" title="media-keys: Disallow screenshots when locked">Attachment 287941</a> <a href="attachment.cgi?id=287941&amp;action=edit" title="media-keys: Disallow screenshots when locked">[details]</a></span> pushed as <a href="https://git.gnome.org/browse/gnome-shell/commit/?id=e6e81ae">e6e81ae</a> - media-keys: Disallow screenshots when locked

Let's get this off the blocker list then ...</pre>
</div><div class="bz_comment" id="c41">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c41">Comment 41</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Peter</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2014-10-07 16:02:17 UTC
        </span>
</div>
<pre class="bz_comment_text">Hi.
Florian, you're right to entirely turn off this!

A lockscreen should allow only to authenticate as user a currently logged in user, to create a new session for a other user or or to properly shutdown the box, if no one is logged in. If the lockscreen allows to create screenshots and write data to the home-dir (or a subdir), this is a security issue.

If someone wants to create a screenshot of the lock-screen, you could use "fbgrab". Honestly, I recommend it because it offers some nice features e.g. specificy delay in seconds, device or console :-)</pre>
</div><div class="bz_comment" id="c42">
<div class="bz_comment_head">
<span class="bz_comment_number">
<a href="show_bug.cgi?id=737456#c42">Comment 42</a>
</span>
<span class="bz_comment_user">
<span class="vcard"><span class="fn">Bastien Nocera</span>
</span>
</span>
<span class="bz_comment_user_images">
</span>
<span class="bz_comment_time">
          2015-04-15 13:15:45 UTC
        </span>
</div>
<pre class="bz_comment_text">*** <a class="bz_bug_link bz_status_RESOLVED bz_closed" href="show_bug.cgi?id=699844" title="RESOLVED DUPLICATE - No throttling on screenshot repeat rate">Bug 699844</a> has been marked as a duplicate of this bug. ***</pre>
</div>
<script type="text/javascript">
  function traceparser_toggle_trace(link, trace_id) {
    var trace = document.getElementById('trace_' + trace_id);
    bz_toggleClass(trace, 'bz_default_hidden');
    if (link.innerHTML == '+') { link.innerHTML = '&mdash;'; }
    else { link.innerHTML = '+'; }
  }
</script>
</td>
<td>
</td>
</tr></table>
</div>
<hr/>
</form>
<hr/>

<br/>
</div>
<div id="footer">
<div class="intro"></div>
<ul id="useful-links">
<li id="links-actions"><ul class="links">
<li><a href="./">Home</a></li>
<li><span class="separator">| </span><span style="text-decoration:line-through"><a href="">New</a></span></li>
<li><span class="separator">| </span><a href="page.cgi?id=browse.html&amp;product=gnome-shell">Browse</a></li>
<li><span class="separator">| </span><a href="query.cgi">Search</a></li>
<li class="form">
<span class="separator">| </span>
<form action="buglist.cgi" method="get" onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
<input id="no_redirect_bottom" name="no_redirect" type="hidden" value="0"/>
<script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
<input class="txt" id="quicksearch_bottom" name="quicksearch" title="Quick Search" type="text" value=""/>
<input class="btn" id="find_bottom" type="submit" value="Search"/></form>
<a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>
<li><span class="separator">| </span><a href="page.cgi?id=reports.html">Reports</a></li>
<li>
<span class="separator">| </span>
<a href="http://www.bugzilla.org/docs/4.4/en/html/bug_page.html" target="_blank">Help</a>
</li>
<li id="mini_login_container_bottom">
<span class="separator">| </span>
<a href="show_bug.cgi?id=737456&amp;GoAheadAndLogIn=1" id="login_link_bottom" onclick="return show_mini_login_form('_bottom')">Log In</a>
<form action="show_bug.cgi?id=737456" class="mini_login bz_default_hidden" id="mini_login_bottom" method="POST" onsubmit="return check_mini_login_fields( '_bottom' );">
<input class="bz_login" id="Bugzilla_login_bottom" name="Bugzilla_login" onfocus="mini_login_on_focus('_bottom')" title="Login"/>
<input class="bz_password" id="Bugzilla_password_bottom" name="Bugzilla_password" title="Password" type="password"/>
<input class="bz_password bz_default_hidden bz_mini_login_help" id="Bugzilla_password_dummy_bottom" onfocus="mini_login_on_focus('_bottom')" title="Password" type="text" value="password"/>
<input checked="" class="bz_remember" id="Bugzilla_remember_bottom" name="Bugzilla_remember" type="checkbox" value="on"/>
<label for="Bugzilla_remember_bottom">Remember</label>
<input name="Bugzilla_login_token" type="hidden" value=""/>
<input id="log_in_bottom" name="GoAheadAndLogIn" type="submit" value="Log in"/>
<script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_bottom');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_bottom');
              }, 200);
          });
    }
    </script>
<a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
</form>
</li>
<li id="forgot_container_bottom">
<span class="separator">| </span>
<a href="show_bug.cgi?id=737456&amp;GoAheadAndLogIn=1#forgot" id="forgot_link_bottom" onclick="return show_forgot_form('_bottom')">Forgot Password</a>
<form action="token.cgi" class="mini_forgot bz_default_hidden" id="forgot_form_bottom" method="post">
<label for="login_bottom">Login:</label>
<input id="login_bottom" name="loginname" size="20" type="text"/>
<input id="forgot_button_bottom" type="submit" value="Reset Password"/>
<input name="a" type="hidden" value="reqpw"/>
<input id="token_bottom" name="token" type="hidden" value="1626120531-O8a3zg3mZjP6a34Vj2WqzU7_7rZYWtYs0-Ccbsr0Kys"/>
<a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
</form>
</li>
</ul>
</li>
</ul>
<div class="outro"></div>
</div>
</body>
</html>