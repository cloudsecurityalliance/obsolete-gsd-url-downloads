<!DOCTYPE html>
<html lang='en'>
<head>
<title>xorg/lib/libX11 - libX11 GIT Repository  (mirrored from https://gitlab.freedesktop.org/xorg/lib/libx11)</title>
<meta name='generator' content='cgit v1.2.1'/>
<meta name='robots' content='index, nofollow'/>
<link rel='stylesheet' type='text/css' href='https://cgit.freedesktop.org/cgit.css'/>
<link rel='shortcut icon' href='/favicon.ico'/>
<link rel='alternate' title='Atom feed' href='https://cgit.freedesktop.org/xorg/lib/libX11/atom/?h=master' type='application/atom+xml'/>
<link rel='vcs-git' href='https://gitlab.freedesktop.org/xorg/lib/libx11' title='xorg/lib/libX11 Git repository'/>
</head>
<body>
<div id='cgit'><table id='header'>
<tr>
<td class='logo' rowspan='2'><a href='/'><img src='https://cgit.freedesktop.org/logo.png' alt='cgit logo'/></a></td>
<td class='main'><a href='/'>index</a> : <a title='xorg/lib/libX11' href='/xorg/lib/libX11/'>xorg/lib/libX11</a></td><td class='form'><form method='get'>
<input type='hidden' name='id' value='dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'/><select name='h' onchange='this.form.submit();'>
<option value='CYGWIN'>CYGWIN</option>
<option value='IPv6-REVIEW'>IPv6-REVIEW</option>
<option value='XACE-SELINUX'>XACE-SELINUX</option>
<option value='XEVIE'>XEVIE</option>
<option value='XFree86'>XFree86</option>
<option value='XORG-6_8-branch'>XORG-6_8-branch</option>
<option value='XORG-CURRENT'>XORG-CURRENT</option>
<option value='XORG-RELEASE-1'>XORG-RELEASE-1</option>
<option value='XORG-RELEASE-1-STSF'>XORG-RELEASE-1-STSF</option>
<option value='XORG-RELEASE-1-TM'>XORG-RELEASE-1-TM</option>
<option value='XPRINT'>XPRINT</option>
<option value='lg3d'>lg3d</option>
<option value='lg3d-dev-0-6-1'>lg3d-dev-0-6-1</option>
<option value='lg3d-dev-0-6-1-1'>lg3d-dev-0-6-1-1</option>
<option value='lg3d-dev-0-6-1-current'>lg3d-dev-0-6-1-current</option>
<option value='lg3d-dev-0-6-1-latest'>lg3d-dev-0-6-1-latest</option>
<option value='lg3d-dev-0-7-0'>lg3d-dev-0-7-0</option>
<option value='lg3d-event'>lg3d-event</option>
<option value='libX11-1.1-branch'>libX11-1.1-branch</option>
<option value='libX11-1.2-branch'>libX11-1.2-branch</option>
<option value='libX11-1.3-branch'>libX11-1.3-branch</option>
<option value='master' selected='selected'>master</option>
<option value='sco_port_update'>sco_port_update</option>
<option value='stable'>stable</option>
<option value='xge'>xge</option>
</select> <input type='submit' value='switch'/></form></td></tr>
<tr><td class='sub'>libX11 GIT Repository  (mirrored from https://gitlab.freedesktop.org/xorg/lib/libx11)</td><td class='sub right'>keithp</td></tr></table>
<table class='tabs'><tr><td>
<a href='/xorg/lib/libX11/'>summary</a><a href='/xorg/lib/libX11/refs/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>refs</a><a href='/xorg/lib/libX11/log/'>log</a><a href='/xorg/lib/libX11/tree/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>tree</a><a class='active' href='/xorg/lib/libX11/commit/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>commit</a><a href='/xorg/lib/libX11/diff/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>diff</a></td><td class='form'><form class='right' method='get' action='/xorg/lib/libX11/log/'>
<input type='hidden' name='id' value='dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'/><select name='qt'>
<option value='grep'>log msg</option>
<option value='author'>author</option>
<option value='committer'>committer</option>
<option value='range'>range</option>
</select>
<input class='txt' type='search' size='10' name='q' value=''/>
<input type='submit' value='search'/>
</form>
</td></tr></table>
<div class='content'><div class='cgit-panel'><b>diff options</b><form method='get'><input type='hidden' name='id' value='dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'/><table><tr><td colspan='2'/></tr><tr><td class='label'>context:</td><td class='ctrl'><select name='context' onchange='this.form.submit();'><option value='1'>1</option><option value='2'>2</option><option value='3' selected='selected'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='15'>15</option><option value='20'>20</option><option value='25'>25</option><option value='30'>30</option><option value='35'>35</option><option value='40'>40</option></select></td></tr><tr><td class='label'>space:</td><td class='ctrl'><select name='ignorews' onchange='this.form.submit();'><option value='0' selected='selected'>include</option><option value='1'>ignore</option></select></td></tr><tr><td class='label'>mode:</td><td class='ctrl'><select name='dt' onchange='this.form.submit();'><option value='0' selected='selected'>unified</option><option value='1'>ssdiff</option><option value='2'>stat only</option></select></td></tr><tr><td/><td class='ctrl'><noscript><input type='submit' value='reload'/></noscript></td></tr></table></form></div><table summary='commit info' class='commit-info'>
<tr><th>author</th><td>Tobias Stoeckmann &lt;tobias@stoeckmann.org&gt;</td><td class='right'>2018-07-27 16:37:17 +0200</td></tr>
<tr><th>committer</th><td>Matthieu Herrb &lt;matthieu@herrb.eu&gt;</td><td class='right'>2018-08-21 16:43:06 +0200</td></tr>
<tr><th>commit</th><td colspan='2' class='sha1'><a href='/xorg/lib/libX11/commit/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>dbf72805fd9d7b1846fe9a11b46f3994bfc27fea</a> (<a href='/xorg/lib/libX11/patch/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>patch</a>)</td></tr>
<tr><th>tree</th><td colspan='2' class='sha1'><a href='/xorg/lib/libX11/tree/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>8dc343c70e94cca37b5f8d4d495d668176833f01</a></td></tr>
<tr><th>parent</th><td colspan='2' class='sha1'><a href='/xorg/lib/libX11/commit/?id=b469da1430cdcee06e31c6251b83aede072a1ff0'>b469da1430cdcee06e31c6251b83aede072a1ff0</a> (<a href='/xorg/lib/libX11/diff/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea&amp;id2=b469da1430cdcee06e31c6251b83aede072a1ff0'>diff</a>)</td></tr></table>
<div class='commit-subject'>Fixed out of boundary write (CVE-2018-14600).</div><div class='commit-msg'>The length value is interpreted as signed char on many systems
(depending on default signedness of char), which can lead to an out of
boundary write up to 128 bytes in front of the allocated storage, but
limited to NUL byte(s).

Casting the length value to unsigned char fixes the problem and allows
string values with up to 255 characters.

Signed-off-by: Tobias Stoeckmann &lt;tobias@stoeckmann.org&gt;
</div><div class='diffstat-header'><a href='/xorg/lib/libX11/diff/?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>Diffstat</a></div><table summary='diffstat' class='diffstat'><tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/xorg/lib/libX11/diff/src/GetFPath.c?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>src/GetFPath.c</a></td><td class='right'>4</td><td class='graph'><table summary='file diffstat' width='4%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
<tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/xorg/lib/libX11/diff/src/ListExt.c?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>src/ListExt.c</a></td><td class='right'>4</td><td class='graph'><table summary='file diffstat' width='4%'><tr><td class='add' style='width: 50.0%;'/><td class='rem' style='width: 50.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
</table><div class='diffstat-summary'>2 files changed, 4 insertions, 4 deletions</div><table summary='diff' class='diff'><tr><td><div class='head'>diff --git a/src/GetFPath.c b/src/GetFPath.c<br/>index 7ad21e9a..813757cc 100644<br/>--- a/<a href='/xorg/lib/libX11/tree/src/GetFPath.c?id=b469da1430cdcee06e31c6251b83aede072a1ff0'>src/GetFPath.c</a><br/>+++ b/<a href='/xorg/lib/libX11/tree/src/GetFPath.c?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>src/GetFPath.c</a></div><div class='hunk'>@@ -70,12 +70,12 @@ char **XGetFontPath(</div><div class='ctx'> 	     * unpack into null terminated strings.</div><div class='ctx'> 	     */</div><div class='ctx'> 	    chend = ch + nbytes;</div><div class='del'>-	    length = *ch;</div><div class='add'>+	    length = *(unsigned char *)ch;</div><div class='ctx'> 	    for (i = 0; i &lt; rep.nPaths; i++) {</div><div class='ctx'> 		if (ch + length &lt; chend) {</div><div class='ctx'> 		    flist[i] = ch+1;  /* skip over length */</div><div class='ctx'> 		    ch += length + 1; /* find next length ... */</div><div class='del'>-		    length = *ch;</div><div class='add'>+		    length = *(unsigned char *)ch;</div><div class='ctx'> 		    *ch = '\0'; /* and replace with null-termination */</div><div class='ctx'> 		    count++;</div><div class='ctx'> 		} else</div><div class='head'>diff --git a/src/ListExt.c b/src/ListExt.c<br/>index 8f344ac0..0498aa18 100644<br/>--- a/<a href='/xorg/lib/libX11/tree/src/ListExt.c?id=b469da1430cdcee06e31c6251b83aede072a1ff0'>src/ListExt.c</a><br/>+++ b/<a href='/xorg/lib/libX11/tree/src/ListExt.c?id=dbf72805fd9d7b1846fe9a11b46f3994bfc27fea'>src/ListExt.c</a></div><div class='hunk'>@@ -75,12 +75,12 @@ char **XListExtensions(</div><div class='ctx'> 	     * unpack into null terminated strings.</div><div class='ctx'> 	     */</div><div class='ctx'> 	    chend = ch + rlen;</div><div class='del'>-	    length = *ch;</div><div class='add'>+	    length = *(unsigned char *)ch;</div><div class='ctx'> 	    for (i = 0; i &lt; rep.nExtensions; i++) {</div><div class='ctx'> 		if (ch + length &lt; chend) {</div><div class='ctx'> 		    list[i] = ch+1;  /* skip over length */</div><div class='ctx'> 		    ch += length + 1; /* find next length ... */</div><div class='del'>-		    length = *ch;</div><div class='add'>+		    length = *(unsigned char *)ch;</div><div class='ctx'> 		    *ch = '\0'; /* and replace with null-termination */</div><div class='ctx'> 		    count++;</div><div class='ctx'> 		} else</div></td></tr></table></div> <!-- class=content -->
<div class='footer'>generated by <a href='https://git.zx2c4.com/cgit/about/'>cgit v1.2.1</a> (<a href='https://git-scm.com/'>git 2.18.0</a>) at 2021-10-30 22:00:17 +0000</div>
</div> <!-- id=cgit -->
</body>
</html>
