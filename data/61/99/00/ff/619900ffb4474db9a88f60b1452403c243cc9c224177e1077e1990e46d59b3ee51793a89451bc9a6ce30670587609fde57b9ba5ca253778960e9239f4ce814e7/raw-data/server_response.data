<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1246972 - (CVE-2016-5294) Arbitrary target directory for result files of update process">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1246972">
<meta property="og:description"
      content="VERIFIED (mhowell) in Toolkit - Application Update. Last updated 2019-08-15.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="--">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1246972 - (CVE-2016-5294) Arbitrary target directory for result files of update process</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1246972&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1246972">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1246972">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/yui.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/global.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/util.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox46\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox48\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox49\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr45\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox50\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox47\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_status_firefox_esr91\":\"---\",\"cf_status_firefox48\":\"wontfix\",\"cf_status_firefox51\":\"verified\",\"cf_tracking_firefox47\":\"+\",\"cf_status_firefox95\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_firefox47\":\"wontfix\",\"cf_tracking_firefox_esr45\":\"50+\",\"cf_tracking_firefox95\":\"---\",\"cf_tracking_firefox49\":\"+\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox49\":\"wontfix\",\"cf_tracking_firefox50\":\"+\",\"cf_status_firefox93\":\"---\",\"cf_tracking_firefox48\":\"+\",\"cf_status_firefox50\":\"verified\",\"cf_tracking_firefox93\":\"---\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_tracking_firefox46\":\"+\",\"cf_status_firefox94\":\"---\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox46\":\"wontfix\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_status_firefox_esr45\":\"verified\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_firefox94\":\"---\"},\"project\":{\"cf_a11y_review_project_flag\":\"---\",\"cf_install_update_workflow\":\"---\",\"cf_root_cause\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_fission_milestone\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1246972;
  BUGZILLA.bug_title = '1246972 - (CVE-2016-5294) Arbitrary target directory for result files of update process';
  BUGZILLA.bug_summary = 'Arbitrary target directory for result files of update process';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1246972';
  BUGZILLA.bug_keywords = 'csectype-priv-escalation, sec-high',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/field.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/comments.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1246972">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1246972"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1246972 - (CVE-2016-5294) Arbitrary target directory for result files of update process">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="yAxpVg7DbK5eq5wnctjcRAvDXsRyf1HPTebwe0g4udgMSW0XF8HK7LRHuy4Mibggowrm6K5WhnHuzq8i7lMhWfalQZzsCVLoi9t9tSq4Gx7pg10N7xKZ0I4JcbfEMyHoQ53qNiOQCGY0xwnBflRdo0n9iaieRQaHSCvHm9AMEPMzTQmcw0zQS0BHxxm91cCqML1P3os7FFuew5AQgkrdz1NhLSM1AQlzg7FC46Ya1INR5sTdqENQC0UM4i3rtZSM">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1246972" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635622914-kLK1bkZMQJadnZnauQ51mH12yVLmNwMloAtfRwqpt8k">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1246972" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1246972" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1246972">Bug 1246972</a>
          <span class="edit-hide">(CVE-2016-5294)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2016-02-09 08:45 PST" data-time="1455036320">6 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2016-08-29 17:47 PDT" data-time="1472518026">5 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">Arbitrary target directory for result files of update process</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            Arbitrary target directory for result files of update process

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Toolkit :: Application Update, defect)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Toolkit" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Toolkit
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Toolkit</div>
            <div class="description">The Mozilla Toolkit is a set of APIs, built on top of Gecko, which provide advanced services to XUL applications. These services include Profile Management, Chrome Registration, Browsing History, Extension and Theme Management, Application Update Service, and Safe Mode. (<a href="https://wiki.mozilla.org/Modules/Toolkit">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Toolkit&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Toolkit"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Toolkit"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Toolkit&component=Application%20Update#Application%20Update" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Application Update
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Toolkit :: Application Update</div>
            <div class="description">Application update for Firefox and Thunderbird.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Toolkit&amp;component=Application%20Update&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Toolkit&amp;component=Application%20Update&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Toolkit&amp;component=Application%20Update"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Toolkit" data-component="Application Update"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            unspecified

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">
          <em>Not set</em>
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr45&quot;:&quot;50+&quot;,&quot;cf_tracking_firefox49&quot;:&quot;+&quot;,&quot;cf_status_firefox49&quot;:&quot;wontfix&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox50&quot;:&quot;+&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox47&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox47&quot;:&quot;+&quot;,&quot;id&quot;:1246972,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_status_firefox51&quot;:&quot;verified&quot;,&quot;keywords&quot;:[&quot;csectype-priv-escalation&quot;,&quot;sec-high&quot;],&quot;status&quot;:&quot;VERIFIED&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox48&quot;:&quot;wontfix&quot;,&quot;cf_status_firefox_esr45&quot;:&quot;verified&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla51&quot;,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;dupe_of&quot;:null,&quot;flags&quot;:[{&quot;status&quot;:&quot;+&quot;,&quot;name&quot;:&quot;sec-bounty&quot;},{&quot;status&quot;:&quot;+&quot;,&quot;name&quot;:&quot;in-testsuite&quot;}],&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;priority&quot;:&quot;--&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_install_update_workflow&quot;:&quot;---&quot;,&quot;cf_status_firefox46&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_status_firefox50&quot;:&quot;verified&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox46&quot;:&quot;+&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox48&quot;:&quot;+&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla51

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Install Update Workflow</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_install_update_workflow-dirty">
  <select id="cf_install_update_workflow" name="cf_install_update_workflow">
        <option value="---"
          id="v4664_cf_install_update_workflow" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox46</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox46&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox47</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox48</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox48&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox49</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox49&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr45</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=50%2B">50+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox50</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox51</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox46</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox46-dirty">
  <select id="cf_tracking_firefox46" name="cf_tracking_firefox46">
        <option value="+"
          id="v2556_cf_tracking_firefox46" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox46-dirty">
  <select id="cf_status_firefox46" name="cf_status_firefox46">
        <option value="wontfix"
          id="v2563_cf_status_firefox46" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox47</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox47-dirty">
  <select id="cf_tracking_firefox47" name="cf_tracking_firefox47">
        <option value="+"
          id="v2603_cf_tracking_firefox47" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox47-dirty">
  <select id="cf_status_firefox47" name="cf_status_firefox47">
        <option value="wontfix"
          id="v2611_cf_status_firefox47" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox48</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox48-dirty">
  <select id="cf_tracking_firefox48" name="cf_tracking_firefox48">
        <option value="+"
          id="v2669_cf_tracking_firefox48" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox48-dirty">
  <select id="cf_status_firefox48" name="cf_status_firefox48">
        <option value="wontfix"
          id="v2677_cf_status_firefox48" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox49</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox49-dirty">
  <select id="cf_tracking_firefox49" name="cf_tracking_firefox49">
        <option value="+"
          id="v2778_cf_tracking_firefox49" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox49-dirty">
  <select id="cf_status_firefox49" name="cf_status_firefox49">
        <option value="wontfix"
          id="v2786_cf_status_firefox49" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr45</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr45-dirty">
  <select id="cf_tracking_firefox_esr45" name="cf_tracking_firefox_esr45">
        <option value="50+"
          id="v2694_cf_tracking_firefox_esr45" selected
        >50+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr45-dirty">
  <select id="cf_status_firefox_esr45" name="cf_status_firefox_esr45">
        <option value="verified"
          id="v2549_cf_status_firefox_esr45" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox50</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox50-dirty">
  <select id="cf_tracking_firefox50" name="cf_tracking_firefox50">
        <option value="+"
          id="v2833_cf_tracking_firefox50" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox50-dirty">
  <select id="cf_status_firefox50" name="cf_status_firefox50">
        <option value="verified"
          id="v2842_cf_status_firefox50" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox51</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox51-dirty">
  <select id="cf_status_firefox51" name="cf_status_firefox51">
        <option value="verified"
          id="v2911_cf_status_firefox51" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: hofusec, Assigned: mhowell)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_550257" ><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=550257" > <span class="fna">mhowell</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_436533" ><img src="https://secure.gravatar.com/avatar/270499a0d11a67b911327984af6ffe90?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=436533" > <span class="fna">hofusec</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_692168" ><img src="https://secure.gravatar.com/avatar/d727fb8d9edb9b1a5b541d7621cb3124?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=692168" > <span class="fna">Amir</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="12">12 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Replace requests are failing on Windows and falling back to normal updates"
   href="/show_bug.cgi?id=1362267">1362267</a>
      </div>
      <div class="bug-list">
        <span class="bug-type-label iconic" title="task"
              aria-label="task" data-type="task">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - gDestPath is unused in updater.cpp"
   href="/show_bug.cgi?id=1574080">1574080</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1246972&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1246972">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: csectype-priv-escalation, sec-high, Whiteboard: [post-critsmash-triage][adv-main50+][adv-esr45.5+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2016-5294

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-priv-escalation&amp;resolution=---">csectype-priv-escalation</a>, 
          <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[post-critsmash-triage][adv-main50+][adv-esr45.5+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a18666284_1689"
            class="rel-time-title activity-ref"
            title="5 years ago"
        data-time="1472575231"
      >sec-bounty</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag-1447671">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1447671-dirty">
      <select id="flag-1447671" name="flag-1447671"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
            <option value="+" selected>+</option>
      </select>
    </td>


  </tr>
          </tbody>
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_75935" ><a class="email " href="/user_profile?user_id=75935" > <span class="fna">RyanVM</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#c95"
            class="rel-time-title activity-ref"
            title="5 years ago"
        data-time="1473732181"
      >in-testsuite</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_75935" ><a class="email " href="/user_profile?user_id=75935" > <span class="fna">RyanVM</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag-1454359">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1454359-dirty">
      <select id="flag-1454359" name="flag-1454359"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" selected>+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (3 files, 14 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8717491">invalid.loc.poc.zip</a>
        </div>
        <div>
            <a href="#c0" class="attach-time activity-ref"><span class="rel-time" title="2016-02-09 08:45 PST" data-time="1455036320">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_436533" ><a class="email " href="/user_profile?user_id=436533" > <span class="fna">Holger Fuhrmannek</span></a>
</div></span>
        </div>
        <div class="attach-info">854 bytes,
          application/zip        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8717491&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8753043">Do update install directory registry check earlier and unconditionally</a>
        </div>
        <div>
            <a href="#c16" class="attach-time activity-ref"><span class="rel-time" title="2016-05-16 13:58 PDT" data-time="1463432286">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">3.57 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_141755" ><span class="fn">robert.strong.bugs</span>
</div>:
              <a href="#c18"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1463432310"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8753043&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8753043&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8753043">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8753902">Do update install directory registry check earlier and unconditionally</a>
        </div>
        <div>
            <a href="#c19" class="attach-time activity-ref"><span class="rel-time" title="2016-05-18 08:57 PDT" data-time="1463587073">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">3.63 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8753902&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8753902&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8753902">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8756101">Patch - Always require the update working directory to be within the installation path</a>
        </div>
        <div>
            <a href="#c24" class="attach-time activity-ref"><span class="rel-time" title="2016-05-24 22:52 PDT" data-time="1464155567">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">6.97 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8756101&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8756101&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8756101">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8756466">Always require the update working directory to be within the installation path</a>
        </div>
        <div>
            <a href="#c26" class="attach-time activity-ref"><span class="rel-time" title="2016-05-25 11:20 PDT" data-time="1464200415">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">7.05 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8756466&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8756466&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8756466">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8756599">Patch - Always require the update working directory to be within the installation path on Windows</a>
        </div>
        <div>
            <a href="#c28" class="attach-time activity-ref"><span class="rel-time" title="2016-05-25 15:51 PDT" data-time="1464216664">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">7.92 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8756599&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8756599&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8756599">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8757479">Patch - Always require the update working directory to be within the installation path on Windows</a>
        </div>
        <div>
            <a href="#c34" class="attach-time activity-ref"><span class="rel-time" title="2016-05-27 13:19 PDT" data-time="1464380375">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">7.94 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_141755" ><span class="fn">robert.strong.bugs</span>
</div>:
              <a href="#c39"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464712601"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8757479&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8757479&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8757479">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8761845">Patch</a>
        </div>
        <div>
            <a href="#c40" class="attach-time activity-ref"><span class="rel-time" title="2016-06-09 15:35 PDT" data-time="1465511753">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">10.92 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8761845&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8761845&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8761845">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8763991">Patch</a>
        </div>
        <div>
            <a href="#c42" class="attach-time activity-ref"><span class="rel-time" title="2016-06-21 11:19 PDT" data-time="1466533163">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">8.10 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_141755" ><span class="fn">robert.strong.bugs</span>
</div>:
              <a href="#c44"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1466533163"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8763991&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8763991&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8763991">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8772624">Patch</a>
        </div>
        <div>
            <a href="#c45" class="attach-time activity-ref"><span class="rel-time" title="2016-07-19 16:10 PDT" data-time="1468969856">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">40.49 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8772624&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8772624&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8772624">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8773858">Patch</a>
        </div>
        <div>
            <a href="#c48" class="attach-time activity-ref"><span class="rel-time" title="2016-07-22 10:09 PDT" data-time="1469207356">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">45.77 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_141755" ><span class="fn">robert.strong.bugs</span>
</div>:
              <a href="#c54"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1469207356"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8773858&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8773858&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8773858">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8777584">Patch</a>
        </div>
        <div>
            <a href="#c57" class="attach-time activity-ref"><span class="rel-time" title="2016-08-03 16:02 PDT" data-time="1470265339">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">45.88 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_141755" ><span class="fn">robert.strong.bugs</span>
</div>:
              <a href="#c64"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1470409301"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8777584&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8777584&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8777584">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8778458">Patch</a>
        </div>
        <div>
            <a href="#c67" class="attach-time activity-ref"><span class="rel-time" title="2016-08-05 14:08 PDT" data-time="1470431282">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">52.67 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_141755" ><span class="fn">robert.strong.bugs</span>
</div>:
              <a href="#c68"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1470431282"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8778458&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8778458&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8778458">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8784879">Patch</a>
        </div>
        <div>
            <a href="#c73" class="attach-time activity-ref"><span class="rel-time" title="2016-08-25 09:23 PDT" data-time="1472142185">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">53.27 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_550257" ><span class="fn">mhowell</span>
</div>:
              <a href="#c73"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1472142185"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#a17127976_280903"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1472146977"
            >
              approval-mozilla-aurora+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c75"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1472142684"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8784879&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8784879&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8784879">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8785392">Fixed Patch</a>
        </div>
        <div>
            <a href="#c83" class="attach-time activity-ref"><span class="rel-time" title="2016-08-26 10:31 PDT" data-time="1472232663">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">55.01 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_550257" ><span class="fn">mhowell</span>
</div>:
              <a href="#c83"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1472232663"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c92"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1472757327"
            >
              approval-mozilla-aurora+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#a17216207_280903"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1472232663"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8785392&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8785392&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8785392">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8790451">ESR45 Patch</a>
        </div>
        <div>
            <a href="#c94" class="attach-time activity-ref"><span class="rel-time" title="2016-09-12 14:33 PDT" data-time="1473716019">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">52.45 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_495955" ><span class="fn">Sylvestre</span>
</div>:
              <a href="#a21748237_495955"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1473716019"
            >
              approval-mozilla-esr45-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8790451&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8790451&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8790451">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8801906">ESR45 Patch Rebased</a>
        </div>
        <div>
            <a href="#c97" class="attach-time activity-ref"><span class="rel-time" title="2016-10-17 15:14 PDT" data-time="1476742445">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_550257" ><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div></span>
        </div>
        <div class="attach-info">54.82 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_495955" ><span class="fn">Sylvestre</span>
</div>:
              <a href="#a21748231_495955"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1476742445"
            >
              approval-mozilla-esr45+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8801906&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8801906&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8801906">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="kd1VIoaCt7ZszVs8QNqi9xrECitChq9eC95mV3E8rKRIjSgZ">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="11150698" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_436533" ><img src="https://secure.gravatar.com/avatar/270499a0d11a67b911327984af6ffe90?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_436533" ><a class="email " href="/user_profile?user_id=436533" > <span class="fna">Holger Fuhrmannek</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-09 08:45 PST" data-time="1455036320">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8717491"
         class="attachment"
         data-id="8717491" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="invalid.loc.poc.zip">
      <meta itemprop="contentSize" content="854">
      <meta itemprop="encodingFormat" content="application/zip">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8717491" itemprop="contentUrl">
        <span id="att-8717491-description" itemprop="description">invalid.loc.poc.zip</span></a>
        — <a href="attachment.cgi?id=8717491&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-0" data-comment-id="11150698">It's possible to choose an arbitrary target directory for result files of an update process. As in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary file manipulation through updater.exe (Privilege Escalation)"
   href="/show_bug.cgi?id=1177861">Bug 1177861</a> this leads to the possibility to change arbitrary files because for example extracted *.patch files from the .mar file are also placed in this directory.

I have tested the poc with win7 and ff 47 nightly installed to C:\Program Files (x86)\Nightly\:
To reproduce
- download poc and extract the files
- download <a rel="nofollow" href="http://releases.mozilla.org/pub/firefox/nightly/latest-mozilla-central/firefox-47.0a1.en-US.win32.complete.mar">http://releases.mozilla.org/pub/firefox/nightly/latest-mozilla-central/firefox-47.0a1.en-US.win32.complete.mar</a> and place the file to &lt;pocdir&gt;/updatework/update.mar 
- execute poc.rb
- a firefox directory will appear next to the poc.rb
As seen in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary file manipulation through updater.exe (Privilege Escalation)"
   href="/show_bug.cgi?id=1177861">Bug 1177861</a> a more advance poc can change arbitrary files through manipulating *.patch files and the use of junctions.</pre></div><div class="change-set" id="c1"><div class="comment" data-id="11150983" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" ><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" ><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-09 10:06 PST" data-time="1455041208">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="11150983">Rob, can you take a look at this and maybe suggest a security rating?</pre><div class="activity"><div class="change">Flags: needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c2"><div class="comment" data-id="11162076" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" ><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" ><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-12 10:48 PST" data-time="1455302894">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="11162076">This is similar to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - [Win] Privileged update processes writing to user writable locations can overwrite non-user writable locations using hard links"
   href="/show_bug.cgi?id=1171518">bug 1171518</a> and should receive the same rating.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="a268694_141755"><div class="change" id="aa268694_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a268694_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a268694_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a268694_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a268694_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a268694_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-12 11:23 PST" data-time="1455305014">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: nobody &rarr; robert.strong.bugs</div><div class="change">Status: UNCONFIRMED &rarr; ASSIGNED</div><div class="change">Ever confirmed: true</div></div></div><div class="change-set" id="a287082_280903"><div class="change" id="aa287082_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a287082_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a287082_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a287082_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a287082_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a287082_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-02-12 16:30 PST" data-time="1455323402">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a></div></div></div><div class="change-set" id="c3"><div class="comment" data-id="11271724" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a287082_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a287082_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-23 10:27 PDT" data-time="1458754043">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="11271724">Tracking for 46+ since this is sec-high and seems to affect all branches.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=isnotempty">status-firefox46</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=isnotempty">status-firefox48</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox46&amp;o1=isnotempty">tracking-firefox46</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox46&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=isnotempty">tracking-firefox47</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox48&amp;o1=isnotempty">tracking-firefox48</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox48&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="c4"><div class="comment" data-id="11311764" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a287082_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a287082_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-08 11:36 PDT" data-time="1460140580">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="11311764">We are heading into beta 10 on Monday, we could potentially still take a patch for 46 beta. We might want to coordinate extra testing with QE for when we do land a fix.</pre></div><div class="change-set" id="c5"><div class="comment" data-id="11311773" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a287082_280903"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a287082_280903"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-08 11:38 PDT" data-time="1460140716">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="11311773">The fix for this is likely going to be too complex to try to push for 46</pre></div><div class="change-set" id="c6"><div class="comment" data-id="11321215" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a287082_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a287082_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-12 18:23 PDT" data-time="1460510616">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="11321215">OK, thanks Robert.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=isnotempty">status-firefox46</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=wontfix">wontfix</a></div></div></div><div class="change-set" id="c7"><div class="comment" data-id="11401669" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a287082_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a287082_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-11 14:13 PDT" data-time="1463001183">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="11401669">Any progress?  Wontfix this for beta 47 at this point.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=isnotempty">status-firefox49</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox49&amp;o1=isnotempty">tracking-firefox49</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox49&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">Flags: needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c8"><div class="comment" data-id="11401680" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a287082_280903"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a287082_280903"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-11 14:18 PDT" data-time="1463001539">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="11401680">No progress at this time.

Matt, could you take a look at this?</pre><div class="activity"><div class="change">Assignee: robert.strong.bugs &rarr; nobody</div><div class="change">Status: ASSIGNED &rarr; NEW</div><div class="change">Flags: needinfo?(robert.strong.bugs) &rarr; needinfo?(mhowell)</div></div></div><div class="change-set" id="c9"><div class="comment" data-id="11404542" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a287082_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a287082_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-12 10:20 PDT" data-time="1463073631">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="11404542">The only way I can see of fixing this bug directly seems risky, so I'll offer that and another solution. rstrong, I'd like to get your feedback on these:
1) Fix the bug directly by only allowing updates to be applied to known application installation paths. To avoid spoofing, the list of known paths would have to be stored in a high-privilege location, such as in the registry at machine-level or a file in the maintenance service installation directory. Each new installation of an application would have to update this list, or it could not be updated using the service.
This seems high-risk to me, but it's the most direct fix to this bug.
2) Prevent this bug from being exploited with very much control by preventing editing of the update manifest, either by locking the file or by extracting it to RAM instead of a file. This way an attacker cannot control the specific operations the updater executes, but can still cause normal update actions to be taken in arbitrary locations, which could still be dangerous in theory.</pre><div class="activity"><div class="change">Flags: needinfo?(mhowell) &rarr; needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c10"><div class="comment" data-id="11406394" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a287082_280903"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a287082_280903"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 01:38 PDT" data-time="1463128697">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="11406394">For 1 are you referring to just maintenance service updates? If so, we already have this information in the registry under HKLM. Why do you think it is high risk?</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="a8092471_141755"><div class="change" id="aa8092471_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8092471_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a8092471_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8092471_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8092471_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a8092471_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 01:39 PDT" data-time="1463128791">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c11"><div class="comment" data-id="11407238" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8092471_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8092471_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 07:28 PDT" data-time="1463149735">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="11407238">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c10">comment #10</a>)
<span class="quote">&gt; For 1 are you referring to just maintenance service updates? If so, we
&gt; already have this information in the registry under HKLM. Why do you think
&gt; it is high risk?</span >

No, sorry, I meant application updates running via the service.</pre><div class="activity"><div class="change">Flags: needinfo?(mhowell) &rarr; needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c12"><div class="comment" data-id="11408310" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8092471_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a8092471_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 13:27 PDT" data-time="1463171243">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="11408310">Sorry, I meant application updates via the service as well.

We already have this info under HKLM in Software\Mozilla\MaintenanceService in the form of a hash of the path to the install directory. So, when updating using the service would getting the hash for the install directory and verifying that it exists in this location be sufficient for this bug?</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="a8134937_141755"><div class="change" id="aa8134937_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8134937_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a8134937_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8134937_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8134937_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a8134937_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 13:27 PDT" data-time="1463171257">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c13"><div class="comment" data-id="11408363" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8134937_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8134937_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 13:47 PDT" data-time="1463172431">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="11408363">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c12">comment #12</a>)
<span class="quote">&gt; We already have this info under HKLM in Software\Mozilla\MaintenanceService
&gt; in the form of a hash of the path to the install directory.</span >

... I forgot all about those. That is exactly what we need.

<span class="quote">&gt; So, when updating using the service would getting the hash for the install
&gt; directory and verifying that it exists in this location be sufficient for this bug?</span >

Yep, I'll do that.</pre><div class="activity"><div class="change">Assignee: nobody &rarr; mhowell</div><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div></div></div><div class="change-set" id="c14"><div class="comment" data-id="11408366" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8134937_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a8134937_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 13:49 PDT" data-time="1463172565">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="11408366">FYI: I *think* we already do check but it might fallback to allowing cases where it doesn't exist or it might not happen early enough.</pre></div><div class="change-set" id="c15"><div class="comment" data-id="11412486" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8134937_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8134937_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-16 13:57 PDT" data-time="1463432235">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="11412486">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c14">comment #14</a>)
<span class="quote">&gt; FYI: I *think* we already do check but it might fallback to allowing cases
&gt; where it doesn't exist or it might not happen early enough.</span >

You're right, but it works out that the existing check is skipped if we can successfully write a lock file into the install dir, so any exploit satisfying that condition can get past the check. I'm going to try moving it to a much earlier spot and making it unconditional.</pre></div><div class="change-set" id="c16"><div class="comment" data-id="11412489" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8134937_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8134937_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-16 13:58 PDT" data-time="1463432286">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8753043"
         class="attachment patch obsolete"
         data-id="8753043" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="297507">
      <meta itemprop="contentSize" content="3660">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8753043">
          <a class="link" href="attachment.cgi?id=8753043&amp;action=diff">
        <span id="att-8753043-description" itemprop="description">Do update install directory registry check earlier and unconditionally</span></a> (obsolete)
        — <a href="attachment.cgi?id=8753043&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8753043">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-16" data-comment-id="11412489">MozReview-Commit-ID: FR44f4b5KbI</pre></div><div class="change-set" id="a8395990_550257"><div class="change" id="aa8395990_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8395990_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a8395990_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8395990_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8395990_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a8395990_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-16 13:58 PDT" data-time="1463432310">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753043&amp;action=edit"
           title="Do update install directory registry check earlier and unconditionally"
           class=""
        >Attachment #8753043</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c17"><div class="comment" data-id="11412496" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8395990_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8395990_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-16 14:01 PDT" data-time="1463432461">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="11412496"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=18dd63221a07">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=18dd63221a07</a></pre></div><div class="change-set" id="c18"><div class="comment" data-id="11417085" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8395990_550257"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a8395990_550257"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-17 19:18 PDT" data-time="1463537926">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="11417085">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8753043" name="attach_8753043" title="Do update install directory registry check earlier and unconditionally">attachment 8753043</a> <a href="/attachment.cgi?id=8753043&amp;action=edit" title="Do update install directory registry check earlier and unconditionally">[details]</a> <a href="/attachment.cgi?id=8753043&amp;action=diff" title="Do update install directory registry check earlier and unconditionally">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8753043'>[review]</a>
Do update install directory registry check earlier and unconditionally

I thought this was only going to be for the case where the service is used per <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c11">comment #11</a>.

We support updating without the service as well as well as installing without admin prvis and the removal of the useService will break updating for both of those cases.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753043&amp;action=edit"
           title="Do update install directory registry check earlier and unconditionally"
           class=""
        >Attachment #8753043</a> -
        Flags: review?(robert.strong.bugs) &rarr; review-</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="11418881" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8395990_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8395990_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-18 08:57 PDT" data-time="1463587073">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8753902"
         class="attachment patch obsolete"
         data-id="8753902" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="297738">
      <meta itemprop="contentSize" content="3718">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8753902">
          <a class="link" href="attachment.cgi?id=8753902&amp;action=diff">
        <span id="att-8753902-description" itemprop="description">Do update install directory registry check earlier and unconditionally</span></a> (obsolete)
        — <a href="attachment.cgi?id=8753902&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8753902">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-19" data-comment-id="11418881">MozReview-Commit-ID: FR44f4b5KbI</pre></div><div class="change-set" id="a8550785_550257"><div class="change" id="aa8550785_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550785_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a8550785_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8550785_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8550785_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a8550785_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-18 08:58 PDT" data-time="1463587105">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753043&amp;action=edit"
           title="Do update install directory registry check earlier and unconditionally"
           class=""
        >Attachment #8753043</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="a8550934_550257"><div class="change" id="aa8550934_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550934_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a8550934_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a8550934_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a8550934_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a8550934_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-18 09:00 PDT" data-time="1463587254">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753902&amp;action=edit"
           title="Do update install directory registry check earlier and unconditionally"
           class=""
        >Attachment #8753902</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c20"><div class="comment" data-id="11418920" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550934_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8550934_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-18 09:01 PDT" data-time="1463587311">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="11418920"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=ed5cdf7a1f6d">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=ed5cdf7a1f6d</a></pre></div><div class="change-set" id="c21"><div class="comment" data-id="11421423" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8550934_550257"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a8550934_550257"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-19 01:19 PDT" data-time="1463645988">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="11421423">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8753902" name="attach_8753902" title="Do update install directory registry check earlier and unconditionally">attachment 8753902</a> <a href="/attachment.cgi?id=8753902&amp;action=edit" title="Do update install directory registry check earlier and unconditionally">[details]</a> <a href="/attachment.cgi?id=8753902&amp;action=diff" title="Do update install directory registry check earlier and unconditionally">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8753902'>[review]</a>
Do update install directory registry check earlier and unconditionally

When the key for the directory doesn't exist it should fallback to the non service update path by setting useService to false and sets the error in update.status. With this patch the status isn't updated and it doesn't fallback to the non service update. Does this bug also affect non service updates? Could you provide me with more detail?

Please fix the typo on the last line of this patch
s/comamnd/command/</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753902&amp;action=edit"
           title="Do update install directory registry check earlier and unconditionally"
           class=""
        >Attachment #8753902</a> -
        Flags: <span class="activity-deleted">review?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="c22"><div class="comment" data-id="11431629" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550934_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8550934_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 22:41 PDT" data-time="1464068474">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="11431629">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8753902" name="attach_8753902" title="Do update install directory registry check earlier and unconditionally">attachment 8753902</a> <a href="/attachment.cgi?id=8753902&amp;action=edit" title="Do update install directory registry check earlier and unconditionally">[details]</a> <a href="/attachment.cgi?id=8753902&amp;action=diff" title="Do update install directory registry check earlier and unconditionally">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8753902'>[review]</a>
Do update install directory registry check earlier and unconditionally

Obsoleting this patch because I completely misinterpreted the bug.

The problem isn't the install directory, the service already has protections for that. The problem is the working directory. For staged updates, we require that it's a child of the install directory, but otherwise there are no restrictions on it at all. That's how the updater can be made to perform file operations in arbitrary locations.
rstrong, what would you think about extending the requirement for the working directory to be a child of the install directory from just staged updates to all updates? I tried it and it made some of the tests quite angry with me, but I feel like that's just because they don't know to expect it.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753902&amp;action=edit"
           title="Do update install directory registry check earlier and unconditionally"
           class=""
        >Attachment #8753902</a> -
        Attachment is obsolete: true</div><div class="change">Flags: needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="11431697" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a8550934_550257"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a8550934_550257"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 23:06 PDT" data-time="1464070000">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="11431697">I think that should work. If you have a patch in progress that you can attach I can run the tests locally to get a better idea and to see what is going on with the tests.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="c24"><div class="comment" data-id="11435408" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550934_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8550934_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 22:52 PDT" data-time="1464155567">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8756101"
         class="attachment patch obsolete"
         data-id="8756101" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="7138">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8756101">
          <a class="link" href="attachment.cgi?id=8756101&amp;action=diff">
        <span id="att-8756101-description" itemprop="description">Patch - Always require the update working directory to be within the installation path</span></a> (obsolete)
        — <a href="attachment.cgi?id=8756101&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8756101">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-24" data-comment-id="11435408">This patch could probably use some polish, but it's ready to throw at try.</pre></div><div class="change-set" id="c25"><div class="comment" data-id="11435422" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550934_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8550934_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 22:55 PDT" data-time="1464155703">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="11435422"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=acca8834c9cc">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=acca8834c9cc</a></pre></div><div class="change-set" id="c26"><div class="comment" data-id="11438229" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a8550934_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a8550934_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 11:20 PDT" data-time="1464200415">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8756466"
         class="attachment patch obsolete"
         data-id="8756466" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="336989">
      <meta itemprop="contentSize" content="7224">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8756466">
          <a class="link" href="attachment.cgi?id=8756466&amp;action=diff">
        <span id="att-8756466-description" itemprop="description">Always require the update working directory to be within the installation path</span></a> (obsolete)
        — <a href="attachment.cgi?id=8756466&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8756466">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-26" data-comment-id="11438229">MozReview-Commit-ID: ASxfV4uVpmD</pre></div><div class="change-set" id="a9164115_550257"><div class="change" id="aa9164115_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9164115_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a9164115_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9164115_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9164115_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a9164115_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 11:20 PDT" data-time="1464200435">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756101&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path"
           class=""
        >Attachment #8756101</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c27"><div class="comment" data-id="11438238" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9164115_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9164115_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 11:22 PDT" data-time="1464200557">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="11438238"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=40a236d9190c">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=40a236d9190c</a></pre></div><div class="change-set" id="c28"><div class="comment" data-id="11439145" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9164115_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9164115_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 15:51 PDT" data-time="1464216664">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8756599"
         class="attachment patch obsolete"
         data-id="8756599" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="8105">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8756599">
          <a class="link" href="attachment.cgi?id=8756599&amp;action=diff">
        <span id="att-8756599-description" itemprop="description">Patch - Always require the update working directory to be within the installation path on Windows</span></a> (obsolete)
        — <a href="attachment.cgi?id=8756599&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8756599">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-28" data-comment-id="11439145">Hopefully this resolves the remaining try failures, and doesn't create more. It's difficult for me to test the MOZ_VERIFY_MAR_SIGNATURE paths locally.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756466&amp;action=edit"
           title="Always require the update working directory to be within the installation path"
           class=""
        >Attachment #8756466</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c29"><div class="comment" data-id="11439148" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9164115_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9164115_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 15:52 PDT" data-time="1464216723">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="11439148"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=8e94bcd63849">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=8e94bcd63849</a></pre></div><div class="change-set" id="c30"><div class="comment" data-id="11441300" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9164115_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9164115_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-26 09:21 PDT" data-time="1464279718">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="11441300">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8756599" name="attach_8756599" title="Patch - Always require the update working directory to be within the installation path on Windows">attachment 8756599</a> <a href="/attachment.cgi?id=8756599&amp;action=edit" title="Patch - Always require the update working directory to be within the installation path on Windows">[details]</a> <a href="/attachment.cgi?id=8756599&amp;action=diff" title="Patch - Always require the update working directory to be within the installation path on Windows">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8756599'>[review]</a>
Patch - Always require the update working directory to be within the installation path on Windows

The Mac Mochitest failures in that try run appear locally with or without this patch, so I'm calling it clean and requesting review.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756599&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8756599</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="11441356" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a9164115_550257"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a9164115_550257"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-26 09:34 PDT" data-time="1464280465">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="11441356">The Mac mochitest failures are succeeding on the build system without your patch... right?</pre><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="11441521" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a9164115_550257"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a9164115_550257"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-26 10:18 PDT" data-time="1464283137">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="11441521">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8756599" name="attach_8756599" title="Patch - Always require the update working directory to be within the installation path on Windows">attachment 8756599</a> <a href="/attachment.cgi?id=8756599&amp;action=edit" title="Patch - Always require the update working directory to be within the installation path on Windows">[details]</a> <a href="/attachment.cgi?id=8756599&amp;action=diff" title="Patch - Always require the update working directory to be within the installation path on Windows">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8756599'>[review]</a>
Patch - Always require the update working directory to be within the installation path on Windows

Cancelling review until the Mac mochitest failures are understood.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756599&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8756599</a> -
        Flags: <span class="activity-deleted">review?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="c33"><div class="comment" data-id="11441525" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a9164115_550257"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a9164115_550257"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-26 10:19 PDT" data-time="1464283166">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="11441525">Talked with Mat over irc regarding the failures he is seeing locally.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div></div></div><div class="change-set" id="a9253957_550257"><div class="change" id="aa9253957_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9253957_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a9253957_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9253957_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9253957_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a9253957_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-26 12:17 PDT" data-time="1464290277">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756599&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8756599</a> -
        Attachment description: Patch - Always require the update working directory to be within the installation path on Windowsbug1246972.diff &rarr; Patch - Always require the update working directory to be within the installation path on Windows</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="11445356" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9253957_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9253957_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-27 13:19 PDT" data-time="1464380375">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8757479"
         class="attachment patch obsolete"
         data-id="8757479" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="8135">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8757479">
          <a class="link" href="attachment.cgi?id=8757479&amp;action=diff">
        <span id="att-8757479-description" itemprop="description">Patch - Always require the update working directory to be within the installation path on Windows</span></a> (obsolete)
        — <a href="attachment.cgi?id=8757479&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8757479">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-34" data-comment-id="11445356">Wasn't able to really track down those Mac failures, so this is kind of a stab in the dark. New try push incoming.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756599&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8756599</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c35"><div class="comment" data-id="11445357" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9253957_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9253957_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-27 13:20 PDT" data-time="1464380406">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="11445357"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=f037546a798b">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=f037546a798b</a></pre></div><div class="change-set" id="c36"><div class="comment" data-id="11451652" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9253957_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9253957_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-31 09:36 PDT" data-time="1464712601">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="11451652">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8757479" name="attach_8757479" title="Patch - Always require the update working directory to be within the installation path on Windows">attachment 8757479</a> <a href="/attachment.cgi?id=8757479&amp;action=edit" title="Patch - Always require the update working directory to be within the installation path on Windows">[details]</a> <a href="/attachment.cgi?id=8757479&amp;action=diff" title="Patch - Always require the update working directory to be within the installation path on Windows">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8757479'>[review]</a>
Patch - Always require the update working directory to be within the installation path on Windows

Whoa it's finally green.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8757479&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8757479</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="11456212" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9253957_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9253957_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-01 14:36 PDT" data-time="1464816965">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-37" data-comment-id="11456212"><a rel="nofollow" href="https://hg.mozilla.org/projects/oak/rev/f38999684d8c02dba1befd26a8d9f0d6056ef928">https://hg.mozilla.org/projects/oak/rev/f38999684d8c02dba1befd26a8d9f0d6056ef928</a>
<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972">Bug 1246972</a> - Always require the update working directory to be within the installation path; r?rstrong</pre></div><div class="change-set" id="c38"><div class="comment" data-id="11461785" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a9253957_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a9253957_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-03 08:34 PDT" data-time="1464968053">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="11461785">Using the builds from oak, I've manually tested updating from a build with this patch using all combinations of the following states: maintenance service enabled or disabled, staged updates enabled or disabled, and install location in Program Files or inside the user profile. That makes for 8 test cases, and all of them successfully updated using the expected flow.</pre></div><div class="change-set" id="a10371642_451704"><div class="change" id="aa10371642_451704">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_451704" id="a10371642_451704"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a10371642_451704"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a10371642_451704">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a10371642_451704">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-08 10:46 PDT" data-time="1465407962">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=isnotempty">status-firefox50</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=isnotempty">tracking-firefox50</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="c39"><div class="comment" data-id="11474786" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a10371642_451704"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a10371642_451704"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-08 23:38 PDT" data-time="1465454310">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-39" data-comment-id="11474786">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8757479" name="attach_8757479" title="Patch - Always require the update working directory to be within the installation path on Windows">attachment 8757479</a> <a href="/attachment.cgi?id=8757479&amp;action=edit" title="Patch - Always require the update working directory to be within the installation path on Windows">[details]</a> <a href="/attachment.cgi?id=8757479&amp;action=diff" title="Patch - Always require the update working directory to be within the installation path on Windows">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8757479'>[review]</a>
Patch - Always require the update working directory to be within the installation path on Windows

<span class="quote">&gt;diff --git a/toolkit/mozapps/update/updater/updater.cpp b/toolkit/mozapps/update/updater/updater.cpp
&gt;--- a/toolkit/mozapps/update/updater/updater.cpp
&gt;+++ b/toolkit/mozapps/update/updater/updater.cpp
&gt;&#64;&#64; -386,31 +386,19 &#64;&#64; EnvHasValue(const char *name)
&gt;  *
&gt;  * &#64;param  relpath
&gt;  *         The relative path to convert to a full path.
&gt;  * &#64;return valid filesystem full path or nullptr if memory allocation fails.
&gt;  */
&gt; static NS_tchar*
&gt; get_full_path(const NS_tchar *relpath)
&gt; {
&gt;-  size_t lendestpath = NS_tstrlen(gDestPath);
&gt;-  size_t lenrelpath = NS_tstrlen(relpath);
&gt;-  NS_tchar *s = (NS_tchar *) malloc((lendestpath + lenrelpath + 1) * sizeof(NS_tchar));
&gt;-  if (!s)
&gt;-    return nullptr;
&gt;-
&gt;-  NS_tchar *c = s;
&gt;-
&gt;-  NS_tstrcpy(c, gDestPath);
&gt;-  c += lendestpath;
&gt;-  NS_tstrcat(c, relpath);
&gt;-  c += lenrelpath;
&gt;-  *c = NS_T('\0');
&gt;-  c++;
&gt;-  return s;
&gt;+  NS_tchar *fullPath = (NS_tchar *)malloc((MAX_PATH + 1) * sizeof(NS_tchar));
&gt;+  GetFullPathName(relpath, MAX_PATH, fullPath, nullptr);
&gt;+  return fullPath;</span >
Per our previous conversation I'd prefer not using GetFullPathName.

<span class="quote">&gt;&#64;&#64; -2452,17 +2440,21 &#64;&#64; UpdateThreadFunc(void *param)
&gt;         NS_tchar updateSettingsPath[MAX_TEXT_LEN];
&gt;         NS_tsnprintf(updateSettingsPath,
&gt;                      sizeof(updateSettingsPath) / sizeof(updateSettingsPath[0]),
&gt; #ifdef XP_MACOSX
&gt;                      NS_T(&quot;%s/Contents/Resources/update-settings.ini&quot;),
&gt; #else
&gt;                      NS_T(&quot;%s/update-settings.ini&quot;),
&gt; #endif
&gt;+#ifdef XP_WIN
&gt;+                     gInstallDirPath);</span >
Does this really have to be Windows only? If not, I'd prefer it to be consistent across platforms.

<span class="quote">&gt;+#else
&gt;                      gWorkingDirPath);
&gt;+#endif
&gt;         MARChannelStringTable MARStrings;
&gt;         if (ReadMARChannelIDs(updateSettingsPath, &amp;MARStrings) != OK) {
&gt;           // If we can't read from update-settings.ini then we shouldn't impose
&gt;           // a MAR restriction.  Some installations won't even include this file.
&gt;           MARStrings.MARChannelID[0] = '\0';
&gt;         }
&gt; 
&gt;         rv = gArchiveReader.VerifyProductInformation(MARStrings.MARChannelID,
&gt;&#64;&#64; -2831,34 +2823,32 &#64;&#64; int NS_main(int argc, NS_tchar **argv)
&gt;     LOG((&quot;Performing a replace request&quot;));
&gt;   }
&gt; 
&gt;   LOG((&quot;PATCH DIRECTORY &quot; LOG_S, gPatchDirPath));
&gt;   LOG((&quot;INSTALLATION DIRECTORY &quot; LOG_S, gInstallDirPath));
&gt;   LOG((&quot;WORKING DIRECTORY &quot; LOG_S, gWorkingDirPath));
&gt; 
&gt; #if defined(XP_WIN)
&gt;-  if (sReplaceRequest || sStagedUpdate) {
&gt;-    NS_tchar stagedParent[MAX_PATH];
&gt;-    NS_tsnprintf(stagedParent, sizeof(stagedParent)/sizeof(stagedParent[0]),
&gt;-                 NS_T(&quot;%s&quot;), gWorkingDirPath);
&gt;-    if (!PathRemoveFileSpecW(stagedParent)) {
&gt;-      WriteStatusFile(REMOVE_FILE_SPEC_ERROR);
&gt;-      LOG((&quot;Error calling PathRemoveFileSpecW: %d&quot;, GetLastError()));
&gt;-      LogFinish();
&gt;-      return 1;
&gt;-    }
&gt;-
&gt;-    if (_wcsnicmp(stagedParent, gInstallDirPath, MAX_PATH) != 0) {
&gt;-      WriteStatusFile(INVALID_STAGED_PARENT_ERROR);
&gt;-      LOG((&quot;Stage and Replace requests require that the working directory &quot; \
&gt;-           &quot;is a sub-directory of the installation directory! Exiting&quot;));
&gt;-      LogFinish();
&gt;-      return 1;
&gt;-    }
&gt;+  NS_tchar workingDirParent[MAX_PATH];
&gt;+  NS_tsnprintf(workingDirParent, sizeof(workingDirParent) / sizeof(workingDirParent[0]),
&gt;+    NS_T(&quot;%s&quot;), gWorkingDirPath);
&gt;+  if (!PathRemoveFileSpecW(workingDirParent)) {
&gt;+    WriteStatusFile(REMOVE_FILE_SPEC_ERROR);
&gt;+    LOG((&quot;Error calling PathRemoveFileSpecW: %d&quot;, GetLastError()));
&gt;+    LogFinish();
&gt;+    return 1;
&gt;+  }
&gt;+
&gt;+  if (_wcsnicmp(workingDirParent, gInstallDirPath, MAX_PATH) != 0) {
&gt;+    WriteStatusFile(INVALID_STAGED_PARENT_ERROR);</span >
Since this applies to all updates please change the name to reflect that.

<span class="quote">&gt;+    LOG((&quot;The working directory must be a sub-directory &quot;
&gt;+         &quot;of the installation directory! Exiting&quot;));
&gt;+    LogFinish();
&gt;+    return 1;
&gt;   }
&gt; #endif
&gt; 
&gt; #ifdef MOZ_WIDGET_GONK
&gt;   const char *prioEnv = getenv(&quot;MOZ_UPDATER_PRIO&quot;);
&gt;   if (prioEnv) {
&gt;     int32_t prioVal;
&gt;     int32_t oomScoreAdj;</span ></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8757479&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8757479</a> -
        Flags: review?(robert.strong.bugs) &rarr; review-</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="11477074" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-09 15:35 PDT" data-time="1465511753">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8761845"
         class="attachment patch obsolete"
         data-id="8761845" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="11187">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8761845">
          <a class="link" href="attachment.cgi?id=8761845&amp;action=diff">
        <span id="att-8761845-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8761845&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8761845">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-40" data-comment-id="11477074">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c39">comment #39</a>)
<span class="quote">&gt; &gt;+  NS_tchar *fullPath = (NS_tchar *)malloc((MAX_PATH + 1) * sizeof(NS_tchar));
&gt; &gt;+  GetFullPathName(relpath, MAX_PATH, fullPath, nullptr);
&gt; &gt;+  return fullPath;
&gt; Per our previous conversation I'd prefer not using GetFullPathName.</span >

Restored the previous implementation, with only the necessary changes.

<span class="quote">&gt; &gt;+#ifdef XP_WIN
&gt; &gt;+                     gInstallDirPath);
&gt; Does this really have to be Windows only? If not, I'd prefer it to be
&gt; consistent across platforms.</span >

This was my fix for the Mac chrome test failures. On (much) further investigation, those turn out to actually have been caused by an implicit assumption in a bit of the test code that the application binaries and the resource files (specifically update-settings.ini) live at the same path, which is not true on Mac OS. This version of the patch removes that assumption, which allowed this Windows check to go as well.

<span class="quote">&gt; &gt;+    WriteStatusFile(INVALID_STAGED_PARENT_ERROR);
&gt; Since this applies to all updates please change the name to reflect that.</span >

Done.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8757479&amp;action=edit"
           title="Patch - Always require the update working directory to be within the installation path on Windows"
           class=""
        >Attachment #8757479</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8761845&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8761845</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="11477079" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-09 15:37 PDT" data-time="1465511839">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="11477079"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=e3109cb148dc">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=e3109cb148dc</a></pre></div><div class="change-set" id="c42"><div class="comment" data-id="11493179" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-21 11:19 PDT" data-time="1466533163">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8763991"
         class="attachment patch obsolete"
         data-id="8763991" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="8296">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8763991">
          <a class="link" href="attachment.cgi?id=8763991&amp;action=diff">
        <span id="att-8763991-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8763991&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8763991">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-42" data-comment-id="11493179">Updated patch; removed creation of extra working directory within the apply-to path.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8761845&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8761845</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8761845&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8761845</a> -
        Flags: <span class="activity-deleted">review?(robert.strong.bugs)</span></div><div class="change">
        <a href="/attachment.cgi?id=8763991&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8763991</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c43"><div class="comment" data-id="11493184" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-21 11:21 PDT" data-time="1466533266">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="11493184"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=910a54b4b9b9">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=910a54b4b9b9</a></pre></div><div class="change-set" id="c44"><div class="comment" data-id="11533021" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a10371642_451704"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a10371642_451704"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-07 20:40 PDT" data-time="1467949256">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="11533021">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8763991" name="attach_8763991" title="Patch">attachment 8763991</a> <a href="/attachment.cgi?id=8763991&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8763991&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8763991'>[review]</a>
Patch

Per our discussion during MozLondon, please consolidate all of the NS_tchdir... I don't think we need so many of them.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8763991&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8763991</a> -
        Flags: review?(robert.strong.bugs) &rarr; review-</div></div></div><div class="change-set" id="c45"><div class="comment" data-id="11560217" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-19 16:10 PDT" data-time="1468969856">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8772624"
         class="attachment patch obsolete"
         data-id="8772624" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="41462">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8772624">
          <a class="link" href="attachment.cgi?id=8772624&amp;action=diff">
        <span id="att-8772624-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8772624&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8772624">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-45" data-comment-id="11560217">I was able to remove the chdir calls that I added, as well as all but two of the existing calls; one is needed to set the working directory for the callback app, and the other is the one that switches to the system directory to avoid holding a lock on anything we might need to delete.

Making all of that work out was a little more involved than I think either of us expected. Most of the changes come from needing the Action objects to hold their own copies of the paths they act on, so that they can call get_full_path() and properly dispose of the result, while also keeping the relative paths around so that they can be used in the log; it was easier than making the tests cope with paths in the log that include the test name. The tobedeleted directory needed a similar change as well.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8763991&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8763991</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8772624&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8772624</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c46"><div class="comment" data-id="11560218" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-19 16:11 PDT" data-time="1468969906">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="11560218"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=e490ed001eaf">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=e490ed001eaf</a></pre></div><div class="change-set" id="c47"><div class="comment" data-id="11562801" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a10371642_451704"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a10371642_451704"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-20 11:39 PDT" data-time="1469039948">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="11562801">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8772624" name="attach_8772624" title="Patch">attachment 8772624</a> <a href="/attachment.cgi?id=8772624&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8772624&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8772624'>[review]</a>
Patch

This patch is in pretty bad shape on Mac and Linux; working on a fixed version now.</pre></div><div class="change-set" id="a14004061_141755"><div class="change" id="aa14004061_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a14004061_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a14004061_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a14004061_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a14004061_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a14004061_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-20 11:46 PDT" data-time="1469040381">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8772624&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8772624</a> -
        Flags: <span class="activity-deleted">review?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="c48"><div class="comment" data-id="11568974" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a14004061_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a14004061_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-22 10:09 PDT" data-time="1469207356">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8773858"
         class="attachment patch obsolete"
         data-id="8773858" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="46866">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8773858">
          <a class="link" href="attachment.cgi?id=8773858&amp;action=diff">
        <span id="att-8773858-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8773858&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8773858">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-48" data-comment-id="11568974">Okay, let's try this one.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8772624&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8772624</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8773858&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8773858</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c49"><div class="comment" data-id="11568982" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a14004061_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a14004061_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-22 10:10 PDT" data-time="1469207459">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-49" data-comment-id="11568982"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=5db59389e6ae">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=5db59389e6ae</a></pre></div><div class="change-set" id="a15025271_495955"><div class="change" id="aa15025271_495955">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a15025271_495955"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_495955" id="a15025271_495955"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a15025271_495955"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a15025271_495955">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a15025271_495955">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-01 07:26 PDT" data-time="1470061591">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=isnotempty">status-firefox48</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=wontfix">wontfix</a></div></div></div><div class="change-set" id="c50"><div class="comment" data-id="11590359" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15025271_495955"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15025271_495955"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-01 14:37 PDT" data-time="1470087437">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-50" data-comment-id="11590359">Matt, just in case please run try for asan, static analysis, etc. just in case they catch something.</pre></div><div class="change-set" id="a15051135_141755"><div class="change" id="aa15051135_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a15051135_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a15051135_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a15051135_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-01 14:37 PDT" data-time="1470087455">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c51"><div class="comment" data-id="11590428" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-01 15:09 PDT" data-time="1470089371">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="11590428">Okay; I can't seem to add any jobs to the previous try push, I guess it's too old, so I'll make a new one.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div></div></div><div class="change-set" id="c52"><div class="comment" data-id="11590432" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-01 15:11 PDT" data-time="1470089474">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="11590432"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=7fcd0396b17b">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=7fcd0396b17b</a></pre></div><div class="change-set" id="c53"><div class="comment" data-id="11592296" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-02 08:21 PDT" data-time="1470151309">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-53" data-comment-id="11592296">Looks like that run didn't turn up any issues.</pre><div class="activity"><div class="change">Flags: needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c54"><div class="comment" data-id="11596752" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-03 13:21 PDT" data-time="1470255669">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="11596752">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8773858" name="attach_8773858" title="Patch">attachment 8773858</a> <a href="/attachment.cgi?id=8773858&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8773858&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8773858'>[review]</a>
Patch

<span class="quote">&gt;diff --git a/toolkit/mozapps/update/updater/updater.cpp b/toolkit/mozapps/update/updater/updater.cpp
&gt;--- a/toolkit/mozapps/update/updater/updater.cpp
&gt;+++ b/toolkit/mozapps/update/updater/updater.cpp
&gt;&#64;&#64; -375,44 +377,85 &#64;&#64; mstrtok(const NS_tchar *delims, NS_tchar
&gt; 
&gt; static bool
&gt; EnvHasValue(const char *name)
&gt; {
&gt;   const char *val = getenv(name);
&gt;   return (val &amp;&amp; *val);
&gt; }
&gt; 
&gt;-#ifdef XP_WIN
&gt; /**
&gt;- * Coverts a relative update path to a full path for Windows.
&gt;+ * Coverts a relative update path to a full path.
&gt;  *
&gt;  * &#64;param  relpath
&gt;  *         The relative path to convert to a full path.
&gt;  * &#64;return valid filesystem full path or nullptr if memory allocation fails.
&gt;  */
&gt; static NS_tchar*
&gt; get_full_path(const NS_tchar *relpath)
&gt; {
&gt;-  size_t lendestpath = NS_tstrlen(gDestPath);
&gt;+  NS_tchar *destpath = sStagedUpdate ? gWorkingDirPath : gInstallDirPath;
&gt;+  size_t lendestpath = NS_tstrlen(destpath);
&gt;   size_t lenrelpath = NS_tstrlen(relpath);
&gt;-  NS_tchar *s = (NS_tchar *) malloc((lendestpath + lenrelpath + 1) * sizeof(NS_tchar));
&gt;-  if (!s)
&gt;+  NS_tchar *s = new NS_tchar[lendestpath + lenrelpath + 2];
&gt;+  if (!s) {
&gt;     return nullptr;
&gt;+  }
&gt; 
&gt;   NS_tchar *c = s;
&gt; 
&gt;-  NS_tstrcpy(c, gDestPath);
&gt;+  NS_tstrcpy(c, destpath);
&gt;   c += lendestpath;
&gt;+#ifdef XP_WIN
&gt;+  if (*c != '\\') {
&gt;+    NS_tstrcat(c, NS_T(&quot;\\&quot;));
&gt;+    c++;
&gt;+  }
&gt;+#else
&gt;+  if (*c != '/') {
&gt;+    NS_tstrcat(c, NS_T(&quot;/&quot;));
&gt;+    c++;
&gt;+  }
&gt;+#endif</span >
Both gWorkingDirPath and gInstallDirPath have the trailing slash removed so no need to check if there is one.
<a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/toolkit/mozapps/update/updater/updater.cpp#2795">https://dxr.mozilla.org/mozilla-central/source/toolkit/mozapps/update/updater/updater.cpp#2795</a>
<a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/toolkit/mozapps/update/updater/updater.cpp#2723">https://dxr.mozilla.org/mozilla-central/source/toolkit/mozapps/update/updater/updater.cpp#2723</a>

I think this should just concatenate NS_T(&quot;/&quot;) for all platforms as we do in almost all other cases when working with paths. For example, all paths in the manifest use / so it should be safe to go this route. If it is actually needed please use NS_SLASH which is defined in updatedefines.h. In either case, there is no need for the ifdef or the check for a slash.

<span class="quote">&gt;+
&gt;   NS_tstrcat(c, relpath);
&gt;   c += lenrelpath;
&gt;   *c = NS_T('\0');
&gt;-  c++;
&gt;   return s;
&gt; }
&gt;&#64;&#64; -2468,17 +2558,18 &#64;&#64; UpdateThreadFunc(void *param)
&gt;         NS_tchar updateSettingsPath[MAX_TEXT_LEN];
&gt;         NS_tsnprintf(updateSettingsPath,
&gt;                      sizeof(updateSettingsPath) / sizeof(updateSettingsPath[0]),
&gt; #ifdef XP_MACOSX
&gt;                      NS_T(&quot;%s/Contents/Resources/update-settings.ini&quot;),
&gt; #else
&gt;                      NS_T(&quot;%s/update-settings.ini&quot;),
&gt; #endif
&gt;-                     gWorkingDirPath);
&gt;+                     gInstallDirPath);</span >
Pretty sure this shouldn't be changed.

Pushed this changed back to try to verify
<a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=2d7358e3b2bd">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=2d7358e3b2bd</a>

<span class="quote">&gt;+
&gt;         MARChannelStringTable MARStrings;
&gt;         if (ReadMARChannelIDs(updateSettingsPath, &amp;MARStrings) != OK) {
&gt;           // If we can't read from update-settings.ini then we shouldn't impose
&gt;           // a MAR restriction.  Some installations won't even include this file.
&gt;           MARStrings.MARChannelID[0] = '\0';
&gt;         }
&gt; 
&gt;         rv = gArchiveReader.VerifyProductInformation(MARStrings.MARChannelID,
&gt;&#64;&#64; -2844,31 +2934,32 &#64;&#64; int NS_main(int argc, NS_tchar **argv)
&gt;     LOG((&quot;Performing a replace request&quot;));
&gt;   }
&gt; 
&gt;   LOG((&quot;PATCH DIRECTORY &quot; LOG_S, gPatchDirPath));
&gt;   LOG((&quot;INSTALLATION DIRECTORY &quot; LOG_S, gInstallDirPath));
&gt;   LOG((&quot;WORKING DIRECTORY &quot; LOG_S, gWorkingDirPath));
&gt; 
&gt; #if defined(XP_WIN)
&gt;-  if (sReplaceRequest || sStagedUpdate) {
&gt;-    NS_tchar stagedParent[MAX_PATH];
&gt;-    NS_tsnprintf(stagedParent, sizeof(stagedParent)/sizeof(stagedParent[0]),
&gt;+  if (_wcsnicmp(gWorkingDirPath, gInstallDirPath, MAX_PATH) != 0) {</span >
These should always be the same on Windows when performing a normal update (e.g. not a staged update or a replace request). I think what we want here is to bail with an error code when these aren't the same during a normal update.

<span class="quote">&gt;+    NS_tchar workingDirParent[MAX_PATH];
&gt;+    NS_tsnprintf(workingDirParent,
&gt;+                 sizeof(workingDirParent) / sizeof(workingDirParent[0]),
&gt;                  NS_T(&quot;%s&quot;), gWorkingDirPath);
&gt;-    if (!PathRemoveFileSpecW(stagedParent)) {
&gt;+    if (!PathRemoveFileSpecW(workingDirParent)) {
&gt;       WriteStatusFile(REMOVE_FILE_SPEC_ERROR);
&gt;       LOG((&quot;Error calling PathRemoveFileSpecW: %d&quot;, GetLastError()));
&gt;       LogFinish();
&gt;       return 1;
&gt;     }
&gt; 
&gt;-    if (_wcsnicmp(stagedParent, gInstallDirPath, MAX_PATH) != 0) {
&gt;-      WriteStatusFile(INVALID_STAGED_PARENT_ERROR);
&gt;-      LOG((&quot;Stage and Replace requests require that the working directory &quot; \
&gt;-           &quot;is a sub-directory of the installation directory! Exiting&quot;));
&gt;+    if (_wcsnicmp(workingDirParent, gInstallDirPath, MAX_PATH) != 0) {
&gt;+      WriteStatusFile(INVALID_APPLYTO_DIR_ERROR);
&gt;+      LOG((&quot;The apply-to directory must be the same as or &quot;
&gt;+           &quot;a child of the installation directory! Exiting.&quot;));
&gt;       LogFinish();
&gt;       return 1;
&gt;     }
&gt;   }
&gt; #endif
&gt; 
&gt; #ifdef MOZ_WIDGET_GONK
&gt;   const char *prioEnv = getenv(&quot;MOZ_UPDATER_PRIO&quot;);
&gt;&#64;&#64; -2916,25 +3007,16 &#64;&#64; int NS_main(int argc, NS_tchar **argv)
&gt;     }
&gt;   }
&gt; #else
&gt;   if (pid &gt; 0)
&gt;     waitpid(pid, nullptr, 0);
&gt; #endif
&gt; 
&gt; #ifdef XP_WIN
&gt;-  if (sReplaceRequest) {
&gt;-    // On Windows, the current working directory of the process should be changed
&gt;-    // so that it's not locked.
&gt;-    NS_tchar sysDir[MAX_PATH + 1] = { L'\0' };
&gt;-    if (GetSystemDirectoryW(sysDir, MAX_PATH + 1)) {
&gt;-      NS_tchdir(sysDir);
&gt;-    }
&gt;-  }
&gt;-
&gt; #ifdef MOZ_MAINTENANCE_SERVICE
&gt;   sUsingService = EnvHasValue(&quot;MOZ_USING_SERVICE&quot;);
&gt;   putenv(const_cast&lt;char*&gt;(&quot;MOZ_USING_SERVICE=&quot;));
&gt; #endif
&gt;   // lastFallbackError keeps track of the last error for the service not being
&gt;   // used, in case of an error when fallback is not enabled we write the
&gt;   // error to the update.status file.
&gt;   // When fallback is disabled (MOZ_NO_SERVICE_FALLBACK does not exist) then
&gt;&#64;&#64; -3380,17 +3446,17 &#64;&#64; int NS_main(int argc, NS_tchar **argv)
&gt;                           argv + callbackIndex,
&gt;                           sUsingService);
&gt;       }
&gt;       return 1;
&gt;     }
&gt; 
&gt;     // Doing this is only necessary when we're actually applying a patch.
&gt;     if (!sReplaceRequest) {
&gt;-      int len = NS_tstrlen(applyDirLongPath);
&gt;+      int len = NS_tstrlen(gInstallDirPath);</span >
Why did you change this?

<span class="quote">&gt;       NS_tchar *s = callbackLongPath;
&gt;       NS_tchar *d = gCallbackRelPath;
&gt;       // advance to the apply to directory and advance past the trailing backslash
&gt;       // if present.
&gt;       s += len;
&gt;       if (*s == NS_T('\\'))
&gt;         ++s;
&gt; 
&gt;&#64;&#64; -3486,18 +3552,22 &#64;&#64; int NS_main(int argc, NS_tchar **argv)
&gt;     }
&gt;   }
&gt; 
&gt;   // DELETE_DIR is not required when staging an update.</span >
Please change this comment to something along the lines of
// DELETE_DIR is not required when performing a staged update or replace
// request though it can be used during a replace request but it doesn't
// use gDeleteDirPath.

<span class="quote">&gt;   if (!sStagedUpdate &amp;&amp; !sReplaceRequest) {
&gt;     // The directory to move files that are in use to on Windows. This directory
&gt;     // will be deleted after the update is finished or on OS reboot using
&gt;     // MoveFileEx if it contains files that are in use.</span >
Please change this comment as follows
// The directory to move files that are in use to on Windows. This directory
// will either be deleted after the update is finished, on OS reboot using
// MoveFileEx if it contains files that are in use, or by the post update
// process after the update finishes. On Windows when performing a normal
// update (e.g. the update is not a staged update and is not a replace
// request) gWorkingDirPath is the same as gInstallDirPath and
// gWorkingDirPath is used because it is the destination directory.

<span class="quote">&gt;-    if (NS_taccess(DELETE_DIR, F_OK)) {
&gt;-      NS_tmkdir(DELETE_DIR, 0755);
&gt;+    NS_tsnprintf(gDeleteDirPath,
&gt;+      sizeof(gDeleteDirPath) / sizeof(gDeleteDirPath[0]),
&gt;+      NS_T(&quot;%s/%s&quot;), gWorkingDirPath, DELETE_DIR);
&gt;+
&gt;+    if (NS_taccess(gDeleteDirPath, F_OK)) {
&gt;+      NS_tmkdir(gDeleteDirPath, 0755);
&gt;     }
&gt;   }
&gt; #endif /* XP_WIN */</span >
&#64;&#64; -4062,21 +4123,26 &#64;&#64; GetManifestContents(const NS_tchar *mani
 }
 
 int AddPreCompleteActions(ActionList *list)
 {
   if (sIsOSUpdate) {
     return OK;
   }
 
+  NS_tchar manifestPath[MAXPATHLEN];
 #ifdef XP_MACOSX
-  NS_tchar *rb = GetManifestContents(NS_T(&quot;Contents/Resources/precomplete&quot;));
+  NS_tsnprintf(manifestPath, sizeof(manifestPath) / sizeof(manifestPath[0]),
+    NS_T(&quot;%s/Contents/Resources/precomplete&quot;), gInstallDirPath);
 #else
-  NS_tchar *rb = GetManifestContents(NS_T(&quot;precomplete&quot;));
+  NS_tsnprintf(manifestPath, sizeof(manifestPath) / sizeof(manifestPath[0]),
+    NS_T(&quot;%s/precomplete&quot;), gInstallDirPath);
 #endif
Though either should work I think this should be gWorkingDirPath so it will use the one in the staging directory when staging.

As mhowell suggested over irc, use get_full_path.

+
+  NS_tchar *rb = GetManifestContents(manifestPath);
   if (rb == nullptr) {
     LOG((&quot;AddPreCompleteActions: error getting contents of precomplete &quot; \
          &quot;manifest&quot;));
     // Applications aren't required to have a precomplete manifest. The mar
     // generation scripts enforce the presence of a precomplete manifest.
     return OK;
   }</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(robert.strong.bugs)</span></div><div class="change">
        <a href="/attachment.cgi?id=8773858&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8773858</a> -
        Flags: review?(robert.strong.bugs) &rarr; review-</div></div></div><div class="change-set" id="c55"><div class="comment" data-id="11596935" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-03 14:10 PDT" data-time="1470258600">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="11596935">BTW: it looks like some Windows style newlines might have snuck into your patch</pre></div><div class="change-set" id="c56"><div class="comment" data-id="11597236" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-03 15:57 PDT" data-time="1470265052">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-56" data-comment-id="11597236">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c54">comment #54</a>)
&lt;snip&gt;
<span class="quote">&gt; &gt;+
&gt; &gt;   NS_tstrcat(c, relpath);
&gt; &gt;   c += lenrelpath;
&gt; &gt;   *c = NS_T('\0');
&gt; &gt;-  c++;
&gt; &gt;   return s;
&gt; &gt; }
&gt; &gt;&#64;&#64; -2468,17 +2558,18 &#64;&#64; UpdateThreadFunc(void *param)
&gt; &gt;         NS_tchar updateSettingsPath[MAX_TEXT_LEN];
&gt; &gt;         NS_tsnprintf(updateSettingsPath,
&gt; &gt;                      sizeof(updateSettingsPath) / sizeof(updateSettingsPath[0]),
&gt; &gt; #ifdef XP_MACOSX
&gt; &gt;                      NS_T(&quot;%s/Contents/Resources/update-settings.ini&quot;),
&gt; &gt; #else
&gt; &gt;                      NS_T(&quot;%s/update-settings.ini&quot;),
&gt; &gt; #endif
&gt; &gt;-                     gWorkingDirPath);
&gt; &gt;+                     gInstallDirPath);
&gt; Pretty sure this shouldn't be changed.
&gt; 
&gt; Pushed this changed back to try to verify
&gt; <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=2d7358e3b2bd">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=2d7358e3b2bd</a></span >
Debug try run finished successfully on Mac and other platforms look fine too so it should be safe to revert this.</pre></div><div class="change-set" id="c57"><div class="comment" data-id="11597246" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-03 16:02 PDT" data-time="1470265339">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8777584"
         class="attachment patch obsolete"
         data-id="8777584" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="46981">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8777584">
          <a class="link" href="attachment.cgi?id=8777584&amp;action=diff">
        <span id="att-8777584-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8777584&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8777584">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-57" data-comment-id="11597246">This fixes all the review comments, including the ones from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c55">comment 55</a> and <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c56">comment 56</a>. 

<span class="quote">&gt;-      int len = NS_tstrlen(applyDirLongPath);
&gt;+      int len = NS_tstrlen(gInstallDirPath);
&gt;Why did you change this?</span >

I have no idea; I reverted that as well. My guess is that it was needed on an earlier version of the patch and stopped making sense when the chdir calls were removed.

I'll do one more try push to make sure all this is still okay.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8773858&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8773858</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8777584&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8777584</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c58"><div class="comment" data-id="11597250" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-03 16:03 PDT" data-time="1470265407">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-58" data-comment-id="11597250"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=37aa231d84ab">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=37aa231d84ab</a></pre></div><div class="change-set" id="c59"><div class="comment" data-id="11597459" data-no="59"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-59" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-03 17:24 PDT" data-time="1470270264">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-59" data-comment-id="11597459">It would be a good thing to have a test for the failure when the gWorkingDirPath and gInstallDirPath aren't the same for a normal update. I'm wondering if the same restriction should be cross platform as well... could you check?
<a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/toolkit/xre/nsUpdateDriver.cpp">https://dxr.mozilla.org/mozilla-central/source/toolkit/xre/nsUpdateDriver.cpp</a></pre></div><div class="change-set" id="c60"><div class="comment" data-id="11599160" data-no="60"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-60" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-60"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-60" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c60">Comment 60</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-04 08:08 PDT" data-time="1470323331">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-60">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-60" data-comment-id="11599160">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8777584" name="attach_8777584" title="Patch">attachment 8777584</a> <a href="/attachment.cgi?id=8777584&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8777584&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8777584'>[review]</a>
Patch

Clearing review until <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c45">comment #45</a> is answered</pre><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div><div class="change">
        <a href="/attachment.cgi?id=8777584&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8777584</a> -
        Flags: <span class="activity-deleted">review?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="c61"><div class="comment" data-id="11599163" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-61" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-04 08:09 PDT" data-time="1470323365">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-61" data-comment-id="11599163">bah! I meant <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c59">comment #59</a></pre></div><div class="change-set" id="c62"><div class="comment" data-id="11600515" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-62" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-04 15:31 PDT" data-time="1470349900">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-62" data-comment-id="11600515">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c59">comment #59</a>)
<span class="quote">&gt; It would be a good thing to have a test for the failure when the
&gt; gWorkingDirPath and gInstallDirPath aren't the same for a normal update.</span >
Okay, I can add that.

<span class="quote">&gt; I'm wondering if the same restriction should be cross platform as well... could you check?
&gt; <a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/toolkit/xre/nsUpdateDriver.cpp">https://dxr.mozilla.org/mozilla-central/source/toolkit/xre/nsUpdateDriver.cpp</a></span >
It should be possible to make it cross-platform, but it broke staging when I tried it, and I'd rather not spend time fixing that as part of this bug, since the security implications aren't really there on platforms lacking the maintenance service.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div></div></div><div class="change-set" id="c63"><div class="comment" data-id="11600528" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-63" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-04 15:40 PDT" data-time="1470350419">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-63" data-comment-id="11600528">That should only apply when the following is true and hence shouldn't break staging or replace requests.
if (!sStagedUpdate &amp;&amp; !sReplaceRequest) {

The only case that I think it might break is gonk but I'm fine with not doing this change in this bug.

Also, you didn't add a new error and write it to the status file for 
+  if (_wcsnicmp(gWorkingDirPath, gInstallDirPath, MAX_PATH) != 0) {
+    if (!sStagedUpdate &amp;&amp; !sReplaceRequest) {
+      LOG((&quot;Installation directory and working directory must be the same &quot;
+           &quot;for non-staged updates. Exiting.&quot;));</pre></div><div class="change-set" id="c64"><div class="comment" data-id="11602380" data-no="64"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-64" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-05 08:01 PDT" data-time="1470409301">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-64" data-comment-id="11602380">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8777584" name="attach_8777584" title="Patch">attachment 8777584</a> <a href="/attachment.cgi?id=8777584&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8777584&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8777584'>[review]</a>
Patch

The only remaining things to be done are the new test and

Also, you didn't add a new error and write it to the status file for 
+  if (_wcsnicmp(gWorkingDirPath, gInstallDirPath, MAX_PATH) != 0) {
+    if (!sStagedUpdate &amp;&amp; !sReplaceRequest) {
+      LOG((&quot;Installation directory and working directory must be the same &quot;
+           &quot;for non-staged updates. Exiting.&quot;));

This error should also be handled in nsUpdateService.js and reported via telemetry.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8777584&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8777584</a> -
        Flags: review-</div></div></div><div class="change-set" id="c65"><div class="comment" data-id="11602387" data-no="65"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-65" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-65"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-65" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c65">Comment 65</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-05 08:05 PDT" data-time="1470409556">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-65">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-65" data-comment-id="11602387">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c64">comment #64</a>)
<span class="quote">&gt; Also, you didn't add a new error and write it to the status file for 
&gt; +  if (_wcsnicmp(gWorkingDirPath, gInstallDirPath, MAX_PATH) != 0) {
&gt; +    if (!sStagedUpdate &amp;&amp; !sReplaceRequest) {
&gt; +      LOG((&quot;Installation directory and working directory must be the same &quot;
&gt; +           &quot;for non-staged updates. Exiting.&quot;));
&gt; 
&gt; This error should also be handled in nsUpdateService.js and reported via
&gt; telemetry.</span >
Do you think this needs to be a whole new error code? It seems like INVALID_APPLYTO_DIR_ERROR would work fine; it's really the same error as the other place that code is returned, and the fact that it's a stage or replace run disambiguates this one from that one.</pre><div class="activity"><div class="change">Flags: needinfo?(robert.strong.bugs)</div></div></div><div class="change-set" id="c66"><div class="comment" data-id="11602391" data-no="66"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-66" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-66"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-66" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c66">Comment 66</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-05 08:09 PDT" data-time="1470409775">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-66">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-66" data-comment-id="11602391">It depends on how difficult it is to differentiate it in telemetry. I suspect it won't be that easy.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(robert.strong.bugs)</span></div></div></div><div class="change-set" id="c67"><div class="comment" data-id="11603455" data-no="67"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-67" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-67"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-67" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c67">Comment 67</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-05 14:08 PDT" data-time="1470431282">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-67">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8778458"
         class="attachment patch obsolete"
         data-id="8778458" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="53936">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8778458">
          <a class="link" href="attachment.cgi?id=8778458&amp;action=diff">
        <span id="att-8778458-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8778458&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8778458">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-67" data-comment-id="11603455">Added new error code and test.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8777584&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8777584</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8778458&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8778458</a> -
        Flags: review?(robert.strong.bugs)</div></div></div><div class="change-set" id="c68"><div class="comment" data-id="11618417" data-no="68"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-68" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-68"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-68" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c68">Comment 68</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-11 11:09 PDT" data-time="1470938983">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-68">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-68" data-comment-id="11618417">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8778458" name="attach_8778458" title="Patch">attachment 8778458</a> <a href="/attachment.cgi?id=8778458&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8778458&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8778458'>[review]</a>
Patch

I thought you were going to land this on oak first... you don't need to wait on review to do so. Anyways, this looks good.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8778458&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8778458</a> -
        Flags: review?(robert.strong.bugs) &rarr; review+</div></div></div><div class="change-set" id="c69"><div class="comment" data-id="11618613" data-no="69"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-69" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-69"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-69" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c69">Comment 69</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-11 12:21 PDT" data-time="1470943288">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-69">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-69" data-comment-id="11618613">(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c68">comment #68</a>)
<span class="quote">&gt; I thought you were going to land this on oak first... you don't need to wait
&gt; on review to do so. Anyways, this looks good.</span >

Yeah, sorry, I just hadn't gotten around to it yet. Trying to do it today.

Thanks for the reviews.</pre></div><div class="change-set" id="c70"><div class="comment" data-id="11618618" data-no="70"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-70" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a15051135_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a15051135_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-70"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-70" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c70">Comment 70</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-11 12:22 PDT" data-time="1470943375">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-70">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-70" data-comment-id="11618618">I'll do some manual update testing on oak after it is landed as well. Thanks!</pre></div><div class="change-set" id="c71"><div class="comment" data-id="11619041" data-no="71"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-71" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-71"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-71" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c71">Comment 71</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-11 14:25 PDT" data-time="1470950741">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-71">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-71" data-comment-id="11619041"><a rel="nofollow" href="https://hg.mozilla.org/projects/oak/rev/4afd44e5b901">https://hg.mozilla.org/projects/oak/rev/4afd44e5b901</a></pre></div><div class="change-set" id="c72"><div class="comment" data-id="11655233" data-no="72"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-72" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-72"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-72" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c72">Comment 72</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 09:19 PDT" data-time="1472141966">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-72">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-72" data-comment-id="11655233">Finally managed to get that testing done. I tried staged and non-staged updates, first in Program Files, and then inside the user's profile. Everything went as expected. I'll post a rebased patch (there's one file with a non-trivial merge) with a carried-over r+ and then request security approval.</pre></div><div class="change-set" id="c73"><div class="comment" data-id="11655242" data-no="73"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-73" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a15051135_141755"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a15051135_141755"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-73"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-73" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c73">Comment 73</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 09:23 PDT" data-time="1472142185">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-73">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8784879"
         class="attachment patch obsolete"
         data-id="8784879" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="54549">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8784879">
          <a class="link" href="attachment.cgi?id=8784879&amp;action=diff">
        <span id="att-8784879-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8784879&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8784879">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-73" data-comment-id="11655242">Rebased version of <span class="bz_obsolete"><a href="/attachment.cgi?id=8778458" name="attach_8778458" title="Patch">attachment 8778458</a> <a href="/attachment.cgi?id=8778458&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8778458&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8778458'>[review]</a>; r+ carried over.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8778458&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8778458</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: sec-approval?</div><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: review+</div></div></div><div class="change-set" id="a17105914_550257"><div class="change" id="aa17105914_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17105914_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a17105914_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17105914_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17105914_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17105914_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 09:23 PDT" data-time="1472142234">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: <span class="activity-deleted">sec-approval?</span></div></div></div><div class="change-set" id="c74"><div class="comment" data-id="11655285" data-no="74"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-74" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17105914_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17105914_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-74"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-74" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c74">Comment 74</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 09:31 PDT" data-time="1472142684">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-74">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-74" data-comment-id="11655285">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8784879" name="attach_8784879" title="Patch">attachment 8784879</a> <a href="/attachment.cgi?id=8784879&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8784879&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8784879'>[review]</a>
Patch

[Security approval request comment]
How easily could an exploit be constructed based on the patch?
I suspect it wouldn't be easy; the patch is large and the actual security fix is kind of buried.

Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Not in my opinion.

Which older supported branches are affected by this flaw?
All

If not all supported branches, which bug introduced the flaw?
N/A

Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
I do not; they might be non-trivial to create because of the amount of surgery I had to do to the updater. I'm not sure this patch merits backporting, though.

How likely is this patch to cause regressions; how much testing does it need?
Unlikely. Existing automated tests are fairly extensive, and I did some manual testing myself, see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c72">comment 72</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c75"><div class="comment" data-id="11655442" data-no="75"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-75" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a17105914_550257"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a17105914_550257"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-75"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-75" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c75">Comment 75</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 10:17 PDT" data-time="1472145436">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-75">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-75" data-comment-id="11655442">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8784879" name="attach_8784879" title="Patch">attachment 8784879</a> <a href="/attachment.cgi?id=8784879&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8784879&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8784879'>[review]</a>
Patch

sec-approval+ for trunk. I think we should take it on Aurora but I don't know that we want to take a big patch late for beta for 49.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="a17109135_280903"><div class="change" id="aa17109135_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a17109135_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a17109135_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17109135_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17109135_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17109135_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 10:17 PDT" data-time="1472145455">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a></div></div></div><div class="change-set" id="c76"><div class="comment" data-id="11655459" data-no="76"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-76" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17109135_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17109135_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-76"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-76" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c76">Comment 76</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 10:22 PDT" data-time="1472145764">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-76">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-76" data-comment-id="11655459"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/c079fb045b9d18df1a6fe80e3a46ad1e27eff03d">https://hg.mozilla.org/integration/mozilla-inbound/rev/c079fb045b9d18df1a6fe80e3a46ad1e27eff03d</a>
<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972">Bug 1246972</a> - Always require the update working directory to be within the installation path; r=rstrong</pre></div><div class="change-set" id="c77"><div class="comment" data-id="11655534" data-no="77"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-77" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17109135_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17109135_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-77"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-77" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c77">Comment 77</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 10:42 PDT" data-time="1472146977">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-77">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-77" data-comment-id="11655534">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8784879" name="attach_8784879" title="Patch">attachment 8784879</a> <a href="/attachment.cgi?id=8784879&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8784879&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8784879'>[review]</a>
Patch

On abillings's suggestion:

Approval Request Comment
[Feature/regressing bug #]:
Probably <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Provide a Windows service to update applications without asking Administrator password"
   href="/show_bug.cgi?id=481815">bug 481815</a>.

[User impact if declined]:
Security bug classified sec-high.

[Describe test coverage new/current, TreeHerder]:
Automated test coverage for the updater is good. A new test was also added to verify the new failure condition. The latest push that includes this patch is on TreeHerder at <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=oak&amp;revision=189f55e63199">https://treeherder.mozilla.org/#/jobs?repo=oak&amp;revision=189f55e63199</a>. I've also done a bit of manual testing, see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c72">comment 72</a>.

[Risks and why]: 
This patch contains pretty wide-reaching changes to the updater, so the risk is that updates start failing. Allowing the patch to sit on nightly for a few days before uplifting it would be a good way to manage that.

[String/UUID change made/needed]:
None</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="c78"><div class="comment" data-id="11655612" data-no="78"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-78" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17109135_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17109135_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-78"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-78" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c78">Comment 78</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 11:06 PDT" data-time="1472148413">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-78">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-78" data-comment-id="11655612"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/4576637003b6ae52477041cd6a807f482bad5211">https://hg.mozilla.org/integration/mozilla-inbound/rev/4576637003b6ae52477041cd6a807f482bad5211</a>
<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972">Bug 1246972</a> followup - Fix eslint errors; CLOSED TREE</pre></div><div class="change-set" id="c79"><div class="comment" data-id="11656174" data-no="79"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-79" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_308534" id="a17109135_280903"><img src="https://secure.gravatar.com/avatar/bb55b2a8c34fd29f570ca139f13d46b8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_308534" id="a17109135_280903"><a class="email " href="/user_profile?user_id=308534" > <span class="fna">Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-79"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-79" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c79">Comment 79</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 13:03 PDT" data-time="1472155397">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-79">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-79" data-comment-id="11656174">Backed out for xpcshell failures like <a rel="nofollow" href="https://treeherder.mozilla.org/logviewer.html#?job_id=34660566&amp;repo=mozilla-inbound">https://treeherder.mozilla.org/logviewer.html#?job_id=34660566&amp;repo=mozilla-inbound</a>

<a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/41ee5cb3266c">https://hg.mozilla.org/integration/mozilla-inbound/rev/41ee5cb3266c</a></pre><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c80"><div class="comment" data-id="11656273" data-no="80"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-80" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a17109135_280903"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_141755" id="a17109135_280903"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-80"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-80" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c80">Comment 80</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 13:33 PDT" data-time="1472157221">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-80">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-80" data-comment-id="11656273">I landed <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - DON'T USE WinXP debug only TEST-UNEXPECTED-TIMEOUT | toolkit/mozapps/update/tests/unit_service_updater/bootstrapSvc.js | Test timed out - followed by numerous other update test failures on WinXP debug only"
   href="/show_bug.cgi?id=1291985">bug 1291985</a> on inbound today so please add the following to the xpcshell.ini for the new test

skip-if = os != 'win' || debug &amp;&amp; (os_version == '5.1' || os_version == '5.2')
reason = Windows only test and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - DON'T USE WinXP debug only TEST-UNEXPECTED-TIMEOUT | toolkit/mozapps/update/tests/unit_service_updater/bootstrapSvc.js | Test timed out - followed by numerous other update test failures on WinXP debug only"
   href="/show_bug.cgi?id=1291985">bug 1291985</a></pre></div><div class="change-set" id="a17127976_280903"><div class="change" id="aa17127976_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a17127976_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a17127976_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17127976_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17127976_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17127976_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 15:31 PDT" data-time="1472164296">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c81"><div class="comment" data-id="11656611" data-no="81"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-81" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17127976_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17127976_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-81"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-81" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c81">Comment 81</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 15:34 PDT" data-time="1472164444">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-81">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-81" data-comment-id="11656611">Note that patch was backed out from inbound for asan failures, so don't actually push that one to aurora. Attempted fix incoming.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div></div></div><div class="change-set" id="c82"><div class="comment" data-id="11656615" data-no="82"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-82" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17127976_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17127976_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-82"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-82" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c82">Comment 82</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-25 15:36 PDT" data-time="1472164585">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-82">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-82" data-comment-id="11656615"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=27cdfe581567">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=27cdfe581567</a></pre></div><div class="change-set" id="c83"><div class="comment" data-id="11659251" data-no="83"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-83" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17127976_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17127976_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-83"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-83" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c83">Comment 83</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-26 10:31 PDT" data-time="1472232663">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-83">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8785392"
         class="attachment patch"
         data-id="8785392" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972.diff">
      <meta itemprop="contentSize" content="56334">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8785392">
          <a class="link" href="attachment.cgi?id=8785392&amp;action=diff">
        <span id="att-8785392-description" itemprop="description">Fixed Patch</span></a>
        — <a href="attachment.cgi?id=8785392&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8785392">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-83" data-comment-id="11659251">Okay, my stab at a fix for the asan failures seems to have worked. This is the fixed patch.

Not sure if I need to request sec-approval again, since this is a minor change to the previous patch which already had it. I'll do it anyway just to be safe.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8784879&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8784879</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8785392&amp;action=edit"
           title="Fixed Patch"
           class=""
        >Attachment #8785392</a> -
        Flags: sec-approval?</div><div class="change">
        <a href="/attachment.cgi?id=8785392&amp;action=edit"
           title="Fixed Patch"
           class=""
        >Attachment #8785392</a> -
        Flags: review+</div></div></div><div class="change-set" id="a17216207_280903"><div class="change" id="aa17216207_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a17216207_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a17216207_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17216207_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17216207_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17216207_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-26 16:02 PDT" data-time="1472252527">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8785392&amp;action=edit"
           title="Fixed Patch"
           class=""
        >Attachment #8785392</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="a17216216_280903"><div class="change" id="aa17216216_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a17216216_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a17216216_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17216216_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17216216_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17216216_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-26 16:02 PDT" data-time="1472252536">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></div></div></div><div class="change-set" id="c84"><div class="comment" data-id="11663370" data-no="84"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-84" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17216216_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17216216_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-84"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-84" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c84">Comment 84</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-29 08:17 PDT" data-time="1472483851">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-84">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-84" data-comment-id="11663370">Since this patch has a chance (and in fact a history) of causing trouble, I didn't really want to push it out last thing on a Friday. ;)

I'll request uplift again if this push sticks on nightly for a few days.</pre><div class="activity"><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></span></div></div></div><div class="change-set" id="c85"><div class="comment" data-id="11663371" data-no="85"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-85" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17216216_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17216216_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-85"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-85" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c85">Comment 85</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-29 08:18 PDT" data-time="1472483915">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-85">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-85" data-comment-id="11663371"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/c908e9677a9b93ac25b3c35e75bdb447b6e69b56">https://hg.mozilla.org/integration/mozilla-inbound/rev/c908e9677a9b93ac25b3c35e75bdb447b6e69b56</a>
<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972">Bug 1246972</a> - Always require the update working directory to be within the installation path; r=rstrong</pre></div><div class="change-set" id="c86"><div class="comment" data-id="11665181" data-no="86"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-86" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_308534" id="a17216216_280903"><img src="https://secure.gravatar.com/avatar/bb55b2a8c34fd29f570ca139f13d46b8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_308534" id="a17216216_280903"><a class="email " href="/user_profile?user_id=308534" > <span class="fna">Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-86"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-86" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c86">Comment 86</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-29 17:47 PDT" data-time="1472518026">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-86">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-86" data-comment-id="11665181"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/c908e9677a9b">https://hg.mozilla.org/mozilla-central/rev/c908e9677a9b</a></pre><div class="activity"><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2016-08-29 17:47 PDT" data-time="1472518026">5 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=isnotempty">status-firefox51</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla51</div></div></div><div class="change-set" id="a17538911_280903"><div class="change" id="aa17538911_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a17538911_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a17538911_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17538911_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17538911_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17538911_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-30 09:40 PDT" data-time="1472575231">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty?</div></div></div><div class="change-set" id="c87"><div class="comment" data-id="11669704" data-no="87"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-87" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_7044" id="a17538911_280903"><img src="https://secure.gravatar.com/avatar/3301a62f3707d6bcef9542d316fb587f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_7044" id="a17538911_280903"><a class="email " href="/user_profile?user_id=7044" > <span class="fna">Benjamin Smedberg</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-87"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-87" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c87">Comment 87</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-31 06:44 PDT" data-time="1472651077">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-87">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-87" data-comment-id="11669704">Is this ready to request uplift? We're running out of time if this is going to make 49.</pre><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c88"><div class="comment" data-id="11670039" data-no="88"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-88" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17538911_280903"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17538911_280903"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-88"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-88" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c88">Comment 88</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-31 08:07 PDT" data-time="1472656029">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-88">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-88" data-comment-id="11670039">Yesterday would have been the first nightly that included this patch, which means today's is the first update that's using it. I'd rather wait at least a few more hours, up to a couple of days if possible, for more people to attempt that update, to see if any problems appear.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div></div></div><div class="change-set" id="c89"><div class="comment" data-id="11670540" data-no="89"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-89" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a17538911_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a17538911_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-89"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-89" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c89">Comment 89</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-31 10:14 PDT" data-time="1472663693">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-89">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-89" data-comment-id="11670540">Matt: I am planning to start the 49 beta 9 build tomorrow, then the RC build on Monday. I would rather not take this in late beta though.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=isnotempty">status-firefox49</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=wontfix">wontfix</a></div></div></div><div class="change-set" id="a17712704_1689"><div class="change" id="aa17712704_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a17712704_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a17712704_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17712704_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17712704_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a17712704_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-01 09:57 PDT" data-time="1472749024">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: toolkit-core-security &rarr; core-security-release</div></div></div><div class="change-set" id="c90"><div class="comment" data-id="11679714" data-no="90"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-90" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a17712704_1689"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a17712704_1689"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-90"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-90" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c90">Comment 90</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-01 12:15 PDT" data-time="1472757327">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-90">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-90" data-comment-id="11679714">Comment on <span class=""><a href="/attachment.cgi?id=8785392" name="attach_8785392" title="Fixed Patch">attachment 8785392</a> <a href="/attachment.cgi?id=8785392&amp;action=edit" title="Fixed Patch">[details]</a> <a href="/attachment.cgi?id=8785392&amp;action=diff" title="Fixed Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8785392'>[review]</a>
Fixed Patch

Approval Request Comment
See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Arbitrary target directory for result files of update process"
   href="/show_bug.cgi?id=1246972#c77">comment 77</a>. We've had a couple of nightly updates using this patch now and no reports of issues, so I'm confident that the risk has been addressed.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8785392&amp;action=edit"
           title="Fixed Patch"
           class=""
        >Attachment #8785392</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="c91"><div class="comment" data-id="11696891" data-no="91"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-91" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a17712704_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a17712704_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-91"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-91" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c91">Comment 91</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-08 14:26 PDT" data-time="1473369962">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-91">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-91" data-comment-id="11696891">We need to fix this in the ESR release that matches the Firefox release that fixes it (looking like 50/45.5)</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=isnotempty">tracking-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=50%2B">50+</a></div></div></div><div class="change-set" id="a18666284_1689"><div class="change" id="aa18666284_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a18666284_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a18666284_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a18666284_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a18666284_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-12 10:50 PDT" data-time="1473702604">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty? &rarr; sec-bounty+</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-priv-escalation&amp;resolution=---">csectype-priv-escalation</a></div></div></div><div class="change-set" id="c92"><div class="comment" data-id="11703628" data-no="92"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-92" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a18666284_1689"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-92"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-92" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c92">Comment 92</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-12 10:50 PDT" data-time="1473702605">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-92">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-92" data-comment-id="11703628">Comment on <span class=""><a href="/attachment.cgi?id=8785392" name="attach_8785392" title="Fixed Patch">attachment 8785392</a> <a href="/attachment.cgi?id=8785392&amp;action=edit" title="Fixed Patch">[details]</a> <a href="/attachment.cgi?id=8785392&amp;action=diff" title="Fixed Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8785392'>[review]</a>
Fixed Patch

Approving for Aurora. We should take this on ESR45 as well.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8785392&amp;action=edit"
           title="Fixed Patch"
           class=""
        >Attachment #8785392</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c93"><div class="comment" data-id="11703631" data-no="93"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-93" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a18666284_1689"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-93"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-93" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c93">Comment 93</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-12 10:51 PDT" data-time="1473702663">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-93">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-93" data-comment-id="11703631">Can you make an ESR45 patch and nominate it, Matt?</pre><div class="activity"><div class="change">Flags: needinfo?(mhowell)</div></div></div><div class="change-set" id="c94"><div class="comment" data-id="11704390" data-no="94"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-94" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a18666284_1689"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-94"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-94" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c94">Comment 94</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-12 14:33 PDT" data-time="1473716019">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-94">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8790451"
         class="attachment patch obsolete"
         data-id="8790451" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972_esr45.diff">
      <meta itemprop="contentSize" content="53710">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8790451">
          <a class="link" href="attachment.cgi?id=8790451&amp;action=diff">
        <span id="att-8790451-description" itemprop="description">ESR45 Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8790451&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8790451">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-94" data-comment-id="11704390">Same patch as <span class=""><a href="/attachment.cgi?id=8785392" name="attach_8785392" title="Fixed Patch">attachment 8785392</a> <a href="/attachment.cgi?id=8785392&amp;action=edit" title="Fixed Patch">[details]</a> <a href="/attachment.cgi?id=8785392&amp;action=diff" title="Fixed Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8785392'>[review]</a> rebased for ESR45.

[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration:
N/A, this bug is sec-high

User impact if declined: 
sec-high bug allowing privilege escalation on Windows

Fix Landed on Version:
51, with uplift to 50

Risk to taking this patch (and alternatives if risky): 
Primary risk is new bugs created in the updater by this patch causing updates to fail. This risk has been managed by running this patch on Nightly for two weeks; no issues have been observed or reported.

String or UUID changes made by this patch: 
None</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mhowell)</span></div><div class="change">
        <a href="/attachment.cgi?id=8790451&amp;action=edit"
           title="ESR45 Patch"
           class=""
        >Attachment #8790451</a> -
        Flags: approval-mozilla-esr45?</div></div></div><div class="change-set" id="c95"><div class="comment" data-id="11704965" data-no="95"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-95" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a18666284_1689"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-95"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-95" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c95">Comment 95</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-12 19:03 PDT" data-time="1473732181">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-95">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-95" data-comment-id="11704965"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-aurora/rev/89ba44134660">https://hg.mozilla.org/releases/mozilla-aurora/rev/89ba44134660</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=isnotempty">status-firefox50</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Flags: in-testsuite+</div></div></div><div class="change-set" id="c96"><div class="comment" data-id="11791191" data-no="96"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-96" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_495955" id="a18666284_1689"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-96"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-96" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c96">Comment 96</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-17 09:00 PDT" data-time="1476720032">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-96">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-96" data-comment-id="11791191">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8790451" name="attach_8790451" title="ESR45 Patch">attachment 8790451</a> <a href="/attachment.cgi?id=8790451&amp;action=edit" title="ESR45 Patch">[details]</a> <a href="/attachment.cgi?id=8790451&amp;action=diff" title="ESR45 Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8790451'>[review]</a>
ESR45 Patch

sec-high, taking it on the esr branch</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8790451&amp;action=edit"
           title="ESR45 Patch"
           class=""
        >Attachment #8790451</a> -
        Flags: approval-mozilla-esr45? &rarr; approval-mozilla-esr45+</div></div></div><div class="change-set" id="c97"><div class="comment" data-id="11792443" data-no="97"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-97" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a18666284_1689"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a18666284_1689"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-97"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-97" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c97">Comment 97</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-17 15:14 PDT" data-time="1476742445">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-97">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8801906"
         class="attachment patch"
         data-id="8801906" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1246972_esr45_r2.diff">
      <meta itemprop="contentSize" content="56131">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8801906">
          <a class="link" href="attachment.cgi?id=8801906&amp;action=diff">
        <span id="att-8801906-description" itemprop="description">ESR45 Patch Rebased</span></a>
        — <a href="attachment.cgi?id=8801906&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1246972&attachment=8801906">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-97" data-comment-id="11792443">The ESR45 patch previously posted here and just approved had bitrotted due to the landing of <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Only use env vars in the test updater and general cleanup"
   href="/show_bug.cgi?id=1168743">bug 1168743</a> and friends. This one should apply cleanly.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8790451&amp;action=edit"
           title="ESR45 Patch"
           class=""
        >Attachment #8790451</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8801906&amp;action=edit"
           title="ESR45 Patch Rebased"
           class=""
        >Attachment #8801906</a> -
        Flags: approval-mozilla-esr45?</div></div></div><div class="change-set" id="a21748231_495955"><div class="change" id="aa21748231_495955">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a21748231_495955"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_495955" id="a21748231_495955"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a21748231_495955"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a21748231_495955">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a21748231_495955">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-18 02:55 PDT" data-time="1476784551">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8801906&amp;action=edit"
           title="ESR45 Patch Rebased"
           class=""
        >Attachment #8801906</a> -
        Flags: approval-mozilla-esr45? &rarr; approval-mozilla-esr45+</div></div></div><div class="change-set" id="a21748237_495955"><div class="change" id="aa21748237_495955">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a21748237_495955"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_495955" id="a21748237_495955"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a21748237_495955"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a21748237_495955">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a21748237_495955">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-18 02:55 PDT" data-time="1476784557">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8790451&amp;action=edit"
           title="ESR45 Patch"
           class=""
        >Attachment #8790451</a> -
        Flags: approval-mozilla-esr45+ &rarr; approval-mozilla-esr45-</div></div></div><div class="change-set" id="c98"><div class="comment" data-id="11794611" data-no="98"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-98" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a21748237_495955"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_550257" id="a21748237_495955"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-98"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-98" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c98">Comment 98</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-18 08:32 PDT" data-time="1476804748">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-98">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-98" data-comment-id="11794611">Comment on <span class=""><a href="/attachment.cgi?id=8801906" name="attach_8801906" title="ESR45 Patch Rebased">attachment 8801906</a> <a href="/attachment.cgi?id=8801906&amp;action=edit" title="ESR45 Patch Rebased">[details]</a> <a href="/attachment.cgi?id=8801906&amp;action=diff" title="ESR45 Patch Rebased">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1246972&amp;attachment=8801906'>[review]</a>
ESR45 Patch Rebased

Pushed:
<a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-esr45/rev/aa1593ec5ccd027070daa190e433ed588eb2fdca">https://hg.mozilla.org/releases/mozilla-esr45/rev/aa1593ec5ccd027070daa190e433ed588eb2fdca</a></pre></div><div class="change-set" id="a21768479_550257"><div class="change" id="aa21768479_550257">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_550257" id="a21768479_550257"><img src="https://secure.gravatar.com/avatar/3f97cf08c1ecf35bc10896cf363773e5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_550257" id="a21768479_550257"><a class="email " href="/user_profile?user_id=550257" > <span class="fna">Molly Howell (she/her) [:mhowell] (PTO until Nov 1)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a21768479_550257"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a21768479_550257">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a21768479_550257">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-18 08:33 PDT" data-time="1476804799">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a23243493_452604"><div class="change" id="aa23243493_452604">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452604" id="a23243493_452604"><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_452604" id="a23243493_452604"><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">Matt Wobensmith [:mwobensmith][:matt:]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a23243493_452604"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a23243493_452604">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a23243493_452604">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-04 10:16 PDT" data-time="1478279813">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify+</div><div class="change">QA Contact: kjozwiak</div><div class="change">Whiteboard: [post-critsmash-triage]</div></div></div><div class="change-set" id="a23530326_280903"><div class="change" id="aa23530326_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a23530326_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a23530326_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a23530326_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a23530326_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a23530326_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-07 16:57 PST" data-time="1478566646">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [post-critsmash-triage] &rarr; [post-critsmash-triage][adv-main50+][adv-esr45.5+]</div></div></div><div class="change-set" id="c99"><div class="comment" data-id="11844580" data-no="99"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-99" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_458188" id="a23530326_280903"><img src="https://secure.gravatar.com/avatar/8f3f8c3f93e13fdf486474e1382bf53e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_458188" id="a23530326_280903"><a class="email " href="/user_profile?user_id=458188" > <span class="fna">PTO until 15th Nov [:bogdan_maris], Release Desktop QA</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-99"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-99" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#c99">Comment 99</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-08 06:01 PST" data-time="1478613671">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-99">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-99" data-comment-id="11844580">OS tested:
- Windows 7 64bit.

Reproduced the initial issue using old Nightly from (2016-02-09) and poc file attached:

* Installed Firefox
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/nightly/2016/02/2016-02-09-03-03-47-mozilla-central/firefox-47.0a1.en-US.win32.installer.exe">https://archive.mozilla.org/pub/firefox/nightly/2016/02/2016-02-09-03-03-47-mozilla-central/firefox-47.0a1.en-US.win32.installer.exe</a>
* Mar file
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/nightly/2016/02/2016-02-09-03-03-47-mozilla-central/firefox-47.0a1.en-US.win32.complete.mar">https://archive.mozilla.org/pub/firefox/nightly/2016/02/2016-02-09-03-03-47-mozilla-central/firefox-47.0a1.en-US.win32.complete.mar</a>

Executing poc file will result in:
- 'target' folder is created in the same directory as poc.rb
- update.log:
<span class="quote">&gt; PATCH DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\updatework
&gt; INSTALLATION DIRECTORY C:\Program Files (x86)\Nightly
&gt; WORKING DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\target
&gt; failed: 6
&gt; calling QuitProgressUI</span >
- update.status
<span class="quote">&gt; failed: 6</span >

Verified that the initial issue does not reproduce in current builds:

1) Firefox 50.0-build2

* Installed Firefox
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/candidates/50.0-candidates/build2/win32/en-US/Firefox%20Setup%2050.0.exe">https://archive.mozilla.org/pub/firefox/candidates/50.0-candidates/build2/win32/en-US/Firefox%20Setup%2050.0.exe</a>
* Mar file
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/candidates/50.0-candidates/build2/update/win32/en-US/firefox-50.0.complete.mar">https://archive.mozilla.org/pub/firefox/candidates/50.0-candidates/build2/update/win32/en-US/firefox-50.0.complete.mar</a>

Executing poc file will result in:
- 'target' folder is NOT created at all
- update.log:
<span class="quote">&gt; PATCH DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\updatework
&gt; INSTALLATION DIRECTORY C:\Program Files (x86)\Nightly
&gt; WORKING DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\target
&gt; Installation directory and working directory must be the same for non-staged updates. Exiting.</span >
- update.status:
<span class="quote">&gt; failed: 74</span >

2) Firefox 45.5.0esr-build1

* Installed FirefoxESR
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/candidates/45.5.0esr-candidates/build1/win32/en-US/Firefox%20Setup%2045.5.0esr.exe">https://archive.mozilla.org/pub/firefox/candidates/45.5.0esr-candidates/build1/win32/en-US/Firefox%20Setup%2045.5.0esr.exe</a>
* Mar file:
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/candidates/45.5.0esr-candidates/build1/update/win32/en-US/firefox-45.5.0esr.complete.mar">https://archive.mozilla.org/pub/firefox/candidates/45.5.0esr-candidates/build1/update/win32/en-US/firefox-45.5.0esr.complete.mar</a>

Executing poc file will result in:
- 'target' folder is NOT created at all
- update.log:
<span class="quote">&gt; PATCH DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\updatework
&gt; INSTALLATION DIRECTORY C:\Program Files (x86)\Nightly
&gt; WORKING DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\target
&gt; Installation directory and working directory must be the same for non-staged updates. Exiting.</span >
- update.status:
<span class="quote">&gt; failed: 74</span >

3) Latest Firefox Developer Edition 51.0a2 (2016-11-08)

* Installed Firefox
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-aurora/firefox-51.0a2.en-US.win32.installer.exe">https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-aurora/firefox-51.0a2.en-US.win32.installer.exe</a>
* Mar file
<a rel="nofollow" href="https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-aurora/firefox-51.0a2.en-US.win32.complete.mar">https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-aurora/firefox-51.0a2.en-US.win32.complete.mar</a>

Executing poc file will result in:
- 'target' folder is NOT created at all
- update.log:
<span class="quote">&gt; PATCH DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\updatework
&gt; INSTALLATION DIRECTORY C:\Program Files (x86)\Nightly
&gt; WORKING DIRECTORY C:\Users\bogdan.maris\Desktop\invalid.loc.poc\target
&gt; Installation directory and working directory must be the same for non-staged updates. Exiting.</span >
- update.status:
<span class="quote">&gt; failed: 74</span >

Note:
- Nightly directory was the directory where all Firefox versions were installed, this was done to avoid editing the poc file.</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=isnotempty">status-firefox50</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=isnotempty">status-firefox51</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">Flags: <span class="activity-deleted">qe-verify+</span></div></div></div><div class="change-set" id="a23769118_280903"><div class="change" id="aa23769118_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a23769118_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a23769118_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a23769118_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a23769118_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a23769118_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-10 11:17 PST" data-time="1478805438">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2016-5294</div></div></div><div class="change-set" id="a31619865_1689"><div class="change" id="aa31619865_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a31619865_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a31619865_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a31619865_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a31619865_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a31619865_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 08:03 PST" data-time="1486656185">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div class="change-set" id="a38917920_141755"><div class="change" id="aa38917920_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a38917920_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a38917920_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a38917920_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a38917920_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a38917920_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-05-04 20:17 PDT" data-time="1493954240">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Replace requests are failing on Windows and falling back to normal updates"
   href="/show_bug.cgi?id=1362267">1362267</a></div></div></div><div class="change-set" id="a38979364_455785"><div class="change" id="aa38979364_455785">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_455785" id="a38979364_455785"><img src="https://secure.gravatar.com/avatar/f8267efedda3c2e24d5829ef3a9d124e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_455785" id="a38979364_455785"><a class="email " href="/user_profile?user_id=455785" > <span class="fna">Kamil Jozwiak [:kjozwiak]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a38979364_455785"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a38979364_455785">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a38979364_455785">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-05-05 13:21 PDT" data-time="1494015684">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">QA Contact: <span class="activity-deleted">kjozwiak</span></div></div></div><div class="change-set" id="a110817122_141755"><div class="change" id="aa110817122_141755">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_141755" id="a110817122_141755"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_141755" id="a110817122_141755"><a class="email " href="/user_profile?user_id=141755" > <span class="fna">Robert Strong (they/them - no direct email)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a110817122_141755"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a110817122_141755">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1246972#a110817122_141755">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-15 00:17 PDT" data-time="1565853442">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - gDestPath is unused in updater.cpp"
   href="/show_bug.cgi?id=1574080">1574080</a></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1246972&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>