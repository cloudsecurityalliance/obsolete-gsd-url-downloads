<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 1025068 &ndash; VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://bugzilla.suse.com/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=1025068&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=1025068">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=1025068">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=1025068">



    
    <link href="skins/standard/global.css?1411227340"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1411227331" rel="stylesheet"
            type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1411227331" rel="stylesheet"
            type="text/css" ><link href="skins/standard/global.css?1411227340" rel="stylesheet"
            type="text/css" ><link href="skins/standard/show_bug.css?1416528352" rel="stylesheet"
            type="text/css" ><link href="extensions/Voting/web/style.css?1411227348" rel="stylesheet"
            type="text/css" ><!--[if lte IE 7]>
      


      <link href="skins/standard/IE-fixes.css?1411227340" rel="stylesheet"
            type="text/css" >
<![endif]-->

    <link href="skins/contrib/SUSE/global.css?1411227340" rel="stylesheet"
            type="text/css" 
          title="SUSE">

    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1411227335"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1411227333"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1411227329"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1411227329"></script><script type="text/javascript" src="js/yui/json/json-min.js?1411227333"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1411227334"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1411227335"></script><script type="text/javascript" src="js/global.js?1411227336"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 1025068 – VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE",  
                             "show_bug.cgi?id=1025068" );
        document.title = "Bug 1025068 – VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 1025068 – VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1411227336"></script><script type="text/javascript" src="js/field.js?1414105521"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" ><link href="extensions/Testopia/css/testopia.css" rel="stylesheet" type="text/css">
    <link href="extensions/Testopia/extjs/examples/ux/css/RowEditor.css" rel="stylesheet" type="text/css"  />
    <script type="text/javascript">
        Testopia_user = {login: "", id: 0};
        DEFAULT_CASE_STATUS = 'CONFIRMED';
    </script>
  </head>



  <body onload=""
        class="bugzilla-suse-com bz_bug bz_status_RESOLVED bz_product_SUSE_Security_Incidents bz_component_Incidents bz_bug_1025068 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<!--div id="tmp_warning_wnd" style="
    position:fixed; 
    color:red; 
    font-size:20px; 
    top:50px; 
    left:10%; 
    right:10%; 
    padding:1em;
    background-color:#ffffff;
    border:3px solid red;
    z-index:9999;
    text-align:center;">
  This Bugzilla is for TESTING ONLY. All new bugs and comments WILL BE LOST. Use <a href="https://bugzilla.suse.com">bugzilla.suse.com</a> instead.
  <button style="
      background:none;
      border:0;
      box-shadow:none;
      color:red;
      text-shadow:none;
      position:absolute;
      right:0;
      top:0;" onclick="document.getElementById('tmp_warning_wnd').style.display='none';">[X]</button>
</div-->

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;1025068</p>
    </td>

    <td id="subtitle">
      <p class="subheader">VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2019-07-22 14:39:34 UTC</p>
    </td>
</tr>
</table>

<table id="lang_links_container" cellpadding="0" cellspacing="0"
       class="bz_default_hidden"><tr><td>
</td></tr></table>
<ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <!--a id="login_link_top" href="show_bug.cgi?id=1025068&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a-->
  <a id="login_link_top" href="show_bug.cgi?id=1025068&amp;GoAheadAndLogIn=1">Log In</a>


  <form action="show_bug.cgi?id=1025068" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_top"
        onsubmit="return check_mini_login_fields( '_top' );"
  >
    <input id="Bugzilla_login_top" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_top')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_top" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_top')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_top">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_top');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_top');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
<li id="forgot_container_top">
  <span class="separator">| </span>
  <a id="forgot_link_top" href="https://idp-portal.suse.com/univention/self-service/#page=passwordreset">Forgot Password</a>
</li>
</ul>
</div> 

<div id="bugzilla-body">

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2019-07-22 14:39:34">
  <input type="hidden" name="longdesclength" value="61">
  <input type="hidden" name="id" value="1025068">
  <input type="hidden" name="token" value="1635630171-S1xEwDPQ7q0C3Lchu_zOJ4pZmVv09J723QUgGauVk6E">
<div class="bz_alias_short_desc_container edit_form">
        <strike>
     <a href="show_bug.cgi?id=1025068"><b>Bug&nbsp;1025068</b></a> -<span id="summary_alias_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2017-2626</span>) 
      <span id="short_desc_nonedit_display">VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE</span></strike>
     </span>  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">(CVE-2017-2626)
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=glossary.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('VUL-0: CVE-2017-2626: libICE: Weak Entropy Usage in Session Keys in libICE', 'CVE-2017-2626');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=status_resolution_matrix.html">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>

          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=glossary.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Novell Products</td>
      </tr>

    
    
    
    <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >SUSE Security Incidents</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=glossary.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Novell Products</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=SUSE Security Incidents"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Incidents</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=glossary.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=glossary.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">Other
       Other
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority">
          <a href="page.cgi?id=glossary.html#priority">Priority</a></label>:
      </th>
      <td>P3 - Medium
        <label for="severity">
          <b>Severity</b></label>:
       Normal
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=glossary.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=glossary.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Security Team bot</span>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">

    <label for="qa_contact" accesskey="q">

  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#qa_contact"
  >QA Contact:</a>
</label>
</th>
      <td><span class="vcard"><span class="fn">Security Team bot</span>
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'security-team\x40suse.de',
        'security-team\x40suse.de');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=glossary.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=glossary.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">
        <span title="CVSSv3:RedHat:CVE-2017-2626:5.2:(AV:L/AC:L/PR:L/UI:N/S:C/C:L/I:N/A:L) maint:released:sle10-sp3:63742 CVSSv2:NVD:CVE-2017-2626:2.1:(AV:L/AC:L/Au:N/C:P/I:N/A:N) CVSSv3:NVD:CVE-2017-2626:5.5:(AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:N) CVSSv3:SUSE:CVE-2017-2626:5.2:(AV:L/AC:L/PR:L/UI:N/S:C/C:L/I:N/A:L)">CVSSv3:RedHat:CVE-2017-2626:5.2:(AV:L...
        </span>  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - VUL-0: TRACKERBUG: xorg-x11: Multiple Vulnerabilities in X.org (Advisory: X41-2017-001)"
   href="show_bug.cgi?id=1025639">1025639</a> 
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=1025068&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=1025068">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2017-02-13 16:44 UTC by <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2019-07-22 14:39 UTC 
      (<a href="show_activity.cgi?id=1025068">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>5 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="abergmann">abergmann</option>
                <option value="matthias.gerstner">matthias.gerstner</option>
                <option value="meissner">meissner</option>
                <option value="sndirsch">sndirsch</option>
                <option value="tyuan">tyuan</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=glossary.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_foundby">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_foundby"
  >Found By:</a>

</th>
  <td class="field_value "
      id="field_container_cf_foundby"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_nts_priority">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_nts_priority"
  >Services Priority:</a>

</th>
  <td class="field_value "
      id="field_container_cf_nts_priority"  colspan="2"></td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_biz_priority">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_biz_priority"
  >Business Priority:</a>

</th>
  <td class="field_value "
      id="field_container_cf_biz_priority"  colspan="2"></td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_blocker">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_blocker"
  >Blocker:</a>

</th>
  <td class="field_value "
      id="field_container_cf_blocker"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_marketing_qa_status">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_marketing_qa_status"
  >Marketing QA Status:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_marketing_qa_status"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_it_deployment">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_it_deployment"
  >IT Deployment:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_it_deployment"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         <ul>
    <li><a href="tr_new_case.cgi?product=SUSE%20Security%20Incidents&bug=1025068">Create test case</a></li>
</ul><ul>
  <li><a href="enter_bug.cgi?cloned_bug_id=1025068">Clone This Bug</a></li>
</ul>
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="attachment.cgi?id=715740"
               title="View the content of the attachment">
          <b>X41-2017-001.txt</b></a>

          <span class="bz_attach_extra_info">
              (9.90 KB,
                text/plain)

            <br>
            <a href="#attach_715740"
               title="Go to the comment associated with the attachment">2017-02-28 14:58 UTC</a>,

            <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=715740&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=715748"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">icetest.c</span></b></a>

          <span class="bz_attach_extra_info">
              (3.78 KB,
                text/plain)

            <br>
            <a href="#attach_715748"
               title="Go to the comment associated with the attachment">2017-02-28 15:53 UTC</a>,

            <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=715748&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=729646"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">drop in replacement for getentropy() using getrandom()</span></b></a>

          <span class="bz_attach_extra_info">
              (747 bytes,
                text/plain)

            <br>
            <a href="#attach_729646"
               title="Go to the comment associated with the attachment">2017-06-21 09:00 UTC</a>,

            <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=729646&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="attachment.cgi?id=729648"
               title="View the content of the attachment">
          <b>drop in replacement for getentropy() using /dev/urandom</b></a>

          <span class="bz_attach_extra_info">
              (746 bytes,
                text/plain)

            <br>
            <a href="#attach_729648"
               title="Go to the comment associated with the attachment">2017-06-21 09:00 UTC</a>,

            <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=729648&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a5" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="attachment.cgi?id=729649"
               title="View the content of the attachment">
          <b>correct drop in replacement for getentropy() using getrandom()</b></a>

          <span class="bz_attach_extra_info">
              (622 bytes,
                text/plain)

            <br>
            <a href="#attach_729649"
               title="Go to the comment associated with the attachment">2017-06-21 09:10 UTC</a>,

            <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=729649&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a6" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=729681"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Additional patch for openSUSE 42.2 with using these drop-in replacements for getentropy()</span></b></a>

          <span class="bz_attach_extra_info">
              (2.98 KB,
                patch)

            <br>
            <a href="#attach_729681"
               title="Go to the comment associated with the attachment">2017-06-21 12:33 UTC</a>,

            <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=729681&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=729681&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a7" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=729683"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Complete patch for Leap 42.2 with those drop-in replacements for getentropy()</span></b></a>

          <span class="bz_attach_extra_info">
              (5.31 KB,
                patch)

            <br>
            <a href="#attach_729683"
               title="Go to the comment associated with the attachment">2017-06-21 12:46 UTC</a>,

            <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=729683&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=729683&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a8" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=730002"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Merge getrandom() and /dev/urandom usage in one function</span></b></a>

          <span class="bz_attach_extra_info">
              (2.18 KB,
                patch)

            <br>
            <a href="#attach_730002"
               title="Go to the comment associated with the attachment">2017-06-23 09:05 UTC</a>,

            <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730002&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=730002&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a9" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="attachment.cgi?id=730193"
               title="View the content of the attachment">
          <b>runtime check for getrandom(), wrapper around both implementations</b></a>

          <span class="bz_attach_extra_info">
              (1.91 KB,
                text/plain)

            <br>
            <a href="#attach_730193"
               title="Go to the comment associated with the attachment">2017-06-26 11:38 UTC</a>,

            <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730193&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a10" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=730205"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Integrated previous patch by Matthias Gerstner</span></b></a>

          <span class="bz_attach_extra_info">
              (3.08 KB,
                patch)

            <br>
            <a href="#attach_730205"
               title="Go to the comment associated with the attachment">2017-06-26 12:42 UTC</a>,

            <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730205&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=730205&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a11" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=730212"
               title="View the content of the attachment">
          <b>Additional patch for openSUSE 42.2 with using drop-in replacements for getentropy()</b></a>

          <span class="bz_attach_extra_info">
              (2.63 KB,
                patch)

            <br>
            <a href="#attach_730212"
               title="Go to the comment associated with the attachment">2017-06-26 13:57 UTC</a>,

            <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730212&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=730212&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a12" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=730213"
               title="View the content of the attachment">
          <b>Complete patch for Leap 42.2 with that drop-in replacement for getentropy()</b></a>

          <span class="bz_attach_extra_info">
              (5.52 KB,
                patch)

            <br>
            <a href="#attach_730213"
               title="Go to the comment associated with the attachment">2017-06-26 14:01 UTC</a>,

            <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730213&amp;action=edit">Details</a>
            | <a href="attachment.cgi?id=730213&amp;action=diff">Diff</a>
        </td>
      </tr>
      <tr id="a13" class="bz_contenttype_text_x-csrc bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=730361"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">adjusted PoC program</span></b></a>

          <span class="bz_attach_extra_info">
              (4.03 KB,
                text/x-csrc)

            <br>
            <a href="#attach_730361"
               title="Go to the comment associated with the attachment">2017-06-27 11:08 UTC</a>,

            <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730361&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a14" class="bz_contenttype_text_plain">
        <td valign="top">
            <a href="attachment.cgi?id=730982"
               title="View the content of the attachment">
          <b>icetest2.c</b></a>

          <span class="bz_attach_extra_info">
              (4.04 KB,
                text/plain)

            <br>
            <a href="#attach_730982"
               title="Go to the comment associated with the attachment">2017-07-03 08:06 UTC</a>,

            <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=730982&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a15" class="bz_contenttype_text_x-csrc">
        <td valign="top">
            <a href="attachment.cgi?id=731944"
               title="View the content of the attachment">
          <b>improved icetest PoC for SLES11</b></a>

          <span class="bz_attach_extra_info">
              (4.12 KB,
                text/x-csrc)

            <br>
            <a href="#attach_731944"
               title="Go to the comment associated with the attachment">2017-07-11 11:10 UTC</a>,

            <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=731944&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (7)
            <a id="view_all" href="attachment.cgi?bugid=1025068&amp;action=viewall&amp;hide_obsolete=1">View All</a>
        </span>
        <a href="attachment.cgi?bugid=1025068&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=1025068&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1411227336" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-02-13 16:44:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Embargoed until CRD 2017-02-28.

Received via private discussion on mailing list:

Summary and Impact
------------------

libICE depends on arc4random() as well to generate the session cookies,
thereby falling back to the same weak mechanism as libXdmcp. 

For this issue a PoC is available which takes 2-3 seconds to retrieve 
the key.

See also <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - VUL-0: CVE-2017-2625: libXdmcp: Weak entropy usage for session keys in libxdm"
   href="show_bug.cgi?id=1025046">bug 1025046</a>.</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-02-13 16:47:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is about function IceGenerateMagicCookie() in iceauth.c. We don't even have an arc4random() variant in our codestreams:

SUSE:SLE-12:Update/libICE/libICE-1.0.8/src/iceauth.c
SUSE:SLE-11:Update/xorg-x11-libICE/libICE-1.0.4/src/iceauth.c
SUSE:SLE-10-SP3:Update/xorg-x11/xc/lib/ICE/iceauth.c

It's all based on gettimeofday().

There is no final patch available yet. In worst case we can read sensible random data from /dev/?random.

We will give an update when the final patch is available.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-02-13 23:02:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >bugbot adjusting priority</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-02-28 14:57:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >is now public</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-02-28 14:58:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=715740" name="attach_715740" title="X41-2017-001.txt">attachment 715740</a> <a href="attachment.cgi?id=715740&amp;action=edit" title="X41-2017-001.txt">[details]</a></span>
X41-2017-001.txt

X41-2017-001.txt

Weak Entropy Usage in Session Keys in libICE
============================================
Vulnerability Type: Other
Affected Products: libICE
Attack Type: Local
Impact: Escalation of Privileges        
Severity Rating: medium
Confirmed Affected Version: 1.0.9 and lower
Confirmed Patched Version:
Vector: local
CVE: CVE-2017-2626
CVSS Score: 7.1
CVSS Vector: CVSS:3.0/AV:L/AC:L/PR:N/UI:N/S:C/C:H/I:N/A:N

Summary and Impact
------------------

libICE depends on arc4random() as well to generate the session cookies,
thereby falling back to the same weak mechanism as libXdmcp:

        IceGenerateMagicCookie (
                int len
        )
        {
            char    *auth;
        #ifndef HAVE_ARC4RANDOM_BUF
            long    ldata[2];
            int     seed;
            int     value;
            int     i;
        #endif
        
            if ((auth = malloc (len + 1)) == NULL)
                return (NULL);
        
        #ifdef HAVE_ARC4RANDOM_BUF
            arc4random_buf(auth, len);
        #else
        #ifdef ITIMER_REAL
            {
                struct timeval  now;
                X_GETTIMEOFDAY (&amp;now);
                ldata[0] = now.tv_sec;
                ldata[1] = now.tv_usec;
            }
        #else
            {
                long    time ();
                ldata[0] = time ((long *) 0);
                ldata[1] = getpid ();
            }
        #endif
            seed = (ldata[0]) + (ldata[1] &lt;&lt; 16);
            srand (seed);
            for (i = 0; i &lt; len; i++)
            {
                value = rand ();
                auth[i] = value &amp; 0xff;
            }
        #endif
            auth[len] = '\0';
            return (auth);
        }

For this issue a PoC is available which takes 2-3 seconds to retrieve
the key:

<a href="https://www.x41-dsec.de/lab/sources/icetest.c">https://www.x41-dsec.de/lab/sources/icetest.c</a>

Workaround
----------

Compile against libbsd</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-02-28 15:53:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=715748" name="attach_715748" title="icetest.c">attachment 715748</a> <a href="attachment.cgi?id=715748&amp;action=edit" title="icetest.c">[details]</a></span>
icetest.c

a reproducer posted by x41.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-05-18 12:36:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Meanwhile a fix came into git (libICE):

ff5e59f32255913bb1cdf51441b98c9107ae165b</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bernhard Wiedemann</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-11 20:01:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is an autogenerated message for OBS integration:
This bug (1025068) was mentioned in
<a href="https://build.opensuse.org/request/show/502905">https://build.opensuse.org/request/show/502905</a> Factory / libICE</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-11 20:19:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Factory is done. See above.

I also prepared updated packages for sle12, sle11 and even sle10. But now I noticed, that it didn't make any sense. :-(

getentropy() needs glibc 2.25, which is currently only provided by factory. Leap 42.2/42.3 doesn't fullfill this requirement, let alone sle12, sle11, sle10. 

arc4random_buf() needs libbsd. Do we really want to add this requirement for the Leap products (42.2/42.3)? On sle12, sle11, sle10 we apparently ship no libbsd.

Matthias? Marcus?</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 09:00:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=729646" name="attach_729646" title="drop in replacement for getentropy() using getrandom()">attachment 729646</a> <a href="attachment.cgi?id=729646&amp;action=edit" title="drop in replacement for getentropy() using getrandom()">[details]</a></span>
drop in replacement for getentropy() using getrandom()</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 09:00:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=729648" name="attach_729648" title="drop in replacement for getentropy() using /dev/urandom">attachment 729648</a> <a href="attachment.cgi?id=729648&amp;action=edit" title="drop in replacement for getentropy() using /dev/urandom">[details]</a></span>
drop in replacement for getentropy() using /dev/urandom</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 09:08:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hi Stefan,

(In reply to <a href="mailto:sndirsch&#64;suse.com">sndirsch&#64;suse.com</a> from <a href="show_bug.cgi?id=1025068#c9">comment #9</a>)
<span class="quote">&gt; getentropy() needs glibc 2.25, which is currently only provided by factory. Leap 42.2/42.3 doesn't fullfill this requirement, let alone sle12, sle11, sle10. 
&gt; 
&gt; arc4random_buf() needs libbsd. Do we really want to add this requirement for the Leap products (42.2/42.3)? On sle12, sle11, sle10 we apparently ship no libbsd.
&gt; 
&gt; Matthias? Marcus?</span >

Given how easy this is to exploit I'd like to see this fixed in some way on
the older versions.

How about using a drop-in replacement for getentropy() on the versions that
miss it? I've provided examples:

- in <span class="bz_obsolete"><a href="attachment.cgi?id=729646" name="attach_729646" title="drop in replacement for getentropy() using getrandom()">attachment 729646</a> <a href="attachment.cgi?id=729646&amp;action=edit" title="drop in replacement for getentropy() using getrandom()">[details]</a></span> using the getrandom() system call
- in <span class=""><a href="attachment.cgi?id=729648" name="attach_729648" title="drop in replacement for getentropy() using /dev/urandom">attachment 729648</a> <a href="attachment.cgi?id=729648&amp;action=edit" title="drop in replacement for getentropy() using /dev/urandom">[details]</a></span> using /dev/urandom, for versions that don't have the
  getrandom() system call.

If this works for you then we could to the same for the other <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - VUL-0: CVE-2017-2625: libXdmcp: Weak entropy usage for session keys in libxdm"
   href="show_bug.cgi?id=1025046">bug 1025046</a> and
<a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - VUL-0: xorg-x11-server: Weak Entropy Usage in xorg server in GenerateRandomData()"
   href="show_bug.cgi?id=1025084">bug 1025084</a>. The code should be reviewed closely by somebody else than me,
however, if we are going to use it.</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 09:10:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=729649" name="attach_729649" title="correct drop in replacement for getentropy() using getrandom()">attachment 729649</a> <a href="attachment.cgi?id=729649&amp;action=edit" title="correct drop in replacement for getentropy() using getrandom()">[details]</a></span>
correct drop in replacement for getentropy() using getrandom()</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 09:13:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Comment on <span class="bz_obsolete"><a href="attachment.cgi?id=729646" name="attach_729646" title="drop in replacement for getentropy() using getrandom()">attachment 729646</a> <a href="attachment.cgi?id=729646&amp;action=edit" title="drop in replacement for getentropy() using getrandom()">[details]</a></span>
drop in replacement for getentropy() using getrandom()

#include &lt;linux/random.h&gt;
#include &lt;sys/syscall.h&gt;
#include &lt;errno.h&gt;

int getentropy(void *buffer, size_t length)
{
	int res;
	size_t filled = 0;

	if( length &gt; 256 )
	{
		errno = EIO;
		return -1;
	}

	while( filled &lt; length )
	{
		/*
		 * glibc does not contain a syscall wrapper for this in older
		 * versions
		 */
		res = syscall(SYS_getrandom, (char*)buffer + filled, length - filled, 0);

		if( res == -1 )
		{
			if( errno == EINTR )
				continue;

			return -1;
		}
		else if( res == 0 )
		{
			// no more bytes available? should not happen
			errno = EIO;
			return -1;
		}

		filled += res;
	}

	return 0;
}</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 12:33:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=729681&amp;action=diff" name="attach_729681" title="Additional patch for openSUSE 42.2 with using these drop-in replacements for getentropy()">attachment 729681</a> <a href="attachment.cgi?id=729681&amp;action=edit" title="Additional patch for openSUSE 42.2 with using these drop-in replacements for getentropy()">[details]</a></span>
Additional patch for openSUSE 42.2 with using these drop-in replacements for getentropy()</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 12:46:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=729683&amp;action=diff" name="attach_729683" title="Complete patch for Leap 42.2 with those drop-in replacements for getentropy()">attachment 729683</a> <a href="attachment.cgi?id=729683&amp;action=edit" title="Complete patch for Leap 42.2 with those drop-in replacements for getentropy()">[details]</a></span>
Complete patch for Leap 42.2 with those drop-in replacements for getentropy()</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 12:51:12 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Apparently Leap 42.2 doesn't provide getrandom() either or I did something wrong. Can you confirm this, please?

[    7s] checking for arc4random_buf... no
[    7s] checking for getentropy... no
[    7s] checking for getrandom... no</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 13:25:29 UTC
        </span>
      </div>



<pre class="bz_comment_text" >mattzhias patch is not using getrandom itself, it uses syscall()</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 16:24:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Which means what? How is this related to configure not finding getrandom() on Leap 42.2?</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-21 16:29:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Or is it only possible to figure out, whether getrandom() is available during runtime? I can rewrite the patch, so the getrandom() replacement is tried. And if that fails, use the /dev/urandom replacement. I just need to know ...</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-22 10:08:06 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Stefan Dirsch from <a href="show_bug.cgi?id=1025068#c19">comment #19</a>)
<span class="quote">&gt; Which means what? How is this related to configure not finding getrandom()
&gt; on Leap 42.2?</span >

The thing is that glibc only recently added a wrapper/declaration for the getrandom system call. It's been added to version 2.25:

<a href="https://sourceware.org/ml/libc-alpha/2017-02/msg00079.html">https://sourceware.org/ml/libc-alpha/2017-02/msg00079.html</a>

The system call was implemented in kernel for a much longer time, however:

<a href="https://github.com/torvalds/linux/commit/c6e9d6f388947">https://github.com/torvalds/linux/commit/c6e9d6f388947</a>
<a href="https://lwn.net/Articles/711013/">https://lwn.net/Articles/711013/</a>

The configure check seems to look for the system call declaration, which is not present. The code I provided uses the syscall() approach to work around the missing declaration.

I don't know if there's a configure check to only check whether the system call is implemented in the kernel (would return ENOSYS if not so).

The problem is also stated here:

<a href="http://permalink.gmane.org/gmane.comp.lib.glibc.bugs/22297">http://permalink.gmane.org/gmane.comp.lib.glibc.bugs/22297</a>

We could change the drop-in replacement to check at runtime, whether the getrandom() system call works, and fall back to reading /dev/urandom in case ENOSYS is returned. I can adjust the code if and provide to you, if you need it.</pre>
    </div><div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-22 21:38:13 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Matthias Gerstner from <a href="show_bug.cgi?id=1025068#c21">comment #21</a>)
<span class="quote">&gt; We could change the drop-in replacement to check at runtime, whether the
&gt; getrandom() system call works, and fall back to reading /dev/urandom in case
&gt; ENOSYS is returned. I can adjust the code if and provide to you, if you need
&gt; it.</span >

That would be helpful and would make sense, I think. Of course I can just try both drop-in replacements as proposed in <a href="show_bug.cgi?id=1025068#c20">comment #20</a>.</pre>
    </div><div id="c23" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-23 09:05:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=730002&amp;action=diff" name="attach_730002" title="Merge getrandom() and /dev/urandom usage in one function">attachment 730002</a> <a href="attachment.cgi?id=730002&amp;action=edit" title="Merge getrandom() and /dev/urandom usage in one function">[details]</a></span>
Merge getrandom() and /dev/urandom usage in one function

How about this one? I guess I need a review here. ;-)</pre>
    </div><div id="c24" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 11:38:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=730193" name="attach_730193" title="runtime check for getrandom(), wrapper around both implementations">attachment 730193</a> <a href="attachment.cgi?id=730193&amp;action=edit" title="runtime check for getrandom(), wrapper around both implementations">[details]</a></span>
runtime check for getrandom(), wrapper around both implementations</pre>
    </div><div id="c25" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 11:43:39 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="mailto:sndirsch&#64;suse.com">sndirsch&#64;suse.com</a> from <a href="show_bug.cgi?id=1025068#c23">comment #23</a>)
<span class="quote">&gt; Created <span class="bz_obsolete"><a href="attachment.cgi?id=730002&amp;action=diff" name="attach_730002" title="Merge getrandom() and /dev/urandom usage in one function">attachment 730002</a> <a href="attachment.cgi?id=730002&amp;action=edit" title="Merge getrandom() and /dev/urandom usage in one function">[details]</a></span>
&gt; Merge getrandom() and /dev/urandom usage in one function
&gt; 
&gt; How about this one? I guess I need a review here. ;-)</span >

Sorry for the delay but I was sick for some days.

I'd rather keep the two approaches of using getrandom() / urandom clearly
separated, even if it means some duplicate code. It's easier to read and we
can also more easily compare it to similar wrappers in glibc, for example.

Also we need a check for the definition of SYS_getrandom.

Please find a new suggestion in <span class=""><a href="attachment.cgi?id=730193" name="attach_730193" title="runtime check for getrandom(), wrapper around both implementations">attachment 730193</a> <a href="attachment.cgi?id=730193&amp;action=edit" title="runtime check for getrandom(), wrapper around both implementations">[details]</a></span>.</pre>
    </div><div id="c26" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 12:42:13 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=730205&amp;action=diff" name="attach_730205" title="Integrated previous patch by Matthias Gerstner">attachment 730205</a> <a href="attachment.cgi?id=730205&amp;action=edit" title="Integrated previous patch by Matthias Gerstner">[details]</a></span>
Integrated previous patch by Matthias Gerstner

Added configure check for SYS_getrandom, which doesn't seem to work. :-( 

checking for arc4random_buf in -lbsd... no
checking for asprintf... yes
checking for arc4random_buf... no
checking for getentropy... no
checking for SYS_getrandom... no

At least not on openSUSE 42.2.

Renamed getentropy() wrapper to getentropy_emulate().</pre>
    </div><div id="c27" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 12:46:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm afraid I haven't understood, what you've meant with

  &quot;Also we need a check for the definition of SYS_getrandom&quot;

:-(</pre>
    </div><div id="c28" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 13:39:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Sorry, should have been more clear. I was referring to the

  #ifdef SYS_getrandom

that is already in the new code I suggested.</pre>
    </div><div id="c29" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 13:50:36 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Ok. So no need for a configure check. ;-)</pre>
    </div><div id="c30" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 13:57:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=730212&amp;action=diff" name="attach_730212" title="Additional patch for openSUSE 42.2 with using drop-in replacements for getentropy()">attachment 730212</a> <a href="attachment.cgi?id=730212&amp;action=edit" title="Additional patch for openSUSE 42.2 with using drop-in replacements for getentropy()">[details]</a></span>
Additional patch for openSUSE 42.2 with using drop-in replacements for getentropy()</pre>
    </div><div id="c31" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-26 14:01:33 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=730213&amp;action=diff" name="attach_730213" title="Complete patch for Leap 42.2 with that drop-in replacement for getentropy()">attachment 730213</a> <a href="attachment.cgi?id=730213&amp;action=edit" title="Complete patch for Leap 42.2 with that drop-in replacement for getentropy()">[details]</a></span>
Complete patch for Leap 42.2 with that drop-in replacement for getentropy()</pre>
    </div><div id="c32" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 11:08:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=730361" name="attach_730361" title="adjusted PoC program">attachment 730361</a> <a href="attachment.cgi?id=730361&amp;action=edit" title="adjusted PoC program">[details]</a></span>
adjusted PoC program

Let's not forget about the QA reproducer so we can check whether our patch really works. I'm attached an adjusted variant of the PoC program with which I was able to reproduce the issue. I've tested this on SLE-12 SP2.

For compilation you need to install:

  zypper in libICE-devel

Then build:

  gcc -oicetest2 icetest2.c -O2 -lICE

Remove old ICE connections and restart display manager (without this there seems to be a too high time jitter from boot for the PoC to work):

  rm /tmp/.ICE-unix/*
  systemctl restart xdm

Run the PoC:

  ./icetest2

*Without* the bugfix this should show:

<span class="quote">&gt; Connection opened
&gt; Using time: 1498561424 212899</span >

*After* the bugfix this should show:

<span class="quote">&gt; Failed</span ></pre>
    </div><div id="c33" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 11:45:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for the reproducer! I will test this later.

On sle10 O_CLOEXEC option for open() is not available yet. Also it isn''t supported before Kernel 2.6.23 and we still ship Kernel 2.6.16 with sle10.

So I've removed this option and close the FD before returning from the getentropy_urandom(...) function. Hope this makes sense.</pre>
    </div><div id="c34" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 12:15:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Stefan Dirsch from <a href="show_bug.cgi?id=1025068#c33">comment #33</a>)
<span class="quote">&gt; Thanks for the reproducer! I will test this later.</span >

Appears to work. Tested on Leap 42.3 with my current patches. :-)</pre>
    </div><div id="c35" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 12:30:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Patches submitted for Leap 42.2, sle12, sle11 and sle10. Reassigning back to security team.</pre>
    </div><div id="c36" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bernhard Wiedemann</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 14:00:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is an autogenerated message for OBS integration:
This bug (1025068) was mentioned in
<a href="https://build.opensuse.org/request/show/506471">https://build.opensuse.org/request/show/506471</a> 42.2 / libICE</pre>
    </div><div id="c38" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 14:08:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="mailto:sndirsch&#64;suse.com">sndirsch&#64;suse.com</a> from <a href="show_bug.cgi?id=1025068#c33">comment #33</a>)

<span class="quote">&gt; So I've removed this option and close the FD before returning from the
&gt; getentropy_urandom(...) function. Hope this makes sense.</span >

That's correct but also leads me to a bug in my code: The close() needs to be
added to all exit paths in all codestreams like this, otherwise there's a file
descriptor leak:

<span class="quote">&gt; int getentropy_urandom(void *buffer, size_t length)
&gt; {
&gt; 	int random_fd = -1;
&gt; 	ssize_t res = -1;
&gt; 	size_t filled = 0;
&gt; 
&gt; 	if( length &gt; 256 )
&gt; 	{
&gt; 		errno = EIO;
&gt; 		return -1;
&gt; 	}
&gt; 
&gt; 	random_fd = open(&quot;/dev/urandom&quot;, O_RDONLY | O_CLOEXEC);
&gt; 
&gt; 	if( random_fd == -1 )
&gt; 	{
&gt; 		return -1;
&gt; 	}
&gt; 
&gt; 	while( filled &lt; length )
&gt; 	{
&gt; 		res = read(random_fd, (char*)buffer + filled, length - filled);
&gt; 
&gt; 		if( res == -1 )
&gt; 		{
&gt; 			// shouldn't actually happen acc. to man(4) random,
&gt; 			// but you never know
&gt; 			if( errno == EINTR )
&gt; 				continue;
&gt; 
&gt; 			close(random_fd);
&gt; 			return -1;
&gt; 		}
&gt; 		else if( res == 0 )
&gt; 		{
&gt; 			// no more bytes available? should not happen
&gt; 			close(random_fd);
&gt; 			errno = EIO;
&gt; 			return -1;
&gt; 		}
&gt; 
&gt; 		filled += res;
&gt; 	}
&gt; 
&gt; 	close(random_fd);
&gt; 	return 0;
&gt; }</span >

Can you please fix this, too? Sorry that this bug turned into such a monster
:-(</pre>
    </div><div id="c39" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 14:35:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Matthias Gerstner from <a href="show_bug.cgi?id=1025068#c38">comment #38</a>)
<span class="quote">&gt; &gt; So I've removed this option and close the FD before returning from the
&gt; &gt; getentropy_urandom(...) function. Hope this makes sense.
&gt; 
&gt; That's correct but also leads me to a bug in my code: The close() needs to be
&gt; added to all exit paths in all codestreams like this, otherwise there's a
&gt; file descriptor leak:
&gt; Can you please fix this, too? </span >

done. :-)

<span class="quote">&gt; Sorry that this bug turned into such a monster &gt; :-(</span >

np</pre>
    </div><div id="c40" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bernhard Wiedemann</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-27 16:00:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is an autogenerated message for OBS integration:
This bug (1025068) was mentioned in
<a href="https://build.opensuse.org/request/show/506493">https://build.opensuse.org/request/show/506493</a> 42.2 / libICE</pre>
    </div><div id="c43" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-01 08:28:48 UTC
        </span>
      </div>



<pre class="bz_comment_text" >An update workflow for this issue was started.
This issue was rated as moderate.
Please submit fixed packages until 2017-07-17.
When done, reassign the bug to <a href="mailto:security-team&#64;suse.de">security-team&#64;suse.de</a>.
<a href="https://swamp.suse.de/webswamp/wf/63741">https://swamp.suse.de/webswamp/wf/63741</a></pre>
    </div><div id="c44" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-03 08:06:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=730982" name="attach_730982" title="icetest2.c">attachment 730982</a> <a href="attachment.cgi?id=730982&amp;action=edit" title="icetest2.c">[details]</a></span>
icetest2.c

QA REPRODUCER:

gcc -O2 -Wall -g -o icetest2 icetest2.c  -lICE
./icetest2

it should NOT report &quot;Connection opened&quot; like:
Trying connection local/jet.franken.de:&#64;/tmp/.ICE-unix/2777
Connection opened
Using time: 1498981551 122280</pre>
    </div><div id="c45" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-06 22:10:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-SU-2017:1801-1: An update that fixes one vulnerability is now available.

Category: security (moderate)
Bug References: 1025068
CVE References: CVE-2017-2626
Sources used:
openSUSE Leap 42.2 (src):    libICE-1.0.9-5.3.1</pre>
    </div><div id="c46" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tony Yuan</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 05:17:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >When I am running the test case(icetest2) on sles11sp4. It seems it's falling in infinite loop and can never exit. The gnome-session daemon uses up 100% cpu.  Even after I kill the icetest2 process the gnome-session still uses 100% cpu. I have to reboot for gnome-session to go back to normal.

The result is the same regardless of whether I install the update or not.</pre>
    </div><div id="c47" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tony Yuan</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 05:19:48 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The test case work well on sles12sp2 without the problem on #c46</pre>
    </div><div id="c48" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 09:00:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hmm. Even before security update? Have you read instructions of <a href="show_bug.cgi?id=1025068#c32">comment #32</a>?

<span class="quote">&gt; [...]
&gt; systemctl restart xdm</span >

Since we did not have systemd on sle11 yet, this needs to be

  rcxdm restart

Just to be sure ...</pre>
    </div><div id="c49" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tony Yuan</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 09:16:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Stefan Dirsch from <a href="show_bug.cgi?id=1025068#c48">comment #48</a>)
<span class="quote">&gt; Hmm. Even before security update? Have you read instructions of <a href="show_bug.cgi?id=1025068#c32">comment #32</a>?</span >

Yes, I followed the instructions of <a href="show_bug.cgi?id=1025068#c32">comment #32</a>


<span class="quote">&gt; 
&gt; &gt; [...]
&gt; &gt; systemctl restart xdm
&gt; 
&gt; Since we did not have systemd on sle11 yet, this needs to be
&gt; 
&gt;   rcxdm restart
&gt; 
&gt; Just to be sure ...</span >

Yes, rcxdm restart (or telinit 3, telinit 5)</pre>
    </div><div id="c50" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stefan Dirsch</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 09:55:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Then I don't know either. It is my understanding that gnome-session is not running before one is doing a login, right?

I believe I was testing without login at all. I was logged in into the VM as root via ssh, removed the sockets below  /tmp/.ICE-unix, restarted display manager and then ran the reproducer withouth having access to any X display.

Matthias, can you help us here?</pre>
    </div><div id="c51" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 12:43:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Stefan Dirsch from <a href="show_bug.cgi?id=1025068#c50">comment #50</a>)
<span class="quote">&gt; Then I don't know either. It is my understanding that gnome-session is not
&gt; running before one is doing a login, right?
&gt; 
&gt; I believe I was testing without login at all. I was logged in into the VM as
&gt; root via ssh, removed the sockets below  /tmp/.ICE-unix, restarted display
&gt; manager and then ran the reproducer withouth having access to any X display.</span >

Some local user must be logged in with a display manager like gdm that uses libICE for communication. Otherwise there should be no sockets in /tmp/.ICE-unix to brute force.
 
<span class="quote">&gt; Matthias, can you help us here?</span >

Yeah I can reproduce the infinite loop in gnome-session on SLES-11-SP4 as well. gnome-session is the daemon that implements the other end of the libICE authentication in this scenario. After a long time of debugging it fell on my head. There's a file descriptor leak, probably in gnome-session or some X library on SLES-11-SP4. When you look at

  ls -l /proc/`pidof gnome-session`/fd

you'll see that 1023 file descriptors are opened by gnome-session and thus it can't accept() any more requests from the icetest2 PoC application. You'll also get a large .xsession-errors file in the logged in user's home directory with lines like this:

  _IceTransSocketUNIXAccept: accept() failed

All further communication of the gnome-session daemon then fails and the open gnome session is more or less broken, gnome-session wasting resources trying to communicate.

Long story short: There's also some local DoS in the gdm/X setup on SLES-11-SP4 allowing a local user to perform ~1024 unsuccessful calls to IceOpenConnection() and the gdm session will break.

I haven't found the exact location where the leak occurs. Will need to dig more into the sources.</pre>
    </div><div id="c52" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-10 14:58:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >So I've found the issue in gnome-session causing the file descriptor leak.
Basically this commit is missing:

<a href="https://github.com/GNOME/gnome-session/commit/b0dc999e0b45355314616321dbb6cb71e729fc9d">https://github.com/GNOME/gnome-session/commit/b0dc999e0b45355314616321dbb6cb71e729fc9d</a>

I've made a branch of gnome-session in

  home:mgerstner:branches:SUSE:SLE-11-SP1:Update/gnome-session

containing this fix. Using this variant of gnome-session the issue goes away.
For this issue we should open a bug against gnome-session maintainers, might
even we worth a CVE, because it's an easy local denial of service, but only in
old software.

However, even with fixed gnome-session, it seems the PoC is still not working
(failing). This might be due to a slightly different random data seed used in
SLE-11-SP4. I might investigate this further tomorrow.</pre>
    </div><div id="c53" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-11 11:10:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=731944" name="attach_731944" title="improved icetest PoC for SLES11">attachment 731944</a> <a href="attachment.cgi?id=731944&amp;action=edit" title="improved icetest PoC for SLES11">[details]</a></span>
improved icetest PoC for SLES11

So I've been able to reproduce the PoC on SLES11-SP4 now. Using the gnome-session package from <a href="show_bug.cgi?id=1025068#c52">comment#52</a> and using this new attachment icetest3.c. This PoC worked reliably multiple times for me. The reason why the previous PoC was not working well was that on SLES11-SP4 the file system does not store nanosecond precision timestamps for the sockets in /tmp/.ICE-unix/*. Therefore the interval chosen by the previous PoC was not big enough. The new PoC cycles through all possible values that IceGenerateMagicCookie() can use. It doesn't take much longer to run.

Regarding the DoS issue in gnome-session on SLES11-SP4 I've submitted a CVE request and will post to oss-sec, security team will open a separate bug for that.

Please tell me when there are any other issues with testing this.</pre>
    </div><div id="c54" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-11 19:13:34 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:1835-1: An update that fixes one vulnerability is now available.

Category: security (moderate)
Bug References: 1025068
CVE References: CVE-2017-2626
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP2 (src):    libICE-1.0.8-10.1
SUSE Linux Enterprise Server for Raspberry Pi 12-SP2 (src):    libICE-1.0.8-10.1
SUSE Linux Enterprise Server 12-SP2 (src):    libICE-1.0.8-10.1
SUSE Linux Enterprise Desktop 12-SP2 (src):    libICE-1.0.8-10.1</pre>
    </div><div id="c55" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tony Yuan</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-12 06:59:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I created a branch for gnome-session from yours and tested the new reproducer with the gnome-session. It works well. 

A question: should we approve the sle11sp4 libice update now or wait until the fixed gnome-session update is available?</pre>
    </div><div id="c56" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Matthias Gerstner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-12 08:30:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >For the record: We've opened <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - VUL-1: CVE-2017-11171: gnome-session: Bad reference counting in the context of accept_ice_connection() ingsm-xsmp-server.c in old versions of gnome-session up until version 2.29.92allows a local attacker to establish ICE connections to gn"
   href="show_bug.cgi?id=1048274">bug 1048274</a> for the gnome-session issue.

This is independent of the libICE issue handled in this bug. The gnome-session
bugfix is only required for testing the PoC for the libICE bug.</pre>
    </div><div id="c57" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-12 09:05:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >If the ICE issue is now fixed, you can approve it even before we have a gnome-session fix</pre>
    </div><div id="c58" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-12 19:10:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:1848-1: An update that fixes one vulnerability is now available.

Category: security (moderate)
Bug References: 1025068
CVE References: CVE-2017-2626
Sources used:
SUSE Linux Enterprise Software Development Kit 11-SP4 (src):    xorg-x11-libICE-7.4-3.1
SUSE Linux Enterprise Server 11-SP4 (src):    xorg-x11-libICE-7.4-3.1
SUSE Linux Enterprise Debuginfo 11-SP4 (src):    xorg-x11-libICE-7.4-3.1</pre>
    </div><div id="c59" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-10-25 19:18:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >released</pre>
    </div><div id="c60" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1025068#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-02-01 17:10:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:0337-1: An update that fixes one vulnerability is now available.

Category: security (moderate)
Bug References: 1025068
CVE References: CVE-2017-2626
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP3 (src):    libICE-1.0.8-12.1
SUSE Linux Enterprise Server 12-SP3 (src):    libICE-1.0.8-12.1
SUSE Linux Enterprise Desktop 12-SP3 (src):    libICE-1.0.8-12.1</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=1025068">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=1025068">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=1025068">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <!--a id="login_link_bottom" href="show_bug.cgi?id=1025068&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a-->
  <a id="login_link_bottom" href="show_bug.cgi?id=1025068&amp;GoAheadAndLogIn=1">Log In</a>


  <form action="show_bug.cgi?id=1025068" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_bottom"
        onsubmit="return check_mini_login_fields( '_bottom' );"
  >
    <input id="Bugzilla_login_bottom" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_bottom" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_bottom" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_bottom">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_bottom');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_bottom');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
<li id="forgot_container_bottom">
  <span class="separator">| </span>
  <a id="forgot_link_bottom" href="https://idp-portal.suse.com/univention/self-service/#page=passwordreset">Forgot Password</a>
</li>
</ul>
  </li>

  
    


  <form id="testopia_helper_frm"></form><ul class="links">
    <li>Legal: </li>
    <li><a href="http://en.opensuse.org/Terms_of_site">openSUSE</a></li>
    <li><a href="https://www.suse.com/company/legal/">SUSE</a></li>
  </ul>
</ul>

  <div class="outro"></div>
</div>


</body>
</html>