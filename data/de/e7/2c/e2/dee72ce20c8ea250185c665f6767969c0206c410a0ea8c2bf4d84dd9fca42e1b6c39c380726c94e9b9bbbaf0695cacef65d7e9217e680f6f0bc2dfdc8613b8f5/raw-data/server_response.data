<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#763780 - apt-get: CVE-2014-7206: Insecure temporary changelog handling - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=763780&quot;&gt;763780&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:763780@bugs.debian.org">#763780</a><br>
apt-get: CVE-2014-7206: Insecure temporary changelog handling</h1>
<div class="versiongraph"><a href="version.cgi?package=apt;found=apt%2F0.8.11;info=1;collapse=1;fixed=apt%2F1.0.9.2;fixed=0.9.7.9%2Bdeb7u6;fixed=apt%2F1.1~exp4;absolute=0"><img alt="version graph" src="version.cgi?absolute=0;width=2;fixed=apt%2F1.0.9.2;fixed=0.9.7.9%2Bdeb7u6;fixed=apt%2F1.1~exp4;height=2;found=apt%2F0.8.11;package=apt;collapse=1"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=apt">apt</a>;
Maintainer for <a href="pkgreport.cgi?package=apt">apt</a> is <a href="pkgreport.cgi?maint=deity%40lists.debian.org">APT Development Team &lt;deity@lists.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=apt">apt</a> is <a href="pkgreport.cgi?src=apt">src:apt</a> (<a href="https://tracker.debian.org/pkg/apt">PTS</a>, <a href="https://buildd.debian.org/apt">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=apt">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=guillem%40debian.org">Guillem Jover &lt;guillem@debian.org&gt;</a></p>
  <p>Date: Thu,  2 Oct 2014 16:33:07 UTC</p>

<p>Severity: <em class="severity">serious</em></p>
<p>Tags: patch, security</p>

<p>Found in version apt/0.8.11</p>
<p>Fixed in versions apt/1.0.9.2, 0.9.7.9+deb7u6, apt/1.1~exp4</p>

<p><strong>Done:</strong> Michael Vogt &lt;mvo@debian.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p></div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=763780;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1412267591 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#763780</code>; Package <code>apt</code>.
 (Thu, 02 Oct 2014 16:33:11 GMT) (<a href="bugreport.cgi?bug=763780;msg=2">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Guillem Jover &lt;guillem@debian.org&gt; -->
<!-- time:1412267591 -->
<strong>Acknowledgement sent</strong>
to <code>Guillem Jover &lt;guillem@debian.org&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Thu, 02 Oct 2014 16:33:11 GMT) (<a href="bugreport.cgi?bug=763780;msg=4">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=763780;msg=5">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=5">mbox</a>, <a href="mailto:763780@bugs.debian.org?subject=Re%3A%20apt-get%3A%20Insecure%20temporary%20changelog%20handling&amp;body=On%20Thu%2C%202%20Oct%202014%2018%3A29%3A45%20%2B0200%20Guillem%20Jover%20%3Cguillem%40debian.org%3E%20wrote%3A%0A%3E%20Package%3A%20apt%0A%3E%20Version%3A%200.8.7%0A%3E%20Severity%3A%20serious%0A%3E%20Tags%3A%20security%20patch%0A%3E%20%0A%3E%20Hi%21%0A%3E%20%0A%3E%20I%27ve%20found%20an%20instance%20of%20insecure%20temporary%20filenames%20handling.%20The%0A%3E%20problem%20is%20that%20the%20code%20correctly%20creates%20a%20temporary%20directory%2C%20but%0A%3E%20then%20uses%20that%20name%20as%20just%20a%20prefix%20for%20the%20created%20changelog%0A%3E%20filename%2C%20thus%20creating%20it%20alongside%20the%20tamporary%20directory%20%28instead%0A%3E%20of%20inside%20of%20it%29%2C%20and%20making%20it%20very%20much%20predictable.%20This%20is%20worsened%0A%3E%20due%20to%20the%20time%20it%20takes%20apt-get%20to%20download%20the%20changelog%20from%20the%20net%2C%0A%3E%20which%20gives%20a%20very%20huge%20window%20to%20use%20that%20pathname.%0A%3E%20%0A%3E%20Attached%20a%20patch%20fixing%20this.%20This%20affects%20all%20versions%20starting%20from%0A%3E%20the%20one%20in%20squeeze.%0A%3E%20%0A%3E%20I%27m%20not%20sure%20if%20this%20deserves%20a%20CVE%20or%20perhaps%20a%20lower%20severity%3F%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20Guillem%0A&amp;References=%3C20141002162945.GA14412%40gaara.hadrons.org%3E&amp;In-Reply-To=%3C20141002162945.GA14412%40gaara.hadrons.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=guillem%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Guillem Jover &lt;guillem@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> submit@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> apt-get: Insecure temporary changelog handling</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 2 Oct 2014 18:29:45 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=763780;msg=5">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Package: apt
Version: 0.8.7
Severity: serious
Tags: security patch

Hi!

I&#39;ve found an instance of insecure temporary filenames handling. The
problem is that the code correctly creates a temporary directory, but
then uses that name as just a prefix for the created changelog
filename, thus creating it alongside the tamporary directory (instead
of inside of it), and making it very much predictable. This is worsened
due to the time it takes apt-get to download the changelog from the net,
which gives a very huge window to use that pathname.

Attached a patch fixing this. This affects all versions starting from
the one in squeeze.

I&#39;m not sure if this deserves a CVE or perhaps a lower severity?

Thanks,
Guillem
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=763780;filename=0001-apt-get-Create-the-temporary-downloaded-changelog-in.patch;msg=5">0001-apt-get-Create-the-temporary-downloaded-changelog-in.patch</a> (text/x-diff, attachment)]</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- request_addr: Michael Vogt &lt;mvo@debian.org&gt; -->
<!-- time:1412284890 -->
<strong>Reply sent</strong>
to <code>Michael Vogt &lt;mvo@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Thu, 02 Oct 2014 21:21:30 GMT) (<a href="bugreport.cgi?bug=763780;msg=7">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: Guillem Jover &lt;guillem@debian.org&gt; -->
<!-- time:1412284890 -->
<strong>Notification sent</strong>
to <code>Guillem Jover &lt;guillem@debian.org&gt;</code>:<br>
Bug acknowledged by developer.
 (Thu, 02 Oct 2014 21:21:30 GMT) (<a href="bugreport.cgi?bug=763780;msg=9">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 763780-close@bugs.debian.org (<a href="bugreport.cgi?bug=763780;msg=10">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=10">mbox</a>, <a href="mailto:763780@bugs.debian.org?In-Reply-To=%3CE1XZnmY-0004Mm-Md%40franck.debian.org%3E&amp;body=On%20Thu%2C%2002%20Oct%202014%2021%3A19%3A26%20%2B0000%20Michael%20Vogt%20%3Cmvo%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20apt%0A%3E%20Source-Version%3A%201.0.9.2%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20apt%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20763780%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Michael%20Vogt%20%3Cmvo%40debian.org%3E%20%28supplier%20of%20updated%20apt%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Thu%2C%2002%20Oct%202014%2022%3A05%3A39%20%2B0200%0A%3E%20Source%3A%20apt%0A%3E%20Binary%3A%20apt%20libapt-pkg4.12%20libapt-inst1.5%20apt-doc%20libapt-pkg-dev%20libapt-pkg-doc%20apt-utils%20apt-transport-https%0A%3E%20Architecture%3A%20source%20all%20amd64%0A%3E%20Version%3A%201.0.9.2%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20medium%0A%3E%20Maintainer%3A%20APT%20Development%20Team%20%3Cdeity%40lists.debian.org%3E%0A%3E%20Changed-By%3A%20Michael%20Vogt%20%3Cmvo%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20apt%20%20%20%20%20%20%20%20-%20commandline%20package%20manager%0A%3E%20%20apt-doc%20%20%20%20-%20documentation%20for%20APT%0A%3E%20%20apt-transport-https%20-%20https%20download%20transport%20for%20APT%0A%3E%20%20apt-utils%20%20-%20package%20management%20related%20utility%20programs%0A%3E%20%20libapt-inst1.5%20-%20deb%20package%20format%20runtime%20library%0A%3E%20%20libapt-pkg-dev%20-%20development%20files%20for%20APT%27s%20libapt-pkg%20and%20libapt-inst%0A%3E%20%20libapt-pkg-doc%20-%20documentation%20for%20APT%20development%0A%3E%20%20libapt-pkg4.12%20-%20package%20management%20runtime%20library%0A%3E%20Closes%3A%20762160%20762223%20763780%0A%3E%20Changes%3A%0A%3E%20%20apt%20%281.0.9.2%29%20unstable%3B%20urgency%3Dmedium%0A%3E%20%20.%0A%3E%20%20%20%20%5B%20Michael%20Vogt%20%5D%0A%3E%20%20%20%20%2A%20test%2Fintegration%2Ftest-apt-update-file%3A%20improve%20test%0A%3E%20%20%20%20%2A%20Fix%20regression%20when%20copy%3A%20is%20used%20for%20a%20relative%20path%20%28Closes%3A%20%23762160%29%0A%3E%20%20%20%20%2A%20generalize%20Acquire%3A%3AGzipIndex%20to%20support%20all%20compressions%20that%0A%3E%20%20%20%20%20%20apt%20supports%0A%3E%20%20%20%20%2A%20Fix%20regression%20for%20cdrom%3A%20sources%20from%20latest%20security%20update%0A%3E%20%20%20%20%2A%20Ensure%20that%20iTFRewritePackageOrder%20is%20%22MD5sum%22%20to%20match%0A%3E%20%20%20%20%20%20apt-ftparchive%0A%3E%20%20%20%20%2A%20debian%2Frules%3A%20add%20hardening%3D%2Ball.%0A%3E%20%20%20%20%20%20Thanks%20to%20Simon%20Ruderich%2C%20Markus%20Waldeck%0A%3E%20%20.%0A%3E%20%20%20%20%5B%20Holger%20Wansing%20%5D%0A&amp;References=%3CE1XZnmY-0004Mm-Md%40franck.debian.org%3E&amp;subject=Re%3A%20Bug%23763780%3A%20fixed%20in%20apt%201.0.9.2">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=mvo%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Michael Vogt &lt;mvo@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 763780-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#763780: fixed in apt 1.0.9.2</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 02 Oct 2014 21:19:26 +0000</div>
</div>
<pre class="message">Source: apt
Source-Version: 1.0.9.2

We believe that the bug you reported is fixed in the latest version of
apt, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 763780@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Michael Vogt &lt;mvo@debian.org&gt; (supplier of updated apt package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Thu, 02 Oct 2014 22:05:39 +0200
Source: apt
Binary: apt libapt-pkg4.12 libapt-inst1.5 apt-doc libapt-pkg-dev libapt-pkg-doc apt-utils apt-transport-https
Architecture: source all amd64
Version: 1.0.9.2
Distribution: unstable
Urgency: medium
Maintainer: APT Development Team &lt;deity@lists.debian.org&gt;
Changed-By: Michael Vogt &lt;mvo@debian.org&gt;
Description:
 apt        - commandline package manager
 apt-doc    - documentation for APT
 apt-transport-https - https download transport for APT
 apt-utils  - package management related utility programs
 libapt-inst1.5 - deb package format runtime library
 libapt-pkg-dev - development files for APT&#39;s libapt-pkg and libapt-inst
 libapt-pkg-doc - documentation for APT development
 libapt-pkg4.12 - package management runtime library
Closes: <a href="bugreport.cgi?bug=762160">762160</a> <a href="bugreport.cgi?bug=762223">762223</a> <a href="bugreport.cgi?bug=763780">763780</a>
Changes:
 apt (1.0.9.2) unstable; urgency=medium
 .
   [ Michael Vogt ]
   * test/integration/test-apt-update-file: improve test
   * Fix regression when copy: is used for a relative path (Closes: #<a href="bugreport.cgi?bug=762160">762160</a>)
   * generalize Acquire::GzipIndex to support all compressions that
     apt supports
   * Fix regression for cdrom: sources from latest security update
   * Ensure that iTFRewritePackageOrder is &quot;MD5sum&quot; to match
     apt-ftparchive
   * debian/rules: add hardening=+all.
     Thanks to Simon Ruderich, Markus Waldeck
 .
   [ Holger Wansing ]
   * German program translation update (Closes: <a href="bugreport.cgi?bug=762223">762223</a>)
 .
   [ Jérémy Bobbio ]
   * disable timestamps in the footer of docs by doxygen
 .
   [ Trần Ngọc Quân ]
   * Set STRIP_FROM_PATH for doxygen
 .
   [ Guillem Jover ]
   * apt-get: Create the temporary downloaded changelog inside tmpdir
     (closes: #<a href="bugreport.cgi?bug=763780">763780</a>)
Checksums-Sha1:
 544ce5258b75acad3d126a8543a7b1dc2e051a6e 2353 apt_1.0.9.2.dsc
 f8b7587ba7584e7bb277dc2d4adb31724244ddb4 1796640 apt_1.0.9.2.tar.xz
 2fae1f470f2338cfa1a2ca0c2946da755f93197e 300382 apt-doc_1.0.9.2_all.deb
 fa85ffc8993f0c0e1517d0ec13ed58697038627d 773864 libapt-pkg-doc_1.0.9.2_all.deb
 40409f1a02d60e2a74418310a34104bea954eded 780066 libapt-pkg4.12_1.0.9.2_amd64.deb
 06be8285347af003e857246c5bc05bc0f44a8b54 167808 libapt-inst1.5_1.0.9.2_amd64.deb
 1568f5fd5946f5e7aace73dd1bfe2dfce4e96361 1100016 apt_1.0.9.2_amd64.deb
 0df928953f02ca209c898d0194025c3fa8b74f66 191500 libapt-pkg-dev_1.0.9.2_amd64.deb
 b7c01678f5a6c2e8944d46149a36f7ad7d1b0268 366570 apt-utils_1.0.9.2_amd64.deb
 396a2d8ac167097e4255c7ad2a13bfa266f95618 135342 apt-transport-https_1.0.9.2_amd64.deb
Checksums-Sha256:
 d412c8fd6ca3106a94fc8d1f5b7d8f7559fdc44013cc690b190cb262a6971cee 2353 apt_1.0.9.2.dsc
 93954ec3ed94c9d34eba7c6c713ea28f9ae6af2b8c637b588909f3ab189e80fc 1796640 apt_1.0.9.2.tar.xz
 6f6d6f8e02c78b1a4be1807e01151a67cbd98f4ec37d2919eb14efb4c6b2c514 300382 apt-doc_1.0.9.2_all.deb
 e012a6a9161a259412f3442ae37aab492121a8af6525b9dfd1e90a36f171c0b5 773864 libapt-pkg-doc_1.0.9.2_all.deb
 d6167887737a43fd09cc83d95e155dd86381eae08d642c4476ad82a52414a793 780066 libapt-pkg4.12_1.0.9.2_amd64.deb
 0daf4d288196fc9bebbb27d2a81942c2ce7c28777a07c2463d5418f7aae45ec0 167808 libapt-inst1.5_1.0.9.2_amd64.deb
 5941392bb4077fafdb839b1ec2c835eb6babb6dacf2ecbb5241c90c55774c45d 1100016 apt_1.0.9.2_amd64.deb
 706eb233461ccd864572634770437ef9cd5e92216618e007516b9006632d87c1 191500 libapt-pkg-dev_1.0.9.2_amd64.deb
 cd1efa220312eaf1c810a80e82d1c267d230094107f81f57c6589bf3fcc67170 366570 apt-utils_1.0.9.2_amd64.deb
 6ce85d531f8829bd47b9d3f20040f075897fc34fcc9d51cb9680811132aa1c93 135342 apt-transport-https_1.0.9.2_amd64.deb
Files:
 a540624ab2bcb592e010f963710f2d65 300382 doc optional apt-doc_1.0.9.2_all.deb
 0e5bc3fd84107534cbe30df79583f0cb 773864 doc optional libapt-pkg-doc_1.0.9.2_all.deb
 c7a92e4e909708c830c92cef2585a24b 780066 libs important libapt-pkg4.12_1.0.9.2_amd64.deb
 678345350d08b9023be62c7ab0a823f6 167808 libs important libapt-inst1.5_1.0.9.2_amd64.deb
 e9ccc2444fb9a0f71110bdbb0fa4f4b0 1100016 admin important apt_1.0.9.2_amd64.deb
 ce4e80b8124b8c0d26e404f4d6be04bd 191500 libdevel optional libapt-pkg-dev_1.0.9.2_amd64.deb
 349eb17f8e8b025f07346977b56aa13b 366570 admin important apt-utils_1.0.9.2_amd64.deb
 aabb9774e82b5209969cc6e54250c616 135342 admin optional apt-transport-https_1.0.9.2_amd64.deb
 9ff81dcf60c59715fe8f1311b1885f65 2353 admin important apt_1.0.9.2.dsc
 4b9d845e00952263eac634f35bc98d5d 1796640 admin important apt_1.0.9.2.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJULbh1AAoJEJjKuzq9TKWexMEQALzdSf2Q9rsRSz6UBV0S7Lvu
p7FVbKFhZnPWZA1QDpUfMdpwI1/upnG+eF/clX/pWGlm+ZHBJ009QQAp5ywR8POc
nTIUc6gO//RAuENO1UJlAGrbV+oWSNCdmeQxkhZfIRf1AaunYQ67FL9AxODiyPcg
EigVGbTtP6Fefw/oG33BZD9osYc2Bx/8lMwUr7RDH9Z7VrlLKqP8kxKjb0TB1lUg
8xAtR6xjPS3fx4vd5Rs5JN2mCwIm/qe+pq9W9VnLnHj7o6lJlzeCmXIKPzySsa6X
0Tdc807eEqqAPP33ghtmsEY0xzvCHTtF1aS7CQqSFwb9ZiiZfnupOl2dVab3NJZL
EEPhOml70Y9keEcrxUS5Du6iuj9lFSk3m3jb9NXI7qp+S4WU1bboPL97gQ361Hz+
CiOKakBYb08uKgvqDhnsaUAGS5KvQWKE/eNk0C/3ro9GdYkVDgv43CiY4JirWDhN
sfTZMS6ZVRfpsPMLGyg40B+LjR9jNVA30iFUK7HFQ88fEVApNx4NY9lOF3ecCoMe
Raiq5h995YrTCabeF6y+TJPYeMgzdCe0GALVybf6xX9MNHEiefIvHOsstmjAJzd6
WV3S8R31bpTlhl7eu1bopQXAPXJ8z4orpmJhllNa88UFTOyZeTMPW5spEzZvggid
iYaWnY0RHYqzy7YMQun4
=a+Mp
-----END PGP SIGNATURE-----



</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1412709312 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#763780</code>; Package <code>apt</code>.
 (Tue, 07 Oct 2014 19:15:12 GMT) (<a href="bugreport.cgi?bug=763780;msg=12">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: &quot;Thijs Kinkhorst&quot; &lt;thijs@debian.org&gt; -->
<!-- time:1412709312 -->
<strong>Acknowledgement sent</strong>
to <code>&quot;Thijs Kinkhorst&quot; &lt;thijs@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Tue, 07 Oct 2014 19:15:12 GMT) (<a href="bugreport.cgi?bug=763780;msg=14">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 763780@bugs.debian.org (<a href="bugreport.cgi?bug=763780;msg=15">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=15">mbox</a>, <a href="mailto:763780@bugs.debian.org?References=%3Cb8142ddc55813f249da0d03e1ec4c38f.squirrel%40aphrodite.kinkhorst.nl%3E&amp;body=On%20Tue%2C%207%20Oct%202014%2021%3A12%3A33%20%2B0200%20%22Thijs%20Kinkhorst%22%20%3Cthijs%40debian.org%3E%20wrote%3A%0A%3E%20This%20is%20CVE-2014-7206.%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3Cb8142ddc55813f249da0d03e1ec4c38f.squirrel%40aphrodite.kinkhorst.nl%3E&amp;subject=Re%3A%20This%20is%20CVE-2014-7206.">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=thijs%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> &quot;Thijs Kinkhorst&quot; &lt;thijs@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 763780@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> This is CVE-2014-7206.</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 7 Oct 2014 21:12:33 +0200</div>
</div>
<pre class="message wrapping">This is <a href="https://security-tracker.debian.org/tracker/CVE-2014-7206">CVE-2014-7206</a>.


</pre>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1412710034 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;apt-get: CVE-2014-7206: Insecure temporary changelog handling&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;apt-get: Insecure temporary changelog handling&#39;
            };
-->
<strong>Changed Bug title to &#39;apt-get: CVE-2014-7206: Insecure temporary changelog handling&#39; from &#39;apt-get: Insecure temporary changelog handling&#39;</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 07 Oct 2014 19:27:14 GMT) (<a href="bugreport.cgi?bug=763780;msg=17">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1412757908 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#763780</code>; Package <code>apt</code>.
 (Wed, 08 Oct 2014 08:45:08 GMT) (<a href="bugreport.cgi?bug=763780;msg=19">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="20"></a>
<!-- request_addr: Michael Vogt &lt;mvo@debian.org&gt; -->
<!-- time:1412757908 -->
<strong>Acknowledgement sent</strong>
to <code>Michael Vogt &lt;mvo@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Wed, 08 Oct 2014 08:45:08 GMT) (<a href="bugreport.cgi?bug=763780;msg=21">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="22"></a><a name="msg22"></a><a href="#22">Message #22</a> received at 763780@bugs.debian.org (<a href="bugreport.cgi?bug=763780;msg=22">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=22">mbox</a>, <a href="mailto:763780@bugs.debian.org?body=On%20Wed%2C%208%20Oct%202014%2010%3A42%3A07%20%2B0200%20Michael%20Vogt%20%3Cmvo%40debian.org%3E%20wrote%3A%0A%3E%20On%20Thu%2C%20Oct%2002%2C%202014%20at%2006%3A29%3A45PM%20%2B0200%2C%20Guillem%20Jover%20wrote%3A%0A%3E%20%3E%20Package%3A%20apt%0A%3E%20%3E%20Version%3A%200.8.7%0A%3E%20%3E%20Severity%3A%20serious%0A%3E%20%3E%20Tags%3A%20security%20patch%0A%3E%20%0A%3E%20Thanks%20for%20your%20bugreport%20and%20your%20patch%21%0A%3E%20%20%0A%3E%20%3E%20I%27ve%20found%20an%20instance%20of%20insecure%20temporary%20filenames%20handling.%20The%0A%3E%20%3E%20problem%20is%20that%20the%20code%20correctly%20creates%20a%20temporary%20directory%2C%20but%0A%3E%20%3E%20then%20uses%20that%20name%20as%20just%20a%20prefix%20for%20the%20created%20changelog%0A%3E%20%3E%20filename%2C%20thus%20creating%20it%20alongside%20the%20tamporary%20directory%20%28instead%0A%3E%20%3E%20of%20inside%20of%20it%29%2C%20and%20making%20it%20very%20much%20predictable.%20This%20is%20worsened%0A%3E%20%3E%20due%20to%20the%20time%20it%20takes%20apt-get%20to%20download%20the%20changelog%20from%20the%20net%2C%0A%3E%20%3E%20which%20gives%20a%20very%20huge%20window%20to%20use%20that%20pathname.%0A%3E%20%3E%20%0A%3E%20%3E%20Attached%20a%20patch%20fixing%20this.%20This%20affects%20all%20versions%20starting%20from%0A%3E%20%3E%20the%20one%20in%20squeeze.%0A%3E%20%3E%20%0A%3E%20%3E%20I%27m%20not%20sure%20if%20this%20deserves%20a%20CVE%20or%20perhaps%20a%20lower%20severity%3F%0A%3E%20%5B..%5D%0A%3E%20%0A%3E%20I%20uploaded%20a%20fix%20for%20wheezy%20now%2C%20squeeze%20is%20not%20affected%2C%20this%20feature%0A%3E%20got%20added%20in%200.8.11%20in%20debian%20so%20we%20should%20be%20safe%20here.%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20%20Michael%0A%3E%20%0A%3E%20%0A&amp;References=%3C20141002162945.GA14412%40gaara.hadrons.org%3E%0A%20%3C20141008084207.GC8178%40bod%3E&amp;In-Reply-To=%3C20141008084207.GC8178%40bod%3E&amp;subject=Re%3A%20Bug%23763780%3A%20apt-get%3A%20Insecure%20temporary%20changelog%20handling">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=mvo%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Michael Vogt &lt;mvo@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Guillem Jover &lt;guillem@debian.org&gt;, 763780@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#763780: apt-get: Insecure temporary changelog handling</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Oct 2014 10:42:07 +0200</div>
</div>
<pre class="message">On Thu, Oct 02, 2014 at 06:29:45PM +0200, Guillem Jover wrote:
&gt; Package: apt
&gt; Version: 0.8.7
&gt; Severity: serious
&gt; Tags: security patch

Thanks for your bugreport and your patch!
 
&gt; I&#39;ve found an instance of insecure temporary filenames handling. The
&gt; problem is that the code correctly creates a temporary directory, but
&gt; then uses that name as just a prefix for the created changelog
&gt; filename, thus creating it alongside the tamporary directory (instead
&gt; of inside of it), and making it very much predictable. This is worsened
&gt; due to the time it takes apt-get to download the changelog from the net,
&gt; which gives a very huge window to use that pathname.
&gt; 
&gt; Attached a patch fixing this. This affects all versions starting from
&gt; the one in squeeze.
&gt; 
&gt; I&#39;m not sure if this deserves a CVE or perhaps a lower severity?
[..]

I uploaded a fix for wheezy now, squeeze is not affected, this feature
got added in 0.8.11 in debian so we should be safe here.

Cheers,
 Michael


</pre>

<div class="msgreceived"><hr><p>
<a name="23"></a>
<!-- command:found -->
<!-- requester: Thijs Kinkhorst &lt;thijs@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1412761144 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; []
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;apt/0.8.7&#39;
                                  ]
            };
-->
<strong>No longer marked as found in versions apt/0.8.7.</strong>
Request was from <code>Thijs Kinkhorst &lt;thijs@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 08 Oct 2014 09:39:04 GMT) (<a href="bugreport.cgi?bug=763780;msg=24">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="25"></a>
<!-- command:found -->
<!-- requester: Thijs Kinkhorst &lt;thijs@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1412761145 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;apt/0.8.11&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; []
            };
-->
<strong>Marked as found in versions apt/0.8.11.</strong>
Request was from <code>Thijs Kinkhorst &lt;thijs@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 08 Oct 2014 09:39:05 GMT) (<a href="bugreport.cgi?bug=763780;msg=26">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=26">mbox</a>, <a href="#25">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="27"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt; -->
<!-- time:1412765650 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, APT Development Team &lt;deity@lists.debian.org&gt;</code>:<br>
<code>Bug#763780</code>; Package <code>apt</code>.
 (Wed, 08 Oct 2014 10:54:10 GMT) (<a href="bugreport.cgi?bug=763780;msg=28">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=28">mbox</a>, <a href="#27">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="29"></a>
<!-- request_addr: Guillem Jover &lt;guillem@debian.org&gt; -->
<!-- time:1412765651 -->
<strong>Acknowledgement sent</strong>
to <code>Guillem Jover &lt;guillem@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>APT Development Team &lt;deity@lists.debian.org&gt;</code>.
 (Wed, 08 Oct 2014 10:54:11 GMT) (<a href="bugreport.cgi?bug=763780;msg=30">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=30">mbox</a>, <a href="#29">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="31"></a><a name="msg31"></a><a href="#31">Message #31</a> received at 763780@bugs.debian.org (<a href="bugreport.cgi?bug=763780;msg=31">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=31">mbox</a>, <a href="mailto:763780@bugs.debian.org?subject=Re%3A%20Bug%23763780%3A%20apt-get%3A%20Insecure%20temporary%20changelog%20handling&amp;In-Reply-To=%3C20141008105207.GC9167%40gaara.hadrons.org%3E&amp;body=On%20Wed%2C%208%20Oct%202014%2012%3A52%3A07%20%2B0200%20Guillem%20Jover%20%3Cguillem%40debian.org%3E%20wrote%3A%0A%3E%20Hi%21%0A%3E%20%0A%3E%20On%20Wed%2C%202014-10-08%20at%2010%3A42%3A07%20%2B0200%2C%20Michael%20Vogt%20wrote%3A%0A%3E%20%3E%20On%20Thu%2C%20Oct%2002%2C%202014%20at%2006%3A29%3A45PM%20%2B0200%2C%20Guillem%20Jover%20wrote%3A%0A%3E%20%3E%20%3E%20Package%3A%20apt%0A%3E%20%3E%20%3E%20Version%3A%200.8.7%0A%3E%20%3E%20%3E%20Severity%3A%20serious%0A%3E%20%3E%20%3E%20Tags%3A%20security%20patch%0A%3E%20%0A%3E%20%3E%20%3E%20Attached%20a%20patch%20fixing%20this.%20This%20affects%20all%20versions%20starting%20from%0A%3E%20%3E%20%3E%20the%20one%20in%20squeeze.%0A%3E%20%0A%3E%20%3E%20%3E%20I%27m%20not%20sure%20if%20this%20deserves%20a%20CVE%20or%20perhaps%20a%20lower%20severity%3F%0A%3E%20%3E%20%5B..%5D%0A%3E%20%3E%20%0A%3E%20%3E%20I%20uploaded%20a%20fix%20for%20wheezy%20now%2C%20squeeze%20is%20not%20affected%2C%20this%20feature%0A%3E%20%3E%20got%20added%20in%200.8.11%20in%20debian%20so%20we%20should%20be%20safe%20here.%0A%3E%20%0A%3E%20Oh%2C%20indeed%2C%20sorry%20about%20the%20wrong%20version.%20I%20was%20confused%20by%20the%20git%0A%3E%20history%3A%0A%3E%20%0A%3E%20%20%20%24%20git%20show%20a4c404301df135bea81f23b944dc6e1967f9ca85%0A%3E%20%20%20%24%20git%20describe%20--tags%20a4c404301df135bea81f23b944dc6e1967f9ca85%0A%3E%20%20%200.8.6-22-ga4c4043%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20Guillem%0A%3E%20%0A%3E%20%0A&amp;References=%3C20141002162945.GA14412%40gaara.hadrons.org%3E%0A%20%3C20141008084207.GC8178%40bod%3E%0A%20%3C20141008105207.GC9167%40gaara.hadrons.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=guillem%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Guillem Jover &lt;guillem@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Michael Vogt &lt;mvo@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 763780@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#763780: apt-get: Insecure temporary changelog handling</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 8 Oct 2014 12:52:07 +0200</div>
</div>
<pre class="message">Hi!

On Wed, 2014-10-08 at 10:42:07 +0200, Michael Vogt wrote:
&gt; On Thu, Oct 02, 2014 at 06:29:45PM +0200, Guillem Jover wrote:
&gt; &gt; Package: apt
&gt; &gt; Version: 0.8.7
&gt; &gt; Severity: serious
&gt; &gt; Tags: security patch

&gt; &gt; Attached a patch fixing this. This affects all versions starting from
&gt; &gt; the one in squeeze.

&gt; &gt; I&#39;m not sure if this deserves a CVE or perhaps a lower severity?
&gt; [..]
&gt; 
&gt; I uploaded a fix for wheezy now, squeeze is not affected, this feature
&gt; got added in 0.8.11 in debian so we should be safe here.

Oh, indeed, sorry about the wrong version. I was confused by the git
history:

  $ git show a4c404301df135bea81f23b944dc6e1967f9ca85
  $ git describe --tags a4c404301df135bea81f23b944dc6e1967f9ca85
  0.8.6-22-ga4c4043

Thanks,
Guillem


</pre>

<div class="msgreceived"><hr><p>
<a name="32"></a>
<!-- command:fixed -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1412767085 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;apt/1.0.9.2&#39;,
                                    &#39;apt/1.1~exp4&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;apt/1.0.9.2&#39;
                                  ]
            };
-->
<strong>Marked as fixed in versions apt/1.1~exp4.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 08 Oct 2014 11:18:05 GMT) (<a href="bugreport.cgi?bug=763780;msg=33">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=33">mbox</a>, <a href="#32">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="34"></a>
<!-- command:fixed -->
<!-- requester: Thijs Kinkhorst &lt;thijs@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1412785633 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;apt/1.0.9.2&#39;,
                                    &#39;0.9.7.9+deb7u6&#39;,
                                    &#39;apt/1.1~exp4&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;apt/1.0.9.2&#39;,
                                    &#39;apt/1.1~exp4&#39;
                                  ]
            };
-->
<strong>Marked as fixed in versions 0.9.7.9+deb7u6.</strong>
Request was from <code>Thijs Kinkhorst &lt;thijs@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 08 Oct 2014 16:27:13 GMT) (<a href="bugreport.cgi?bug=763780;msg=35">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=35">mbox</a>, <a href="#34">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="36"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1415259438 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Thu, 06 Nov 2014 07:37:18 GMT) (<a href="bugreport.cgi?bug=763780;msg=37">full text</a>, <a href="bugreport.cgi?bug=763780;mbox=yes;msg=37">mbox</a>, <a href="#36">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=763780">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:29:58 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
