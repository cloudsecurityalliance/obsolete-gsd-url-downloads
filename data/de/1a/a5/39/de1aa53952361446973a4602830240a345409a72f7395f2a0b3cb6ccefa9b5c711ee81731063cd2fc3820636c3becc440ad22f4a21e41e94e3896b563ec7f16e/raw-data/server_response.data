<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>a294ae5342410431a568126183efe86261668b5d - platform/packages/services/Telephony - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/packages/services/Telephony/%2B/a294ae5342410431a568126183efe86261668b5d">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/packages/">packages</a> / <a class="Breadcrumbs-crumb" href="/platform/packages/services/">services</a> / <a class="Breadcrumbs-crumb" href="/platform/packages/services/Telephony/">Telephony</a> / <span class="Breadcrumbs-crumb">a294ae5342410431a568126183efe86261668b5d</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>a294ae5342410431a568126183efe86261668b5d</td><td><span>[<a href="/platform/packages/services/Telephony/+log/a294ae5342410431a568126183efe86261668b5d">log</a>]</span> <span>[<a href="/platform/packages/services/Telephony/+archive/a294ae5342410431a568126183efe86261668b5d.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Brad Ebinger &lt;breadley@google.com&gt;</td><td>Fri Jan 29 10:19:36 2016 -0800</td></tr><tr><th class="Metadata-title">committer</th><td>The Android Automerger &lt;android-build@google.com&gt;</td><td>Tue Mar 01 15:27:02 2016 -0800</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/">182c837a1d96a860d1f449574b48927e084fcb03</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d%5E">06067b94b092a3d6f422386bf3ec6d70771a5616</a> <span>[<a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">Fixes creation of incorrect SIP PhoneAccountHandle

When a new incoming call occurs in SIP, SipUtil mistakenly uses the
Uri handle instead of the profile name to create the
PhoneAccountHandle. Since this PhoneAccountHandle is not registered
with telecom, it will throw a security exception (as of b/26864502).

BUG: 26874216
Change-Id: <a href="https://android-review.googlesource.com/#/q/I27611b45f0834fca328c4cc2b867edaf970f7171">I27611b45f0834fca328c4cc2b867edaf970f7171</a>
</pre><ul class="DiffTree"><li><a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/sip/src/com/android/services/telephony/sip/SipAccountRegistry.java">sip/src/com/android/services/telephony/sip/SipAccountRegistry.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d%5E%21/#F0">diff</a>]</span></li><li><a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/sip/src/com/android/services/telephony/sip/SipUtil.java">sip/src/com/android/services/telephony/sip/SipUtil.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d%5E%21/#F1">diff</a>]</span></li></ul><div class="DiffSummary">2 files changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 182c837a1d96a860d1f449574b48927e084fcb03</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - AndroidManifest.xml"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/AndroidManifest.xml">AndroidManifest.xml</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - CleanSpec.mk"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/CleanSpec.mk">CleanSpec.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - MODULE_LICENSE_APACHE2"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/MODULE_LICENSE_APACHE2">MODULE_LICENSE_APACHE2</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NOTICE"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/NOTICE">NOTICE</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - common/"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/common/">common/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - lint.xml"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/lint.xml">lint.xml</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - proguard.flags"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/proguard.flags">proguard.flags</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res/"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/res/">res/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - sip/"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/sip/">sip/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - src/"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/src/">src/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tests/"><a class="FileList-itemLink" href="/platform/packages/services/Telephony/+/a294ae5342410431a568126183efe86261668b5d/tests/">tests/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>