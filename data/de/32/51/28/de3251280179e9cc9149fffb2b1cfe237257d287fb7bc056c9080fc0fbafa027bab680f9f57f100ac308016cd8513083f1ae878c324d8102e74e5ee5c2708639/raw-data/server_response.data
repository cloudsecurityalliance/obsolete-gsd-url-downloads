<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1312001 - (CVE-2017-5378) ASLR leak and cross-frame oracle via pointer scrambling in Map/Set">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1312001">
<meta property="og:description"
      content="VERIFIED (jorendorff) in Core - JavaScript Engine. Last updated 2017-10-26.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P1">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1312001 - (CVE-2017-5378) ASLR leak and cross-frame oracle via pointer scrambling in Map/Set</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1312001&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1312001">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1312001">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/yui.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/global.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/util.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox50\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr45\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox51\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox53\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox52\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"types\":[\"tracking\"],\"flags\":{\"project\":{\"cf_fission_milestone\":\"---\",\"cf_a11y_review_project_flag\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_root_cause\":\"---\"},\"tracking\":{\"cf_status_firefox_esr91\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_firefox94\":\"---\",\"cf_tracking_firefox50\":\"+\",\"cf_tracking_firefox95\":\"---\",\"cf_tracking_firefox93\":\"---\",\"cf_tracking_firefox_esr45\":\"51+\",\"cf_tracking_firefox53\":\"+\",\"cf_status_firefox53\":\"fixed\",\"cf_tracking_firefox51\":\"+\",\"cf_status_firefox50\":\"wontfix\",\"cf_status_firefox_esr45\":\"fixed\",\"cf_status_firefox52\":\"fixed\",\"cf_status_firefox_esr78\":\"---\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox95\":\"---\",\"cf_tracking_firefox94\":\"---\",\"cf_tracking_firefox52\":\"+\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_status_firefox51\":\"verified\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_thunderbird_esr91\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1312001;
  BUGZILLA.bug_title = '1312001 - (CVE-2017-5378) ASLR leak and cross-frame oracle via pointer scrambling in Map\/Set';
  BUGZILLA.bug_summary = 'ASLR leak and cross-frame oracle via pointer scrambling in Map\/Set';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1312001';
  BUGZILLA.bug_keywords = 'csectype-disclosure, csectype-sop, sec-high',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/field.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/comments.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1312001">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1312001"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1312001 - (CVE-2017-5378) ASLR leak and cross-frame oracle via pointer scrambling in Map/Set">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="51HmhC1WPMIo1z7vE1JjtzkZXVb7Zqj2aN7mfRUIWOBmeWEmmVmRo0LWFI6bXCgIO8IxqlrsUpTWC6uqGJnLRGJugGlbpxEKlwJMWjaoUDlGSFgRKbymhnQla7fNWxLl6hc41CzY8Voq43hwFLQs6aWM9Ep9TffUoYYvlj0DkGFRDuRc28NMwxPke5zdZwHKobcVkkTocWyKjZSYreXYgYG9dxgoEEXON2xj7ZbCe3HTKqJZFIwxMOoWzN2WU0dP">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1312001" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623070-GjM9pZ7RMwGcPGnbnLRZxUJ4ZCRBS4Dxk5fJzeU6Cro">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1312001" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1312001" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1312001">Bug 1312001</a>
          <span class="edit-hide">(CVE-2017-5378)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2016-10-21 06:59 PDT" data-time="1477058346">5 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2017-01-12 12:44 PST" data-time="1484253886">5 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">ASLR leak and cross-frame oracle via pointer scrambling in Map/Set</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            ASLR leak and cross-frame oracle via pointer scrambling in Map/Set

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: JavaScript Engine, defect, P1)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">JavaScript Engine
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: JavaScript Engine</div>
            <div class="description">The interpreter engine for the core JavaScript language,  independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=JavaScript%20Engine&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=JavaScript%20Engine&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=JavaScript%20Engine"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="JavaScript Engine"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P1
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;cf_status_firefox52&quot;:&quot;fixed&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;dupe_of&quot;:null,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;status&quot;:&quot;VERIFIED&quot;,&quot;keywords&quot;:[&quot;csectype-disclosure&quot;,&quot;csectype-sop&quot;,&quot;sec-high&quot;],&quot;cf_tracking_firefox52&quot;:&quot;+&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla53&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox51&quot;:&quot;verified&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;id&quot;:1312001,&quot;cf_tracking_firefox50&quot;:&quot;+&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr45&quot;:&quot;51+&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;flags&quot;:[],&quot;cf_status_firefox53&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox51&quot;:&quot;+&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_tracking_firefox53&quot;:&quot;+&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr45&quot;:&quot;fixed&quot;,&quot;cf_status_firefox50&quot;:&quot;wontfix&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;priority&quot;:&quot;P1&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla53

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr45</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=51%2B">51+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox50</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox51</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox51&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox52</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox53</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox53&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr45</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr45-dirty">
  <select id="cf_tracking_firefox_esr45" name="cf_tracking_firefox_esr45">
        <option value="51+"
          id="v2803_cf_tracking_firefox_esr45" selected
        >51+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr45-dirty">
  <select id="cf_status_firefox_esr45" name="cf_status_firefox_esr45">
        <option value="fixed"
          id="v2548_cf_status_firefox_esr45" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox50</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox50-dirty">
  <select id="cf_tracking_firefox50" name="cf_tracking_firefox50">
        <option value="+"
          id="v2833_cf_tracking_firefox50" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox50-dirty">
  <select id="cf_status_firefox50" name="cf_status_firefox50">
        <option value="wontfix"
          id="v2841_cf_status_firefox50" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox51</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox51-dirty">
  <select id="cf_tracking_firefox51" name="cf_tracking_firefox51">
        <option value="+"
          id="v2901_cf_tracking_firefox51" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox51-dirty">
  <select id="cf_status_firefox51" name="cf_status_firefox51">
        <option value="verified"
          id="v2911_cf_status_firefox51" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox52</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox52-dirty">
  <select id="cf_tracking_firefox52" name="cf_tracking_firefox52">
        <option value="+"
          id="v2960_cf_tracking_firefox52" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox52-dirty">
  <select id="cf_status_firefox52" name="cf_status_firefox52">
        <option value="fixed"
          id="v2968_cf_status_firefox52" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox53</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox53-dirty">
  <select id="cf_tracking_firefox53" name="cf_tracking_firefox53">
        <option value="+"
          id="v2998_cf_tracking_firefox53" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox53-dirty">
  <select id="cf_status_firefox53" name="cf_status_firefox53">
        <option value="fixed"
          id="v3006_cf_status_firefox53" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: jann+mozilla, Assigned: jorendorff)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_281791" ><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">jorendorff</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-hide" id="field-qa_contact"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact"><div class="vcard vcard_452604" ><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">mwobensmith</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_500267" ><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=500267" > <span class="fna">jann+mozilla</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_607698" ><img src="https://secure.gravatar.com/avatar/629d9cacc1e7a36371e4583cc5739cf4?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=607698" > <span class="fna">sdetar</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="15">15 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Fix cross-origin information leak from shared atoms"
   href="/show_bug.cgi?id=1317936">CVE-2016-9904</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - ASLR leak via pointer scrambling in ShapeTable"
   href="/show_bug.cgi?id=1330769">1330769</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1312001&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1312001">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: csectype-disclosure, csectype-sop, sec-high, Whiteboard: [post-critsmash-triage][adv-main51+][adv-esr45.7+] Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24))
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2017-5378

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-disclosure&amp;resolution=---">csectype-disclosure</a>, 
          <a href="/buglist.cgi?keywords=csectype-sop&amp;resolution=---">csectype-sop</a>, 
          <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[post-critsmash-triage][adv-main51+][adv-esr45.7+] Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24)
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_flags" style="display:none"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (8 files, 3 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8803341">firefox-aslr-break.tar</a>
        </div>
        <div>
            <a href="#c0" class="attach-time activity-ref"><span class="rel-time" title="2016-10-21 06:59 PDT" data-time="1477058346">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_500267" ><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div></span>
        </div>
        <div class="attach-info">30.00 KB,
          application/x-tar        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8803341&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8807122">bug1312001-use-unique-id-for-map</a>
        </div>
        <div>
            <a href="#c12" class="attach-time activity-ref"><span class="rel-time" title="2016-11-03 05:59 PDT" data-time="1478177979">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_443194" ><a class="email " href="/user_profile?user_id=443194" > <span class="fna">Jon Coppeard (:jonco)</span></a>
</div></span>
        </div>
        <div class="attach-info">17.79 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8807122&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8807122&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8807122">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8815939">Scramble hash codes securely, to avoid leaking bits of object and string addresses</a>
        </div>
        <div>
            <a href="#c22" class="attach-time activity-ref"><span class="rel-time" title="2016-11-30 16:30 PST" data-time="1480552232">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">17.82 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_375297" ><span class="fn">jandem</span>
</div>:
              <a href="#c30"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1480552232"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8815939&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8815939&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8815939">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8815942"
              title="LookupHitTest-speed.png"
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">LookupHitTest-speed.png
            </a>
        </div>
        <div>
            <a href="#c24" class="attach-time activity-ref"><span class="rel-time" title="2016-11-30 16:36 PST" data-time="1480552598">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">33.94 KB,
          image/png        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8815942&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8815943"
              title="LookupMissTest-speed.png"
              class="lightbox">
              <img src="/extensions/BugModal/web/image.png" width="16" height="16">LookupMissTest-speed.png
            </a>
        </div>
        <div>
            <a href="#c25" class="attach-time activity-ref"><span class="rel-time" title="2016-11-30 16:37 PST" data-time="1480552640">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">34.38 KB,
          image/png        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8815943&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8817055">Scramble hash codes securely, to avoid leaking bits of object and string addresses</a>
        </div>
        <div>
            <a href="#c32" class="attach-time activity-ref"><span class="rel-time" title="2016-12-06 15:36 PST" data-time="1481067415">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">17.82 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_281791" ><span class="fn">jorendorff</span>
</div>:
              <a href="#c33"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1481068091"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c35"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1481068091"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8817055&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8817055&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8817055">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8820073">Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</a>
        </div>
        <div>
            <a href="#c38" class="attach-time activity-ref"><span class="rel-time" title="2016-12-19 15:54 PST" data-time="1482191654">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">26.66 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_375297" ><span class="fn">jandem</span>
</div>:
              <a href="#c40"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1482191654"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c42"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1483383334"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8820073&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8820073&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8820073">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8825939">(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</a>
        </div>
        <div>
            <a href="#c52" class="attach-time activity-ref"><span class="rel-time" title="2017-01-11 13:25 PST" data-time="1484169949">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">26.29 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_451704" ><span class="fn">lizzard</span>
</div>:
              <a href="#a7193842_451704"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1484178985"
            >
              approval-mozilla-aurora+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8825939&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8825939&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825939">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8825943">(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</a>
        </div>
        <div>
            <a href="#c53" class="attach-time activity-ref"><span class="rel-time" title="2017-01-11 13:32 PST" data-time="1484170334">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">26.75 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_451704" ><span class="fn">lizzard</span>
</div>:
              <a href="#c71"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1484179024"
            >
              approval-mozilla-beta+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8825943&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8825943&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825943">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8825944">(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</a>
        </div>
        <div>
            <a href="#c54" class="attach-time activity-ref"><span class="rel-time" title="2017-01-11 13:32 PST" data-time="1484170367">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">26.70 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_580382" ><span class="fn">jcristau</span>
</div>:
              <a href="#c69"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1484179054"
            >
              approval-mozilla-release-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8825944&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8825944&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825944">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8825986">(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</a>
        </div>
        <div>
            <a href="#c62" class="attach-time activity-ref"><span class="rel-time" title="2017-01-11 15:50 PST" data-time="1484178625">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_281791" ><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div></span>
        </div>
        <div class="attach-info">26.59 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_451704" ><span class="fn">lizzard</span>
</div>:
              <a href="#a7193897_451704"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1484179154"
            >
              approval-mozilla-esr45+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8825986&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8825986&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825986">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="JC4JHnWD0iU2ewVNjx8XGDPmUnHKmVoOigSU2nKREs3PjI4X">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="11804079" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" ><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" ><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 06:59 PDT" data-time="1477058346">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8803341"
         class="attachment"
         data-id="8803341" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="firefox-aslr-break.tar">
      <meta itemprop="contentSize" content="30720">
      <meta itemprop="encodingFormat" content="application/x-tar">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8803341" itemprop="contentUrl">
        <span id="att-8803341-description" itemprop="description">firefox-aslr-break.tar</span></a>
        — <a href="attachment.cgi?id=8803341&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-0" data-comment-id="11804079">User Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36

Steps to reproduce:

In Nightly (non-debug build) on x86-64, open the file attack.html from the attached tarball and wait around 15 seconds (depending on your CPU) until the displayed result is green or red.

For the second way to abuse the behavior described here, unpack leak_interned.html, an attacker, and leak_interned_victim.html, a victim page. This attack is less reliable. Open leak_interned.html in a fresh browser instance, click one of the three name buttons, click the &quot;tell me what I clicked button&quot;, and then wait a couple seconds (I think you have to wait for a GC run to happen or so).


Actual results:

In the first PoC, something like this will be shown:

bucket access delay calibration: hit: 0.014999999999993463, miss: 0, limit: 0.0074999999999967315
current char code: 41
number of possible results: 1
result: 0x01f00028

The displayed result (0x01f00028) is the pointer to the atomized string corresponding to '\0', truncated to 32 bits. On Linux, the corresponding mapping is visible in /proc/&lt;plugin-container-pid&gt;/maps:

7f3001400000-7f3002000000 rw-p 00000000 00:00 0 


The basic idea here is to perform a hash DoS attack, but with a goal other than Denial of Service. After a single hashtable bucket has been filled with lots of entries, insertions and negative lookups on the hashtable will be much slower for keys that map to the filled hashmap bucket. This means that a timing measurement can be used to determine whether a given key maps to a specific hashtable bucket as follows:
 - Fill the hashtable bucket with data.
 - Measure the time needed to look up the key in the hashtable.

Filling a specific hashtable bucket with data is easy because:
 - int32 numbers are simply mapped with ScrambleHashCode(number),
   no unknown values are involved
 - the inverse of ScrambleHashCode() is just a modular multiplication with
   the multiplicative inverse of the constant scrambling factor, so it is possible
   to compute a series of int32 numbers that map to adjacent hash codes.

The reason this can be used to break ASLR is that, for strings and objects, 32-bit truncated pointers are scrambled with ScrambleHashCode() and then used to derive hashmap bucket indexes. Therefore, by measuring lookup times for strings/objects in a hashmap with a known filled bucket, the range of possible pointers can be constrained.

Strings are converted to pointers by atomizing (interning) them, then taking the pointer to the atom. For some strings, atoms are precreated; in particular, atoms exist for single-character strings with charcodes 0-255. Because these are allocated in a loop during runtime initialization (StaticStrings::init()), they form a sequence in memory, so the distance between the atomized strings for String.fromCharCode(i) and String.fromCharCode(i+1) (for i in range(0,255)) is always 0x18.

The algorithm used in the PoC works roughly as follows (this is just the basic idea, the implementation in the exploit is optimized a bit):

find_bucket_precise() attempts to find the bucket index at which a given value will be placed in a Set of size 2^22.
This is done as follows:
 - Locate the value in a Set with 64 buckets (find_bucket64()) by testing with 64 different
   Set instances that have different filled buckets and checking with which Set the operation is slow
 - Repeatedly create new Sets with doubled bucket counts (128, 256, 512, ...) and test
   whether the access at the doubled old bucket index is slow. Basically, determine the 22-bit bucket index
   bit by bit.

The main code attempts to find a single candidate for the address of the '\0' atom:
 - Compute the bucket index of '\0' with find_bucket_precise().
 - Let candidates_set be the result of deriving 32-bit truncated pointer candidates
   from the bucket index of '\0' using the inverse of ScrambleHashCode().
 - For characters '\1', '\2', '\3', ...:
   - Compute the character's bucket index with find_bucket_precise().
   - Derive 32-bit truncated pointer candidates from the character's bucket index.
   - Let current_0candidates be the result of subtracting character_code*0x18
     from the candidates for the current character.
   - Let candidates_set be the values that are contained in both candidates_set
     and current_0candidates.
 - Assert that candidates_set contains exactly one value.
 - Return the value in candidates_set.



This is not just usable to break ASLR, as demonstrated by the second PoC. Another issue is that, because atoms are shared across frames, the ability to determine bucket indexes can be used to determine whether another frame is using an atom with specific contents (because an atom can only move in memory if nobody is using it). I'm not entirely sure, but I think string literals are always atomized? So this can e.g. be used to leak information like usernames embedded in JavaScript code across websites. The PoC determines which one out of a set of possible names was selected in the other frame across origins.


Expected results:

Firefox should not leak addresses or information about strings in other frames to JavaScript code.

In V8, these attacks won't work because:

Objects can have private, random 32-bit members (&quot;hash_code_symbol&quot;) specifying their hashmap buckets. The member is set when the object is used in a hashtable the first time.

Strings are not interned for usage in hashtables; instead, when a string is used in a hashtable for the first time, a hash of its contents is computed and stored in the string by String::ComputeAndSetHash().

It might make sense to copy V8's behavior here.

This bug is subject to a 90 day disclosure deadline. If 90 days elapse without a broadly available patch, I will post it publicly.</pre></div><div class="change-set" id="a983_7044"><div class="change" id="aa983_7044">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_7044" id="a983_7044"><img src="https://secure.gravatar.com/avatar/3301a62f3707d6bcef9542d316fb587f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_7044" id="a983_7044"><a class="email " href="/user_profile?user_id=7044" > <span class="fna">Benjamin Smedberg</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a983_7044"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a983_7044">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a983_7044">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 07:15 PDT" data-time="1477059329">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: firefox-core-security &rarr; javascript-core-security</div><div class="change">Component: Untriaged &rarr; JavaScript Engine</div><div class="change">Product: Firefox &rarr; Core</div></div></div><div class="change-set" id="c1"><div class="comment" data-id="11804233" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a983_7044"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a983_7044"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 07:50 PDT" data-time="1477061440">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="11804233">(In reply to Jann Horn from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c0">comment #0</a>)
<span class="quote">&gt; Objects can have private, random 32-bit members (&quot;hash_code_symbol&quot;)
&gt; specifying their hashmap buckets. The member is set when the object is used
&gt; in a hashtable the first time.</span >

We do have a mechanism to assign unique IDs to cells (Zone::getUniqueId), we should probably use that here. We should be careful not to regress perf though...</pre><div class="activity"><div class="change">Summary: ALSR leak and cross-frame oracle via pointer scrambling in Map/Set &rarr; ASLR leak and cross-frame oracle via pointer scrambling in Map/Set</div></div></div><div class="change-set" id="a3432_375297"><div class="change" id="aa3432_375297">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a3432_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_375297" id="a3432_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3432_375297"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3432_375297">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a3432_375297">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 07:56 PDT" data-time="1477061778">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: UNCONFIRMED &rarr; NEW</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=isnotempty">status-firefox52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=isnotempty">tracking-firefox52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">Ever confirmed: true</div><div class="change">Priority: -- &rarr; P1</div></div></div><div class="change-set" id="c2"><div class="comment" data-id="11804284" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_443194" id="a3432_375297"><img src="https://secure.gravatar.com/avatar/c9ec760b0d3a20a6775614baa4086871?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_443194" id="a3432_375297"><a class="email " href="/user_profile?user_id=443194" > <span class="fna">Jon Coppeard (:jonco)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 08:06 PDT" data-time="1477062386">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="11804284">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c1">comment #1</a>)
<span class="quote">&gt; We do have a mechanism to assign unique IDs to cells (Zone::getUniqueId), we
&gt; should probably use that here. We should be careful not to regress perf
&gt; though...</span >

I wrote a patch to do this and it was indeed a performance regression, being about twice as slow for adding objects to a map.</pre></div><div class="change-set" id="c3"><div class="comment" data-id="11804507" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" id="a3432_375297"><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" id="a3432_375297"><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 08:58 PDT" data-time="1477065523">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="11804507">(In reply to Jon Coppeard (:jonco) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c2">comment #2</a>)
<span class="quote">&gt; (In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c1">comment #1</a>)
&gt; &gt; We do have a mechanism to assign unique IDs to cells (Zone::getUniqueId), we
&gt; &gt; should probably use that here. We should be careful not to regress perf
&gt; &gt; though...
&gt; 
&gt; I wrote a patch to do this and it was indeed a performance regression, being
&gt; about twice as slow for adding objects to a map.</span >

Zone::getUniqueId() doesn't look very fast. It uses a hashmap, and it uses js::gc::NextCellUniqueId(), which uses an atomic increment-and-return, which iirc implies a cmpxchg loop on x86, and it does some optimization stuff.
Can't you generate a random number using thread-local randomness state or so and cram it into the object directly?</pre></div><div class="change-set" id="c4"><div class="comment" data-id="11804511" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" id="a3432_375297"><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" id="a3432_375297"><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 09:00 PDT" data-time="1477065645">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="11804511">s/, and it does some optimization stuff//, I have no idea what I was trying to write there.</pre></div><div class="change-set" id="c5"><div class="comment" data-id="11804528" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a3432_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a3432_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-21 09:07 PDT" data-time="1477066079">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="11804528">(In reply to Jann Horn from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c3">comment #3</a>)
<span class="quote">&gt; Can't you generate a random number using thread-local randomness state or so
&gt; and cram it into the object directly?</span >

Unfortunately it's not that easy, object layout is heavily optimized and we have different kinds of objects. We do want something more efficient than that hashtable lookup though. For strings, things are a bit easier because we have a flags word we can steal a number of bits from. I'll think about it more.</pre></div><div class="change-set" id="c6"><div class="comment" data-id="11809060" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8519" id="a3432_375297"><img src="https://secure.gravatar.com/avatar/cf7a6485ad75c35d66da0af6c88515d5?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8519" id="a3432_375297"><a class="email " href="/user_profile?user_id=8519" > <span class="fna">Marcia Knous [:marcia]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-24 10:17 PDT" data-time="1477329464">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="11809060">Tracking 52+ because this bug involves leaking addresses or information thru JS.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=isnotempty">tracking-firefox52</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="a532860_1689"><div class="change" id="aa532860_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a532860_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a532860_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a532860_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a532860_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-27 11:00 PDT" data-time="1477591206">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=isnotempty">status-firefox50</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=isnotempty">status-firefox51</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox51&amp;o1=isnotempty">tracking-firefox51</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox51&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">Whiteboard: Disclosure date ~Jan 21 (note Fx51 scheduled Jan 24), 2017</div></div></div><div class="change-set" id="c7"><div class="comment" data-id="11818686" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a532860_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-10-27 11:02 PDT" data-time="1477591341">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="11818686">[Tracking Requested - why for this release]:

Jan: Can you take this on, or find someone who will?</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=isnotempty">tracking-firefox50</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">Flags: needinfo?(jdemooij)</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-disclosure&amp;resolution=---">csectype-disclosure</a>, 
          
            <a href="/buglist.cgi?keywords=csectype-sop&amp;resolution=---">csectype-sop</a>, 
          
            <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a></div><div class="change">Whiteboard: Disclosure date ~Jan 21 (note Fx51 scheduled Jan 24), 2017 &rarr; Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24)</div></div></div><div class="change-set" id="c8"><div class="comment" data-id="11830554" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a532860_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-02 05:05 PDT" data-time="1478088321">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="11830554">I'm not really familiar with the Map/Set code or with HashTable algorithms.

Jason/Jeff, can you take a look at this?</pre><div class="activity"><div class="change">Flags: needinfo?(jwalden+bmo)</div><div class="change">Flags: needinfo?(jorendorff)</div><div class="change">Flags: <span class="activity-deleted">needinfo?(jdemooij)</span></div></div></div><div class="change-set" id="c9"><div class="comment" data-id="11831989" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a532860_1689"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-02 12:59 PDT" data-time="1478116780">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="11831989">I think we should fix this by making ScrambleHashCode impossible to invert offline. Store a different random integer &quot;key&quot; in each OrderedHashTable; use it as input to a new two-argument SecureScrambleHashCode(key, hash).

Pros:

- only costs 1 word per Map/Set
- relatively uninvasive patch
- dumb (no need to separately produce a secure hash code for each type)
- also prevents HashDoS attacks more generally

Downsides:

- It can't just multiply `key * hash` -- it'd be too easy to reverse-engineer the key. We need (at most) a secure hashing function that has a key; the one I know about is SipHash.

- Not sure about the speed. SipHash-1-3 is secure enough and should be faster than what <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c3">comment 3</a> describes, at least. But what the slowdown will be, I don't know.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jorendorff)</span></div></div></div><div class="change-set" id="c10"><div class="comment" data-id="11832094" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" id="a532860_1689"><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-02 13:31 PDT" data-time="1478118719">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="11832094"><span class="quote">&gt; I think we should fix this by making ScrambleHashCode impossible</span >
to invert offline.

I think that that would almost certainly fix the ASLR leak part. I'm wondering about the remaining impact of being able to measure random collisions though. If an attacker could detect random collisions with buckets of size around 3 to 5 or so, that would probably still be sufficient for executing the attack on interned strings. And with small bucket counts, finding small random collisions shouldn't be too hard - and as soon as you have a small collision, finding more elements mapping into the same bucket is relatively easy.</pre></div><div class="change-set" id="c11"><div class="comment" data-id="11832100" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" id="a532860_1689"><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-02 13:35 PDT" data-time="1478118931">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="11832100">(In reply to Jann Horn from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c10">comment #10</a>)
<span class="quote">&gt; &gt; I think we should fix this by making ScrambleHashCode impossible
&gt; &gt; to invert offline.
&gt; 
&gt; I think that that would almost certainly fix the ASLR leak part. I'm
&gt; wondering about the remaining impact of being able to measure random
&gt; collisions though. If an attacker could detect random collisions with
&gt; buckets of size around 3 to 5 or so, that would probably still be sufficient
&gt; for executing the attack on interned strings.</span >

I guess the nicest fix for that would be to have separate sets of interned strings for cross-origin frames, with only the predefined names common to all frames (in case you need them to be common for access to properties that are accessible cross-origin?). Would that work?</pre></div><div class="change-set" id="c12"><div class="comment" data-id="11833874" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_443194" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/c9ec760b0d3a20a6775614baa4086871?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_443194" id="a532860_1689"><a class="email " href="/user_profile?user_id=443194" > <span class="fna">Jon Coppeard (:jonco)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-03 05:59 PDT" data-time="1478177979">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8807122"
         class="attachment patch"
         data-id="8807122" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1312001-use-unique-id-for-map">
      <meta itemprop="contentSize" content="18213">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8807122">
          <a class="link" href="attachment.cgi?id=8807122&amp;action=diff">
        <span id="att-8807122-description" itemprop="description">bug1312001-use-unique-id-for-map</span></a>
        — <a href="attachment.cgi?id=8807122&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8807122">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-12" data-comment-id="11833874">FWIW, here's a patch to make Map and Set use unique IDs for GC things stored in the hashtable.  This fixes the problem, but is not great for performance.</pre></div><div class="change-set" id="c13"><div class="comment" data-id="11833909" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_443194" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/c9ec760b0d3a20a6775614baa4086871?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_443194" id="a532860_1689"><a class="email " href="/user_profile?user_id=443194" > <span class="fna">Jon Coppeard (:jonco)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-03 06:25 PDT" data-time="1478179512">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="11833909">(In reply to Jon Coppeard (:jonco) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c12">comment #12</a>)
...and thinking about it some more it doesn't fix the problem of string collisions either.

I think we probably want to go with something like Jason suggested above, and use a per-compartment table to intern strings rather than system-wide atomization.</pre></div><div class="change-set" id="c14"><div class="comment" data-id="11837092" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a532860_1689"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-04 07:57 PDT" data-time="1478271446">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="11837092">(In reply to Jann Horn from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c10">comment #10</a>)
<span class="quote">&gt; &gt; I think we should fix this by making ScrambleHashCode impossible
&gt; &gt; to invert offline.
&gt; 
&gt; I think that that would almost certainly fix the ASLR leak part. I'm
&gt; wondering about the remaining impact of being able to measure random
&gt; collisions though. If an attacker could detect random collisions with
&gt; buckets of size around 3 to 5 or so, that would probably still be sufficient
&gt; for executing the attack on interned strings. And with small bucket counts,
&gt; finding small random collisions shouldn't be too hard - and as soon as you
&gt; have a small collision, finding more elements mapping into the same bucket
&gt; is relatively easy.</span >

Yep. You are right about all of this.

(In reply to Jann Horn from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c11">comment #11</a>)
<span class="quote">&gt; I guess the nicest fix for that would be to have separate sets of interned
&gt; strings for cross-origin frames, with only the predefined names common to
&gt; all frames (in case you need them to be common for access to properties that
&gt; are accessible cross-origin?). Would that work?</span >

Or we can copy V8's behavior and use the same hash code for HashableValue that we use for the atoms table. That's a hash of the characters in the string, not the interned string's address, so it wouldn't change when an atom is GC'd.

But this means either adding a word to JSString; or caching hash codes in the OrderedHashTable, which increases its size by 1/4 *and* requires computing the hash code on every string-key lookup, which we currently skip when the key is already atomized. I hate to say it, but maybe Map and Set have to pay this cost. The alternatives seem to be &quot;make the whole system pay&quot;.</pre></div><div class="change-set" id="c15"><div class="comment" data-id="11839072" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a532860_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a532860_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-05 06:56 PDT" data-time="1478354217">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="11839072">(In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c14">comment #14</a>)
<span class="quote">&gt; But this means either adding a word to JSString;</span >

Maybe we only have to add this word to atoms. It's annoying, because we already have a different string size for fat inline strings, but not impossible I think.

Strings have 25 bits available in the flags word, so another option is to store the hash code in there. If that's too small, we could also use these bits to store an index into a Vector&lt;HashNumber&gt;. If we maintain the invariant that there's a 1:1 mapping between JSAtom* and entry into this Vector, it should be easy to compact this Vector when we GC the atoms zone. When there are more than 2 ** 25 atoms (rare), we could use a HashMap&lt;JSAtom*, HashNumber&gt; for the remaining atoms.</pre></div><div class="change-set" id="a2105026_281791"><div class="change" id="aa2105026_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a2105026_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a2105026_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2105026_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2105026_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a2105026_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-14 14:42 PST" data-time="1479163372">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(jwalden+bmo) &rarr; needinfo?(jorendorff)</div></div></div><div class="change-set" id="c16"><div class="comment" data-id="11859373" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a2105026_281791"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_538805" id="a2105026_281791"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-14 15:20 PST" data-time="1479165605">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="11859373">Tracked for 50.1.0</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=isnotempty">tracking-firefox50</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox50&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="c17"><div class="comment" data-id="11861602" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a2105026_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a2105026_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-15 09:16 PST" data-time="1479230187">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="11861602">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c15">comment #15</a>)
<span class="quote">&gt; (In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c14">comment #14</a>)
&gt; &gt; But this means either adding a word to JSString;
&gt; 
&gt; Maybe we only have to add this word to atoms. It's annoying, because we
&gt; already have a different string size for fat inline strings, but not
&gt; impossible I think.</span >

Great, let's do this one. It's fine for the hash code to be stored differently depending on some other bit -- what are methods for?

<span class="quote">&gt; Strings have 25 bits available in the flags word, so another option is to
&gt; store the hash code in there. [...]</span >

Wow, this went downhill fast. :)  I like the other idea better.</pre></div><div class="change-set" id="c18"><div class="comment" data-id="11862291" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a2105026_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a2105026_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-15 12:45 PST" data-time="1479242737">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="11862291">OK, the summary so far: We have two bugs.

1.  Cross-domain information leak: a page can tell whether or not another page is using an atom, by trying to observe a string's hash code changing. If it changes, that means the atom was GC'd and recreated (at a different address), so no other page in the runtime is using that atom.  Possible fixes:

    *   Use separate atoms per domain; or

    *   Add a hash code field to all atoms and use that for HashableValue (instead of the
        pointer-based hash code we're currently using).

    I like the latter.

2.  Pointer leak: a page can reconstitute the hash code for a key by measuring performance effects of hash code collisions. The hash code of an object is the object's address. Possible fixes:

    *   Use a random hash code for objects, storing it either in each object or in a side table; or

    *   Do what <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c9">comment 9</a> says.

    I'm not as sure here but let's try the latter and test performance.

Jeff, can you take this?</pre><div class="activity"><div class="change">Flags: needinfo?(jorendorff) &rarr; needinfo?(jwalden+bmo)</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="11863638" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a2105026_281791"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a2105026_281791"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-16 01:18 PST" data-time="1479287908">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="11863638">(In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c18">comment #18</a>)
<span class="quote">&gt;     *   Add a hash code field to all atoms and use that for HashableValue
&gt; (instead of the
&gt;         pointer-based hash code we're currently using).
&gt; 
&gt;     I like the latter.</span >

I can try to do this part, as I'm probably most familiar with the string representation. It scares me a bit to backport a patch like this, but let's see how it turns out. Spinning this off to a new bug.</pre></div><div class="change-set" id="a2230156_375297"><div class="change" id="aa2230156_375297">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a2230156_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_375297" id="a2230156_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2230156_375297"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2230156_375297">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a2230156_375297">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-16 01:28 PST" data-time="1479288502">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Fix cross-origin information leak from shared atoms"
   href="/show_bug.cgi?id=1317936">CVE-2016-9904</a></div></div></div><div class="change-set" id="c20"><div class="comment" data-id="11864315" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a2230156_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a2230156_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-16 07:04 PST" data-time="1479308698">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="11864315">(In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c9">comment #9</a>)
<span class="quote">&gt; I think we should fix this by making ScrambleHashCode impossible to invert
&gt; offline.</span >

We should do something similar for ShapeTable (it doesn't use js::HashMap), as that's another map with {int31, atom, symbol} keys and is probably also vulnerable.</pre></div><div class="change-set" id="c21"><div class="comment" data-id="11894007" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a2230156_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a2230156_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-29 02:11 PST" data-time="1480414298">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="11894007">What's the status here? With Hawaii and the holidays coming up we really don't have a lot of time.</pre></div><div class="change-set" id="a3458243_281791"><div class="change" id="aa3458243_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3458243_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3458243_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a3458243_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-30 06:36 PST" data-time="1480516589">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: nobody &rarr; jorendorff</div><div class="change">Flags: <span class="activity-deleted">needinfo?(jwalden+bmo)</span></div></div></div><div class="change-set" id="c22"><div class="comment" data-id="11899552" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-30 16:30 PST" data-time="1480552232">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8815939"
         class="attachment patch obsolete"
         data-id="8815939" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="18247">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8815939">
          <a class="link" href="attachment.cgi?id=8815939&amp;action=diff">
        <span id="att-8815939-description" itemprop="description">Scramble hash codes securely, to avoid leaking bits of object and string addresses</span></a> (obsolete)
        — <a href="attachment.cgi?id=8815939&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8815939">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-22" data-comment-id="11899552">MozReview-Commit-ID: yR1cIjrlPP</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8815939&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8815939</a> -
        Flags: review?(jdemooij)</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="11899560" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-30 16:35 PST" data-time="1480552539">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="11899560">This patch costs about 15% speed on microbenchmarks that just do Map.prototype.get in a tight loop, and 10% on other stuff like inserts. Jan, if you think we can do better by finding room for a hash code in JSObject, tell me where to look and I'll give it a shot.

Otherwise I'll look at ShapeTable next.</pre></div><div class="change-set" id="c24"><div class="comment" data-id="11899564" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-30 16:36 PST" data-time="1480552598">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8815942"
         class="attachment"
         data-id="8815942" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="LookupHitTest-speed.png">
      <meta itemprop="contentSize" content="34756">
      <meta itemprop="encodingFormat" content="image/png">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=8815942" itemprop="contentUrl">
        <span id="att-8815942-description" itemprop="description">LookupHitTest-speed.png</span></a>
        — <a href="attachment.cgi?id=8815942&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c25"><div class="comment" data-id="11899566" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-30 16:37 PST" data-time="1480552640">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8815943"
         class="attachment"
         data-id="8815943" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="LookupMissTest-speed.png">
      <meta itemprop="contentSize" content="35205">
      <meta itemprop="encodingFormat" content="image/png">
      <div class="label">
        Attached image
          <a class="link lightbox" href="attachment.cgi?id=8815943" itemprop="contentUrl">
        <span id="att-8815943-description" itemprop="description">LookupMissTest-speed.png</span></a>
        — <a href="attachment.cgi?id=8815943&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c26"><div class="comment" data-id="11899573" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-11-30 16:42 PST" data-time="1480552935">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="11899573">Oh, I should try to make up the perf difference by storing hash keys in every table entry. I'll try that first.</pre></div><div class="change-set" id="c27"><div class="comment" data-id="11901746" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-01 11:54 PST" data-time="1480622051">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="11901746">OK, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c26">comment 26</a> was a dumb idea. Caching hash codes in the table doesn't eliminate any prepareHash calls. No point doing it (specially since equality testing is so cheap here).</pre></div><div class="change-set" id="c28"><div class="comment" data-id="11906276" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a3458243_281791"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-04 18:44 PST" data-time="1480905887">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="11906276">(In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c23">comment #23</a>)
<span class="quote">&gt; Jan, if you think we can do better by finding room for a hash code in JSObject,
&gt; tell me where to look and I'll give it a shot.</span >

No idea, I think this is really difficult.

<span class="quote">&gt; Otherwise I'll look at ShapeTable next.</span >

For ShapeTable, we have jsid (= int/atom/symbol) keys. Int and atom jsids now use deterministic hashing that does not involve any memory addresses, so one option is to do the same for JS::Symbol (it has an unused word for GC alignment reasons that we could use to store a hash code). Fixing it in ShapeTable might be nice anyway to avoid DoS attacks, but adding a stable hash code to JS::Symbol and using it in HashId would be sufficient to stop the ASLR issues. What do you think?</pre></div><div class="change-set" id="c29"><div class="comment" data-id="11906278" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a3458243_281791"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-04 18:54 PST" data-time="1480906463">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="11906278">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c28">comment #28</a>)
<span class="quote">&gt; Fixing it in ShapeTable might be nice anyway to avoid DoS attacks</span >

Nevermind this comment, I just read the comments in the patch and it's not meant to protect against DoS.</pre></div><div class="change-set" id="c30"><div class="comment" data-id="11906296" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a3458243_281791"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-04 19:50 PST" data-time="1480909817">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="11906296">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8815939" name="attach_8815939" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">attachment 8815939</a> <a href="/attachment.cgi?id=8815939&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[details]</a> <a href="/attachment.cgi?id=8815939&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8815939'>[review]</a>
Scramble hash codes securely, to avoid leaking bits of object and string addresses

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8815939" name="attach_8815939" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">attachment 8815939</a> <a href="/attachment.cgi?id=8815939&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[details]</a> <a href="/attachment.cgi?id=8815939&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8815939'>[review]</a>:
-----------------------------------------------------------------

Very nice!

::: js/src/jsgc.cpp
&#64;&#64; +246,5 &#64;&#64;
<span class="quote">&gt;  using mozilla::ArrayLength;
&gt;  using mozilla::Get;
&gt;  using mozilla::Maybe;
&gt;  using mozilla::Swap;
&gt; +using mozilla::HashCodeScrambler;</span >

Nit: keep this sorted.

::: js/src/vm/Runtime.cpp
&#64;&#64; +787,5 &#64;&#64;
<span class="quote">&gt; +    return randomKeyGenerator_.ref();
&gt; +}
&gt; +
&gt; +mozilla::HashCodeScrambler
&gt; +JSRuntime::randomHashCodeScrambler() {</span >

Nit: { on next line.

::: mfbt/HashFunctions.h
&#64;&#64; +346,5 &#64;&#64;
<span class="quote">&gt; +    uint64_t sipHash(uint64_t m) {
&gt; +      // 2. Compression.
&gt; +      v3 ^= m;
&gt; +      sipRound();
&gt; +      v0 ^= m;</span >

The reference implementation (<a rel="nofollow" href="https://github.com/veorq/SipHash/blob/master/siphash24.c">https://github.com/veorq/SipHash/blob/master/siphash24.c</a>) does another sipRound() here, IIUC. Is that not needed because our input length is constant and we don't have any bytes left?

&#64;&#64; +372,5 &#64;&#64;
<span class="quote">&gt; +      v1 ^= v2;
&gt; +      v2 = RotateLeft(v2, 32);
&gt; +    }
&gt; +
&gt; +    uint64_t v0, v1, v2, v3;</span >

Nit: MFBT so should probably use mV0, mV1 etc here, and a* prefix for arguments...</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8815939&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8815939</a> -
        Flags: review?(jdemooij) &rarr; review+</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="11907477" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-06 07:56 PST" data-time="1481039802">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="11907477"><span class="quote">&gt; The reference implementation
&gt; (<a rel="nofollow" href="https://github.com/veorq/SipHash/blob/master/siphash24.c">https://github.com/veorq/SipHash/blob/master/siphash24.c</a>) does another
&gt; sipRound() here, IIUC. Is that not needed because our input length is
&gt; constant and we don't have any bytes left?</span >

The algorithm is designed for a variable number of rounds. SipHash-2-4 has 2 rounds per word of input, and 4 rounds to finish. SipHash-1-3 is considered sufficient for hash tables, according to: <a rel="nofollow" href="https://github.com/rust-lang/rust/issues/29754">https://github.com/rust-lang/rust/issues/29754</a></pre></div><div class="change-set" id="c32"><div class="comment" data-id="11907952" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a3458243_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a3458243_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-06 15:36 PST" data-time="1481067415">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8817055"
         class="attachment patch obsolete"
         data-id="8817055" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="18249">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8817055">
          <a class="link" href="attachment.cgi?id=8817055&amp;action=diff">
        <span id="att-8817055-description" itemprop="description">Scramble hash codes securely, to avoid leaking bits of object and string addresses</span></a> (obsolete)
        — <a href="attachment.cgi?id=8817055&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8817055">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-32" data-comment-id="11907952">MozReview-Commit-ID: yR1cIjrlPP</pre></div><div class="change-set" id="a4009097_281791"><div class="change" id="aa4009097_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a4009097_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a4009097_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4009097_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4009097_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a4009097_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-06 15:37 PST" data-time="1481067443">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8815939&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8815939</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c33"><div class="comment" data-id="11907972" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a4009097_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a4009097_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-06 15:48 PST" data-time="1481068091">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="11907972">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8817055" name="attach_8817055" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">attachment 8817055</a> <a href="/attachment.cgi?id=8817055&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[details]</a> <a href="/attachment.cgi?id=8817055&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8817055'>[review]</a>
Scramble hash codes securely, to avoid leaking bits of object and string addresses

<span class="quote">&gt; [Security approval request comment]
&gt; How easily could an exploit be constructed based on the patch?</span >

Not RCE but quite easy.

<span class="quote">&gt; Do comments in the patch, the check-in comment, or tests included in the
&gt; patch paint a bulls-eye on the security problem?</span >

Absolutely, yes.

<span class="quote">&gt; Which older supported branches are affected by this flaw?</span >

All.

<span class="quote">&gt; Do you have backports for the affected branches? If not, how different,
&gt; hard to create, and risky will they be?</span >

No, but easy. This is medium-low risk.

<span class="quote">&gt; How likely is this patch to cause regressions; how much testing does it need?</span >

It needs the usual CI testing. Regressions are possible, since I'm changing the implementation of JS Map and Set, but unlikely. I've run the JS unit tests and everything passes.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8817055&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8817055</a> -
        Flags: sec-approval?</div><div class="change">
        <a href="/attachment.cgi?id=8817055&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8817055</a> -
        Flags: review+</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="11908119" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a4009097_281791"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a4009097_281791"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-06 17:19 PST" data-time="1481073589">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="11908119">(In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c23">comment #23</a>)
<span class="quote">&gt; This patch costs about 15% speed on microbenchmarks that just do
&gt; Map.prototype.get in a tight loop, and 10% on other stuff like inserts.</span >

I was thinking, as a followup we could maybe do this slower-scrambling only for object/symbol values? All other Values can be hashed without leaking memory addresses.</pre></div><div class="change-set" id="c35"><div class="comment" data-id="11909333" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a4009097_281791"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a4009097_281791"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-07 15:20 PST" data-time="1481152801">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="11909333">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8817055" name="attach_8817055" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">attachment 8817055</a> <a href="/attachment.cgi?id=8817055&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[details]</a> <a href="/attachment.cgi?id=8817055&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and string addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8817055'>[review]</a>
Scramble hash codes securely, to avoid leaking bits of object and string addresses

sec-approval+ for trunk. We'll need this on affected branches (not release) as well.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8817055&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8817055</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="11915176" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a4009097_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a4009097_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-12 15:57 PST" data-time="1481587051">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="11915176"><span class="quote">&gt; We'll need this on affected branches (not release) as well.</span >

I'm confused -- all branches are affected, including ESR. It's an old bug.</pre></div><div class="change-set" id="a4528719_281791"><div class="change" id="aa4528719_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a4528719_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a4528719_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4528719_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4528719_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a4528719_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-12 15:57 PST" data-time="1481587065">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(abillings)</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="11915181" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a4528719_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a4528719_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-12 15:59 PST" data-time="1481587150">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-37" data-comment-id="11915181">OK, I just need to think a bit more about <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c28">comment 28</a> before landing. I'll do it tomorrow.

Separately, we need to extend <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Fix cross-origin information leak from shared atoms"
   href="/show_bug.cgi?id=1317936">bug 1317936</a>'s if-statement in HashValue() to cover &quot;registry&quot; Symbols (the kind created by Symbol.for(str)). I'll do that in this bug. Second round of sec-approval :-P</pre></div><div class="change-set" id="c38"><div class="comment" data-id="11929868" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a4528719_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a4528719_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-19 15:54 PST" data-time="1482191654">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8820073"
         class="attachment patch obsolete"
         data-id="8820073" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="27304">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8820073">
          <a class="link" href="attachment.cgi?id=8820073&amp;action=diff">
        <span id="att-8820073-description" itemprop="description">Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</span></a> (obsolete)
        — <a href="attachment.cgi?id=8820073&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8820073">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-38" data-comment-id="11929868">MozReview-Commit-ID: yR1cIjrlPP</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8820073&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8820073</a> -
        Flags: review?(jdemooij)</div></div></div><div class="change-set" id="a5133314_281791"><div class="change" id="aa5133314_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a5133314_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a5133314_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5133314_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5133314_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a5133314_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-19 15:54 PST" data-time="1482191660">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8817055&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and string addresses"
           class=""
        >Attachment #8817055</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c39"><div class="comment" data-id="11932638" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5133314_281791"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a5133314_281791"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-20 13:47 PST" data-time="1482270432">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-39" data-comment-id="11932638">(In reply to Jason Orendorff [:jorendorff] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c36">comment #36</a>)
<span class="quote">&gt; &gt; We'll need this on affected branches (not release) as well.
&gt; 
&gt; I'm confused -- all branches are affected, including ESR. It's an old bug.</span >

This means &quot;I want to see a patch made and nominated for Aurora, Beta, and ESR45 after this lands on Trunk. Please make and nominate this patch.&quot; Sorry if that wasn't clear.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(abillings)</span></div></div></div><div class="change-set" id="a5212098_280903"><div class="change" id="aa5212098_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5212098_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a5212098_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5212098_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5212098_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a5212098_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-20 13:47 PST" data-time="1482270444">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(jorendorff)</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="11934613" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a5212098_280903"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a5212098_280903"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-12-21 06:13 PST" data-time="1482329622">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-40" data-comment-id="11934613">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8820073" name="attach_8820073" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8820073</a> <a href="/attachment.cgi?id=8820073&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8820073&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8820073'>[review]</a>
Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8820073" name="attach_8820073" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8820073</a> <a href="/attachment.cgi?id=8820073&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8820073&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8820073'>[review]</a>:
-----------------------------------------------------------------

::: js/src/builtin/MapObject.cpp
&#64;&#64; +70,4 &#64;&#64;
<span class="quote">&gt;  {
&gt;      // HashableValue::setValue normalizes values so that the SameValue relation
&gt;      // on HashableValues is the same as the == relationship on
&gt; +    // value.asRawBits(). So why not just return that? Security.</span >

Thanks. It was on my TODO list to fix this comment later, but with the atom bug already fixed on all branches it seems fine to do this now.

&#64;&#64; +83,5 &#64;&#64;
<span class="quote">&gt; +        Symbol* sym = v.toSymbol();
&gt; +        if (sym-&gt;isWellKnownSymbol())
&gt; +            return HashNumber(sym-&gt;code());
&gt; +        if (sym-&gt;code() == SymbolCode::InSymbolRegistry)
&gt; +            return sym-&gt;description()-&gt;hash();</span >

If we need something similar for HashId, we can factor it out to HashSymbol or Symbol::hash() probably.

&#64;&#64; +92,1 &#64;&#64;
<span class="quote">&gt;      return v.asRawBits();</span >

MOZ_ASSERT(!v.isMarkable()); here to avoid regressing this when a new GC type is added.

::: js/src/jit-test/tests/collections/Map-scale.js
&#64;&#64; +1,5 &#64;&#64;
<span class="quote">&gt;  // Maps can hold at least 64K values.
&gt;  
&gt;  var N = 1 &lt;&lt; 16;
&gt;  var m = new Map;
&gt; +for (var i = 0; i &lt; N; i++) {</span >

Nit: revert test change.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8820073&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8820073</a> -
        Flags: review?(jdemooij) &rarr; review+</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="11951826" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a5212098_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a5212098_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-02 10:55 PST" data-time="1483383334">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="11951826">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8820073" name="attach_8820073" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8820073</a> <a href="/attachment.cgi?id=8820073&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8820073&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8820073'>[review]</a>
Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

NOTE: Same answers as last time (see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c33">comment 33</a>) except the last question.
It's a new patch for the same issue.

<span class="quote">&gt; [Security approval request comment]
&gt; How easily could an exploit be constructed based on the patch?</span >

Not RCE but quite easy.

<span class="quote">&gt; Do comments in the patch, the check-in comment, or tests included in the
&gt; patch paint a bulls-eye on the security problem?</span >

Absolutely, yes.

<span class="quote">&gt; Which older supported branches are affected by this flaw?</span >

All.

<span class="quote">&gt; Do you have backports for the affected branches? If not, how different,
&gt; hard to create, and risky will they be?</span >

No, but easy. This is medium-low risk.

<span class="quote">&gt; How likely is this patch to cause regressions; how much testing does it need?</span >

It needs the usual CI testing. Regressions are possible, since I'm changing the implementation of JS Map and Set. A bit more likely than last time, as the patch is a bit more complex. I've run the JS unit tests and everything passes.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jorendorff)</span></div><div class="change">
        <a href="/attachment.cgi?id=8820073&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8820073</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c42"><div class="comment" data-id="11954196" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5212098_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a5212098_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-03 13:20 PST" data-time="1483478415">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="11954196">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8820073" name="attach_8820073" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8820073</a> <a href="/attachment.cgi?id=8820073&amp;action=edit" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8820073&amp;action=diff" title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8820073'>[review]</a>
Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

sec-approval+ for trunk. We'll want this everywhere affected if we can do it soon.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8820073&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8820073</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="a6420120_280903"><div class="change" id="aa6420120_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a6420120_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a6420120_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6420120_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6420120_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a6420120_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-03 13:21 PST" data-time="1483478466">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=isnotempty">status-firefox50</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=isnotempty">tracking-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=51%2B">51+</a></div></div></div><div class="change-set" id="a6420135_280903"><div class="change" id="aa6420135_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a6420135_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6420135_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6420135_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a6420135_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-03 13:21 PST" data-time="1483478481">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=isnotempty">status-firefox53</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox53&amp;o1=isnotempty">tracking-firefox53</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox53&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="c43"><div class="comment" data-id="11956747" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a6420135_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-04 10:18 PST" data-time="1483553896">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="11956747">Jann, our release is on January 24. Is there any way to move your disclosure out a week from the January 21 so we can get our release out the door first? We did fix the other related issue in 50.1 in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Fix cross-origin information leak from shared atoms"
   href="/show_bug.cgi?id=1317936">bug 1317936</a> .</pre><div class="activity"><div class="change">Flags: needinfo?(jann+mozilla)</div></div></div><div class="change-set" id="c44"><div class="comment" data-id="11960222" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a6420135_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-05 11:56 PST" data-time="1483646176">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="11960222"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/c484c1e7eeb61f4abd6d9e2352eacd52b1a47cbf">https://hg.mozilla.org/integration/mozilla-inbound/rev/c484c1e7eeb61f4abd6d9e2352eacd52b1a47cbf</a>
<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001">Bug 1312001</a> - Scramble hash codes securely, to avoid leaking bits of object and symbol addresses.</pre></div><div class="change-set" id="c45"><div class="comment" data-id="11964659" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a6420135_280903"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-07 08:38 PST" data-time="1483807087">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="11964659"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/c484c1e7eeb6">https://hg.mozilla.org/mozilla-central/rev/c484c1e7eeb6</a>

Please request Aurora/Beta/ESR45 approval (and attached rebased patches if necessary) ASAP.</pre><div class="activity"><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2017-01-07 08:38 PST" data-time="1483807087">5 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=isnotempty">status-firefox53</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Flags: needinfo?(jorendorff)</div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla53</div></div></div><div class="change-set" id="c46"><div class="comment" data-id="11964662" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a6420135_280903"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-07 08:39 PST" data-time="1483807184">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="11964662">We also still have to fix the ShapeTable thing, right?</pre></div><div class="change-set" id="c47"><div class="comment" data-id="11968530" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a6420135_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-09 14:24 PST" data-time="1484000688">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="11968530"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=bb9955655951">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=bb9955655951</a></pre></div><div class="change-set" id="c48"><div class="comment" data-id="11968637" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a6420135_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-09 14:58 PST" data-time="1484002730">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-48" data-comment-id="11968637"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=6df545f5d0d1">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=6df545f5d0d1</a></pre></div><div class="change-set" id="c49"><div class="comment" data-id="11968727" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a6420135_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-09 15:30 PST" data-time="1484004645">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-49" data-comment-id="11968727"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=a7ab702b2974">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=a7ab702b2974</a></pre></div><div class="change-set" id="c50"><div class="comment" data-id="11971578" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a6420135_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-10 12:10 PST" data-time="1484079042">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-50" data-comment-id="11971578"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=e3ab56005733">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=e3ab56005733</a></pre></div><div class="change-set" id="c51"><div class="comment" data-id="11971854" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a6420135_280903"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a6420135_280903"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-10 13:34 PST" data-time="1484084069">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="11971854"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=d4cf8a0c64b7">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=d4cf8a0c64b7</a></pre></div><div class="change-set" id="a7108143_75935"><div class="change" id="aa7108143_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a7108143_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a7108143_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7108143_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7108143_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7108143_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 12:28 PST" data-time="1484166489">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: RESOLVED &rarr; REOPENED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=isnotempty">status-firefox53</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">Resolution: FIXED &rarr; ---</div><div class="change">Target Milestone: mozilla53 &rarr; ---</div></div></div><div class="change-set" id="c52"><div class="comment" data-id="11975448" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7108143_75935"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7108143_75935"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:25 PST" data-time="1484169949">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8825939"
         class="attachment patch"
         data-id="8825939" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="26917">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8825939">
          <a class="link" href="attachment.cgi?id=8825939&amp;action=diff">
        <span id="att-8825939-description" itemprop="description">(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</span></a>
        — <a href="attachment.cgi?id=8825939&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825939">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-52" data-comment-id="11975448">MozReview-Commit-ID: yR1cIjrlPP</pre></div><div class="change-set" id="a7111608_281791"><div class="change" id="aa7111608_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7111608_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a7111608_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7111608_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7111608_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7111608_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:25 PST" data-time="1484169954">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8820073&amp;action=edit"
           title="Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8820073</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c53"><div class="comment" data-id="11975487" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7111608_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7111608_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:32 PST" data-time="1484170334">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8825943"
         class="attachment patch"
         data-id="8825943" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="27388">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8825943">
          <a class="link" href="attachment.cgi?id=8825943&amp;action=diff">
        <span id="att-8825943-description" itemprop="description">(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</span></a>
        — <a href="attachment.cgi?id=8825943&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825943">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-53" data-comment-id="11975487">MozReview-Commit-ID: yR1cIjrlPP</pre></div><div class="change-set" id="a7111990_281791"><div class="change" id="aa7111990_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7111990_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a7111990_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7111990_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7111990_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7111990_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:32 PST" data-time="1484170336">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c54"><div class="comment" data-id="11975491" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7111990_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7111990_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:32 PST" data-time="1484170367">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8825944"
         class="attachment patch"
         data-id="8825944" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="27340">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8825944">
          <a class="link" href="attachment.cgi?id=8825944&amp;action=diff">
        <span id="att-8825944-description" itemprop="description">(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</span></a>
        — <a href="attachment.cgi?id=8825944&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825944">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-54" data-comment-id="11975491">MozReview-Commit-ID: yR1cIjrlPP</pre></div><div class="change-set" id="a7112024_281791"><div class="change" id="aa7112024_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7112024_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7112024_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7112024_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:32 PST" data-time="1484170370">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c55"><div class="comment" data-id="11975513" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:36 PST" data-time="1484170590">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="11975513">Comment on <span class=""><a href="/attachment.cgi?id=8825939" name="attach_8825939" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825939</a> <a href="/attachment.cgi?id=8825939&amp;action=edit" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825939&amp;action=diff" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825939'>[review]</a>
(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

Requesting approval for aurora. For answers to sec-approval questions, see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c41">comment 41</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Attachment description: Scramble hash codes securely, to avoid leaking bits of object and symbol addresses &rarr; (aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</div><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Attachment is obsolete: false</div><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c56"><div class="comment" data-id="11975516" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:37 PST" data-time="1484170644">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-56" data-comment-id="11975516">Comment on <span class=""><a href="/attachment.cgi?id=8825943" name="attach_8825943" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825943</a> <a href="/attachment.cgi?id=8825943&amp;action=edit" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825943&amp;action=diff" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825943'>[review]</a>
(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

Requesting approval for beta. For answers to sec-approval questions, see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c41">comment 41</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Attachment description: Scramble hash codes securely, to avoid leaking bits of object and symbol addresses &rarr; (beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</div><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Attachment is obsolete: false</div><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c57"><div class="comment" data-id="11975518" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:37 PST" data-time="1484170675">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-57" data-comment-id="11975518">Comment on <span class=""><a href="/attachment.cgi?id=8825944" name="attach_8825944" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825944</a> <a href="/attachment.cgi?id=8825944&amp;action=edit" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825944&amp;action=diff" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825944'>[review]</a>
(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

Requesting approval for release. For answers to sec-approval questions, see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c41">comment 41</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Attachment description: Scramble hash codes securely, to avoid leaking bits of object and symbol addresses &rarr; (release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</div><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c58"><div class="comment" data-id="11975572" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:53 PST" data-time="1484171598">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-58" data-comment-id="11975572">Comment on <span class=""><a href="/attachment.cgi?id=8825939" name="attach_8825939" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825939</a> <a href="/attachment.cgi?id=8825939&amp;action=edit" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825939&amp;action=diff" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825939'>[review]</a>
(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

Approval Request Comment
[Feature/Bug causing the regression]: 1312001
[User impact if declined]: sec-high security risk that will be disclosed this month.
[Is this code covered by automated tests?]: Yes.
[Has the fix been verified in Nightly?]: Yes.
[Needs manual test from QE? If yes, steps to reproduce]: Unzip the tar from the original report. Visit the file: URL for the attack.html file. After a second or two, you should see &quot;NO RESULT FOUND (CONTRADICTION)&quot;. If you see a hexadecimal number instead, that's bad.
[List of other uplifts needed for the feature/fix]: Everywhere.
[Is the change risky?]: Slightly.
[Why is the change risky/not risky?]: Risky because it's a largeish patch that affects JS Map/Set code; slight because that code is well tested.
[String changes made/needed]: none</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Flags: sec-approval? &rarr; approval-mozilla-aurora?</div></div></div><div class="change-set" id="c59"><div class="comment" data-id="11975574" data-no="59"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-59" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:53 PST" data-time="1484171637">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-59" data-comment-id="11975574">Comment on <span class=""><a href="/attachment.cgi?id=8825943" name="attach_8825943" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825943</a> <a href="/attachment.cgi?id=8825943&amp;action=edit" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825943&amp;action=diff" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825943'>[review]</a>
(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c58">comment 58</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Flags: sec-approval? &rarr; approval-mozilla-beta?</div></div></div><div class="change-set" id="c60"><div class="comment" data-id="11975580" data-no="60"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-60" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-60"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-60" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c60">Comment 60</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 13:56 PST" data-time="1484171763">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-60">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-60" data-comment-id="11975580">Comment on <span class=""><a href="/attachment.cgi?id=8825944" name="attach_8825944" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825944</a> <a href="/attachment.cgi?id=8825944&amp;action=edit" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825944&amp;action=diff" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825944'>[review]</a>
(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c58">comment 58</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Flags: sec-approval? &rarr; approval-mozilla-release?</div></div></div><div class="change-set" id="c61"><div class="comment" data-id="11975641" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-61" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 14:14 PST" data-time="1484172849">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-61" data-comment-id="11975641">This stuff backported pretty cleanly. There was a conflict with rev aeb98c845e96, easily fixed.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jorendorff)</span></div></div></div><div class="change-set" id="c62"><div class="comment" data-id="11975852" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-62" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7112024_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7112024_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:50 PST" data-time="1484178625">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8825986"
         class="attachment patch"
         data-id="8825986" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content=".">
      <meta itemprop="contentSize" content="27233">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8825986">
          <a class="link" href="attachment.cgi?id=8825986&amp;action=diff">
        <span id="att-8825986-description" itemprop="description">(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</span></a>
        — <a href="attachment.cgi?id=8825986&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1312001&attachment=8825986">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-62" data-comment-id="11975852">MozReview-Commit-ID: yR1cIjrlPP</pre></div><div class="change-set" id="a7120282_281791"><div class="change" id="aa7120282_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120282_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a7120282_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7120282_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7120282_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7120282_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:50 PST" data-time="1484178628">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Flags: <span class="activity-deleted">approval-mozilla-aurora?</span></div></div></div><div class="change-set" id="a7120284_281791"><div class="change" id="aa7120284_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120284_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a7120284_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7120284_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7120284_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7120284_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:50 PST" data-time="1484178630">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Flags: <span class="activity-deleted">approval-mozilla-beta?</span></div></div></div><div class="change-set" id="a7120285_281791"><div class="change" id="aa7120285_281791">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_281791" id="a7120285_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7120285_281791"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7120285_281791">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7120285_281791">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:50 PST" data-time="1484178631">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Flags: <span class="activity-deleted">approval-mozilla-release?</span></div></div></div><div class="change-set" id="c63"><div class="comment" data-id="11975859" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-63" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7120285_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:56 PST" data-time="1484178985">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-63" data-comment-id="11975859">Comment on <span class=""><a href="/attachment.cgi?id=8825939" name="attach_8825939" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825939</a> <a href="/attachment.cgi?id=8825939&amp;action=edit" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825939&amp;action=diff" title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825939'>[review]</a>
(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

(Ugh. hg bzexport marked this obsolete for me.)

See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c58">comment 58</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Attachment is obsolete: false</div><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="c64"><div class="comment" data-id="11975862" data-no="64"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-64" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7120285_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:57 PST" data-time="1484179024">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-64" data-comment-id="11975862">Comment on <span class=""><a href="/attachment.cgi?id=8825943" name="attach_8825943" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825943</a> <a href="/attachment.cgi?id=8825943&amp;action=edit" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825943&amp;action=diff" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825943'>[review]</a>
(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c58">comment 58</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Attachment is obsolete: false</div><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c65"><div class="comment" data-id="11975863" data-no="65"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-65" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7120285_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-65"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-65" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c65">Comment 65</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:57 PST" data-time="1484179054">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-65">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-65" data-comment-id="11975863">Comment on <span class=""><a href="/attachment.cgi?id=8825944" name="attach_8825944" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825944</a> <a href="/attachment.cgi?id=8825944&amp;action=edit" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825944&amp;action=diff" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825944'>[review]</a>
(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

See <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c58">comment 58</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Attachment is obsolete: false</div><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Flags: approval-mozilla-release?</div></div></div><div class="change-set" id="c66"><div class="comment" data-id="11975866" data-no="66"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-66" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7120285_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-66"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-66" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c66">Comment 66</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 15:59 PST" data-time="1484179154">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-66">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-66" data-comment-id="11975866">Comment on <span class=""><a href="/attachment.cgi?id=8825986" name="attach_8825986" title="(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825986</a> <a href="/attachment.cgi?id=8825986&amp;action=edit" title="(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825986&amp;action=diff" title="(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825986'>[review]</a>
(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

[Approval Request Comment]
User impact if declined: sec-high security risk
Fix Landed on Version: 50 (current Nightly)
Risk to taking this patch (and alternatives if risky): slight (see <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c58">comment 58</a>)
String or UUID changes made by this patch: none</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825986&amp;action=edit"
           title="(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825986</a> -
        Attachment description: Scramble hash codes securely, to avoid leaking bits of object and symbol addresses &rarr; (esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses</div><div class="change">
        <a href="/attachment.cgi?id=8825986&amp;action=edit"
           title="(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825986</a> -
        Flags: approval-mozilla-esr45?</div></div></div><div class="change-set" id="c67"><div class="comment" data-id="11975894" data-no="67"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-67" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a7120285_281791"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-67"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-67" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c67">Comment 67</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 16:10 PST" data-time="1484179844">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-67">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-67" data-comment-id="11975894"><a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=8171cab46d7f">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=8171cab46d7f</a></pre></div><div class="change-set" id="c68"><div class="comment" data-id="11976010" data-no="68"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-68" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" id="a7120285_281791"><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-68"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-68" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c68">Comment 68</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-11 16:58 PST" data-time="1484182733">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-68">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-68" data-comment-id="11976010">(In reply to Al Billings [:abillings] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - ASLR leak and cross-frame oracle via pointer scrambling in Map/Set"
   href="/show_bug.cgi?id=1312001#c43">comment #43</a>)
<span class="quote">&gt; Jann, our release is on January 24. Is there any way to move your disclosure
&gt; out a week from the January 21 so we can get our release out the door first?
&gt; We did fix the other related issue in 50.1 in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Fix cross-origin information leak from shared atoms"
   href="/show_bug.cgi?id=1317936">bug 1317936</a> .</span >

Sorry about the late reply.

Yes, that's fine with me.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jann+mozilla)</span></div></div></div><div class="change-set" id="c69"><div class="comment" data-id="11977131" data-no="69"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-69" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a7120285_281791"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-69"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-69" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c69">Comment 69</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 03:13 PST" data-time="1484219639">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-69">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-69" data-comment-id="11977131">Comment on <span class=""><a href="/attachment.cgi?id=8825944" name="attach_8825944" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825944</a> <a href="/attachment.cgi?id=8825944&amp;action=edit" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825944&amp;action=diff" title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825944'>[review]</a>
(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

there won't be a 50 dot release for this</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825944&amp;action=edit"
           title="(release) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825944</a> -
        Flags: approval-mozilla-release? &rarr; approval-mozilla-release-</div></div></div><div class="change-set" id="c70"><div class="comment" data-id="11978615" data-no="70"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-70" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7120285_281791"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a7120285_281791"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-70"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-70" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c70">Comment 70</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 12:14 PST" data-time="1484252050">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-70">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-70" data-comment-id="11978615">sec-approval+ if that is needed here.</pre></div><div class="change-set" id="a7193842_451704"><div class="change" id="aa7193842_451704">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a7193842_451704"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_451704" id="a7193842_451704"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7193842_451704"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7193842_451704">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7193842_451704">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 12:16 PST" data-time="1484252188">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825939&amp;action=edit"
           title="(aurora) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825939</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c71"><div class="comment" data-id="11978627" data-no="71"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-71" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a7193842_451704"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a7193842_451704"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-71"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-71" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c71">Comment 71</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 12:16 PST" data-time="1484252217">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-71">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-71" data-comment-id="11978627">Comment on <span class=""><a href="/attachment.cgi?id=8825943" name="attach_8825943" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">attachment 8825943</a> <a href="/attachment.cgi?id=8825943&amp;action=edit" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[details]</a> <a href="/attachment.cgi?id=8825943&amp;action=diff" title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1312001&amp;attachment=8825943'>[review]</a>
(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses

This should land for today's beta 14 build.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825943&amp;action=edit"
           title="(beta) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825943</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="a7193897_451704"><div class="change" id="aa7193897_451704">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a7193897_451704"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_451704" id="a7193897_451704"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7193897_451704"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7193897_451704">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7193897_451704">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 12:17 PST" data-time="1484252243">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8825986&amp;action=edit"
           title="(esr45) Scramble hash codes securely, to avoid leaking bits of object and symbol addresses"
           class=""
        >Attachment #8825986</a> -
        Flags: approval-mozilla-esr45? &rarr; approval-mozilla-esr45+</div></div></div><div class="change-set" id="c72"><div class="comment" data-id="11978700" data-no="72"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-72" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a7193897_451704"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a7193897_451704"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-72"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-72" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c72">Comment 72</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 12:44 PST" data-time="1484253886">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-72">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-72" data-comment-id="11978700"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-aurora/rev/a4996e963d0d">https://hg.mozilla.org/releases/mozilla-aurora/rev/a4996e963d0d</a>
<a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-beta/rev/91be97c8b0ac">https://hg.mozilla.org/releases/mozilla-beta/rev/91be97c8b0ac</a>

Talked this over with jandem and decided it was better to move the ShapeTable work to a follow-up bug since this one is already getting confusing enough to track.</pre><div class="activity"><div class="change">Status: REOPENED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2017-01-07 08:38 PST" data-time="1483807087">5 years ago</span> &rarr; <span class="rel-time" title="2017-01-12 12:44 PST" data-time="1484253886">5 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=isnotempty">status-firefox51</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=isnotempty">status-firefox52</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=isnotempty">status-firefox53</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla53</div></div></div><div class="change-set" id="a7195719_75935"><div class="change" id="aa7195719_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a7195719_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a7195719_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7195719_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7195719_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7195719_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 12:47 PST" data-time="1484254065">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - ASLR leak via pointer scrambling in ShapeTable"
   href="/show_bug.cgi?id=1330769">1330769</a></div></div></div><div class="change-set" id="a7197151_1689"><div class="change" id="aa7197151_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a7197151_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a7197151_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7197151_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7197151_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7197151_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 13:11 PST" data-time="1484255497">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: javascript-core-security &rarr; core-security-release</div></div></div><div class="change-set" id="c73"><div class="comment" data-id="11979174" data-no="73"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-73" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a7197151_1689"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a7197151_1689"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-73"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-73" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c73">Comment 73</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-12 15:36 PST" data-time="1484264187">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-73">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-73" data-comment-id="11979174"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-esr45/rev/c5e67d41bdd0">https://hg.mozilla.org/releases/mozilla-esr45/rev/c5e67d41bdd0</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a7618346_452604"><div class="change" id="aa7618346_452604">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452604" id="a7618346_452604"><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_452604" id="a7618346_452604"><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">Matt Wobensmith [:mwobensmith][:matt:]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7618346_452604"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7618346_452604">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7618346_452604">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-17 10:11 PST" data-time="1484676692">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify+</div><div class="change">QA Contact: mwobensmith</div><div class="change">Whiteboard: Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24) &rarr; [post-critsmash-triage] Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24)</div></div></div><div class="change-set" id="a7638262_280903"><div class="change" id="aa7638262_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7638262_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a7638262_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7638262_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7638262_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7638262_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-17 15:43 PST" data-time="1484696608">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [post-critsmash-triage] Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24) &rarr; [post-critsmash-triage][adv-main51+][adv-esr45.7+] Disclosure date ~Jan 21 2017 (note Fx51 scheduled for Jan 24)</div></div></div><div class="change-set" id="a7644263_280903"><div class="change" id="aa7644263_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7644263_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a7644263_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7644263_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7644263_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a7644263_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-17 17:23 PST" data-time="1484702609">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2017-5378</div></div></div><div class="change-set" id="c74"><div class="comment" data-id="11991734" data-no="74"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-74" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452604" id="a7644263_280903"><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_452604" id="a7644263_280903"><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">Matt Wobensmith [:mwobensmith][:matt:]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-74"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-74" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c74">Comment 74</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-18 10:26 PST" data-time="1484764004">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-74">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-74" data-comment-id="11991734">I was able to see the behavior on Windows and Linux using &quot;attack.html&quot; PoC. The Mac doesn't seem to exhibit the issue using this test case. Also, I was never able to get the other PoC to work on any platform. 

Confirmed bug on Fx50 and Fx53, using builds from 2016-11.
Verified fixed on Fx 51.0b14 and Fx 45.7.0 ESR.

Jann, have you tried our latest builds to make sure that we have fixed this issue?</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=isnotempty">status-firefox51</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">Flags: needinfo?(jann+mozilla)</div></div></div><div class="change-set" id="c75"><div class="comment" data-id="12017985" data-no="75"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-75" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_500267" id="a7644263_280903"><img src="https://secure.gravatar.com/avatar/a76f92f695c9971c81e85a410f0a0916?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_500267" id="a7644263_280903"><a class="email " href="/user_profile?user_id=500267" > <span class="fna">Jann Horn</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-75"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-75" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#c75">Comment 75</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-27 15:20 PST" data-time="1485559211">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-75">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-75" data-comment-id="12017985">Both POCs stopped working for me in Nightly, and the patches look sane to me (but I'm not really familiar with the Firefox codebase).</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jann+mozilla)</span></div></div></div><div class="change-set" id="a12338909_488993"><div class="change" id="aa12338909_488993">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_488993" id="a12338909_488993"><img src="https://secure.gravatar.com/avatar/42f2a9436bbaefa7e0028e214f2b9350?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_488993" id="a12338909_488993"><a class="email " href="/user_profile?user_id=488993" > <span class="fna">Andrei Vaida [:avaida]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a12338909_488993"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a12338909_488993">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a12338909_488993">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-13 02:27 PDT" data-time="1489397255">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">qe-verify+</span></div></div></div><div class="change-set" id="a32011161_1689"><div class="change" id="aa32011161_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a32011161_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a32011161_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a32011161_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a32011161_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1312001#a32011161_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-10-26 18:58 PDT" data-time="1509069507">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1312001&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>