<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#845385 - CVE-2016-9775: privilege escalation via removal - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=845385&quot;&gt;845385&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:845385@bugs.debian.org">#845385</a><br>
CVE-2016-9775: privilege escalation via removal</h1>
<div class="versiongraph"><a href="version.cgi?package=tomcat8;info=1;found=tomcat8%2F8.0.14-1;found=tomcat8%2F8.0.14-1%2Bdeb8u4;absolute=0;collapse=1;fixed=tomcat8%2F8.5.8-2;fixed=tomcat8%2F8.0.14-1%2Bdeb8u5"><img alt="version graph" src="version.cgi?package=tomcat8;width=2;found=tomcat8%2F8.0.14-1;found=tomcat8%2F8.0.14-1%2Bdeb8u4;height=2;absolute=0;collapse=1;fixed=tomcat8%2F8.5.8-2;fixed=tomcat8%2F8.0.14-1%2Bdeb8u5"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=tomcat8">tomcat8</a>;
Maintainer for <a href="pkgreport.cgi?package=tomcat8">tomcat8</a> is <a href="pkgreport.cgi?maint=pkg-java-maintainers%40lists.alioth.debian.org">Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=tomcat8">tomcat8</a> is <a href="pkgreport.cgi?src=tomcat8">src:tomcat8</a> (<a href="https://tracker.debian.org/pkg/tomcat8">PTS</a>, <a href="https://buildd.debian.org/tomcat8">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=tomcat8">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=paul.szabo%40sydney.edu.au">Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</a></p>
  <p>Date: Tue, 22 Nov 2016 22:39:02 UTC</p>

<p>Severity: <em class="severity">critical</em></p>
<p>Tags: security</p>

<p>Found in versions tomcat8/8.0.14-1, tomcat8/8.0.14-1+deb8u4</p>
<p>Fixed in versions tomcat8/8.5.8-2, tomcat8/8.0.14-1+deb8u5</p>

<p><strong>Done:</strong> Emmanuel Bourg &lt;ebourg@apache.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p></div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=845385;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1479854344 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Tue, 22 Nov 2016 22:39:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=2">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Paul Szabo &lt;paul.szabo@sydney.edu.au&gt; -->
<!-- time:1479854344 -->
<strong>Acknowledgement sent</strong>
to <code>Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>team@security.debian.org, secure-testing-team@lists.alioth.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Tue, 22 Nov 2016 22:39:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=4">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=5">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=5">mbox</a>, <a href="mailto:845385@bugs.debian.org?subject=Re%3A%20Privilege%20escalation%20via%20removal&amp;In-Reply-To=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E&amp;body=On%20Wed%2C%2023%20Nov%202016%2009%3A35%3A34%20%2B1100%20Paul%20Szabo%20%3Cpaul.szabo%40sydney.edu.au%3E%20wrote%3A%0A%3E%20Package%3A%20tomcat8%0A%3E%20Version%3A%208.0.14-1%2Bdeb8u4%0A%3E%20Severity%3A%20critical%0A%3E%20Tags%3A%20security%0A%3E%20%0A%3E%20Having%20installed%20tomcat8%2C%20the%20directory%20%2Fetc%2Ftomcat8%2FCatalina%20is%20set%0A%3E%20writable%20by%20group%20tomcat8%2C%20as%20per%20the%20postinst%20script.%20Then%20the%20tomcat8%0A%3E%20user%2C%20in%20the%20situation%20envisaged%20in%20DSA-3670%20and%20DSA-3720%2C%20see%20also%0A%3E%20%20%20http%3A%2F%2Fseclists.org%2Ffulldisclosure%2F2016%2FOct%2F4%0A%3E%20could%20use%20something%20like%20commands%0A%3E%20%20%20touch%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%20%20chmod%202747%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20to%20create%20a%20file%3A%0A%3E%20%20%20%23%20ls%20-l%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%20%20-rwxr-Srwx%201%20tomcat8%20tomcat8%200%20Nov%2023%2009%3A00%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20Then%20if%20the%20tomcat8%20package%20is%20removed%20%28purged%3F%29%2C%20the%20postrm%20script%20runs%0A%3E%20%20%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%0A%3E%20and%20that%20will%20leave%20the%20file%20world-writable%2C%20setgid%20root%3A%0A%3E%20%20%20%23%20ls%20-l%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%20%20-rwxr-Srwx%201%20root%20root%200%20Nov%2023%2009%3A00%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20allowing%20%22group%20root%22%20access%20to%20the%20world.%0A%3E%20%0A%3E%20Cheers%2C%20Paul%0A%3E%20%0A%3E%20Paul%20Szabo%20%20%20psz%40maths.usyd.edu.au%20%20%20http%3A%2F%2Fwww.maths.usyd.edu.au%2Fu%2Fpsz%2F%0A%3E%20School%20of%20Mathematics%20and%20Statistics%20%20%20University%20of%20Sydney%20%20%20%20Australia%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=paul.szabo%40sydney.edu.au" alt="">
<div class="header"><span class="headerfield">From:</span> Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 23 Nov 2016 09:35:34 +1100</div>
</div>
<pre class="message">Package: tomcat8
Version: 8.0.14-1+deb8u4
Severity: critical
Tags: security

Having installed tomcat8, the directory /etc/tomcat8/Catalina is set
writable by group tomcat8, as per the postinst script. Then the tomcat8
user, in the situation envisaged in DSA-3670 and DSA-3720, see also
  <a href="http://seclists.org/fulldisclosure/2016/Oct/4">http://seclists.org/fulldisclosure/2016/Oct/4</a>
could use something like commands
  touch /etc/tomcat8/Catalina/attack
  chmod 2747 /etc/tomcat8/Catalina/attack
to create a file:
  # ls -l /etc/tomcat8/Catalina/attack
  -rwxr-Srwx 1 tomcat8 tomcat8 0 Nov 23 09:00 /etc/tomcat8/Catalina/attack
Then if the tomcat8 package is removed (purged?), the postrm script runs
  chown -Rhf root:root /etc/tomcat8/
and that will leave the file world-writable, setgid root:
  # ls -l /etc/tomcat8/Catalina/attack
  -rwxr-Srwx 1 root root 0 Nov 23 09:00 /etc/tomcat8/Catalina/attack
allowing &quot;group root&quot; access to the world.

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <a href="http://www.maths.usyd.edu.au/u/psz/">http://www.maths.usyd.edu.au/u/psz/</a>
School of Mathematics and Statistics   University of Sydney    Australia


</pre>

<div class="infmessage"><hr><p>
<a name="6"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1479858132 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Tue, 22 Nov 2016 23:42:12 GMT) (<a href="bugreport.cgi?bug=845385;msg=7">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1479858132 -->
<strong>Acknowledgement sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Tue, 22 Nov 2016 23:42:12 GMT) (<a href="bugreport.cgi?bug=845385;msg=9">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=10">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=10">mbox</a>, <a href="mailto:845385@bugs.debian.org?body=On%20Wed%2C%2023%20Nov%202016%2000%3A30%3A54%20%2B0100%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Hi%20Paul%2C%0A%3E%20%0A%3E%20Thank%20you%20very%20much%20for%20reporting%20this%20issue.%20I%20confirm%20this%20happens%0A%3E%20when%20purging%20the%20package%20only.%20The%20offending%20chown%20was%20first%20introduced%0A%3E%20in%20the%20tomcat6%20package%206%20years%20ago%20%5B1%5D%20as%20part%20of%20the%20fix%20for%20%23567548.%0A%3E%20The%20same%20issue%20is%20also%20found%20in%20the%20tomcat7%20package.%0A%3E%20%0A%3E%20Do%20you%20think%20running%20something%20like%20%22chmod%20-R%20640%20%2Fetc%2Ftomcat8%22%20right%0A%3E%20before%20the%20chown%20is%20an%20appropriate%20solution%20to%20this%20issue%3F%0A%3E%20%0A%3E%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20%5B1%5D%20https%3A%2F%2Fanonscm.debian.org%2Fcgit%2Fpkg-java%2Ftomcat6.git%2Fcommit%2F%3Fid%3Df67781f%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C15c26724-e1f5-6ad3-ac54-542ed1afa767%40apache.org%3E&amp;In-Reply-To=%3C15c26724-e1f5-6ad3-ac54-542ed1afa767%40apache.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;, 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 23 Nov 2016 00:30:54 +0100</div>
</div>
<pre class="message">Hi Paul,

Thank you very much for reporting this issue. I confirm this happens
when purging the package only. The offending chown was first introduced
in the tomcat6 package 6 years ago [1] as part of the fix for #567548.
The same issue is also found in the tomcat7 package.

Do you think running something like &quot;chmod -R 640 /etc/tomcat8&quot; right
before the chown is an appropriate solution to this issue?

Emmanuel Bourg

[1] <a href="https://anonscm.debian.org/cgit/pkg-java/tomcat6.git/commit/?id=f67781f">https://anonscm.debian.org/cgit/pkg-java/tomcat6.git/commit/?id=f67781f</a>



</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1479862445 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Wed, 23 Nov 2016 00:54:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=12">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: paul.szabo@sydney.edu.au -->
<!-- time:1479862445 -->
<strong>Acknowledgement sent</strong>
to <code>paul.szabo@sydney.edu.au</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 23 Nov 2016 00:54:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=14">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=15">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=15">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3C201611230046.uAN0kSOQ017389%40como.maths.usyd.edu.au%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Wed%2C%2023%20Nov%202016%2011%3A46%3A28%20%2B1100%20paul.szabo%40sydney.edu.au%20wrote%3A%0A%3E%20Dear%20Emmanuel%2C%0A%3E%20%0A%3E%20%3E%20Do%20you%20think%20running%20something%20like%20%22chmod%20-R%20640%20%2Fetc%2Ftomcat8%22%20right%0A%3E%20%3E%20before%20the%20chown%20is%20an%20appropriate%20solution%20to%20this%20issue%3F%0A%3E%20%0A%3E%20Might%20protect%20against%20%22static%22%20things%2C%20but%20vulnerable%20to%20a%20race.%0A%3E%20%0A%3E%20Your%20postrm%20script%20might%20want%20to%20kill%20all%20tomcat8%20processes%2C%20also.%0A%3E%20That%20might%20be%20a%20%22good%20thing%22%3A%20deluser%20or%20delgroup%20might%20not%20%22work%22%0A%3E%20with%20left-over%2C%20running%20processes%3B%20and%20might%20protect%20against%20a%20race.%0A%3E%20%0A%3E%20But%20really...%20why%20do%20you%20care%20about%20leaving%20some%20%22dangling%22%20useless%0A%3E%20object%2C%20owned%20by%20some%20long-gone%20UID%20or%20GID%3F%0A%3E%20%0A%3E%20Cheers%2C%20Paul%0A%3E%20%0A%3E%20Paul%20Szabo%20%20%20psz%40maths.usyd.edu.au%20%20%20http%3A%2F%2Fwww.maths.usyd.edu.au%2Fu%2Fpsz%2F%0A%3E%20School%20of%20Mathematics%20and%20Statistics%20%20%20University%20of%20Sydney%20%20%20%20Australia%0A%3E%20%0A%3E%20%0A&amp;References=%3C201611230046.uAN0kSOQ017389%40como.maths.usyd.edu.au%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=paul.szabo%40sydney.edu.au" alt="">
<div class="header"><span class="headerfield">From:</span> paul.szabo@sydney.edu.au</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org, ebourg@apache.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 23 Nov 2016 11:46:28 +1100</div>
</div>
<pre class="message">Dear Emmanuel,

&gt; Do you think running something like &quot;chmod -R 640 /etc/tomcat8&quot; right
&gt; before the chown is an appropriate solution to this issue?

Might protect against &quot;static&quot; things, but vulnerable to a race.

Your postrm script might want to kill all tomcat8 processes, also.
That might be a &quot;good thing&quot;: deluser or delgroup might not &quot;work&quot;
with left-over, running processes; and might protect against a race.

But really... why do you care about leaving some &quot;dangling&quot; useless
object, owned by some long-gone UID or GID?

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <a href="http://www.maths.usyd.edu.au/u/psz/">http://www.maths.usyd.edu.au/u/psz/</a>
School of Mathematics and Statistics   University of Sydney    Australia


</pre>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- command:found -->
<!-- requester: Adrian Bunk &lt;bunk@stusta.de&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1480374182 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;tomcat8/8.0.14-1&#39;,
                                    &#39;tomcat8/8.0.14-1+deb8u4&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;tomcat8/8.0.14-1+deb8u4&#39;
                                  ]
            };
-->
<strong>Marked as found in versions tomcat8/8.0.14-1.</strong>
Request was from <code>Adrian Bunk &lt;bunk@stusta.de&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Mon, 28 Nov 2016 23:03:02 GMT) (<a href="bugreport.cgi?bug=845385;msg=17">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480459685 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Tue, 29 Nov 2016 22:48:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=19">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="20"></a>
<!-- request_addr: Markus Koschany &lt;apo@debian.org&gt; -->
<!-- time:1480459685 -->
<strong>Acknowledgement sent</strong>
to <code>Markus Koschany &lt;apo@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Tue, 29 Nov 2016 22:48:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=21">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="22"></a><a name="msg22"></a><a href="#22">Message #22</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=22">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=22">mbox</a>, <a href="mailto:845385@bugs.debian.org?body=On%20Tue%2C%2029%20Nov%202016%2023%3A45%3A52%20%2B0100%20Markus%20Koschany%20%3Capo%40debian.org%3E%20wrote%3A%0A%3E%20On%20Wed%2C%2023%20Nov%202016%2009%3A35%3A34%20%2B1100%20Paul%20Szabo%20%3Cpaul.szabo%40sydney.edu.au%3E%0A%3E%20wrote%3A%0A%3E%20%3E%20Package%3A%20tomcat8%0A%3E%20%3E%20Version%3A%208.0.14-1%2Bdeb8u4%0A%3E%20%3E%20Severity%3A%20critical%0A%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20%0A%3E%20%3E%20Having%20installed%20tomcat8%2C%20the%20directory%20%2Fetc%2Ftomcat8%2FCatalina%20is%20set%0A%3E%20%3E%20writable%20by%20group%20tomcat8%2C%20as%20per%20the%20postinst%20script.%20Then%20the%20tomcat8%0A%3E%20%3E%20user%2C%20in%20the%20situation%20envisaged%20in%20DSA-3670%20and%20DSA-3720%2C%20see%20also%0A%3E%20%3E%20%20%20http%3A%2F%2Fseclists.org%2Ffulldisclosure%2F2016%2FOct%2F4%0A%3E%20%3E%20could%20use%20something%20like%20commands%0A%3E%20%3E%20%20%20touch%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%3E%20%20%20chmod%202747%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%3E%20to%20create%20a%20file%3A%0A%3E%20%3E%20%20%20%23%20ls%20-l%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%3E%20%20%20-rwxr-Srwx%201%20tomcat8%20tomcat8%200%20Nov%2023%2009%3A00%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%3E%20Then%20if%20the%20tomcat8%20package%20is%20removed%20%28purged%3F%29%2C%20the%20postrm%20script%20runs%0A%3E%20%3E%20%20%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%0A%3E%20%3E%20and%20that%20will%20leave%20the%20file%20world-writable%2C%20setgid%20root%3A%0A%3E%20%3E%20%20%20%23%20ls%20-l%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%3E%20%20%20-rwxr-Srwx%201%20root%20root%200%20Nov%2023%2009%3A00%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%0A%3E%20%3E%20allowing%20%22group%20root%22%20access%20to%20the%20world.%0A%3E%20%0A%3E%20I%20don%27t%20understand%20why%20this%20is%20a%20security%20issue%20when%0A%3E%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%20is%20owned%20by%20root%3Aroot%20after%20the%20purge%20and%0A%3E%20the%20tomcat8%20user%20doesn%27t%20even%20exist%20anymore.%0A%3E%20%0A%3E%20Markus%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E&amp;In-Reply-To=%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E&amp;subject=Re%3A%20Privilege%20escalation%20via%20removal">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=apo%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Markus Koschany &lt;apo@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 29 Nov 2016 23:45:52 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=845385;msg=22">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On Wed, 23 Nov 2016 09:35:34 +1100 Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;
wrote:
&gt; Package: tomcat8
&gt; Version: 8.0.14-1+deb8u4
&gt; Severity: critical
&gt; Tags: security
&gt; 
&gt; Having installed tomcat8, the directory /etc/tomcat8/Catalina is set
&gt; writable by group tomcat8, as per the postinst script. Then the tomcat8
&gt; user, in the situation envisaged in DSA-3670 and DSA-3720, see also
&gt;   <a href="http://seclists.org/fulldisclosure/2016/Oct/4">http://seclists.org/fulldisclosure/2016/Oct/4</a>
&gt; could use something like commands
&gt;   touch /etc/tomcat8/Catalina/attack
&gt;   chmod 2747 /etc/tomcat8/Catalina/attack
&gt; to create a file:
&gt;   # ls -l /etc/tomcat8/Catalina/attack
&gt;   -rwxr-Srwx 1 tomcat8 tomcat8 0 Nov 23 09:00 /etc/tomcat8/Catalina/attack
&gt; Then if the tomcat8 package is removed (purged?), the postrm script runs
&gt;   chown -Rhf root:root /etc/tomcat8/
&gt; and that will leave the file world-writable, setgid root:
&gt;   # ls -l /etc/tomcat8/Catalina/attack
&gt;   -rwxr-Srwx 1 root root 0 Nov 23 09:00 /etc/tomcat8/Catalina/attack
&gt; allowing &quot;group root&quot; access to the world.

I don&#39;t understand why this is a security issue when
/etc/tomcat8/Catalina/attack is owned by root:root after the purge and
the tomcat8 user doesn&#39;t even exist anymore.

Markus


</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=845385;filename=signature.asc;msg=22">signature.asc</a> (application/pgp-signature, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="23"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480460582 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Tue, 29 Nov 2016 23:03:02 GMT) (<a href="bugreport.cgi?bug=845385;msg=24">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="25"></a>
<!-- request_addr: Markus Koschany &lt;apo@debian.org&gt; -->
<!-- time:1480460582 -->
<strong>Acknowledgement sent</strong>
to <code>Markus Koschany &lt;apo@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Tue, 29 Nov 2016 23:03:02 GMT) (<a href="bugreport.cgi?bug=845385;msg=26">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=26">mbox</a>, <a href="#25">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="27"></a><a name="msg27"></a><a href="#27">Message #27</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=27">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=27">mbox</a>, <a href="mailto:845385@bugs.debian.org?References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3Cfff189e2-62c5-7af2-ccdb-fc54cda9d58a%40debian.org%3E&amp;body=On%20Tue%2C%2029%20Nov%202016%2023%3A59%3A16%20%2B0100%20Markus%20Koschany%20%3Capo%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20I%20don%27t%20understand%20why%20this%20is%20a%20security%20issue%20when%0A%3E%20%3E%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%20is%20owned%20by%20root%3Aroot%20after%20the%20purge%20and%0A%3E%20%3E%20the%20tomcat8%20user%20doesn%27t%20even%20exist%20anymore.%0A%3E%20%0A%3E%20Nevermind.%20I%20missed%20the%20%22world%22.%20However%20dpkg%20warns%20about%20that%0A%3E%20%2Fetc%2Ftomcat8%2FCatalina%20is%20not%20empty%20on%20purge%2C%20so%20the%20admin%20will%20be%0A%3E%20informed%20that%20something%20requires%20his%20attention.%20Besides%20all%20tomcat%0A%3E%20processes%20are%20killed%20on%20purge.%0A%3E%20%0A&amp;subject=Re%3A%20Privilege%20escalation%20via%20removal&amp;In-Reply-To=%3Cfff189e2-62c5-7af2-ccdb-fc54cda9d58a%40debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=apo%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Markus Koschany &lt;apo@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 29 Nov 2016 23:59:16 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=845385;msg=27">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">&gt; I don&#39;t understand why this is a security issue when
&gt; /etc/tomcat8/Catalina/attack is owned by root:root after the purge and
&gt; the tomcat8 user doesn&#39;t even exist anymore.

Nevermind. I missed the &quot;world&quot;. However dpkg warns about that
/etc/tomcat8/Catalina is not empty on purge, so the admin will be
informed that something requires his attention. Besides all tomcat
processes are killed on purge.

</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=845385;filename=signature.asc;msg=27">signature.asc</a> (application/pgp-signature, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="28"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480461843 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Tue, 29 Nov 2016 23:24:03 GMT) (<a href="bugreport.cgi?bug=845385;msg=29">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=29">mbox</a>, <a href="#28">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="30"></a>
<!-- request_addr: Markus Koschany &lt;apo@debian.org&gt; -->
<!-- time:1480461843 -->
<strong>Acknowledgement sent</strong>
to <code>Markus Koschany &lt;apo@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Tue, 29 Nov 2016 23:24:03 GMT) (<a href="bugreport.cgi?bug=845385;msg=31">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=31">mbox</a>, <a href="#30">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="32"></a><a name="msg32"></a><a href="#32">Message #32</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=32">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=32">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3Ca1ac4e28-f3f2-b2c4-57a3-e4e508d02e6e%40debian.org%3E&amp;subject=Re%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Wed%2C%2030%20Nov%202016%2000%3A20%3A35%20%2B0100%20Markus%20Koschany%20%3Capo%40debian.org%3E%20wrote%3A%0A%3E%20I%20think%20the%20solution%20is%20quite%20simple.%0A%3E%20%0A%3E%20Let%27s%20replace%0A%3E%20%0A%3E%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%20%7C%7C%20true%0A%3E%20%0A%3E%20with%0A%3E%20%0A%3E%20rm%20-rf%20%2Fetc%2Ftomcat8%0A%3E%20%0A%3E%20I%20mean%20purge%20means%20purge.%20Remove%20all%20files%2C%20don%27t%20leave%20anything%20behind.%0A%3E%20%0A%3E%20As%20another%20improvement%20suggestion%20for%20Tomcat%209%2C%20we%20could%20stop%20deleting%0A%3E%20the%20tomcat%20user%20on%20purge%20and%20let%20the%20admin%20decide.%20I%20believe%20this%20is%0A%3E%20even%20consensus%20within%20the%20project%20and%20will%20protect%20against%20reusing%20files%0A%3E%20with%20the%20old%20GID%20and%20UID%20for%20something%20unintended.%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3Cfff189e2-62c5-7af2-ccdb-fc54cda9d58a%40debian.org%3E%0A%20%3Cfff189e2-62c5-7af2-ccdb-fc54cda9d58a%40debian.org%3E%0A%20%3Ca1ac4e28-f3f2-b2c4-57a3-e4e508d02e6e%40debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=apo%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Markus Koschany &lt;apo@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 30 Nov 2016 00:20:35 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=845385;msg=32">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">I think the solution is quite simple.

Let&#39;s replace

chown -Rhf root:root /etc/tomcat8/ || true

with

rm -rf /etc/tomcat8

I mean purge means purge. Remove all files, don&#39;t leave anything behind.

As another improvement suggestion for Tomcat 9, we could stop deleting
the tomcat user on purge and let the admin decide. I believe this is
even consensus within the project and will protect against reusing files
with the old GID and UID for something unintended.



</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=845385;filename=signature.asc;msg=32">signature.asc</a> (application/pgp-signature, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="33"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480462384 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Tue, 29 Nov 2016 23:33:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=34">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=34">mbox</a>, <a href="#33">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="35"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1480462384 -->
<strong>Acknowledgement sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Tue, 29 Nov 2016 23:33:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=36">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=36">mbox</a>, <a href="#35">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="37"></a><a name="msg37"></a><a href="#37">Message #37</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=37">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=37">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3C748d260e-f458-afb2-888c-1d9affc7f228%40apache.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Wed%2C%2030%20Nov%202016%2000%3A29%3A23%20%2B0100%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Le%2029%2F11%2F2016%20%C3%A0%2023%3A45%2C%20Markus%20Koschany%20a%20%C3%A9crit%20%3A%0A%3E%20%0A%3E%20%3E%20I%20don%27t%20understand%20why%20this%20is%20a%20security%20issue%20when%0A%3E%20%3E%20%2Fetc%2Ftomcat8%2FCatalina%2Fattack%20is%20owned%20by%20root%3Aroot%20after%20the%20purge%20and%0A%3E%20%3E%20the%20tomcat8%20user%20doesn%27t%20even%20exist%20anymore.%0A%3E%20%0A%3E%20My%20understanding%20is%20that%20the%20file%20is%20left%20with%20execution%20permissions%20for%0A%3E%20all%20users%20and%20setgid%20root%20after%20the%20purge.%20Any%20local%20user%20can%20then%20take%0A%3E%20control%20of%20the%20system.%0A%3E%20%0A%3E%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3C748d260e-f458-afb2-888c-1d9affc7f228%40apache.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Markus Koschany &lt;apo@debian.org&gt;, 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 30 Nov 2016 00:29:23 +0100</div>
</div>
<pre class="message">Le 29/11/2016 à 23:45, Markus Koschany a écrit :

&gt; I don&#39;t understand why this is a security issue when
&gt; /etc/tomcat8/Catalina/attack is owned by root:root after the purge and
&gt; the tomcat8 user doesn&#39;t even exist anymore.

My understanding is that the file is left with execution permissions for
all users and setgid root after the purge. Any local user can then take
control of the system.

Emmanuel Bourg



</pre>

<div class="infmessage"><hr><p>
<a name="38"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480508104 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Wed, 30 Nov 2016 12:15:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=39">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=39">mbox</a>, <a href="#38">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="40"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1480508104 -->
<strong>Acknowledgement sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 30 Nov 2016 12:15:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=41">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=41">mbox</a>, <a href="#40">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="42"></a><a name="msg42"></a><a href="#42">Message #42</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=42">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=42">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3C823bc5a5-f120-473d-1fdc-38f5febcd632%40apache.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Wed%2C%2030%20Nov%202016%2013%3A13%3A10%20%2B0100%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Le%2030%2F11%2F2016%20%C3%A0%2000%3A20%2C%20Markus%20Koschany%20a%20%C3%A9crit%20%3A%0A%3E%20%0A%3E%20%3E%20rm%20-rf%20%2Fetc%2Ftomcat8%0A%3E%20%3E%20%0A%3E%20%3E%20I%20mean%20purge%20means%20purge.%20Remove%20all%20files%2C%20don%27t%20leave%20anything%20behind.%0A%3E%20%0A%3E%20That%27s%20tempting%20but%20I%20wonder%20if%20we%20aren%27t%20missing%20something.%0A%3E%20%0A%3E%20Other%20packages%20are%20installing%20things%20under%20%2Fetc%2Ftomcat8%2C%20for%20example%0A%3E%20solr-tomcat%20and%20jspwiki%2C%20but%20fortunately%20in%20these%20cases%20the%20packages%20are%0A%3E%20installing%20symlinks%20to%20other%20configuration%20files%2C%20and%20by%20the%20time%0A%3E%20tomcat8%20is%20purged%20these%20links%20have%20already%20been%20removed.%0A%3E%20%0A%3E%20Is%20there%20another%20case%20where%20removing%20the%20files%20in%20%2Fetc%2Ftomcat8%20is%0A%3E%20undesirable%3F%20What%20about%20files%20created%20by%20the%20sysadmin%20in%20this%20directory%0A%3E%20%28like%20the%20ones%20we%20avoided%20to%20chmod%20on%20upgrades%20in%20%23825786%29%20%3F%0A%3E%20%0A%3E%20%0A%3E%20%3E%20As%20another%20improvement%20suggestion%20for%20Tomcat%209%2C%20we%20could%20stop%20deleting%0A%3E%20%3E%20the%20tomcat%20user%20on%20purge%20and%20let%20the%20admin%20decide.%20I%20believe%20this%20is%0A%3E%20%3E%20even%20consensus%20within%20the%20project%20and%20will%20protect%20against%20reusing%20files%0A%3E%20%3E%20with%20the%20old%20GID%20and%20UID%20for%20something%20unintended.%0A%3E%20%0A%3E%20I%20thought%20the%20users%20created%20by%20a%20package%20were%20supposed%20to%20be%20removed%0A%3E%20when%20the%20package%20is%20purged%2C%20but%20this%20isn%27t%20a%20requirement%20in%20the%20policy.%0A%3E%20I%27ve%20found%20%23621833%20that%20deals%20with%20this%20topic%20and%20the%20consensus%20is%0A%3E%20indeed%20not%20to%20remove%20the%20user.%0A%3E%20%0A%3E%20If%20we%20follow%20the%20consensus%20I%20would%20also%20suggest%20reusing%20the%20same%20user%0A%3E%20when%20switching%20to%20a%20new%20version%20to%20Tomcat.%20The%20last%20time%20I%20switched%20from%0A%3E%20tomcat7%20to%20tomcat8%20it%20was%20annoying%20to%20chmod%20manually%20the%20log%20files%20of%20my%0A%3E%20web%20applications.%20If%20there%20was%20a%20unique%20tomcat%20user%20for%20the%0A%3E%20tomcat%7B7%2C8%2C9%7D%20package%20that%20would%20be%20easier.%0A%3E%20%0A%3E%20This%20would%20be%20similar%20to%20the%20jetty8%20and%20jetty9%20packages%20sharing%20the%20same%0A%3E%20%27jetty%27%20user%20%28but%20in%20this%20case%20the%20user%20is%20also%20removed%20when%20the%20package%0A%3E%20is%20uninstalled%2C%20this%20is%20problematic%20when%20the%20old%20package%20is%20removed%0A%3E%20after%20the%20new%20one%20is%20installed%29.%0A%3E%20%0A%3E%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3C727cb7d5-3ba6-4809-859a-b5e7728b545c%40debian.org%3E%0A%20%3Cfff189e2-62c5-7af2-ccdb-fc54cda9d58a%40debian.org%3E%0A%20%3Cfff189e2-62c5-7af2-ccdb-fc54cda9d58a%40debian.org%3E%0A%20%3Ca1ac4e28-f3f2-b2c4-57a3-e4e508d02e6e%40debian.org%3E%0A%20%3C823bc5a5-f120-473d-1fdc-38f5febcd632%40apache.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Markus Koschany &lt;apo@debian.org&gt;, 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 30 Nov 2016 13:13:10 +0100</div>
</div>
<pre class="message">Le 30/11/2016 à 00:20, Markus Koschany a écrit :

&gt; rm -rf /etc/tomcat8
&gt; 
&gt; I mean purge means purge. Remove all files, don&#39;t leave anything behind.

That&#39;s tempting but I wonder if we aren&#39;t missing something.

Other packages are installing things under /etc/tomcat8, for example
solr-tomcat and jspwiki, but fortunately in these cases the packages are
installing symlinks to other configuration files, and by the time
tomcat8 is purged these links have already been removed.

Is there another case where removing the files in /etc/tomcat8 is
undesirable? What about files created by the sysadmin in this directory
(like the ones we avoided to chmod on upgrades in #825786) ?


&gt; As another improvement suggestion for Tomcat 9, we could stop deleting
&gt; the tomcat user on purge and let the admin decide. I believe this is
&gt; even consensus within the project and will protect against reusing files
&gt; with the old GID and UID for something unintended.

I thought the users created by a package were supposed to be removed
when the package is purged, but this isn&#39;t a requirement in the policy.
I&#39;ve found #621833 that deals with this topic and the consensus is
indeed not to remove the user.

If we follow the consensus I would also suggest reusing the same user
when switching to a new version to Tomcat. The last time I switched from
tomcat7 to tomcat8 it was annoying to chmod manually the log files of my
web applications. If there was a unique tomcat user for the
tomcat{7,8,9} package that would be easier.

This would be similar to the jetty8 and jetty9 packages sharing the same
&#39;jetty&#39; user (but in this case the user is also removed when the package
is uninstalled, this is problematic when the old package is removed
after the new one is installed).

Emmanuel Bourg



</pre>

<div class="infmessage"><hr><p>
<a name="43"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480512064 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Wed, 30 Nov 2016 13:21:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=44">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=44">mbox</a>, <a href="#43">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="45"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1480512064 -->
<strong>Acknowledgement sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 30 Nov 2016 13:21:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=46">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=46">mbox</a>, <a href="#45">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="47"></a><a name="msg47"></a><a href="#47">Message #47</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=47">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=47">mbox</a>, <a href="mailto:845385@bugs.debian.org?subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;In-Reply-To=%3C8b8553b3-791e-66b6-d724-0673a032499b%40apache.org%3E&amp;References=%3C201611230046.uAN0kSOQ017389%40como.maths.usyd.edu.au%3E%0A%20%3C8b8553b3-791e-66b6-d724-0673a032499b%40apache.org%3E&amp;body=On%20Wed%2C%2030%20Nov%202016%2014%3A17%3A13%20%2B0100%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Hi%20Paul%2C%0A%3E%20%0A%3E%20Le%2023%2F11%2F2016%20%C3%A0%2001%3A46%2C%20paul.szabo%40sydney.edu.au%20a%20%C3%A9crit%20%3A%0A%3E%20%0A%3E%20%3E%20Might%20protect%20against%20%22static%22%20things%2C%20but%20vulnerable%20to%20a%20race.%0A%3E%20%0A%3E%20I%27m%20not%20sure%20to%20understand%2C%20what%20kind%20of%20race%20could%20happen%20here%3F%0A%3E%20%0A%3E%20%0A%3E%20%3E%20But%20really...%20why%20do%20you%20care%20about%20leaving%20some%20%22dangling%22%20useless%0A%3E%20%3E%20object%2C%20owned%20by%20some%20long-gone%20UID%20or%20GID%3F%0A%3E%20%0A%3E%20I%20don%27t%20know%20the%20motivations%20behind%20this%20complexity.%20I%20can%20imagine%20a%0A%3E%20case%20where%20an%20administrator%20switches%20from%20tomcat8%20to%20tomcat9%20and%20doesn%27t%0A%3E%20expect%20the%20old%20package%20to%20remove%20files%20unknown%20to%20him%20so%20they%20can%20be%0A%3E%20moved%20to%20the%20configuration%20directory%20of%20the%20new%20package.%0A%3E%20%0A%3E%20The%20upgrade%20scenario%20could%20look%20like%20this%3A%0A%3E%20%0A%3E%201.%20Install%20tomcat8%0A%3E%202.%20Declare%20a%20web%20application%20in%20%2Fetc%2Ftomcat8%2FCatalina%2Flocalhost%0A%3E%203.%20Uninstall%20tomcat8%0A%3E%204.%20Install%20tomcat9%0A%3E%205.%20Move%20%2Fetc%2Ftomcat8%2FCatalina%2Flocalhost%2F%2A%20to%20%2Fetc%2Ftomcat9%2FCatalina%2Flocalhost%0A%3E%20%0A%3E%20If%20the%20step%203%20also%20removes%20the%20webapp%20configuration%20the%20administrator%20is%0A%3E%20going%20to%20be%20angry%20%28but%20arguably%20less%20than%20having%20his%20system%20hacked%29.%0A%3E%20%0A%3E%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> paul.szabo@sydney.edu.au, 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 30 Nov 2016 14:17:13 +0100</div>
</div>
<pre class="message">Hi Paul,

Le 23/11/2016 à 01:46, paul.szabo@sydney.edu.au a écrit :

&gt; Might protect against &quot;static&quot; things, but vulnerable to a race.

I&#39;m not sure to understand, what kind of race could happen here?


&gt; But really... why do you care about leaving some &quot;dangling&quot; useless
&gt; object, owned by some long-gone UID or GID?

I don&#39;t know the motivations behind this complexity. I can imagine a
case where an administrator switches from tomcat8 to tomcat9 and doesn&#39;t
expect the old package to remove files unknown to him so they can be
moved to the configuration directory of the new package.

The upgrade scenario could look like this:

1. Install tomcat8
2. Declare a web application in /etc/tomcat8/Catalina/localhost
3. Uninstall tomcat8
4. Install tomcat9
5. Move /etc/tomcat8/Catalina/localhost/* to /etc/tomcat9/Catalina/localhost

If the step 3 also removes the webapp configuration the administrator is
going to be angry (but arguably less than having his system hacked).

Emmanuel Bourg



</pre>

<div class="infmessage"><hr><p>
<a name="48"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480512065 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Wed, 30 Nov 2016 13:21:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=49">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=49">mbox</a>, <a href="#48">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="50"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1480512065 -->
<strong>Acknowledgement sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 30 Nov 2016 13:21:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=51">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=51">mbox</a>, <a href="#50">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="52"></a><a name="msg52"></a><a href="#52">Message #52</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=52">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=52">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3C79e69281-f100-6889-aabc-f9a827a106ba%40apache.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Wed%2C%2030%20Nov%202016%2014%3A17%3A51%20%2B0100%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Le%2022%2F11%2F2016%20%C3%A0%2023%3A35%2C%20Paul%20Szabo%20a%20%C3%A9crit%20%3A%0A%3E%20%0A%3E%20%3E%20Then%20if%20the%20tomcat8%20package%20is%20removed%20%28purged%3F%29%2C%20the%20postrm%20script%20runs%0A%3E%20%3E%20%20%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%0A%3E%20%3E%20and%20that%20will%20leave%20the%20file%20world-writable%2C%20setgid%20root%0A%3E%20%0A%3E%20What%20about%20switching%20the%20files%20left%20to%20nobody%3Anogroup%20instead%20of%0A%3E%20root%3Aroot%3F%20That%20would%20be%20less%20disruptive%20for%20the%20stable%20and%20oldstable%0A%3E%20updates%20than%20removing%20%2Fetc%2Ftomcat8%20completely.%0A%3E%20%0A%3E%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C79e69281-f100-6889-aabc-f9a827a106ba%40apache.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;, 845385@bugs.debian.org,
 Markus Koschany &lt;apo@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 30 Nov 2016 14:17:51 +0100</div>
</div>
<pre class="message">Le 22/11/2016 à 23:35, Paul Szabo a écrit :

&gt; Then if the tomcat8 package is removed (purged?), the postrm script runs
&gt;   chown -Rhf root:root /etc/tomcat8/
&gt; and that will leave the file world-writable, setgid root

What about switching the files left to nobody:nogroup instead of
root:root? That would be less disruptive for the stable and oldstable
updates than removing /etc/tomcat8 completely.

Emmanuel Bourg



</pre>

<div class="infmessage"><hr><p>
<a name="53"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480515662 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Wed, 30 Nov 2016 14:21:02 GMT) (<a href="bugreport.cgi?bug=845385;msg=54">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=54">mbox</a>, <a href="#53">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="55"></a>
<!-- request_addr: Markus Koschany &lt;apo@debian.org&gt; -->
<!-- time:1480515662 -->
<strong>Acknowledgement sent</strong>
to <code>Markus Koschany &lt;apo@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 30 Nov 2016 14:21:02 GMT) (<a href="bugreport.cgi?bug=845385;msg=56">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=56">mbox</a>, <a href="#55">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="57"></a><a name="msg57"></a><a href="#57">Message #57</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=57">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=57">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3Ce21cde0e-f964-5805-0710-987801f7010f%40debian.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Wed%2C%2030%20Nov%202016%2015%3A18%3A08%20%2B0100%20Markus%20Koschany%20%3Capo%40debian.org%3E%20wrote%3A%0A%3E%20On%2030.11.2016%2014%3A17%2C%20Emmanuel%20Bourg%20wrote%3A%0A%3E%20%3E%20Le%2022%2F11%2F2016%20%C3%A0%2023%3A35%2C%20Paul%20Szabo%20a%20%C3%A9crit%20%3A%0A%3E%20%3E%20%0A%3E%20%3E%3E%20Then%20if%20the%20tomcat8%20package%20is%20removed%20%28purged%3F%29%2C%20the%20postrm%20script%20runs%0A%3E%20%3E%3E%20%20%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%0A%3E%20%3E%3E%20and%20that%20will%20leave%20the%20file%20world-writable%2C%20setgid%20root%0A%3E%20%3E%20%0A%3E%20%3E%20What%20about%20switching%20the%20files%20left%20to%20nobody%3Anogroup%20instead%20of%0A%3E%20%3E%20root%3Aroot%3F%20That%20would%20be%20less%20disruptive%20for%20the%20stable%20and%20oldstable%0A%3E%20%3E%20updates%20than%20removing%20%2Fetc%2Ftomcat8%20completely.%0A%3E%20%0A%3E%20I%20guess%20just%20removing%20%2Fetc%2Ftomcat8%2FCatalina%20would%20be%20an%20option%20too.%20As%0A%3E%20far%20as%20I%20know%20nothing%20else%20requires%20it%20to%20be%20present%20after%20the%20removal%0A%3E%20of%20Tomcat.%20If%20there%20were%20applications%20with%20such%20a%20dependency%20we%20should%0A%3E%20take%20a%20look%20at%20them.%0A%3E%20%0A%3E%20Markus%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20161122223534.2656.23949.reportbug%40v0mt.pc.maths.usyd.edu.au%3E%0A%20%3C79e69281-f100-6889-aabc-f9a827a106ba%40apache.org%3E%0A%20%3Ce21cde0e-f964-5805-0710-987801f7010f%40debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=apo%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Markus Koschany &lt;apo@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;, 845385@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 30 Nov 2016 15:18:08 +0100</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=845385;msg=57">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">On 30.11.2016 14:17, Emmanuel Bourg wrote:
&gt; Le 22/11/2016 à 23:35, Paul Szabo a écrit :
&gt; 
&gt;&gt; Then if the tomcat8 package is removed (purged?), the postrm script runs
&gt;&gt;   chown -Rhf root:root /etc/tomcat8/
&gt;&gt; and that will leave the file world-writable, setgid root
&gt; 
&gt; What about switching the files left to nobody:nogroup instead of
&gt; root:root? That would be less disruptive for the stable and oldstable
&gt; updates than removing /etc/tomcat8 completely.

I guess just removing /etc/tomcat8/Catalina would be an option too. As
far as I know nothing else requires it to be present after the removal
of Tomcat. If there were applications with such a dependency we should
take a look at them.

Markus



</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=845385;filename=signature.asc;msg=57">signature.asc</a> (application/pgp-signature, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="58"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480538165 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Wed, 30 Nov 2016 20:36:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=59">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=59">mbox</a>, <a href="#58">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="60"></a>
<!-- request_addr: paul.szabo@sydney.edu.au -->
<!-- time:1480538165 -->
<strong>Acknowledgement sent</strong>
to <code>paul.szabo@sydney.edu.au</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>.
 (Wed, 30 Nov 2016 20:36:05 GMT) (<a href="bugreport.cgi?bug=845385;msg=61">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=61">mbox</a>, <a href="#60">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="62"></a><a name="msg62"></a><a href="#62">Message #62</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=62">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=62">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3C201611302032.uAUKWTej011887%40como.maths.usyd.edu.au%3E&amp;subject=Re%3A%20Bug%23845385%3A%20Privilege%20escalation%20via%20removal&amp;body=On%20Thu%2C%201%20Dec%202016%2007%3A32%3A29%20%2B1100%20paul.szabo%40sydney.edu.au%20wrote%3A%0A%3E%20Emmanuel%20wrote%3A%0A%3E%20%0A%3E%20%3E%3E%20Might%20protect%20against%20%22static%22%20things%2C%20but%20vulnerable%20to%20a%20race.%0A%3E%20%3E%20I%27m%20not%20sure%20to%20understand%2C%20what%20kind%20of%20race%20could%20happen%20here%3F%0A%3E%20%0A%3E%20Hmm...%20You%20suggested%20some%20chmod%20before%20chown.%20Your%20attacker%20sits%20tight%2C%0A%3E%20waits%20for%20the%20chmod%2C%20then%20creates%20the%20%22bad%20thing%22%20in%20readiness%20for%20your%0A%3E%20chown.%20The%20chmod%20takes%20time%20to%20complete%2C%20the%20chown%20takes%20time%20to%20get%20up%0A%3E%20and%20start%3A%20plenty%20of%20time%20in%20between%20for%20the%20attacker%20to%20act.%0A%3E%20%0A%3E%20%3E%3E%20But%20really...%20why%20do%20you%20care%20about%20leaving%20some%20%22dangling%22%20useless%0A%3E%20%3E%3E%20object%2C%20owned%20by%20some%20long-gone%20UID%20or%20GID%3F%0A%3E%20%3E%0A%3E%20%3E%20I%20don%27t%20know%20the%20motivations%20behind%20this%20complexity.%20I%20can%20imagine%20a%0A%3E%20%3E%20case%20where%20an%20administrator%20switches%20from%20tomcat8%20to%20tomcat9%20and%20doesn%27t%0A%3E%20%3E%20expect%20the%20old%20package%20to%20remove%20files%20unknown%20to%20him%20so%20they%20can%20be%0A%3E%20%3E%20moved%20to%20the%20configuration%20directory%20of%20the%20new%20package.%0A%3E%20%3E%0A%3E%20%3E%20The%20upgrade%20scenario%20could%20look%20like%20this%3A%0A%3E%20%3E%0A%3E%20%3E%201.%20Install%20tomcat8%0A%3E%20%3E%202.%20Declare%20a%20web%20application%20in%20%2Fetc%2Ftomcat8%2FCatalina%2Flocalhost%0A%3E%20%3E%203.%20Uninstall%20tomcat8%0A%3E%20%3E%204.%20Install%20tomcat9%0A%3E%20%3E%205.%20Move%20%2Fetc%2Ftomcat8%2FCatalina%2Flocalhost%2F%2A%20to%20%2Fetc%2Ftomcat9%2FCatalina%2Flocalhost%0A%3E%20%3E%0A%3E%20%3E%20If%20the%20step%203%20also%20removes%20the%20webapp%20configuration%20the%20administrator%20is%0A%3E%20%3E%20going%20to%20be%20angry%20%28but%20arguably%20less%20than%20having%20his%20system%20hacked%29.%0A%3E%20%0A%3E%20You%20misunderstood.%20Do%20not%20remove%20things%20in%20%22step%203%22%3A%20leave%20alone%2C%20do%20not%0A%3E%20chown.%20%28Remove%20the%20chown%20from%20your%20script.%29%20Leave%20it%20being%20owned%20by%20the%0A%3E%20tomcat8%20UID%2C%20not%20bother%20that%20the%20UID%20will%20be%20%22gone%22%20and%20un-named.%0A%3E%20%0A%3E%20%3E%3E%20Then%20if%20the%20tomcat8%20package%20is%20removed%20%28purged%3F%29%2C%20the%20postrm%20script%20runs%0A%3E%20%3E%3E%20%20%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%0A%3E%20%3E%3E%20and%20that%20will%20leave%20the%20file%20world-writable%2C%20setgid%20root%0A%3E%20%3E%0A%3E%20%3E%20What%20about%20switching%20the%20files%20left%20to%20nobody%3Anogroup%20instead%20of%0A%3E%20%3E%20root%3Aroot%3F%20That%20would%20be%20less%20disruptive%20for%20the%20stable%20and%20oldstable%0A%3E%20%3E%20updates%20than%20removing%20%2Fetc%2Ftomcat8%20completely.%0A%3E%20%0A%3E%20That%20would%20be%20less%20dangerous%2C%20but%20still%20wrong%3B%20would%20still%20be%20privilege%0A%3E%20escalation%2C%20though%20to%20a%20less%20useful%20entity.%0A%3E%20%0A%3E%20---%0A%3E%20%0A%3E%20Markus%20wrote%3A%0A%3E%20%0A%3E%20%3E%3E%3E%20Then%20if%20the%20tomcat8%20package%20is%20removed%20%28purged%3F%29%2C%20the%20postrm%20script%20runs%0A%3E%20%3E%3E%3E%20%20%20chown%20-Rhf%20root%3Aroot%20%2Fetc%2Ftomcat8%2F%0A%3E%20%3E%3E%3E%20and%20that%20will%20leave%20the%20file%20world-writable%2C%20setgid%20root%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20What%20about%20switching%20the%20files%20left%20to%20nobody%3Anogroup%20instead%20of%0A%3E%20%3E%3E%20root%3Aroot%3F%20That%20would%20be%20less%20disruptive%20for%20the%20stable%20and%20oldstable%0A%3E%20%3E%3E%20updates%20than%20removing%20%2Fetc%2Ftomcat8%20completely.%0A%3E%20%3E%0A%3E%20%3E%20I%20guess%20just%20removing%20%2Fetc%2Ftomcat8%2FCatalina%20would%20be%20an%20option%20too.%20As%0A%3E%20%3E%20far%20as%20I%20know%20nothing%20else%20requires%20it%20to%20be%20present%20after%20the%20removal%0A%3E%20%3E%20of%20Tomcat.%20If%20there%20were%20applications%20with%20such%20a%20dependency%20we%20should%0A%3E%20%3E%20take%20a%20look%20at%20them.%0A&amp;References=%3C201611302032.uAUKWTej011887%40como.maths.usyd.edu.au%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=paul.szabo%40sydney.edu.au" alt="">
<div class="header"><span class="headerfield">From:</span> paul.szabo@sydney.edu.au</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org, apo@debian.org, ebourg@apache.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#845385: Privilege escalation via removal</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 1 Dec 2016 07:32:29 +1100</div>
</div>
<pre class="message">Emmanuel wrote:

&gt;&gt; Might protect against &quot;static&quot; things, but vulnerable to a race.
&gt; I&#39;m not sure to understand, what kind of race could happen here?

Hmm... You suggested some chmod before chown. Your attacker sits tight,
waits for the chmod, then creates the &quot;bad thing&quot; in readiness for your
chown. The chmod takes time to complete, the chown takes time to get up
and start: plenty of time in between for the attacker to act.

&gt;&gt; But really... why do you care about leaving some &quot;dangling&quot; useless
&gt;&gt; object, owned by some long-gone UID or GID?
&gt;
&gt; I don&#39;t know the motivations behind this complexity. I can imagine a
&gt; case where an administrator switches from tomcat8 to tomcat9 and doesn&#39;t
&gt; expect the old package to remove files unknown to him so they can be
&gt; moved to the configuration directory of the new package.
&gt;
&gt; The upgrade scenario could look like this:
&gt;
&gt; 1. Install tomcat8
&gt; 2. Declare a web application in /etc/tomcat8/Catalina/localhost
&gt; 3. Uninstall tomcat8
&gt; 4. Install tomcat9
&gt; 5. Move /etc/tomcat8/Catalina/localhost/* to /etc/tomcat9/Catalina/localhost
&gt;
&gt; If the step 3 also removes the webapp configuration the administrator is
&gt; going to be angry (but arguably less than having his system hacked).

You misunderstood. Do not remove things in &quot;step 3&quot;: leave alone, do not
chown. (Remove the chown from your script.) Leave it being owned by the
tomcat8 UID, not bother that the UID will be &quot;gone&quot; and un-named.

&gt;&gt; Then if the tomcat8 package is removed (purged?), the postrm script runs
&gt;&gt;   chown -Rhf root:root /etc/tomcat8/
&gt;&gt; and that will leave the file world-writable, setgid root
&gt;
&gt; What about switching the files left to nobody:nogroup instead of
&gt; root:root? That would be less disruptive for the stable and oldstable
&gt; updates than removing /etc/tomcat8 completely.

That would be less dangerous, but still wrong; would still be privilege
escalation, though to a less useful entity.

---

Markus wrote:

&gt;&gt;&gt; Then if the tomcat8 package is removed (purged?), the postrm script runs
&gt;&gt;&gt;   chown -Rhf root:root /etc/tomcat8/
&gt;&gt;&gt; and that will leave the file world-writable, setgid root
&gt;&gt;
&gt;&gt; What about switching the files left to nobody:nogroup instead of
&gt;&gt; root:root? That would be less disruptive for the stable and oldstable
&gt;&gt; updates than removing /etc/tomcat8 completely.
&gt;
&gt; I guess just removing /etc/tomcat8/Catalina would be an option too. As
&gt; far as I know nothing else requires it to be present after the removal
&gt; of Tomcat. If there were applications with such a dependency we should
&gt; take a look at them.

Yes you could &quot;forcibly&quot; remove /etc/tomcat8/Catalina. But then, just
remove all of /etc/tomcat8 so there is definitely nothing left to chown.

---

I now notice a typo in your postrm script. It has lines like:

        if [ -d /var/lib/tomcat8/common ] &amp;&amp; [ -z &quot;`(find var/lib/tomcat8/common/classes -type f)`&quot; ] ; then

and are missing a &quot;/&quot; in front of &quot;var&quot;. (Of course the &quot;if&quot; are
superfluous, just do the &quot;rmdir&quot;.)

---

I now notice that the Debian bug contraption does not CC me on messages:
just being the submitter does not add you to the CC list, you need to
explicitly &quot;subscribe&quot;. So I missed a number of intermediate messages.

---

Markus wrote previously:

&gt; ... Besides all tomcat processes are killed on purge.

Where does that happen? I do not think that is true.

Neither are any possible setuid-tomcat8 or setgid-tomcat8 files removed.

---

Cheers, Paul

Paul Szabo   psz@maths.usyd.edu.au   <a href="http://www.maths.usyd.edu.au/u/psz/">http://www.maths.usyd.edu.au/u/psz/</a>
School of Mathematics and Statistics   University of Sydney    Australia


</pre>

<div class="infmessage"><hr><p>
<a name="63"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480579156 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Thu, 01 Dec 2016 07:59:16 GMT) (<a href="bugreport.cgi?bug=845385;msg=64">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=64">mbox</a>, <a href="#63">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="65"></a><a name="msg65"></a><a href="#65">Message #65</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=65">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=65">mbox</a>, <a href="mailto:845385@bugs.debian.org?body=On%20Thu%2C%2001%20Dec%202016%2007%3A57%3A23%20%2B0000%20pkg-java-maintainers%40lists.alioth.debian.org%20wrote%3A%0A%3E%20tag%20845385%20%2B%20pending%0A%3E%20thanks%0A%3E%20%0A%3E%20Some%20bugs%20in%20the%20tomcat8%20package%20are%20closed%20in%20revision%0A%3E%20e8cd8585faebe1ba1312ef6452ced16d6e7998c7%20in%20branch%20%27%20%20experimental%27%0A%3E%20by%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20The%20full%20diff%20can%20be%20seen%20at%0A%3E%20https%3A%2F%2Fanonscm.debian.org%2Fcgit%2Fpkg-java%2Ftomcat8.git%2Fcommit%2F%3Fid%3De8cd858%0A%3E%20%0A%3E%20Commit%20message%3A%0A%3E%20%0A%3E%20%20%20%20%20The%20tomcat8%20user%20is%20no%20longer%20removed%20when%20the%20package%20is%20purged%20%28Closes%3A%20%23845385%29%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3CE1cCMF9-0002rl-M9%40moszumanska.debian.org%3E&amp;In-Reply-To=%3CE1cCMF9-0002rl-M9%40moszumanska.debian.org%3E&amp;subject=Re%3A%20Pending%20fixes%20for%20bugs%20in%20the%20tomcat8%20package">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=pkg-java-maintainers%40lists.alioth.debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> pkg-java-maintainers@lists.alioth.debian.org</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org, 845385-submitter@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Pending fixes for bugs in the tomcat8 package</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 01 Dec 2016 07:57:23 +0000</div>
</div>
<pre class="message">tag 845385 + pending
thanks

Some bugs in the tomcat8 package are closed in revision
e8cd8585faebe1ba1312ef6452ced16d6e7998c7 in branch &#39;  experimental&#39;
by Emmanuel Bourg

The full diff can be seen at
<a href="https://anonscm.debian.org/cgit/pkg-java/tomcat8.git/commit/?id=e8cd858">https://anonscm.debian.org/cgit/pkg-java/tomcat8.git/commit/?id=e8cd858</a>

Commit message:

    The tomcat8 user is no longer removed when the package is purged (Closes: #<a href="bugreport.cgi?bug=845385">845385</a>)



</pre>

<div class="msgreceived"><hr><p>
<a name="66"></a>
<!-- command:tag -->
<!-- requester: pkg-java-maintainers@lists.alioth.debian.org -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1480579157 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;pending security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<strong>Added tag(s) pending.</strong>
Request was from <code>pkg-java-maintainers@lists.alioth.debian.org</code>
to <code>control@bugs.debian.org</code>.
 (Thu, 01 Dec 2016 07:59:17 GMT) (<a href="bugreport.cgi?bug=845385;msg=67">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=67">mbox</a>, <a href="#66">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="68"></a>
<!-- request_addr: Paul Szabo &lt;paul.szabo@sydney.edu.au&gt; -->
<!-- time:1480579172 -->
<strong>Message sent on</strong>
to <code>Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</code>:<br>
Bug#845385.
 (Thu, 01 Dec 2016 07:59:32 GMT) (<a href="bugreport.cgi?bug=845385;msg=69">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=69">mbox</a>, <a href="#68">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="71"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1480616469 -->
<strong>Reply sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
You have taken responsibility.
 (Thu, 01 Dec 2016 18:21:09 GMT) (<a href="bugreport.cgi?bug=845385;msg=72">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=72">mbox</a>, <a href="#71">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="73"></a>
<!-- request_addr: Paul Szabo &lt;paul.szabo@sydney.edu.au&gt; -->
<!-- time:1480616469 -->
<strong>Notification sent</strong>
to <code>Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</code>:<br>
Bug acknowledged by developer.
 (Thu, 01 Dec 2016 18:21:09 GMT) (<a href="bugreport.cgi?bug=845385;msg=74">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=74">mbox</a>, <a href="#73">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="75"></a><a name="msg75"></a><a href="#75">Message #75</a> received at 845385-close@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=75">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=75">mbox</a>, <a href="mailto:845385@bugs.debian.org?body=On%20Thu%2C%2001%20Dec%202016%2018%3A20%3A30%20%2B0000%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Source%3A%20tomcat8%0A%3E%20Source-Version%3A%208.5.8-2%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20tomcat8%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20845385%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20%28supplier%20of%20updated%20tomcat8%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Thu%2C%2001%20Dec%202016%2018%3A41%3A14%20%2B0100%0A%3E%20Source%3A%20tomcat8%0A%3E%20Binary%3A%20tomcat8-common%20tomcat8%20tomcat8-user%20libtomcat8-java%20libtomcat8-embed-java%20libservlet3.1-java%20libservlet3.1-java-doc%20tomcat8-admin%20tomcat8-examples%20tomcat8-docs%0A%3E%20Architecture%3A%20source%20all%0A%3E%20Version%3A%208.5.8-2%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20medium%0A%3E%20Maintainer%3A%20Debian%20Java%20Maintainers%20%3Cpkg-java-maintainers%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%0A%3E%20Description%3A%0A%3E%20%20libservlet3.1-java%20-%20Servlet%203.1%2C%20JSP%202.3%2C%20EL%203.0%20and%20WebSocket%201.0%20Java%20API%20classes%0A%3E%20%20libservlet3.1-java-doc%20-%20Servlet%203.1%2C%20JSP%202.3%2C%20EL%203.0%20and%20WebSocket%201.0%20Java%20API%20documenta%0A%3E%20%20libtomcat8-embed-java%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20embed%20libraries%0A%3E%20%20libtomcat8-java%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20core%20libraries%0A%3E%20%20tomcat8%20%20%20%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%0A%3E%20%20tomcat8-admin%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20admin%20web%20application%0A%3E%20%20tomcat8-common%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20common%20files%0A%3E%20%20tomcat8-docs%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20documentation%0A%3E%20%20tomcat8-examples%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20example%20web%20applicati%0A%3E%20%20tomcat8-user%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20tools%20to%20create%20user%0A%3E%20Closes%3A%20833261%20843135%20845385%20845393%20845661%0A%3E%20Changes%3A%0A%3E%20%20tomcat8%20%288.5.8-2%29%20unstable%3B%20urgency%3Dmedium%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Team%20upload.%0A%3E%20%20%20%20%2A%20Upload%20to%20unstable.%0A%3E%20%20%20%20%2A%20No%20longer%20make%20%2Fetc%2Ftomcat8%2FCatalina%2Flocalhost%20writable%20by%20the%20tomcat8%20user%0A%3E%20%20%20%20%20%20in%20the%20postinst%20script%20%28Closes%3A%20%23845393%29%0A%3E%20%20%20%20%2A%20The%20tomcat8%20user%20is%20no%20longer%20removed%20when%20the%20package%20is%20purged%0A%3E%20%20%20%20%20%20%28Closes%3A%20%23845385%29%0A%3E%20%20%20%20%2A%20Compress%20and%20remove%20the%20access%20log%20files%20with%20a%20.txt%20extension%0A%3E%20%20%20%20%20%20%28Closes%3A%20%23845661%29%0A%3E%20%20%20%20%2A%20Added%20the%20delaycompress%20option%20to%20the%20logrotate%20configuration%0A%3E%20%20%20%20%20%20of%20catalina.out%20%28Closes%3A%20%23843135%29%0A&amp;References=%3CE1cCVyA-0008HM-1d%40fasolo.debian.org%3E&amp;In-Reply-To=%3CE1cCVyA-0008HM-1d%40fasolo.debian.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20fixed%20in%20tomcat8%208.5.8-2">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 845385-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#845385: fixed in tomcat8 8.5.8-2</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 01 Dec 2016 18:20:30 +0000</div>
</div>
<pre class="message">Source: tomcat8
Source-Version: 8.5.8-2

We believe that the bug you reported is fixed in the latest version of
tomcat8, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 845385@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Emmanuel Bourg &lt;ebourg@apache.org&gt; (supplier of updated tomcat8 package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Thu, 01 Dec 2016 18:41:14 +0100
Source: tomcat8
Binary: tomcat8-common tomcat8 tomcat8-user libtomcat8-java libtomcat8-embed-java libservlet3.1-java libservlet3.1-java-doc tomcat8-admin tomcat8-examples tomcat8-docs
Architecture: source all
Version: 8.5.8-2
Distribution: unstable
Urgency: medium
Maintainer: Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;
Changed-By: Emmanuel Bourg &lt;ebourg@apache.org&gt;
Description:
 libservlet3.1-java - Servlet 3.1, JSP 2.3, EL 3.0 and WebSocket 1.0 Java API classes
 libservlet3.1-java-doc - Servlet 3.1, JSP 2.3, EL 3.0 and WebSocket 1.0 Java API documenta
 libtomcat8-embed-java - Apache Tomcat 8 - Servlet and JSP engine -- embed libraries
 libtomcat8-java - Apache Tomcat 8 - Servlet and JSP engine -- core libraries
 tomcat8    - Apache Tomcat 8 - Servlet and JSP engine
 tomcat8-admin - Apache Tomcat 8 - Servlet and JSP engine -- admin web application
 tomcat8-common - Apache Tomcat 8 - Servlet and JSP engine -- common files
 tomcat8-docs - Apache Tomcat 8 - Servlet and JSP engine -- documentation
 tomcat8-examples - Apache Tomcat 8 - Servlet and JSP engine -- example web applicati
 tomcat8-user - Apache Tomcat 8 - Servlet and JSP engine -- tools to create user
Closes: <a href="bugreport.cgi?bug=833261">833261</a> <a href="bugreport.cgi?bug=843135">843135</a> <a href="bugreport.cgi?bug=845385">845385</a> <a href="bugreport.cgi?bug=845393">845393</a> <a href="bugreport.cgi?bug=845661">845661</a>
Changes:
 tomcat8 (8.5.8-2) unstable; urgency=medium
 .
   * Team upload.
   * Upload to unstable.
   * No longer make /etc/tomcat8/Catalina/localhost writable by the tomcat8 user
     in the postinst script (Closes: #<a href="bugreport.cgi?bug=845393">845393</a>)
   * The tomcat8 user is no longer removed when the package is purged
     (Closes: #<a href="bugreport.cgi?bug=845385">845385</a>)
   * Compress and remove the access log files with a .txt extension
     (Closes: #<a href="bugreport.cgi?bug=845661">845661</a>)
   * Added the delaycompress option to the logrotate configuration
     of catalina.out (Closes: #<a href="bugreport.cgi?bug=843135">843135</a>)
   * Changed the home directory for the tomcat8 user from /usr/share/tomcat8
     to /var/lib/tomcat8 (Closes: #<a href="bugreport.cgi?bug=833261">833261</a>)
   * Aligned the logging configuration with the upstream one
   * Set the proper permissions for /etc/tomcat8/jaspic-providers.xml
   * Install the new library jaspic-api.jar
   * Install the Maven artifacts for tomcat-storeconfig
   * Simplified debian/rules
Checksums-Sha1:
 ba39e853718cc71f25f039caec4849756efc50dd 2930 tomcat8_8.5.8-2.dsc
 d622980772d71749d69006f4fefd28132397ae73 40980 tomcat8_8.5.8-2.debian.tar.xz
 8776a1921fd655bacd4194740400bea7fdc45c28 240680 libservlet3.1-java-doc_8.5.8-2_all.deb
 bf22e6a60afea4410b29052b238ad56d341a8e0c 391618 libservlet3.1-java_8.5.8-2_all.deb
 eb3a667eced8f3a8a8d2261f8bc04c509a318bc9 3831334 libtomcat8-embed-java_8.5.8-2_all.deb
 591d25c063c10ba6e64a97a1c7772b44bb368fa7 4773086 libtomcat8-java_8.5.8-2_all.deb
 d3d1605723a80d180bb853f0404cbe3dcb1f4fd6 35414 tomcat8-admin_8.5.8-2_all.deb
 5f1748f4f875725454a7db3feec32e09c1b915e5 60942 tomcat8-common_8.5.8-2_all.deb
 797da9f9b03ad998519ae81a69ddfaefb5906c67 714994 tomcat8-docs_8.5.8-2_all.deb
 b43c8ecf7ff5b45a4afb19af0284ed1625bcc662 187274 tomcat8-examples_8.5.8-2_all.deb
 e89a7be273859cea3473ac6bf4eb2f6c494e81fb 37524 tomcat8-user_8.5.8-2_all.deb
 cb6d5e3711bda1f1370c1b8a2291867a91bfed25 49712 tomcat8_8.5.8-2_all.deb
 f3679354e62e7249ba488d419f1c1c40c809dd9e 12383 tomcat8_8.5.8-2_amd64.buildinfo
Checksums-Sha256:
 4516dbf9034a416786e00c4aa6f9a712bb2a7e065b0ffd401c5e6c8015fcc4b2 2930 tomcat8_8.5.8-2.dsc
 a0c8545e9d0d608a0d12c8c4d37da7204875a20b2ef078c199fe53dbe603b983 40980 tomcat8_8.5.8-2.debian.tar.xz
 3d6dc54667b58b88a1f8302872dd93e0ffd5eea74534bcacb131ee846a8b78b2 240680 libservlet3.1-java-doc_8.5.8-2_all.deb
 f72a160fe805cae9d783a0edf3989553122938c39b8528d538905bcfa719f3b6 391618 libservlet3.1-java_8.5.8-2_all.deb
 e560b3abcc74b3322d0132bb69425157b8687a02e27efc9e92c0905e1d4aca40 3831334 libtomcat8-embed-java_8.5.8-2_all.deb
 0e81f00cc5e902ec600928bf63634f873d39fd0b7c2fbea8ab0e1d935bbe217e 4773086 libtomcat8-java_8.5.8-2_all.deb
 d6ff595c2a2032762f8cea739ee06a14b429a8a8ebff8ee012950a58889f93a5 35414 tomcat8-admin_8.5.8-2_all.deb
 18735f210595a5b3220883b4860d6fa832fd6aebb742ff3d8c20d7435f267229 60942 tomcat8-common_8.5.8-2_all.deb
 579bd560339d7ba7f5a78c73e1e47cd813a373d05d5e9578c4f41e39d38145be 714994 tomcat8-docs_8.5.8-2_all.deb
 74b037d0817f2e14d20ca64c97c474bb1633de787d8be89c2f47316fcb0f2067 187274 tomcat8-examples_8.5.8-2_all.deb
 895e34e12f49d6bc204e9b5af0a894d58434554647519cc4be8f9c04326067a2 37524 tomcat8-user_8.5.8-2_all.deb
 8098d6df3c3179f98be93ecbbe6f447f89b889b3fa98fbe5030bd4fe89af054a 49712 tomcat8_8.5.8-2_all.deb
 e907d926af2687ac6a883124aa759a2ff75de063f0a772404ac1b6dfe6ced67c 12383 tomcat8_8.5.8-2_amd64.buildinfo
Files:
 4dd761d1267de9bed906d6b9029f88f0 2930 java optional tomcat8_8.5.8-2.dsc
 d408cb39066cd2df0bd9def6b34ce937 40980 java optional tomcat8_8.5.8-2.debian.tar.xz
 fee006037870888a998d8b8316e458c6 240680 doc optional libservlet3.1-java-doc_8.5.8-2_all.deb
 645e5d60470e45e7b791b5935f8bb9b7 391618 java optional libservlet3.1-java_8.5.8-2_all.deb
 fb139ce768e4092900a3630313f27134 3831334 java optional libtomcat8-embed-java_8.5.8-2_all.deb
 b064fe7990fc79ac25ac6d84f4d64aea 4773086 java optional libtomcat8-java_8.5.8-2_all.deb
 6465f43fae9b3aee94b59446fe466027 35414 java optional tomcat8-admin_8.5.8-2_all.deb
 3e282c0f91fc403c6486991742c0510c 60942 java optional tomcat8-common_8.5.8-2_all.deb
 86c28dd1f8e7c05fca6ce4aae3e792c6 714994 doc optional tomcat8-docs_8.5.8-2_all.deb
 846dc7b74e1aeeaf11806da65dfb658b 187274 java optional tomcat8-examples_8.5.8-2_all.deb
 92721323ea40fba9c86bece597b649f5 37524 java optional tomcat8-user_8.5.8-2_all.deb
 9d603d0185b9cd8f3490bb669944eb8e 49712 java optional tomcat8_8.5.8-2_all.deb
 51e7bf0de8daa8291e5fc39e77b644d8 12383 java optional tomcat8_8.5.8-2_amd64.buildinfo

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEuM5N4hCA3PkD4WxA9RPEGeS50KwFAlhAYUQACgkQ9RPEGeS5
0KyLxQ/8C6yhVXyy0BMb2Iu2Vl6mS47FCgCDs+6GJ5ZLWQtgxwq1IZ2enECqBVSd
zuzlk1rwFJRtd7oskDcQYS/ptIjsbp98Tu1Blw65aF2afzfJwF28/cfL1j4rghp0
U+GYWuZbMK3v6mK8W7J08iKg26e31ox9IF9RxFqVNWXtHBg9igfwOtJrGtITttkc
Rbh/DBFXDQ9WJnBUgl1FyHQp5gPVIyEL63noga857aTKfljkOkM4CT/59mR5sxbM
C/JAR87AJ0fU9xPwTGa+Po8yeJkmgJX6sy6XYfvQ5H9s7SV9zBqhu/JXPYhDSP/X
5mN6rocfGbwn8f3Kn1dF3fDTu3uEhQd/bkNe28/xsIM2peppWHfnjKRS2Ip94MwT
9q5v+uKoUK0eDcdkR7hkcVaAQjrOWC7yK6W08eErUx8j4+Zy5hyDs+UFYi6EoqYQ
9ES//VCC9tm7kmp0u2kqU8mIGyGG2Len2TvgMTG2EEf+xmvPo4D5yTU73cbl8r9w
hB1/R0p9hIYdHZagbKAxQrKVt7toSvuXSUaJRTX1ySCSQsWLE35hPigcd96Wj7c/
Px37s74481pyBq7BNAbDUF2ZkCGLB6Zb1gHjksdsCYmmSpZqpL5RwfRYFIQKeJUX
ujUt4lqNOIheYkiqoORjEzqGIX7yTvfqUCdLgdbRHAmL82HKXYs=
=3l4e
-----END PGP SIGNATURE-----



</pre>

<div class="infmessage"><hr><p>
<a name="76"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt; -->
<!-- time:1480671363 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#845385</code>; Package <code>tomcat8</code>.
 (Fri, 02 Dec 2016 09:36:03 GMT) (<a href="bugreport.cgi?bug=845385;msg=77">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=77">mbox</a>, <a href="#76">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="78"></a><a name="msg78"></a><a href="#78">Message #78</a> received at 845385@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=78">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=78">mbox</a>, <a href="mailto:845385@bugs.debian.org?subject=Re%3A%20Pending%20fixes%20for%20bugs%20in%20the%20tomcat8%20package&amp;In-Reply-To=%3CE1cCkDq-0006ob-FS%40moszumanska.debian.org%3E&amp;References=%3CE1cCkDq-0006ob-FS%40moszumanska.debian.org%3E&amp;body=On%20Fri%2C%2002%20Dec%202016%2009%3A33%3A38%20%2B0000%20pkg-java-maintainers%40lists.alioth.debian.org%20wrote%3A%0A%3E%20tag%20845385%20%2B%20pending%0A%3E%20thanks%0A%3E%20%0A%3E%20Some%20bugs%20in%20the%20tomcat8%20package%20are%20closed%20in%20revision%0A%3E%204f321e73a19688d2605bf284b448c22ae02ddee0%20in%20branch%20%27%20%20jessie%27%20by%0A%3E%20Emmanuel%20Bourg%0A%3E%20%0A%3E%20The%20full%20diff%20can%20be%20seen%20at%0A%3E%20https%3A%2F%2Fanonscm.debian.org%2Fcgit%2Fpkg-java%2Ftomcat8.git%2Fcommit%2F%3Fid%3D4f321e7%0A%3E%20%0A%3E%20Commit%20message%3A%0A%3E%20%0A%3E%20%20%20%20%20Fixed%20a%20privilege%20escalation%20when%20the%20package%20is%20purged%20%28Closes%3A%20%23845385%29%0A%3E%20%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=pkg-java-maintainers%40lists.alioth.debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> pkg-java-maintainers@lists.alioth.debian.org</div>
<div class="header"><span class="headerfield">To:</span> 845385@bugs.debian.org, 845385-submitter@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Pending fixes for bugs in the tomcat8 package</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 02 Dec 2016 09:33:38 +0000</div>
</div>
<pre class="message">tag 845385 + pending
thanks

Some bugs in the tomcat8 package are closed in revision
4f321e73a19688d2605bf284b448c22ae02ddee0 in branch &#39;  jessie&#39; by
Emmanuel Bourg

The full diff can be seen at
<a href="https://anonscm.debian.org/cgit/pkg-java/tomcat8.git/commit/?id=4f321e7">https://anonscm.debian.org/cgit/pkg-java/tomcat8.git/commit/?id=4f321e7</a>

Commit message:

    Fixed a privilege escalation when the package is purged (Closes: #<a href="bugreport.cgi?bug=845385">845385</a>)



</pre>

<div class="msgreceived"><hr><p>
<a name="79"></a>
<!-- command:tag -->
<!-- requester: pkg-java-maintainers@lists.alioth.debian.org -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1480671364 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;pending security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<strong>Added tag(s) pending.</strong>
Request was from <code>pkg-java-maintainers@lists.alioth.debian.org</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 02 Dec 2016 09:36:04 GMT) (<a href="bugreport.cgi?bug=845385;msg=80">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=80">mbox</a>, <a href="#79">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="81"></a>
<!-- request_addr: Paul Szabo &lt;paul.szabo@sydney.edu.au&gt; -->
<!-- time:1480671368 -->
<strong>Message sent on</strong>
to <code>Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</code>:<br>
Bug#845385.
 (Fri, 02 Dec 2016 09:36:08 GMT) (<a href="bugreport.cgi?bug=845385;msg=82">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=82">mbox</a>, <a href="#81">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="84"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1480702691 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;CVE-2016-9775: privilege escalation via removal&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;Privilege escalation via removal&#39;
            };
-->
<strong>Changed Bug title to &#39;CVE-2016-9775: privilege escalation via removal&#39; from &#39;Privilege escalation via removal&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 02 Dec 2016 18:18:11 GMT) (<a href="bugreport.cgi?bug=845385;msg=85">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=85">mbox</a>, <a href="#84">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="86"></a>
<!-- request_addr: Emmanuel Bourg &lt;ebourg@apache.org&gt; -->
<!-- time:1482517991 -->
<strong>Reply sent</strong>
to <code>Emmanuel Bourg &lt;ebourg@apache.org&gt;</code>:<br>
You have taken responsibility.
 (Fri, 23 Dec 2016 18:33:11 GMT) (<a href="bugreport.cgi?bug=845385;msg=87">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=87">mbox</a>, <a href="#86">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="88"></a>
<!-- request_addr: Paul Szabo &lt;paul.szabo@sydney.edu.au&gt; -->
<!-- time:1482517991 -->
<strong>Notification sent</strong>
to <code>Paul Szabo &lt;paul.szabo@sydney.edu.au&gt;</code>:<br>
Bug acknowledged by developer.
 (Fri, 23 Dec 2016 18:33:11 GMT) (<a href="bugreport.cgi?bug=845385;msg=89">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=89">mbox</a>, <a href="#88">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="90"></a><a name="msg90"></a><a href="#90">Message #90</a> received at 845385-close@bugs.debian.org (<a href="bugreport.cgi?bug=845385;msg=90">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=90">mbox</a>, <a href="mailto:845385@bugs.debian.org?In-Reply-To=%3CE1cKUdv-0007VA-Dk%40fasolo.debian.org%3E&amp;subject=Re%3A%20Bug%23845385%3A%20fixed%20in%20tomcat8%208.0.14-1%2Bdeb8u5&amp;body=On%20Fri%2C%2023%20Dec%202016%2018%3A32%3A35%20%2B0000%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20wrote%3A%0A%3E%20Source%3A%20tomcat8%0A%3E%20Source-Version%3A%208.0.14-1%2Bdeb8u5%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20tomcat8%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20845385%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%20%28supplier%20of%20updated%20tomcat8%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA1%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Sat%2C%2017%20Dec%202016%2009%3A19%3A36%20%2B0100%0A%3E%20Source%3A%20tomcat8%0A%3E%20Binary%3A%20tomcat8-common%20tomcat8%20tomcat8-user%20libtomcat8-java%20libservlet3.1-java%20libservlet3.1-java-doc%20tomcat8-admin%20tomcat8-examples%20tomcat8-docs%0A%3E%20Architecture%3A%20source%20all%0A%3E%20Version%3A%208.0.14-1%2Bdeb8u5%0A%3E%20Distribution%3A%20jessie-security%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Debian%20Java%20Maintainers%20%3Cpkg-java-maintainers%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Emmanuel%20Bourg%20%3Cebourg%40apache.org%3E%0A%3E%20Description%3A%0A%3E%20%20libservlet3.1-java%20-%20Servlet%203.1%2C%20JSP%202.3%2C%20EL%203.0%20and%20WebSocket%201.0%20Java%20API%20classes%0A%3E%20%20libservlet3.1-java-doc%20-%20Servlet%203.1%2C%20JSP%202.3%2C%20EL%203.0%20and%20WebSocket%201.0%20Java%20API%20documenta%0A%3E%20%20libtomcat8-java%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20core%20libraries%0A%3E%20%20tomcat8%20%20%20%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%0A%3E%20%20tomcat8-admin%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20admin%20web%20application%0A%3E%20%20tomcat8-common%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20common%20files%0A%3E%20%20tomcat8-docs%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20documentation%0A%3E%20%20tomcat8-examples%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20example%20web%20applicati%0A%3E%20%20tomcat8-user%20-%20Apache%20Tomcat%208%20-%20Servlet%20and%20JSP%20engine%20--%20tools%20to%20create%20user%0A%3E%20Closes%3A%20845385%20845393%0A%3E%20Changes%3A%0A%3E%20%20tomcat8%20%288.0.14-1%2Bdeb8u5%29%20jessie-security%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Fixed%20CVE-2016-9774%3A%20Potential%20privilege%20escalation%20when%20the%20tomcat8%0A%3E%20%20%20%20%20%20package%20is%20upgraded.%20Thanks%20to%20Paul%20Szabo%20for%20the%20report%20%28Closes%3A%20%23845393%29%0A%3E%20%20%20%20%2A%20Fixed%20CVE-2016-9775%3A%20Potential%20privilege%20escalation%20when%20the%20tomcat8%0A%3E%20%20%20%20%20%20package%20is%20purged.%20Thanks%20to%20Paul%20Szabo%20for%20the%20report%20%28Closes%3A%20%23845385%29%0A%3E%20%20%20%20%2A%20Fixed%20CVE-2016-6816%3A%20The%20code%20that%20parsed%20the%20HTTP%20request%20line%20permitted%0A%3E%20%20%20%20%20%20invalid%20characters.%20This%20could%20be%20exploited%2C%20in%20conjunction%20with%20a%20proxy%0A%3E%20%20%20%20%20%20that%20also%20permitted%20the%20invalid%20characters%20but%20with%20a%20different%0A%3E%20%20%20%20%20%20interpretation%2C%20to%20inject%20data%20into%20the%20HTTP%20response.%20By%20manipulating%20the%0A%3E%20%20%20%20%20%20HTTP%20response%20the%20attacker%20could%20poison%20a%20web-cache%2C%20perform%20an%20XSS%20attack%0A%3E%20%20%20%20%20%20and%2For%20obtain%20sensitive%20information%20from%20requests%20other%20then%20their%20own.%0A%3E%20%20%20%20%2A%20Fixed%20CVE-2016-8735%3A%20The%20JmxRemoteLifecycleListener%20was%20not%20updated%20to%20take%0A&amp;References=%3CE1cKUdv-0007VA-Dk%40fasolo.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ebourg%40apache.org" alt="">
<div class="header"><span class="headerfield">From:</span> Emmanuel Bourg &lt;ebourg@apache.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 845385-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#845385: fixed in tomcat8 8.0.14-1+deb8u5</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 23 Dec 2016 18:32:35 +0000</div>
</div>
<pre class="message">Source: tomcat8
Source-Version: 8.0.14-1+deb8u5

We believe that the bug you reported is fixed in the latest version of
tomcat8, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 845385@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Emmanuel Bourg &lt;ebourg@apache.org&gt; (supplier of updated tomcat8 package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Sat, 17 Dec 2016 09:19:36 +0100
Source: tomcat8
Binary: tomcat8-common tomcat8 tomcat8-user libtomcat8-java libservlet3.1-java libservlet3.1-java-doc tomcat8-admin tomcat8-examples tomcat8-docs
Architecture: source all
Version: 8.0.14-1+deb8u5
Distribution: jessie-security
Urgency: high
Maintainer: Debian Java Maintainers &lt;pkg-java-maintainers@lists.alioth.debian.org&gt;
Changed-By: Emmanuel Bourg &lt;ebourg@apache.org&gt;
Description:
 libservlet3.1-java - Servlet 3.1, JSP 2.3, EL 3.0 and WebSocket 1.0 Java API classes
 libservlet3.1-java-doc - Servlet 3.1, JSP 2.3, EL 3.0 and WebSocket 1.0 Java API documenta
 libtomcat8-java - Apache Tomcat 8 - Servlet and JSP engine -- core libraries
 tomcat8    - Apache Tomcat 8 - Servlet and JSP engine
 tomcat8-admin - Apache Tomcat 8 - Servlet and JSP engine -- admin web application
 tomcat8-common - Apache Tomcat 8 - Servlet and JSP engine -- common files
 tomcat8-docs - Apache Tomcat 8 - Servlet and JSP engine -- documentation
 tomcat8-examples - Apache Tomcat 8 - Servlet and JSP engine -- example web applicati
 tomcat8-user - Apache Tomcat 8 - Servlet and JSP engine -- tools to create user
Closes: <a href="bugreport.cgi?bug=845385">845385</a> <a href="bugreport.cgi?bug=845393">845393</a>
Changes:
 tomcat8 (8.0.14-1+deb8u5) jessie-security; urgency=high
 .
   * Fixed <a href="https://security-tracker.debian.org/tracker/CVE-2016-9774">CVE-2016-9774</a>: Potential privilege escalation when the tomcat8
     package is upgraded. Thanks to Paul Szabo for the report (Closes: #<a href="bugreport.cgi?bug=845393">845393</a>)
   * Fixed <a href="https://security-tracker.debian.org/tracker/CVE-2016-9775">CVE-2016-9775</a>: Potential privilege escalation when the tomcat8
     package is purged. Thanks to Paul Szabo for the report (Closes: #<a href="bugreport.cgi?bug=845385">845385</a>)
   * Fixed <a href="https://security-tracker.debian.org/tracker/CVE-2016-6816">CVE-2016-6816</a>: The code that parsed the HTTP request line permitted
     invalid characters. This could be exploited, in conjunction with a proxy
     that also permitted the invalid characters but with a different
     interpretation, to inject data into the HTTP response. By manipulating the
     HTTP response the attacker could poison a web-cache, perform an XSS attack
     and/or obtain sensitive information from requests other then their own.
   * Fixed <a href="https://security-tracker.debian.org/tracker/CVE-2016-8735">CVE-2016-8735</a>: The JmxRemoteLifecycleListener was not updated to take
     account of Oracle&#39;s fix for <a href="https://security-tracker.debian.org/tracker/CVE-2016-3427">CVE-2016-3427</a>. Therefore, Tomcat installations
     using this listener remained vulnerable to a similar remote code execution
     vulnerability. This issue has been rated as important rather than critical
     due to the small number of installations using this listener and that it
     would be highly unusual for the JMX ports to be accessible to an attacker
     even when the listener is used.
   * Backported the fix for upstream bug 57377: Remove the restriction that
     prevented the use of SSL when specifying a bind address for the JMX/RMI
     server. Enable SSL to be configured for the registry as well as the server.
   * <a href="https://security-tracker.debian.org/tracker/CVE-2016-5018">CVE-2016-5018</a> follow-up: Applied a missing modification fixing
     a ClassNotFoundException when the security manager is enabled (see #846298)
   * <a href="https://security-tracker.debian.org/tracker/CVE-2016-6797">CVE-2016-6797</a> follow-up: Fixed a regression preventing some applications
     from accessing the global resources (see #845425)
   * <a href="https://security-tracker.debian.org/tracker/CVE-2015-5345">CVE-2015-5345</a> follow-up: Applied a missing modification to DefaultServlet
   * Backported a fix for a test failure in Test*NonLoginAndBasicAuthenticator
     with recent JREs
   * Backported a fix disabling the broken SSLv3 tests
   * Refreshed the expired SSL certificates used by the tests
   * Set the locale when running the tests to prevent locale sensitive tests
     from failing
   * Added asm-all.jar to the test classpath to fix TestWebappServiceLoader
   * Fixed a test failure in the new TestNamingContext test added with the fix
     for <a href="https://security-tracker.debian.org/tracker/CVE-2016-6797">CVE-2016-6797</a>
   * Test failures are no longer ignored and now stop the build
Checksums-Sha1:
 863b3c4d475bde4e869f4ebaebf67118dae4b9f9 2842 tomcat8_8.0.14-1+deb8u5.dsc
 9ad63d0fddca86cfd97e8fca65563247e80a718b 70888 tomcat8_8.0.14-1+deb8u5.debian.tar.xz
 c983ffb5480273647fbc13c0dfcd845fd4cdaf38 57498 tomcat8-common_8.0.14-1+deb8u5_all.deb
 c758773f15b912d448024e4495125af61bb093a8 47000 tomcat8_8.0.14-1+deb8u5_all.deb
 b2c8c6de94ce645dcbafcfd4ea597293f063a78f 34530 tomcat8-user_8.0.14-1+deb8u5_all.deb
 feef6365326e829ebf29af02e6c9395a7294f824 4587212 libtomcat8-java_8.0.14-1+deb8u5_all.deb
 aaa54d72e7ecf58eb9c7e342771cfded676b1650 391938 libservlet3.1-java_8.0.14-1+deb8u5_all.deb
 0e664137717a28a462964aef6effb4ccf88b0f74 247386 libservlet3.1-java-doc_8.0.14-1+deb8u5_all.deb
 2e4b17b7870ded1623f89ee22bf61d7bcc835c5e 35942 tomcat8-admin_8.0.14-1+deb8u5_all.deb
 c7c874c57df41fdf45c8932136bfd86777716960 194150 tomcat8-examples_8.0.14-1+deb8u5_all.deb
 cc2e6a53b27dda1e2ad95d0a7abe92fc7eaed4d2 688960 tomcat8-docs_8.0.14-1+deb8u5_all.deb
Checksums-Sha256:
 03a05dc2b15e3241270a7e99c7f5a6afde2fc875dcda8461727970cf5f1b88c8 2842 tomcat8_8.0.14-1+deb8u5.dsc
 2c56c1343672f97fd42b1b38b82716f92fd7a7d3f1006782de3b014973daa30d 70888 tomcat8_8.0.14-1+deb8u5.debian.tar.xz
 e83161efde88bb3f0fd8c146439df5c99be73f61280ed631095f13c98403d498 57498 tomcat8-common_8.0.14-1+deb8u5_all.deb
 dcd7534cf403f239ee8c570795d8d139bb4aaa7556c17a4859cd44fc365f4be6 47000 tomcat8_8.0.14-1+deb8u5_all.deb
 77d611b6c3cc4623f2909fdd04a9ee956d234f5b79ea18fde2135e2e0e696ab4 34530 tomcat8-user_8.0.14-1+deb8u5_all.deb
 e0883845d2e042768363e1425ede323fdc60cbdd95c1d4bcf3323f7422466672 4587212 libtomcat8-java_8.0.14-1+deb8u5_all.deb
 d8c41a1aaecf1e0bab2b28158070e0d2750cf2f0434e917c23b63c7a5a1d5879 391938 libservlet3.1-java_8.0.14-1+deb8u5_all.deb
 f04d84a02294cdc9a6afa8c9dd6007b040bf26ab5b7dd248855bcb9bbc316479 247386 libservlet3.1-java-doc_8.0.14-1+deb8u5_all.deb
 6c4cc9f3793df8702a17b62b55abd7e11e482928f755f00ac00b50b3411b1141 35942 tomcat8-admin_8.0.14-1+deb8u5_all.deb
 9979fdb3802afad02db5a5645a269640e086eb07ecfa200c2b375bfbeadd4595 194150 tomcat8-examples_8.0.14-1+deb8u5_all.deb
 4b85438c34275b10b62757ee5cbe618dce772551d75948a1243265a8bc48a7c7 688960 tomcat8-docs_8.0.14-1+deb8u5_all.deb
Files:
 25c13a968a8dc7daa066d594f05b0dcb 2842 java optional tomcat8_8.0.14-1+deb8u5.dsc
 95e06df78dc1c9398884e55044a237ef 70888 java optional tomcat8_8.0.14-1+deb8u5.debian.tar.xz
 1abdee40b2cde01e1e65cebff7ef7ee6 57498 java optional tomcat8-common_8.0.14-1+deb8u5_all.deb
 2bae4143a2997470561ed1709586a26b 47000 java optional tomcat8_8.0.14-1+deb8u5_all.deb
 f626fcac4e1903ed3eda43968f4fc22f 34530 java optional tomcat8-user_8.0.14-1+deb8u5_all.deb
 8d9fe2adfa73a4dcb4d8c80e0143d5ac 4587212 java optional libtomcat8-java_8.0.14-1+deb8u5_all.deb
 8a457e5d67dc7609f7966af22d56ebea 391938 java optional libservlet3.1-java_8.0.14-1+deb8u5_all.deb
 4192b6c66a1081ce709c37b33a5e6e9d 247386 doc optional libservlet3.1-java-doc_8.0.14-1+deb8u5_all.deb
 9a72fe5cc3bc07a0286004313845381f 35942 java optional tomcat8-admin_8.0.14-1+deb8u5_all.deb
 5e4adc0169686723ffcffc538458120d 194150 java optional tomcat8-examples_8.0.14-1+deb8u5_all.deb
 30156d2df7f5b012bc9858114d16d394 688960 doc optional tomcat8-docs_8.0.14-1+deb8u5_all.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBAgAGBQJYVUMMAAoJEPUTxBnkudCsKvkP/RNqmuIFBgz0PWVleUf1QVXm
7/LJO3Xoc+WAsWjeynEMcZV13+TqeDoPrc6CahstCG7dv5odZffpbelbDNSInxQ+
ka1okoxoUsQCC29109Rh6pLy1j2lX6BovlRzTYgJ7H/a3VcsD+UeJH3TFTqncgG1
GrSmrqi8cTf2Nr3YqEqhpEwGB0EkkHTEXp03GEH8DIKj84oC72ERa5vkkgFNATzp
2YFnzEQLIDCQkcY/gJgEL3k9jNZVI94QOzGmaXiAfhChTRAL39k7NCVgKguNpIdJ
wX1h6nK0UlGfbfUvkQJO93zMVujbzrnFf1htM8uqdfskVcGxlogi0yRKi8ZHBa1t
R7izOWOUTCxem/anWY1Zkt8p9hyXnFr3jalnHmPGRgIfXnM3inPu2FvuOh0bLAMv
pkl1lWVFCYI2ea8X+tl1Mao1JJOJULijGot6QiWYDv1qadqxKkBSByt62vF3PBAn
/udHpYmF+obFe1mAAzunQyhtafeUZyJNIWKthHPszL5pb2D2K7ZB3gtLfAEKG1vk
gMyHsOTXhn51WrfEjcHer12SkUTbmZBNcCE9jjO8/62XPC2dATzMFRQEozjQ5Szr
4ggqqKMHPqDWx3PkjjEESxAjMlT1l+C2+GNvOrKhmIIsRL2vl9brka7ZLEdQ8TZY
U32bDL1Spp1aHg9RzmfP
=C3ZY
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="91"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1485589335 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Sat, 28 Jan 2017 07:42:15 GMT) (<a href="bugreport.cgi?bug=845385;msg=92">full text</a>, <a href="bugreport.cgi?bug=845385;mbox=yes;msg=92">mbox</a>, <a href="#91">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=845385">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:32:57 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
