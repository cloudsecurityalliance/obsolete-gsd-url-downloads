<!DOCTYPE html>
<html lang='en'>
<head>
<title>drm/drm-misc - Kernel DRM miscellaneous fixes and cross-tree changes</title>
<meta name='generator' content='cgit v1.2.1'/>
<meta name='robots' content='index, nofollow'/>
<link rel='stylesheet' type='text/css' href='https://cgit.freedesktop.org/cgit.css'/>
<link rel='shortcut icon' href='/favicon.ico'/>
<link rel='alternate' title='Atom feed' href='https://cgit.freedesktop.org/drm/drm-misc/atom/?h=drm-misc-next' type='application/atom+xml'/>
<link rel='vcs-git' href='git://anongit.freedesktop.org/drm/drm-misc' title='drm/drm-misc Git repository'/>
<link rel='vcs-git' href='ssh://git.freedesktop.org/git/drm/drm-misc' title='drm/drm-misc Git repository'/>
<link rel='vcs-git' href='https://anongit.freedesktop.org/git/drm/drm-misc.git' title='drm/drm-misc Git repository'/>
</head>
<body>
<div id='cgit'><table id='header'>
<tr>
<td class='logo' rowspan='2'><a href='/'><img src='https://cgit.freedesktop.org/logo.png' alt='cgit logo'/></a></td>
<td class='main'><a href='/'>index</a> : <a title='drm/drm-misc' href='/drm/drm-misc/'>drm/drm-misc</a></td><td class='form'><form method='get'>
<input type='hidden' name='id' value='9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'/><select name='h' onchange='this.form.submit();'>
<option value='drm-misc-fixes'>drm-misc-fixes</option>
<option value='drm-misc-next' selected='selected'>drm-misc-next</option>
<option value='drm-misc-next-fixes'>drm-misc-next-fixes</option>
<option value='for-linux-next'>for-linux-next</option>
<option value='for-linux-next-fixes'>for-linux-next-fixes</option>
<option value='topic/amdgpu-dp2.0-mst'>topic/amdgpu-dp2.0-mst</option>
<option value='topic/i915-ttm'>topic/i915-ttm</option>
</select> <input type='submit' value='switch'/></form></td></tr>
<tr><td class='sub'>Kernel DRM miscellaneous fixes and cross-tree changes</td><td class='sub right'>root</td></tr></table>
<table class='tabs'><tr><td>
<a href='/drm/drm-misc/'>summary</a><a href='/drm/drm-misc/refs/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>refs</a><a href='/drm/drm-misc/log/'>log</a><a href='/drm/drm-misc/tree/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>tree</a><a class='active' href='/drm/drm-misc/commit/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>commit</a><a href='/drm/drm-misc/diff/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>diff</a></td><td class='form'><form class='right' method='get' action='/drm/drm-misc/log/'>
<input type='hidden' name='id' value='9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'/><select name='qt'>
<option value='grep'>log msg</option>
<option value='author'>author</option>
<option value='committer'>committer</option>
<option value='range'>range</option>
</select>
<input class='txt' type='search' size='10' name='q' value=''/>
<input type='submit' value='search'/>
</form>
</td></tr></table>
<div class='content'><div class='cgit-panel'><b>diff options</b><form method='get'><input type='hidden' name='id' value='9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'/><table><tr><td colspan='2'/></tr><tr><td class='label'>context:</td><td class='ctrl'><select name='context' onchange='this.form.submit();'><option value='1'>1</option><option value='2'>2</option><option value='3' selected='selected'>3</option><option value='4'>4</option><option value='5'>5</option><option value='6'>6</option><option value='7'>7</option><option value='8'>8</option><option value='9'>9</option><option value='10'>10</option><option value='15'>15</option><option value='20'>20</option><option value='25'>25</option><option value='30'>30</option><option value='35'>35</option><option value='40'>40</option></select></td></tr><tr><td class='label'>space:</td><td class='ctrl'><select name='ignorews' onchange='this.form.submit();'><option value='0' selected='selected'>include</option><option value='1'>ignore</option></select></td></tr><tr><td class='label'>mode:</td><td class='ctrl'><select name='dt' onchange='this.form.submit();'><option value='0' selected='selected'>unified</option><option value='1'>ssdiff</option><option value='2'>stat only</option></select></td></tr><tr><td/><td class='ctrl'><noscript><input type='submit' value='reload'/></noscript></td></tr></table></form></div><table summary='commit info' class='commit-info'>
<tr><th>author</th><td>Gen Zhang &lt;blackgod016574@gmail.com&gt;</td><td class='right'>2019-05-24 10:32:22 +0800</td></tr>
<tr><th>committer</th><td>Jani Nikula &lt;jani.nikula@intel.com&gt;</td><td class='right'>2019-05-24 21:01:33 +0300</td></tr>
<tr><th>commit</th><td colspan='2' class='sha1'><a href='/drm/drm-misc/commit/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f</a> (<a href='/drm/drm-misc/patch/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>patch</a>)</td></tr>
<tr><th>tree</th><td colspan='2' class='sha1'><a href='/drm/drm-misc/tree/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>d33e926240b2a662613446b16bed56ad10d5f68e</a></td></tr>
<tr><th>parent</th><td colspan='2' class='sha1'><a href='/drm/drm-misc/commit/?id=5fc537bfd00033a3f813330175f7f12c25957ebf'>5fc537bfd00033a3f813330175f7f12c25957ebf</a> (<a href='/drm/drm-misc/diff/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f&amp;id2=5fc537bfd00033a3f813330175f7f12c25957ebf'>diff</a>)</td></tr></table>
<div class='commit-subject'>drm/edid: Fix a missing-check bug in drm_load_edid_firmware()</div><div class='commit-msg'>In drm_load_edid_firmware(), fwstr is allocated by kstrdup(). And fwstr
is dereferenced in the following codes. However, memory allocation
functions such as kstrdup() may fail and returns NULL. Dereferencing
this null pointer may cause the kernel go wrong. Thus we should check
this kstrdup() operation.
Further, if kstrdup() returns NULL, we should return ERR_PTR(-ENOMEM) to
the caller site.

Signed-off-by: Gen Zhang &lt;blackgod016574@gmail.com&gt;
Reviewed-by: Jani Nikula &lt;jani.nikula@intel.com&gt;
Signed-off-by: Jani Nikula &lt;jani.nikula@intel.com&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/<a href="./?id=20190524023222">20190524023222</a>.GA5302@zhanggen-UX430UQ
</div><div class='diffstat-header'><a href='/drm/drm-misc/diff/?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>Diffstat</a></div><table summary='diffstat' class='diffstat'><tr><td class='mode'>-rw-r--r--</td><td class='upd'><a href='/drm/drm-misc/diff/drivers/gpu/drm/drm_edid_load.c?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>drivers/gpu/drm/drm_edid_load.c</a></td><td class='right'>2</td><td class='graph'><table summary='file diffstat' width='2%'><tr><td class='add' style='width: 100.0%;'/><td class='rem' style='width: 0.0%;'/><td class='none' style='width: 0.0%;'/></tr></table></td></tr>
</table><div class='diffstat-summary'>1 files changed, 2 insertions, 0 deletions</div><table summary='diff' class='diff'><tr><td><div class='head'>diff --git a/drivers/gpu/drm/drm_edid_load.c b/drivers/gpu/drm/drm_edid_load.c<br/>index 18d52dc4b21d..2e8d043fc7e5 100644<br/>--- a/<a href='/drm/drm-misc/tree/drivers/gpu/drm/drm_edid_load.c?id=5fc537bfd00033a3f813330175f7f12c25957ebf'>drivers/gpu/drm/drm_edid_load.c</a><br/>+++ b/<a href='/drm/drm-misc/tree/drivers/gpu/drm/drm_edid_load.c?id=9f1f1a2dab38d4ce87a13565cf4dc1b73bef3a5f'>drivers/gpu/drm/drm_edid_load.c</a></div><div class='hunk'>@@ -293,6 +293,8 @@ struct edid *drm_load_edid_firmware(struct drm_connector *connector)</div><div class='ctx'> 	 * the last one found one as a fallback.</div><div class='ctx'> 	 */</div><div class='ctx'> 	fwstr = kstrdup(edid_firmware, GFP_KERNEL);</div><div class='add'>+	if (!fwstr)</div><div class='add'>+		return ERR_PTR(-ENOMEM);</div><div class='ctx'> 	edidstr = fwstr;</div><div class='ctx'> </div><div class='ctx'> 	while ((edidname = strsep(&amp;edidstr, ","))) {</div></td></tr></table></div> <!-- class=content -->
<div class='footer'>generated by <a href='https://git.zx2c4.com/cgit/about/'>cgit v1.2.1</a> (<a href='https://git-scm.com/'>git 2.18.0</a>) at 2021-10-30 22:00:05 +0000</div>
</div> <!-- id=cgit -->
</body>
</html>
