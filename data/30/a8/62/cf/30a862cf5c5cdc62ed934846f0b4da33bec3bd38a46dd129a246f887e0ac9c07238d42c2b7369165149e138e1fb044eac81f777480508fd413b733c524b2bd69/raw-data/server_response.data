<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>#32806 - An assertion is hit when processing &quot;(|()()0)\2&quot; extended regular expression - GNU bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="noindex, nofollow">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<script type="text/javascript">
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
</script>
</head>
<body>
<h1>GNU bug report logs - 
#32806<br/>
An assertion is hit when processing &quot;(|()()0)\2&quot; extended regular expression</h1>
<p><a href="bugreport.cgi?bug=32805">Previous</a> <a href="bugreport.cgi?bug=32807">Next</a></p>
<div class="versiongraph"></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=grep">grep</a>;
</p>
</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=anatoly.trosinenko%40gmail.com">Anatoly Trosinenko &lt;anatoly.trosinenko &lt;at&gt; gmail.com&gt;</a></p>
  <p>Date: Sat, 22 Sep 2018 15:21:03 UTC</p>

<p>Severity: normal</p>
<p></p>
<p>Merged with <a href="bugreport.cgi?bug=22793">22793</a>,
<a href="bugreport.cgi?bug=34238">34238</a>,
<a href="bugreport.cgi?bug=42946">42946</a></p>




</div>

<p>To reply to this bug, email your comments to 32806 AT debbugs.gnu.org.
<p><a href="javascript:toggle_infmessages();">Toggle</a> the display of automated, internal messages from the tracker.</p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=32806;mbox=yes" title="Folder with messages as they arrived at the tracker">mbox folder</a>, <a href="bugreport.cgi?bug=32806;mboxstat=yes" title="Folder with a status summary message at the start">status mbox</a>, <a href="bugreport.cgi?mboxmaint=yes;bug=32806;mbox=yes" title="Folder of messages as sent from the tracker to the maintainers">maintainer mbox</a></p></div>

<div class="infmessage"><hr>
<a name="1"></a>
<!-- request_addr: bug-grep &lt;at&gt; gnu.org -->
<!-- time:1537629663 -->
<strong>Report forwarded</strong>
to <code>bug-grep &lt;at&gt; gnu.org</code>:<br>
<code>bug#32806</code>; Package <code>grep</code>.
 (Sat, 22 Sep 2018 15:21:03 GMT) <a href="bugreport.cgi?bug=32806;msg=2">Full text</a> and <a href="bugreport.cgi?mbox=yes;bug=32806;msg=2">rfc822 format</a> available.</div>

<div class="infmessage"><hr>
<a name="3"></a>
<!-- request_addr: Anatoly Trosinenko &lt;anatoly.trosinenko &lt;at&gt; gmail.com&gt; -->
<!-- time:1537629664 -->
<strong>Acknowledgement sent</strong>
to <code>Anatoly Trosinenko &lt;anatoly.trosinenko &lt;at&gt; gmail.com&gt;</code>:<br>
New bug report received and forwarded.  Copy sent to <code>bug-grep &lt;at&gt; gnu.org</code>.
 (Sat, 22 Sep 2018 15:21:04 GMT) <a href="bugreport.cgi?msg=4;bug=32806">Full text</a> and <a href="bugreport.cgi?mbox=yes;bug=32806;msg=4">rfc822 format</a> available.</div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit &lt;at&gt; debbugs.gnu.org (<a href="bugreport.cgi?msg=5;bug=32806">full text</a>, <a href="bugreport.cgi?mbox=yes;bug=32806;msg=5">mbox</a>):</p>
<pre class="headers">
<b>From:</b> Anatoly Trosinenko &lt;anatoly.trosinenko &lt;at&gt; gmail.com&gt;
<b>To:</b> bug-grep &lt;at&gt; gnu.org
<b>Subject:</b> An assertion is hit when processing &quot;(|()()0)\2&quot; extended regular
 expression
<b>Date:</b> Sat, 22 Sep 2018 18:00:56 +0300
</pre>
<pre class="message">Hello,

When processing a simple extended regular expression, GNU grep hits an
assertion. This is reproducible on the latest commit from master
branch 51dacfb (Sep 19).

$ export LC_ALL=C
$ gdb -q --args ./grep -E &quot;(|()()0)\2&quot;
Reading symbols from ./grep...(no debugging symbols found)...done.
(gdb) r
Starting program: /path/to/grep -E \(\|\(\)\(\)0\)\\2
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.
grep: regexec.c:1342: pop_fail_stack: Assertion `num &gt;= 0&#39; failed.

Program received signal SIGABRT, Aborted.
__GI_raise (sig=sig &lt;at&gt; entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51
51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
(gdb) bt
#0  __GI_raise (sig=sig &lt;at&gt; entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51
#1  0x00007ffff75ae801 in __GI_abort () at abort.c:79
#2  0x00007ffff759e39a in __assert_fail_base (fmt=0x7ffff77257d8
&quot;%s%s%s:%u: %s%sAssertion `%s&#39; failed.\n%n&quot;,
assertion=assertion &lt;at&gt; entry=0x7ffff772351f &quot;num &gt;= 0&quot;,
file=file &lt;at&gt; entry=0x7ffff7723515 &quot;regexec.c&quot;, line=line &lt;at&gt; entry=1342,
    function=function &lt;at&gt; entry=0x7ffff77278a0 &lt;__PRETTY_FUNCTION__.12590&gt;
&quot;pop_fail_stack&quot;) at assert.c:92
#3  0x00007ffff759e412 in __GI___assert_fail
(assertion=assertion &lt;at&gt; entry=0x7ffff772351f &quot;num &gt;= 0&quot;,
file=file &lt;at&gt; entry=0x7ffff7723515 &quot;regexec.c&quot;, line=line &lt;at&gt; entry=1342,
function=function &lt;at&gt; entry=0x7ffff77278a0 &lt;__PRETTY_FUNCTION__.12590&gt;
&quot;pop_fail_stack&quot;) at assert.c:101
#4  0x00007ffff758f3f8 in pop_fail_stack
(eps_via_nodes=0x7fffffffd5d0, regs=0x55555578b110, nregs=4,
pidx=&lt;optimized out&gt;, fs=&lt;optimized out&gt;) at regexec.c:1342
#5  0x00007ffff76650e8 in pop_fail_stack (eps_via_nodes=&lt;optimized
out&gt;, regs=&lt;optimized out&gt;, nregs=&lt;optimized out&gt;, pidx=&lt;optimized
out&gt;, fs=&lt;optimized out&gt;) at regexec.c:1427
#6  set_regs (preg=preg &lt;at&gt; entry=0x555555788cd0,
mctx=mctx &lt;at&gt; entry=0x7fffffffd770, nmatch=nmatch &lt;at&gt; entry=4,
pmatch=pmatch &lt;at&gt; entry=0x55555578b110, fl_backtrack=&lt;optimized out&gt;) at
regexec.c:1419
#7  0x00007ffff766e272 in re_search_internal
(preg=preg &lt;at&gt; entry=0x555555788cd0, string=string &lt;at&gt; entry=0x7fffffffdbe6
&quot;\n&quot;, length=length &lt;at&gt; entry=0, start=&lt;optimized out&gt;, start &lt;at&gt; entry=0,
range=&lt;optimized out&gt;, range &lt;at&gt; entry=0, stop=stop &lt;at&gt; entry=0, nmatch=4,
pmatch=0x55555578b110,
    eflags=0) at regexec.c:846
#8  0x00007ffff766eb88 in re_search_stub (bufp=0x555555788cd0,
string=&lt;optimized out&gt;, length=&lt;optimized out&gt;, start=0,
range=&lt;optimized out&gt;, stop=&lt;optimized out&gt;, regs=0x5555557883a0,
ret_len=&lt;optimized out&gt;) at regexec.c:420
#9  0x00007ffff766f7e0 in __re_search (bufp=&lt;optimized out&gt;,
string=&lt;optimized out&gt;, length=&lt;optimized out&gt;, start=&lt;optimized out&gt;,
range=&lt;optimized out&gt;, regs=&lt;optimized out&gt;) at regexec.c:291
#10 0x0000555555558857 in EGexecute ()
#11 0x000055555555df08 in main ()


Best regards
Anatoly



</pre>

<div class="infmessage"><hr>
<a name="6"></a>
<!-- request_addr: bug-grep &lt;at&gt; gnu.org -->
<!-- time:1537651442 -->
<strong>Information forwarded</strong>
to <code>bug-grep &lt;at&gt; gnu.org</code>:<br>
<code>bug#32806</code>; Package <code>grep</code>.
 (Sat, 22 Sep 2018 21:24:02 GMT) <a href="bugreport.cgi?bug=32806;msg=7">Full text</a> and <a href="bugreport.cgi?mbox=yes;bug=32806;msg=7">rfc822 format</a> available.</div>

<hr><p class="msgreceived"><a name="8"></a><a name="msg8"></a><a href="#8">Message #8</a> received at 32806 &lt;at&gt; debbugs.gnu.org (<a href="bugreport.cgi?bug=32806;msg=8">full text</a>, <a href="bugreport.cgi?msg=8;mbox=yes;bug=32806">mbox</a>):</p>
<pre class="headers">
<b>From:</b> Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt;
<b>To:</b> Anatoly Trosinenko &lt;anatoly.trosinenko &lt;at&gt; gmail.com&gt;, 32806 &lt;at&gt; debbugs.gnu.org
<b>Subject:</b> Re: bug#32806: An assertion is hit when processing &quot;(|()()0)\2&quot;
 extended regular expression
<b>Date:</b> Sat, 22 Sep 2018 14:23:41 -0700
</pre>
<pre class="message">Thanks for the test case. This appears to be the same as bug#22793 so 
I&#39;ll merge them.

<a href="https://debbugs.gnu.org/22793">https://debbugs.gnu.org/22793</a>




</pre>

<div class="msgreceived"><hr>
<a name="9"></a>
<!-- requester: Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt; -->
<!-- request_addr: control &lt;at&gt; debbugs.gnu.org -->
<!-- time:1537651442 -->
<strong>Merged <a href="bugreport.cgi?bug=22793">22793</a> <a href="bugreport.cgi?bug=32806">32806</a>.</strong>
Request was from <code>Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt;</code>
to <code>control &lt;at&gt; debbugs.gnu.org</code>.
 (Sat, 22 Sep 2018 21:24:02 GMT) <a href="bugreport.cgi?bug=32806;msg=10">Full text</a> and <a href="bugreport.cgi?mbox=yes;bug=32806;msg=10">rfc822 format</a> available.</div>

<div class="msgreceived"><hr>
<a name="11"></a>
<!-- requester: Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt; -->
<!-- request_addr: control &lt;at&gt; debbugs.gnu.org -->
<!-- time:1548904982 -->
<strong>Merged <a href="bugreport.cgi?bug=22793">22793</a> <a href="bugreport.cgi?bug=32806">32806</a> <a href="bugreport.cgi?bug=34238">34238</a>.</strong>
Request was from <code>Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt;</code>
to <code>control &lt;at&gt; debbugs.gnu.org</code>.
 (Thu, 31 Jan 2019 03:23:02 GMT) <a href="bugreport.cgi?msg=12;bug=32806">Full text</a> and <a href="bugreport.cgi?mbox=yes;bug=32806;msg=12">rfc822 format</a> available.</div>

<div class="msgreceived"><hr>
<a name="13"></a>
<!-- requester: Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt; -->
<!-- request_addr: control &lt;at&gt; debbugs.gnu.org -->
<!-- time:1600717922 -->
<strong>Merged <a href="bugreport.cgi?bug=22793">22793</a> <a href="bugreport.cgi?bug=32806">32806</a> <a href="bugreport.cgi?bug=34238">34238</a> <a href="bugreport.cgi?bug=42946">42946</a>.</strong>
Request was from <code>Paul Eggert &lt;eggert &lt;at&gt; cs.ucla.edu&gt;</code>
to <code>control &lt;at&gt; debbugs.gnu.org</code>.
 (Mon, 21 Sep 2020 19:52:02 GMT) <a href="bugreport.cgi?bug=32806;msg=14">Full text</a> and <a href="bugreport.cgi?bug=32806;mbox=yes;msg=14">rfc822 format</a> available.</div>

<hr>
<div class="msgreceived">This bug report was last modified 1 year and 39 days ago.</div>

<hr>
<p><a href="bugreport.cgi?bug=32805">Previous</a> <a href="bugreport.cgi?bug=32807">Next</a></p>
<!--
<p class="msgreceived">Send a report that <a href="//debbugs.gnu.org/cgi/bugspam.cgi">this bug log contains spam</a>.</p> -->
<hr>
<P>
<A HREF="//debbugs.gnu.org/">GNU bug tracking system</A><BR>
Copyright (C) 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson.
</ADDRESS>

</body>
</html>
