<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <title>Bug #1593799 “glance-manage db purge breaks image immutability p...” : Bugs : Glance</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1593799" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1593799/bug.atom" title="Bug 1593799 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="Using glance-manage db purge command opens possibility to recycle image-IDs.

When the row is deleted from the database the ID is not known by glance anymore and thus it's not unique during the deployment lifecycle. This opens possibility to following scenario:

1) End user boots VM from private/public/shared image.
2) Image owner deletes the image.
3) glance-manage db purge gets ran which deletes record that image has ever existed.
4) Either malicious user or someone unintentionally creates ..." />
      <meta property="og:description" content="Using glance-manage db purge command opens possibility to recycle image-IDs.

When the row is deleted from the database the ID is not known by glance anymore and thus it's not unique during the deployment lifecycle. This opens possibility to following scenario:

1) End user boots VM from private/public/shared image.
2) Image owner deletes the image.
3) glance-manage db purge gets ran which deletes record that image has ever existed.
4) Either malicious user or someone unintentionally creates ..." />
    

    
    
      <meta property="og:title" content="Bug #1593799 “glance-manage db purge breaks image immutability p...” : Bugs : Glance" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1593799" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["api", "cache", "documentation", "domain-proxy", "gate", "i18n", "low-hanging-fruit", "metadef", "mitaka-backport-potential", "newton-backport-potential", "ocata-rc-potential", "ops", "scrubber", "security"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/glance/+bug/1593799/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/glance"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/355215744/glance-chipmunk-64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/glance">Glance</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/glance">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/glance">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/glance">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/glance">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/glance">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/glance">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    glance-manage db purge breaks image immutability promise
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1593799 reported by
      <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja</a>
      <time title="2016-06-17 17:13:39 UTC" datetime="2016-06-17T17:13:39.243255+00:00">on 2016-06-17</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">18</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary2091902">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/glance/+bug/1593799/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2091902">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/glance">Glance</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/glance/+bug/1593799/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/glance/+bug/1593799/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2091902">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2091902">
     <td colspan="7"><form action="/glance/+bug/1593799/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/glance">Glance</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-06-17 17:13:39 UTC" datetime="2016-06-17T17:13:39.243255+00:00">2016-06-17</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2016-06-17 20:20:53 UTC" datetime="2016-06-17T20:20:53.768173+00:00">2016-06-17</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2018-08-17 13:00:14 UTC" datetime="2018-08-17T13:00:14.201051+00:00">2018-08-17</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2018-08-17 13:00:14 UTC" datetime="2018-08-17T13:00:14.201051+00:00">2018-08-17</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="glance.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="glance.target.option.package" name="glance.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="glance.target.distribution" name="glance.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="glance.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="glance.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="glance.target.package"
                         name="glance.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;glance.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('glance.target.package');
              var select_menu = Y.DOM.byId('glance.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-glance-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionPackage", "extra_no_results_message": null, "selected_value": null, "show_assign_me_button": false, "show_widget_id": "show-widget-glance-target-package", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "glance.target.package"};
        var show_widget_id = 'show-widget-glance-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="glance.target.option.product" name="glance.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="glance" id="glance.target.product"
                         name="glance.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;glance.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('glance.target.product');
              var select_menu = Y.DOM.byId('glance.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-glance-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a project", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "Product", "extra_no_results_message": null, "selected_value": "glance", "show_assign_me_button": false, "show_widget_id": "show-widget-glance-target-product", "step_title": "Search", "assign_me_text": "Pick me", "input_element": "glance.target.product"};
        var show_widget_id = 'show-widget-glance-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="glance.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="glance.status" name="glance.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="glance.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceCRITICAL">Critical</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="glance.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="glance.assignee.assign_to_nobody" name="glance.assignee.option" value="glance.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="glance.assignee.assign_to_me" name="glance.assignee.option" value="glance.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="glance.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="glance.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="glance.comment_on_change" name="glance.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary2091936">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ossa/+bug/1593799/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2091936">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ossa/+bug/1593799/+editstatus" style="float: left" class="value statusOPINION">Opinion</a>
          <a href="https://bugs.launchpad.net/ossa/+bug/1593799/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2091936">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2091936">
     <td colspan="7"><form action="/ossa/+bug/1593799/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ossa">OpenStack Security Advisory</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-06-17 18:14:10 UTC" datetime="2016-06-17T18:14:10.823831+00:00">2016-06-17</time>
      </td>
    </tr>
    
    
    
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2016-07-11 15:54:19 UTC" datetime="2016-07-11T15:54:19.065003+00:00">2016-07-11</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ossa.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ossa.target.option.package" name="ossa.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ossa.target.distribution" name="ossa.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ossa.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ossa.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ossa.target.package"
                         name="ossa.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.package');
              var select_menu = Y.DOM.byId('ossa.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionPackage", "extra_no_results_message": null, "selected_value": null, "show_assign_me_button": false, "show_widget_id": "show-widget-ossa-target-package", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "ossa.target.package"};
        var show_widget_id = 'show-widget-ossa-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ossa.target.option.product" name="ossa.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ossa" id="ossa.target.product"
                         name="ossa.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.product');
              var select_menu = Y.DOM.byId('ossa.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a project", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "Product", "extra_no_results_message": null, "selected_value": "ossa", "show_assign_me_button": false, "show_widget_id": "show-widget-ossa-target-product", "step_title": "Search", "assign_me_text": "Pick me", "input_element": "ossa.target.product"};
        var show_widget_id = 'show-widget-ossa-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ossa.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ossa.status" name="ossa.status" size="1" >
<option selected="selected" value="Opinion">Opinion</option>
</select>
</div>
<input name="ossa.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="ossa.assignee.assign_to_nobody" name="ossa.assignee.option" value="ossa.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ossa.assignee.assign_to_me" name="ossa.assignee.option" value="ossa.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ossa.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ossa.comment_on_change" name="ossa.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary2096817">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ossn/+bug/1593799/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2096817">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossn">OpenStack Security Notes</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ossn/+bug/1593799/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ossn/+bug/1593799/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2096817">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~travis-mcpeak">Travis McPeak</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2096817">
     <td colspan="7"><form action="/ossn/+bug/1593799/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ossn">OpenStack Security Notes</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2016-06-28 15:28:57 UTC" datetime="2016-06-28T15:28:57.485479+00:00">2016-06-28</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2016-08-19 16:23:40 UTC" datetime="2016-08-19T16:23:40.948817+00:00">2016-08-19</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2016-07-21 17:12:16 UTC" datetime="2016-07-21T17:12:16.612194+00:00">2016-07-21</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2016-09-15 17:23:21 UTC" datetime="2016-09-15T17:23:21.504273+00:00">2016-09-15</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2016-09-15 17:23:21 UTC" datetime="2016-09-15T17:23:21.504273+00:00">2016-09-15</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ossn.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ossn.target.option.package" name="ossn.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ossn.target.distribution" name="ossn.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ossn.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ossn.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ossn.target.package"
                         name="ossn.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossn.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossn.target.package');
              var select_menu = Y.DOM.byId('ossn.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossn-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionPackage", "extra_no_results_message": null, "selected_value": null, "show_assign_me_button": false, "show_widget_id": "show-widget-ossn-target-package", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "ossn.target.package"};
        var show_widget_id = 'show-widget-ossn-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ossn.target.option.product" name="ossn.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ossn" id="ossn.target.product"
                         name="ossn.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossn.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossn.target.product');
              var select_menu = Y.DOM.byId('ossn.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossn-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a project", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "Product", "extra_no_results_message": null, "selected_value": "ossn", "show_assign_me_button": false, "show_widget_id": "show-widget-ossn-target-product", "step_title": "Search", "assign_me_text": "Pick me", "input_element": "ossn.target.product"};
        var show_widget_id = 'show-widget-ossn-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossn.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ossn.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ossn.status" name="ossn.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ossn.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceHIGH">High</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossn.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ossn.assignee.assign_to_me" name="ossn.assignee.option" value="ossn.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossn.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ossn.assignee.assigned_to" name="ossn.assignee.option" value="ossn.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ossn.assignee.assigned_to">
              Travis McPeak (travis-mcpeak)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ossn.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ossn.comment_on_change" name="ossn.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/glance/+bug/1593799/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/glance/+bug/1593799/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/glance/+bug/1593799/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>Using glance-manage db purge command opens possibility to recycle image-IDs.</p>
<p>When the row is deleted from the database the ID is not known by glance anymore and thus it&#x27;s not unique during the deployment lifecycle. This opens possibility to following scenario:</p>
<p>1) End user boots VM from private/<wbr />public/<wbr />shared image.<br />
2) Image owner deletes the image.<br />
3) glance-manage db purge gets ran which deletes record that image has ever existed.<br />
4) Either malicious user or someone unintentionally creates new image with same ID (being same user so having access to the image by owning it or it becoming public/<wbr />shared(<wbr />/possbly community at some point))<br />
5) Same end user boots either snapshot from the original image or nova needs to migrate the VM to another host. Now the user&#x27;s VM will be rebuilt on top of the new image. Worst case scenario the user had no idea that the image data changed in between.</p>
<p>This behavior breaks Glance image immutability promise that has bee stated that the data related to image ID that has gone active will never change.</p>
<p>We have two solutions for this. Either we introduce table to track the deleted image-IDs and get glance to cross check that during the image create or we leave it as is but issue notice/<wbr />documentation what are the implications if the purge is used transferring the responsibility to the cloud operators.</p>
<p>This was partially discussed in the virtual glance midcycle meetup so it might not be justified to leave this as private but I wanted to leave that decision to VMT.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="official-tag" href="/glance/+bugs?field.tag=security">security</a>
          </span>
          
          <a href="+edit" title="Edit tags" id="tags-trigger" class="sprite edit action-icon">Edit</a>
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T17:57:32.813518+00:00" title="2016-06-17 17:57:32 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I added Brian as we discussed about this yesterday and he is part of glance-coresec but did not have access to the bug.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I added Brian as we discussed about this yesterday and he is part of glance-coresec but did not have access to the bug.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T18:05:09.018800+00:00" title="2016-06-17 18:05:09 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This is a good summary of the problem.</p>
<p>One thing we thought about was restricting the ability to specify an image_id at the time of image creation to admins by policy, so that this feature couldn&#x27;t be abused.  An objection to that strategy is that for hybrid clouds, it would be convenient for regular users to use the same id for the same image in each cloud.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This is a good summary of the problem.

One thing we thought about was restricting the ability to specify an image_id at the time of image creation to admins by policy, so that this feature couldn't be abused.  An objection to that strategy is that for hybrid clouds, it would be convenient for regular users to use the same id for the same image in each cloud.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T18:15:00.137329+00:00" title="2016-06-17 18:15:00 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T18:22:54.913441+00:00" title="2016-06-17 18:22:54 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>If this was discussed in a public venue (I can&#x27;t find mention of it in IRC logs so presumably it happened in voice chat instead?) then there&#x27;s not a lot of point in maintaining an embargo. Also if the fix ends up just being a change to documentation or happens only in master (adding database tables doesn&#x27;t seem likely to pass muster for a stable backport) then this would at most be a security note and not an advisory anyway.</p>
<p>It also seems like exploitation would be hard to target unless the operator is routinely purging Glance&#x27;s DB.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">If this was discussed in a public venue (I can't find mention of it in IRC logs so presumably it happened in voice chat instead?) then there's not a lot of point in maintaining an embargo. Also if the fix ends up just being a change to documentation or happens only in master (adding database tables doesn't seem likely to pass muster for a stable backport) then this would at most be a security note and not an advisory anyway.

It also seems like exploitation would be hard to target unless the operator is routinely purging Glance's DB.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T18:44:25.863361+00:00" title="2016-06-17 18:44:25 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The discussion was in the virtual mid-cycle meeting in bluejeans and I believe a recording is available.</p>
<p>Just one thing about the exploit -- combine this with <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1545092">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1545092</a>, and a bad actor could put the DB in a situation where it needs to be purged right away.</p>
<p>I don&#x27;t think <a href="/bugs/1545092" class="bug-link">bug 1545092</a> has been publicized yet (there was going to be a combined security note about a few issues, iirc), maybe the recommendation for this bug could be rolled into that.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The discussion was in the virtual mid-cycle meeting in bluejeans and I believe a recording is available.

Just one thing about the exploit -- combine this with https://bugs.launchpad.net/glance/+bug/1545092, and a bad actor could put the DB in a situation where it needs to be purged right away.

I don't think bug 1545092 has been publicized yet (there was going to be a combined security note about a few issues, iirc), maybe the recommendation for this bug could be rolled into that.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T19:06:41.820773+00:00" title="2016-06-17 19:06:41 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The recording is not yet available and if we want to keep this private, I can withold that part from the recording. (I need to edit it to avoid publishing sensitive info like phone numbers anyways).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The recording is not yet available and if we want to keep this private, I can withold that part from the recording. (I need to edit it to avoid publishing sensitive info like phone numbers anyways).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T19:09:09.543061+00:00" title="2016-06-17 19:09:09 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>so the audience on that call was ~7 people which of at least 3 belongs to the glance sec group Brian, Nikhil and Hemanth, the 4th would be me so we do not have too many people yet this has been going out.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">so the audience on that call was ~7 people which of at least 3 belongs to the glance sec group Brian, Nikhil and Hemanth, the 4th would be me so we do not have too many people yet this has been going out.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T20:20:49.224556+00:00" title="2016-06-17 20:20:49 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>We haven&#x27;t published the recordings so I agree that having this in a private bug is okay.</p>
<p>Please note that this issue exists at least since Liberty. The commit that introduced this feature and hence a vulnerability along with it is:</p>
<p>commit 9a6823326b43c01<wbr />562a736d417f6e5<wbr />f7f68e44cf<br />
Author: Martin Mágr &lt;email address hidden&gt;<br />
Date:   Mon Aug 24 13:37:54 2015 +0200</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add db purge command</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch adds &quot;db purge&quot; to glance-manage for deleting soft deleted<br />
&nbsp;&nbsp;&nbsp;&nbsp;images, tasks.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I5b609292aa15f8<wbr />133d0d785fcf914<wbr />3825bed8073<br />
&nbsp;&nbsp;&nbsp;&nbsp;Implements: blueprint database-purge</p>
<p>I can confirm that this is a real issue.</p>
<p>Also, I think this vulnerability can exist irrespective of the existence of the db-purge utility as a individual operator can choose to hard-delete the soft-deleted old rows on their deployment.</p>
<p>There is a problem with introducing a new table due the growth in the size of the DB over period of time. This was one of the major reason why the db-purge utility was introduced. I think this bug is subject to further discussion on the best possible solution. I, however, find it in the best interest to send a CVE note with a advice on not deleting soft-deleted images. It should be left to the operator to decide which images are safe to be removed from the database once their deployment is assured of non-existence of such -- like no tracking of that image id in Nova, Cinder, Ironic, Heat, etc.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">We haven't published the recordings so I agree that having this in a private bug is okay.

Please note that this issue exists at least since Liberty. The commit that introduced this feature and hence a vulnerability along with it is:

commit 9a6823326b43c01562a736d417f6e5f7f68e44cf
Author: Martin Mágr &lt;mmagr@redhat.com&gt;
Date:   Mon Aug 24 13:37:54 2015 +0200

    Add db purge command

    This patch adds "db purge" to glance-manage for deleting soft deleted
    images, tasks.

    Change-Id: I5b609292aa15f8133d0d785fcf9143825bed8073
    Implements: blueprint database-purge


I can confirm that this is a real issue.

Also, I think this vulnerability can exist irrespective of the existence of the db-purge utility as a individual operator can choose to hard-delete the soft-deleted old rows on their deployment.

There is a problem with introducing a new table due the growth in the size of the DB over period of time. This was one of the major reason why the db-purge utility was introduced. I think this bug is subject to further discussion on the best possible solution. I, however, find it in the best interest to send a CVE note with a advice on not deleting soft-deleted images. It should be left to the operator to decide which images are safe to be removed from the database once their deployment is assured of non-existence of such -- like no tracking of that image id in Nova, Cinder, Ironic, Heat, etc.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-17T21:38:21.353304+00:00" title="2016-06-17 21:38:21 UTC">on 2016-06-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The VMT doesn&#x27;t request CVE assignment for bugs which aren&#x27;t going to have fixes backported, though that doesn&#x27;t stop someone else from requesting a CVE once this is public. However, the point of a CVE is to be able to track whether a given deployment is vulnerable, and if there&#x27;s no patch or configuration change which makes deployments no longer at risk of this then there&#x27;s not much point to having a CVE assigned for it anyway in my opinion.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The VMT doesn't request CVE assignment for bugs which aren't going to have fixes backported, though that doesn't stop someone else from requesting a CVE once this is public. However, the point of a CVE is to be able to track whether a given deployment is vulnerable, and if there's no patch or configuration change which makes deployments no longer at risk of this then there's not much point to having a CVE assigned for it anyway in my opinion.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-20T16:01:06.172001+00:00" title="2016-06-20 16:01:06 UTC">on 2016-06-20</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>By &quot;note&quot; there I&#x27;m going to assume you meant OSSN, and I agree that&#x27;s likely warranted. I&#x27;m subscribing the Security team reviewers for further input.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">By "note" there I'm going to assume you meant OSSN, and I agree that's likely warranted. I'm subscribing the Security team reviewers for further input.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-20T16:17:21.808046+00:00" title="2016-06-20 16:17:21 UTC">on 2016-06-20</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Jeremy.</p>
<p>Without going into the technical details about the kind of notes we want to make available to the audience, I think a good security/email documentation with availability for reference (link or number) will help us resolve the communication gap around where we see this being an issue for some of the operators who have chosen to use the db-purge utility since Liberty. Nevertheless, this being a issue for all operators irrespective of who has chosen to use the upstream utility, I think an email to the wider audience is necessary.</p>
<p>Also, I think we need a best practice on this kind of behavior. Maintaining the list of image-ids ever used may be a good amount of trouble for some of the ops, but I&#x27;d like to hear some feedback from the glance-core-sec before taking further action.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Jeremy.

Without going into the technical details about the kind of notes we want to make available to the audience, I think a good security/email documentation with availability for reference (link or number) will help us resolve the communication gap around where we see this being an issue for some of the operators who have chosen to use the db-purge utility since Liberty. Nevertheless, this being a issue for all operators irrespective of who has chosen to use the upstream utility, I think an email to the wider audience is necessary.

Also, I think we need a best practice on this kind of behavior. Maintaining the list of image-ids ever used may be a good amount of trouble for some of the ops, but I'd like to hear some feedback from the glance-core-sec before taking further action.  </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hemanth-makkapati" class="sprite person">Hemanth Makkapati (hemanth-makkapati)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-20T21:37:22.823442+00:00" title="2016-06-20 21:37:22 UTC">on 2016-06-20</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I didn&#x27;t get a chance yet to replicate this on devstack but this certainly sounds like a real issue.</p>
<p>I like the idea of creating a separate table that keeps track of all the deleted IDs. Doing this will at least isolate the performance issues to one operation, image create (that too only when an ID is provided). On the other hand, the no-purge strategy won&#x27;t be practical for big clouds and it will impact performance of many image operations. Like Nikhil said, even if we get rid of the purge utility, there is no guarantee that operators themselves won&#x27;t prune the database. So, I&#x27;m inclining towards educating the operators about the risks involved and maybe also provide a way to control or completely disable image creation by id with a policy and/or configuration. That way, the operators can take a call themselves based on their respective business case.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I didn't get a chance yet to replicate this on devstack but this certainly sounds like a real issue.

I like the idea of creating a separate table that keeps track of all the deleted IDs. Doing this will at least isolate the performance issues to one operation, image create (that too only when an ID is provided). On the other hand, the no-purge strategy won't be practical for big clouds and it will impact performance of many image operations. Like Nikhil said, even if we get rid of the purge utility, there is no guarantee that operators themselves won't prune the database. So, I'm inclining towards educating the operators about the risks involved and maybe also provide a way to control or completely disable image creation by id with a policy and/or configuration. That way, the operators can take a call themselves based on their respective business case. </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-28T15:28:36.539925+00:00" title="2016-06-28 15:28:36 UTC">on 2016-06-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Agreed, this seems like a good target for an OSSN.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Agreed, this seems like a good target for an OSSN.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-06-28T15:29:13.169309+00:00" title="2016-06-28 15:29:13 UTC">on 2016-06-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>(added)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">(added)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2016-07-11 15:54:18 UTC" datetime="2016-07-11T15:54:18.681439+00:00">on 2016-07-11</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Incomplete &#8594; Opinion
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
    
    <time title="2016-07-21 17:12:16 UTC" datetime="2016-07-21T17:12:16.226739+00:00">on 2016-07-21</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossn: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Travis McPeak (travis-mcpeak)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-17T19:41:06.344339+00:00" title="2016-08-17 19:41:06 UTC">on 2016-08-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;m working on the note for this now.  What&#x27;s the best recommendation we can give?  It seems like we don&#x27;t have the ability to either:</p>
<p>&nbsp;- disable image creation by ID<br />
&nbsp;- track previously assigned image IDs</p>
<p>So what&#x27;s the best recommendation we can give?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I'm working on the note for this now.  What's the best recommendation we can give?  It seems like we don't have the ability to either:

 - disable image creation by ID
 - track previously assigned image IDs

So what's the best recommendation we can give?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-18T09:51:03.473331+00:00" title="2016-08-18 09:51:03 UTC">on 2016-08-18</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Travis,</p>
<p>I think the best recommendation we can give at this stage is to not use purge on any system that does not have image creation limited to trusted users.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Travis,

I think the best recommendation we can give at this stage is to not use purge on any system that does not have image creation limited to trusted users.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-18T17:15:29.962660+00:00" title="2016-08-18 17:15:29 UTC">on 2016-08-18</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I agree with Erno.  I don&#x27;t know how much info is usually included in this kind of note, but it might be worth mentioning that if an operator absolutely must do some trimming, the key thing is not to delete the soft-deleted rows in the &#x27;images&#x27; table. It should be OK to hard delete the associated rows in the image_members, image_properties, image_tags, and image_locations tables.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I agree with Erno.  I don't know how much info is usually included in this kind of note, but it might be worth mentioning that if an operator absolutely must do some trimming, the key thing is not to delete the soft-deleted rows in the 'images' table. It should be OK to hard delete the associated rows in the image_members, image_properties, image_tags, and image_locations tables.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-18T19:24:14.555794+00:00" title="2016-08-18 19:24:14 UTC">on 2016-08-18</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Erno and Brian.  I&#x27;m working on a draft of the note now.  I&#x27;ll post here soon.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Erno and Brian.  I'm working on a draft of the note now.  I'll post here soon.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-19T15:13:13.156756+00:00" title="2016-08-19 15:13:13 UTC">on 2016-08-19</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>How does this look?</p>
<p>Deleted Glance image IDs may be reassigned<br />
---</p>
<p>### Summary ###<br />
It is possible for image IDs from deleted images to be reassigned to<br />
other images.  This creates the possibility that:</p>
<p>&nbsp;- Alice creates a VM that boots from image ID X<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X<br />
&nbsp;- Alice boots her VM without realizing that the image has changed</p>
<p>### Affected Services / Software ###<br />
Glance, Liberty, Mitaka</p>
<p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs.  Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance db purge` utility or manually by an administrator.</p>
<p>If these records are removed a malicious user may intentionally upload<br />
a new image using the same ID (Glance allows an image creator to<br />
optionally specify the image ID).  This would cause any victim<br />
instances referencing the ID to use an attacker supplied image.</p>
<p>### Recommended Actions ###<br />
The combination of purged Glance database entries and non-admin image<br />
upload is dangerous.  In environments where normal users are permitted<br />
to upload images, the `images` table should not be purged.</p>
<p>### Contacts / References ###<br />
Author: Travis McPeak, IBM<br />
This OSSN : <a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a><br />
Original LaunchPad Bug : <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1593799/">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1593799/</a><br />
OpenStack Security ML : &lt;email address hidden&gt;<br />
OpenStack Security Group : <a rel="nofollow" href="https://launchpad.net/~openstack-ossg">https:/<wbr />/launchpad.<wbr />net/~openstack-<wbr />ossg</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">How does this look?

Deleted Glance image IDs may be reassigned
---

### Summary ###
It is possible for image IDs from deleted images to be reassigned to
other images.  This creates the possibility that:

 - Alice creates a VM that boots from image ID X
 - Bob (image X's owner) deletes the image
 - Mallory creates a new image and specifies that the ID should be X
 - Alice boots her VM without realizing that the image has changed

### Affected Services / Software ###
Glance, Liberty, Mitaka

### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs.  Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance db purge` utility or manually by an administrator.

If these records are removed a malicious user may intentionally upload
a new image using the same ID (Glance allows an image creator to
optionally specify the image ID).  This would cause any victim
instances referencing the ID to use an attacker supplied image.

### Recommended Actions ###
The combination of purged Glance database entries and non-admin image
upload is dangerous.  In environments where normal users are permitted
to upload images, the `images` table should not be purged.

### Contacts / References ###
Author: Travis McPeak, IBM
This OSSN : https://wiki.openstack.org/wiki/OSSN/OSSN-0075
Original LaunchPad Bug : https://bugs.launchpad.net/glance/+bug/1593799/
OpenStack Security ML : openstack-security@lists.openstack.org
OpenStack Security Group : https://launchpad.net/~openstack-ossg
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
    
    <time title="2016-08-19 16:23:40 UTC" datetime="2016-08-19T16:23:40.553404+00:00">on 2016-08-19</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossn: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-24T13:43:55.615148+00:00" title="2016-08-24 13:43:55 UTC">on 2016-08-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks, Travis.  Sorry to be so long getting to this.</p>
<p>I hate to be pedantic (but I used to be a professor, so I can&#x27;t help it).  Two comments:</p>
<p>(1)  The scenario in your &quot;Summary&quot; isn&#x27;t quite right.  For that exact scenario to work you&#x27;d also have to have one of the following:</p>
<p>(A) Mallory has permission to &quot;publicize&quot; images (limited to admins by default policy).  Otherwise, Alice can&#x27;t access the &quot;new&quot; image X uploaded by Mallory.</p>
<p>(B) Mallory doesn&#x27;t have permission to &quot;publicize&quot; images, but knows Alice&#x27;s project ID, and shares the image with Alice.  (If we assume that the original image X was shared by Bob, since Mallory didn&#x27;t own the original image X, she couldn&#x27;t see the full member list of everyone Bob had shared it with, so she&#x27;d have to guess or do some social engineering.)</p>
<p>I guess what I&#x27;m really getting at here is that the most likely scenario for this to work is that either Bob and Mallory are the same person or are in cahoots.  But after writing all that down, in the long run, it doesn&#x27;t matter, it *is* possible for this to happen, so maybe your summary is sufficient after all.</p>
<p>(2) If a deployer wants to purge the database for space reasons, it would be OK to manually remove the soft-deleted rows from the image_properties, image_tags, image_members, and image_locations tables.  (You do say &quot;don&#x27;t delete rows from the images table&quot;, but maybe it&#x27;s worth saying that it&#x27;s OK to delete rows from these other tables.)  I haven&#x27;t read a lot of security notes, so ignore this suggestion if it&#x27;s a dumb idea or inconsistent with the usual practice.</p>
<p>Otherwise, the note LGTM.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks, Travis.  Sorry to be so long getting to this.

I hate to be pedantic (but I used to be a professor, so I can't help it).  Two comments:

(1)  The scenario in your "Summary" isn't quite right.  For that exact scenario to work you'd also have to have one of the following:

(A) Mallory has permission to "publicize" images (limited to admins by default policy).  Otherwise, Alice can't access the "new" image X uploaded by Mallory.

(B) Mallory doesn't have permission to "publicize" images, but knows Alice's project ID, and shares the image with Alice.  (If we assume that the original image X was shared by Bob, since Mallory didn't own the original image X, she couldn't see the full member list of everyone Bob had shared it with, so she'd have to guess or do some social engineering.)

I guess what I'm really getting at here is that the most likely scenario for this to work is that either Bob and Mallory are the same person or are in cahoots.  But after writing all that down, in the long run, it doesn't matter, it *is* possible for this to happen, so maybe your summary is sufficient after all.

(2) If a deployer wants to purge the database for space reasons, it would be OK to manually remove the soft-deleted rows from the image_properties, image_tags, image_members, and image_locations tables.  (You do say "don't delete rows from the images table", but maybe it's worth saying that it's OK to delete rows from these other tables.)  I haven't read a lot of security notes, so ignore this suggestion if it's a dumb idea or inconsistent with the usual practice.

Otherwise, the note LGTM.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-24T14:19:26.960215+00:00" title="2016-08-24 14:19:26 UTC">on 2016-08-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Brian - thanks for the clarity, and this isn&#x27;t pedantic.  We shoot for being precise in these notes.  I&#x27;ll update the note to reflect these points.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Brian - thanks for the clarity, and this isn't pedantic.  We shoot for being precise in these notes.  I'll update the note to reflect these points.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-25T18:09:42.310437+00:00" title="2016-08-25 18:09:42 UTC">on 2016-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Everybody happy with this?</p>
<p>Deleted Glance image IDs may be reassigned<br />
---</p>
<p>### Summary ###<br />
It is possible for image IDs from deleted images to be reassigned to<br />
other images.  This creates the possibility that:</p>
<p>&nbsp;- Alice creates a VM that boots from image ID X<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X<br />
&nbsp;- Alice boots her VM without realizing that the image has changed</p>
<p>It&#x27;s worth noting that in this scenario Mallory needs to know Alice&#x27;s<br />
project ID to share the new image with Alice.  This isn&#x27;t enough to<br />
mitigate the issue as project IDs weren&#x27;t designed to be confidential.</p>
<p>### Affected Services / Software ###<br />
Glance, Liberty, Mitaka</p>
<p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs.  Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance db purge` utility or manually by an administrator.</p>
<p>If these records are removed a malicious user may intentionally upload<br />
a new image using the same ID (Glance allows an image creator to<br />
optionally specify the image ID).  This would cause any victim<br />
instances referencing the ID to use an attacker supplied image.</p>
<p>### Recommended Actions ###<br />
The combination of purged Glance database entries and non-admin image<br />
upload is dangerous.  In environments where normal users are permitted<br />
to upload images, the `images` table should not be purged.  It is<br />
however safe to delete rows from `image_properties`, `image_tags`,<br />
`image_members`, and `image_locations` tables.</p>
<p>### Contacts / References ###<br />
Author: Travis McPeak, IBM<br />
This OSSN : <a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a><br />
Original LaunchPad Bug : <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1593799/">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1593799/</a><br />
OpenStack Security ML : &lt;email address hidden&gt;<br />
OpenStack Security Group : <a rel="nofollow" href="https://launchpad.net/~openstack-ossg">https:/<wbr />/launchpad.<wbr />net/~openstack-<wbr />ossg</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Everybody happy with this?

Deleted Glance image IDs may be reassigned
---

### Summary ###
It is possible for image IDs from deleted images to be reassigned to
other images.  This creates the possibility that:

 - Alice creates a VM that boots from image ID X
 - Bob (image X's owner) deletes the image
 - Mallory creates a new image and specifies that the ID should be X
 - Alice boots her VM without realizing that the image has changed

It's worth noting that in this scenario Mallory needs to know Alice's
project ID to share the new image with Alice.  This isn't enough to
mitigate the issue as project IDs weren't designed to be confidential.

### Affected Services / Software ###
Glance, Liberty, Mitaka

### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs.  Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance db purge` utility or manually by an administrator.

If these records are removed a malicious user may intentionally upload
a new image using the same ID (Glance allows an image creator to
optionally specify the image ID).  This would cause any victim
instances referencing the ID to use an attacker supplied image.

### Recommended Actions ###
The combination of purged Glance database entries and non-admin image
upload is dangerous.  In environments where normal users are permitted
to upload images, the `images` table should not be purged.  It is
however safe to delete rows from `image_properties`, `image_tags`,
`image_members`, and `image_locations` tables.

### Contacts / References ###
Author: Travis McPeak, IBM
This OSSN : https://wiki.openstack.org/wiki/OSSN/OSSN-0075
Original LaunchPad Bug : https://bugs.launchpad.net/glance/+bug/1593799/
OpenStack Security ML : openstack-security@lists.openstack.org
OpenStack Security Group : https://launchpad.net/~openstack-ossg
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/23" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-25T18:25:58.352049+00:00" title="2016-08-25 18:25:58 UTC">on 2016-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/23"> #23</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks the note looks mostly clean.</p>
<p>A few things to note:</p>
<p>* Affected Services will include Newton as we haven&#x27;t removed the purge utility yet and don&#x27;t plan on removing in Newton.</p>
<p>* Attack scenario is not very clear, not sure if that&#x27;s intended. If you would like -- some more inline suggestions:<br />
&nbsp;- Alice creates a VM that boots from image ID X &quot;shared with her by trusted individual Bob&quot;<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image &quot;and as per design no notification is sent to Alice&quot;<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X &quot;and shares it with Alice, again Alice is not aware of this update.&quot;<br />
&nbsp;- Alice boots her VM without realizing that the image has changed</p>
<p>* Another possible scenario involves Mallory having the ability to publicize the image in which case sharing isn&#x27;t required in the above case.</p>
<p>As a courtesy, please make sure to give 24 hours to the glance-core-sec team as people are in different parts of the world before publishing note.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks the note looks mostly clean.

A few things to note:

* Affected Services will include Newton as we haven't removed the purge utility yet and don't plan on removing in Newton.


* Attack scenario is not very clear, not sure if that's intended. If you would like -- some more inline suggestions:
 - Alice creates a VM that boots from image ID X "shared with her by trusted individual Bob"
 - Bob (image X's owner) deletes the image "and as per design no notification is sent to Alice"
 - Mallory creates a new image and specifies that the ID should be X "and shares it with Alice, again Alice is not aware of this update."
 - Alice boots her VM without realizing that the image has changed

* Another possible scenario involves Mallory having the ability to publicize the image in which case sharing isn't required in the above case.



As a courtesy, please make sure to give 24 hours to the glance-core-sec team as people are in different parts of the world before publishing note.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/24" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-25T20:24:07.003267+00:00" title="2016-08-25 20:24:07 UTC">on 2016-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/24"> #24</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks, latest:</p>
<p>Deleted Glance image IDs may be reassigned<br />
---</p>
<p>### Summary ###<br />
It is possible for image IDs from deleted images to be reassigned to<br />
other images.  This creates the possibility that:</p>
<p>&nbsp;- Alice creates a VM that boots from image ID X which has been shared<br />
&nbsp;with her by a trusted party, Bob.<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image.  As per design, Alice<br />
&nbsp;receives no notification this happened.<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X.<br />
&nbsp;- Mallory shares image X with Alice.  Again, per design, Alice is not<br />
&nbsp;notified of this change.<br />
&nbsp;- Alice boots her VM without realizing that the image has changed.</p>
<p>It&#x27;s worth noting that in this scenario Mallory needs to know Alice&#x27;s<br />
project ID to share the new image with Alice.  This isn&#x27;t enough to<br />
mitigate the issue as project IDs weren&#x27;t designed to be confidential.</p>
<p>### Affected Services / Software ###<br />
Glance, Liberty, Mitaka, Newton</p>
<p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs.  Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance db purge` utility or manually by an administrator.</p>
<p>If these records are removed a malicious user may intentionally upload<br />
a new image using the same ID (Glance allows an image creator to<br />
optionally specify the image ID).  This would cause any victim<br />
instances referencing the ID to use an attacker supplied image.</p>
<p>### Recommended Actions ###<br />
The combination of purged Glance database entries and non-admin image<br />
upload is dangerous.  In environments where normal users are permitted<br />
to upload images, the `images` table should not be purged.  It is<br />
however safe to delete rows from `image_properties`, `image_tags`,<br />
`image_members`, and `image_locations` tables.</p>
<p>### Contacts / References ###<br />
Author: Travis McPeak, IBM<br />
This OSSN : <a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a><br />
Original LaunchPad Bug : <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1593799/">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1593799/</a><br />
OpenStack Security ML : &lt;email address hidden&gt;<br />
OpenStack Security Group : <a rel="nofollow" href="https://launchpad.net/~openstack-ossg">https:/<wbr />/launchpad.<wbr />net/~openstack-<wbr />ossg</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks, latest:

Deleted Glance image IDs may be reassigned
---

### Summary ###
It is possible for image IDs from deleted images to be reassigned to
other images.  This creates the possibility that:

 - Alice creates a VM that boots from image ID X which has been shared
 with her by a trusted party, Bob.
 - Bob (image X's owner) deletes the image.  As per design, Alice
 receives no notification this happened.
 - Mallory creates a new image and specifies that the ID should be X.
 - Mallory shares image X with Alice.  Again, per design, Alice is not
 notified of this change.
 - Alice boots her VM without realizing that the image has changed.

It's worth noting that in this scenario Mallory needs to know Alice's
project ID to share the new image with Alice.  This isn't enough to
mitigate the issue as project IDs weren't designed to be confidential.

### Affected Services / Software ###
Glance, Liberty, Mitaka, Newton

### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs.  Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance db purge` utility or manually by an administrator.

If these records are removed a malicious user may intentionally upload
a new image using the same ID (Glance allows an image creator to
optionally specify the image ID).  This would cause any victim
instances referencing the ID to use an attacker supplied image.

### Recommended Actions ###
The combination of purged Glance database entries and non-admin image
upload is dangerous.  In environments where normal users are permitted
to upload images, the `images` table should not be purged.  It is
however safe to delete rows from `image_properties`, `image_tags`,
`image_members`, and `image_locations` tables.

### Contacts / References ###
Author: Travis McPeak, IBM
This OSSN : https://wiki.openstack.org/wiki/OSSN/OSSN-0075
Original LaunchPad Bug : https://bugs.launchpad.net/glance/+bug/1593799/
OpenStack Security ML : openstack-security@lists.openstack.org
OpenStack Security Group : https://launchpad.net/~openstack-ossg
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/25" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-25T21:31:11.359423+00:00" title="2016-08-25 21:31:11 UTC">on 2016-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/25"> #25</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>A nit, otherwise looks good.</p>
<p>Worth mentioning that:-</p>
<p>Mallory and(or) Bob doesn&#x27;t need to use the sharing workflow if &quot;publicizing&quot; images is allowed by policy in the cloud deployment.</p>
<p>Thanks for working with us patiently on this, Travis!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">A nit, otherwise looks good. 

Worth mentioning that:-

Mallory and(or) Bob doesn't need to use the sharing workflow if "publicizing" images is allowed by policy in the cloud deployment.



Thanks for working with us patiently on this, Travis!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/26" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-25T23:41:40.870534+00:00" title="2016-08-25 23:41:40 UTC">on 2016-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/26"> #26</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Good point (and my pleasure about working with you on the note!)</p>
<p>Deleted Glance image IDs may be reassigned<br />
---</p>
<p>### Summary ###<br />
It is possible for image IDs from deleted images to be reassigned to<br />
other images.  This creates the possibility that:</p>
<p>&nbsp;- Alice creates a VM that boots from image ID X which has been shared<br />
&nbsp;with her by a trusted party, Bob.<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image.  As per design, Alice<br />
&nbsp;receives no notification this happened.<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X.<br />
&nbsp;- Mallory shares image X with Alice.  Again, per design, Alice is not<br />
&nbsp;notified of this change.<br />
&nbsp;- Alice boots her VM without realizing that the image has changed.</p>
<p>It&#x27;s worth noting that in this scenario Mallory needs to know Alice&#x27;s<br />
project ID to share the new image with Alice.  This isn&#x27;t enough to<br />
mitigate the issue as project IDs weren&#x27;t designed to be confidential.</p>
<p>If the environment allows non-administrators to publish images Mallory<br />
doesn&#x27;t have to explicitly share with Alice or know her project ID.</p>
<p>### Affected Services / Software ###<br />
Glance, Liberty, Mitaka, Newton</p>
<p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs.  Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance db purge` utility or manually by an administrator.</p>
<p>If these records are removed a malicious user may intentionally upload<br />
a new image using the same ID (Glance allows an image creator to<br />
optionally specify the image ID).  This would cause any victim<br />
instances referencing the ID to use an attacker supplied image.</p>
<p>### Recommended Actions ###<br />
The combination of purged Glance database entries and non-admin image<br />
upload is dangerous.  In environments where normal users are permitted<br />
to upload images, the `images` table should not be purged.  It is<br />
however safe to delete rows from `image_properties`, `image_tags`,<br />
`image_members`, and `image_locations` tables.</p>
<p>### Contacts / References ###<br />
Author: Travis McPeak, IBM<br />
This OSSN : <a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a><br />
Original LaunchPad Bug : <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1593799/">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1593799/</a><br />
OpenStack Security ML : &lt;email address hidden&gt;<br />
OpenStack Security Group : <a rel="nofollow" href="https://launchpad.net/~openstack-ossg">https:/<wbr />/launchpad.<wbr />net/~openstack-<wbr />ossg</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Good point (and my pleasure about working with you on the note!)

Deleted Glance image IDs may be reassigned
---

### Summary ###
It is possible for image IDs from deleted images to be reassigned to
other images.  This creates the possibility that:

 - Alice creates a VM that boots from image ID X which has been shared
 with her by a trusted party, Bob.
 - Bob (image X's owner) deletes the image.  As per design, Alice
 receives no notification this happened.
 - Mallory creates a new image and specifies that the ID should be X.
 - Mallory shares image X with Alice.  Again, per design, Alice is not
 notified of this change.
 - Alice boots her VM without realizing that the image has changed.

It's worth noting that in this scenario Mallory needs to know Alice's
project ID to share the new image with Alice.  This isn't enough to
mitigate the issue as project IDs weren't designed to be confidential.

If the environment allows non-administrators to publish images Mallory
doesn't have to explicitly share with Alice or know her project ID.

### Affected Services / Software ###
Glance, Liberty, Mitaka, Newton

### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs.  Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance db purge` utility or manually by an administrator.

If these records are removed a malicious user may intentionally upload
a new image using the same ID (Glance allows an image creator to
optionally specify the image ID).  This would cause any victim
instances referencing the ID to use an attacker supplied image.

### Recommended Actions ###
The combination of purged Glance database entries and non-admin image
upload is dangerous.  In environments where normal users are permitted
to upload images, the `images` table should not be purged.  It is
however safe to delete rows from `image_properties`, `image_tags`,
`image_members`, and `image_locations` tables.

### Contacts / References ###
Author: Travis McPeak, IBM
This OSSN : https://wiki.openstack.org/wiki/OSSN/OSSN-0075
Original LaunchPad Bug : https://bugs.launchpad.net/glance/+bug/1593799/
OpenStack Security ML : openstack-security@lists.openstack.org
OpenStack Security Group : https://launchpad.net/~openstack-ossg
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/27" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-26T00:50:59.992345+00:00" title="2016-08-26 00:50:59 UTC">on 2016-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/27"> #27</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This sentence looks rather incomplete:</p>
<p>&quot;If the environment allows non-administrators to publish images Mallory<br />
doesn&#x27;t have to explicitly share with Alice or know her project ID.&quot;</p>
<p>was it intentional?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This sentence looks rather incomplete:

"If the environment allows non-administrators to publish images Mallory
doesn't have to explicitly share with Alice or know her project ID." 

was it intentional?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/28" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-26T02:30:22.724840+00:00" title="2016-08-26 02:30:22 UTC">on 2016-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/28"> #28</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Good catch, how about this?</p>
<p>Deleted Glance image IDs may be reassigned<br />
---</p>
<p>### Summary ###<br />
It is possible for image IDs from deleted images to be reassigned to<br />
other images.  This creates the possibility that:</p>
<p>&nbsp;- Alice creates a VM that boots from image ID X which has been shared<br />
&nbsp;with her by a trusted party, Bob.<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image.  As per design, Alice<br />
&nbsp;receives no notification this happened.<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X.<br />
&nbsp;- Mallory shares image X with Alice.  Again, per design, Alice is not<br />
&nbsp;notified of this change.<br />
&nbsp;- Alice boots her VM without realizing that the image has changed.</p>
<p>It&#x27;s worth noting that in this scenario Mallory needs to know Alice&#x27;s<br />
project ID to share the new image with Alice.  This isn&#x27;t enough to<br />
mitigate the issue as project IDs weren&#x27;t designed to be confidential.</p>
<p>Also, if the environment allows non-administrators to publish images,<br />
Mallory doesn&#x27;t have to explicitly share with Alice or know her project<br />
ID to perform this attack.</p>
<p>### Affected Services / Software ###<br />
Glance, Liberty, Mitaka, Newton</p>
<p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs.  Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance db purge` utility or manually by an administrator.</p>
<p>If these records are removed a malicious user may intentionally upload<br />
a new image using the same ID (Glance allows an image creator to<br />
optionally specify the image ID).  This would cause any victim<br />
instances referencing the ID to use an attacker supplied image.</p>
<p>### Recommended Actions ###<br />
The combination of purged Glance database entries and non-admin image<br />
upload is dangerous.  In environments where normal users are permitted<br />
to upload images, the `images` table should not be purged.  It is<br />
however safe to delete rows from `image_properties`, `image_tags`,<br />
`image_members`, and `image_locations` tables.</p>
<p>### Contacts / References ###<br />
Author: Travis McPeak, IBM<br />
This OSSN : <a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a><br />
Original LaunchPad Bug : <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1593799/">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1593799/</a><br />
OpenStack Security ML : &lt;email address hidden&gt;<br />
OpenStack Security Group : <a rel="nofollow" href="https://launchpad.net/~openstack-ossg">https:/<wbr />/launchpad.<wbr />net/~openstack-<wbr />ossg</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Good catch, how about this?

Deleted Glance image IDs may be reassigned
---

### Summary ###
It is possible for image IDs from deleted images to be reassigned to
other images.  This creates the possibility that:

 - Alice creates a VM that boots from image ID X which has been shared
 with her by a trusted party, Bob.
 - Bob (image X's owner) deletes the image.  As per design, Alice
 receives no notification this happened.
 - Mallory creates a new image and specifies that the ID should be X.
 - Mallory shares image X with Alice.  Again, per design, Alice is not
 notified of this change.
 - Alice boots her VM without realizing that the image has changed.

It's worth noting that in this scenario Mallory needs to know Alice's
project ID to share the new image with Alice.  This isn't enough to
mitigate the issue as project IDs weren't designed to be confidential.

Also, if the environment allows non-administrators to publish images,
Mallory doesn't have to explicitly share with Alice or know her project
ID to perform this attack.

### Affected Services / Software ###
Glance, Liberty, Mitaka, Newton

### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs.  Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance db purge` utility or manually by an administrator.

If these records are removed a malicious user may intentionally upload
a new image using the same ID (Glance allows an image creator to
optionally specify the image ID).  This would cause any victim
instances referencing the ID to use an attacker supplied image.

### Recommended Actions ###
The combination of purged Glance database entries and non-admin image
upload is dangerous.  In environments where normal users are permitted
to upload images, the `images` table should not be purged.  It is
however safe to delete rows from `image_properties`, `image_tags`,
`image_members`, and `image_locations` tables.

### Contacts / References ###
Author: Travis McPeak, IBM
This OSSN : https://wiki.openstack.org/wiki/OSSN/OSSN-0075
Original LaunchPad Bug : https://bugs.launchpad.net/glance/+bug/1593799/
OpenStack Security ML : openstack-security@lists.openstack.org
OpenStack Security Group : https://launchpad.net/~openstack-ossg
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/29" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-26T18:43:55.791141+00:00" title="2016-08-26 18:43:55 UTC">on 2016-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/29"> #29</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This looks good to me, Travis.  Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This looks good to me, Travis.  Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/30" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T10:14:50.257379+00:00" title="2016-08-29 10:14:50 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/30"> #30</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs. Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance db purge` utility or manually by an administrator.</p>
<p>`glance-manage db purge` This is not functionality of python-glanceclient but glance-manage admin tool.</p>
<p>Other than that looks good to me on latest rev.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs. Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance db purge` utility or manually by an administrator.

`glance-manage db purge` This is not functionality of python-glanceclient but glance-manage admin tool.

Other than that looks good to me on latest rev.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/31" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T13:48:34.802225+00:00" title="2016-08-29 13:48:34 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/31"> #31</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Erno is completely correct, the command should be &#x27;glance-manage db purge&#x27;.  With that correction, I think the proposed text is fine.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Erno is completely correct, the command should be 'glance-manage db purge'.  With that correction, I think the proposed text is fine.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/32" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T14:09:43.042897+00:00" title="2016-08-29 14:09:43 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/32"> #32</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Good catch Erno.</p>
<p>On a second or may be third thought :) --</p>
<p>&quot;&quot;&quot;<br />
### Affected Services / Software ###<br />
Glance, Liberty, Mitaka, Newton<br />
&quot;&quot;&quot;</p>
<p>I wonder if we should have this as :-</p>
<p>&quot;&quot;&quot;<br />
### Affected Services / Software ###<br />
Glance, Liberty onward.</p>
<p>Glance team isn&#x27;t planning on removing this purge feature yet. If you would like to see it removed please propose the same to the developers or if you are monitoring if this is (will be) removed, then please read the release notes of that release.<br />
&quot;&quot;&quot;</p>
<p>The reason is, if we simply list out releases &quot;Glance, Liberty, Mitaka, Newton&quot; then this note will / may become outdated in Ocata.</p>
<p>Thoughts?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Good catch Erno.


On a second or may be third thought :) --

"""
### Affected Services / Software ###
Glance, Liberty, Mitaka, Newton
"""

I wonder if we should have this as :-

"""
### Affected Services / Software ###
Glance, Liberty onward.

Glance team isn't planning on removing this purge feature yet. If you would like to see it removed please propose the same to the developers or if you are monitoring if this is (will be) removed, then please read the release notes of that release.
"""

The reason is, if we simply list out releases "Glance, Liberty, Mitaka, Newton" then this note will / may become outdated in Ocata.


Thoughts?
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/33" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T14:39:33.930930+00:00" title="2016-08-29 14:39:33 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/33"> #33</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Move up the level to critical -- as per the latest description the issue is pretty convoluted.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Move up the level to critical -- as per the latest description the issue is pretty convoluted.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        High &#8594; Critical
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/34" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T15:50:24.792881+00:00" title="2016-08-29 15:50:24 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/34"> #34</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Nikhil.  I&#x27;ve listed them this way because it&#x27;s our standard format for notes, although you&#x27;re right about the issue where notes become outdated :|</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Nikhil.  I've listed them this way because it's our standard format for notes, although you're right about the issue where notes become outdated :|</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/35" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T15:51:38.150875+00:00" title="2016-08-29 15:51:38 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/35"> #35</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>(hopefully) last version:</p>
<p>Deleted Glance image IDs may be reassigned<br />
---</p>
<p>### Summary ###<br />
It is possible for image IDs from deleted images to be reassigned to<br />
other images.  This creates the possibility that:</p>
<p>&nbsp;- Alice creates a VM that boots from image ID X which has been shared<br />
&nbsp;with her by a trusted party, Bob.<br />
&nbsp;- Bob (image X&#x27;s owner) deletes the image.  As per design, Alice<br />
&nbsp;receives no notification this happened.<br />
&nbsp;- Mallory creates a new image and specifies that the ID should be X.<br />
&nbsp;- Mallory shares image X with Alice.  Again, per design, Alice is not<br />
&nbsp;notified of this change.<br />
&nbsp;- Alice boots her VM without realizing that the image has changed.</p>
<p>It&#x27;s worth noting that in this scenario Mallory needs to know Alice&#x27;s<br />
project ID to share the new image with Alice.  This isn&#x27;t enough to<br />
mitigate the issue as project IDs weren&#x27;t designed to be confidential.</p>
<p>Also, if the environment allows non-administrators to publish images,<br />
Mallory doesn&#x27;t have to explicitly share with Alice or know her project<br />
ID to perform this attack.</p>
<p>### Affected Services / Software ###<br />
Glance, Liberty, Mitaka, Newton</p>
<p>### Discussion ###<br />
Glance&#x27;s image table doesn&#x27;t maintain a list of previously used image<br />
IDs.  Previously assigned image IDs will be listed in the image table<br />
as deleted, but these records may be removed (for performance reasons)<br />
with the `glance-manage db purge` utility or manually by an<br />
administrator.</p>
<p>If these records are removed a malicious user may intentionally upload<br />
a new image using the same ID (Glance allows an image creator to<br />
optionally specify the image ID).  This would cause any victim<br />
instances referencing the ID to use an attacker supplied image.</p>
<p>### Recommended Actions ###<br />
The combination of purged Glance database entries and non-admin image<br />
upload is dangerous.  In environments where normal users are permitted<br />
to upload images, the `images` table should not be purged.  It is<br />
however safe to delete rows from `image_properties`, `image_tags`,<br />
`image_members`, and `image_locations` tables.</p>
<p>### Contacts / References ###<br />
Author: Travis McPeak, IBM<br />
This OSSN : <a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a><br />
Original LaunchPad Bug : <a rel="nofollow" href="https://bugs.launchpad.net/glance/+bug/1593799/">https:/<wbr />/bugs.launchpad<wbr />.net/glance/<wbr />+bug/1593799/</a><br />
OpenStack Security ML : &lt;email address hidden&gt;<br />
OpenStack Security Group : <a rel="nofollow" href="https://launchpad.net/~openstack-ossg">https:/<wbr />/launchpad.<wbr />net/~openstack-<wbr />ossg</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">(hopefully) last version:

Deleted Glance image IDs may be reassigned
---

### Summary ###
It is possible for image IDs from deleted images to be reassigned to
other images.  This creates the possibility that:

 - Alice creates a VM that boots from image ID X which has been shared
 with her by a trusted party, Bob.
 - Bob (image X's owner) deletes the image.  As per design, Alice
 receives no notification this happened.
 - Mallory creates a new image and specifies that the ID should be X.
 - Mallory shares image X with Alice.  Again, per design, Alice is not
 notified of this change.
 - Alice boots her VM without realizing that the image has changed.

It's worth noting that in this scenario Mallory needs to know Alice's
project ID to share the new image with Alice.  This isn't enough to
mitigate the issue as project IDs weren't designed to be confidential.

Also, if the environment allows non-administrators to publish images,
Mallory doesn't have to explicitly share with Alice or know her project
ID to perform this attack.

### Affected Services / Software ###
Glance, Liberty, Mitaka, Newton

### Discussion ###
Glance's image table doesn't maintain a list of previously used image
IDs.  Previously assigned image IDs will be listed in the image table
as deleted, but these records may be removed (for performance reasons)
with the `glance-manage db purge` utility or manually by an
administrator.

If these records are removed a malicious user may intentionally upload
a new image using the same ID (Glance allows an image creator to
optionally specify the image ID).  This would cause any victim
instances referencing the ID to use an attacker supplied image.

### Recommended Actions ###
The combination of purged Glance database entries and non-admin image
upload is dangerous.  In environments where normal users are permitted
to upload images, the `images` table should not be purged.  It is
however safe to delete rows from `image_properties`, `image_tags`,
`image_members`, and `image_locations` tables.

### Contacts / References ###
Author: Travis McPeak, IBM
This OSSN : https://wiki.openstack.org/wiki/OSSN/OSSN-0075
Original LaunchPad Bug : https://bugs.launchpad.net/glance/+bug/1593799/
OpenStack Security ML : openstack-security@lists.openstack.org
OpenStack Security Group : https://launchpad.net/~openstack-ossg
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/36" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T16:34:03.376514+00:00" title="2016-08-29 16:34:03 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/36"> #36</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>LGTM! Thanks, Travis.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">LGTM! Thanks, Travis.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/37" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T16:59:19.709468+00:00" title="2016-08-29 16:59:19 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/37"> #37</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cool - I&#x27;ll get with VMT later today for a refresher on how to send this out :)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cool - I'll get with VMT later today for a refresher on how to send this out :)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/38" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-29T17:08:58.888368+00:00" title="2016-08-29 17:08:58 UTC">on 2016-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/38"> #38</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks, this works for me too.</p>
<p>Great work and thanks for your patience Travis!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks, this works for me too.

Great work and thanks for your patience Travis!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/39" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jokke" class="sprite person">Erno Kuvaja (jokke)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-30T05:23:27.182530+00:00" title="2016-08-30 05:23:27 UTC">on 2016-08-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/39"> #39</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>LGTM, Thanks Travis!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">LGTM, Thanks Travis!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/40" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-31T19:51:27.224222+00:00" title="2016-08-31 19:51:27 UTC">on 2016-08-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/40"> #40</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Added Stuart as he wants to pitch in. Please hold off on sending note until we get his vetted advice.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Added Stuart as he wants to pitch in. Please hold off on sending note until we get his vetted advice.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/41" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-31T20:19:03.259984+00:00" title="2016-08-31 20:19:03 UTC">on 2016-08-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/41"> #41</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>+1 to adding Stuart, it will be worth the wait.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">+1 to adding Stuart, it will be worth the wait.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/42" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-31T20:40:46.811314+00:00" title="2016-08-31 20:40:46 UTC">on 2016-08-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/42"> #42</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Sorry guys, I thought this was ready to go.  I already sent a copy to stakeholders.  We&#x27;ve got an embargo date of 9/13.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Sorry guys, I thought this was ready to go.  I already sent a copy to stakeholders.  We've got an embargo date of 9/13.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/43" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-31T20:55:59.882112+00:00" title="2016-08-31 20:55:59 UTC">on 2016-08-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/43"> #43</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Well, you did have three +2s on your proposed text!  Still curious to hear Stuart&#x27;s thoughts, though.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Well, you did have three +2s on your proposed text!  Still curious to hear Stuart's thoughts, though.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/44" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-08-31T21:54:47.203487+00:00" title="2016-08-31 21:54:47 UTC">on 2016-08-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/44"> #44</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>No worries Travis (+1 to what Brian said in comment #43).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">No worries Travis (+1 to what Brian said in comment #43).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/45" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-01T10:18:25.480528+00:00" title="2016-09-01 10:18:25 UTC">on 2016-09-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/45"> #45</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This is a good catch (kicking myself I didn&#x27;t see it).</p>
<p>We probably don&#x27;t want a major rewrite of the wording at this point.</p>
<p>If it&#x27;s possible to make one change I think &quot;publish&quot; in this sentence is not well defined:</p>
<p>&nbsp;&quot;if the environment allows non-administrators to publish images&quot;</p>
<p>Really, we want &quot;publicize&quot; or &quot;create public images&quot; here, because some people will probably interpret &quot;publish&quot; as regular create or upload. I&#x27;d like to see this changed if it&#x27;s possible.</p>
<p>Less importantly, image sharing is also controlled by policy (we actually disable it by default) so if you also have it disabled you&#x27;re unaffected. We could add an equivalent &quot;if the environment allows image sharing&quot;. (Though this is probably fairly obvious).</p>
<p>For any future notifications it may be good practice to explicitly name the various policies (&quot;publicize_<wbr />image&quot;/<wbr />&quot;add_member&quot;<wbr />) we may be implying.</p>
<p>Would it be worthwhile to update the db purge code? (If so, I may be able to find a volunteer.)</p>
<p>Thanks.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This is a good catch (kicking myself I didn't see it).

We probably don't want a major rewrite of the wording at this point.

If it's possible to make one change I think "publish" in this sentence is not well defined:

 "if the environment allows non-administrators to publish images"

Really, we want "publicize" or "create public images" here, because some people will probably interpret "publish" as regular create or upload. I'd like to see this changed if it's possible.

Less importantly, image sharing is also controlled by policy (we actually disable it by default) so if you also have it disabled you're unaffected. We could add an equivalent "if the environment allows image sharing". (Though this is probably fairly obvious).

For any future notifications it may be good practice to explicitly name the various policies ("publicize_image"/"add_member") we may be implying.

Would it be worthwhile to update the db purge code? (If so, I may be able to find a volunteer.)

Thanks.



</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/46" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~stuart-mclaren" class="sprite person">Stuart McLaren (stuart-mclaren)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-01T10:23:47.746304+00:00" title="2016-09-01 10:23:47 UTC">on 2016-09-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/46"> #46</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Clarification: &quot;we actually disable it by default&quot;: By &quot;we&quot; here I meant HPE -- the upstream default is for sharing to be enabled.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Clarification: "we actually disable it by default": By "we" here I meant HPE -- the upstream default is for sharing to be enabled.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/47" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-01T16:38:22.899926+00:00" title="2016-09-01 16:38:22 UTC">on 2016-09-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/47"> #47</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt;&gt; Would it be worthwhile to update the db purge code? (If so, I may be able to find a volunteer.)
</span></p>
<p>I think having some changes done would be a good addition. However, what those changes are and the effects/<wbr />side-effects of the same may need to be discussed with some operators who were strongly pro this db purge feature. I believe a spec is a good starting point.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt;&gt; Would it be worthwhile to update the db purge code? (If so, I may be able to find a volunteer.)

I think having some changes done would be a good addition. However, what those changes are and the effects/side-effects of the same may need to be discussed with some operators who were strongly pro this db purge feature. I believe a spec is a good starting point.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/48" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nikhil-komawar" class="sprite person">Nikhil Komawar (nikhil-komawar)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-01T16:39:19.955210+00:00" title="2016-09-01 16:39:19 UTC">on 2016-09-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/48"> #48</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>(thanks for the review and input, Stuart)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">(thanks for the review and input, Stuart)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/49" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~travis-mcpeak" class="sprite person">Travis McPeak (travis-mcpeak)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-01T16:59:45.073424+00:00" title="2016-09-01 16:59:45 UTC">on 2016-09-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/49"> #49</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cool, we can easily modify the contents of the note once it is out of embargo September 13th.  I didn&#x27;t understand the publish/publicize differences, learn something new e&#x27;ryday :) .</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cool, we can easily modify the contents of the note once it is out of embargo September 13th.  I didn't understand the publish/publicize differences, learn something new e'ryday :) .</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/50" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lhinds" class="sprite person">Luke Hinds (lhinds)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-15T17:24:06.379360+00:00" title="2016-09-15 17:24:06 UTC">on 2016-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/50"> #50</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>OSSN-0075 released:</p>
<p><a rel="nofollow" href="https://wiki.openstack.org/wiki/OSSN/OSSN-0075">https:/<wbr />/wiki.openstack<wbr />.org/wiki/<wbr />OSSN/OSSN-<wbr />0075</a></p>
<p>Is everyone ok if we make this bug public now?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">OSSN-0075 released:

https://wiki.openstack.org/wiki/OSSN/OSSN-0075

Is everyone ok if we make this bug public now? </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossn: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/51" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-15T17:40:05.670413+00:00" title="2016-09-15 17:40:05 UTC">on 2016-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/51"> #51</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes, ideally it should have been switched to public (and a bug tag of &quot;security&quot; added) prior to distributing the OSSN, so that those reading it could make use of the bug link it contained.</p>
<p>I&#x27;ll go ahead and do that now.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes, ideally it should have been switched to public (and a bug tag of "security" added) prior to distributing the OSSN, so that those reading it could make use of the bug link it contained.

I'll go ahead and do that now.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: security
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2016-09-16 01:37:54 UTC" datetime="2016-09-16T01:37:54.217380+00:00">on 2016-09-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/52" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lhinds" class="sprite person">Luke Hinds (lhinds)</a>
            wrote
            <time itemprop="commentTime" datetime="2016-09-16T06:43:39.974731+00:00" title="2016-09-16 06:43:39 UTC">on 2016-09-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/52"> #52</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Jeremy, I have this noted for next time.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Jeremy, I have this noted for next time. </textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/glance/+bug/1593799/comments/53" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2018-08-17T12:59:42.529472+00:00" title="2018-08-17 12:59:42 UTC">on 2018-08-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/glance/+bug/1593799/comments/53"> #53</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The fix is in Rocky:</p>
<p>spec: <a rel="nofollow" href="https://specs.openstack.org/openstack/glance-specs/specs/rocky/implemented/glance/mitigate-ossn-0075.html">https:/<wbr />/specs.<wbr />openstack.<wbr />org/openstack/<wbr />glance-<wbr />specs/specs/<wbr />rocky/implement<wbr />ed/glance/<wbr />mitigate-<wbr />ossn-0075.<wbr />html</a></p>
<p>code: <a rel="nofollow" href="http://git.openstack.org/cgit/openstack/glance/commit/?h=stable/rocky&amp;id=5cc9d999352c21d3f4b5c39d3ea9d4378ca86544">http://<wbr />git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?h=stable/<wbr />rocky&amp;id=<wbr />5cc9d999352c21d<wbr />3f4b5c39d3ea9d4<wbr />378ca86544</a></p>
<p>docs: <a rel="nofollow" href="http://git.openstack.org/cgit/openstack/glance/commit/?h=stable/rocky&amp;id=23d4e0e9c07f1ff6646e2f6236ee9625abd2a5cb">http://<wbr />git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />glance/<wbr />commit/<wbr />?h=stable/<wbr />rocky&amp;id=<wbr />23d4e0e9c07f1ff<wbr />6646e2f6236ee96<wbr />25abd2a5cb</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The fix is in Rocky:

spec: https://specs.openstack.org/openstack/glance-specs/specs/rocky/implemented/glance/mitigate-ossn-0075.html

code: http://git.openstack.org/cgit/openstack/glance/commit/?h=stable/rocky&amp;id=5cc9d999352c21d3f4b5c39d3ea9d4378ca86544

docs: http://git.openstack.org/cgit/openstack/glance/commit/?h=stable/rocky&amp;id=23d4e0e9c07f1ff6646e2f6236ee9625abd2a5cb
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/glance/+bug/1593799/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/glance/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/glance/+bug/1593799/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/glance/+bug/1593799/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/glance/+bug/1593799/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/glance/+bug/1593799/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/glance/+bug/1593799/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/glance/+bug/1593799/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/glance/+bug/1593799/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/glance/+bug/1593799/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"bug_is_private": false, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1593799", "web_link": "https://bugs.launchpad.net/bugs/1593799", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1593799, "private": false, "information_type": "Public", "name": null, "title": "glance-manage db purge breaks image immutability promise", "description": "Using glance-manage db purge command opens possibility to recycle image-IDs.\n\nWhen the row is deleted from the database the ID is not known by glance anymore and thus it's not unique during the deployment lifecycle. This opens possibility to following scenario:\n\n1) End user boots VM from private/public/shared image.\n2) Image owner deletes the image.\n3) glance-manage db purge gets ran which deletes record that image has ever existed.\n4) Either malicious user or someone unintentionally creates new image with same ID (being same user so having access to the image by owning it or it becoming public/shared(/possbly community at some point))\n5) Same end user boots either snapshot from the original image or nova needs to migrate the VM to another host. Now the user's VM will be rebuilt on top of the new image. Worst case scenario the user had no idea that the image data changed in between.\n\nThis behavior breaks Glance image immutability promise that has bee stated that the data related to image ID that has gone active will never change.\n\nWe have two solutions for this. Either we introduce table to track the deleted image-IDs and get glance to cross check that during the image create or we leave it as is but issue notice/documentation what are the implications if the purge is used transferring the responsibility to the cloud operators.\n\nThis was partially discussed in the virtual glance midcycle meetup so it might not be justified to leave this as private but I wanted to leave that decision to VMT.", "owner_link": "https://bugs.launchpad.net/api/devel/~jokke", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/bug_tasks", "duplicate_of_link": null, "date_created": "2016-06-17T17:13:39.243255+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/subscriptions", "date_last_updated": "2018-08-17T13:00:16.106921+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 18, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/attachments", "security_related": false, "latest_patch_uploaded": null, "tags": ["security"], "date_last_message": "2018-08-17T12:59:42.529472+00:00", "number_of_duplicates": 0, "message_count": 54, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1593799/linked_merge_proposals", "http_etag": "\"e759434ae052a07e9d8137466cb4c6c5cce5da53-92816ff04108f54bdb01fc67461e51083fffa0b0\""}, "total_comments_and_activity": 75, "related_features": {}, "information_type_data": {"PUBLIC": {"is_private": false, "name": "Public", "order": 0, "description": "Everyone can see this information.\n", "value": "PUBLIC", "description_css_class": "choice-description"}, "PRIVATESECURITY": {"is_private": true, "name": "Private Security", "order": 2, "description": "Only the security group can see this information.\n ", "value": "PRIVATESECURITY", "description_css_class": "choice-description"}, "PUBLICSECURITY": {"is_private": false, "name": "Public Security", "order": 1, "description": "Everyone can see this security related information.\n", "value": "PUBLICSECURITY", "description_css_class": "choice-description"}, "USERDATA": {"is_private": true, "name": "Private", "order": 3, "description": "Only shared with users permitted to see private user information.\n", "value": "USERDATA", "description_css_class": "choice-description"}}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1593799", "web_link": "https://bugs.launchpad.net/glance/+bug/1593799", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1593799", "milestone_link": null, "status": "Fix Released", "importance": "Critical", "assignee_link": null, "bug_target_display_name": "Glance", "bug_target_name": "glance", "bug_watch_link": null, "date_assigned": null, "date_created": "2016-06-17T17:13:39.243255+00:00", "date_confirmed": "2016-06-17T20:20:53.768173+00:00", "date_incomplete": null, "date_in_progress": "2018-08-17T13:00:14.201051+00:00", "date_closed": "2018-08-17T13:00:14.201051+00:00", "date_left_new": "2016-06-17T20:20:53.768173+00:00", "date_triaged": "2018-08-17T13:00:14.201051+00:00", "date_fix_committed": "2018-08-17T13:00:14.201051+00:00", "date_fix_released": "2018-08-17T13:00:14.201051+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~jokke", "target_link": "https://bugs.launchpad.net/api/devel/glance", "title": "Bug #1593799 in Glance: \"glance-manage db purge breaks image immutability promise\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/glance/+bug/1593799/related_tasks", "is_complete": true, "http_etag": "\"954d0717e1c6c35e217251b208b0b9f505364549-b04bcc8b7c5df316e2cc976571bb5fbbb739f035\""}, "bugtask_data": {"2091936": {"delete_link": "https://bugs.launchpad.net/ossa/+bug/1593799/+delete", "bug_title": "glance-manage db purge breaks image immutability promise", "user_can_unassign": false, "importance_value": "Undecided", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary2091936", "target_is_product": true, "user_can_edit_milestone": false, "prefix": "ossa", "bugtask_path": "/ossa/+bug/1593799", "id": 2091936, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task2091936", "targetname": "OpenStack Security Advisory", "assignee_is_team": null, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": null, "status_value": "Opinion"}, "2096817": {"delete_link": "https://bugs.launchpad.net/ossn/+bug/1593799/+delete", "bug_title": "glance-manage db purge breaks image immutability promise", "user_can_unassign": false, "importance_value": "High", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary2096817", "target_is_product": true, "user_can_edit_milestone": false, "prefix": "ossn", "bugtask_path": "/ossn/+bug/1593799", "id": 2096817, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task2096817", "targetname": "OpenStack Security Notes", "assignee_is_team": false, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": "travis-mcpeak", "status_value": "Fix Released"}, "2091902": {"delete_link": "https://bugs.launchpad.net/glance/+bug/1593799/+delete", "bug_title": "glance-manage db purge breaks image immutability promise", "user_can_unassign": false, "importance_value": "Critical", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary2091902", "target_is_product": true, "user_can_edit_milestone": false, "prefix": "glance", "bugtask_path": "/glance/+bug/1593799", "id": 2091902, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task2091902", "targetname": "Glance", "assignee_is_team": null, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": null, "status_value": "Fix Released"}}, "subscribers_portlet_url_data": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1593799", "web_link": "https://bugs.launchpad.net/bugs/1593799"}, "initial_comment_batch_offset": 41, "first visible_recent_comment": 13};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 58 queries/external actions issued in 1.61 seconds

    Features: {'app.maintenance_message': None, 'hard_timeout': '9000', 'js.yui_version': None, 'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'baselayout.careers_link.disabled': None, 'bugs.affected_count_includes_dupes.disabled': None, 'visible_render_time': None, 'profiling.enabled': None, 'bugs.nominations.bug_supervisors_can_target': 'on'}

    r0d8de2b

    -->

</html>

