<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>0d1a38b1755efe7ed4e8d7302a24186616bba9b2 - platform/packages/apps/Exchange - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/packages/apps/Exchange/%2B/0d1a38b1755efe7ed4e8d7302a24186616bba9b2">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/packages/">packages</a> / <a class="Breadcrumbs-crumb" href="/platform/packages/apps/">apps</a> / <a class="Breadcrumbs-crumb" href="/platform/packages/apps/Exchange/">Exchange</a> / <span class="Breadcrumbs-crumb">0d1a38b1755efe7ed4e8d7302a24186616bba9b2</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>0d1a38b1755efe7ed4e8d7302a24186616bba9b2</td><td><span>[<a href="/platform/packages/apps/Exchange/+log/0d1a38b1755efe7ed4e8d7302a24186616bba9b2">log</a>]</span> <span>[<a href="/platform/packages/apps/Exchange/+archive/0d1a38b1755efe7ed4e8d7302a24186616bba9b2.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Rohan Shah &lt;shahrk@google.com&gt;</td><td>Wed Feb 10 17:45:52 2016 -0800</td></tr><tr><th class="Metadata-title">committer</th><td>The Android Automerger &lt;android-build@google.com&gt;</td><td>Fri Feb 26 14:34:04 2016 -0800</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/">04197313b544abdc0bdc967a122f2ac594f3e9c8</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2%5E">c687312a075dedd21c1637a102475d3271656eb3</a> <span>[<a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">Patch Exchange Autodiscover Code for Security Issue

The change removes the unauthenticated GET fallback attempt for the
Autodiscover process. Given that the Autodiscover code is functionally broken
and this fallback attempt wouldn&#39;t succeed unless an attacker faked a success
response, a good way to patch the security issue is to disable the attempt.

The change also updates the request content type, disables automatic
redirects, and allows for parsing namespaces to help the first two attempts
succeed. As this is not meant to be a functional patch but a security patch,
there are no further changes to the Autodiscover code.

BUG: 26488455
Change-Id: <a href="https://android-review.googlesource.com/#/q/I0fc93c95e755c8fa60e94da5bec4b3b4c49cdfc1">I0fc93c95e755c8fa60e94da5bec4b3b4c49cdfc1</a>
</pre><ul class="DiffTree"><li><a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/src/com/android/exchange/EasResponse.java">src/com/android/exchange/EasResponse.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2%5E%21/#F0">diff</a>]</span></li><li><a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/src/com/android/exchange/eas/EasAutoDiscover.java">src/com/android/exchange/eas/EasAutoDiscover.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2%5E%21/#F1">diff</a>]</span></li></ul><div class="DiffSummary">2 files changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 04197313b544abdc0bdc967a122f2ac594f3e9c8</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - .classpath"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/.classpath">.classpath</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .project"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/.project">.project</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - AndroidManifest.xml"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/AndroidManifest.xml">AndroidManifest.xml</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - MODULE_LICENSE_APACHE2"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/MODULE_LICENSE_APACHE2">MODULE_LICENSE_APACHE2</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NOTICE"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/NOTICE">NOTICE</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - assets/"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/assets/">assets/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - build/"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/build/">build/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - proguard.flags"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/proguard.flags">proguard.flags</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - res/"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/res/">res/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - src/"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/src/">src/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tests/"><a class="FileList-itemLink" href="/platform/packages/apps/Exchange/+/0d1a38b1755efe7ed4e8d7302a24186616bba9b2/tests/">tests/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>