<!DOCTYPE html>

<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Bitcoin Optech Newsletter #148 | Bitcoin Optech</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Bitcoin Optech Newsletter #148" />
<meta name="author" content="Bitcoin Optech" />
<meta property="og:locale" content="en" />
<meta name="description" content="This week’s newsletter describes a security disclosure affecting protocols depending on a certain BIP125 opt-in replace by fee behavior and includes our regular sections with the summary of a Bitcoin Core PR Review Club meeting, announcements of new software releases and release candidates, and descriptions of notable changes to popular Bitcoin infrastructure software." />
<meta property="og:description" content="This week’s newsletter describes a security disclosure affecting protocols depending on a certain BIP125 opt-in replace by fee behavior and includes our regular sections with the summary of a Bitcoin Core PR Review Club meeting, announcements of new software releases and release candidates, and descriptions of notable changes to popular Bitcoin infrastructure software." />
<link rel="canonical" href="https://bitcoinops.org/en/newsletters/2021/05/12/" />
<meta property="og:url" content="https://bitcoinops.org/en/newsletters/2021/05/12/" />
<meta property="og:site_name" content="Bitcoin Optech" />
<meta property="og:image" content="https://bitcoinops.org/img/logos/optech-notext.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-12T00:00:00+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Bitcoin Optech"},"image":"https://bitcoinops.org/img/logos/optech-notext.png","description":"This week’s newsletter describes a security disclosure affecting protocols depending on a certain BIP125 opt-in replace by fee behavior and includes our regular sections with the summary of a Bitcoin Core PR Review Club meeting, announcements of new software releases and release candidates, and descriptions of notable changes to popular Bitcoin infrastructure software.","headline":"Bitcoin Optech Newsletter #148","dateModified":"2021-05-12T00:00:00+00:00","datePublished":"2021-05-12T00:00:00+00:00","@type":"BlogPosting","url":"https://bitcoinops.org/en/newsletters/2021/05/12/","mainEntityOfPage":{"@type":"WebPage","@id":"https://bitcoinops.org/en/newsletters/2021/05/12/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://bitcoinops.org/feed.xml" title="Bitcoin Optech" /></head>


  <body>
<header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">
      <img src="/img/logos/optech-horiz.png" alt="OpTech Logo">
    </a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/about/">About</a>
            <a class="page-link" href="/en/publications/">Publications</a>
            <a class="page-link" href="/en/topics/">Topics</a>
            <a class="page-link" href="/workshops/">Workshops</a>
            <a class="page-link" href="/en/compatibility/">Compatibility</a>
            <a class="page-link" href="https://dashboard.bitcoinops.org/">Dashboard</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <link rel="stylesheet" href="/assets/css/main.css">

<article class="newsletter">
  <header class="post-header">
    
<div class="localization">
    <a href="/en/newsletters/2021/05/12/">en</a>
    
        
        
        
            | <a href="/ja/newsletters/2021/05/12/">ja</a>
        
    
        
        
        
            | <a href="/translations/" title="No Spanish translation currently available" class="no-translation">es</a>
        
    
</div>
    
    
    <p class="center">/ <a href="/">home</a> / <a href="/en/newsletters/">newsletters</a> / </p>


    <h1 class="post-title">Bitcoin Optech Newsletter #148</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-05-12T00:00:00+00:00">May 12, 2021
      </time>
    </p>
  </header>
  <div class="post-content">
    <p>This week’s newsletter describes a security disclosure affecting
protocols depending on a certain BIP125 opt-in replace by fee behavior
and includes our regular sections with the summary of a Bitcoin Core PR
Review Club meeting, announcements of new software releases and release
candidates, and descriptions of notable changes to popular Bitcoin
infrastructure software.</p>

<h2 id="news">News</h2>

<ul>
  <li id="cve-2021-31876-discrepancy-between-bip125-and-bitcoin-core-implementation" class="anchor-list">
    <p><a href="#cve-2021-31876-discrepancy-between-bip125-and-bitcoin-core-implementation" class="anchor-list-link">●</a> <strong>CVE-2021-31876 discrepancy between BIP125 and Bitcoin Core implementation:</strong>
the <a href="https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki">BIP125</a> specification of opt-in Replace By Fee (<a href="/en/topics/replace-by-fee/">RBF</a>) says that an unconfirmed parent transaction that signals
replaceability makes any child transactions that spend the parent’s
outputs also replaceable through inferred inheritance.  This week,
Antoine Riard <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-May/018893.html">posted</a> to the Bitcoin-Dev
mailing list the full disclosure of his previously privately reported
finding that Bitcoin Core does not implement this behavior.  It is
still possible for child transactions to be replaced if they
explicitly signal replaceability or for them to be evicted from the
mempool if their parent transaction is replaced.</p>

    <p>Riard analyzed how the inability to use inherited replaceability
  might affect various current and proposed protocols.  Only LN
  appears to be affected and only in the sense that an existing attack
  (see <a href="/en/newsletters/2020/04/29/#new-attack-against-ln-payment-atomicity">Newsletter #95</a>) that uses
  <a href="/en/topics/transaction-pinning/">pinning</a> becomes cheaper.  The ongoing
  deployment of <a href="/en/topics/anchor-outputs/">anchor outputs</a> by
  various LN implementations will eliminate the ability to perform that
  pinning.</p>

    <p>As of this writing, there has not been any substantial discussion of
  the issue on the mailing list.</p>
  </li>
  <li id="call-for-brink-grant-applications" class="anchor-list">
    <p><a href="#call-for-brink-grant-applications" class="anchor-list-link">●</a> <strong>Call for Brink grant applications:</strong>
Bitcoin Optech encourages any engineer contributing to open source
Bitcoin or Lightning projects to <a href="https://brink.homerun.co/grants">apply for a Brink grant</a> before the application deadline on May 17th. Initial grants are
one year long and allow developers to work full time on open source projects
from anywhere in the world.</p>
  </li>
</ul>

<h2 id="bitcoin-core-pr-review-club">Bitcoin Core PR Review Club</h2>

<p><em>In this monthly section, we summarize a recent <a href="https://bitcoincore.reviews/">Bitcoin Core PR Review Club</a>
meeting, highlighting some of the important questions and answers.  Click on a
question below to see a summary of the answer from the meeting.</em></p>

<p><a href="https://bitcoincore.reviews/21061">Introduce node rebroadcast module</a> is a PR (<a href="https://github.com/bitcoin/bitcoin/issues/21061">#21061</a>) by Amiti Uttarwar that continues
work on the rebroadcast project (see Newsletters <a href="/en/newsletters/2019/09/18/#bitcoin-core-rebroadcasting-logic">#64</a>,
<a href="/en/newsletters/2020/05/06/#bitcoin-core-18038">#96</a>, <a href="/en/newsletters/2020/12/23/#transaction-origin-privacy">#129</a> and <a href="/en/newsletters/2021/03/31/#will-nodes-with-a-larger-than-default-mempool-retransmit-transactions-that-have-been-dropped-from-smaller-mempools">#142</a>),
previously discussed in review clubs <a href="https://bitcoincore.reviews/16698">#16698</a> and <a href="https://bitcoincore.reviews/18038">#18038</a>, whose goal is to make node
rebroadcast behavior for wallet transactions indistinguishable from that of
other peers’ transactions.</p>

<p>The review club discussion focused on current transaction behavior and the
proposed changes:</p>

<div class="qa_details development">

  <ul>
    <li>
      <details id="why-might-we-want-to-rebroadcast-a-transaction">
        <summary><span>Why might we want to rebroadcast a transaction?</span></summary>
        <p>When our transaction didn’t propagate (perhaps our node was offline) or
 appears to have been dropped by other nodes’ mempools in the network. <a href="https://bitcoincore.reviews/21061#l-39" class="external">➚</a></p>
      </details>
    </li>
    <li>
      <details id="why-does-a-node-drop-a-transaction-from-its-mempool">
        <summary><span>Why does a node drop a transaction from its mempool?</span></summary>
        <p>Apart from being included in a block, a transaction can expire after 14
 days, be squeezed out of a node’s limited mempool size (default size 300
 MiB) by higher-fee transactions, be replaced via <a href="https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki">BIP125</a> opt-in
 Replace-By-Fee (<a href="/en/topics/replace-by-fee/">RBF</a>), be removed if a conflicting transaction
 is included in a block, or be included in a block that is later reorged
 out (in which case the node will try to re-add it while <a href="https://github.com/bitcoin/bitcoin/blob/e175a20769/src/validation.cpp#L357">updating the
 mempool</a> to be consistent again after the reorg). <a href="https://bitcoincore.reviews/21061#l-53" class="external">➚</a></p>
      </details>
    </li>
    <li>
      <details id="what-could-be-an-issue-with-the-current-behavior-of-each-wallet-being-responsible-for-rebroadcasting-its-own-transactions">
        <summary><span>What could be an issue with the current behavior of each wallet being
 responsible for rebroadcasting its own transactions?</span></summary>
        <p>This can be a privacy leak that allows linking the IP address to the
 wallet address, as under the current rebroadcasting behavior, a node that
 broadcasts a transaction more than once is essentially announcing that the
 transaction is from its wallet. <a href="https://bitcoincore.reviews/21061#l-58" class="external">➚</a></p>
      </details>
    </li>
    <li>
      <details id="when-might-a-miner-exclude-a-transaction-that-is-in-our-mempool">
        <summary><span>When might a miner exclude a transaction that is in our mempool?</span></summary>
        <p>When the miner deprioritized it for having a low fee, didn’t see it yet,
 removed it from its mempool by RBF, censored it, or mined an empty block. </p>
      </details>
    </li>
    <li>
      <details id="when-might-a-miner-include-a-transaction-that-is-not-in-our-mempool">
        <summary><span>When might a miner include a transaction that is not in our mempool?</span></summary>
        <p>When the miner manually prioritized the transaction (e.g. as a commercial
 service), received it before our node, or the transaction conflicted with
 another one in our mempool but not in theirs. </p>
      </details>
    </li>
    <li>
      <details id="how-would-the-proposal-under-review-decide-which-transactions-to-rebroadcast">
        <summary><span>How would the proposal under review decide which transactions to
 rebroadcast?</span></summary>
        <p>Once per new block, it proposes to rebroadcast transactions above an
 estimated feerate that are at least 30 minutes old, have been rebroadcast
 no more than 6 times and not more recently than 4 hours ago, with up to
 3/4 of the transactions that fit the block. <a href="https://bitcoincore.reviews/21061#l-63" class="external">➚</a></p>
      </details>
    </li>
    <li>
      <details id="why-might-we-want-to-keep-a-transaction-in-our-rebroadcast-attempt-tracker-even-after-it-has-been-removed-from-our-mempool">
        <summary><span>Why might we want to keep a transaction in our rebroadcast attempt tracker even after
 it has been removed from our mempool?</span></summary>
        <p>After a consensus rule change, there can be non-updated nodes on the
 network rebroadcasting transactions that don’t meet the new consensus
 rules.  Keeping transactions in the rebroadcast attempt tracker would avoid these
 nodes rebroadcasting them too many times (a maximum of 6 times over 90
 days) and allow the transactions to expire. <a href="https://bitcoincore.reviews/21061#l-178" class="external">➚</a></p>
      </details>
    </li>
    <li>
      <details id="when-would-we-remove-a-transaction-from-our-rebroadcast-attempt-tracker">
        <summary><span>When would we remove a transaction from our rebroadcast attempt tracker?</span></summary>
        <p>When the transaction is confirmed, <a href="/en/topics/replace-by-fee/">RBFed</a>, or conflicts with
 another transaction included in a block. <a href="https://bitcoincore.reviews/21061#l-199" class="external">➚</a></p>
      </details>
    </li>
    <li>
      <details id="how-would-the-estimated-minimum-feerate-for-rebroadcast-be-calculated-why-not-use-the-lowest-feerate-in-the-last-mined-block">
        <summary><span>How would the estimated minimum feerate for rebroadcast be calculated?
 Why not use the lowest feerate in the last mined block?</span></summary>
        <p>The rebroadcast feerate floor would be estimated once a minute by
 assembling a block from the mempool to simulate inclusion in the next
 mined block.  This approach is better than using the lowest feerate of the
 last mined block because it calculates fees based on the immediate future
 in a changing environment instead of based on the past. <a href="https://bitcoincore.reviews/21061#l-227" class="external">➚</a></p>
      </details>
    </li>
  </ul>

</div>

<h2 id="releases-and-release-candidates">Releases and release candidates</h2>

<p><em>New releases and release candidates for popular Bitcoin infrastructure
projects.  Please consider upgrading to new releases or helping to test
release candidates.</em></p>

<ul>
  <li id="rust-lightning-0-0-14" class="anchor-list"><a href="#rust-lightning-0-0-14" class="anchor-list-link">●</a> <a href="https://github.com/rust-bitcoin/rust-lightning/releases/tag/v0.0.14">Rust-Lightning 0.0.14</a> is a new release that makes Rust Lightning
more compatible with getting data from Electrum-style servers, adds
additional configuration options, and improves compliance with the LN
specification, among other bug fixes and improvements.</li>
</ul>

<h2 id="notable-code-and-documentation-changes">Notable code and documentation changes</h2>

<p><em>Notable changes this week in <a href="https://github.com/bitcoin/bitcoin">Bitcoin Core</a>,
<a href="https://github.com/ElementsProject/lightning">C-Lightning</a>, <a href="https://github.com/ACINQ/eclair">Eclair</a>, <a href="https://github.com/lightningnetwork/lnd/">LND</a>,
<a href="https://github.com/rust-bitcoin/rust-lightning">Rust-Lightning</a>, <a href="https://github.com/bitcoin-core/secp256k1">libsecp256k1</a>, <a href="https://github.com/bitcoin-core/HWI">Hardware Wallet Interface (HWI)</a>,
<a href="https://github.com/rust-bitcoin/rust-bitcoin">Rust Bitcoin</a>, <a href="https://github.com/btcpayserver/btcpayserver/">BTCPay Server</a>,
<a href="https://github.com/bitcoin/bips/">Bitcoin Improvement Proposals (BIPs)</a>, and <a href="https://github.com/lightningnetwork/lightning-rfc/">Lightning
BOLTs</a>.</em></p>

<ul>
  <li id="bitcoin-core-20867" class="anchor-list">
    <p><a href="#bitcoin-core-20867" class="anchor-list-link">●</a> <a href="https://github.com/bitcoin/bitcoin/issues/20867">Bitcoin Core #20867</a> increases the number of keys that can be included in
multisig <a href="/en/topics/output-script-descriptors/">descriptors</a> and used in the
<code class="highlighter-rouge">addmultisigaddress</code> and <code class="highlighter-rouge">createmultisig</code> RPCs from 16 to 20. The increased
limit can only be used in P2WSH outputs. P2SH outputs are limited to 520
byte scripts which are only large enough to hold 15 compressed public keys.</p>
  </li>
  <li id="bitcoin-core-gui-125" class="anchor-list">
    <p><a href="#bitcoin-core-gui-125" class="anchor-list-link">●</a> <a href="https://github.com/bitcoin-core/gui/issues/125">Bitcoin Core GUI #125</a> enables users to adjust the autoprune block space
size from the default in the intro dialog.  It also adds an improved
description for how the pruned storage works, clarifying that the entire
blockchain must be downloaded and processed but will be discarded in
the future to keep disk usage low.</p>
  </li>
  <li id="c-lightning-4489" class="anchor-list">
    <p><a href="#c-lightning-4489" class="anchor-list-link">●</a> <a href="https://github.com/ElementsProject/lightning/issues/4489">C-Lightning #4489</a> adds a <code class="highlighter-rouge">funder</code> plugin for configuring
<a href="/en/topics/dual-funding/">dual-funding</a> contribution behavior in response to
incoming channel open requests. Users will be able to specify a general
contribution policy (percent match, percent available funds, or fixed
contribution), a wallet reserve amount under which no dual-funding
contributions will happen, a maximum contribution amount for any single
channel open request, and more.</p>

    <p>This PR represents the last step in enabling experimental dual-funding support between
C-Lightning nodes. The interactive transaction construction and channel
establishment v2 protocols arising out of this work is still being
standardized in the open <a href="https://github.com/lightningnetwork/lightning-rfc/issues/851">BOLTs #851</a> PR.</p>
  </li>
  <li id="c-lightning-4496" class="anchor-list">
    <p><a href="#c-lightning-4496" class="anchor-list-link">●</a> <a href="https://github.com/ElementsProject/lightning/issues/4496">C-Lightning #4496</a> adds the ability for plugins to register topics
about which they plan to publish notifications.  Other plugins can
subscribe to those topics to receive notifications.
C-Lightning already had several built-in topics, but this merged PR
allows plugin authors to create and consume notifications for any
new topic category they’d like to use.</p>
  </li>
  <li id="rust-bitcoin-589" class="anchor-list">
    <p><a href="#rust-bitcoin-589" class="anchor-list-link">●</a> <a href="https://github.com/rust-bitcoin/rust-bitcoin/issues/589">Rust Bitcoin #589</a> starts the process of implementing support for <a href="/en/topics/taproot/">taproot</a> with <a href="/en/topics/schnorr-signatures/">schnorr signatures</a>.  The
existing ECDSA support is moved to a new module but continues to be
exported under existing names to preserve API compatibility.  A new
<code class="highlighter-rouge">util::schnorr</code> module adds support for <a href="https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki">BIP340</a> schnorr key
encodings.  Issue <a href="https://github.com/rust-bitcoin/rust-bitcoin/issues/588">#588</a> is being used to track the
complete implementation of taproot compatibility.</p>
  </li>
</ul>


  </div>

<!-- Begin MailChimp Signup Form -->
<link href="/assets/css/mailchimp.css" rel="stylesheet" type="text/css">
<div id="mc_embed_signup">
<form action="https://bitcoinops.us18.list-manage.com/subscribe/post?u=70c3f85e5d13ffec674f30af8&amp;id=adc93c9774" method="post" id="main-mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<label for="mce-EMAIL">Subscribe to our newsletter</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div class="mc-input" aria-hidden="true"><input type="text" name="b_70c3f85e5d13ffec674f30af8_adc93c9774" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Bitcoin Optech</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Bitcoin Optech</li><li><a class="u-email" href="mailto:info@bitcoinops.org">info@bitcoinops.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/bitcoinops"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">bitcoinops</span></a></li><li><a href="https://www.twitter.com/bitcoinoptech"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">bitcoinoptech</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Helping Bitcoin-based businesses integrate scaling technology.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
