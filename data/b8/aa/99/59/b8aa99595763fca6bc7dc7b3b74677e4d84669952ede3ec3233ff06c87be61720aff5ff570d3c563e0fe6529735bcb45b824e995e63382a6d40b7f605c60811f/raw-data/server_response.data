<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/cinder/+bug/1350504/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1350504 “[OSSA 2014-033] GlusterFS driver uses unsafe qcow2...” : Bugs : Cinder</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1350504" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1350504/bug.atom" title="Bug 1350504 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="Concern about this was raised by Duncan Thomas.

The GlusterFS Cinder driver uses &quot;qemu-img info&quot; to guess at whether a volume file is a raw image or a qcow2 image.

This is unsafe because if a user writes a qcow2 header into a volume, Cinder will interpret it as a qcow2-formatted image.   It is believed this can lead to data being extracted from files on the Cinder volume host by writing a qcow2 header with a backing file pointer referencing a path to a file, and then cloning the volume.  (O..." />
      <meta property="og:description" content="Concern about this was raised by Duncan Thomas.

The GlusterFS Cinder driver uses &quot;qemu-img info&quot; to guess at whether a volume file is a raw image or a qcow2 image.

This is unsafe because if a user writes a qcow2 header into a volume, Cinder will interpret it as a qcow2-formatted image.   It is believed this can lead to data being extracted from files on the Cinder volume host by writing a qcow2 header with a backing file pointer referencing a path to a file, and then cloning the volume.  (O..." />
    

    
    
      <meta property="og:title" content="Bug #1350504 “[OSSA 2014-033] GlusterFS driver uses unsafe qcow2...” : Bugs : Cinder" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1350504" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["api", "backup-service", "bugsmash", "documentation", "gate-failure", "grizzly-backport-potential", "havana-backport-potential", "i18n", "icehouse-backport-potential", "icehouse-rc-potential", "low-hanging-fruit", "rootwrap", "security"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/cinder/+bug/1350504/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/cinder"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/448002359/cinder-mascot_64x64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/cinder">Cinder</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/cinder">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/cinder">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/cinder">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/cinder">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/cinder">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/cinder">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    [OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1350504 reported by
      <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney</a>
      <time title="2014-07-30 19:30:20 UTC" datetime="2014-07-30T19:30:20.363163+00:00">on 2014-07-30</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">266</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary1655800">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/cinder/+bug/1350504/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1655800">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/cinder">Cinder</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/cinder/+bug/1350504/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/cinder/+bug/1350504/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1655800">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~eharney">Eric Harney</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/cinder/+milestone/2014.2">Cinder 2014.2 "juno"</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1655800">
     <td colspan="7"><form action="/cinder/+bug/1350504/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/cinder">Cinder</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2014-07-30 19:30:20 UTC" datetime="2014-07-30T19:30:20.363163+00:00">2014-07-30</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2014-08-26 10:23:50 UTC" datetime="2014-08-26T10:23:50.518321+00:00">2014-08-26</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2014-09-23 16:33:10 UTC" datetime="2014-09-23T16:33:10.332114+00:00">2014-09-23</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2014-08-26 10:23:50 UTC" datetime="2014-08-26T10:23:50.518321+00:00">2014-08-26</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2014-10-07 21:42:14 UTC" datetime="2014-10-07T21:42:14.360238+00:00">2014-10-07</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="cinder.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="cinder.target.option.package" name="cinder.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="cinder.target.distribution" name="cinder.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="cinder.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="cinder.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="cinder.target.package"
                         name="cinder.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;cinder.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('cinder.target.package');
              var select_menu = Y.DOM.byId('cinder.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-cinder-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "cinder.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-cinder-target-package", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-cinder-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="cinder.target.option.product" name="cinder.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="cinder" id="cinder.target.product"
                         name="cinder.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;cinder.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('cinder.target.product');
              var select_menu = Y.DOM.byId('cinder.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-cinder-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "cinder.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-cinder-target-product", "selected_value": "cinder", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-cinder-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="cinder.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="cinder.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="cinder.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="cinder.status" name="cinder.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="cinder.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceHIGH">High</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Cinder 2014.2
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="cinder.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="cinder.assignee.assign_to_me" name="cinder.assignee.option" value="cinder.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="cinder.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="cinder.assignee.assigned_to" name="cinder.assignee.option" value="cinder.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="cinder.assignee.assigned_to">
              Eric Harney (eharney)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="cinder.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="cinder.comment_on_change" name="cinder.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1670729">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/cinder/icehouse/+bug/1350504/+editstatus">
        &#8203;
      </a>
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/cinder/icehouse">Icehouse</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/cinder/icehouse/+bug/1350504/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/cinder/icehouse/+bug/1350504/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1670729">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~eharney">Eric Harney</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href="https://launchpad.net/cinder/+milestone/2014.1.3">Cinder 2014.1.3</a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1670729">
     <td colspan="7"><form action="/cinder/icehouse/+bug/1350504/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/cinder/icehouse">Cinder icehouse</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2014-08-26 10:23:26 UTC" datetime="2014-08-26T10:23:26.107039+00:00">2014-08-26</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2014-09-29 07:18:30 UTC" datetime="2014-09-29T07:18:30.216885+00:00">2014-09-29</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2014-09-23 16:33:24 UTC" datetime="2014-09-23T16:33:24.758258+00:00">2014-09-23</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2014-09-29 07:18:30 UTC" datetime="2014-09-29T07:18:30.216885+00:00">2014-09-29</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2014-10-02 23:39:59 UTC" datetime="2014-10-02T23:39:59.319892+00:00">2014-10-02</time>
      </td>
    </tr>
  </table>
  <div class="field">
    
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="cinder_icehouse.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="cinder_icehouse.importance">Importance</label>
        </td>
        <td>
          <label style="font-weight: bold" for="cinder_icehouse.milestone">Milestone</label>
        </td>
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="cinder_icehouse.status" name="cinder_icehouse.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="cinder_icehouse.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceHIGH">High</span>
        </td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          Cinder 2014.1.3
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="cinder_icehouse.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="cinder_icehouse.assignee.assign_to_me" name="cinder_icehouse.assignee.option" value="cinder_icehouse.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="cinder_icehouse.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="cinder_icehouse.assignee.assigned_to" name="cinder_icehouse.assignee.option" value="cinder_icehouse.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="cinder_icehouse.assignee.assigned_to">
              Eric Harney (eharney)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="cinder_icehouse.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="cinder_icehouse.comment_on_change" name="cinder_icehouse.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary1655810">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ossa/+bug/1350504/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary1655810">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ossa/+bug/1350504/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ossa/+bug/1350504/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary1655810">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~tristan-cacqueray">Tristan Cacqueray</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task1655810">
     <td colspan="7"><form action="/ossa/+bug/1350504/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ossa">OpenStack Security Advisory</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2014-07-30 19:44:08 UTC" datetime="2014-07-30T19:44:08.476102+00:00">2014-07-30</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2014-08-04 14:39:45 UTC" datetime="2014-08-04T14:39:45.867043+00:00">2014-08-04</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2014-08-26 14:38:07 UTC" datetime="2014-08-26T14:38:07.850673+00:00">2014-08-26</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2014-09-26 09:37:35 UTC" datetime="2014-09-26T09:37:35.625704+00:00">2014-09-26</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2014-10-02 23:23:11 UTC" datetime="2014-10-02T23:23:11.671251+00:00">2014-10-02</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ossa.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ossa.target.option.package" name="ossa.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ossa.target.distribution" name="ossa.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ossa.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ossa.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ossa.target.package"
                         name="ossa.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.package');
              var select_menu = Y.DOM.byId('ossa.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a package", "vocabulary_filters": [], "input_element": "ossa.target.package", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search by name", "show_widget_id": "show-widget-ossa-target-package", "selected_value": null, "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "DistributionPackage"};
        var show_widget_id = 'show-widget-ossa-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ossa.target.option.product" name="ossa.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ossa" id="ossa.target.product"
                         name="ossa.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.product');
              var select_menu = Y.DOM.byId('ossa.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"remove_person_text": "Remove person", "picker_type": "default", "extra_no_results_message": null, "header": "Select a project", "vocabulary_filters": [], "input_element": "ossa.target.product", "show_remove_button": false, "show_assign_me_button": false, "step_title": "Search", "show_widget_id": "show-widget-ossa-target-product", "selected_value": "ossa", "selected_value_metadata": null, "remove_team_text": "Remove team", "assign_me_text": "Pick me", "show_create_team": false, "vocabulary_name": "Product"};
        var show_widget_id = 'show-widget-ossa-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ossa.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ossa.status" name="ossa.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ossa.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceHIGH">High</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ossa.assignee.assign_to_me" name="ossa.assignee.option" value="ossa.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ossa.assignee.assigned_to" name="ossa.assignee.option" value="ossa.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ossa.assignee.assigned_to">
              Tristan Cacqueray (tristan-cacqueray)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ossa.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ossa.comment_on_change" name="ossa.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/cinder/+bug/1350504/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/cinder/+bug/1350504/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/cinder/+bug/1350504/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>Concern about this was raised by Duncan Thomas.</p>
<p>The GlusterFS Cinder driver uses &quot;qemu-img info&quot; to guess at whether a volume file is a raw image or a qcow2 image.</p>
<p>This is unsafe because if a user writes a qcow2 header into a volume, Cinder will interpret it as a qcow2-formatted image.   It is believed this can lead to data being extracted from files on the Cinder volume host by writing a qcow2 header with a backing file pointer referencing a path to a file, and then cloning the volume.  (Other similar paths may exist.)</p>
<p>To fix this, Cinder needs to track the file format of any file being processed this way and use &quot;qemu-img convert -f &lt;source_format&gt;&quot; when performing operations like volume clone, which disables qemu-img&#x27;s auto format detection.</p>
<p>This seems to affect the GlusterFS driver, but it is possible that other attack vectors exist.  The convert_image() method in cinder/<wbr />image/image_<wbr />utils.py is used in assorted places and does not specify a source format, so other uses of it will need to be examined for safety.</p>
<p>Fixing this in the GlusterFS driver is not simple: since volume/snapshot qcow2 chains are manipulated by Nova as well as Cinder, we will need to have Nova pass information back to Cinder when an operation such as volume_<wbr />snapshot_<wbr />delete is performed, indicating the resulting format of any files modified.</p>
<p>Since the above is a large effort, it may be possible to mitigate this in the short-term by having Cinder enforce some rules about whether a backing file pointer is valid before performing an operation on the file.  For the GlusterFS driver that would be: must start with &#x27;volume-&lt;x&gt;&#x27; and not contain &#x27;/&#x27;, since our valid usage of this only points to another file named volume-&lt;id&gt;.&lt;id&gt; and does not use paths.</p>
<p>This attack hasn&#x27;t yet been demonstrated to work, but this is a commonly known problem when processing qcow2 files.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            
          </span>
          <span id="tag-list">
          </span>
          <a href="+edit" title="Add tags" id="tags-trigger" class="sprite add">Add tags</a>
          
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2014-3641" title="The (1) GlusterFS and (2) Linux Smbfs...">2014-3641</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-07-30T19:45:08.047659+00:00" title="2014-07-30 19:45:08 UTC">on 2014-07-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for the report, the advisory task is in an incomplete state pending feedback from the cinder-coresec team.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for the report, the advisory task is in an incomplete state pending feedback from the cinder-coresec team.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-07-31T14:24:34.012487+00:00" title="2014-07-31 14:24:34 UTC">on 2014-07-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Another way to mitigate this in the short term may be to force volumes to be in qcow2 format.  (glusterfs_<wbr />qcow2_volumes option)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Another way to mitigate this in the short term may be to force volumes to be in qcow2 format.  (glusterfs_qcow2_volumes option)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~duncan-thomas" class="sprite person">Duncan Thomas (duncan-thomas)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-07-31T14:46:24.865490+00:00" title="2014-07-31 14:46:24 UTC">on 2014-07-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Forcing volumes to be qcow2 format always completely removes the issue - migration of old volumes is the issue there.</p>
<p>Validation of the backing chain can&#x27;t just be by path / regex, as one avenue for attack is to use other tenant&#x27;s volumes as backing files, which will have the correct path and name structure.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Forcing volumes to be qcow2 format always completely removes the issue - migration of old volumes is the issue there.

Validation of the backing chain can't just be by path / regex, as one avenue for attack is to use other tenant's volumes as backing files, which will have the correct path and name structure.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-07-31T16:57:57.458384+00:00" title="2014-07-31 16:57:57 UTC">on 2014-07-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>We can have backing chain validation insist that files start with the same volume &amp; uuid filename, which should prevent access to anything outside of the correct data.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">We can have backing chain validation insist that files start with the same volume &amp; uuid filename, which should prevent access to anything outside of the correct data.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-04T14:39:44.652211+00:00" title="2014-08-04 14:39:44 UTC">on 2014-08-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Duncan: my understanding is that you confirm that this is an issue, so we should issue an advisory about this. If not, let us know :)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Duncan: my understanding is that you confirm that this is an issue, so we should issue an advisory about this. If not, let us know :)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Incomplete &#8594; Confirmed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-11T14:25:42.185477+00:00" title="2014-08-11 14:25:42 UTC">on 2014-08-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Eric: do you have any patch you could attach to this (private) bug for review ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Eric: do you have any patch you could attach to this (private) bug for review ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~duncan-thomas" class="sprite person">Duncan Thomas (duncan-thomas)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-11T22:39:31.405436+00:00" title="2014-08-11 22:39:31 UTC">on 2014-08-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes, I confirm this is an issue, and I do believe we should issue an advisory. Looking forward to seeing a fix.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes, I confirm this is an issue, and I do believe we should issue an advisory. Looking forward to seeing a fix.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-21T12:47:12.219066+00:00" title="2014-08-21 12:47:12 UTC">on 2014-08-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Eric said he would look at this in a day or two.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Eric said he would look at this in a day or two.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-25T23:14:57.545483+00:00" title="2014-08-25 23:14:57 UTC">on 2014-08-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4186992/+files/gluster_qcow2_lp1350504.patch">Possible intermediate fix (WIP)</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4186992">Edit</a>
        (7.0 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This is a WIP patch which, I think, mitigates the security issue here.  It disallows any operations on qcow2 files which have unexpected backing file pointers.  If the backing file is not the expected format (based to the path the Gluster share is mounted to and the volume id ) then operations such as clone or delete snapshot will not be allowed.</p>
<p>I was able to reproduce this issue by:<br />
&nbsp;- Create a volume<br />
&nbsp;- Attach to VM<br />
&nbsp;- From within the guest,  write qcow2 header to the volume pointing to /etc/passwd (arbitrary file) as the backing file<br />
&nbsp;- Detach volume<br />
&nbsp;- Clone volume<br />
&nbsp;- Attach the new volume:  data from the host&#x27;s /etc/passwd is seen.</p>
<p>This patch is likely not complete and not all of the changed paths have been tested, but I wanted to float this as an idea for an interim fix to get some feedback, since the proper fix will take some time.  (The patch also still contains two LOG.errors which are just for testing and should be removed, and it needs unit tests.)</p>
<p>Note that this does not prevent a user from corrupting their own data by doing something like writing a qcow2 header that points to a different file in their qcow2 snapshot chain for that volume (which they do have access to).  It should disallow data from any other Cinder volume or file on the c-vol host from being leaked.</p>
<p>(Also TODO: test w/ volume migration since it does strange things with changing volume IDs)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This is a WIP patch which, I think, mitigates the security issue here.  It disallows any operations on qcow2 files which have unexpected backing file pointers.  If the backing file is not the expected format (based to the path the Gluster share is mounted to and the volume id ) then operations such as clone or delete snapshot will not be allowed.

I was able to reproduce this issue by:
 - Create a volume
 - Attach to VM
 - From within the guest,  write qcow2 header to the volume pointing to /etc/passwd (arbitrary file) as the backing file
 - Detach volume
 - Clone volume
 - Attach the new volume:  data from the host's /etc/passwd is seen.

This patch is likely not complete and not all of the changed paths have been tested, but I wanted to float this as an idea for an interim fix to get some feedback, since the proper fix will take some time.  (The patch also still contains two LOG.errors which are just for testing and should be removed, and it needs unit tests.)

Note that this does not prevent a user from corrupting their own data by doing something like writing a qcow2 header that points to a different file in their qcow2 snapshot chain for that volume (which they do have access to).  It should disallow data from any other Cinder volume or file on the c-vol host from being leaked.


(Also TODO: test w/ volume migration since it does strange things with changing volume IDs)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T03:01:09.485716+00:00" title="2014-08-26 03:01:09 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for providing a patch!<br />
I have nominated icehouse and havana series because the affected code is also present in those release.<br />
Can you confirm those versions are also impacted ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for providing a patch!
I have nominated icehouse and havana series because the affected code is also present in those release.
Can you confirm those versions are also impacted ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2014-08-26 10:23:49 UTC" datetime="2014-08-26T10:23:49.515724+00:00">on 2014-08-26</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2014-08-26 14:38:07 UTC" datetime="2014-08-26T14:38:07.189479+00:00">on 2014-08-26</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Tristan Cacqueray (tristan-cacqueray)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~duncan-thomas" class="sprite person">Duncan Thomas (duncan-thomas)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T14:53:46.219698+00:00" title="2014-08-26 14:53:46 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I think the full fix needs to do more than the attached draft path, since that seems to still allow me to access other tenant&#x27;s volumes if I know the uuid of the volume (I&#x27;m only looking at the code, I haven&#x27;t proven it)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I think the full fix needs to do more than the attached draft path, since that seems to still allow me to access other tenant's volumes if I know the uuid of the volume (I'm only looking at the code, I haven't proven it)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T15:09:42.060303+00:00" title="2014-08-26 15:09:42 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Here is impact description draft #1:</p>
<p>Title: Compute host data leak to vm instance with Cinder volume<br />
Reporter: Duncan Thomas (HP)<br />
Products: Cinder<br />
Versions: up to 2013.2.3 and 2014.1 versions up to 2014.1.2</p>
<p>Description:<br />
Duncan Thomas from Hewlett Packard reported a vulnerability in Cinder GlusterFS driver. By overwriting a volume from within an instance with a malicious qcow2 header, an authenticated user may be able to clone and attach that corrupted volume resulting in Cinder leaking an arbitrary file from the compute host to the virtual instance. Note that the host file must be readable by the libvirt/kvm context to be exposed. Only Cinder setups using GlusterFS volume driver are affected.</p>
<p>Some questions:<br />
Does the malicious volume allow write operation as well ?<br />
Is the leaked through libvirt/kvm context ?<br />
Should Eric Harney be added to the reporter list ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Here is impact description draft #1:

Title: Compute host data leak to vm instance with Cinder volume
Reporter: Duncan Thomas (HP)
Products: Cinder
Versions: up to 2013.2.3 and 2014.1 versions up to 2014.1.2

Description:
Duncan Thomas from Hewlett Packard reported a vulnerability in Cinder GlusterFS driver. By overwriting a volume from within an instance with a malicious qcow2 header, an authenticated user may be able to clone and attach that corrupted volume resulting in Cinder leaking an arbitrary file from the compute host to the virtual instance. Note that the host file must be readable by the libvirt/kvm context to be exposed. Only Cinder setups using GlusterFS volume driver are affected.


Some questions:
Does the malicious volume allow write operation as well ?
Is the leaked through libvirt/kvm context ?
Should Eric Harney be added to the reporter list ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T15:14:23.437491+00:00" title="2014-08-26 15:14:23 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Duncan: It&#x27;s checking based on the UUID of the volume being operated on, so I don&#x27;t believe that is possible?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Duncan: It's checking based on the UUID of the volume being operated on, so I don't believe that is possible?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T15:24:58.807212+00:00" title="2014-08-26 15:24:58 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>From the VMT point of view, UUID guessing based attacks are not considered a practical vulnerability...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">From the VMT point of view, UUID guessing based attacks are not considered a practical vulnerability...</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T15:54:17.701723+00:00" title="2014-08-26 15:54:17 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Comments on Tristan&#x27;s description:</p>
<p>I was focusing on Cinder-volume host data leak rather than compute host -- I&#x27;m not sure if a compute host leak is possible yet, but it might be.  (Write the bad header, detach, reattach it w/o any other operations?  I&#x27;ll need to test this.)</p>
<p>The description paragraph there would result in leaking a file on the cinder-volume host, not the compute host.</p>
<p>We also need to note as a workaround that setting glusterfs_<wbr />qcow2_volumes=<wbr />True in cinder.conf prevents this issue for any volumes created after that option is set.  (This is False by default.)</p>
<p><span class="foldable-quoted">&gt; Does the malicious volume allow write operation as well ?<br />
I can&#x27;t currently come up with a way that it would.  This would be possible if you could inject a bad qcow2 header into a snapshot file, but since it&#x27;s only possible for the base volume file, I can&#x27;t think of any sequence of events that would allow this.
</span></p>
<p>We only do two types of writes based on qcow2 backing file headers:<br />
&nbsp;1) commits of snapshot files down to the base volume file or another snapshot file<br />
&nbsp;2) pulls of base volume files up into a snapshot file.</p>
<p><span class="foldable-quoted">&gt; Is the leaked through libvirt/kvm context ?<br />
Need to look at the above scenario about compute host leaks and get more info on this point.<br />
The one I described was in the cinder-volume context, which in most deployments is running as a &quot;cinder&quot; user.
</span></p>
<p><span class="foldable-quoted">&gt; Should Eric Harney be added to the reporter list ?<br />
Probably not, Duncan pointed this out to me elsewhere, I just filed the bug to get things moving.
</span></p>
<p><span class="foldable-quoted">&gt; From the VMT point of view, UUID guessing based attacks are not considered a practical vulnerability...<br />
I don&#x27;t think that even successful UUID guessing would buy you anything with the proposed patch.  It restricts data access to the volume identified by the UUID which you already know and already have access to.
</span></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Comments on Tristan's description:

I was focusing on Cinder-volume host data leak rather than compute host -- I'm not sure if a compute host leak is possible yet, but it might be.  (Write the bad header, detach, reattach it w/o any other operations?  I'll need to test this.)

The description paragraph there would result in leaking a file on the cinder-volume host, not the compute host.

We also need to note as a workaround that setting glusterfs_qcow2_volumes=True in cinder.conf prevents this issue for any volumes created after that option is set.  (This is False by default.)

&gt; Does the malicious volume allow write operation as well ?
I can't currently come up with a way that it would.  This would be possible if you could inject a bad qcow2 header into a snapshot file, but since it's only possible for the base volume file, I can't think of any sequence of events that would allow this.

We only do two types of writes based on qcow2 backing file headers: 
 1) commits of snapshot files down to the base volume file or another snapshot file
 2) pulls of base volume files up into a snapshot file.

&gt; Is the leaked through libvirt/kvm context ?
Need to look at the above scenario about compute host leaks and get more info on this point.
The one I described was in the cinder-volume context, which in most deployments is running as a "cinder" user.

&gt; Should Eric Harney be added to the reporter list ?
Probably not, Duncan pointed this out to me elsewhere, I just filed the bug to get things moving.


&gt; From the VMT point of view, UUID guessing based attacks are not considered a practical vulnerability...
I don't think that even successful UUID guessing would buy you anything with the proposed patch.  It restricts data access to the volume identified by the UUID which you already know and already have access to.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-26T18:08:25.139457+00:00" title="2014-08-26 18:08:25 UTC">on 2014-08-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for the additional details!</p>
<p>Here is impact description draft #2:</p>
<p>Title: Cinder-volume host data leak to vm instance<br />
Reporter: Duncan Thomas (HP)<br />
Products: Cinder<br />
Versions: up to 2013.2.3 and 2014.1 versions up to 2014.1.2</p>
<p>Description:<br />
Duncan Thomas from Hewlett Packard reported a vulnerability in Cinder GlusterFS driver. By overwriting a volume from within an instance with a malicious qcow2 header, an authenticated user may be able to clone and attach that corrupted volume resulting in GlusterFS driver leaking an arbitrary file from the Cinder-volume host to the virtual instance. Note that the host file must be readable by the Cinder context to be exposed. Only Cinder setups using GlusterFS volume driver configured with glusterfs_<wbr />qcow2_volumes=<wbr />False (which is the default) are affected.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for the additional details!

Here is impact description draft #2:

Title: Cinder-volume host data leak to vm instance
Reporter: Duncan Thomas (HP)
Products: Cinder
Versions: up to 2013.2.3 and 2014.1 versions up to 2014.1.2

Description:
Duncan Thomas from Hewlett Packard reported a vulnerability in Cinder GlusterFS driver. By overwriting a volume from within an instance with a malicious qcow2 header, an authenticated user may be able to clone and attach that corrupted volume resulting in GlusterFS driver leaking an arbitrary file from the Cinder-volume host to the virtual instance. Note that the host file must be readable by the Cinder context to be exposed. Only Cinder setups using GlusterFS volume driver configured with glusterfs_qcow2_volumes=False (which is the default) are affected.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-27T08:48:34.948648+00:00" title="2014-08-27 08:48:34 UTC">on 2014-08-27</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Impact desc looks good!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Impact desc looks good!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-28T14:17:18.446910+00:00" title="2014-08-28 14:17:18 UTC">on 2014-08-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The master patch apply cleanly on stable/icehouse, though run_tests.sh produced errors, like:<br />
&nbsp;cinder.<wbr />tests.test_<wbr />glusterfs.<wbr />GlusterFsDriver<wbr />TestCase.<wbr />test_backup_<wbr />snap_failure_<wbr />2<br />
&nbsp;cinder.<wbr />tests.test_<wbr />glusterfs.<wbr />GlusterFsDriver<wbr />TestCase.<wbr />test_backup_<wbr />volume</p>
<p>-&gt; AttributeError: No values given for arguments: volume_id</p>
<p>And the patch does not apply on stable/havana...</p>
<p>@glance-<wbr />coresec/<wbr />@eric: if the master patch looks good to you, any chance you also provide backports for stables in order for VMT to proceed to CVE request ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The master patch apply cleanly on stable/icehouse, though run_tests.sh produced errors, like:
 cinder.tests.test_glusterfs.GlusterFsDriverTestCase.test_backup_snap_failure_2
 cinder.tests.test_glusterfs.GlusterFsDriverTestCase.test_backup_volume

-&gt; AttributeError: No values given for arguments: volume_id


And the patch does not apply on stable/havana...

@glance-coresec/@eric: if the master patch looks good to you, any chance you also provide backports for stables in order for VMT to proceed to CVE request ?

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-08-28T14:42:34.756587+00:00" title="2014-08-28 14:42:34 UTC">on 2014-08-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This patch needs more work.  It fails snapshot-delete operations on a migrated GlusterFS volume because it only checks id and not name_id.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This patch needs more work.  It fails snapshot-delete operations on a migrated GlusterFS volume because it only checks id and not name_id.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-02T22:23:40.814020+00:00" title="2014-09-02 22:23:40 UTC">on 2014-09-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4193665/+files/gluster_qcow2_fix_2.patch">gluster_qcow2_fix_2.patch</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4193665">Edit</a>
        (10.8 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated fix for this issue to address the migrated volume problem.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated fix for this issue to address the migrated volume problem.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-03T13:05:17.877430+00:00" title="2014-09-03 13:05:17 UTC">on 2014-09-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Note that the pending &quot;SMBFS volume driver&quot; [1] uses similar snapshot functionality and may have a similar problem.  It may also conflict w/ this fix.</p>
<p>[1] <a rel="nofollow" href="https://review.openstack.org/#/c/106046/">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/c/<wbr />106046/</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Note that the pending "SMBFS volume driver" [1] uses similar snapshot functionality and may have a similar problem.  It may also conflict w/ this fix.

[1] https://review.openstack.org/#/c/106046/
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-08T14:27:55.067361+00:00" title="2014-09-08 14:27:55 UTC">on 2014-09-08</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Cinder-coresec can someone please have a look at eric proposed patch #20 ?</p>
<p>It seems there is a minor conflict on master when trying to apply it...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Cinder-coresec can someone please have a look at eric proposed patch #20 ?

It seems there is a minor conflict on master when trying to apply it...</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/23" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jsbryant" class="sprite person">Jay Bryant (jsbryant)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-08T21:46:32.248930+00:00" title="2014-09-08 21:46:32 UTC">on 2014-09-08</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/23"> #23</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Looking through Eric&#x27;s proposed patch it seems reasonable to me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Looking through Eric's proposed patch it seems reasonable to me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/24" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-09T21:39:53.903593+00:00" title="2014-09-09 21:39:53 UTC">on 2014-09-09</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/24"> #24</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4199988/+files/Refuse-invalid-qcow2-backing-files_master_5d2cc2f.patch">Refuse-invalid-qcow2-backing-files_master_5d2cc2f.patch</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4199988">Edit</a>
        (12.4 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Update to current master (52cc2f) and protect the smbfs driver as well.</p>
<p>The smbfs driver is currently not vulnerable in the default configuration (using qcow2 by default to avoid this), but raw format can be enabled, which exposes this issue.</p>
<p>I don&#x27;t have a configuration to test the smbfs changes.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Update to current master (52cc2f) and protect the smbfs driver as well.

The smbfs driver is currently not vulnerable in the default configuration (using qcow2 by default to avoid this), but raw format can be enabled, which exposes this issue.

I don't have a configuration to test the smbfs changes.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/25" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~john-griffith" class="sprite person">John Griffith (john-griffith)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-10T17:11:49.638720+00:00" title="2014-09-10 17:11:49 UTC">on 2014-09-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/25"> #25</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>+1 on the add in comment #24</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">+1 on the add in comment #24</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/26" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~duncan-thomas" class="sprite person">Duncan Thomas (duncan-thomas)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-10T17:29:34.842648+00:00" title="2014-09-10 17:29:34 UTC">on 2014-09-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/26"> #26</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Looks like there&#x27;s a merge problem with the patchset in #24, Eric is looking into it</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Looks like there's a merge problem with the patchset in #24, Eric is looking into it</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/27" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-10T22:36:58.874213+00:00" title="2014-09-10 22:36:58 UTC">on 2014-09-10</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/27"> #27</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4200979/+files/Refuse-invalid-qcow2-backing-files-rev2_master_69b4cfd.patch">Refuse-invalid-qcow2-backing-files-rev2_master_69b4cfd.patch</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4200979">Edit</a>
        (13.2 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Revised patch (against master 69b4cfd).</p>
<p>Previous patch would break the smbfs driver because it used the wrong config option.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Revised patch (against master 69b4cfd).

Previous patch would break the smbfs driver because it used the wrong config option.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2014-09-11 12:01:31 UTC" datetime="2014-09-11T12:01:31.615693+00:00">on 2014-09-11</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Triaged
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/28" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~duncan-thomas" class="sprite person">Duncan Thomas (duncan-thomas)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-11T13:39:23.497670+00:00" title="2014-09-11 13:39:23 UTC">on 2014-09-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/28"> #28</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>#27 looks right to me. +2</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">#27 looks right to me. +2</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/29" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-11T15:06:59.259475+00:00" title="2014-09-11 15:06:59 UTC">on 2014-09-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/29"> #29</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks Eric!</p>
<p>The master patch is looking good, tests passed successfully.<br />
Can you please submit backports for Icehouse and Havana too ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks Eric!

The master patch is looking good, tests passed successfully.
Can you please submit backports for Icehouse and Havana too ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/30" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-11T15:34:49.081024+00:00" title="2014-09-11 15:34:49 UTC">on 2014-09-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/30"> #30</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4201558/+files/Refuse-invalid-qcow2-backing-files-rev3_master_69b4cfd.patch">Refuse-invalid-qcow2-backing-files-rev3_master_69b4cfd.patch</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4201558">Edit</a>
        (13.2 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>One-liner update since the wrong exception was being raised from the RemoteFS code.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">One-liner update since the wrong exception was being raised from the RemoteFS code.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/31" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petrutlucian94" class="sprite person">Lucian Petrut (petrutlucian94)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-12T11:47:18.884463+00:00" title="2014-09-12 11:47:18 UTC">on 2014-09-12</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/31"> #31</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Can you please change this in the Windows SMB driver as well? The only thing that needs to be done is updating the _qemu_img_info method, adding the volume_name parameter defaulting to None, so that this patch won&#x27;t break it.</p>
<p><a rel="nofollow" href="https://github.com/openstack/cinder/blob/master/cinder/volume/drivers/windows/smbfs.py#L138">https:/<wbr />/github.<wbr />com/openstack/<wbr />cinder/<wbr />blob/master/<wbr />cinder/<wbr />volume/<wbr />drivers/<wbr />windows/<wbr />smbfs.py#<wbr />L138</a></p>
<p>The idea is that this driver does not use qemu-img actually (among others, it can not open in-use images on Windows, so it&#x27;s using the Win32 API instead ATM) so the method is there for consistency.</p>
<p>Note that for the moment, only vhd/vhdx images are supported by this driver, so it is not exposed to the above mentioned security issue.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Can you please change this in the Windows SMB driver as well? The only thing that needs to be done is updating the _qemu_img_info method, adding the volume_name parameter defaulting to None, so that this patch won't break it.

https://github.com/openstack/cinder/blob/master/cinder/volume/drivers/windows/smbfs.py#L138

The idea is that this driver does not use qemu-img actually (among others, it can not open in-use images on Windows, so it's using the Win32 API instead ATM) so the method is there for consistency.

Note that for the moment, only vhd/vhdx images are supported by this driver, so it is not exposed to the above mentioned security issue.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/32" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-15T13:45:15.044474+00:00" title="2014-09-15 13:45:15 UTC">on 2014-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/32"> #32</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@cinder-coresec Should I add in the impact description:<br />
&nbsp;&nbsp;&quot;Cinder setups using Smbsf with raw format enabled (not default) is also affected&quot;    ?</p>
<p>Comment #24 says smbfs is affected, but comment #31 suggest it is not...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@cinder-coresec Should I add in the impact description: 
  "Cinder setups using Smbsf with raw format enabled (not default) is also affected"    ?

Comment #24 says smbfs is affected, but comment #31 suggest it is not...</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/33" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petrutlucian94" class="sprite person">Lucian Petrut (petrutlucian94)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-15T14:12:50.526540+00:00" title="2014-09-15 14:12:50 UTC">on 2014-09-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/33"> #33</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Tristan Cacqueray Actually, there are two smbfs drivers. The one supposed to run on Windows is the one that&#x27;s not affected by the bug, but will be affected by the fix. Without the change I&#x27;ve mentioned above (which is just about one LOC), the driver will be broken.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Tristan Cacqueray Actually, there are two smbfs drivers. The one supposed to run on Windows is the one that's not affected by the bug, but will be affected by the fix. Without the change I've mentioned above (which is just about one LOC), the driver will be broken.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2014-09-16 05:17:48 UTC" datetime="2014-09-16T05:17:48.274043+00:00">on 2014-09-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - GlusterFS driver uses unsafe qcow2 format detection<br />+ GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2014-09-22 14:30:59 UTC" datetime="2014-09-22T14:30:59.375330+00:00">on 2014-09-22</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>no longer affects</b>:
      </td>
      <td>
        cinder/havana
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        none &#8594; juno-rc1
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/34" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-22T18:21:49.245457+00:00" title="2014-09-22 18:21:49 UTC">on 2014-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/34">
                <strong>Re: GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/34"> #34</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Neutron-coresec : can you please review the patch submitted in #30. It still applies and pass unit-tests here.</p>
<p>We also need a stable/icehouse backport to progress on this bug (note that stable/havana is not necessary anymore). Some adjustments need to be done for smbfs.</p>
<p>Note that stable/havana is not required anymore as it reached EOL.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Neutron-coresec : can you please review the patch submitted in #30. It still applies and pass unit-tests here.

We also need a stable/icehouse backport to progress on this bug (note that stable/havana is not necessary anymore). Some adjustments need to be done for smbfs.

Note that stable/havana is not required anymore as it reached EOL.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/35" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~duncan-thomas" class="sprite person">Duncan Thomas (duncan-thomas)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-22T18:40:37.496473+00:00" title="2014-09-22 18:40:37 UTC">on 2014-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/35"> #35</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I think you meant @cinder-coresec there.</p>
<p>The fix in #30 looks good from a security point of view.</p>
<p>I think Petrut is correct in requiring his patch to be applied too to stop the windows driver being broken, though I can&#x27;t test it.</p>
<p>The linux smb driver is affected, but is fixed by Eric&#x27;s patch.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I think you meant @cinder-coresec there.

The fix in #30 looks good from a security point of view. 

I think Petrut is correct in requiring his patch to be applied too to stop the windows driver being broken, though I can't test it.

The linux smb driver is affected, but is fixed by Eric's patch.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/36" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~john-griffith" class="sprite person">John Griffith (john-griffith)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-22T18:51:27.633000+00:00" title="2014-09-22 18:51:27 UTC">on 2014-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/36"> #36</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Sorry I let this sit so long.  First glance it looks good, but I&#x27;d like to spend some time later today looking more closely.  I&#x27;ll update in a few hours.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Sorry I let this sit so long.  First glance it looks good, but I'd like to spend some time later today looking more closely.  I'll update in a few hours.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/37" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-22T19:45:33.388403+00:00" title="2014-09-22 19:45:33 UTC">on 2014-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/37"> #37</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Duncan oups, cinder-coresec indeed :)</p>
<p>Thank you for the review and the clarification on smbfs driver!<br />
Here is the updated impact description:</p>
<p>Title: Cinder-volume host data leak to vm instance<br />
Reporter: Duncan Thomas (HP)<br />
Products: Cinder<br />
Versions: up to 2014.1.2</p>
<p>Description:<br />
Duncan Thomas from Hewlett Packard reported a vulnerability in Cinder GlusterFS and Linux Smbfs driver. By overwriting a volume from within an instance with a malicious qcow2 header, an authenticated user may be able to clone and attach that corrupted volume resulting in affected drivers leaking an arbitrary file from the Cinder-volume host to the virtual instance. Note that the host file must be readable by the Cinder context to be exposed. Only Cinder setups using GlusterFS volume driver configured with glusterfs_<wbr />qcow2_volumes=<wbr />False (which is the default) or Cinder setups using Smbfs volume driver configured with smbfs_default_<wbr />volume_<wbr />format=<wbr />raw (which is not the default) are affected.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Duncan oups, cinder-coresec indeed :)

Thank you for the review and the clarification on smbfs driver!
Here is the updated impact description:

Title: Cinder-volume host data leak to vm instance
Reporter: Duncan Thomas (HP)
Products: Cinder
Versions: up to 2014.1.2

Description:
Duncan Thomas from Hewlett Packard reported a vulnerability in Cinder GlusterFS and Linux Smbfs driver. By overwriting a volume from within an instance with a malicious qcow2 header, an authenticated user may be able to clone and attach that corrupted volume resulting in affected drivers leaking an arbitrary file from the Cinder-volume host to the virtual instance. Note that the host file must be readable by the Cinder context to be exposed. Only Cinder setups using GlusterFS volume driver configured with glusterfs_qcow2_volumes=False (which is the default) or Cinder setups using Smbfs volume driver configured with smbfs_default_volume_format=raw (which is not the default) are affected.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/38" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-22T19:54:39.715752+00:00" title="2014-09-22 19:54:39 UTC">on 2014-09-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/38"> #38</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Tristan&#x27;s updated impact description in comment #37 looks good.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Tristan's updated impact description in comment #37 looks good.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/39" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~john-griffith" class="sprite person">John Griffith (john-griffith)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-23T13:27:39.056034+00:00" title="2014-09-23 13:27:39 UTC">on 2014-09-23</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/39"> #39</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Tristans description as well as Eric&#x27;s patch LGTM, +1 on both</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Tristans description as well as Eric's patch LGTM, +1 on both</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~john-griffith" class="sprite person">John Griffith (john-griffith)</a>
    
    <time title="2014-09-23 16:33:09 UTC" datetime="2014-09-23T16:33:09.618059+00:00">on 2014-09-23</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Eric Harney (eharney)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/40" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-24T17:14:13.044602+00:00" title="2014-09-24 17:14:13 UTC">on 2014-09-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/40"> #40</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4213809/+files/Refuse-invalid-qcow2-backing-files_icehouse.patch">icehouse patch</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4213809">Edit</a>
        (9.9 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/41" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-24T18:37:29.021975+00:00" title="2014-09-24 18:37:29 UTC">on 2014-09-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/41"> #41</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Icehouse patch in comment #40 is looking good to me, beside these pep8 errors:<br />
cinder/<wbr />volume/<wbr />drivers/<wbr />glusterfs.<wbr />py:177:<wbr />5: E303 too many blank lines (2)<br />
cinder/<wbr />volume/<wbr />drivers/<wbr />glusterfs.<wbr />py:636:<wbr />80: E501 line too long (80 &gt; 79 characters)<br />
cinder/<wbr />volume/<wbr />drivers/<wbr />glusterfs.<wbr />py:658:<wbr />80: E501 line too long (80 &gt; 79 characters)<br />
cinder/<wbr />volume/<wbr />drivers/<wbr />glusterfs.<wbr />py:755:<wbr />80: E501 line too long (85 &gt; 79 characters)</p>
<p>Can a cinder-coresec please approve this backport ? We can eventually hope for a disclosure date next week.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Icehouse patch in comment #40 is looking good to me, beside these pep8 errors:
cinder/volume/drivers/glusterfs.py:177:5: E303 too many blank lines (2)
cinder/volume/drivers/glusterfs.py:636:80: E501 line too long (80 &gt; 79 characters)
cinder/volume/drivers/glusterfs.py:658:80: E501 line too long (80 &gt; 79 characters)
cinder/volume/drivers/glusterfs.py:755:80: E501 line too long (85 &gt; 79 characters)

Can a cinder-coresec please approve this backport ? We can eventually hope for a disclosure date next week.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/42" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-24T19:18:29.757504+00:00" title="2014-09-24 19:18:29 UTC">on 2014-09-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/42"> #42</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4213970/+files/Refuse-invalid-qcow2-backing-files_icehouse_rev2.patch">icehouse patch rev2</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4213970">Edit</a>
        (9.8 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Oops, fix pep8 issues for icehouse patch.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Oops, fix pep8 issues for icehouse patch.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/43" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jsbryant" class="sprite person">Jay Bryant (jsbryant)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-24T20:24:44.716038+00:00" title="2014-09-24 20:24:44 UTC">on 2014-09-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/43"> #43</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I am ok with this as a stop-gap solution and Eric&#x27;s code looks good to me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I am ok with this as a stop-gap solution and Eric's code looks good to me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/44" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-25T13:44:00.934870+00:00" title="2014-09-25 13:44:00 UTC">on 2014-09-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/44"> #44</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Let&#x27;s not tie it to the RC process, but try to include it in final</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Let's not tie it to the RC process, but try to include it in final</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        juno-rc1 &#8594; none
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/45" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~john-griffith" class="sprite person">John Griffith (john-griffith)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-25T16:49:39.551179+00:00" title="2014-09-25 16:49:39 UTC">on 2014-09-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/45"> #45</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Thierry<br />
I have no objection to that, however I would like to land it ASAP and then figure out if we need to make changes to the Windows SMB driver as a result before final release.  Honestly today vs Monday doesn&#x27;t matter we can certainly take our chances but I just don&#x27;t want it to sit much longer if we can help it.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Thierry
I have no objection to that, however I would like to land it ASAP and then figure out if we need to make changes to the Windows SMB driver as a result before final release.  Honestly today vs Monday doesn't matter we can certainly take our chances but I just don't want it to sit much longer if we can help it.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/46" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-26T09:36:59.939057+00:00" title="2014-09-26 09:36:59 UTC">on 2014-09-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/46"> #46</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Sure, definitely land it in RC1 if you can ! The issue being, this issue being embargoed we&#x27;ll need to give some advance notice, so RC1 would be artificially delayed by ~ 5 days... so I&#x27;d prefer we don&#x27;t block on it.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Sure, definitely land it in RC1 if you can ! The issue being, this issue being embargoed we'll need to give some advance notice, so RC1 would be artificially delayed by ~ 5 days... so I'd prefer we don't block on it.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Triaged &#8594; In Progress
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/47" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-26T09:37:49.649791+00:00" title="2014-09-26 09:37:49 UTC">on 2014-09-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/47"> #47</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I think this is ready for pre-OSSA</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I think this is ready for pre-OSSA</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2014-09-29 15:11:37 UTC" datetime="2014-09-29T15:11:37.092023+00:00">on 2014-09-29</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/48" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-29T19:04:43.952473+00:00" title="2014-09-29 19:04:43 UTC">on 2014-09-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/48"> #48</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The advance notification (pre-OSSA) have been sent with a disclosure date set to:<br />
2014-10-02, 1500UTC</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The advance notification (pre-OSSA) have been sent with a disclosure date set to:
2014-10-02, 1500UTC</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/49" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petrutlucian94" class="sprite person">Lucian Petrut (petrutlucian94)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-30T09:09:59.839095+00:00" title="2014-09-30 09:09:59 UTC">on 2014-09-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/49"> #49</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4220040/+files/Windows-SMBFS-Handle-volume_name-in-_qemu_img_info.patch">Windows-SMBFS-Handle-volume_name-in-_qemu_img_info.patch</a>
        <a class="sprite edit action-icon" href="/cinder/+bug/1350504/+attachment/4220040">Edit</a>
        (1.4 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;ve attached the one liner patch that needs to be applied so that the previous patch does not break the Windows SMBFS driver.</p>
<p>I&#x27;ve tested the SMBFS drivers with the 2 patches applied having no issues.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I've attached the one liner patch that needs to be applied so that the previous patch does not break the Windows SMBFS driver.

I've tested the SMBFS drivers with the 2 patches applied having no issues.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/50" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-30T14:24:38.671074+00:00" title="2014-09-30 14:24:38 UTC">on 2014-09-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/50"> #50</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@cinder-coresec: can you please review that very last fix ? Unit tests are running fine with and without it...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@cinder-coresec: can you please review that very last fix ? Unit tests are running fine with and without it...</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/51" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-30T14:49:50.133435+00:00" title="2014-09-30 14:49:50 UTC">on 2014-09-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/51"> #51</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Can someone confirm &quot;Windows-<wbr />SMBFS-Handle-<wbr />volume_<wbr />name-in-<wbr />_qemu_img_<wbr />info.patch&quot; is really effective ?</p>
<p>Applied on master after &quot;Refuse-<wbr />invalid-<wbr />qcow2-backing-<wbr />files-rev3_<wbr />master_<wbr />69b4cfd.<wbr />patch&quot; it only adds &quot;volume_name=None&quot;  parameter to _qemu_img_info() that seems unused (either by caller or in the function body)...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Can someone confirm "Windows-SMBFS-Handle-volume_name-in-_qemu_img_info.patch" is really effective ?

Applied on master after "Refuse-invalid-qcow2-backing-files-rev3_master_69b4cfd.patch" it only adds "volume_name=None"  parameter to _qemu_img_info() that seems unused (either by caller or in the function body)...</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/52" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-30T15:00:04.860836+00:00" title="2014-09-30 15:00:04 UTC">on 2014-09-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/52"> #52</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Tristan:<br />
That patch isn&#x27;t part of the security fix proper.  It is something we should land after the security patch goes in to prevent the Windows driver from breaking.  It should be considered separate from this bug at this point.</p>
<p>(Note: I&#x27;ve looked at this issue a bit previously but haven&#x27;t analyzed Petrut&#x27;s patch in detail.)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Tristan:
That patch isn't part of the security fix proper.  It is something we should land after the security patch goes in to prevent the Windows driver from breaking.  It should be considered separate from this bug at this point.

(Note: I've looked at this issue a bit previously but haven't analyzed Petrut's patch in detail.)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/53" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petrutlucian94" class="sprite person">Lucian Petrut (petrutlucian94)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-30T15:37:23.871099+00:00" title="2014-09-30 15:37:23 UTC">on 2014-09-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/53"> #53</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Tristan:</p>
<p>Here&#x27;s a trace, showing up why that is required:<br />
<a rel="nofollow" href="http://paste.openstack.org/show/117171/">http://<wbr />paste.openstack<wbr />.org/show/<wbr />117171/</a></p>
<p>The idea is that the methods from the base class will now pass one extra argument, namely volume_name, and even if that method ignores it (because of the reasons I&#x27;ve mentioned earlier), it must accept it, otherwise that will raise the exception from the above trace.</p>
<p>As I&#x27;ve said, it&#x27;s just a one liner but keeps the driver from breaking after this security fix is applied.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Tristan:

Here's a trace, showing up why that is required:
http://paste.openstack.org/show/117171/

The idea is that the methods from the base class will now pass one extra argument, namely volume_name, and even if that method ignores it (because of the reasons I've mentioned earlier), it must accept it, otherwise that will raise the exception from the above trace. 

As I've said, it's just a one liner but keeps the driver from breaking after this security fix is applied.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/54" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-09-30T18:50:12.170985+00:00" title="2014-09-30 18:50:12 UTC">on 2014-09-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/54"> #54</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for the clarification. I&#x27;m amending this last fix to the pre-OSSA as stakeholder might be impacted by this error after applying the security patch.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for the clarification. I'm amending this last fix to the pre-OSSA as stakeholder might be impacted by this error after applying the security patch.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2014-10-02 15:01:10 UTC" datetime="2014-10-02T15:01:10.727373+00:00">on 2014-10-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/55" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T15:07:27.156260+00:00" title="2014-10-02 15:07:27 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/55">
                <strong>Fix proposed to cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/55"> #55</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: master<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125665">https:/<wbr />/review.<wbr />openstack.<wbr />org/125665</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: master
Review: https://review.openstack.org/125665</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/56" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T15:07:33.771199+00:00" title="2014-10-02 15:07:33 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/56">
                <strong>Related fix proposed to cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/56"> #56</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: master<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125666">https:/<wbr />/review.<wbr />openstack.<wbr />org/125666</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: master
Review: https://review.openstack.org/125666</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/57" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T15:09:15.425348+00:00" title="2014-10-02 15:09:15 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/57">
                <strong>Fix proposed to cinder (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/57"> #57</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/icehouse<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125667">https:/<wbr />/review.<wbr />openstack.<wbr />org/125667</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/125667</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2014-10-02 15:10:29 UTC" datetime="2014-10-02T15:10:29.128310+00:00">on 2014-10-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)<br />+ [OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection<br />+ (CVE-2014-3641)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/58" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T15:25:25.187631+00:00" title="2014-10-02 15:25:25 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/58">
                <strong>Fix proposed to cinder (proposed/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/58"> #58</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: proposed/juno<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125671">https:/<wbr />/review.<wbr />openstack.<wbr />org/125671</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: proposed/juno
Review: https://review.openstack.org/125671</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/59" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T15:25:31.469829+00:00" title="2014-10-02 15:25:31 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/59">
                <strong>Related fix proposed to cinder (proposed/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/59"> #59</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: proposed/juno<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125672">https:/<wbr />/review.<wbr />openstack.<wbr />org/125672</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: proposed/juno
Review: https://review.openstack.org/125672</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/60" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T17:11:53.754534+00:00" title="2014-10-02 17:11:53 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/60">
                <strong>Fix proposed to cinder (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/60"> #60</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/icehouse<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125710">https:/<wbr />/review.<wbr />openstack.<wbr />org/125710</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/icehouse
Review: https://review.openstack.org/125710</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/61" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T17:12:13.326871+00:00" title="2014-10-02 17:12:13 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/61">
                <strong>Change abandoned on cinder (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/61"> #61</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Change abandoned by Eric Harney (&lt;email address hidden&gt;) on branch: stable/icehouse<br />
Review: <a rel="nofollow" href="https://review.openstack.org/125667">https:/<wbr />/review.<wbr />openstack.<wbr />org/125667</a><br />
Reason: Moved to <a rel="nofollow" href="https://review.openstack.org/#/c/125710/">https:/<wbr />/review.<wbr />openstack.<wbr />org/#/c/<wbr />125710/</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Change abandoned by Eric Harney (eharney@redhat.com) on branch: stable/icehouse
Review: https://review.openstack.org/125667
Reason: Moved to https://review.openstack.org/#/c/125710/</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/62" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T21:44:27.312195+00:00" title="2014-10-02 21:44:27 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/62">
                <strong>Fix merged to cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/62"> #62</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/125665">https:/<wbr />/review.<wbr />openstack.<wbr />org/125665</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/cinder/commit/?id=dca3c8323cf8cf12aa8ce4ba21f647ce631e8153">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />cinder/<wbr />commit/<wbr />?id=dca3c8323cf<wbr />8cf12aa8ce4ba21<wbr />f647ce631e8153</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit dca3c8323cf8cf1<wbr />2aa8ce4ba21f647<wbr />ce631e8153<br />
Author: Eric Harney &lt;email address hidden&gt;<br />
Date:   Tue Sep 9 16:20:24 2014 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Refuse invalid qcow2 backing files</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Don&#x27;t allow qcow2 files that are pointing to backing files outside of:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;volume-&lt;id&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;volume-<wbr />&lt;id&gt;.&lt;snap-<wbr />id&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;volume-<wbr />&lt;id&gt;.tmp-<wbr />snap-&lt;snap-<wbr />id&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;(optionally prefixed with /mnt/path)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1350504</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ic89cffc93940b7<wbr />b119cfcde3362f3<wbr />04c9f2875df</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/125665
Committed: https://git.openstack.org/cgit/openstack/cinder/commit/?id=dca3c8323cf8cf12aa8ce4ba21f647ce631e8153
Submitter: Jenkins
Branch:    master

commit dca3c8323cf8cf12aa8ce4ba21f647ce631e8153
Author: Eric Harney &lt;eharney@redhat.com&gt;
Date:   Tue Sep 9 16:20:24 2014 -0400

    Refuse invalid qcow2 backing files
    
    Don't allow qcow2 files that are pointing to backing files outside of:
    
    volume-&lt;id&gt;
    volume-&lt;id&gt;.&lt;snap-id&gt;
    volume-&lt;id&gt;.tmp-snap-&lt;snap-id&gt;
    
    (optionally prefixed with /mnt/path)
    
    Closes-Bug: #1350504
    
    Change-Id: Ic89cffc93940b7b119cfcde3362f304c9f2875df
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Committed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/63" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-02T22:40:35.265328+00:00" title="2014-10-02 22:40:35 UTC">on 2014-10-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/63">
                <strong>Fix merged to cinder (stable/icehouse)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/63"> #63</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/125710">https:/<wbr />/review.<wbr />openstack.<wbr />org/125710</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/cinder/commit/?id=7eef59602206b529d7acdcbe8055d0d0d63d0d85">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />cinder/<wbr />commit/<wbr />?id=7eef5960220<wbr />6b529d7acdcbe80<wbr />55d0d0d63d0d85</a><br />
Submitter: Jenkins<br />
Branch:    stable/icehouse</p>
<p>commit 7eef59602206b52<wbr />9d7acdcbe8055d0<wbr />d0d63d0d85<br />
Author: Eric Harney &lt;email address hidden&gt;<br />
Date:   Wed Sep 24 15:13:15 2014 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Refuse invalid qcow2 backing files</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Don&#x27;t allow qcow2 files that are pointing to backing files outside of:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;volume-&lt;id&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;volume-<wbr />&lt;id&gt;.&lt;snap-<wbr />id&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;volume-<wbr />&lt;id&gt;.tmp-<wbr />snap-&lt;snap-<wbr />id&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;(optionally prefixed with /mnt/path)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1350504</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ic89cffc93940b7<wbr />b119cfcde3362f3<wbr />04c9f2875df</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/125710
Committed: https://git.openstack.org/cgit/openstack/cinder/commit/?id=7eef59602206b529d7acdcbe8055d0d0d63d0d85
Submitter: Jenkins
Branch:    stable/icehouse

commit 7eef59602206b529d7acdcbe8055d0d0d63d0d85
Author: Eric Harney &lt;eharney@redhat.com&gt;
Date:   Wed Sep 24 15:13:15 2014 -0400

    Refuse invalid qcow2 backing files
    
    Don't allow qcow2 files that are pointing to backing files outside of:
    
    volume-&lt;id&gt;
    volume-&lt;id&gt;.&lt;snap-id&gt;
    volume-&lt;id&gt;.tmp-snap-&lt;snap-id&gt;
    
    (optionally prefixed with /mnt/path)
    
    Closes-Bug: #1350504
    
    Change-Id: Ic89cffc93940b7b119cfcde3362f304c9f2875df
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~tristan-cacqueray" class="sprite person">Tristan Cacqueray (tristan-cacqueray)</a>
    
    <time title="2014-10-02 23:23:11 UTC" datetime="2014-10-02T23:23:11.031391+00:00">on 2014-10-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/64" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-03T01:00:53.101964+00:00" title="2014-10-03 01:00:53 UTC">on 2014-10-03</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/64">
                <strong>Related fix merged to cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/64"> #64</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/125666">https:/<wbr />/review.<wbr />openstack.<wbr />org/125666</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/cinder/commit/?id=5e0ce63d6df39dcad5a0ef35553369e49c67dfb8">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />cinder/<wbr />commit/<wbr />?id=5e0ce63d6df<wbr />39dcad5a0ef3555<wbr />3369e49c67dfb8</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit 5e0ce63d6df39dc<wbr />ad5a0ef35553369<wbr />e49c67dfb8<br />
Author: Lucian Petrut &lt;email address hidden&gt;<br />
Date:   Tue Sep 30 11:58:22 2014 +0300</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Windows SMBFS: Handle volume_name in _qemu_img_info</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;The volume_name is now parsed to the _qemu_img_info wrapper. As<br />
&nbsp;&nbsp;&nbsp;&nbsp;this method is not prone to security issues because this driver<br />
&nbsp;&nbsp;&nbsp;&nbsp;does not support raw images (at least not yet), we don&#x27;t have to<br />
&nbsp;&nbsp;&nbsp;&nbsp;perform any checks on the backing image file path.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Thus, this method simply ignores this argument that will be parsed<br />
&nbsp;&nbsp;&nbsp;&nbsp;by the base class methods.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #1350504</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I801a6338250ec2<wbr />dc631c4058543f7<wbr />d0088b3e4d4</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/125666
Committed: https://git.openstack.org/cgit/openstack/cinder/commit/?id=5e0ce63d6df39dcad5a0ef35553369e49c67dfb8
Submitter: Jenkins
Branch:    master

commit 5e0ce63d6df39dcad5a0ef35553369e49c67dfb8
Author: Lucian Petrut &lt;lpetrut@cloudbasesolutions.com&gt;
Date:   Tue Sep 30 11:58:22 2014 +0300

    Windows SMBFS: Handle volume_name in _qemu_img_info
    
    The volume_name is now parsed to the _qemu_img_info wrapper. As
    this method is not prone to security issues because this driver
    does not support raw images (at least not yet), we don't have to
    perform any checks on the backing image file path.
    
    Thus, this method simply ignores this argument that will be parsed
    by the base class methods.
    
    Related-Bug: #1350504
    
    Change-Id: I801a6338250ec2dc631c4058543f7d0088b3e4d4
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2014-10-07 16:25:20 UTC" datetime="2014-10-07T16:25:20.393529+00:00">on 2014-10-07</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        none &#8594; juno-rc2
      </td>
    </tr>
  
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>no longer affects</b>:
      </td>
      <td>
        cinder/juno
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/65" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-07T21:42:17.112231+00:00" title="2014-10-07 21:42:17 UTC">on 2014-10-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/65">
                <strong>Fix merged to cinder (proposed/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/65"> #65</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/125671">https:/<wbr />/review.<wbr />openstack.<wbr />org/125671</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/cinder/commit/?id=608ecf565f99b9840095ecff424e396c4bae631a">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />cinder/<wbr />commit/<wbr />?id=608ecf565f9<wbr />9b9840095ecff42<wbr />4e396c4bae631a</a><br />
Submitter: Jenkins<br />
Branch:    proposed/juno</p>
<p>commit 608ecf565f99b98<wbr />40095ecff424e39<wbr />6c4bae631a<br />
Author: Eric Harney &lt;email address hidden&gt;<br />
Date:   Tue Sep 9 16:20:24 2014 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Refuse invalid qcow2 backing files</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Don&#x27;t allow qcow2 files that are pointing to backing files outside of:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;volume-&lt;id&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;volume-<wbr />&lt;id&gt;.&lt;snap-<wbr />id&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;volume-<wbr />&lt;id&gt;.tmp-<wbr />snap-&lt;snap-<wbr />id&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;(optionally prefixed with /mnt/path)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1350504</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ic89cffc93940b7<wbr />b119cfcde3362f3<wbr />04c9f2875df<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit dca3c8323cf8cf1<wbr />2aa8ce4ba21f647<wbr />ce631e8153)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/125671
Committed: https://git.openstack.org/cgit/openstack/cinder/commit/?id=608ecf565f99b9840095ecff424e396c4bae631a
Submitter: Jenkins
Branch:    proposed/juno

commit 608ecf565f99b9840095ecff424e396c4bae631a
Author: Eric Harney &lt;eharney@redhat.com&gt;
Date:   Tue Sep 9 16:20:24 2014 -0400

    Refuse invalid qcow2 backing files
    
    Don't allow qcow2 files that are pointing to backing files outside of:
    
    volume-&lt;id&gt;
    volume-&lt;id&gt;.&lt;snap-id&gt;
    volume-&lt;id&gt;.tmp-snap-&lt;snap-id&gt;
    
    (optionally prefixed with /mnt/path)
    
    Closes-Bug: #1350504
    
    Change-Id: Ic89cffc93940b7b119cfcde3362f304c9f2875df
    (cherry picked from commit dca3c8323cf8cf12aa8ce4ba21f647ce631e8153)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/66" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-07T22:12:32.489763+00:00" title="2014-10-07 22:12:32 UTC">on 2014-10-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/66">
                <strong>Related fix merged to cinder (proposed/juno)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/66"> #66</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/125672">https:/<wbr />/review.<wbr />openstack.<wbr />org/125672</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/cinder/commit/?id=79afa849658f689a9105473fdfba1d993684d3df">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />cinder/<wbr />commit/<wbr />?id=79afa849658<wbr />f689a9105473fdf<wbr />ba1d993684d3df</a><br />
Submitter: Jenkins<br />
Branch:    proposed/juno</p>
<p>commit 79afa849658f689<wbr />a9105473fdfba1d<wbr />993684d3df<br />
Author: Lucian Petrut &lt;email address hidden&gt;<br />
Date:   Tue Sep 30 11:58:22 2014 +0300</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Windows SMBFS: Handle volume_name in _qemu_img_info</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;The volume_name is now parsed to the _qemu_img_info wrapper. As<br />
&nbsp;&nbsp;&nbsp;&nbsp;this method is not prone to security issues because this driver<br />
&nbsp;&nbsp;&nbsp;&nbsp;does not support raw images (at least not yet), we don&#x27;t have to<br />
&nbsp;&nbsp;&nbsp;&nbsp;perform any checks on the backing image file path.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Thus, this method simply ignores this argument that will be parsed<br />
&nbsp;&nbsp;&nbsp;&nbsp;by the base class methods.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #1350504</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I801a6338250ec2<wbr />dc631c4058543f7<wbr />d0088b3e4d4<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 5e0ce63d6df39dc<wbr />ad5a0ef35553369<wbr />e49c67dfb8)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/125672
Committed: https://git.openstack.org/cgit/openstack/cinder/commit/?id=79afa849658f689a9105473fdfba1d993684d3df
Submitter: Jenkins
Branch:    proposed/juno

commit 79afa849658f689a9105473fdfba1d993684d3df
Author: Lucian Petrut &lt;lpetrut@cloudbasesolutions.com&gt;
Date:   Tue Sep 30 11:58:22 2014 +0300

    Windows SMBFS: Handle volume_name in _qemu_img_info
    
    The volume_name is now parsed to the _qemu_img_info wrapper. As
    this method is not prone to security issues because this driver
    does not support raw images (at least not yet), we don't have to
    perform any checks on the backing image file path.
    
    Thus, this method simply ignores this argument that will be parsed
    by the base class methods.
    
    Related-Bug: #1350504
    
    Change-Id: I801a6338250ec2dc631c4058543f7d0088b3e4d4
    (cherry picked from commit 5e0ce63d6df39dcad5a0ef35553369e49c67dfb8)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~ttx" class="sprite person">Thierry Carrez (ttx)</a>
    
    <time title="2014-10-16 09:21:19 UTC" datetime="2014-10-16T09:21:19.180285+00:00">on 2014-10-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>milestone</b>:
      </td>
      <td>
        juno-rc2 &#8594; 2014.2
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/67" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-10-16T13:26:41.648513+00:00" title="2014-10-16 13:26:41 UTC">on 2014-10-16</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/67">
                <strong>Related fix proposed to cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/67"> #67</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: master<br />
Review: <a rel="nofollow" href="https://review.openstack.org/128920">https:/<wbr />/review.<wbr />openstack.<wbr />org/128920</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: master
Review: https://review.openstack.org/128920</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/68" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~maheshwarirohit87" class="sprite person">Rohit Maheshwari (maheshwarirohit87)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-11-12T16:35:34.082513+00:00" title="2014-11-12 16:35:34 UTC">on 2014-11-12</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/68"> #68</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I am trying to install openstack Ice house but i am not able to do that.Can you please give me step by step to install it on my laptop on my vmware</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I am trying to install openstack Ice house but i am not able to do that.Can you please give me step by step to install it on my laptop on my vmware</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/69" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2014-11-25T06:37:23.090005+00:00" title="2014-11-25 06:37:23 UTC">on 2014-11-25</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/69">
                <strong>Change abandoned on cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/69"> #69</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Change abandoned by Mike Perez (&lt;email address hidden&gt;) on branch: master<br />
Review: <a rel="nofollow" href="https://review.openstack.org/128920">https:/<wbr />/review.<wbr />openstack.<wbr />org/128920</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Change abandoned by Mike Perez (thingee@gmail.com) on branch: master
Review: https://review.openstack.org/128920</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/70" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~dpkshetty" class="sprite person">Deepak C Shetty (dpkshetty)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-03-11T10:03:06.285609+00:00" title="2015-03-11 10:03:06 UTC">on 2015-03-11</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/70"> #70</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@Eric, @Duncan,<br />
&nbsp;&nbsp;&nbsp;Using qemu-img check &lt;qcow2-file&gt; might help here ?<br />
I am hoping that qemu-img check should catch and fail the consistency check if the file was tampered with ?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@Eric, @Duncan,
   Using qemu-img check &lt;qcow2-file&gt; might help here ?
I am hoping that qemu-img check should catch and fail the consistency check if the file was tampered with ?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/cinder/+bug/1350504/comments/71" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2015-06-10T05:25:06.852147+00:00" title="2015-06-10 05:25:06 UTC">on 2015-06-10</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/cinder/+bug/1350504/comments/71">
                <strong>Related fix merged to cinder (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/cinder/+bug/1350504/comments/71"> #71</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/cinder/+bug/1350504/comments/71/+download">Download full text</a> (11.8 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.openstack.org/128920">https:/<wbr />/review.<wbr />openstack.<wbr />org/128920</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/cinder/commit/?id=66494f54112fdfa135b3974c75aa388c8d1fb49e">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />cinder/<wbr />commit/<wbr />?id=66494f54112<wbr />fdfa135b3974c75<wbr />aa388c8d1fb49e</a><br />
Submitter: Jenkins<br />
Branch:    master</p>
<p>commit be3d4604dc0566e<wbr />0838959d998ff1d<wbr />37755de6d3<br />
Author: Tomoki Sekiyama &lt;email address hidden&gt;<br />
Date:   Tue Oct 14 19:09:44 2014 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix LVM iSCSI driver tgtadm CHAP authentication</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently CHAP Authentication in LVM iSCSI driver with tgtadm does not work.<br />
&nbsp;&nbsp;&nbsp;&nbsp;This is because the tgtadm helper creates the target configuration file<br />
&nbsp;&nbsp;&nbsp;&nbsp;with an &#x27;IncomingUser&#x27; entry, which is ignored by tgtd.<br />
&nbsp;&nbsp;&nbsp;&nbsp;This patch fixes it to &#x27;incominguser&#x27;.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I14871985a2a916<wbr />834122f849238f0<wbr />5b75726bc1a<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1329214<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit e3563891545c801<wbr />726d227f752cf99<wbr />488ed5c7dd)</p>
<p>commit f7ee62cc58d8b64<wbr />2af67510a310f62<wbr />59492a4508<br />
Author: Mitsuhiro Tanino &lt;email address hidden&gt;<br />
Date:   Tue Oct 14 12:41:41 2014 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Export cinder volumes only if the status is &#x27;in-use&#x27;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Currently, cinder volumes are exported both &#x27;in-use&#x27; and &#x27;available&#x27;<br />
&nbsp;&nbsp;&nbsp;&nbsp;after restarting cinder-volume service.<br />
&nbsp;&nbsp;&nbsp;&nbsp;This behavior was introduced following commit.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commit ffefe18334a9456<wbr />250e1b6ff88b7b4<wbr />7fb366f374<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Author: Zhiteng Huang &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Date: Sat Aug 23 18:32:57 2014 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;If the volumes are attached to nova instances, they should be exported<br />
&nbsp;&nbsp;&nbsp;&nbsp;via tgtd after restarting cinder-volume.<br />
&nbsp;&nbsp;&nbsp;&nbsp;But the volumes which are not attached to instances must not be exported<br />
&nbsp;&nbsp;&nbsp;&nbsp;because everyone can connect these volumes.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This patch changes volume export behavior that exports a volume only if<br />
&nbsp;&nbsp;&nbsp;&nbsp;the volume status is &#x27;in-use&#x27;.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I4c598c240b9290<wbr />c81bd8001e5a072<wbr />0c8c329aeb9<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Mitsuhiro Tanino &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1381106<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit e2f28b967910625<wbr />432be0eab6a851a<wbr />df53ac58ea)</p>
<p>commit 01e7c516852e53d<wbr />f661b2eedc970c3<wbr />27c1ff10ce<br />
Author: Vipin Balachandran &lt;email address hidden&gt;<br />
Date:   Fri Oct 10 23:06:27 2014 +0530</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Revert &quot;Relocate volume to compliant datastore&quot;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Commit 4be8913520f5e9f<wbr />e4109ade101da95<wbr />09e4a83360 introduced a regression<br />
&nbsp;&nbsp;&nbsp;&nbsp;which causes failures during cinder volume re-attach. This patch reverts<br />
&nbsp;&nbsp;&nbsp;&nbsp;commit 4be8913520f5e9f<wbr />e4109ade101da95<wbr />09e4a83360 as an immediate fix.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1379830<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I5dfbd45533489c<wbr />3c81db8d256bbfd<wbr />2f85614a357<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 48cb82971e0418f<wbr />9a629e2b39d0433<wbr />dc2c0e6919)</p>
<p>commit 900d49723f65e87<wbr />658381ff955559f<wbr />54ac98c487<br />
Author: Andreas Jaeger &lt;email address hidden&gt;<br />
Date:   Thu Oct 9 12:25:28 2014 +0200</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Updated translations</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Commands run:-<br />
&nbsp;&nbsp;&nbsp;&nbsp;$ python setup.py extract_messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;$ python setup.py update_catalog --no-fuzzy-matching \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-<wbr />-ignore-<wbr />obsolete=<wbr />true<br />
&nbsp;&nbsp;&nbsp;&nbsp;$ source \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<wbr />./openstack-<wbr />infra/project-<wbr />config/<wbr />jenkins/<wbr />scripts/<wbr />common_<wbr />translation_<wbr />update.<wbr />sh<br />
&nbsp;&nbsp;&nbsp;&nbsp;$ setup_loglevel_vars<br />
&nbsp;&nbsp;&nbsp;&nbsp;$ cleanup_po_files cinder</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I73f3bdccb4be98<wbr />df95fa853864e46<wbr />5f4d83a8884</p>
<p>commit 8e94aaa2b28b491<wbr />314fe8642061ac7<wbr />3e3fe8e966<br />
Author: Navneet Singh &lt;email address hidden&gt;<br />
Date:   Thu Aug 28 16:03:41 2014 +0530</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;NetApp fix eseries unit test mock clean</p>
<p>&nbsp;...</p></div>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.openstack.org/128920
Committed: https://git.openstack.org/cgit/openstack/cinder/commit/?id=66494f54112fdfa135b3974c75aa388c8d1fb49e
Submitter: Jenkins
Branch:    master

commit be3d4604dc0566e0838959d998ff1d37755de6d3
Author: Tomoki Sekiyama &lt;tomoki.sekiyama@hds.com&gt;
Date:   Tue Oct 14 19:09:44 2014 -0400

    Fix LVM iSCSI driver tgtadm CHAP authentication
    
    Currently CHAP Authentication in LVM iSCSI driver with tgtadm does not work.
    This is because the tgtadm helper creates the target configuration file
    with an 'IncomingUser' entry, which is ignored by tgtd.
    This patch fixes it to 'incominguser'.
    
    Change-Id: I14871985a2a916834122f849238f05b75726bc1a
    Closes-Bug: #1329214
    (cherry picked from commit e3563891545c801726d227f752cf99488ed5c7dd)

commit f7ee62cc58d8b642af67510a310f6259492a4508
Author: Mitsuhiro Tanino &lt;mitsuhiro.tanino@hds.com&gt;
Date:   Tue Oct 14 12:41:41 2014 -0400

    Export cinder volumes only if the status is 'in-use'
    
    Currently, cinder volumes are exported both 'in-use' and 'available'
    after restarting cinder-volume service.
    This behavior was introduced following commit.
    
      commit ffefe18334a9456250e1b6ff88b7b47fb366f374
      Author: Zhiteng Huang &lt;zhithuang@ebaysf.com&gt;
      Date: Sat Aug 23 18:32:57 2014 +0000
    
    If the volumes are attached to nova instances, they should be exported
    via tgtd after restarting cinder-volume.
    But the volumes which are not attached to instances must not be exported
    because everyone can connect these volumes.
    
    This patch changes volume export behavior that exports a volume only if
    the volume status is 'in-use'.
    
    Change-Id: I4c598c240b9290c81bd8001e5a0720c8c329aeb9
    Signed-off-by: Mitsuhiro Tanino &lt;mitsuhiro.tanino@hds.com&gt;
    Closes-bug: #1381106
    (cherry picked from commit e2f28b967910625432be0eab6a851adf53ac58ea)

commit 01e7c516852e53df661b2eedc970c327c1ff10ce
Author: Vipin Balachandran &lt;vbala@vmware.com&gt;
Date:   Fri Oct 10 23:06:27 2014 +0530

    Revert "Relocate volume to compliant datastore"
    
    Commit 4be8913520f5e9fe4109ade101da9509e4a83360 introduced a regression
    which causes failures during cinder volume re-attach. This patch reverts
    commit 4be8913520f5e9fe4109ade101da9509e4a83360 as an immediate fix.
    
    Closes-Bug: #1379830
    Change-Id: I5dfbd45533489c3c81db8d256bbfd2f85614a357
    (cherry picked from commit 48cb82971e0418f9a629e2b39d0433dc2c0e6919)

commit 900d49723f65e87658381ff955559f54ac98c487
Author: Andreas Jaeger &lt;aj@suse.de&gt;
Date:   Thu Oct 9 12:25:28 2014 +0200

    Updated translations
    
    Commands run:-
    $ python setup.py extract_messages
    $ python setup.py update_catalog --no-fuzzy-matching \
      --ignore-obsolete=true
    $ source \
      ../openstack-infra/project-config/jenkins/scripts/common_translation_update.sh
    $ setup_loglevel_vars
    $ cleanup_po_files cinder
    
    Change-Id: I73f3bdccb4be98df95fa853864e465f4d83a8884

commit 8e94aaa2b28b491314fe8642061ac73e3fe8e966
Author: Navneet Singh &lt;singn@netapp.com&gt;
Date:   Thu Aug 28 16:03:41 2014 +0530

    NetApp fix eseries unit test mock clean
    
    This patch fixes the issue of mock not getting
    cleaned for requests in unit tests.
    
    Closes-Bug: #1353506
    
    Change-Id: Iab401021d7f180ff1f2bf3ed79166699112cc367
    (cherry picked from commit 140956515327494a53de6ad09c35690624248f0a)

commit aaecfcf15e6b9defde5822453f2ae97aaf959408
Author: John Griffith &lt;john.griffith8@gmail.com&gt;
Date:   Tue Oct 7 11:49:58 2014 -0600

    Make sure device support Direct before setting
    
    We added '-t none' option to the qemu-img convert operation
    in image_utils.py a while back to accomodate a couple of
    backend devices that didn't flush writes on disconnect.
    (Change: I7a04f683add8c23b9125fe837c4048ccc3ac224d)
    
    The only problem here is that some backend devices don't
    support Direct mode and raise an exception and fail when
    setting this option.
    
    This patch adds a simple check using dd to see if the dest
    supports the Direct flag and only sets '-t none' if the device
    does in fact support it.
    
    Additionally it was brought up that even yet other backends
    are using file devices not blk devices.  In their case setting
    Direct will still work, however it's sub-optimal as qemu-convert
    has internal mechanisms to make sure flushing etc are done
    correctly and efficiently for those devices.  So to accomodate
    that particular use case I'm also adding a check if blk dev
    that can be used for determining whether to set Direct for the
    qemu-convert process.
    
    Change-Id: I34127ac373ceadcfb6fc2662628b1a91eb7b0046
    Closes-Bug: 1375487
    (cherry picked from commit c42273fbc1983b146180c82b8a34b0d832a6f431)

commit a8cec39f8243fd4ee6c0a16fc0620d4b0980c749
Author: Juan Zuluaga &lt;juan.c.zuluaga@oracle.com&gt;
Date:   Wed Sep 24 18:51:07 2014 -0400

    ZFSSA iSCSI vol create fails with vol type option
    
    Vol create with volume-type option is not working since
    volume_backend_name contains the class name as
    predefined string. No matter what was specified in cinder.conf
    as volume_backend_name, volume creation failed.
    Multi-backend option and using extra specs to create custom volumes
    won't work.
    The fix is to look whether volume_backend_name is part of the
    configuration or falls into the class name in case there is
    no backend name.
    
    Closes-Bug: 1373621
    DocImpact
    
    (cherry picked from commit 5c61d57d3693523e9cbf11bf0b5b09bafe699247)
    
    Change-Id: I1bc501dd4c5689d96c7beb720b64112df1770232

commit 04cd35fd88768ec0f5d23619cec2df4981ee7d8c
Author: Sean McGinnis &lt;sean_mcginnis@dell.com&gt;
Date:   Fri Sep 26 15:21:35 2014 -0500

    Handle eqlx SSH connection close on abort.
    
    EqualLogic array CLI operation timeout causes the
    SSH thread to be aborted. This would cause SSH
    sessions to be orphaned and hit a max connection
    limit on the array. This fix catches these aborts
    and makes sure the connection is closed.
    
    Change-Id: I9392fd5dd79eb44f252bf50217f17cc473e6f2f0
    Closes-Bug: 1374613
    (cherry picked from commit 5cb23b67c53437fc51a6b37acac477fba4d6a7ab)

commit 787b328518b2eec8275956835ae16488644e7d87
Author: Juan Zuluaga &lt;juan.c.zuluaga@oracle.com&gt;
Date:   Tue Sep 16 11:23:36 2014 -0400

    ZFSSA iSCSI driver cannot add multple initiators to a group
    
    All initiators defined in zfssa_initiator property would be
    added to the group.
    Also fixed some typos related to initiators error messages.
    
    Change-Id: Iec6c90702e5aafa153b4a7f1e429974ac450afc0
    Closes-Bug: #1369750
    (cherry picked from commit f94d671e627dd7b5143422ffe739418fcfb51a70)

commit c566767d6a5041d1d86b1e199028d78772ebc508
Author: Patrick East &lt;patrick.east@purestorage.com&gt;
Date:   Tue Sep 30 11:47:42 2014 -0700

    Fix race condition in ISCSIConnector _disconnect_volume_multipath_iscsi
    
    This is a similar issue as seen in
    https://bugs.launchpad.net/cinder/+bug/1375382
    
    The list of devices returned by driver.get_all_block_devices() in
    _disconnect_volume_multipath_iscsi will potentially contain broken
    symlinks as the SCSI devices have been deleted from calling
    self._linuxscsi.remove_multipath_device(device_realpath) right before
    _disconnect_volume_multipath_iscsi but the udev rule for the symlink
    may not yet have completed.
    
    Adding in a check to os.path.exists() will ensure that we will not
    consider the broken symlinks as an “in use” device.
    
    Change-Id: I79c9627e9b47127d3765fcec5b7e3bacef179630
    Closes-Bug: #1375946
    (cherry picked from commit 4541521de576297d9b7d4115b040ff54773d9d50)

commit 40eff25fce9a350d1872b083503e4306242961de
Author: Clinton Knight &lt;cknight@netapp.com&gt;
Date:   Fri Sep 26 12:07:44 2014 -0400

    Deprecate / obsolete NetApp volume extra specs
    
    The NetApp Data ONTAP (Cluster-mode) NFS &amp; iSCSI drivers for Juno support
    the Cinder pools feature, but the drivers are reporting two qualified
    extra specs that must be converted to unqualified extra specs in order to
    be used by the Cinder scheduler's capability filter. Furthermore, there
    are four extra specs that must be deprecated due to having the pools
    feature.  Warnings will be logged during volume creation if any of the
    obsolete or deprecated extra specs are seen in the volume type.
    
    Change-Id: I4dbd667610e481356304a12b8dae84cff61aa9d9
    Closes-bug: 1374630
    (cherry picked from commit 4cb4be4122a44dc99d6f29f065cdd32ae86273ce)

commit 2601acaec8d3c154f7638db0e7dad307d0efcc48
Author: Vincent Hou &lt;sbhou@cn.ibm.com&gt;
Date:   Fri Sep 12 16:10:02 2014 +0800

    IBM Storwize driver: Retype the volume with correct empty QoS
    
    * Currently for Storwzie driver, if the new type does not have QoS
    configurations, the old QoS configurations remain in the volume after
    retyping it. It should be retyped into a volume with empty QoS for the
    Storwize driver.
    * Refactor three dicts into one for better maintainance of the QoS keys
    for Storwize driver.
    
    DocImpact
    
    Change-Id: I2b2801a4ef72ef02c11392ed00b56f5263a8a7e4
    Closes-Bug: #1368595
    (cherry picked from commit 26de1b1d829849665dae921b8be739194b84515d)

commit d5efe6703297761215907eeaf703cec040e6ad25
Author: Tristan Cacqueray &lt;tristan.cacqueray@enovance.com&gt;
Date:   Fri Oct 3 19:57:01 2014 +0000

    Sync latest processutils from oslo-incubator
    
    An earlier commit (Ia92aab76fa83d01c5fbf6f9d31df2463fc26ba5c) failed
    to address ssh_execute(). This change set addresses ssh_execute.
    
    ------------------------------------------------
    
    oslo-incubator head:
    
    commit 4990535fb5f3e2dc9b397e1a18c1b5dda94ef1c4
    Merge: 9f5c700 2a130bf
    Author: Jenkins &lt;jenkins@review.openstack.org&gt;
    Date:   Mon Sep 29 23:12:14 2014 +0000
    
        Merge "Script to list unreleased changes in all oslo projects"
    
    -----------------------------------------------
    
    The sync pulls in the following changes (newest to oldest):
    
    6a60f842 - Mask passwords in exceptions and error messages (SSH)
    
    -----------------------------------------------
    
    Change-Id: Ie0caf32469126dd9feb44867adf27acb6e383958
    Closes-Bug: #1377981
    (cherry picked from commit 5e4e1f7ea71f9b4c7bd15809c58bc7a1838ed567)

commit c70ef7d8d4d9479fe5d3f4a8387c4eac1dca274d
Author: OpenStack Proposal Bot &lt;openstack-infra@lists.openstack.org&gt;
Date:   Mon Oct 6 16:09:05 2014 +0000

    Updated from global requirements
    
    Change-Id: I116f04494e596e470f8fec242466ac5fe21b222c

commit 79afa849658f689a9105473fdfba1d993684d3df
Author: Lucian Petrut &lt;lpetrut@cloudbasesolutions.com&gt;
Date:   Tue Sep 30 11:58:22 2014 +0300

    Windows SMBFS: Handle volume_name in _qemu_img_info
    
    The volume_name is now parsed to the _qemu_img_info wrapper. As
    this method is not prone to security issues because this driver
    does not support raw images (at least not yet), we don't have to
    perform any checks on the backing image file path.
    
    Thus, this method simply ignores this argument that will be parsed
    by the base class methods.
    
    Related-Bug: #1350504
    
    Change-Id: I801a6338250ec2dc631c4058543f7d0088b3e4d4
    (cherry picked from commit 5e0ce63d6df39dcad5a0ef35553369e49c67dfb8)

commit 608ecf565f99b9840095ecff424e396c4bae631a
Author: Eric Harney &lt;eharney@redhat.com&gt;
Date:   Tue Sep 9 16:20:24 2014 -0400

    Refuse invalid qcow2 backing files
    
    Don't allow qcow2 files that are pointing to backing files outside of:
    
    volume-&lt;id&gt;
    volume-&lt;id&gt;.&lt;snap-id&gt;
    volume-&lt;id&gt;.tmp-snap-&lt;snap-id&gt;
    
    (optionally prefixed with /mnt/path)
    
    Closes-Bug: #1350504
    
    Change-Id: Ic89cffc93940b7b119cfcde3362f304c9f2875df
    (cherry picked from commit dca3c8323cf8cf12aa8ce4ba21f647ce631e8153)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/cinder/+bug/1350504/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/cinder/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/cinder/+bug/1350504/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/cinder/+bug/1350504/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/cinder/+bug/1350504/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/cinder/+bug/1350504/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/cinder/+bug/1350504/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/cinder/+bug/1350504/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/cinder/+bug/1350504/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/cinder/+bug/1350504/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/cinder/+bug/1350504/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4186992/+files/gluster_qcow2_lp1350504.patch">Possible intermediate fix (WIP)</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4186992">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4193665/+files/gluster_qcow2_fix_2.patch">gluster_qcow2_fix_2.patch</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4193665">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4199988/+files/Refuse-invalid-qcow2-backing-files_master_5d2cc2f.patch">Refuse-invalid-qcow2-backing-files_master_5d2cc2f.patch</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4199988">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4200979/+files/Refuse-invalid-qcow2-backing-files-rev2_master_69b4cfd.patch">Refuse-invalid-qcow2-backing-files-rev2_master_69b4cfd.patch</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4200979">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4201558/+files/Refuse-invalid-qcow2-backing-files-rev3_master_69b4cfd.patch">Refuse-invalid-qcow2-backing-files-rev3_master_69b4cfd.patch</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4201558">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4213809/+files/Refuse-invalid-qcow2-backing-files_icehouse.patch">icehouse patch</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4213809">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4213970/+files/Refuse-invalid-qcow2-backing-files_icehouse_rev2.patch">icehouse patch rev2</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4213970">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/cinder/+bug/1350504/+attachment/4220040/+files/Windows-SMBFS-Handle-volume_name-in-_qemu_img_info.patch">Windows-SMBFS-Handle-volume_name-in-_qemu_img_info.patch</a>
        <small>
          (<a href="/cinder/+bug/1350504/+attachment/4220040">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/cinder/+bug/1350504/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"bug_is_private": false, "information_type_data": {"PUBLICSECURITY": {"name": "Public Security", "description_css_class": "choice-description", "is_private": false, "value": "PUBLICSECURITY", "description": "Everyone can see this security related information.\n", "order": 1}, "PRIVATESECURITY": {"name": "Private Security", "description_css_class": "choice-description", "is_private": true, "value": "PRIVATESECURITY", "description": "Only the security group can see this information.\n ", "order": 2}, "PUBLIC": {"name": "Public", "description_css_class": "choice-description", "is_private": false, "value": "PUBLIC", "description": "Everyone can see this information.\n", "order": 0}, "USERDATA": {"name": "Private", "description_css_class": "choice-description", "is_private": true, "value": "USERDATA", "description": "Only shared with users permitted to see private user information.\n", "order": 3}}, "initial_comment_batch_offset": 41, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/1350504", "self_link": "https://bugs.launchpad.net/api/devel/bugs/1350504"}, "first visible_recent_comment": 31, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1350504", "web_link": "https://bugs.launchpad.net/bugs/1350504", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1350504, "private": false, "information_type": "Public Security", "name": null, "title": "[OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)", "description": "Concern about this was raised by Duncan Thomas.\n\nThe GlusterFS Cinder driver uses \"qemu-img info\" to guess at whether a volume file is a raw image or a qcow2 image.\n\nThis is unsafe because if a user writes a qcow2 header into a volume, Cinder will interpret it as a qcow2-formatted image.   It is believed this can lead to data being extracted from files on the Cinder volume host by writing a qcow2 header with a backing file pointer referencing a path to a file, and then cloning the volume.  (Other similar paths may exist.)\n\nTo fix this, Cinder needs to track the file format of any file being processed this way and use \"qemu-img convert -f \u003csource_format\u003e\" when performing operations like volume clone, which disables qemu-img's auto format detection.\n\nThis seems to affect the GlusterFS driver, but it is possible that other attack vectors exist.  The convert_image() method in cinder/image/image_utils.py is used in assorted places and does not specify a source format, so other uses of it will need to be examined for safety.\n\nFixing this in the GlusterFS driver is not simple: since volume/snapshot qcow2 chains are manipulated by Nova as well as Cinder, we will need to have Nova pass information back to Cinder when an operation such as volume_snapshot_delete is performed, indicating the resulting format of any files modified.\n\nSince the above is a large effort, it may be possible to mitigate this in the short-term by having Cinder enforce some rules about whether a backing file pointer is valid before performing an operation on the file.  For the GlusterFS driver that would be: must start with 'volume-\u003cx\u003e' and not contain '/', since our valid usage of this only points to another file named volume-\u003cid\u003e.\u003cid\u003e and does not use paths.\n\nThis attack hasn't yet been demonstrated to work, but this is a commonly known problem when processing qcow2 files.", "owner_link": "https://bugs.launchpad.net/api/devel/~eharney", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/bug_tasks", "duplicate_of_link": null, "date_created": "2014-07-30T19:30:20.363163+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/subscriptions", "date_last_updated": "2015-06-10T05:25:07.858835+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 266, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/attachments", "security_related": true, "latest_patch_uploaded": "2014-09-30T09:09:59.839095+00:00", "tags": [], "date_last_message": "2015-06-10T05:25:06.852147+00:00", "number_of_duplicates": 0, "message_count": 72, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1350504/linked_merge_proposals", "http_etag": "\"9270bfd562a16dfc7d20c8a19f70fc41a192bf4d-75ccd85674a277b2840f58f113d5ddb604ea02dd\""}, "total_comments_and_activity": 124, "related_features": {}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/cinder/+bug/1350504", "web_link": "https://bugs.launchpad.net/cinder/+bug/1350504", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1350504", "milestone_link": "https://bugs.launchpad.net/api/devel/cinder/+milestone/2014.2", "status": "Fix Released", "importance": "High", "assignee_link": "https://bugs.launchpad.net/api/devel/~eharney", "bug_target_display_name": "Cinder", "bug_target_name": "cinder", "bug_watch_link": null, "date_assigned": "2014-09-23T16:33:10.332114+00:00", "date_created": "2014-07-30T19:30:20.363163+00:00", "date_confirmed": "2014-08-26T10:23:50.518321+00:00", "date_incomplete": null, "date_in_progress": "2014-08-26T10:23:50.518321+00:00", "date_closed": "2014-10-07T21:42:14.360238+00:00", "date_left_new": "2014-08-26T10:23:50.518321+00:00", "date_triaged": "2014-08-26T10:23:50.518321+00:00", "date_fix_committed": "2014-10-02T21:44:25.846144+00:00", "date_fix_released": "2014-10-07T21:42:14.360238+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~eharney", "target_link": "https://bugs.launchpad.net/api/devel/cinder", "title": "Bug #1350504 in Cinder: \"[OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/cinder/+bug/1350504/related_tasks", "is_complete": true, "http_etag": "\"f3e27c39f066455fc2dc57126ee6ec552c4e9567-c45e4f13dc239759c7cade874c6f88759f5f11bb\""}, "bugtask_data": {"1655800": {"bugtask_path": "/cinder/+bug/1350504", "bug_title": "[OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)", "user_can_delete": false, "milestone_value": "https://bugs.launchpad.net/api/devel/cinder/+milestone/2014.2", "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "Cinder", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/cinder/+bug/1350504/+delete", "row_id": "tasksummary1655800", "target_is_product": true, "id": 1655800, "form_row_id": "task1655800", "assignee_vocabulary_filters": [], "prefix": "cinder", "importance_value": "High", "status_value": "Fix Released", "assignee_value": "eharney", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}, "1670729": {"bugtask_path": "/cinder/icehouse/+bug/1350504", "bug_title": "[OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)", "user_can_delete": false, "milestone_value": "https://bugs.launchpad.net/api/devel/cinder/+milestone/2014.1.3", "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "Cinder icehouse", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/cinder/icehouse/+bug/1350504/+delete", "row_id": "tasksummary1670729", "target_is_product": false, "id": 1670729, "form_row_id": "task1670729", "assignee_vocabulary_filters": [], "prefix": "cinder_icehouse", "importance_value": "High", "status_value": "Fix Released", "assignee_value": "eharney", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}, "1655810": {"bugtask_path": "/ossa/+bug/1350504", "bug_title": "[OSSA 2014-033] GlusterFS driver uses unsafe qcow2 format detection (CVE-2014-3641)", "user_can_delete": false, "milestone_value": null, "milestone_widget_items": "[]", "importance_widget_items": "[]", "assignee_vocabulary": "AllUserTeamsParticipation", "user_can_edit_assignee": false, "targetname": "OpenStack Security Advisory", "hide_assignee_team_selection": true, "assignee_is_team": false, "status_widget_items": "[]", "delete_link": "https://bugs.launchpad.net/ossa/+bug/1350504/+delete", "row_id": "tasksummary1655810", "target_is_product": true, "id": 1655810, "form_row_id": "task1655810", "assignee_vocabulary_filters": [], "prefix": "ossa", "importance_value": "High", "status_value": "Fix Released", "assignee_value": "tristan-cacqueray", "user_can_edit_milestone": false, "user_can_unassign": false, "user_can_edit_status": true, "user_can_edit_importance": false}}};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 63 queries/external actions issued in 1.00 seconds

    Features: {'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'bugs.affected_count_includes_dupes.disabled': None, 'baselayout.careers_link.disabled': None, 'js.yui_version': None, 'profiling.enabled': None, 'visible_render_time': None, 'hard_timeout': '9000', 'bugs.nominations.bug_supervisors_can_target': 'on', 'app.maintenance_message': None}

    r0d8de2b

    -->

</html>

