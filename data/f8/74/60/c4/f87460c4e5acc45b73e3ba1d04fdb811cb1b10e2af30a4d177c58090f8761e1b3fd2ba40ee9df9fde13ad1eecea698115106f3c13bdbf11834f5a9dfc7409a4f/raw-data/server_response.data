<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    
        <link rel='alternate' type='application/rss+xml' title='Session related Bug #60491 - RDF' href='rss/bug.php?id=60491'>
        <link rel='alternate' type='application/rss+xml' title='Session related Bug #60491 - RSS 2.0' href='rss/bug.php?id=60491&format=rss2'>
        <base href="https://bugs.php.net/">
    <title>PHP :: Request #60491 :: Session module is adoptive</title>
    <link rel="shortcut icon" href="https://bugs.php.net/images/favicon.ico">
    <link rel="stylesheet" href="https://bugs.php.net/css/style.css">
</head>

<body>

<table id="top" class="head" cellspacing="0" cellpadding="0">
    <tr>
        <td class="head-logo">
            <a href="/"><img src="images/logo.png" alt="Bugs" vspace="2" hspace="2"></a>
        </td>

        <td class="head-menu">
            <a href="https://php.net/">php.net</a>&nbsp;|&nbsp;
            <a href="https://php.net/support.php">support</a>&nbsp;|&nbsp;
            <a href="https://php.net/docs.php">documentation</a>&nbsp;|&nbsp;
            <a href="report.php">report a bug</a>&nbsp;|&nbsp;
            <a href="search.php">advanced search</a>&nbsp;|&nbsp;
            <a href="search-howto.php">search howto</a>&nbsp;|&nbsp;
            <a href="stats.php">statistics</a>&nbsp;|&nbsp;
            <a href="random">random bug</a>&nbsp;|&nbsp;
            <a href="login.php">login</a>
        </td>
    </tr>

    <tr>
        <td class="head-search" colspan="2">
            <form method="get" action="search.php">
                <p class="head-search">
                    <input type="hidden" name="cmd" value="display">
                    <small>go to bug id or search bugs for</small>
                    <input class="small" type="text" name="search_for" value="" size="30">
                    <input type="image" src="images/small_submit_white.gif" alt="search" style="vertical-align: middle;">
                </p>
            </form>
        </td>
    </tr>
</table>

<table class="middle" cellspacing="0" cellpadding="0">
    <tr>
        <td class="content">
<div id="bugheader">
    <table id="details">
        <tr id="title">
            <th class="details" id="number"><a href="bug.php?id=60491">Request</a>&nbsp;#60491</th>
            <td id="summary" colspan="5">Session module is adoptive</td>
        </tr>
        <tr id="submission">
            <th class="details">Submitted:</th>
            <td style="white-space: nowrap;">2011-12-10 00:52 UTC</td>
            <th class="details">Modified:</th>
            <td style="white-space: nowrap;">2015-01-08 06:40 UTC</td>
            <td rowspan="6">


            </td>
        </tr>

        <tr id="submitter">
            <th class="details">From:</th>
            <td>yohgaki@php.net</td>
            <th class="details">Assigned:</th>
            <td><a href="search.php?cmd=display&amp;assign=yohgaki">yohgaki</a> (<a href="https://people.php.net/yohgaki">profile</a>)</td>
        </tr>

        <tr id="categorization">
            <th class="details">Status:</th>
            <td>Closed</td>
            <th class="details">Package:</th>
            <td><a href="search.php?cmd=display&amp;package_name[]=Session+related">Session related</a></td>
        </tr>

        <tr id="situation">
            <th class="details">PHP Version:</th>
            <td>Irrelevant</td>
            <th class="details">OS:</th>
            <td>All</td>
        </tr>

        <tr id="private">
            <th class="details">Private report:</th>
            <td>No</td>
            <th class="details">CVE-ID:</th>
            <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4718" target="_blank">2011-4718</a></td>
        </tr>
    </table>
</div>

<div class="controls">
<span id='control_0' class='control active'>View</span>
<span id='control_3' class='control'><a href='bug.php?id=60491&amp;edit=3'>Add Comment</a></span>
<span id='control_1' class='control'><a href='bug.php?id=60491&amp;edit=1'>Developer</a></span>
<span id='control_2' class='control'><a href='bug.php?id=60491&amp;edit=2'>Edit</a></span>
</div>
<div class="clear"></div>



<div class='comment type_comment' ><a name="1323478327">&nbsp;</a><strong>[2011-12-10 00:52 UTC] <a href="//people.php.net/yohgaki">yohgaki@php.net</a></strong>
<pre class='note'>Description:
------------
Session module is adoptive, so there are chances for session fixation due to 
adoption.

CVE ID: CVE-2011-4718

<a href="https://wiki.php.net/rfc/strict_sessions" rel="nofollow">https://wiki.php.net/rfc/strict_sessions</a>


</pre>
</div><h2>Patches</h2>
<p><a href='patch-add.php?bug_id=60491'>Add a Patch</a></p><h2>Pull Requests</h2>
<p><a href='gh-pull-add.php?bug_id=60491'>Add a Pull Request</a></p><h2 style="border-bottom:2px solid #666;margin-bottom:0;padding:5px 0;">History</h2><div id='comment_filter' class='controls comments'><span id='type_all' class='control active' onclick='do_comment(this);'>All</span><span id='type_comment' class='control ' onclick='do_comment(this);'>Comments</span><span id='type_log' class='control ' onclick='do_comment(this);'>Changes</span><span id='type_svn' class='control ' onclick='do_comment(this);'>Git/SVN commits</span><span id='type_related' class='control ' onclick='do_comment(this);'>Related reports</span>            </div>
            <div id='comments_view' style='clear:both;'>
<div class='comment type_log' ><a name="1392225341">&nbsp;</a><strong>[2014-02-12 17:15 UTC] <a href="//people.php.net/tyrael">tyrael@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-CVE-ID:</span>
<span class="added">+CVE-ID: 2011-4718</span>
</div></div></div><div class='comment type_comment' ><a name="1392225341">&nbsp;</a><strong>[2014-02-12 17:15 UTC] <a href="//people.php.net/tyrael">tyrael@php.net</a></strong>
<pre class='note'>this should be closed, as it is fixed since 5.5.2 with the addition of the strict sessions, right?
</pre>
</div><div class='comment type_log' ><a name="1393291482">&nbsp;</a><strong>[2014-02-25 01:24 UTC] <a href="//people.php.net/johannes">johannes@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Assigned To:</span>
<span class="added">+Assigned To: yohgaki</span>
</div></div></div><div class='comment type_comment' ><a name="1393291482">&nbsp;</a><strong>[2014-02-25 01:24 UTC] <a href="//people.php.net/johannes">johannes@php.net</a></strong>
<pre class='note'>yasuo-san, please confirm this can be closed (and marked public).
</pre>
</div><div class='comment type_log' ><a name="1393304454">&nbsp;</a><strong>[2014-02-25 05:00 UTC] <a href="//people.php.net/yohgaki">yohgaki@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Status: Assigned</span>
<span class="added">+Status: Closed</span>
</div></div></div><div class='comment type_comment' ><a name="1393304454">&nbsp;</a><strong>[2014-02-25 05:00 UTC] <a href="//people.php.net/yohgaki">yohgaki@php.net</a></strong>
<pre class='note'>This is closed.
Use use_strict_mode=on.
</pre>
</div><div class='comment type_log' ><a name="1393324801">&nbsp;</a><strong>[2014-02-25 10:40 UTC] <a href="//people.php.net/johannes">johannes@php.net</a></strong>
<div class='log_note'><div class="changeset">
<span class="removed">-Type: Security</span>
<span class="added">+Type: Feature/Change Request</span>
</div></div></div><div class='comment type_comment' ><a name="1419905108">&nbsp;</a><strong>[2014-12-30 02:05 UTC] yqbjtu &#x61;&#116; 163 &#x64;&#111;&#x74; com</strong>
<pre class='note'>is PHP5.4 affected by this CVE-2011-4718?  I see it is fixed in 5.5.2.  but how about the php 5.4 serials, such as the latest php 5.4.36?  Thank you!
</pre>
</div><div class='comment type_comment' ><a name="1420591718">&nbsp;</a><strong>[2015-01-07 00:48 UTC] <a href="//people.php.net/yohgaki">yohgaki@php.net</a></strong>
<pre class='note'>For the record, this issue can be avoided by calling session_regenerate_id() properly. e.g. Regenerate session ID upon login/when item is put in cart at first time, etc. 

With use_strict_mode=On, programmer does not have to care for adoptive session manager. When use_strict_mode=Off, programmer must care for adoptive session manager.
</pre>
</div><div class='comment type_comment' ><a name="1420685474">&nbsp;</a><strong>[2015-01-08 02:51 UTC] liutj &#x61;&#116; cn &#x64;&#111;&#x74; ibm &#x64;&#111;&#x74; com</strong>
<pre class='note'>Does it means if we never used the method session_regenerate_id(), our product will not be affected by CVE-2011-4718
</pre>
</div><div class='comment type_comment' ><a name="1420699249">&nbsp;</a><strong>[2015-01-08 06:40 UTC] <a href="//people.php.net/yohgaki">yohgaki@php.net</a></strong>
<pre class='note'>ï¼ liutj 
Yes, you are.

If you are using tran_sid, impact is severe. If you are using only cookie, impact is moderate as typical attack needs JavaScript vulnerability. Note that your colleague may able to set cookie locally by manipulating browser's cookie database directly. It does not require JavaScript vulnerability with this method. If you are using http only cookie, risk is relatively low since JavaScript injection cannot modify session cookie. However, IE had strange cookie priority when I checked it years ago. HTTP only cookie may not help with IE.
</pre>
</div></div>
        </td>
    </tr>
</table>

<script src='js/util.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script src="js/jquery.cookie.js"></script>
<script>
function do_comment(nd)
{
    $('#comment_filter > .control.active').removeClass("active");
    $(nd).addClass("active");

    $.cookie('history_tab', nd.id, { expires: 365 });

    if (nd.id == 'type_all') {
        $('#comments_view > .comment:hidden').show('slow');
    } else {
        $('#comments_view > .comment').each(function(i) {
            if ($(this).hasClass(nd.id)) {
                $(this).show('slow');
            } else {
                $(this).hide('slow');
            }
        });
    }
    return false;
}
</script>
<table class="foot" cellspacing="0" cellpadding="0">
    <tr>
        <td class="foot-bar" colspan="2">&nbsp;</td>
    </tr>

    <tr>
        <td class="foot-copy">
            <small>
                <a href="https://php.net/"><img src="images/logo-small.gif" align="left" valign="middle" hspace="3" alt="PHP"></a>
                <a href="https://php.net/copyright.php">Copyright &copy; 2001-2021 The PHP Group</a><br>
                All rights reserved.
            </small>
        </td>
        <td class="foot-source">
            <small>Last updated: Sat Oct 30 19:03:34 2021 UTC</small>
        </td>
    </tr>
</table>
</body>
</html>
