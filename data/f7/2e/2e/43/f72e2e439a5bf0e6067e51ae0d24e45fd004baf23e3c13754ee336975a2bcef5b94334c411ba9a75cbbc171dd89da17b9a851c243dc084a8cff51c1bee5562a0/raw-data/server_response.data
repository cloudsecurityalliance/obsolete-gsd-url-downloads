<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Chef Infra Client 15.4.45 released - Chef Release Announcements - Chef Questions</title>
    <meta name="description" content="Hey folks, 
We have a great new release of Chef Infra Client 15 out today with 15.4.45. This includes some bootstrap and custom resource improvements along with a pile of updates to core Chef Infra resources. 
converge_i&amp;hellip;">
    <meta name="generator" content="Discourse 2.8.0.beta7 - https://github.com/discourse/discourse version 436edbb51a15c634e65c0d7cdccdb4ce9aecd8f1">
<link rel="icon" type="image/png" href="https://aws1.discourse-cdn.com/business6/uploads/chef/optimized/2X/b/b9c6cc2dba194e37f0fa44a13d1ad740b99aae03_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://aws1.discourse-cdn.com/business6/uploads/chef/optimized/2X/b/b9c6cc2dba194e37f0fa44a13d1ad740b99aae03_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://discourse.chef.io/t/chef-infra-client-15-4-45-released/16081" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://discourse.chef.io","potentialAction":{"@type":"SearchAction","target":"https://discourse.chef.io/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="https://discourse.chef.io/opensearch.xml" title="Chef Questions Search">

      <link href="https://sea2.discourse-cdn.com/business6/stylesheets/desktop_d82111784f83ea912b6ef75ef7f5c53958c3e5b4.css?__ws=discourse.chef.io" media="all" rel="stylesheet" data-target="desktop"  />
      <link href="https://sea2.discourse-cdn.com/business6/stylesheets/desktop_theme_4_deca2e887d24ab26474dd5de12758814d723a196.css?__ws=discourse.chef.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="4" data-theme-name="header"/>
<link href="https://sea2.discourse-cdn.com/business6/stylesheets/desktop_theme_1_fc4232eb6fb9f9a8c47626e756cc066fd39d1d1f.css?__ws=discourse.chef.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1" data-theme-name="migrated from site text"/>
    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-6369228-7" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

  <link rel="preload" href="https://aws1.discourse-cdn.com/business6/assets/google-universal-analytics-v3-706f1d28f0a97f67a47515c96189277240ec4940d968955042066d7873fd1fe8.gz.js" as="script">
<script src="https://aws1.discourse-cdn.com/business6/assets/google-universal-analytics-v3-706f1d28f0a97f67a47515c96189277240ec4940d968955042066d7873fd1fe8.gz.js"></script>


        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Chef Infra Client 15.4.45 released&#39;" href="https://discourse.chef.io/t/chef-infra-client-15-4-45-released/16081.rss" />
    <meta property="og:site_name" content="Chef Questions" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://aws1.discourse-cdn.com/business6/uploads/chef/original/2X/b/b9c6cc2dba194e37f0fa44a13d1ad740b99aae03.png" />
<meta property="og:image" content="https://aws1.discourse-cdn.com/business6/uploads/chef/original/2X/b/b9c6cc2dba194e37f0fa44a13d1ad740b99aae03.png" />
<meta property="og:url" content="https://discourse.chef.io/t/chef-infra-client-15-4-45-released/16081" />
<meta name="twitter:url" content="https://discourse.chef.io/t/chef-infra-client-15-4-45-released/16081" />
<meta property="og:title" content="Chef Infra Client 15.4.45 released" />
<meta name="twitter:title" content="Chef Infra Client 15.4.45 released" />
<meta property="og:description" content="Hey folks,  We have a great new release of Chef Infra Client 15 out today with 15.4.45. This includes some bootstrap and custom resource improvements along with a pile of updates to core Chef Infra resources.  converge_if_changed Improvements Chef Infra Client will now take into account any default values specified in custom resources when making converge determinations with the converge_if_changed helper. Previously, default values would be ignored, which caused necessary changes to be skipped...." />
<meta name="twitter:description" content="Hey folks,  We have a great new release of Chef Infra Client 15 out today with 15.4.45. This includes some bootstrap and custom resource improvements along with a pile of updates to core Chef Infra resources.  converge_if_changed Improvements Chef Infra Client will now take into account any default values specified in custom resources when making converge determinations with the converge_if_changed helper. Previously, default values would be ignored, which caused necessary changes to be skipped...." />
<meta property="article:published_time" content="2019-10-15T20:25:27+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    <div class="chef-discourse-header">
    <div class="wrap">
		<ul>
			<li>
				<a href="https://community.chef.io/tools/chef-infra/">Chef Infra</a>
			</li>
			<li>
				<a href="https://community.chef.io/tools/chef-inspec/">Chef InSpec</a>
			</li>
			<li>
				<a href="https://community.chef.io/tools/chef-habitat/">Chef Habitat</a>
			</li>
			<li>
				<a href="https://community.chef.io/tools/chef-automate/">Chef Automate</a>
			</li>
			<li>
				<a href="https://docs.chef.io/">Docs</a>
			</li>
			<li>
				<a href="https://learn.chef.io">Learn</a>
			</li>
			<li>
				<a href="https://blog.chef.io/">Blog</a>
			</li>
			<li>
				<a href="https://downloads.chef.io/">Download</a>
			</li>
			<li>
				<a href="https://community.chef.io/first-time/">Contribute</a>
			</li>
		</ul>
	</div>
</div>
    <header>
      <a href="/">
          <img src="https://aws1.discourse-cdn.com/business6/uploads/chef/original/2X/c/ceb98165dd885fecf2f8ee17609fe1ec8a3e8c57.png" alt="Chef Questions" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="/t/chef-infra-client-15-4-45-released/16081">Chef Infra Client 15.4.45 released</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://discourse.chef.io/c/chef-release/9" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Chef Release Announcements</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Chef Questions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://aws1.discourse-cdn.com/business6/uploads/chef/original/2X/c/ceb98165dd885fecf2f8ee17609fe1ec8a3e8c57.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.chef.io/u/tas50'><span itemprop='name'>tas50</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="https://discourse.chef.io/t/chef-infra-client-15-4-45-released/16081">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-15T20:25:27Z' class='post-time'>
                October 15, 2019,  8:25pm
              </time>
              <meta itemprop='dateModified' content='2019-10-15T20:25:27Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hey folks,</p>
<p>We have a great new release of Chef Infra Client 15 out today with 15.4.45. This includes some bootstrap and custom resource improvements along with a pile of updates to core Chef Infra resources.</p>
<h2>converge_if_changed Improvements</h2>
<p>Chef Infra Client will now take into account any <code>default</code> values specified in custom resources when making converge determinations with the <code>converge_if_changed</code> helper. Previously, default values would be ignored, which caused necessary changes to be skipped. Note: This change may cause behavior changes for some users, but we believe this original behavior is an impacting bug for enough users to make it outside of a major release. Thanks <a href="https://github.com/jakauppila" rel="nofollow noopener">@jakauppila</a> for reporting this.</p>
<h2>Bootstrap Improvements</h2>
<p>Several improvements have been made to the <code>knife bootstrap</code> command to make it more reliable and secure:</p>
<ul>
<li>File creation is now wrapped in a umask to avoid potential race conditions</li>
<li>
<code>NameError</code> and <code>RuntimeError</code> failures during bootstrap have been resolved</li>
<li>
<code>Undefined method 'empty?' for nil:NilClass</code> during bootstrap have been resolved</li>
<li>Single quotes in attributes during bootstrap no longer result in bootstrap failures</li>
<li>The bootstrap command no longer appears in PS on the host while bootstrapping is running</li>
</ul>
<h2>knife supermarket list Improvements</h2>
<p>The <code>knife supermarket list</code> command now includes two new options:</p>
<ul>
<li>
<code>--sort-by [recently_updated recently_added most_downloaded most_followed]</code>: Sort cookbooks returned from the Supermarket API</li>
<li>
<code>--owned_by</code>: Limit returned cookbooks to a particular owner</li>
</ul>
<h2>Updated Resources</h2>
<h3>chocolatey_package</h3>
<p>The <code>chocolatey_package</code> resource no longer fails when passing options with the <code>options</code> property. Thanks for reporting this issue <a href="https://github.com/kenmacleod" rel="nofollow noopener">@kenmacleod</a>.</p>
<h3>kernel_module</h3>
<p>The <code>kernel_module</code> resource includes a new <code>options</code> property, which allows users to set module specific parameters and settings. Thanks <a href="https://github.com/ramereth" rel="nofollow noopener">@ramereth</a> for this new feature.</p>
<p>Example of a kernel_module resource using the new options property:</p>
<pre><code class="lang-ruby">  kernel_module 'loop' do
  options [ 'max_loop=4', 'max_part=8' ]
  end
</code></pre>
<h3>remote_file</h3>
<p>The <code>remote_file</code> resource has been updated to better display progress when using the <code>show_progress</code> resource. Thanks for reporting this issue <a href="https://github.com/isuftin" rel="nofollow noopener">@isuftin</a>.</p>
<h3>sudo</h3>
<p>The <code>sudo</code> resource now runs sudo config validation against all of the sudo configuration files on the system instead of only the file being written. This allows us to detect configuration errors that occur when configs conflict with each other. Thanks for reporting this issue <a href="https://github.com/drzewiec" rel="nofollow noopener">@drzewiec</a>.</p>
<h3>windows_ad_join</h3>
<p>The <code>windows_ad_join</code> has a new <code>:leave</code> action for leaving an Active Directory domain and rejoining a workgroup. This new action also has a new <code>workgroup_name</code> property for specifying the workgroup to join upon leaving the domain. Thanks <a href="https://github.com/jasonwbarnett" rel="nofollow noopener">@jasonwbarnett</a> for adding this new action.</p>
<p>Example of leaving a domain</p>
<pre><code class="lang-ruby">windows_ad_join 'Leave the domain' do
  workgroup_name 'local'
  action :leave
end
</code></pre>
<h3>windows_package</h3>
<p>The <code>windows_package</code> resource no longer updates environmental variables before installing the package. This prevents potential modifications that may cause a package installation to fail. Thanks <a href="https://github.com/jeremyhage" rel="nofollow noopener">@jeremyhage</a> for this fix.</p>
<h3>windows_service</h3>
<p>The <code>windows_service</code> resource no longer updates the service and triggers notifications if the case of the <code>run_as_user</code> property does not match the user set on the service. Thanks <a href="https://github.com/jasonwbarnett" rel="nofollow noopener">@jasonwbarnett</a> for this fix.</p>
<h3>windows_share</h3>
<p>The <code>windows_share</code> resource is now fully idempotent by better validating the provided <code>path</code> property from the user. Thanks <a href="https://github.com/Happycoil" rel="nofollow noopener">@Happycoil</a> for this fix.</p>
<h2>Security Updates</h2>
<h3>Ruby</h3>
<p>Ruby has been updated from 2.6.4 to 2.6.5 in order to resolve the following CVEs:</p>
<ul>
<li>
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-16255" rel="nofollow noopener">CVE-2019-16255</a>: A code injection vulnerability of Shell#<span class="chcklst-box fa fa-square-o fa-fw"></span> and Shell#test</li>
<li>
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-16254" rel="nofollow noopener">CVE-2019-16254</a>: HTTP response splitting in WEBrick (Additional fix)</li>
<li>
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-15845" rel="nofollow noopener">CVE-2019-15845</a>: A NUL injection vulnerability of File.fnmatch and File.fnmatch?</li>
<li>
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-16201" rel="nofollow noopener">CVE-2019-16201</a>: Regular Expression Denial of Service vulnerability of WEBrick’s Digest access authentication</li>
</ul>
<h1>Get the Build</h1>
<p>As always, you can download binaries directly from <a href="https://downloads.chef.io/chef/15.4.45">downloads.chef.io </a> or by using the <code>mixlib-install</code> command line utility:</p>
<pre><code class="lang-auto">$ mixlib-install download chef -v 15.4.45
</code></pre>
<p>Alternatively, you can install Chef Infra Client using one of the following command options:</p>
<pre><code class="lang-auto"># In Shell
$ curl https://omnitruck.chef.io/install.sh | sudo bash -s -- -P chef -v 15.4.45

# In Windows Powershell
. { iwr -useb https://omnitruck.chef.io/install.ps1 } | iex; install -project chef -version 15.4.45
</code></pre>
<p>If you want to give this version a spin in Test Kitchen, create or add the following to your <code>kitchen.yml</code> file:</p>
<pre><code class="lang-auto">provisioner:
  product_name: chef
  product_version: 15.4.45
</code></pre>
<p>Enjoy,<br>
Tim</p>
        </div>

        <meta itemprop='headline' content='Chef Infra Client 15.4.45 released'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="https://discourse.chef.io/t/chef-workstation-0-10-41-released/16133" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://discourse.chef.io/t/chef-workstation-0-10-41-released/16133'>
                      <span itemprop='name'>Chef Workstation 0.10.41 Released!</span>
                    </a>
                    <meta itemprop='position' content='14'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="https://discourse.chef.io/t/chefdk-4-5-0-released/16087" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://discourse.chef.io/t/chefdk-4-5-0-released/16087'>
                      <span itemprop='name'>ChefDK 4.5.0 Released!</span>
                    </a>
                    <meta itemprop='position' content='15'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Chef Questions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://aws1.discourse-cdn.com/business6/uploads/chef/original/2X/c/ceb98165dd885fecf2f8ee17609fe1ec8a3e8c57.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://discourse.chef.io/u/MattRay'><span itemprop='name'>MattRay</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="https://discourse.chef.io/t/chef-infra-client-15-4-45-released/16081">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-10-19T00:54:24Z' class='post-time'>
                October 19, 2019, 12:54am
              </time>
              <meta itemprop='dateModified' content='2019-10-19T00:54:24Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>If you're interested in 32-bit ARM builds for 15.4.45 (ie. Raspberry Pis) or want to make builds for another platform, I've got packages and instructions here: <a href="https://mattray.github.io/2019/10/18/chef-14-chef-15-on-arm.html" rel="nofollow noopener">https://mattray.github.io/2019/10/18/chef-14-chef-15-on-arm.html</a></p>
        </div>

        <meta itemprop='headline' content='Chef Infra Client 15.4.45 released'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
