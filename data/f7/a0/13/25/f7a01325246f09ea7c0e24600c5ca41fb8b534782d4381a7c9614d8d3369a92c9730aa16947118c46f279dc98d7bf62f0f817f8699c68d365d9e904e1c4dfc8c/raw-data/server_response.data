<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      third_party/libopenjpeg20/0003-dwt-decode.patch -
    
    
      Issue 1416783002: Merge to M46: upgrade openjpeg to commit# cf352af -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = 'bd2e67c3be3c62d938df3f8295ae34fd';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Side by Side Diff</div>
<hr/>
<div style="text-align: center; margin-bottom: .8em;">
  Use n/p to move between diff chunks;
  N/P to move between comments.
  
  <span style="color:red">Draft comments are only viewable by you.</span>
  
</div>

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/1416783002/diff/20001/third_party/libopenjpeg20/0003-dwt-decode.patch%252526ust%25253D1608466172984483%252526usg%25253DAFQjCNF6Mbanopq-R7TFmjoyaheMVGOUgA%26service%3Dah">Sign out</a>

</div>
<div class="counter">(8)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>


<script language="JavaScript" type="text/javascript"><!--
document.onkeydown = M_keyDown;

logged_in = true;

// -->
</script>

<div style="float: left;">
  <h2 style="margin-bottom: 0em; margin-top: 0em;">Side by Side Diff: third_party/libopenjpeg20/0003-dwt-decode.patch</h2>
  <div style="margin-top: .2em;"><span id="issue-star-1416783002">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    <b>Issue <a href="/1416783002/" onmouseover="M_showPopUp(this, 'popup-issue');" id="upCL">1416783002</a>:</b>
  Merge to M46: upgrade openjpeg to commit# cf352af  (Closed) 
  <span class="extra">Base URL: https://pdfium.googlesource.com/pdfium.git@2490</span></div>
  <div style="margin-top: .4em;">
    <b>Patch Set: Fix pdfium:168 since we are already half way there</b>
    <span class="extra">
    Created 5 years, 2 months ago
    
    </span>
  </div>
  <div style="margin-top: .4em;" class="help">
    Use n/p to move between diff chunks;
    N/P to move between comments.
    
    <span style="color:red">Draft comments are only viewable by you.</span>
    
  </div>
</div>
<div style="float: right; color: #333333; background-color: #eeeeec; border: 1px solid lightgray; -moz-border-radius: 5px 5px 5px 5px; padding: 5px;">
  <div><form method="GET" action="">
  <label for="id_context">Context:</label>
  <select id="id_context" name="context" onchange="this.form.submit()">
    
      <option value="3"
      >
      3 lines</option>
    
      <option value="10"
       selected="selected">
      10 lines</option>
    
      <option value="25"
      >
      25 lines</option>
    
      <option value="50"
      >
      50 lines</option>
    
      <option value="75"
      >
      75 lines</option>
    
      <option value="100"
      >
      100 lines</option>
    
    <option value=""
	    >
      Whole file</option>
  </select>
  <label for="id_column_width">Column Width:</label>
  <input type="text" value="80" id="id_column_width"
	 name="column_width" size="2">
  <label for="id_tab_spaces">Tab Spaces:</label>
  <input type="text" value="8" id="id_tab_spaces"
	 name="tab_spaces" size="2">
  <input type="submit" value="Adjust View" />
</form>
</div>
  <div style="margin-top: 5px;">
    Jump to: <select onchange="M_jumpToPatch(this, 1416783002, 20001);">
      
        <option value="core/src/fpdfapi/fpdf_render/fpdf_render_loadimage.cpp"
         >core/src/fpdfapi/fpdf_render/fpdf_render_loadimage.cpp</option>
      
        <option value="core/src/fxcodec/codec/fx_codec_jpx_opj.cpp"
         >core/src/fxcodec/codec/fx_codec_jpx_opj.cpp</option>
      
        <option value="third_party/libopenjpeg20/0000-use-colorspace.patch"
         >third_party/libopenjpeg20/0000-use-colorspace.patch</option>
      
        <option value="third_party/libopenjpeg20/0001-image-data.patch"
         >third_party/libopenjpeg20/0001-image-data.patch</option>
      
        <option value="third_party/libopenjpeg20/0002-packet-iterator.patch"
         >third_party/libopenjpeg20/0002-packet-iterator.patch</option>
      
        <option value="third_party/libopenjpeg20/0003-dwt-decode.patch"
          selected="selected">third_party/libopenjpeg20/0003-dwt-decode.patch</option>
      
        <option value="third_party/libopenjpeg20/README.pdfium"
         >third_party/libopenjpeg20/README.pdfium</option>
      
        <option value="third_party/libopenjpeg20/bio.c"
         >third_party/libopenjpeg20/bio.c</option>
      
        <option value="third_party/libopenjpeg20/cio.h"
         >third_party/libopenjpeg20/cio.h</option>
      
        <option value="third_party/libopenjpeg20/cio.c"
         >third_party/libopenjpeg20/cio.c</option>
      
        <option value="third_party/libopenjpeg20/dwt.h"
         >third_party/libopenjpeg20/dwt.h</option>
      
        <option value="third_party/libopenjpeg20/dwt.c"
         >third_party/libopenjpeg20/dwt.c</option>
      
        <option value="third_party/libopenjpeg20/event.h"
         >third_party/libopenjpeg20/event.h</option>
      
        <option value="third_party/libopenjpeg20/function_list.h"
         >third_party/libopenjpeg20/function_list.h</option>
      
        <option value="third_party/libopenjpeg20/function_list.c"
         >third_party/libopenjpeg20/function_list.c</option>
      
        <option value="third_party/libopenjpeg20/image.c"
         >third_party/libopenjpeg20/image.c</option>
      
        <option value="third_party/libopenjpeg20/indexbox_manager.h"
         >third_party/libopenjpeg20/indexbox_manager.h</option>
      
        <option value="third_party/libopenjpeg20/invert.c"
         >third_party/libopenjpeg20/invert.c</option>
      
        <option value="third_party/libopenjpeg20/j2k.h"
         >third_party/libopenjpeg20/j2k.h</option>
      
        <option value="third_party/libopenjpeg20/j2k.c"
         >third_party/libopenjpeg20/j2k.c</option>
      
        <option value="third_party/libopenjpeg20/jp2.h"
         >third_party/libopenjpeg20/jp2.h</option>
      
        <option value="third_party/libopenjpeg20/jp2.c"
         >third_party/libopenjpeg20/jp2.c</option>
      
        <option value="third_party/libopenjpeg20/mct.c"
         >third_party/libopenjpeg20/mct.c</option>
      
        <option value="third_party/libopenjpeg20/mqc.c"
         >third_party/libopenjpeg20/mqc.c</option>
      
        <option value="third_party/libopenjpeg20/openjpeg.h"
         >third_party/libopenjpeg20/openjpeg.h</option>
      
        <option value="third_party/libopenjpeg20/openjpeg.c"
         >third_party/libopenjpeg20/openjpeg.c</option>
      
        <option value="third_party/libopenjpeg20/opj_includes.h"
         >third_party/libopenjpeg20/opj_includes.h</option>
      
        <option value="third_party/libopenjpeg20/opj_intmath.h"
         >third_party/libopenjpeg20/opj_intmath.h</option>
      
        <option value="third_party/libopenjpeg20/opj_malloc.h"
         >third_party/libopenjpeg20/opj_malloc.h</option>
      
        <option value="third_party/libopenjpeg20/pi.h"
         >third_party/libopenjpeg20/pi.h</option>
      
        <option value="third_party/libopenjpeg20/pi.c"
         >third_party/libopenjpeg20/pi.c</option>
      
        <option value="third_party/libopenjpeg20/t1.c"
         >third_party/libopenjpeg20/t1.c</option>
      
        <option value="third_party/libopenjpeg20/t2.h"
         >third_party/libopenjpeg20/t2.h</option>
      
        <option value="third_party/libopenjpeg20/t2.c"
         >third_party/libopenjpeg20/t2.c</option>
      
        <option value="third_party/libopenjpeg20/tcd.h"
         >third_party/libopenjpeg20/tcd.h</option>
      
        <option value="third_party/libopenjpeg20/tcd.c"
         >third_party/libopenjpeg20/tcd.c</option>
      
        <option value="third_party/libopenjpeg20/tgt.h"
         >third_party/libopenjpeg20/tgt.h</option>
      
        <option value="third_party/libopenjpeg20/tgt.c"
         >third_party/libopenjpeg20/tgt.c</option>
      
    </select>
  </div>
  
  <div style="margin-top: 5px;">
    <a href="/1416783002/patch/20001/30006?context=10&column_width=80&tab_spaces=8">
    View unified diff</a>
    |
    <a href="/download/issue1416783002_20001_30006.diff"
       title="Download patch for third_party/libopenjpeg20/0003-dwt-decode.patch">
    Download patch</a>
    
  </div>
  
</div>
<div style="clear: both;"></div>

<div class="code" style="margin-top: 1.3em; display: table; margin-left: auto; margin-right: auto;">
<div class="codenav">

<span class="disabled">&laquo; no previous file with comments</span>
|

<a id="prevFile"
   href="/1416783002/diff/20001/third_party/libopenjpeg20/0002-packet-iterator.patch?context=10&column_width=80&tab_spaces=8">
&laquo; third_party/libopenjpeg20/0002-packet-iterator.patch</a> ('k')
|

<link rel="prerender"
   href="/1416783002/diff/20001/third_party/libopenjpeg20/README.pdfium?context=10&column_width=80&tab_spaces=8"></link>
<a id="nextFile"
   href="/1416783002/diff/20001/third_party/libopenjpeg20/README.pdfium?context=10&column_width=80&tab_spaces=8">
third_party/libopenjpeg20/README.pdfium &raquo;</a> ('j')
|

<span class="disabled">no next file with comments &raquo;</span>
 <br/>
<a href="javascript:if (intraLineDiff) intraLineDiff.toggle()">
Toggle Intra-line Diffs</a> ('i')
|
<a href="javascript:M_expandAllInlineComments()">Expand Comments</a> ('e')
|
<a href="javascript:M_collapseAllInlineComments()">Collapse Comments</a> ('c')
|
<a name="show-all-inline"
   style="display:none"
   href="javascript:M_showAllInlineComments()">Show Comments</a>
<a name="hide-all-inline"
   href="javascript:M_hideAllInlineComments()">Hide Comments</a> ('s')
</div>


<div style="position:relative;" id="table-top">

<span id="hook-sel" style="display:none;"></span>



<table border="0" cellpadding="0" cellspacing="0" id="thecode">
<tr id="codeTop"><th>OLD</th><th>NEW</th></tr>


<tr><td class="info">(Empty)</td><td class="info"></td></tr><tr name="hook" id="pair-1"><td class="oldblank"></td><td class="newinsert" id="newcode1">   <u>1</u> diff --git a/third_party/libopenjpeg20/dwt.c b/third_party/libopenjpeg20/dwt.c</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-1"></td></tr>
<tr id="pair-2"><td class="oldblank"></td><td class="newinsert" id="newcode2">   <u>2</u> index 4ad99ed..975a97e 100644</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-2"></td></tr>
<tr id="pair-3"><td class="oldblank"></td><td class="newinsert" id="newcode3">   <u>3</u> --- a/third_party/libopenjpeg20/dwt.c</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-3"></td></tr>
<tr id="pair-4"><td class="oldblank"></td><td class="newinsert" id="newcode4">   <u>4</u> +++ b/third_party/libopenjpeg20/dwt.c</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-4"></td></tr>
<tr id="pair-5"><td class="oldblank"></td><td class="newinsert" id="newcode5">   <u>5</u> @@ -46,14 +46,12 @@</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-5"></td></tr>
<tr id="pair-6"><td class="oldblank"></td><td class="newinsert" id="newcode6">   <u>6</u>  /** @defgroup DWT DWT - Implementation of a discrete wavelet transform */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-6"></td></tr>
<tr id="pair-7"><td class="oldblank"></td><td class="newinsert" id="newcode7">   <u>7</u>  /*@{*/</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-7"></td></tr>
<tr id="pair-8"><td class="oldblank"></td><td class="newinsert" id="newcode8">   <u>8</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-8"></td></tr>
<tr id="pair-9"><td class="oldblank"></td><td class="newinsert" id="newcode9">   <u>9</u> -#define OPJ_WS(i) v-&gt;mem[(i)*2]</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-9"></td></tr>
<tr id="pair-10"><td class="oldblank"></td><td class="newinsert" id="newcode10">  <u>10</u> -#define OPJ_WD(i) v-&gt;mem[(1+(i)*2)]</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-10"></td></tr>
<tr id="pair-11"><td class="oldblank"></td><td class="newinsert" id="newcode11">  <u>11</u> -</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-11"></td></tr>
<tr id="pair-12"><td class="oldblank"></td><td class="newinsert" id="newcode12">  <u>12</u>  /** @name Local data structures */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-12"></td></tr>
<tr id="pair-13"><td class="oldblank"></td><td class="newinsert" id="newcode13">  <u>13</u>  /*@{*/</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-13"></td></tr>
<tr id="pair-14"><td class="oldblank"></td><td class="newinsert" id="newcode14">  <u>14</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-14"></td></tr>
<tr id="pair-15"><td class="oldblank"></td><td class="newinsert" id="newcode15">  <u>15</u>  typedef struct dwt_local {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-15"></td></tr>
<tr id="pair-16"><td class="oldblank"></td><td class="newinsert" id="newcode16">  <u>16</u>         OPJ_INT32* mem;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-16"></td></tr>
<tr id="pair-17"><td class="oldblank"></td><td class="newinsert" id="newcode17">  <u>17</u> +       OPJ_SIZE_T mem_count;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-17"></td></tr>
<tr id="pair-18"><td class="oldblank"></td><td class="newinsert" id="newcode18">  <u>18</u>         OPJ_INT32 dn;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-18"></td></tr>
<tr id="pair-19"><td class="oldblank"></td><td class="newinsert" id="newcode19">  <u>19</u>         OPJ_INT32 sn;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-19"></td></tr>
<tr id="pair-20"><td class="oldblank"></td><td class="newinsert" id="newcode20">  <u>20</u>         OPJ_INT32 cas;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-20"></td></tr>
<tr id="pair-21"><td class="oldblank"></td><td class="newinsert" id="newcode21">  <u>21</u> @@ -107,16 +105,16 @@ static void opj_dwt_interleave_v(opj_dwt_t* v, OPJ_INT32 *
     a, OPJ_INT32 x);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-21"></td></tr>
<tr id="pair-22"><td class="oldblank"></td><td class="newinsert" id="newcode22">  <u>22</u>  /**</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-22"></td></tr>
<tr id="pair-23"><td class="oldblank"></td><td class="newinsert" id="newcode23">  <u>23</u>  Forward 5-3 wavelet transform in 1-D</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-23"></td></tr>
<tr id="pair-24"><td class="oldblank"></td><td class="newinsert" id="newcode24">  <u>24</u>  */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-24"></td></tr>
<tr id="pair-25"><td class="oldblank"></td><td class="newinsert" id="newcode25">  <u>25</u> -static void opj_dwt_encode_1(OPJ_INT32 *a, OPJ_INT32 dn, OPJ_INT32 sn, OPJ_INT3
     2 cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-25"></td></tr>
<tr id="pair-26"><td class="oldblank"></td><td class="newinsert" id="newcode26">  <u>26</u> +static void opj_dwt_encode_1(OPJ_INT32 *a, OPJ_SIZE_T a_count, OPJ_INT32 dn, OP
     J_INT32 sn, OPJ_INT32 cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-26"></td></tr>
<tr id="pair-27"><td class="oldblank"></td><td class="newinsert" id="newcode27">  <u>27</u>  /**</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-27"></td></tr>
<tr id="pair-28"><td class="oldblank"></td><td class="newinsert" id="newcode28">  <u>28</u>  Inverse 5-3 wavelet transform in 1-D</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-28"></td></tr>
<tr id="pair-29"><td class="oldblank"></td><td class="newinsert" id="newcode29">  <u>29</u>  */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-29"></td></tr>
<tr id="pair-30"><td class="oldblank"></td><td class="newinsert" id="newcode30">  <u>30</u>  static void opj_dwt_decode_1(opj_dwt_t *v);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-30"></td></tr>
<tr id="pair-31"><td class="oldblank"></td><td class="newinsert" id="newcode31">  <u>31</u> -static void opj_dwt_decode_1_(OPJ_INT32 *a, OPJ_INT32 dn, OPJ_INT32 sn, OPJ_INT
     32 cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-31"></td></tr>
<tr id="pair-32"><td class="oldblank"></td><td class="newinsert" id="newcode32">  <u>32</u> +static void opj_dwt_decode_1_(OPJ_INT32 *a, OPJ_SIZE_T a_count, OPJ_INT32 dn, O
     PJ_INT32 sn, OPJ_INT32 cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-32"></td></tr>
<tr id="pair-33"><td class="oldblank"></td><td class="newinsert" id="newcode33">  <u>33</u>  /**</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-33"></td></tr>
<tr id="pair-34"><td class="oldblank"></td><td class="newinsert" id="newcode34">  <u>34</u>  Forward 9-7 wavelet transform in 1-D</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-34"></td></tr>
<tr id="pair-35"><td class="oldblank"></td><td class="newinsert" id="newcode35">  <u>35</u>  */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-35"></td></tr>
<tr id="pair-36"><td class="oldblank"></td><td class="newinsert" id="newcode36">  <u>36</u> -static void opj_dwt_encode_1_real(OPJ_INT32 *a, OPJ_INT32 dn, OPJ_INT32 sn, OPJ
     _INT32 cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-36"></td></tr>
<tr id="pair-37"><td class="oldblank"></td><td class="newinsert" id="newcode37">  <u>37</u> +static void opj_dwt_encode_1_real(OPJ_INT32 *a, OPJ_SIZE_T a_count, OPJ_INT32 d
     n, OPJ_INT32 sn, OPJ_INT32 cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-37"></td></tr>
<tr id="pair-38"><td class="oldblank"></td><td class="newinsert" id="newcode38">  <u>38</u>  /**</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-38"></td></tr>
<tr id="pair-39"><td class="oldblank"></td><td class="newinsert" id="newcode39">  <u>39</u>  Explicit calculation of the Quantization Stepsizes </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-39"></td></tr>
<tr id="pair-40"><td class="oldblank"></td><td class="newinsert" id="newcode40">  <u>40</u>  */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-40"></td></tr>
<tr id="pair-41"><td class="oldblank"></td><td class="newinsert" id="newcode41">  <u>41</u> @@ -124,10 +122,10 @@ static void opj_dwt_encode_stepsize(OPJ_INT32 stepsize, OP
     J_INT32 numbps, opj_st</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-41"></td></tr>
<tr id="pair-42"><td class="oldblank"></td><td class="newinsert" id="newcode42">  <u>42</u>  /**</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-42"></td></tr>
<tr id="pair-43"><td class="oldblank"></td><td class="newinsert" id="newcode43">  <u>43</u>  Inverse wavelet transform in 2-D.</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-43"></td></tr>
<tr id="pair-44"><td class="oldblank"></td><td class="newinsert" id="newcode44">  <u>44</u>  */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-44"></td></tr>
<tr id="pair-45"><td class="oldblank"></td><td class="newinsert" id="newcode45">  <u>45</u> -static OPJ_BOOL opj_dwt_decode_tile(opj_tcd_tilecomp_t* tilec, OPJ_UINT32 i, DW
     T1DFN fn);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-45"></td></tr>
<tr id="pair-46"><td class="oldblank"></td><td class="newinsert" id="newcode46">  <u>46</u> +static OPJ_BOOL opj_dwt_decode_tile(const opj_tcd_tilecomp_t* tilec, OPJ_UINT32
      i, DWT1DFN fn);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-46"></td></tr>
<tr id="pair-47"><td class="oldblank"></td><td class="newinsert" id="newcode47">  <u>47</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-47"></td></tr>
<tr id="pair-48"><td class="oldblank"></td><td class="newinsert" id="newcode48">  <u>48</u> -static OPJ_BOOL opj_dwt_encode_procedure(      opj_tcd_tilecomp_t * tilec,</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-48"></td></tr>
<tr id="pair-49"><td class="oldblank"></td><td class="newinsert" id="newcode49">  <u>49</u> -                                                                               
         void (*p_function)(OPJ_INT32 *, OPJ_INT32,OPJ_INT32,OPJ_INT32) );</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-49"></td></tr>
<tr id="pair-50"><td class="oldblank"></td><td class="newinsert" id="newcode50">  <u>50</u> +static OPJ_BOOL opj_dwt_encode_procedure(const opj_tcd_tilecomp_t * tilec,</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-50"></td></tr>
<tr id="pair-51"><td class="oldblank"></td><td class="newinsert" id="newcode51">  <u>51</u> +                                                                               
         void(*p_function)(OPJ_INT32 *, OPJ_SIZE_T, OPJ_INT32, OPJ_INT32, OPJ_INT32))
     ;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-51"></td></tr>
<tr id="pair-52"><td class="oldblank"></td><td class="newinsert" id="newcode52">  <u>52</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-52"></td></tr>
<tr id="pair-53"><td class="oldblank"></td><td class="newinsert" id="newcode53">  <u>53</u>  static OPJ_UINT32 opj_dwt_max_resolution(opj_tcd_resolution_t* restrict r, OPJ_
     UINT32 i);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-53"></td></tr>
<tr id="pair-54"><td class="oldblank"></td><td class="newinsert" id="newcode54">  <u>54</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-54"></td></tr>
<tr id="pair-55"><td class="oldblank"></td><td class="newinsert" id="newcode55">  <u>55</u> @@ -156,13 +154,20 @@ static void opj_v4dwt_decode_step2(opj_v4_t* l, opj_v4_t* 
     w, OPJ_INT32 k, OPJ_IN</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-55"></td></tr>
<tr id="pair-56"><td class="oldblank"></td><td class="newinsert" id="newcode56">  <u>56</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-56"></td></tr>
<tr id="pair-57"><td class="oldblank"></td><td class="newinsert" id="newcode57">  <u>57</u>  /*@}*/</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-57"></td></tr>
<tr id="pair-58"><td class="oldblank"></td><td class="newinsert" id="newcode58">  <u>58</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-58"></td></tr>
<tr id="pair-59"><td class="oldblank"></td><td class="newinsert" id="newcode59">  <u>59</u> -#define OPJ_S(i) a[(i)*2]</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-59"></td></tr>
<tr id="pair-60"><td class="oldblank"></td><td class="newinsert" id="newcode60">  <u>60</u> -#define OPJ_D(i) a[(1+(i)*2)]</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-60"></td></tr>
<tr id="pair-61"><td class="oldblank"></td><td class="newinsert" id="newcode61">  <u>61</u> -#define OPJ_S_(i) ((i)&lt;0?OPJ_S(0):((i)&gt;=sn?OPJ_S(sn-1):OPJ_S(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-61"></td></tr>
<tr id="pair-62"><td class="oldblank"></td><td class="newinsert" id="newcode62">  <u>62</u> -#define OPJ_D_(i) ((i)&lt;0?OPJ_D(0):((i)&gt;=dn?OPJ_D(dn-1):OPJ_D(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-62"></td></tr>
<tr id="pair-63"><td class="oldblank"></td><td class="newinsert" id="newcode63">  <u>63</u> -/* new */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-63"></td></tr>
<tr id="pair-64"><td class="oldblank"></td><td class="newinsert" id="newcode64">  <u>64</u> -#define OPJ_SS_(i) ((i)&lt;0?OPJ_S(0):((i)&gt;=dn?OPJ_S(dn-1):OPJ_S(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-64"></td></tr>
<tr id="pair-65"><td class="oldblank"></td><td class="newinsert" id="newcode65">  <u>65</u> -#define OPJ_DD_(i) ((i)&lt;0?OPJ_D(0):((i)&gt;=sn?OPJ_D(sn-1):OPJ_D(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-65"></td></tr>
<tr id="pair-66"><td class="oldblank"></td><td class="newinsert" id="newcode66">  <u>66</u> +#define IDX_S(i) (i)*2</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-66"></td></tr>
<tr id="pair-67"><td class="oldblank"></td><td class="newinsert" id="newcode67">  <u>67</u> +#define IDX_D(i) 1 + (i)* 2</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-67"></td></tr>
<tr id="pair-68"><td class="oldblank"></td><td class="newinsert" id="newcode68">  <u>68</u> +#define UNDERFLOW_SN(i) ((i) &gt;= sn&amp;&amp;sn&gt;0)</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-68"></td></tr>
<tr id="pair-69"><td class="oldblank"></td><td class="newinsert" id="newcode69">  <u>69</u> +#define UNDERFLOW_DN(i) ((i) &gt;= dn&amp;&amp;dn&gt;0)</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-69"></td></tr>
<tr id="pair-70"><td class="oldblank"></td><td class="newinsert" id="newcode70">  <u>70</u> +#define OVERFLOW_S(i) (IDX_S(i) &gt;= a_count)</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-70"></td></tr>
<tr id="pair-71"><td class="oldblank"></td><td class="newinsert" id="newcode71">  <u>71</u> +#define OVERFLOW_D(i) (IDX_D(i) &gt;= a_count)</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-71"></td></tr>
<tr id="pair-72"><td class="oldblank"></td><td class="newinsert" id="newcode72">  <u>72</u> +</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-72"></td></tr>
<tr id="pair-73"><td class="oldblank"></td><td class="newinsert" id="newcode73">  <u>73</u> +#define OPJ_S(i) a[IDX_S(i)]</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-73"></td></tr>
<tr id="pair-74"><td class="oldblank"></td><td class="newinsert" id="newcode74">  <u>74</u> +#define OPJ_D(i) a[IDX_D(i)]</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-74"></td></tr>
<tr id="pair-75"><td class="oldblank"></td><td class="newinsert" id="newcode75">  <u>75</u> +#define OPJ_S_(i) ((i)&lt;0 ? OPJ_S(0) : (UNDERFLOW_SN(i) ? OPJ_S(sn - 1) : OVERFL
     OW_S(i) ? OPJ_S(i - 1) : OPJ_S(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-75"></td></tr>
<tr id="pair-76"><td class="oldblank"></td><td class="newinsert" id="newcode76">  <u>76</u> +#define OPJ_D_(i) ((i)&lt;0 ? OPJ_D(0) : (UNDERFLOW_DN(i) ? OPJ_D(dn - 1) : OVERFL
     OW_D(i) ? OPJ_D(i - 1) : OPJ_D(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-76"></td></tr>
<tr id="pair-77"><td class="oldblank"></td><td class="newinsert" id="newcode77">  <u>77</u> +/* new */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-77"></td></tr>
<tr id="pair-78"><td class="oldblank"></td><td class="newinsert" id="newcode78">  <u>78</u> +#define OPJ_SS_(i) ((i)&lt;0 ? OPJ_S(0) : (UNDERFLOW_DN(i) ? OPJ_S(dn - 1) : OVERF
     LOW_S(i) ? OPJ_S(i - 1) : OPJ_S(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-78"></td></tr>
<tr id="pair-79"><td class="oldblank"></td><td class="newinsert" id="newcode79">  <u>79</u> +#define OPJ_DD_(i) ((i)&lt;0 ? OPJ_D(0) : (UNDERFLOW_SN(i) ? OPJ_D(sn - 1) : OVERF
     LOW_D(i) ? OPJ_D(i - 1) : OPJ_D(i)))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-79"></td></tr>
<tr id="pair-80"><td class="oldblank"></td><td class="newinsert" id="newcode80">  <u>80</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-80"></td></tr>
<tr id="pair-81"><td class="oldblank"></td><td class="newinsert" id="newcode81">  <u>81</u>  /* &lt;summary&gt;                                                              */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-81"></td></tr>
<tr id="pair-82"><td class="oldblank"></td><td class="newinsert" id="newcode82">  <u>82</u>  /* This table contains the norms of the 5-3 wavelets for different bands. */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-82"></td></tr>
<tr id="pair-83"><td class="oldblank"></td><td class="newinsert" id="newcode83">  <u>83</u> @@ -283,7 +288,7 @@ static void opj_dwt_interleave_v(opj_dwt_t* v, OPJ_INT32 *a,
      OPJ_INT32 x) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-83"></td></tr>
<tr id="pair-84"><td class="oldblank"></td><td class="newinsert" id="newcode84">  <u>84</u>  /* &lt;summary&gt;                            */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-84"></td></tr>
<tr id="pair-85"><td class="oldblank"></td><td class="newinsert" id="newcode85">  <u>85</u>  /* Forward 5-3 wavelet transform in 1-D. */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-85"></td></tr>
<tr id="pair-86"><td class="oldblank"></td><td class="newinsert" id="newcode86">  <u>86</u>  /* &lt;/summary&gt;                           */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-86"></td></tr>
<tr id="pair-87"><td class="oldblank"></td><td class="newinsert" id="newcode87">  <u>87</u> -static void opj_dwt_encode_1(OPJ_INT32 *a, OPJ_INT32 dn, OPJ_INT32 sn, OPJ_INT3
     2 cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-87"></td></tr>
<tr id="pair-88"><td class="oldblank"></td><td class="newinsert" id="newcode88">  <u>88</u> +static void opj_dwt_encode_1(OPJ_INT32 *a, OPJ_SIZE_T a_count, OPJ_INT32 dn, OP
     J_INT32 sn, OPJ_INT32 cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-88"></td></tr>
<tr id="pair-89"><td class="oldblank"></td><td class="newinsert" id="newcode89">  <u>89</u>         OPJ_INT32 i;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-89"></td></tr>
<tr id="pair-90"><td class="oldblank"></td><td class="newinsert" id="newcode90">  <u>90</u>         </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-90"></td></tr>
<tr id="pair-91"><td class="oldblank"></td><td class="newinsert" id="newcode91">  <u>91</u>         if (!cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-91"></td></tr>
<tr id="pair-92"><td class="oldblank"></td><td class="newinsert" id="newcode92">  <u>92</u> @@ -304,7 +309,7 @@ static void opj_dwt_encode_1(OPJ_INT32 *a, OPJ_INT32 dn, OPJ
     _INT32 sn, OPJ_INT32</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-92"></td></tr>
<tr id="pair-93"><td class="oldblank"></td><td class="newinsert" id="newcode93">  <u>93</u>  /* &lt;summary&gt;                            */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-93"></td></tr>
<tr id="pair-94"><td class="oldblank"></td><td class="newinsert" id="newcode94">  <u>94</u>  /* Inverse 5-3 wavelet transform in 1-D. */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-94"></td></tr>
<tr id="pair-95"><td class="oldblank"></td><td class="newinsert" id="newcode95">  <u>95</u>  /* &lt;/summary&gt;                           */ </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-95"></td></tr>
<tr id="pair-96"><td class="oldblank"></td><td class="newinsert" id="newcode96">  <u>96</u> -static void opj_dwt_decode_1_(OPJ_INT32 *a, OPJ_INT32 dn, OPJ_INT32 sn, OPJ_INT
     32 cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-96"></td></tr>
<tr id="pair-97"><td class="oldblank"></td><td class="newinsert" id="newcode97">  <u>97</u> +static void opj_dwt_decode_1_(OPJ_INT32 *a, OPJ_SIZE_T a_count, OPJ_INT32 dn, O
     PJ_INT32 sn, OPJ_INT32 cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-97"></td></tr>
<tr id="pair-98"><td class="oldblank"></td><td class="newinsert" id="newcode98">  <u>98</u>         OPJ_INT32 i;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-98"></td></tr>
<tr id="pair-99"><td class="oldblank"></td><td class="newinsert" id="newcode99">  <u>99</u>         </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-99"></td></tr>
<tr id="pair-100"><td class="oldblank"></td><td class="newinsert" id="newcode100"> <u>100</u>         if (!cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-100"></td></tr>
<tr id="pair-101"><td class="oldblank"></td><td class="newinsert" id="newcode101"> <u>101</u> @@ -326,13 +331,13 @@ static void opj_dwt_decode_1_(OPJ_INT32 *a, OPJ_INT32 dn, 
     OPJ_INT32 sn, OPJ_INT3</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-101"></td></tr>
<tr id="pair-102"><td class="oldblank"></td><td class="newinsert" id="newcode102"> <u>102</u>  /* Inverse 5-3 wavelet transform in 1-D. */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-102"></td></tr>
<tr id="pair-103"><td class="oldblank"></td><td class="newinsert" id="newcode103"> <u>103</u>  /* &lt;/summary&gt;                           */ </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-103"></td></tr>
<tr id="pair-104"><td class="oldblank"></td><td class="newinsert" id="newcode104"> <u>104</u>  static void opj_dwt_decode_1(opj_dwt_t *v) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-104"></td></tr>
<tr id="pair-105"><td class="oldblank"></td><td class="newinsert" id="newcode105"> <u>105</u> -       opj_dwt_decode_1_(v-&gt;mem, v-&gt;dn, v-&gt;sn, v-&gt;cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-105"></td></tr>
<tr id="pair-106"><td class="oldblank"></td><td class="newinsert" id="newcode106"> <u>106</u> +       opj_dwt_decode_1_(v-&gt;mem, v-&gt;mem_count, v-&gt;dn, v-&gt;sn, v-&gt;cas);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-106"></td></tr>
<tr id="pair-107"><td class="oldblank"></td><td class="newinsert" id="newcode107"> <u>107</u>  }</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-107"></td></tr>
<tr id="pair-108"><td class="oldblank"></td><td class="newinsert" id="newcode108"> <u>108</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-108"></td></tr>
<tr id="pair-109"><td class="oldblank"></td><td class="newinsert" id="newcode109"> <u>109</u>  /* &lt;summary&gt;                             */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-109"></td></tr>
<tr id="pair-110"><td class="oldblank"></td><td class="newinsert" id="newcode110"> <u>110</u>  /* Forward 9-7 wavelet transform in 1-D. */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-110"></td></tr>
<tr id="pair-111"><td class="oldblank"></td><td class="newinsert" id="newcode111"> <u>111</u>  /* &lt;/summary&gt;                            */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-111"></td></tr>
<tr id="pair-112"><td class="oldblank"></td><td class="newinsert" id="newcode112"> <u>112</u> -static void opj_dwt_encode_1_real(OPJ_INT32 *a, OPJ_INT32 dn, OPJ_INT32 sn, OPJ
     _INT32 cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-112"></td></tr>
<tr id="pair-113"><td class="oldblank"></td><td class="newinsert" id="newcode113"> <u>113</u> +static void opj_dwt_encode_1_real(OPJ_INT32 *a, OPJ_SIZE_T a_count, OPJ_INT32 d
     n, OPJ_INT32 sn, OPJ_INT32 cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-113"></td></tr>
<tr id="pair-114"><td class="oldblank"></td><td class="newinsert" id="newcode114"> <u>114</u>         OPJ_INT32 i;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-114"></td></tr>
<tr id="pair-115"><td class="oldblank"></td><td class="newinsert" id="newcode115"> <u>115</u>         if (!cas) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-115"></td></tr>
<tr id="pair-116"><td class="oldblank"></td><td class="newinsert" id="newcode116"> <u>116</u>                 if ((dn &gt; 0) || (sn &gt; 1)) {     /* NEW :  CASE ONE ELEMENT */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-116"></td></tr>
<tr id="pair-117"><td class="oldblank"></td><td class="newinsert" id="newcode117"> <u>117</u> @@ -385,7 +390,7 @@ static void opj_dwt_encode_stepsize(OPJ_INT32 stepsize, OPJ_
     INT32 numbps, opj_st</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-117"></td></tr>
<tr id="pair-118"><td class="oldblank"></td><td class="newinsert" id="newcode118"> <u>118</u>  /* &lt;summary&gt;                            */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-118"></td></tr>
<tr id="pair-119"><td class="oldblank"></td><td class="newinsert" id="newcode119"> <u>119</u>  /* Forward 5-3 wavelet transform in 2-D. */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-119"></td></tr>
<tr id="pair-120"><td class="oldblank"></td><td class="newinsert" id="newcode120"> <u>120</u>  /* &lt;/summary&gt;                           */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-120"></td></tr>
<tr id="pair-121"><td class="oldblank"></td><td class="newinsert" id="newcode121"> <u>121</u> -static INLINE OPJ_BOOL opj_dwt_encode_procedure(opj_tcd_tilecomp_t * tilec,void
      (*p_function)(OPJ_INT32 *, OPJ_INT32,OPJ_INT32,OPJ_INT32) )</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-121"></td></tr>
<tr id="pair-122"><td class="oldblank"></td><td class="newinsert" id="newcode122"> <u>122</u> +static INLINE OPJ_BOOL opj_dwt_encode_procedure(const opj_tcd_tilecomp_t * tile
     c, void(*p_function)(OPJ_INT32 *, OPJ_SIZE_T, OPJ_INT32, OPJ_INT32, OPJ_INT32))</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-122"></td></tr>
<tr id="pair-123"><td class="oldblank"></td><td class="newinsert" id="newcode123"> <u>123</u>  {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-123"></td></tr>
<tr id="pair-124"><td class="oldblank"></td><td class="newinsert" id="newcode124"> <u>124</u>         OPJ_INT32 i, j, k;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-124"></td></tr>
<tr id="pair-125"><td class="oldblank"></td><td class="newinsert" id="newcode125"> <u>125</u>         OPJ_INT32 *a = 00;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-125"></td></tr>
<tr id="pair-126"><td class="oldblank"></td><td class="newinsert" id="newcode126"> <u>126</u> @@ -395,7 +400,8 @@ static INLINE OPJ_BOOL opj_dwt_encode_procedure(opj_tcd_tile
     comp_t * tilec,void</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-126"></td></tr>
<tr id="pair-127"><td class="oldblank"></td><td class="newinsert" id="newcode127"> <u>127</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-127"></td></tr>
<tr id="pair-128"><td class="oldblank"></td><td class="newinsert" id="newcode128"> <u>128</u>         OPJ_INT32 rw;                   /* width of the resolution level compute
     d   */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-128"></td></tr>
<tr id="pair-129"><td class="oldblank"></td><td class="newinsert" id="newcode129"> <u>129</u>         OPJ_INT32 rh;                   /* height of the resolution level comput
     ed  */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-129"></td></tr>
<tr id="pair-130"><td class="oldblank"></td><td class="newinsert" id="newcode130"> <u>130</u> -       OPJ_UINT32 l_data_size;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-130"></td></tr>
<tr id="pair-131"><td class="oldblank"></td><td class="newinsert" id="newcode131"> <u>131</u> +       OPJ_SIZE_T l_data_count;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-131"></td></tr>
<tr id="pair-132"><td class="oldblank"></td><td class="newinsert" id="newcode132"> <u>132</u> +       OPJ_SIZE_T l_data_size;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-132"></td></tr>
<tr id="pair-133"><td class="oldblank"></td><td class="newinsert" id="newcode133"> <u>133</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-133"></td></tr>
<tr id="pair-134"><td class="oldblank"></td><td class="newinsert" id="newcode134"> <u>134</u>         opj_tcd_resolution_t * l_cur_res = 0;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-134"></td></tr>
<tr id="pair-135"><td class="oldblank"></td><td class="newinsert" id="newcode135"> <u>135</u>         opj_tcd_resolution_t * l_last_res = 0;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-135"></td></tr>
<tr id="pair-136"><td class="oldblank"></td><td class="newinsert" id="newcode136"> <u>136</u> @@ -407,8 +413,9 @@ static INLINE OPJ_BOOL opj_dwt_encode_procedure(opj_tcd_tile
     comp_t * tilec,void</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-136"></td></tr>
<tr id="pair-137"><td class="oldblank"></td><td class="newinsert" id="newcode137"> <u>137</u>         l_cur_res = tilec-&gt;resolutions + l;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-137"></td></tr>
<tr id="pair-138"><td class="oldblank"></td><td class="newinsert" id="newcode138"> <u>138</u>         l_last_res = l_cur_res - 1;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-138"></td></tr>
<tr id="pair-139"><td class="oldblank"></td><td class="newinsert" id="newcode139"> <u>139</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-139"></td></tr>
<tr id="pair-140"><td class="oldblank"></td><td class="newinsert" id="newcode140"> <u>140</u> -       l_data_size = opj_dwt_max_resolution( tilec-&gt;resolutions,tilec-&gt;numresol
     utions) * (OPJ_UINT32)sizeof(OPJ_INT32);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-140"></td></tr>
<tr id="pair-141"><td class="oldblank"></td><td class="newinsert" id="newcode141"> <u>141</u> -       bj = (OPJ_INT32*)opj_malloc((size_t)l_data_size);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-141"></td></tr>
<tr id="pair-142"><td class="oldblank"></td><td class="newinsert" id="newcode142"> <u>142</u> +       l_data_count = opj_dwt_max_resolution(tilec-&gt;resolutions, tilec-&gt;numreso
     lutions) * (OPJ_UINT32)sizeof(OPJ_INT32);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-142"></td></tr>
<tr id="pair-143"><td class="oldblank"></td><td class="newinsert" id="newcode143"> <u>143</u> +       l_data_size = l_data_count * (OPJ_UINT32)sizeof(OPJ_INT32);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-143"></td></tr>
<tr id="pair-144"><td class="oldblank"></td><td class="newinsert" id="newcode144"> <u>144</u> +       bj = (OPJ_INT32*)opj_malloc(l_data_size);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-144"></td></tr>
<tr id="pair-145"><td class="oldblank"></td><td class="newinsert" id="newcode145"> <u>145</u>         if (! bj) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-145"></td></tr>
<tr id="pair-146"><td class="oldblank"></td><td class="newinsert" id="newcode146"> <u>146</u>                 return OPJ_FALSE;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-146"></td></tr>
<tr id="pair-147"><td class="oldblank"></td><td class="newinsert" id="newcode147"> <u>147</u>         }</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-147"></td></tr>
<tr id="pair-148"><td class="oldblank"></td><td class="newinsert" id="newcode148"> <u>148</u> @@ -437,7 +444,7 @@ static INLINE OPJ_BOOL opj_dwt_encode_procedure(opj_tcd_tile
     comp_t * tilec,void</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-148"></td></tr>
<tr id="pair-149"><td class="oldblank"></td><td class="newinsert" id="newcode149"> <u>149</u>                                 bj[k] = aj[k*w];</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-149"></td></tr>
<tr id="pair-150"><td class="oldblank"></td><td class="newinsert" id="newcode150"> <u>150</u>                         }</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-150"></td></tr>
<tr id="pair-151"><td class="oldblank"></td><td class="newinsert" id="newcode151"> <u>151</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-151"></td></tr>
<tr id="pair-152"><td class="oldblank"></td><td class="newinsert" id="newcode152"> <u>152</u> -                       (*p_function) (bj, dn, sn, cas_col);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-152"></td></tr>
<tr id="pair-153"><td class="oldblank"></td><td class="newinsert" id="newcode153"> <u>153</u> +                       (*p_function) (bj, l_data_count, dn, sn, cas_col);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-153"></td></tr>
<tr id="pair-154"><td class="oldblank"></td><td class="newinsert" id="newcode154"> <u>154</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-154"></td></tr>
<tr id="pair-155"><td class="oldblank"></td><td class="newinsert" id="newcode155"> <u>155</u>                         opj_dwt_deinterleave_v(bj, aj, dn, sn, w, cas_col);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-155"></td></tr>
<tr id="pair-156"><td class="oldblank"></td><td class="newinsert" id="newcode156"> <u>156</u>                 }</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-156"></td></tr>
<tr id="pair-157"><td class="oldblank"></td><td class="newinsert" id="newcode157"> <u>157</u> @@ -448,7 +455,7 @@ static INLINE OPJ_BOOL opj_dwt_encode_procedure(opj_tcd_tile
     comp_t * tilec,void</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-157"></td></tr>
<tr id="pair-158"><td class="oldblank"></td><td class="newinsert" id="newcode158"> <u>158</u>                 for (j = 0; j &lt; rh; j++) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-158"></td></tr>
<tr id="pair-159"><td class="oldblank"></td><td class="newinsert" id="newcode159"> <u>159</u>                         aj = a + j * w;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-159"></td></tr>
<tr id="pair-160"><td class="oldblank"></td><td class="newinsert" id="newcode160"> <u>160</u>                         for (k = 0; k &lt; rw; k++)  bj[k] = aj[k];</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-160"></td></tr>
<tr id="pair-161"><td class="oldblank"></td><td class="newinsert" id="newcode161"> <u>161</u> -                       (*p_function) (bj, dn, sn, cas_row);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-161"></td></tr>
<tr id="pair-162"><td class="oldblank"></td><td class="newinsert" id="newcode162"> <u>162</u> +                       (*p_function) (bj, l_data_count, dn, sn, cas_row);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-162"></td></tr>
<tr id="pair-163"><td class="oldblank"></td><td class="newinsert" id="newcode163"> <u>163</u>                         opj_dwt_deinterleave_h(bj, aj, dn, sn, cas_row);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-163"></td></tr>
<tr id="pair-164"><td class="oldblank"></td><td class="newinsert" id="newcode164"> <u>164</u>                 }</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-164"></td></tr>
<tr id="pair-165"><td class="oldblank"></td><td class="newinsert" id="newcode165"> <u>165</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-165"></td></tr>
<tr id="pair-166"><td class="oldblank"></td><td class="newinsert" id="newcode166"> <u>166</u> @@ -557,7 +564,7 @@ static OPJ_UINT32 opj_dwt_max_resolution(opj_tcd_resolution_
     t* restrict r, OPJ_U</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-166"></td></tr>
<tr id="pair-167"><td class="oldblank"></td><td class="newinsert" id="newcode167"> <u>167</u>  /* &lt;summary&gt;                            */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-167"></td></tr>
<tr id="pair-168"><td class="oldblank"></td><td class="newinsert" id="newcode168"> <u>168</u>  /* Inverse wavelet transform in 2-D.     */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-168"></td></tr>
<tr id="pair-169"><td class="oldblank"></td><td class="newinsert" id="newcode169"> <u>169</u>  /* &lt;/summary&gt;                           */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-169"></td></tr>
<tr id="pair-170"><td class="oldblank"></td><td class="newinsert" id="newcode170"> <u>170</u> -static OPJ_BOOL opj_dwt_decode_tile(opj_tcd_tilecomp_t* tilec, OPJ_UINT32 numre
     s, DWT1DFN dwt_1D) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-170"></td></tr>
<tr id="pair-171"><td class="oldblank"></td><td class="newinsert" id="newcode171"> <u>171</u> +static OPJ_BOOL opj_dwt_decode_tile(const opj_tcd_tilecomp_t* tilec, OPJ_UINT32
      numres, DWT1DFN dwt_1D) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-171"></td></tr>
<tr id="pair-172"><td class="oldblank"></td><td class="newinsert" id="newcode172"> <u>172</u>         opj_dwt_t h;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-172"></td></tr>
<tr id="pair-173"><td class="oldblank"></td><td class="newinsert" id="newcode173"> <u>173</u>         opj_dwt_t v;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-173"></td></tr>
<tr id="pair-174"><td class="oldblank"></td><td class="newinsert" id="newcode174"> <u>174</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-174"></td></tr>
<tr id="pair-175"><td class="oldblank"></td><td class="newinsert" id="newcode175"> <u>175</u> @@ -568,13 +575,14 @@ static OPJ_BOOL opj_dwt_decode_tile(opj_tcd_tilecomp_t* ti
     lec, OPJ_UINT32 numres</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-175"></td></tr>
<tr id="pair-176"><td class="oldblank"></td><td class="newinsert" id="newcode176"> <u>176</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-176"></td></tr>
<tr id="pair-177"><td class="oldblank"></td><td class="newinsert" id="newcode177"> <u>177</u>         OPJ_UINT32 w = (OPJ_UINT32)(tilec-&gt;x1 - tilec-&gt;x0);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-177"></td></tr>
<tr id="pair-178"><td class="oldblank"></td><td class="newinsert" id="newcode178"> <u>178</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-178"></td></tr>
<tr id="pair-179"><td class="oldblank"></td><td class="newinsert" id="newcode179"> <u>179</u> -       h.mem = (OPJ_INT32*)</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-179"></td></tr>
<tr id="pair-180"><td class="oldblank"></td><td class="newinsert" id="newcode180"> <u>180</u> -       opj_aligned_malloc(opj_dwt_max_resolution(tr, numres) * sizeof(OPJ_INT32
     ));</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-180"></td></tr>
<tr id="pair-181"><td class="oldblank"></td><td class="newinsert" id="newcode181"> <u>181</u> +       h.mem_count = opj_dwt_max_resolution(tr, numres);</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-181"></td></tr>
<tr id="pair-182"><td class="oldblank"></td><td class="newinsert" id="newcode182"> <u>182</u> +       h.mem = (OPJ_INT32*)opj_aligned_malloc(h.mem_count * sizeof(OPJ_INT32));</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-182"></td></tr>
<tr id="pair-183"><td class="oldblank"></td><td class="newinsert" id="newcode183"> <u>183</u>         if (! h.mem){</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-183"></td></tr>
<tr id="pair-184"><td class="oldblank"></td><td class="newinsert" id="newcode184"> <u>184</u>                 /* FIXME event manager error callback */</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-184"></td></tr>
<tr id="pair-185"><td class="oldblank"></td><td class="newinsert" id="newcode185"> <u>185</u>                 return OPJ_FALSE;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-185"></td></tr>
<tr id="pair-186"><td class="oldblank"></td><td class="newinsert" id="newcode186"> <u>186</u>         }</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-186"></td></tr>
<tr id="pair-187"><td class="oldblank"></td><td class="newinsert" id="newcode187"> <u>187</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-187"></td></tr>
<tr id="pair-188"><td class="oldblank"></td><td class="newinsert" id="newcode188"> <u>188</u> +       v.mem_count = h.mem_count;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-188"></td></tr>
<tr id="pair-189"><td class="oldblank"></td><td class="newinsert" id="newcode189"> <u>189</u>         v.mem = h.mem;</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-189"></td></tr>
<tr id="pair-190"><td class="oldblank"></td><td class="newinsert" id="newcode190"> <u>190</u>  </td></tr>
<tr class="inline-comments"><td></td><td id="new-line-190"></td></tr>
<tr id="pair-191"><td class="oldblank"></td><td class="newinsert" id="newcode191"> <u>191</u>         while( --numres) {</td></tr>
<tr class="inline-comments"><td></td><td id="new-line-191"></td></tr>



<tr id="codeBottom"><th>OLD</th><th>NEW</th></tr>

</table>

</div>
<div class="codenav">
<span class="disabled">&laquo; no previous file with comments</span>
|

<a id="prevFile"
   href="/1416783002/diff/20001/third_party/libopenjpeg20/0002-packet-iterator.patch?context=10&column_width=80&tab_spaces=8">
&laquo; third_party/libopenjpeg20/0002-packet-iterator.patch</a> ('k')
|

<link rel="prerender"
   href="/1416783002/diff/20001/third_party/libopenjpeg20/README.pdfium?context=10&column_width=80&tab_spaces=8"></link>
<a id="nextFile"
   href="/1416783002/diff/20001/third_party/libopenjpeg20/README.pdfium?context=10&column_width=80&tab_spaces=8">
third_party/libopenjpeg20/README.pdfium &raquo;</a> ('j')
|

<span class="disabled">no next file with comments &raquo;</span>
</div>
</div>

<script language="JavaScript" type="text/javascript"><!--
var old_snapshot = "old";
var new_snapshot = "new";
var intraLineDiff = new M_IntraLineDiff();
var hookState = new M_HookState(window);
hookState.updateHooks();

var skipped_lines_url = ('/1416783002/diff_skipped_lines/20001/30006/');
;

// -->
</script>


</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 1416783002: Merge to M46: upgrade openjpeg to commit# cf352af
     (Closed) </b><br/>
      Created 5 years, 2 months ago by Lei Zhang<br/>
      Modified 5 years, 2 months ago<br/>
      Reviewers: Tom Sepez<br/>
      Base URL: https://pdfium.googlesource.com/pdfium.git@2490<br/>
      Comments: 0
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
