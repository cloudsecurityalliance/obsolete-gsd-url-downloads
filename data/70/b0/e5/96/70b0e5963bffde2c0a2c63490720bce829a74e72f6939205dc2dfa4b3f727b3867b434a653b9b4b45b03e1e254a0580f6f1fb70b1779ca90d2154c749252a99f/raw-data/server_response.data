<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#759282 - [php-pear] &quot;/tmp&quot; symlink file clobbering (CVE-2014-5459) - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=759282&quot;&gt;759282&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:759282@bugs.debian.org">#759282</a><br>
[php-pear] &quot;/tmp&quot; symlink file clobbering (CVE-2014-5459)</h1>
<div class="versiongraph"><a href="version.cgi?found=php5%2F5.4.4-2;found=php5%2F5.4.4-14%2Bdeb7u14;package=php-pear;absolute=0;info=1;collapse=1"><img alt="version graph" src="version.cgi?collapse=1;height=2;absolute=0;found=php5%2F5.4.4-2;found=php5%2F5.4.4-14%2Bdeb7u14;width=2;package=php-pear"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=php-pear">php-pear</a>;
Maintainer for <a href="pkgreport.cgi?package=php-pear">php-pear</a> is <a href="pkgreport.cgi?maint=team%2Bpkg-php%40tracker.debian.org">Debian PHP Maintainers &lt;team+pkg-php@tracker.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=php-pear">php-pear</a> is <a href="pkgreport.cgi?src=php-pear">src:php-pear</a> (<a href="https://tracker.debian.org/pkg/php-pear">PTS</a>, <a href="https://buildd.debian.org/php-pear">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=php-pear">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=vladz%40devzero.fr">vladz &lt;vladz@devzero.fr&gt;</a></p>
  <p>Date: Mon, 25 Aug 2014 20:00:02 UTC</p>

<p>Severity: normal</p>
<p>Tags: security</p>
<p>Merged with <a href="bugreport.cgi?bug=682157">682157</a></p>

<p>Found in versions php5/5.4.4-2, php5/5.4.4-14+deb7u14</p>



<p>Forwarded to <a href="https://pear.php.net/bugs/bug.php?id=18055">https://pear.php.net/bugs/bug.php?id=18055</a></p>
</div>

<p><a href="mailto:759282@bugs.debian.org">Reply</a> or <a href="mailto:759282-subscribe@bugs.debian.org">subscribe</a> to this bug.</p>
<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=759282;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1408996806 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Mon, 25 Aug 2014 20:00:06 GMT) (<a href="bugreport.cgi?bug=759282;msg=2">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: vladz &lt;vladz@devzero.fr&gt; -->
<!-- time:1408996806 -->
<strong>Acknowledgement sent</strong>
to <code>vladz &lt;vladz@devzero.fr&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Mon, 25 Aug 2014 20:00:06 GMT) (<a href="bugreport.cgi?bug=759282;msg=4">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=5">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=5">mbox</a>, <a href="mailto:759282@bugs.debian.org?In-Reply-To=%3C20140825192844.GA8903%40devzero.fr%3E&amp;subject=Re%3A%20%5Bphp-pear%5D%20%22%2Ftmp%22%20symlink%20file%20clobbering&amp;body=On%20Mon%2C%2025%20Aug%202014%2021%3A28%3A44%20%2B0200%20vladz%20%3Cvladz%40devzero.fr%3E%20wrote%3A%0A%3E%20%0A%3E%20Package%3A%20php-pear%0A%3E%20Version%3A%205.4.4-14%2Bdeb7u14%0A%3E%20Tags%3A%20security%0A%3E%20%0A%3E%20PEAR%20commands%20such%20as%20%22pear%20install%20%5B...%5D%22%20writes%20cache%20data%20into%0A%3E%20predictable%20filenames%20located%20in%20%22%2Ftmp%2F%22.%20%20Unprivileged%20local%20users%0A%3E%20could%20use%20symlinks%20to%20clobber%20arbitrary%20files.%0A%3E%20%0A%3E%20Temporary%20filenames%20%28%22%24cachefile%22%20and%20%22%24cacheidfile%22%29%20are%20generated%20with%0A%3E%20the%20code%20above.%20%20They%20are%20predictable%20as%20far%20as%20we%20know%20the%20extension%0A%3E%20name%20that%20is%20going%20to%20be%20installed%20%28this%20name%20is%20used%20to%20construct%20the%0A%3E%20url%20for%20the%20MD5%20checksum%29%3A%0A%3E%20%0A%3E%20%20%20%20%20%24%20cat%20-n%20%2Fusr%2Fshare%2Fphp%2FPEAR%2FREST.php%0A%3E%20%20%20%20%20%5B...%5D%0A%3E%20%20%20%20%2059%20%20%20%20%20%20%20%20%20%24cachefile%20%3D%20%24this-%3Econfig-%3Eget%28%27cache_dir%27%29%20.%20DIRECTORY_SEPARATOR%20.%0A%3E%20%20%20%20%2060%20%20%20%20%20%20%20%20%20%20%20%20%20md5%28%24url%29%20.%20%27rest.cachefile%27%3B%0A%3E%20%20%20%20%20%5B...%5D%0A%3E%20%20%20%20%20194%20%20%20%20%20%20%20%20%24cacheidfile%20%3D%20%24this-%3Econfig-%3Eget%28%27cache_dir%27%29%20.%20DIRECTORY_SEPARATOR%20.%0A%3E%20%20%20%20%20195%20%20%20%20%20%20%20%20%20%20%20%20md5%28%24url%29%20.%20%27rest.cacheid%27%3B%0A%3E%20%0A%3E%20For%20instance%2C%20when%20installing%20the%20%22Mail_mime%22%20extension%2C%20the%20following%0A%3E%20filenames%20are%20used%20by%20PEAR%3A%0A%3E%20%20%20%0A%3E%20%20%20-%20%2Ftmp%2Fpear%2Fcache%2Fff051dc5b96c95bf60e300d415b6c47erest.cachefile%0A%3E%20%20%20-%20%2Ftmp%2Fpear%2Fcache%2Fff051dc5b96c95bf60e300d415b6c47erest.cacheid%0A%3E%20%0A%3E%20In%20this%20case%2C%20the%20%22%24url%22%20used%20for%20md5%20checksum%20is%20the%20following%3A%0A%3E%20%0A%3E%20%20%20%20%20%24%20printf%20%22http%3A%2F%2Fpear.php.net%2Frest%2Fp%2Fmail_mime%2Finfo.xml%22%20%7C%20md5sum%0A%3E%20%20%20%20%20ff051dc5b96c95bf60e300d415b6c47e%20%20-%0A%3E%20%0A%3E%20To%20sum%20up%2C%20if%20a%20local%20user%20wants%20to%20clobber%20the%20%22%2Fetc%2Fshadow%22%20file%2C%20he%0A%3E%20runs%3A%0A%3E%20%0A%3E%20%20%20%20%20%24%20mkdir%20-p%20%2Ftmp%2Fpear%2Fcache%2F%0A%3E%20%20%20%20%20%24%20ln%20-s%20%2Fetc%2Fshadow%20%2Ftmp%2Fpear%2Fcache%2Fff051dc5b96c95bf60e300d415b6c47erest.cachefile%0A%3E%20%0A%3E%20Then%20when%20root%20runs%20PEAR%2C%20file%20gets%20clobbered%3A%0A%3E%20%0A%3E%20%20%20%20%20%23%20pear%20install%20Mail_mime%0A%3E%20%20%20%20%20%5B...%5D%0A%3E%20%20%20%20%20%23%20du%20-sk%20%2Fetc%2Fshadow%0A%3E%20%20%20%20%200%09%2Fetc%2Fshadow%0A%3E%20%0A%3E%20A%20function%20like%20tempnam%28%29%20could%20be%20use%20instead.%20%20It%20creates%20file%20with%0A%3E%20unique%20filename%20%28see%20http%3A%2F%2Fphp.net%2Fmanual%2Fen%2Ffunction.tempnam.php%29.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20--%20%0A%3E%20http%3A%2F%2Fvladz.devzero.fr%0A%3E%20PGP%20key%208F7E2D3C%20from%20pgp.mit.edu%0A%3E%20%0A%3E%20%0A&amp;References=%3C20140825192844.GA8903%40devzero.fr%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=vladz%40devzero.fr" alt="">
<div class="header"><span class="headerfield">From:</span> vladz &lt;vladz@devzero.fr&gt;</div>
<div class="header"><span class="headerfield">To:</span> submit@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> [php-pear] &quot;/tmp&quot; symlink file clobbering</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 25 Aug 2014 21:28:44 +0200</div>
</div>
<pre class="message">
Package: php-pear
Version: 5.4.4-14+deb7u14
Tags: security

PEAR commands such as &quot;pear install [...]&quot; writes cache data into
predictable filenames located in &quot;/tmp/&quot;.  Unprivileged local users
could use symlinks to clobber arbitrary files.

Temporary filenames (&quot;$cachefile&quot; and &quot;$cacheidfile&quot;) are generated with
the code above.  They are predictable as far as we know the extension
name that is going to be installed (this name is used to construct the
url for the MD5 checksum):

    $ cat -n /usr/share/php/PEAR/REST.php
    [...]
    59         $cachefile = $this-&gt;config-&gt;get(&#39;cache_dir&#39;) . DIRECTORY_SEPARATOR .
    60             md5($url) . &#39;rest.cachefile&#39;;
    [...]
    194        $cacheidfile = $this-&gt;config-&gt;get(&#39;cache_dir&#39;) . DIRECTORY_SEPARATOR .
    195            md5($url) . &#39;rest.cacheid&#39;;

For instance, when installing the &quot;Mail_mime&quot; extension, the following
filenames are used by PEAR:
  
  - /tmp/pear/cache/ff051dc5b96c95bf60e300d415b6c47erest.cachefile
  - /tmp/pear/cache/ff051dc5b96c95bf60e300d415b6c47erest.cacheid

In this case, the &quot;$url&quot; used for md5 checksum is the following:

    $ printf &quot;<a href="http://pear.php.net/rest/p/mail_mime/info.xml">http://pear.php.net/rest/p/mail_mime/info.xml</a>&quot; | md5sum
    ff051dc5b96c95bf60e300d415b6c47e  -

To sum up, if a local user wants to clobber the &quot;/etc/shadow&quot; file, he
runs:

    $ mkdir -p /tmp/pear/cache/
    $ ln -s /etc/shadow /tmp/pear/cache/ff051dc5b96c95bf60e300d415b6c47erest.cachefile

Then when root runs PEAR, file gets clobbered:

    # pear install Mail_mime
    [...]
    # du -sk /etc/shadow
    0	/etc/shadow

A function like tempnam() could be use instead.  It creates file with
unique filename (see <a href="http://php.net/manual/en/function.tempnam.php">http://php.net/manual/en/function.tempnam.php</a>).

Regards,
-- 
<a href="http://vladz.devzero.fr">http://vladz.devzero.fr</a>
PGP key 8F7E2D3C from pgp.mit.edu


</pre>

<div class="infmessage"><hr><p>
<a name="6"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1409028845 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Tue, 26 Aug 2014 04:54:05 GMT) (<a href="bugreport.cgi?bug=759282;msg=7">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="8"></a>
<!-- request_addr: mmcallis@redhat.com -->
<!-- time:1409028845 -->
<strong>Acknowledgement sent</strong>
to <code>mmcallis@redhat.com</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Tue, 26 Aug 2014 04:54:05 GMT) (<a href="bugreport.cgi?bug=759282;msg=9">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=10">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=10">mbox</a>, <a href="mailto:759282@bugs.debian.org?body=On%20Tue%2C%2026%20Aug%202014%2014%3A50%3A09%20%2B1000%20Murray%20McAllister%20%3Cmmcallis%40redhat.com%3E%20wrote%3A%0A%3E%20Hello%2C%0A%3E%20%0A%3E%20It%20was%20reported%20that%20the%20pear%20utility%20insecurely%20used%20the%20%2Ftmp%2F%20%0A%3E%20directory%20for%20cache%20data.%20A%20local%20attacker%20could%20use%20this%20flaw%20to%20%0A%3E%20perform%20a%20symbolic%20link%20attack%20against%20a%20user%20%28typically%20the%20root%20user%29%20%0A%3E%20running%20a%20pear%20command%20%28such%20as%20%22pear%20install%22%29.%0A%3E%20%0A%3E%20Original%20report%3A%0A%3E%20%0A%3E%20https%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D759282%0A%3E%20%0A%3E%20Could%20a%20CVE%20please%20be%20assigned%3F%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20%0A%3E%20--%0A%3E%20Murray%20McAllister%20%2F%20Red%20Hat%20Product%20Security%0A%3E%20%0A%3E%20%0A&amp;References=%3C53FC1201.7040505%40redhat.com%3E&amp;In-Reply-To=%3C53FC1201.7040505%40redhat.com%3E&amp;subject=Re%3A%20CVE%20request%3A%20php-pear%2C%20pear%27s%20insecure%20%2Ftmp%2F%20use%20for%20cache%20data">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=mmcallis%40redhat.com" alt="">
<div class="header"><span class="headerfield">From:</span> Murray McAllister &lt;mmcallis@redhat.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> oss-security@lists.openwall.com</div>
<div class="header"><span class="headerfield">Cc:</span> 759282@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> CVE request: php-pear, pear&#39;s insecure /tmp/ use for cache data</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 26 Aug 2014 14:50:09 +1000</div>
</div>
<pre class="message flowed">Hello,

It was reported that the pear utility insecurely used the /tmp/ 
directory for cache data. A local attacker could use this flaw to 
perform a symbolic link attack against a user (typically the root user) 
running a pear command (such as &quot;pear install&quot;).

Original report:

<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=759282">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=759282</a>

Could a CVE please be assigned?

Thanks,

--
Murray McAllister / Red Hat Product Security


</pre>

<div class="infmessage"><hr><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1409044868 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Tue, 26 Aug 2014 09:21:08 GMT) (<a href="bugreport.cgi?bug=759282;msg=12">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=12">mbox</a>, <a href="#11">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="13"></a>
<!-- request_addr: Ondřej Surý &lt;ondrej@sury.org&gt; -->
<!-- time:1409044868 -->
<strong>Acknowledgement sent</strong>
to <code>Ondřej Surý &lt;ondrej@sury.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Tue, 26 Aug 2014 09:21:08 GMT) (<a href="bugreport.cgi?bug=759282;msg=14">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=14">mbox</a>, <a href="#13">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="15"></a><a name="msg15"></a><a href="#15">Message #15</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=15">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=15">mbox</a>, <a href="mailto:759282@bugs.debian.org?body=On%20Tue%2C%2026%20Aug%202014%2011%3A20%3A14%20%2B0200%20%3D%3FUTF-8%3FQ%3FOnd%3DC5%3D99ej%3D20Sur%3DC3%3DBD%3F%3D%20%3Condrej%40sury.org%3E%20wrote%3A%0A%3E%20Control%3A%20forcemerge%20-1%20682157%0A%3E%20%0A%3E%20Yes%2C%20it%27s%20a%20known%20bug%20that%20php-pear%20is%20not%20safe%20on%20multiuser%20systems.%0A%3E%20%0A%3E%20Ondrej%0A%3E%20%0A%3E%20On%20Mon%2C%20Aug%2025%2C%202014%2C%20at%2021%3A28%2C%20vladz%20wrote%3A%0A%3E%20%3E%20%0A%3E%20%3E%20Package%3A%20php-pear%0A%3E%20%3E%20Version%3A%205.4.4-14%2Bdeb7u14%0A%3E%20%3E%20Tags%3A%20security%0A%3E%20%3E%20%0A%3E%20%3E%20PEAR%20commands%20such%20as%20%22pear%20install%20%5B...%5D%22%20writes%20cache%20data%20into%0A%3E%20%3E%20predictable%20filenames%20located%20in%20%22%2Ftmp%2F%22.%20%20Unprivileged%20local%20users%0A%3E%20%3E%20could%20use%20symlinks%20to%20clobber%20arbitrary%20files.%0A%3E%20%3E%20%0A%3E%20%3E%20Temporary%20filenames%20%28%22%24cachefile%22%20and%20%22%24cacheidfile%22%29%20are%20generated%20with%0A%3E%20%3E%20the%20code%20above.%20%20They%20are%20predictable%20as%20far%20as%20we%20know%20the%20extension%0A%3E%20%3E%20name%20that%20is%20going%20to%20be%20installed%20%28this%20name%20is%20used%20to%20construct%20the%0A%3E%20%3E%20url%20for%20the%20MD5%20checksum%29%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%20%20%20%20%24%20cat%20-n%20%2Fusr%2Fshare%2Fphp%2FPEAR%2FREST.php%0A%3E%20%3E%20%20%20%20%20%5B...%5D%0A%3E%20%3E%20%20%20%20%2059%20%20%20%20%20%20%20%20%20%24cachefile%20%3D%20%24this-%3Econfig-%3Eget%28%27cache_dir%27%29%20.%0A%3E%20%3E%20%20%20%20%20DIRECTORY_SEPARATOR%20.%0A%3E%20%3E%20%20%20%20%2060%20%20%20%20%20%20%20%20%20%20%20%20%20md5%28%24url%29%20.%20%27rest.cachefile%27%3B%0A%3E%20%3E%20%20%20%20%20%5B...%5D%0A%3E%20%3E%20%20%20%20%20194%20%20%20%20%20%20%20%20%24cacheidfile%20%3D%20%24this-%3Econfig-%3Eget%28%27cache_dir%27%29%20.%0A%3E%20%3E%20%20%20%20%20DIRECTORY_SEPARATOR%20.%0A%3E%20%3E%20%20%20%20%20195%20%20%20%20%20%20%20%20%20%20%20%20md5%28%24url%29%20.%20%27rest.cacheid%27%3B%0A%3E%20%3E%20%0A%3E%20%3E%20For%20instance%2C%20when%20installing%20the%20%22Mail_mime%22%20extension%2C%20the%20following%0A%3E%20%3E%20filenames%20are%20used%20by%20PEAR%3A%0A%3E%20%3E%20%20%20%0A%3E%20%3E%20%20%20-%20%2Ftmp%2Fpear%2Fcache%2Fff051dc5b96c95bf60e300d415b6c47erest.cachefile%0A%3E%20%3E%20%20%20-%20%2Ftmp%2Fpear%2Fcache%2Fff051dc5b96c95bf60e300d415b6c47erest.cacheid%0A%3E%20%3E%20%0A%3E%20%3E%20In%20this%20case%2C%20the%20%22%24url%22%20used%20for%20md5%20checksum%20is%20the%20following%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%20%20%20%20%24%20printf%20%22http%3A%2F%2Fpear.php.net%2Frest%2Fp%2Fmail_mime%2Finfo.xml%22%20%7C%20md5sum%0A%3E%20%3E%20%20%20%20%20ff051dc5b96c95bf60e300d415b6c47e%20%20-%0A%3E%20%3E%20%0A%3E%20%3E%20To%20sum%20up%2C%20if%20a%20local%20user%20wants%20to%20clobber%20the%20%22%2Fetc%2Fshadow%22%20file%2C%20he%0A%3E%20%3E%20runs%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%20%20%20%20%24%20mkdir%20-p%20%2Ftmp%2Fpear%2Fcache%2F%0A%3E%20%3E%20%20%20%20%20%24%20ln%20-s%20%2Fetc%2Fshadow%0A%3E%20%3E%20%20%20%20%20%2Ftmp%2Fpear%2Fcache%2Fff051dc5b96c95bf60e300d415b6c47erest.cachefile%0A%3E%20%3E%20%0A%3E%20%3E%20Then%20when%20root%20runs%20PEAR%2C%20file%20gets%20clobbered%3A%0A%3E%20%3E%20%0A%3E%20%3E%20%20%20%20%20%23%20pear%20install%20Mail_mime%0A%3E%20%3E%20%20%20%20%20%5B...%5D%0A%3E%20%3E%20%20%20%20%20%23%20du%20-sk%20%2Fetc%2Fshadow%0A%3E%20%3E%20%20%20%20%200%20%20%20%20%20%20%20%2Fetc%2Fshadow%0A%3E%20%3E%20%0A%3E%20%3E%20A%20function%20like%20tempnam%28%29%20could%20be%20use%20instead.%20%20It%20creates%20file%20with%0A%3E%20%3E%20unique%20filename%20%28see%20http%3A%2F%2Fphp.net%2Fmanual%2Fen%2Ffunction.tempnam.php%29.%0A%3E%20%3E%20%0A%3E%20%3E%20Regards%2C%0A&amp;References=%3C20140825192844.GA8903%40devzero.fr%3E%0A%20%3C1409044814.596271.156809717.52787FD2%40webmail.messagingengine.com%3E&amp;subject=Re%3A%20%5Bphp-maint%5D%20Bug%23759282%3A%20%5Bphp-pear%5D%20%22%2Ftmp%22%20symlink%20file%20clobbering&amp;In-Reply-To=%3C1409044814.596271.156809717.52787FD2%40webmail.messagingengine.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ondrej%40sury.org" alt="">
<div class="header"><span class="headerfield">From:</span> Ondřej Surý &lt;ondrej@sury.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> vladz &lt;vladz@devzero.fr&gt;, 759282@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: [php-maint] Bug#759282: [php-pear] &quot;/tmp&quot; symlink file clobbering</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 26 Aug 2014 11:20:14 +0200</div>
</div>
<pre class="message">Control: forcemerge -1 682157

Yes, it&#39;s a known bug that php-pear is not safe on multiuser systems.

Ondrej

On Mon, Aug 25, 2014, at 21:28, vladz wrote:
&gt; 
&gt; Package: php-pear
&gt; Version: 5.4.4-14+deb7u14
&gt; Tags: security
&gt; 
&gt; PEAR commands such as &quot;pear install [...]&quot; writes cache data into
&gt; predictable filenames located in &quot;/tmp/&quot;.  Unprivileged local users
&gt; could use symlinks to clobber arbitrary files.
&gt; 
&gt; Temporary filenames (&quot;$cachefile&quot; and &quot;$cacheidfile&quot;) are generated with
&gt; the code above.  They are predictable as far as we know the extension
&gt; name that is going to be installed (this name is used to construct the
&gt; url for the MD5 checksum):
&gt; 
&gt;     $ cat -n /usr/share/php/PEAR/REST.php
&gt;     [...]
&gt;     59         $cachefile = $this-&gt;config-&gt;get(&#39;cache_dir&#39;) .
&gt;     DIRECTORY_SEPARATOR .
&gt;     60             md5($url) . &#39;rest.cachefile&#39;;
&gt;     [...]
&gt;     194        $cacheidfile = $this-&gt;config-&gt;get(&#39;cache_dir&#39;) .
&gt;     DIRECTORY_SEPARATOR .
&gt;     195            md5($url) . &#39;rest.cacheid&#39;;
&gt; 
&gt; For instance, when installing the &quot;Mail_mime&quot; extension, the following
&gt; filenames are used by PEAR:
&gt;   
&gt;   - /tmp/pear/cache/ff051dc5b96c95bf60e300d415b6c47erest.cachefile
&gt;   - /tmp/pear/cache/ff051dc5b96c95bf60e300d415b6c47erest.cacheid
&gt; 
&gt; In this case, the &quot;$url&quot; used for md5 checksum is the following:
&gt; 
&gt;     $ printf &quot;<a href="http://pear.php.net/rest/p/mail_mime/info.xml">http://pear.php.net/rest/p/mail_mime/info.xml</a>&quot; | md5sum
&gt;     ff051dc5b96c95bf60e300d415b6c47e  -
&gt; 
&gt; To sum up, if a local user wants to clobber the &quot;/etc/shadow&quot; file, he
&gt; runs:
&gt; 
&gt;     $ mkdir -p /tmp/pear/cache/
&gt;     $ ln -s /etc/shadow
&gt;     /tmp/pear/cache/ff051dc5b96c95bf60e300d415b6c47erest.cachefile
&gt; 
&gt; Then when root runs PEAR, file gets clobbered:
&gt; 
&gt;     # pear install Mail_mime
&gt;     [...]
&gt;     # du -sk /etc/shadow
&gt;     0       /etc/shadow
&gt; 
&gt; A function like tempnam() could be use instead.  It creates file with
&gt; unique filename (see <a href="http://php.net/manual/en/function.tempnam.php">http://php.net/manual/en/function.tempnam.php</a>).
&gt; 
&gt; Regards,
&gt; -- 
&gt; <a href="http://vladz.devzero.fr">http://vladz.devzero.fr</a>
&gt; PGP key 8F7E2D3C from pgp.mit.edu
&gt; 
&gt; _______________________________________________
&gt; pkg-php-maint mailing list
&gt; pkg-php-maint@lists.alioth.debian.org
&gt; <a href="http://lists.alioth.debian.org/cgi-bin/mailman/listinfo/pkg-php-maint">http://lists.alioth.debian.org/cgi-bin/mailman/listinfo/pkg-php-maint</a>


-- 
Ondřej Surý &lt;ondrej@sury.org&gt;
Knot DNS (<a href="https://www.knot-dns.cz/">https://www.knot-dns.cz/</a>) – a high-performance DNS server


</pre>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- command:found -->
<!-- requester: Ondřej Surý &lt;ondrej@sury.org&gt; -->
<!-- request_addr: 759282-submit@bugs.debian.org -->
<!-- time:1409044871 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;php5/5.4.4-14+deb7u14&#39;,
                                    &#39;php5/5.4.4-2&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;php5/5.4.4-14+deb7u14&#39;
                                  ]
            };
-->
<strong>Marked as found in versions php5/5.4.4-2.</strong>
Request was from <code>Ondřej Surý &lt;ondrej@sury.org&gt;</code>
to <code>759282-submit@bugs.debian.org</code>.
 (Tue, 26 Aug 2014 09:21:11 GMT) (<a href="bugreport.cgi?bug=759282;msg=17">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="18"></a>
<!-- command:merge -->
<!-- requester: Ondřej Surý &lt;ondrej@sury.org&gt; -->
<!-- request_addr: 759282-submit@bugs.debian.org -->
<!-- time:1409044872 -->
<!-- new_data:
$new_data = {
              &#39;mergedwith&#39; =&gt; &#39;682157&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;mergedwith&#39; =&gt; &#39;&#39;
            };
-->
<strong>Merged <a href="bugreport.cgi?bug=682157">682157</a> <a href="bugreport.cgi?bug=759282">759282</a></strong>
Request was from <code>Ondřej Surý &lt;ondrej@sury.org&gt;</code>
to <code>759282-submit@bugs.debian.org</code>.
 (Tue, 26 Aug 2014 09:21:12 GMT) (<a href="bugreport.cgi?bug=759282;msg=19">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="20"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1409117764 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Wed, 27 Aug 2014 05:36:04 GMT) (<a href="bugreport.cgi?bug=759282;msg=21">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="22"></a>
<!-- request_addr: cve-assign@mitre.org -->
<!-- time:1409117764 -->
<strong>Acknowledgement sent</strong>
to <code>cve-assign@mitre.org</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Wed, 27 Aug 2014 05:36:04 GMT) (<a href="bugreport.cgi?bug=759282;msg=23">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=23">mbox</a>, <a href="#22">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="24"></a><a name="msg24"></a><a href="#24">Message #24</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=24">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=24">mbox</a>, <a href="mailto:759282@bugs.debian.org?subject=Re%3A%20CVE%20request%3A%20php-pear%2C%20pear%27s%20insecure%20%2Ftmp%2F%20use%20for%20cache%20data&amp;In-Reply-To=%3C20140827052420.EF0581F050D%40smtpksrv1.mitre.org%3E&amp;body=On%20Wed%2C%2027%20Aug%202014%2001%3A24%3A20%20-0400%20%28EDT%29%20cve-assign%40mitre.org%20wrote%3A%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA1%0A%3E%20%0A%3E%20%3E%20https%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D759282%0A%3E%20%0A%3E%20Use%20CVE-2014-5459.%0A%3E%20%0A%3E%20-%20--%20%0A%3E%20CVE%20assignment%20team%2C%20MITRE%20CVE%20Numbering%20Authority%0A%3E%20M%2FS%20M300%0A%3E%20202%20Burlington%20Road%2C%20Bedford%2C%20MA%2001730%20USA%0A%3E%20%5B%20PGP%20key%20available%20through%20http%3A%2F%2Fcve.mitre.org%2Fcve%2Frequest_id.html%20%5D%0A%3E%20-----BEGIN%20PGP%20SIGNATURE-----%0A%3E%20Version%3A%20GnuPG%20v1.4.14%20%28SunOS%29%0A%3E%20%0A%3E%20iQEcBAEBAgAGBQJT%2FWsUAAoJEKllVAevmvmsaXEH%2F3bwwhDnyGdxilowL2kx%2FS%2Bj%0A%3E%20gRmak0Uegsz5ZfDgl3PIzxKBc2EkwZrRhPlgeBVx6%2BOtGlp6MHjrMXYHp06LJBXj%0A%3E%20RegI3t%2BgyBXEjUrOHmOHdY1N7RnprMu5YZnB5LErKicqp0SivDEDcSiecSbDTk9o%0A%3E%20LXlvE1mPHfZzwhiqWUtFfyNVUb7CmnQWT5WLgWDaRVAXIqWNIiv%2FfwwIJgD3MTSp%0A%3E%20k6WmlhCwXAWBLq3t8zgV8jSSsZW2KCgFpzUJEZuzPlTpSaZys6zCl2s8tgfwpGCj%0A%3E%20zWVZmyRmn6IAC6t%2FhuK%2FZs3nhuNX2SKksLGtxVnGvklNd1gkUimvqVDSX2YZ1Wk%3D%0A%3E%20%3DS9dC%0A%3E%20-----END%20PGP%20SIGNATURE-----%0A%3E%20%0A%3E%20%0A&amp;References=%3C20140827052420.EF0581F050D%40smtpksrv1.mitre.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=cve-assign%40mitre.org" alt="">
<div class="header"><span class="headerfield">From:</span> cve-assign@mitre.org</div>
<div class="header"><span class="headerfield">To:</span> mmcallis@redhat.com, 759282@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> cve-assign@mitre.org, oss-security@lists.openwall.com</div>
<div class="header"><span class="headerfield">Subject:</span> Re: CVE request: php-pear, pear&#39;s insecure /tmp/ use for cache data</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 27 Aug 2014 01:24:20 -0400 (EDT)</div>
</div>
<pre class="message">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

&gt; <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=759282">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=759282</a>

Use <a href="https://security-tracker.debian.org/tracker/CVE-2014-5459">CVE-2014-5459</a>.

- -- 
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <a href="http://cve.mitre.org/cve/request_id.html">http://cve.mitre.org/cve/request_id.html</a> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJT/WsUAAoJEKllVAevmvmsaXEH/3bwwhDnyGdxilowL2kx/S+j
gRmak0Uegsz5ZfDgl3PIzxKBc2EkwZrRhPlgeBVx6+OtGlp6MHjrMXYHp06LJBXj
RegI3t+gyBXEjUrOHmOHdY1N7RnprMu5YZnB5LErKicqp0SivDEDcSiecSbDTk9o
LXlvE1mPHfZzwhiqWUtFfyNVUb7CmnQWT5WLgWDaRVAXIqWNIiv/fwwIJgD3MTSp
k6WmlhCwXAWBLq3t8zgV8jSSsZW2KCgFpzUJEZuzPlTpSaZys6zCl2s8tgfwpGCj
zWVZmyRmn6IAC6t/huK/Zs3nhuNX2SKksLGtxVnGvklNd1gkUimvqVDSX2YZ1Wk=
=S9dC
-----END PGP SIGNATURE-----


</pre>

<div class="msgreceived"><hr><p>
<a name="25"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1409118125 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;[php-pear] &quot;/tmp&quot; symlink file clobbering (CVE-2014-5459)&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;[php-pear] &quot;/tmp&quot; symlink file clobbering&#39;
            };
-->
<strong>Changed Bug title to &#39;[php-pear] &quot;/tmp&quot; symlink file clobbering (CVE-2014-5459)&#39; from &#39;[php-pear] &quot;/tmp&quot; symlink file clobbering&#39;</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 27 Aug 2014 05:42:05 GMT) (<a href="bugreport.cgi?bug=759282;msg=26">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=26">mbox</a>, <a href="#25">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="27"></a>
<!-- command:forwarded -->
<!-- requester: Ondřej Surý &lt;ondrej@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1409129837 -->
<!-- new_data:
$new_data = {
              &#39;forwarded&#39; =&gt; &#39;<a href="https://pear.php.net/bugs/bug.php?id=18055">https://pear.php.net/bugs/bug.php?id=18055</a>&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;forwarded&#39; =&gt; &#39;&#39;
            };
-->
<strong>Set Bug forwarded-to-address to &#39;<a href="https://pear.php.net/bugs/bug.php?id=18055">https://pear.php.net/bugs/bug.php?id=18055</a>&#39;.</strong>
Request was from <code>Ondřej Surý &lt;ondrej@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 27 Aug 2014 08:57:17 GMT) (<a href="bugreport.cgi?bug=759282;msg=28">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=28">mbox</a>, <a href="#27">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="29"></a><a name="msg29"></a><a href="#29">Message #29</a> received at 682157-done@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=29">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=29">mbox</a>, <a href="mailto:759282@bugs.debian.org?body=On%20Sat%2C%207%20Nov%202015%2014%3A25%3A32%20%2B0100%20Mathieu%20Parent%20%3Cmath.parent%40gmail.com%3E%20wrote%3A%0A%3E%20Version%3A%205.3.6-1%0A%3E%20%0A%3E%20Hello%2C%0A%3E%20%0A%3E%20According%20to%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18056%2C%20it%27s%20fixed%20since%201.9.2%0A%3E%20%0A%3E%20Regards%0A%3E%20--%20%0A%3E%20Mathieu%0A%3E%20%0A%3E%20%0A&amp;References=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E&amp;In-Reply-To=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E&amp;subject=Re%3A%20FIxed%20since%201.9.2">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=math.parent%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> Mathieu Parent &lt;math.parent@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 682157-done@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> FIxed since 1.9.2</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 7 Nov 2015 14:25:32 +0100</div>
</div>
<pre class="message wrapping">Version: 5.3.6-1

Hello,

According to <a href="https://pear.php.net/bugs/bug.php?id=18056">https://pear.php.net/bugs/bug.php?id=18056</a>, it&#39;s fixed since 1.9.2

Regards
-- 
Mathieu


</pre>

<div class="msgreceived"><hr><p>
<a name="30"></a>
<!-- command:done -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1446904448 -->
<!-- new_data:
$new_data = {
              &#39;done&#39; =&gt; &#39;&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;done&#39; =&gt; &#39;Mathieu Parent &lt;math.parent@gmail.com&gt;&#39;
            };
-->
<strong>Bug reopened</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 07 Nov 2015 13:54:08 GMT) (<a href="bugreport.cgi?bug=759282;msg=31">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=31">mbox</a>, <a href="#30">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="32"></a>
<!-- command:fixed -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1446904450 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;php5/5.4.4-2&#39;,
                                    &#39;php5/5.4.4-14+deb7u14&#39;
                                  ],
              &#39;fixed_versions&#39; =&gt; []
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;php5/5.4.4-14+deb7u14&#39;,
                                    &#39;php5/5.4.4-2&#39;
                                  ],
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;5.3.6-1&#39;
                                  ]
            };
-->
<strong>No longer marked as fixed in versions 5.3.6-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 07 Nov 2015 13:54:10 GMT) (<a href="bugreport.cgi?bug=759282;msg=33">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=33">mbox</a>, <a href="#32">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="34"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1446905709 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Sat, 07 Nov 2015 14:15:09 GMT) (<a href="bugreport.cgi?bug=759282;msg=35">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=35">mbox</a>, <a href="#34">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="36"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1446905710 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Sat, 07 Nov 2015 14:15:10 GMT) (<a href="bugreport.cgi?bug=759282;msg=37">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=37">mbox</a>, <a href="#36">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="38"></a><a name="msg38"></a><a href="#38">Message #38</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=38">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=38">mbox</a>, <a href="mailto:759282@bugs.debian.org?References=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E%0A%20%3C20140825192844.GA8903%40devzero.fr%3E%0A%20%3Chandler.759282.D682157.144690273819422.notifdone%40bugs.debian.org%3E%0A%20%3C20151107140543.GA27865%40eldamar.local%3E&amp;body=On%20Sat%2C%207%20Nov%202015%2015%3A05%3A43%20%2B0100%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Mathieu%2C%0A%3E%20%0A%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2001%3A27%3A07PM%20%2B0000%2C%20Debian%20Bug%20Tracking%20System%20wrote%3A%0A%3E%20%3E%20Version%3A%205.3.6-1%0A%3E%20%3E%20%0A%3E%20%3E%20Hello%2C%0A%3E%20%3E%20%0A%3E%20%3E%20According%20to%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18056%2C%20it%27s%20fixed%20since%201.9.2%0A%3E%20%0A%3E%20is%20this%20true%3F%20I%20just%20did%20a%20quick%20check%20%28not%20a%20full%20analysis%29%20and%20it%0A%3E%20still%20seems%20to%20use%20%2Ftmp%2Fpear.%0A%3E%20%0A%3E%20Can%20you%20check%20if%20the%20upstream%20bug%20report%20might%20be%20pointing%20to%20the%0A%3E%20wrong%20fixing%20version%3F%0A%3E%20%0A%3E%20%28I%20have%20reopened%20the%20bugs%20for%20now%29%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Salvatore%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23759282%20closed%20by%20Mathieu%20Parent%20%3Cmath.parent%40gmail.com%3E%0A%20%28FIxed%20since%201.9.2%29&amp;In-Reply-To=%3C20151107140543.GA27865%40eldamar.local%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 759282@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Mathieu Parent &lt;math.parent@gmail.com&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#759282 closed by Mathieu Parent &lt;math.parent@gmail.com&gt;
 (FIxed since 1.9.2)</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 7 Nov 2015 15:05:43 +0100</div>
</div>
<pre class="message">Hi Mathieu,

On Sat, Nov 07, 2015 at 01:27:07PM +0000, Debian Bug Tracking System wrote:
&gt; Version: 5.3.6-1
&gt; 
&gt; Hello,
&gt; 
&gt; According to <a href="https://pear.php.net/bugs/bug.php?id=18056">https://pear.php.net/bugs/bug.php?id=18056</a>, it&#39;s fixed since 1.9.2

is this true? I just did a quick check (not a full analysis) and it
still seems to use /tmp/pear.

Can you check if the upstream bug report might be pointing to the
wrong fixing version?

(I have reopened the bugs for now)

Regards,
Salvatore


</pre>

<div class="msgreceived"><hr><p>
<a name="39"></a>
<!-- request_addr: Mathieu Parent &lt;math.parent@gmail.com&gt; -->
<!-- time:1446908226 -->
<strong>Reply sent</strong>
to <code>Mathieu Parent &lt;math.parent@gmail.com&gt;</code>:<br>
You have taken responsibility.
 (Sat, 07 Nov 2015 14:57:06 GMT) (<a href="bugreport.cgi?bug=759282;msg=40">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=40">mbox</a>, <a href="#39">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="41"></a>
<!-- request_addr: vladz &lt;vladz@devzero.fr&gt; -->
<!-- time:1446908226 -->
<strong>Notification sent</strong>
to <code>vladz &lt;vladz@devzero.fr&gt;</code>:<br>
Bug acknowledged by developer.
 (Sat, 07 Nov 2015 14:57:06 GMT) (<a href="bugreport.cgi?bug=759282;msg=42">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=42">mbox</a>, <a href="#41">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="43"></a><a name="msg43"></a><a href="#43">Message #43</a> received at 759282-done@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=43">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=43">mbox</a>, <a href="mailto:759282@bugs.debian.org?subject=Re%3A%20Bug%23759282%20closed%20by%20Mathieu%20Parent%20%3Cmath.parent%40gmail.com%3E%0A%20%28FIxed%20since%201.9.2%29&amp;In-Reply-To=%3CCAFX5sbz1%3D-32i3GiOgX5b%3DT0URndTKpTRafd7BaZ2ZeaDAnUgw%40mail.gmail.com%3E&amp;References=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E%0A%09%3C20140825192844.GA8903%40devzero.fr%3E%0A%09%3Chandler.759282.D682157.144690273819422.notifdone%40bugs.debian.org%3E%0A%09%3C20151107140543.GA27865%40eldamar.local%3E%0A%20%3CCAFX5sbz1%3D-32i3GiOgX5b%3DT0URndTKpTRafd7BaZ2ZeaDAnUgw%40mail.gmail.com%3E&amp;body=On%20Sat%2C%207%20Nov%202015%2015%3A53%3A07%20%2B0100%20Mathieu%20Parent%20%3Cmath.parent%40gmail.com%3E%20wrote%3A%0A%3E%202015-11-07%2015%3A05%20GMT%2B01%3A00%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%3A%0A%3E%20%3E%20Hi%20Mathieu%2C%0A%3E%20%3E%0A%3E%20%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2001%3A27%3A07PM%20%2B0000%2C%20Debian%20Bug%20Tracking%20System%20wrote%3A%0A%3E%20%3E%3E%20Version%3A%205.3.6-1%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20Hello%2C%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20According%20to%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18056%2C%20it%27s%20fixed%20since%201.9.2%0A%3E%20%3E%0A%3E%20%3E%20is%20this%20true%3F%20I%20just%20did%20a%20quick%20check%20%28not%20a%20full%20analysis%29%20and%20it%0A%3E%20%3E%20still%20seems%20to%20use%20%2Ftmp%2Fpear.%0A%3E%20%0A%3E%20Yes%2C%20it%20does.%20But%20it%20checks%20for%20symlinks%20and%20truncate%20the%20file.%0A%3E%20%0A%3E%20This%20even%20introduced%20a%20regression%20on%20Windows%3A%0A%3E%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18834%0A%3E%20%0A%3E%20%3E%20Can%20you%20check%20if%20the%20upstream%20bug%20report%20might%20be%20pointing%20to%20the%0A%3E%20%3E%20wrong%20fixing%20version%3F%0A%3E%20%0A%3E%20This%20is%3A%0A%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2F38de9355e3a9c66445a6d39d2c9a20f73e986d9a%0A%3E%20%28which%20is%20in%201.9.2%29%0A%3E%20%0A%3E%20And%20further%20improvement%20in%3A%0A%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2Fcd31da7d8b5e684f177a8fe700339f7eb2420876%0A%3E%20%28which%20is%20in%201.9.3%29%0A%3E%20%0A%3E%20%3E%20%28I%20have%20reopened%20the%20bugs%20for%20now%29%0A%3E%20%0A%3E%20Can%20we%20close%20it%20then%3F%0A%3E%20%0A%3E%20Regards%0A%3E%20--%20%0A%3E%20Mathieu%0A%3E%20%0A%3E%20%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=math.parent%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> Mathieu Parent &lt;math.parent@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 759282-done@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#759282 closed by Mathieu Parent &lt;math.parent@gmail.com&gt;
 (FIxed since 1.9.2)</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 7 Nov 2015 15:53:07 +0100</div>
</div>
<pre class="message">2015-11-07 15:05 GMT+01:00 Salvatore Bonaccorso &lt;carnil@debian.org&gt;:
&gt; Hi Mathieu,
&gt;
&gt; On Sat, Nov 07, 2015 at 01:27:07PM +0000, Debian Bug Tracking System wrote:
&gt;&gt; Version: 5.3.6-1
&gt;&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; According to <a href="https://pear.php.net/bugs/bug.php?id=18056">https://pear.php.net/bugs/bug.php?id=18056</a>, it&#39;s fixed since 1.9.2
&gt;
&gt; is this true? I just did a quick check (not a full analysis) and it
&gt; still seems to use /tmp/pear.

Yes, it does. But it checks for symlinks and truncate the file.

This even introduced a regression on Windows:
<a href="https://pear.php.net/bugs/bug.php?id=18834">https://pear.php.net/bugs/bug.php?id=18834</a>

&gt; Can you check if the upstream bug report might be pointing to the
&gt; wrong fixing version?

This is:
<a href="https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a">https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a</a>
(which is in 1.9.2)

And further improvement in:
<a href="https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876">https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876</a>
(which is in 1.9.3)

&gt; (I have reopened the bugs for now)

Can we close it then?

Regards
-- 
Mathieu


</pre>

<div class="msgreceived"><hr><p>
<a name="44"></a>
<!-- request_addr: Mathieu Parent &lt;math.parent@gmail.com&gt; -->
<!-- time:1446908227 -->
<strong>Reply sent</strong>
to <code>Mathieu Parent &lt;math.parent@gmail.com&gt;</code>:<br>
You have taken responsibility.
 (Sat, 07 Nov 2015 14:57:07 GMT) (<a href="bugreport.cgi?bug=759282;msg=45">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=45">mbox</a>, <a href="#44">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="46"></a>
<!-- request_addr: Laurent Martelli &lt;laurent@bearteam.org&gt; -->
<!-- time:1446908227 -->
<strong>Notification sent</strong>
to <code>Laurent Martelli &lt;laurent@bearteam.org&gt;</code>:<br>
Bug acknowledged by developer.
 (Sat, 07 Nov 2015 14:57:07 GMT) (<a href="bugreport.cgi?bug=759282;msg=47">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=47">mbox</a>, <a href="#46">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="48"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1446964026 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Sun, 08 Nov 2015 06:27:06 GMT) (<a href="bugreport.cgi?bug=759282;msg=49">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=49">mbox</a>, <a href="#48">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="50"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1446964026 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Sun, 08 Nov 2015 06:27:06 GMT) (<a href="bugreport.cgi?bug=759282;msg=51">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=51">mbox</a>, <a href="#50">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="52"></a><a name="msg52"></a><a href="#52">Message #52</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=52">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=52">mbox</a>, <a href="mailto:759282@bugs.debian.org?References=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E%0A%20%3C20140825192844.GA8903%40devzero.fr%3E%0A%20%3Chandler.759282.D682157.144690273819422.notifdone%40bugs.debian.org%3E%0A%20%3C20151107140543.GA27865%40eldamar.local%3E%0A%20%3CCAFX5sbz1%3D-32i3GiOgX5b%3DT0URndTKpTRafd7BaZ2ZeaDAnUgw%40mail.gmail.com%3E%0A%20%3C20151108062507.GA31225%40eldamar.local%3E&amp;body=On%20Sun%2C%208%20Nov%202015%2007%3A25%3A07%20%2B0100%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Mathieu%2C%0A%3E%20%0A%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2003%3A53%3A07PM%20%2B0100%2C%20Mathieu%20Parent%20wrote%3A%0A%3E%20%3E%202015-11-07%2015%3A05%20GMT%2B01%3A00%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%3A%0A%3E%20%3E%20%3E%20Hi%20Mathieu%2C%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2001%3A27%3A07PM%20%2B0000%2C%20Debian%20Bug%20Tracking%20System%20wrote%3A%0A%3E%20%3E%20%3E%3E%20Version%3A%205.3.6-1%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20Hello%2C%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20According%20to%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18056%2C%20it%27s%20fixed%20since%201.9.2%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20is%20this%20true%3F%20I%20just%20did%20a%20quick%20check%20%28not%20a%20full%20analysis%29%20and%20it%0A%3E%20%3E%20%3E%20still%20seems%20to%20use%20%2Ftmp%2Fpear.%0A%3E%20%3E%20%0A%3E%20%3E%20Yes%2C%20it%20does.%20But%20it%20checks%20for%20symlinks%20and%20truncate%20the%20file.%0A%3E%20%3E%20%0A%3E%20%3E%20This%20even%20introduced%20a%20regression%20on%20Windows%3A%0A%3E%20%3E%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18834%0A%3E%20%3E%20%0A%3E%20%3E%20%3E%20Can%20you%20check%20if%20the%20upstream%20bug%20report%20might%20be%20pointing%20to%20the%0A%3E%20%3E%20%3E%20wrong%20fixing%20version%3F%0A%3E%20%3E%20%0A%3E%20%3E%20This%20is%3A%0A%3E%20%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2F38de9355e3a9c66445a6d39d2c9a20f73e986d9a%0A%3E%20%3E%20%28which%20is%20in%201.9.2%29%0A%3E%20%3E%20%0A%3E%20%3E%20And%20further%20improvement%20in%3A%0A%3E%20%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2Fcd31da7d8b5e684f177a8fe700339f7eb2420876%0A%3E%20%3E%20%28which%20is%20in%201.9.3%29%0A%3E%20%3E%20%0A%3E%20%3E%20%3E%20%28I%20have%20reopened%20the%20bugs%20for%20now%29%0A%3E%20%3E%20%0A%3E%20%3E%20Can%20we%20close%20it%20then%3F%0A%3E%20%0A%3E%20Well%2C%20IMHO%20no%2C%20that%20is%20not%20correct.%20The%20issues%20are%20still%20there%20even%0A%3E%20you%20cannot%20globber%20anymore%20someone%20else%20files.%20A%20can%20block%20another%0A%3E%20user%20this%20way.%0A%3E%20%0A%3E%20As%20user%20foo%20do%3A%0A%3E%20%0A%3E%20foo%40sid%3A~%24%20pear%20download%20HTML_Common2%0A%3E%20downloading%20HTML_Common2-2.1.1.tgz%20...%0A%3E%20Starting%20to%20download%20HTML_Common2-2.1.1.tgz%20%288%2C604%20bytes%29%0A%3E%20.....done%3A%208%2C604%20bytes%0A%3E%20File%20%2Fhome%2Ffoo%2FHTML_Common2-2.1.1.tgz%20downloaded%0A%3E%20%0A%3E%20%0A%3E%20then%20replace%20the%20cache%20files%20with%20symlinks%20%28e.g.%20to%20files%20in%20home%20of%0A%3E%20user%20bar%2C%20since%20he%20want%27s%20to%20try%20to%20globber%20these%20files%29.%20bar%20now%20is%0A%3E%20unable%20to%20pear%20download%20HTML_Common2%3A%0A%3E%20%0A%3E%20bar%40sid%3A~%24%20pear%20download%20HTML_Common2%0A%3E%20%0A%3E%20Notice%3A%20unserialize%28%29%3A%20Error%20at%20offset%200%20of%20220%20bytes%20in%20PEAR%2FREST.php%20on%20line%20203%0A%3E%20PHP%20Notice%3A%20%20unserialize%28%29%3A%20Error%20at%20offset%200%20of%20220%20bytes%20in%20%2Fusr%2Fshare%2Fphp%2FPEAR%2FREST.php%20on%20line%20203%0A%3E%20No%20releases%20available%20for%20package%20%22pear.php.net%2FHTML_Common2%22%0A%3E%20download%20failed%0A%3E%20bar%40sid%3A~%24%20ls%0A&amp;In-Reply-To=%3C20151108062507.GA31225%40eldamar.local%3E&amp;subject=Re%3A%20Bugs%20759282%20and%20682157%20%28php-pear%20unsafe%20use%20of%20%2Ftmp%29%20should%20probably%0A%20not%20be%20closed">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Mathieu Parent &lt;math.parent@gmail.com&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 759282@bugs.debian.org, 682157@bugs.debian.org, ondrej@debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bugs 759282 and 682157 (php-pear unsafe use of /tmp) should probably
 not be closed</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 8 Nov 2015 07:25:07 +0100</div>
</div>
<pre class="message">Hi Mathieu,

On Sat, Nov 07, 2015 at 03:53:07PM +0100, Mathieu Parent wrote:
&gt; 2015-11-07 15:05 GMT+01:00 Salvatore Bonaccorso &lt;carnil@debian.org&gt;:
&gt; &gt; Hi Mathieu,
&gt; &gt;
&gt; &gt; On Sat, Nov 07, 2015 at 01:27:07PM +0000, Debian Bug Tracking System wrote:
&gt; &gt;&gt; Version: 5.3.6-1
&gt; &gt;&gt;
&gt; &gt;&gt; Hello,
&gt; &gt;&gt;
&gt; &gt;&gt; According to <a href="https://pear.php.net/bugs/bug.php?id=18056">https://pear.php.net/bugs/bug.php?id=18056</a>, it&#39;s fixed since 1.9.2
&gt; &gt;
&gt; &gt; is this true? I just did a quick check (not a full analysis) and it
&gt; &gt; still seems to use /tmp/pear.
&gt; 
&gt; Yes, it does. But it checks for symlinks and truncate the file.
&gt; 
&gt; This even introduced a regression on Windows:
&gt; <a href="https://pear.php.net/bugs/bug.php?id=18834">https://pear.php.net/bugs/bug.php?id=18834</a>
&gt; 
&gt; &gt; Can you check if the upstream bug report might be pointing to the
&gt; &gt; wrong fixing version?
&gt; 
&gt; This is:
&gt; <a href="https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a">https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a</a>
&gt; (which is in 1.9.2)
&gt; 
&gt; And further improvement in:
&gt; <a href="https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876">https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876</a>
&gt; (which is in 1.9.3)
&gt; 
&gt; &gt; (I have reopened the bugs for now)
&gt; 
&gt; Can we close it then?

Well, IMHO no, that is not correct. The issues are still there even
you cannot globber anymore someone else files. A can block another
user this way.

As user foo do:

foo@sid:~$ pear download HTML_Common2
downloading HTML_Common2-2.1.1.tgz ...
Starting to download HTML_Common2-2.1.1.tgz (8,604 bytes)
.....done: 8,604 bytes
File /home/foo/HTML_Common2-2.1.1.tgz downloaded


then replace the cache files with symlinks (e.g. to files in home of
user bar, since he want&#39;s to try to globber these files). bar now is
unable to pear download HTML_Common2:

bar@sid:~$ pear download HTML_Common2

Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php on line 203
PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in /usr/share/php/PEAR/REST.php on line 203
No releases available for package &quot;pear.php.net/HTML_Common2&quot;
download failed
bar@sid:~$ ls
bar@sid:~$

or as root

root@sid:~# pear download HTML_Common2

Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php
on line 203
PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in
/usr/share/php/PEAR/REST.php on line 203
No releases available for package &quot;pear.php.net/HTML_Common2&quot;
download failed
root@sid:~# pear install HTML_Common2

Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php
on line 203
PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in
/usr/share/php/PEAR/REST.php on line 203
No releases available for package &quot;pear.php.net/HTML_Common2&quot;
install failed
root@sid:~#

So again, I don&#39;t think the issues with unsafe use of /tmp are fixed
correctly and the bugs should not be closed. PHP maintainers, what do
you think (Ondřej cc&#39;ed)?

Regards,
Salvatore


</pre>

<div class="msgreceived"><hr><p>
<a name="53"></a>
<!-- request_addr: vladz &lt;vladz@devzero.fr&gt; -->
<!-- time:1446964031 -->
<strong>Message sent on</strong>
to <code>vladz &lt;vladz@devzero.fr&gt;</code>:<br>
Bug#759282.
 (Sun, 08 Nov 2015 06:27:11 GMT) (<a href="bugreport.cgi?bug=759282;msg=54">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=54">mbox</a>, <a href="#53">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="56"></a>
<!-- command:done -->
<!-- requester: Mathieu Parent &lt;math.parent@gmail.com&gt; -->
<!-- request_addr: 682157-submit@bugs.debian.org -->
<!-- time:1447050064 -->
<!-- new_data:
$new_data = {
              &#39;done&#39; =&gt; &#39;&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;done&#39; =&gt; &#39;Mathieu Parent &lt;math.parent@gmail.com&gt;&#39;
            };
-->
<strong>Bug reopened</strong>
Request was from <code>Mathieu Parent &lt;math.parent@gmail.com&gt;</code>
to <code>682157-submit@bugs.debian.org</code>.
 (Mon, 09 Nov 2015 06:21:04 GMT) (<a href="bugreport.cgi?bug=759282;msg=57">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=57">mbox</a>, <a href="#56">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="58"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1447050067 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Mon, 09 Nov 2015 06:21:07 GMT) (<a href="bugreport.cgi?bug=759282;msg=59">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=59">mbox</a>, <a href="#58">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="60"></a>
<!-- request_addr: Mathieu Parent &lt;math.parent@gmail.com&gt; -->
<!-- time:1447050067 -->
<strong>Acknowledgement sent</strong>
to <code>Mathieu Parent &lt;math.parent@gmail.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Mon, 09 Nov 2015 06:21:07 GMT) (<a href="bugreport.cgi?bug=759282;msg=61">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=61">mbox</a>, <a href="#60">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="62"></a><a name="msg62"></a><a href="#62">Message #62</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=62">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=62">mbox</a>, <a href="mailto:759282@bugs.debian.org?body=On%20Mon%2C%209%20Nov%202015%2007%3A17%3A24%20%2B0100%20Mathieu%20Parent%20%3Cmath.parent%40gmail.com%3E%20wrote%3A%0A%3E%20Control%3A%20reopen%20-1%0A%3E%20%0A%3E%202015-11-08%207%3A25%20GMT%2B01%3A00%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%3A%0A%3E%20%3E%20Hi%20Mathieu%2C%0A%3E%20%0A%3E%20Hi%20Salvatore%2C%0A%3E%20%0A%3E%20%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2003%3A53%3A07PM%20%2B0100%2C%20Mathieu%20Parent%20wrote%3A%0A%3E%20%3E%3E%202015-11-07%2015%3A05%20GMT%2B01%3A00%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%3A%0A%3E%20%3E%3E%20%3E%20Hi%20Mathieu%2C%0A%3E%20%3E%3E%20%3E%0A%3E%20%3E%3E%20%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2001%3A27%3A07PM%20%2B0000%2C%20Debian%20Bug%20Tracking%20System%20wrote%3A%0A%3E%20%3E%3E%20%3E%3E%20Version%3A%205.3.6-1%0A%3E%20%3E%3E%20%3E%3E%0A%3E%20%3E%3E%20%3E%3E%20Hello%2C%0A%3E%20%3E%3E%20%3E%3E%0A%3E%20%3E%3E%20%3E%3E%20According%20to%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18056%2C%20it%27s%20fixed%20since%201.9.2%0A%3E%20%3E%3E%20%3E%0A%3E%20%3E%3E%20%3E%20is%20this%20true%3F%20I%20just%20did%20a%20quick%20check%20%28not%20a%20full%20analysis%29%20and%20it%0A%3E%20%3E%3E%20%3E%20still%20seems%20to%20use%20%2Ftmp%2Fpear.%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20Yes%2C%20it%20does.%20But%20it%20checks%20for%20symlinks%20and%20truncate%20the%20file.%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20This%20even%20introduced%20a%20regression%20on%20Windows%3A%0A%3E%20%3E%3E%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18834%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20%3E%20Can%20you%20check%20if%20the%20upstream%20bug%20report%20might%20be%20pointing%20to%20the%0A%3E%20%3E%3E%20%3E%20wrong%20fixing%20version%3F%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20This%20is%3A%0A%3E%20%3E%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2F38de9355e3a9c66445a6d39d2c9a20f73e986d9a%0A%3E%20%3E%3E%20%28which%20is%20in%201.9.2%29%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20And%20further%20improvement%20in%3A%0A%3E%20%3E%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2Fcd31da7d8b5e684f177a8fe700339f7eb2420876%0A%3E%20%3E%3E%20%28which%20is%20in%201.9.3%29%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20%3E%20%28I%20have%20reopened%20the%20bugs%20for%20now%29%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20Can%20we%20close%20it%20then%3F%0A%3E%20%3E%0A%3E%20%3E%20Well%2C%20IMHO%20no%2C%20that%20is%20not%20correct.%20The%20issues%20are%20still%20there%20even%0A%3E%20%3E%20you%20cannot%20globber%20anymore%20someone%20else%20files.%20A%20can%20block%20another%0A%3E%20%3E%20user%20this%20way.%0A%3E%20%0A%3E%20I%20didn%27t%20want%20to%20close%2C%20it%2C%20but%20my%20Reply-to-all%20went%20to%20the%20-done%20addresses.%0A%3E%20%0A%3E%20%3E%0A%3E%20%3E%20As%20user%20foo%20do%3A%0A%3E%20%3E%0A%3E%20%3E%20foo%40sid%3A~%24%20pear%20download%20HTML_Common2%0A%3E%20%3E%20downloading%20HTML_Common2-2.1.1.tgz%20...%0A%3E%20%3E%20Starting%20to%20download%20HTML_Common2-2.1.1.tgz%20%288%2C604%20bytes%29%0A%3E%20%3E%20.....done%3A%208%2C604%20bytes%0A%3E%20%3E%20File%20%2Fhome%2Ffoo%2FHTML_Common2-2.1.1.tgz%20downloaded%0A%3E%20%3E%0A%3E%20%3E%0A%3E%20%3E%20then%20replace%20the%20cache%20files%20with%20symlinks%20%28e.g.%20to%20files%20in%20home%20of%0A%3E%20%3E%20user%20bar%2C%20since%20he%20want%27s%20to%20try%20to%20globber%20these%20files%29.%20bar%20now%20is%0A%3E%20%3E%20unable%20to%20pear%20download%20HTML_Common2%3A%0A&amp;References=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E%0A%09%3C20140825192844.GA8903%40devzero.fr%3E%0A%09%3Chandler.759282.D682157.144690273819422.notifdone%40bugs.debian.org%3E%0A%09%3C20151107140543.GA27865%40eldamar.local%3E%0A%09%3CCAFX5sbz1%3D-32i3GiOgX5b%3DT0URndTKpTRafd7BaZ2ZeaDAnUgw%40mail.gmail.com%3E%0A%09%3C20151108062507.GA31225%40eldamar.local%3E%0A%20%3CCAFX5sbz2JbLF%3D4Kk2RyVgTabgPiLjFbrKcQWrxUJ1XAhnf-GcQ%40mail.gmail.com%3E&amp;In-Reply-To=%3CCAFX5sbz2JbLF%3D4Kk2RyVgTabgPiLjFbrKcQWrxUJ1XAhnf-GcQ%40mail.gmail.com%3E&amp;subject=Re%3A%20Bugs%20759282%20and%20682157%20%28php-pear%20unsafe%20use%20of%20%2Ftmp%29%20should%0A%20probably%20not%20be%20closed">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=math.parent%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> Mathieu Parent &lt;math.parent@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 759282@bugs.debian.org, 682157@bugs.debian.org, 
	Ondřej Surý &lt;ondrej@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bugs 759282 and 682157 (php-pear unsafe use of /tmp) should
 probably not be closed</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 9 Nov 2015 07:17:24 +0100</div>
</div>
<pre class="message">Control: reopen -1

2015-11-08 7:25 GMT+01:00 Salvatore Bonaccorso &lt;carnil@debian.org&gt;:
&gt; Hi Mathieu,

Hi Salvatore,

&gt; On Sat, Nov 07, 2015 at 03:53:07PM +0100, Mathieu Parent wrote:
&gt;&gt; 2015-11-07 15:05 GMT+01:00 Salvatore Bonaccorso &lt;carnil@debian.org&gt;:
&gt;&gt; &gt; Hi Mathieu,
&gt;&gt; &gt;
&gt;&gt; &gt; On Sat, Nov 07, 2015 at 01:27:07PM +0000, Debian Bug Tracking System wrote:
&gt;&gt; &gt;&gt; Version: 5.3.6-1
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Hello,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; According to <a href="https://pear.php.net/bugs/bug.php?id=18056">https://pear.php.net/bugs/bug.php?id=18056</a>, it&#39;s fixed since 1.9.2
&gt;&gt; &gt;
&gt;&gt; &gt; is this true? I just did a quick check (not a full analysis) and it
&gt;&gt; &gt; still seems to use /tmp/pear.
&gt;&gt;
&gt;&gt; Yes, it does. But it checks for symlinks and truncate the file.
&gt;&gt;
&gt;&gt; This even introduced a regression on Windows:
&gt;&gt; <a href="https://pear.php.net/bugs/bug.php?id=18834">https://pear.php.net/bugs/bug.php?id=18834</a>
&gt;&gt;
&gt;&gt; &gt; Can you check if the upstream bug report might be pointing to the
&gt;&gt; &gt; wrong fixing version?
&gt;&gt;
&gt;&gt; This is:
&gt;&gt; <a href="https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a">https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a</a>
&gt;&gt; (which is in 1.9.2)
&gt;&gt;
&gt;&gt; And further improvement in:
&gt;&gt; <a href="https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876">https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876</a>
&gt;&gt; (which is in 1.9.3)
&gt;&gt;
&gt;&gt; &gt; (I have reopened the bugs for now)
&gt;&gt;
&gt;&gt; Can we close it then?
&gt;
&gt; Well, IMHO no, that is not correct. The issues are still there even
&gt; you cannot globber anymore someone else files. A can block another
&gt; user this way.

I didn&#39;t want to close, it, but my Reply-to-all went to the -done addresses.

&gt;
&gt; As user foo do:
&gt;
&gt; foo@sid:~$ pear download HTML_Common2
&gt; downloading HTML_Common2-2.1.1.tgz ...
&gt; Starting to download HTML_Common2-2.1.1.tgz (8,604 bytes)
&gt; .....done: 8,604 bytes
&gt; File /home/foo/HTML_Common2-2.1.1.tgz downloaded
&gt;
&gt;
&gt; then replace the cache files with symlinks (e.g. to files in home of
&gt; user bar, since he want&#39;s to try to globber these files). bar now is
&gt; unable to pear download HTML_Common2:
&gt;
&gt; bar@sid:~$ pear download HTML_Common2
&gt;
&gt; Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php on line 203
&gt; PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in /usr/share/php/PEAR/REST.php on line 203
&gt; No releases available for package &quot;pear.php.net/HTML_Common2&quot;
&gt; download failed
&gt; bar@sid:~$ ls
&gt; bar@sid:~$
&gt;
&gt; or as root
&gt;
&gt; root@sid:~# pear download HTML_Common2
&gt;
&gt; Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php
&gt; on line 203
&gt; PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in
&gt; /usr/share/php/PEAR/REST.php on line 203
&gt; No releases available for package &quot;pear.php.net/HTML_Common2&quot;
&gt; download failed
&gt; root@sid:~# pear install HTML_Common2
&gt;
&gt; Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php
&gt; on line 203
&gt; PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in
&gt; /usr/share/php/PEAR/REST.php on line 203
&gt; No releases available for package &quot;pear.php.net/HTML_Common2&quot;
&gt; install failed
&gt; root@sid:~#
&gt;
&gt; So again, I don&#39;t think the issues with unsafe use of /tmp are fixed
&gt; correctly and the bugs should not be closed. PHP maintainers, what do
&gt; you think (Ondřej cc&#39;ed)?

Which pear version are you testing?

Note that I&#39;ll be the php-pear maintainer, once the new package [1] is finished.

We should test against this latest 1.10 and report upstream is the bug remain.

[1]: anonscm.debian.org/cgit/pkg-php/php-pear.git

Regards

-- 
Mathieu


</pre>

<div class="infmessage"><hr><p>
<a name="63"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt; -->
<!-- time:1447525270 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#759282</code>; Package <code>php-pear</code>.
 (Sat, 14 Nov 2015 18:21:10 GMT) (<a href="bugreport.cgi?bug=759282;msg=64">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=64">mbox</a>, <a href="#63">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="65"></a>
<!-- request_addr: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- time:1447525270 -->
<strong>Acknowledgement sent</strong>
to <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian PHP Maintainers &lt;pkg-php-maint@lists.alioth.debian.org&gt;</code>.
 (Sat, 14 Nov 2015 18:21:10 GMT) (<a href="bugreport.cgi?bug=759282;msg=66">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=66">mbox</a>, <a href="#65">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="67"></a><a name="msg67"></a><a href="#67">Message #67</a> received at 759282@bugs.debian.org (<a href="bugreport.cgi?bug=759282;msg=67">full text</a>, <a href="bugreport.cgi?bug=759282;mbox=yes;msg=67">mbox</a>, <a href="mailto:759282@bugs.debian.org?In-Reply-To=%3C20151114181852.GA32344%40eldamar.local%3E&amp;subject=Re%3A%20Bugs%20759282%20and%20682157%20%28php-pear%20unsafe%20use%20of%20%2Ftmp%29%20should%0A%20probably%20not%20be%20closed&amp;References=%3CCAFX5sbwGDtJwhT9%2BZsxoiqXK7z96D_zX2Gh75ZkXU5aDEsiPVg%40mail.gmail.com%3E%0A%20%3C20140825192844.GA8903%40devzero.fr%3E%0A%20%3Chandler.759282.D682157.144690273819422.notifdone%40bugs.debian.org%3E%0A%20%3C20151107140543.GA27865%40eldamar.local%3E%0A%20%3CCAFX5sbz1%3D-32i3GiOgX5b%3DT0URndTKpTRafd7BaZ2ZeaDAnUgw%40mail.gmail.com%3E%0A%20%3C20151108062507.GA31225%40eldamar.local%3E%0A%20%3CCAFX5sbz2JbLF%3D4Kk2RyVgTabgPiLjFbrKcQWrxUJ1XAhnf-GcQ%40mail.gmail.com%3E%0A%20%3C20151114181852.GA32344%40eldamar.local%3E&amp;body=On%20Sat%2C%2014%20Nov%202015%2019%3A18%3A52%20%2B0100%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%20wrote%3A%0A%3E%20Hi%20Mathieu%2C%0A%3E%20%0A%3E%20On%20Mon%2C%20Nov%2009%2C%202015%20at%2007%3A17%3A24AM%20%2B0100%2C%20Mathieu%20Parent%20wrote%3A%0A%3E%20%3E%20Control%3A%20reopen%20-1%0A%3E%20%3E%20%0A%3E%20%3E%202015-11-08%207%3A25%20GMT%2B01%3A00%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%3A%0A%3E%20%3E%20%3E%20Hi%20Mathieu%2C%0A%3E%20%3E%20%0A%3E%20%3E%20Hi%20Salvatore%2C%0A%3E%20%3E%20%0A%3E%20%3E%20%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2003%3A53%3A07PM%20%2B0100%2C%20Mathieu%20Parent%20wrote%3A%0A%3E%20%3E%20%3E%3E%202015-11-07%2015%3A05%20GMT%2B01%3A00%20Salvatore%20Bonaccorso%20%3Ccarnil%40debian.org%3E%3A%0A%3E%20%3E%20%3E%3E%20%3E%20Hi%20Mathieu%2C%0A%3E%20%3E%20%3E%3E%20%3E%0A%3E%20%3E%20%3E%3E%20%3E%20On%20Sat%2C%20Nov%2007%2C%202015%20at%2001%3A27%3A07PM%20%2B0000%2C%20Debian%20Bug%20Tracking%20System%20wrote%3A%0A%3E%20%3E%20%3E%3E%20%3E%3E%20Version%3A%205.3.6-1%0A%3E%20%3E%20%3E%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20%3E%3E%20Hello%2C%0A%3E%20%3E%20%3E%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20%3E%3E%20According%20to%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18056%2C%20it%27s%20fixed%20since%201.9.2%0A%3E%20%3E%20%3E%3E%20%3E%0A%3E%20%3E%20%3E%3E%20%3E%20is%20this%20true%3F%20I%20just%20did%20a%20quick%20check%20%28not%20a%20full%20analysis%29%20and%20it%0A%3E%20%3E%20%3E%3E%20%3E%20still%20seems%20to%20use%20%2Ftmp%2Fpear.%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20Yes%2C%20it%20does.%20But%20it%20checks%20for%20symlinks%20and%20truncate%20the%20file.%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20This%20even%20introduced%20a%20regression%20on%20Windows%3A%0A%3E%20%3E%20%3E%3E%20https%3A%2F%2Fpear.php.net%2Fbugs%2Fbug.php%3Fid%3D18834%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20%3E%20Can%20you%20check%20if%20the%20upstream%20bug%20report%20might%20be%20pointing%20to%20the%0A%3E%20%3E%20%3E%3E%20%3E%20wrong%20fixing%20version%3F%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20This%20is%3A%0A%3E%20%3E%20%3E%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2F38de9355e3a9c66445a6d39d2c9a20f73e986d9a%0A%3E%20%3E%20%3E%3E%20%28which%20is%20in%201.9.2%29%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20And%20further%20improvement%20in%3A%0A%3E%20%3E%20%3E%3E%20https%3A%2F%2Fgithub.com%2Fpear%2Fpear-core%2Fcommit%2Fcd31da7d8b5e684f177a8fe700339f7eb2420876%0A%3E%20%3E%20%3E%3E%20%28which%20is%20in%201.9.3%29%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20%3E%20%28I%20have%20reopened%20the%20bugs%20for%20now%29%0A%3E%20%3E%20%3E%3E%0A%3E%20%3E%20%3E%3E%20Can%20we%20close%20it%20then%3F%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20Well%2C%20IMHO%20no%2C%20that%20is%20not%20correct.%20The%20issues%20are%20still%20there%20even%0A%3E%20%3E%20%3E%20you%20cannot%20globber%20anymore%20someone%20else%20files.%20A%20can%20block%20another%0A%3E%20%3E%20%3E%20user%20this%20way.%0A%3E%20%3E%20%0A%3E%20%3E%20I%20didn%27t%20want%20to%20close%2C%20it%2C%20but%20my%20Reply-to-all%20went%20to%20the%20-done%20addresses.%0A%3E%20%3E%20%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20As%20user%20foo%20do%3A%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20foo%40sid%3A~%24%20pear%20download%20HTML_Common2%0A%3E%20%3E%20%3E%20downloading%20HTML_Common2-2.1.1.tgz%20...%0A%3E%20%3E%20%3E%20Starting%20to%20download%20HTML_Common2-2.1.1.tgz%20%288%2C604%20bytes%29%0A%3E%20%3E%20%3E%20.....done%3A%208%2C604%20bytes%0A%3E%20%3E%20%3E%20File%20%2Fhome%2Ffoo%2FHTML_Common2-2.1.1.tgz%20downloaded%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=carnil%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Mathieu Parent &lt;math.parent@gmail.com&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 759282@bugs.debian.org, 682157@bugs.debian.org,
	Ondřej Surý &lt;ondrej@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bugs 759282 and 682157 (php-pear unsafe use of /tmp) should
 probably not be closed</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 14 Nov 2015 19:18:52 +0100</div>
</div>
<pre class="message">Hi Mathieu,

On Mon, Nov 09, 2015 at 07:17:24AM +0100, Mathieu Parent wrote:
&gt; Control: reopen -1
&gt; 
&gt; 2015-11-08 7:25 GMT+01:00 Salvatore Bonaccorso &lt;carnil@debian.org&gt;:
&gt; &gt; Hi Mathieu,
&gt; 
&gt; Hi Salvatore,
&gt; 
&gt; &gt; On Sat, Nov 07, 2015 at 03:53:07PM +0100, Mathieu Parent wrote:
&gt; &gt;&gt; 2015-11-07 15:05 GMT+01:00 Salvatore Bonaccorso &lt;carnil@debian.org&gt;:
&gt; &gt;&gt; &gt; Hi Mathieu,
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; On Sat, Nov 07, 2015 at 01:27:07PM +0000, Debian Bug Tracking System wrote:
&gt; &gt;&gt; &gt;&gt; Version: 5.3.6-1
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; Hello,
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; According to <a href="https://pear.php.net/bugs/bug.php?id=18056">https://pear.php.net/bugs/bug.php?id=18056</a>, it&#39;s fixed since 1.9.2
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; is this true? I just did a quick check (not a full analysis) and it
&gt; &gt;&gt; &gt; still seems to use /tmp/pear.
&gt; &gt;&gt;
&gt; &gt;&gt; Yes, it does. But it checks for symlinks and truncate the file.
&gt; &gt;&gt;
&gt; &gt;&gt; This even introduced a regression on Windows:
&gt; &gt;&gt; <a href="https://pear.php.net/bugs/bug.php?id=18834">https://pear.php.net/bugs/bug.php?id=18834</a>
&gt; &gt;&gt;
&gt; &gt;&gt; &gt; Can you check if the upstream bug report might be pointing to the
&gt; &gt;&gt; &gt; wrong fixing version?
&gt; &gt;&gt;
&gt; &gt;&gt; This is:
&gt; &gt;&gt; <a href="https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a">https://github.com/pear/pear-core/commit/38de9355e3a9c66445a6d39d2c9a20f73e986d9a</a>
&gt; &gt;&gt; (which is in 1.9.2)
&gt; &gt;&gt;
&gt; &gt;&gt; And further improvement in:
&gt; &gt;&gt; <a href="https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876">https://github.com/pear/pear-core/commit/cd31da7d8b5e684f177a8fe700339f7eb2420876</a>
&gt; &gt;&gt; (which is in 1.9.3)
&gt; &gt;&gt;
&gt; &gt;&gt; &gt; (I have reopened the bugs for now)
&gt; &gt;&gt;
&gt; &gt;&gt; Can we close it then?
&gt; &gt;
&gt; &gt; Well, IMHO no, that is not correct. The issues are still there even
&gt; &gt; you cannot globber anymore someone else files. A can block another
&gt; &gt; user this way.
&gt; 
&gt; I didn&#39;t want to close, it, but my Reply-to-all went to the -done addresses.
&gt; 
&gt; &gt;
&gt; &gt; As user foo do:
&gt; &gt;
&gt; &gt; foo@sid:~$ pear download HTML_Common2
&gt; &gt; downloading HTML_Common2-2.1.1.tgz ...
&gt; &gt; Starting to download HTML_Common2-2.1.1.tgz (8,604 bytes)
&gt; &gt; .....done: 8,604 bytes
&gt; &gt; File /home/foo/HTML_Common2-2.1.1.tgz downloaded
&gt; &gt;
&gt; &gt;
&gt; &gt; then replace the cache files with symlinks (e.g. to files in home of
&gt; &gt; user bar, since he want&#39;s to try to globber these files). bar now is
&gt; &gt; unable to pear download HTML_Common2:
&gt; &gt;
&gt; &gt; bar@sid:~$ pear download HTML_Common2
&gt; &gt;
&gt; &gt; Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php on line 203
&gt; &gt; PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in /usr/share/php/PEAR/REST.php on line 203
&gt; &gt; No releases available for package &quot;pear.php.net/HTML_Common2&quot;
&gt; &gt; download failed
&gt; &gt; bar@sid:~$ ls
&gt; &gt; bar@sid:~$
&gt; &gt;
&gt; &gt; or as root
&gt; &gt;
&gt; &gt; root@sid:~# pear download HTML_Common2
&gt; &gt;
&gt; &gt; Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php
&gt; &gt; on line 203
&gt; &gt; PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in
&gt; &gt; /usr/share/php/PEAR/REST.php on line 203
&gt; &gt; No releases available for package &quot;pear.php.net/HTML_Common2&quot;
&gt; &gt; download failed
&gt; &gt; root@sid:~# pear install HTML_Common2
&gt; &gt;
&gt; &gt; Notice: unserialize(): Error at offset 0 of 220 bytes in PEAR/REST.php
&gt; &gt; on line 203
&gt; &gt; PHP Notice:  unserialize(): Error at offset 0 of 220 bytes in
&gt; &gt; /usr/share/php/PEAR/REST.php on line 203
&gt; &gt; No releases available for package &quot;pear.php.net/HTML_Common2&quot;
&gt; &gt; install failed
&gt; &gt; root@sid:~#
&gt; &gt;
&gt; &gt; So again, I don&#39;t think the issues with unsafe use of /tmp are fixed
&gt; &gt; correctly and the bugs should not be closed. PHP maintainers, what do
&gt; &gt; you think (Ondřej cc&#39;ed)?
&gt; 
&gt; Which pear version are you testing?

Just to confirm, this was with php-pear provided from src:php5,
Version 5.6.14+dfsg-1.
&gt; 
&gt; Note that I&#39;ll be the php-pear maintainer, once the new package [1] is finished.
&gt; 
&gt; We should test against this latest 1.10 and report upstream is the bug remain.

Ack, yes I see.

Regards and thanks for your work there!

Salvatore


</pre>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=759282">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:29:47 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
