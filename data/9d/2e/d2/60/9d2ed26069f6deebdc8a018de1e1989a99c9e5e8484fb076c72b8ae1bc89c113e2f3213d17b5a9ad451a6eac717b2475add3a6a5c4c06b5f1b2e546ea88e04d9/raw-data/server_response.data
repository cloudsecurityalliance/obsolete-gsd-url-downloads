<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 910500 &ndash; VUL-0: CVE-2014-5220: mdadm: mdcheck doesn't validate the input of mdadm --detail --export, possible command injection</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://bugzilla.suse.com/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=910500&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=910500">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=910500">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=910500">



    
    <link href="skins/standard/global.css?1411227340"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1411227331" rel="stylesheet"
            type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1411227331" rel="stylesheet"
            type="text/css" ><link href="skins/standard/global.css?1411227340" rel="stylesheet"
            type="text/css" ><link href="skins/standard/show_bug.css?1416528352" rel="stylesheet"
            type="text/css" ><link href="extensions/Voting/web/style.css?1411227348" rel="stylesheet"
            type="text/css" ><!--[if lte IE 7]>
      


      <link href="skins/standard/IE-fixes.css?1411227340" rel="stylesheet"
            type="text/css" >
<![endif]-->

    <link href="skins/contrib/SUSE/global.css?1411227340" rel="stylesheet"
            type="text/css" 
          title="SUSE">

    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1411227335"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1411227333"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1411227329"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1411227329"></script><script type="text/javascript" src="js/yui/json/json-min.js?1411227333"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1411227334"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1411227335"></script><script type="text/javascript" src="js/global.js?1411227336"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 910500 – VUL-0: CVE-2014-5220: mdadm: mdcheck doesn\'t validate the input of mdadm --detail --export, possible command injection",  
                             "show_bug.cgi?id=910500" );
        document.title = "Bug 910500 – VUL-0: CVE-2014-5220: mdadm: mdcheck doesn\'t validate the input of mdadm --detail --export, possible command injection";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 910500 – VUL-0: CVE-2014-5220: mdadm: mdcheck doesn\'t validate the input of mdadm --detail --export, possible command injection", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1411227336"></script><script type="text/javascript" src="js/field.js?1414105521"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" ><link href="extensions/Testopia/css/testopia.css" rel="stylesheet" type="text/css">
    <link href="extensions/Testopia/extjs/examples/ux/css/RowEditor.css" rel="stylesheet" type="text/css"  />
    <script type="text/javascript">
        Testopia_user = {login: "", id: 0};
        DEFAULT_CASE_STATUS = 'CONFIRMED';
    </script>
  </head>



  <body onload=""
        class="bugzilla-suse-com bz_bug bz_status_RESOLVED bz_product_SUSE_Security_Incidents bz_component_Incidents bz_bug_910500 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<!--div id="tmp_warning_wnd" style="
    position:fixed; 
    color:red; 
    font-size:20px; 
    top:50px; 
    left:10%; 
    right:10%; 
    padding:1em;
    background-color:#ffffff;
    border:3px solid red;
    z-index:9999;
    text-align:center;">
  This Bugzilla is for TESTING ONLY. All new bugs and comments WILL BE LOST. Use <a href="https://bugzilla.suse.com">bugzilla.suse.com</a> instead.
  <button style="
      background:none;
      border:0;
      box-shadow:none;
      color:red;
      text-shadow:none;
      position:absolute;
      right:0;
      top:0;" onclick="document.getElementById('tmp_warning_wnd').style.display='none';">[X]</button>
</div-->

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;910500</p>
    </td>

    <td id="subtitle">
      <p class="subheader">VUL-0: CVE-2014-5220: mdadm: mdcheck doesn't validate the input of mdadm --detail --export, possible command injection</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2015-04-22 11:36:25 UTC</p>
    </td>
</tr>
</table>

<table id="lang_links_container" cellpadding="0" cellspacing="0"
       class="bz_default_hidden"><tr><td>
</td></tr></table>
<ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <!--a id="login_link_top" href="show_bug.cgi?id=910500&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a-->
  <a id="login_link_top" href="show_bug.cgi?id=910500&amp;GoAheadAndLogIn=1">Log In</a>


  <form action="show_bug.cgi?id=910500" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_top"
        onsubmit="return check_mini_login_fields( '_top' );"
  >
    <input id="Bugzilla_login_top" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_top')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_top" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_top')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_top">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_top');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_top');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
<li id="forgot_container_top">
  <span class="separator">| </span>
  <a id="forgot_link_top" href="https://idp-portal.suse.com/univention/self-service/#page=passwordreset">Forgot Password</a>
</li>
</ul>
</div> 

<div id="bugzilla-body">

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2015-04-22 11:36:25">
  <input type="hidden" name="longdesclength" value="33">
  <input type="hidden" name="id" value="910500">
  <input type="hidden" name="token" value="1635630635-ebBMgeiSKpNk7Yd6sdIHMVmnM0aZeFbDX-fQMAIwc_s">
<div class="bz_alias_short_desc_container edit_form">
        <strike>
     <a href="show_bug.cgi?id=910500"><b>Bug&nbsp;910500</b></a> -<span id="summary_alias_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2014-5220</span>) 
      <span id="short_desc_nonedit_display">VUL-0: CVE-2014-5220: mdadm: mdcheck doesn't validate the input of mdadm --detail --export, possible command injection</span></strike>
     </span>  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">(CVE-2014-5220)
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=glossary.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td><span title="VUL-0: CVE-2014-5220: mdadm: mdcheck doesn't validate the input of mdadm --detail --export, possible command injection">VUL-0: CVE-2014-5220: mdadm: mdcheck doesn't validate the input of mdadm --de...
        </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('VUL-0: CVE-2014-5220: mdadm: mdcheck doesn\'t validate the input of mdadm --detail --export, possible command injection', 'CVE-2014-5220');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=status_resolution_matrix.html">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>

          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=glossary.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Novell Products</td>
      </tr>

    
    
    
    <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >SUSE Security Incidents</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=glossary.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Novell Products</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=SUSE Security Incidents"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Incidents</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=glossary.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=glossary.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">Other
       All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority">
          <a href="page.cgi?id=glossary.html#priority">Priority</a></label>:
      </th>
      <td>P3 - Medium
        <label for="severity">
          <b>Severity</b></label>:
       Minor
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=glossary.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=glossary.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Neil Brown</span>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">

    <label for="qa_contact" accesskey="q">

  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#qa_contact"
  >QA Contact:</a>
</label>
</th>
      <td><span class="vcard"><span class="fn">Security Team bot</span>
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'security-team\x40suse.de',
        'security-team\x40suse.de');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=glossary.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=glossary.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">maint:running:60549:low  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=910500&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=910500">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2014-12-17 14:20 UTC by <span class="vcard"><span class="fn">ml1 noc</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2015-04-22 11:36 UTC 
      (<a href="show_activity.cgi?id=910500">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>7 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="jsegitz">jsegitz</option>
                <option value="me">me</option>
                <option value="meissner">meissner</option>
                <option value="nfbrown">nfbrown</option>
                <option value="noc">noc</option>
                <option value="security-team">security-team</option>
                <option value="tosiara">tosiara</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=glossary.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_foundby">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_foundby"
  >Found By:</a>

</th>
  <td class="field_value "
      id="field_container_cf_foundby"  colspan="2">Community User</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_nts_priority">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_nts_priority"
  >Services Priority:</a>

</th>
  <td class="field_value "
      id="field_container_cf_nts_priority"  colspan="2"></td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_biz_priority">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_biz_priority"
  >Business Priority:</a>

</th>
  <td class="field_value "
      id="field_container_cf_biz_priority"  colspan="2"></td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_blocker">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_blocker"
  >Blocker:</a>

</th>
  <td class="field_value "
      id="field_container_cf_blocker"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_marketing_qa_status">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_marketing_qa_status"
  >Marketing QA Status:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_marketing_qa_status"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_it_deployment">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_it_deployment"
  >IT Deployment:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_it_deployment"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         <ul>
    <li><a href="tr_new_case.cgi?product=SUSE%20Security%20Incidents&bug=910500">Create test case</a></li>
</ul><ul>
  <li><a href="enter_bug.cgi?cloned_bug_id=910500">Clone This Bug</a></li>
</ul>
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>



  <tr class="bz_attach_footer">
    <td colspan="2">
        <a href="attachment.cgi?bugid=910500&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=910500&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1411227336" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">ml1 noc</span>
</span>
        </span>

        <span class="bz_comment_time">
          2014-12-17 14:20:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >on

	uname -a
		Linux lab010.DOMAIN.net 3.18.0-2.g99a9f76-xen #1 SMP Sun Dec 14 10:25:49 UTC 2014 (99a9f76) x86_64 x86_64 x86_64 GNU/Linux
	lsb_release -rd
		Description:    openSUSE 13.2 (Harlequin) (x86_64)
		Release:        13.2
	mdadm --version
		mdadm - v3.3.1 - 5th June 2014

i am getting these email notices from system cron every couple of days

	...
	From: &quot;(Cron Daemon)&quot; &lt;<a href="mailto:cron-admin=lab010.DOMAIN.net&#64;DOMAIN.net">cron-admin=lab010.DOMAIN.net&#64;DOMAIN.net</a>&gt;
	To: <a href="mailto:cron-admin=lab010.DOMAIN.net&#64;DOMAIN.net">cron-admin=lab010.DOMAIN.net&#64;DOMAIN.net</a>
	Subject: Cron &lt;root&#64;server&gt; source /etc/sysconfig/mdadm; [ -n &quot;$MDADM_CHECK_DURATION&quot; -a -x /usr/share/mdadm/mdcheck ] &amp;&amp; /usr/share/mdadm/mdcheck --continue --duration &quot;$MDADM_CHECK_DURATION&quot;
	Content-Type: text/plain; charset=UTF-8
	Auto-Submitted: auto-generated
	Precedence: bulk
	X-Cron-Env: &lt;XDG_SESSION_ID=569&gt;
	X-Cron-Env: &lt;XDG_RUNTIME_DIR=/run/user/0&gt;
	X-Cron-Env: &lt;LANG=POSIX&gt;
	X-Cron-Env: &lt;LC_CTYPE=en_US.UTF-8&gt;
	X-Cron-Env: &lt;PATH=/sbin:/usr/sbin:/bin:/usr/bin&gt;
	X-Cron-Env: &lt;SHELL=/bin/sh&gt;
	X-Cron-Env: &lt;HOME=/root&gt;
	X-Cron-Env: &lt;LOGNAME=root&gt;
	X-Cron-Env: &lt;USER=root&gt;
	...
	/var/lib/mdcheck/.md-check-8965: line 5: none: No such file or directory
	/var/lib/mdcheck/.md-check-8965: line 5: none: No such file or directory
	/usr/share/mdadm/mdcheck: line 109: echo: write error: Invalid argument

they originate from

	grep -rlni mdcheck /etc/cron*
		/etc/cron.d/mdadm
	cat /etc/cron.d/mdadm
		#
		# cron.d/mdadm - regular redundancy checks
		#

		# Start checking each month early in the morning.
		# Continue each day until all done

		PATH=/sbin:/usr/sbin:/bin:/usr/bin
		0 1 * * 0 root source /etc/sysconfig/mdadm; [ -n &quot;$MDADM_CHECK_DURATION&quot; -a -x /usr/share/mdadm/mdcheck -a $(date +\%d) -le 7 ] &amp;&amp; /usr/share/mdadm/mdcheck --duration &quot;$MDADM_CHECK_DURATION&quot;
		0 1 * * 1-6 root source /etc/sysconfig/mdadm; [ -n &quot;$MDADM_CHECK_DURATION&quot; -a -x /usr/share/mdadm/mdcheck ] &amp;&amp; /usr/share/mdadm/mdcheck --continue --duration &quot;$MDADM_CHECK_DURATION&quot;

checking

cat /usr/share/mdadm/mdcheck
	...
	# To support '--continue', arrays are identified by UUID and the 'sync_completed'
	# value is stored  in /var/lib/mdcheck/$UUID
	...
	sysname() {
	    set `ls -lLd $1`
	    maj=${5%,}
	    min=$6
	    readlink -f /sys/dev/block/$maj:$min
	}
	..
	for dev in /dev/md?*
	do
	    [ -e &quot;$dev&quot; ] || continue
	    sys=`sysname $dev`
	...
		echo $start &gt; $fl
109		echo $start &gt; $sys/md/sync_min
		echo check &gt; $sys/md/sync_action
	...

on my system

	ls -al /var/lib/mdcheck/
		total 16K
		drwxr-xr-x  2 root root 4.0K Dec 17 01:56 ./
		drwxr-xr-x 78 root root 4.0K Dec 15 13:59 ../
		-rw-r--r--  1 root root  319 Dec 13 01:00 .md-check-13566
		-rw-r--r--  1 root root  319 Dec 15 01:00 .md-check-17179

and

	cat /proc/mdstat | grep md
		md0 : active raid1 sdb1[1] sda1[0]
		md1 : active raid1 sda2[0] sdb2[2]
		md2 : active raid10 sdd1[1] sde1[4] sdc1[0] sdf1[3]

	ls -al /sys/dev/block/ | egrep &quot;md0|md1|md2&quot;
		lrwxrwxrwx 1 root root 0 Dec 17 05:56 9:0 -&gt; ../../devices/virtual/block/md0/
		lrwxrwxrwx 1 root root 0 Dec 17 05:56 9:1 -&gt; ../../devices/virtual/block/md1/
		lrwxrwxrwx 1 root root 0 Dec 17 05:56 9:2 -&gt; ../../devices/virtual/block/md2/

	ls -al /sys/dev/block/9:{0,1,2}/md/sync_min
		-rw-r--r-- 1 root root 4.0K Dec 17 06:00 /sys/dev/block/9:0/md/sync_min
		-rw-r--r-- 1 root root 4.0K Dec 17 06:00 /sys/dev/block/9:1/md/sync_min
		-rw-r--r-- 1 root root 4.0K Dec 17 01:00 /sys/dev/block/9:2/md/sync_min

	cat /etc/sysconfig/mdadm 
		MDADM_DELAY=60
		MDADM_MAIL=&quot;<a href="mailto:gk&#64;DOMAIN.com">gk&#64;DOMAIN.com</a>&quot;
		MDADM_PROGRAM=&quot;&quot;
		MDADM_RAIDDEVICES=&quot;/dev/md0 /dev/md1 /dev/md2&quot;
		MDADM_SCAN=yes
		MDADM_CONFIG=&quot;/etc/mdadm.conf&quot;
		MDADM_SEND_MAIL_ON_START=yes
		BOOT_MD_USE_MDADM_CONFIG=yes
		MDADM_DEVICE_TIMEOUT=&quot;60&quot;
		MDADM_CHECK_DURATION=&quot;12 hours&quot;</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2014-12-17 23:48:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hi

What version of the mdadm package do you have installed?

  rpm -q mdadm

what is the content of the .md-check files in /var/lib/mdcheck ??</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">ml1 noc</span>
</span>
        </span>

        <span class="bz_comment_time">
          2014-12-17 23:55:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Neil Brown from <a href="show_bug.cgi?id=910500#c1">comment #1</a>)
<span class="quote">&gt; Hi
&gt; 
&gt; What version of the mdadm package do you have installed?
&gt; 
&gt;   rpm -q mdadm</span >

rpm -q mdadm
  mdadm-3.3.1-5.10.1.x86_64

<span class="quote">&gt; what is the content of the .md-check files in /var/lib/mdcheck ??</span >

cat /var/lib/mdcheck/.md-check-13566
	MD_LEVEL=raid10
	MD_DEVICES=4
	MD_METADATA=1.2
	MD_UUID=b1c263cd:1c42565b:f3f1926d:db1811d3
	MD_NAME=&lt;none&gt;:nas03
	MD_DEVICE_sdc1_ROLE=0
	MD_DEVICE_sdc1_DEV=/dev/sdc1
	MD_DEVICE_sdd1_ROLE=1
	MD_DEVICE_sdd1_DEV=/dev/sdd1
	MD_DEVICE_sde1_ROLE=2
	MD_DEVICE_sde1_DEV=/dev/sde1
	MD_DEVICE_sdf1_ROLE=3
	MD_DEVICE_sdf1_DEV=/dev/sdf1

cat /var/lib/mdcheck/.md-check-17179 
	MD_LEVEL=raid10
	MD_DEVICES=4
	MD_METADATA=1.2
	MD_UUID=b1c263cd:1c42565b:f3f1926d:db1811d3
	MD_NAME=&lt;none&gt;:nas03
	MD_DEVICE_sdc1_ROLE=0
	MD_DEVICE_sdc1_DEV=/dev/sdc1
	MD_DEVICE_sdd1_ROLE=1
	MD_DEVICE_sdd1_DEV=/dev/sdd1
	MD_DEVICE_sde1_ROLE=2
	MD_DEVICE_sde1_DEV=/dev/sde1
	MD_DEVICE_sdf1_ROLE=3
	MD_DEVICE_sdf1_DEV=/dev/sdf1</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">ml1 noc</span>
</span>
        </span>

        <span class="bz_comment_time">
          2014-12-18 14:34:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >this morning, it's:

/var/lib/mdcheck/.md-check-22591: line 5: none: No such file or directory
/var/lib/mdcheck/.md-check-22591: line 5: none: No such file or directory

where, still

ls -al /var/lib/mdcheck/
total 16K
drwxr-xr-x  2 root root 4.0K Dec 18 01:00 ./
drwxr-xr-x 78 root root 4.0K Dec 15 13:59 ../
-rw-r--r--  1 root root  319 Dec 13 01:00 .md-check-13566
-rw-r--r--  1 root root  319 Dec 15 01:00 .md-check-17179

those 'old' files, I suspect, are not involved ...</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">tosiara tosiara</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-01-05 06:02:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I also got 3 emails since I have upgraded to 13.2

Cron &lt;root&#64;server&gt; source /etc/sysconfig/mdadm; [ -n &quot;$MDADM_CHECK_DURATION&quot; -a -x /usr/share/mdadm/mdcheck ] &amp;&amp; /usr/share/mdadm/mdcheck --continue --duration &quot;$MDADM_CHECK_DURATION&quot;

/usr/share/mdadm/mdcheck: line 109: echo: write error: Invalid argument</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Shad Sterling</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-01-27 13:32:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I think I'm having the same problem, with a different error message:

/var/lib/mdcheck/.md-check-29228: line 5: syntax error near unexpected token `('
/var/lib/mdcheck/.md-check-29228: line 5: `MD_NAME=adumbrate:Backups (mirror set)'

In my case, the problem is that mdadm --detail --export does not shell-escape its output.  The error is triggered by lines 90 and 91 of /usr/share/mdadm/mdcheck :

        mdadm --detail --export &quot;$dev&quot; &gt; $tmp || continue
        source $tmp

Where &quot;$tmp&quot; in this case was set to &quot;/var/lib/mdcheck/.md-check-29228&quot; on line 68.

The value of MD_NAME includes characters that must be escaped to appear in a string.  In my case, it syntax errors on the parenthesis; in grant's case it tries to redirect stdin from a nonexistent file (it may also have created a file named &quot;:nas03&quot;).

It looks like this bug makes it possible to execute arbitrary shell commands as root by including them in an MD_NAME, for example

        MD_NAME=; rm -rf /

tosiara's error looks like a different problem.

I have mdadm-3.3.1-5.3.1.x86_64 on openSUSE 13.2 (Harlequin) (x86_64)</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">ml1 noc</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-01-29 15:41:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; It looks like this bug makes it possible to execute arbitrary shell commands as &gt; root by including them in an MD_NAME, for example
&gt; 
&gt;         MD_NAME=; rm -rf /</span >

if true, cc'ing security-team</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Shad Sterling</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-01 21:29:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >As a temporary workaround to get the cronjob to work until mdadm is patched, it should be enough to change the MD_NAME to something that doesn't need escaping.  Unfortunately, searching for ways to rename an md device only turns up ways to change the device node /dev/mdXXX.  Is there a way to change the MD_NAME?</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-01 22:17:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt;  Is there a way to change the MD_NAME?</span >

Stop the array (if it is running), then assemble with
   --update=name --name=NewName</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bernhard Wiedemann</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-04 00:00:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is an autogenerated message for OBS integration:
This bug (910500) was mentioned in
<a href="https://build.opensuse.org/request/show/283972">https://build.opensuse.org/request/show/283972</a> Factory / mdadm</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-04 00:04:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for the report.

I have submitted an update for 13.2 and Factory which makes this change:

+-      mdadm --detail --export &quot;$dev&quot; &gt; $tmp || continue
++      mdadm --detail --export &quot;$dev&quot; | grep '^MD_UUID=' &gt; $tmp || continue

to the mdcheck script.  You could easily do that by hand rather than wait for the update.

<a href="show_bug.cgi?id=910500#c6">Comment #6</a> is correct that this could be a security issue.
If a USB device with carefully crafted metadata were plugged into an openSUSE host, the array would be automatically assembled.
If it was still there at 1am when the mdcheck script is run by cron, then shell code from the array name would be executed.

Security-team:  is there anything else I should do w.r.t. the security aspect?</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-04 15:20:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Neil F Brown from <a href="show_bug.cgi?id=910500#c10">comment #10</a>)
We probably will assign a CVE for that issue.

If you just need MD_UUID, why do you use this &gt; $tmp, source approach? Your changed version should be safe but I don't see the need for that.</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Meissner</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-04 15:23:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Is this USB attack vector valid? Can this really happen on just plugging in a prepared USB stick?</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-04 23:49:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Johannes Segitz from <a href="show_bug.cgi?id=910500#c11">comment #11</a>)

<span class="quote">&gt; If you just need MD_UUID, why do you use this &gt; $tmp, source approach? </span >

Well, one has to use some approach...
The &quot;--export&quot; flag is intended to make it easy to extra detail for use by some other program, originally udev.
It works, so I use it.</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-04 23:55:12 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Marcus Meissner from <a href="show_bug.cgi?id=910500#c12">comment #12</a>)
<span class="quote">&gt; Is this USB attack vector valid? Can this really happen on just plugging in
&gt; a prepared USB stick?</span >

Yes.
If you plug in a USB which has been configured as the working device in a degraded RAID1, then udev will run &quot;mdadm -I devicename&quot; and the array will
be activated.  This is not unlike the way a FAT filesystem will automatically be mounted.

Once the array has been assembled, /usr/share/mdadm/mdcheck will (at 1am) find it as a &quot;/dev/md*&quot; and will try to extra the UUID to decide what is to be done.</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 10:15:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >We will treat this as a security issue. I will assign a CVE shortly and start an update.</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 10:24:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is CVE-2014-5220</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 10:24:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >An update workflow for this issue was started.
This issue was rated as low.
Please submit fixed packages until 2015-03-05.
When done, reassign the bug to <a href="mailto:security-team&#64;suse.de">security-team&#64;suse.de</a>.
<a href="https://swamp.suse.de/webswamp/wf/60549">https://swamp.suse.de/webswamp/wf/60549</a></pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Shad Sterling</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 13:02:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Why is the problem that mdcheck doesn't validate input, rather than that mdadm doesn't escape its output?  The output sure looks like it's intended to be parsed by the shell; the man page says &quot;output will be formatted as key=value pairs for easy import into the environment.&quot;  Does that refer to something other than the shell environment?  If the output from mdadm isn't changed, I would expect the same vulnerability to be recreated in future scripts, even if only site-specific scripts.</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 13:20:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Shad Sterling from <a href="show_bug.cgi?id=910500#c18">comment #18</a>)
It's not either or. One is a problem in a software we ship that could potentially be exploited. Because of that we assigned a CVE for that. Having mdadm properly quoting the output is certainly a good idea but could be considered a hardening (which wouldn't receive a CVE). I will file a bug to suggest that.</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 13:22:01 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Johannes Segitz from <a href="show_bug.cgi?id=910500#c19">comment #19</a>)
well, I just learned who the upstream maintainer is ... ;) Neil, what do you think?</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-05 20:44:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Johannes Segitz from <a href="show_bug.cgi?id=910500#c20">comment #20</a>)
<span class="quote">&gt; well, I just learned who the upstream maintainer is ... ;) Neil, what do you
&gt; think?</span >

It is already on my list of things I should think about fixing in mdadm.

In answer to:
 &gt; Does that refer to something other than the shell environment?  
It originally referred to the udev environment.  I would like it to work for shell too.</pre>
    </div><div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-06 05:17:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm not sure how best to reply to a 'swamp' email... so I'll reply here.

This bug is only relevant to openSUSE-13.2, and openSUSE:Factory.  No other release containst mdcheck.  In particularly, no SLES release contains this.

The 'swamp' issue identifies two other bugs that should be address.  Neither of these are relevant to either of the affected releases - they already contain the fix.  These two are only relevant to SLES11-SP3, and possibly -SP2.

So there is only one bug that needs to be fixed for openSUSE.
The maint request for 13.2 is 284268.
The request for Factory is 283972.</pre>
    </div><div id="c23" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bernhard Wiedemann</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-06 06:00:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is an autogenerated message for OBS integration:
This bug (910500) was mentioned in
<a href="https://build.opensuse.org/request/show/284268">https://build.opensuse.org/request/show/284268</a> 13.2 / mdadm</pre>
    </div><div id="c24" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-06 08:52:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Neil F Brown from <a href="show_bug.cgi?id=910500#c22">comment #22</a>)
Sorry, didn't know that. You can ignore the SWAMP, I'll handle the openSUSE submit today.</pre>
    </div><div id="c26" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bernhard Wiedemann</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-06 23:00:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is an autogenerated message for OBS integration:
This bug (910500) was mentioned in
<a href="https://build.opensuse.org/request/show/284578">https://build.opensuse.org/request/show/284578</a> 13.2 / mdadm</pre>
    </div><div id="c27" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-18 03:57:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Update has been accepted, so closing bug.</pre>
    </div><div id="c28" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-02-18 10:04:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-SU-2015:0308-1: An update that fixes one vulnerability is now available.

Category: security (low)
Bug References: 910500
CVE References: CVE-2014-5220
Sources used:
openSUSE 13.2 (src):    mdadm-3.3.1-5.14.1</pre>
    </div><div id="c29" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">tosiara tosiara</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-03-09 05:59:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Installed all latest updates, but still receive emails from cron:

Cron &lt;root&#64;server&gt; source /etc/sysconfig/mdadm; [ -n &quot;$MDADM_CHECK_DURATION&quot; -a -x /usr/share/mdadm/mdcheck ] &amp;&amp; /usr/share/mdadm/mdcheck --continue --duration &quot;$MDADM_CHECK_DURATION&quot;
Mon, Mar 9, 2015 at 1:00 AM
/usr/share/mdadm/mdcheck: line 109: echo: write error: Invalid argument

mdadm version:

# rpm -qa | grep mdadm
mdadm-3.3.1-5.14.1.x86_64

kernel:

# uname -a
Linux server 3.18.1-1.g5f2f35e-desktop #1 SMP PREEMPT Wed Dec 17 18:20:30 UTC 2014 (5f2f35e) x86_64 x86_64 x86_64 GNU/Linux

# cat /etc/issue
Welcome to openSUSE 13.2 &quot;Harlequin&quot; - Kernel \r (\l).</pre>
    </div><div id="c30" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">tosiara tosiara</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-03-09 06:34:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The faulty line of &quot;/usr/share/mdadm/mdcheck&quot; is this one:

echo $start &gt; $sys/md/sync_min

I think the issue here is that &quot;$start&quot; contains invalid number, probably not aligned to chunk size</pre>
    </div><div id="c31" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-03-09 23:00:13 UTC
        </span>
      </div>



<pre class="bz_comment_text" >bugbot adjusting priority</pre>
    </div><div id="c32" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=910500#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Neil Brown</span>
</span>
        </span>

        <span class="bz_comment_time">
          2015-03-23 06:47:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hmm... on reflection I cannot think of a good reason for sync_min to need to
be chunk-aligned.

I have submitted a patch to openSUSE13.2 to remove that restriction and have queued it to go upstream.
So it should be fixed in next maintenance kernel, or the kernel-of-the-day in a couple of days.

Thanks for the report.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=910500">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=910500">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=910500">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <!--a id="login_link_bottom" href="show_bug.cgi?id=910500&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a-->
  <a id="login_link_bottom" href="show_bug.cgi?id=910500&amp;GoAheadAndLogIn=1">Log In</a>


  <form action="show_bug.cgi?id=910500" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_bottom"
        onsubmit="return check_mini_login_fields( '_bottom' );"
  >
    <input id="Bugzilla_login_bottom" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_bottom" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_bottom" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_bottom">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_bottom');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_bottom');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
<li id="forgot_container_bottom">
  <span class="separator">| </span>
  <a id="forgot_link_bottom" href="https://idp-portal.suse.com/univention/self-service/#page=passwordreset">Forgot Password</a>
</li>
</ul>
  </li>

  
    


  <form id="testopia_helper_frm"></form><ul class="links">
    <li>Legal: </li>
    <li><a href="http://en.opensuse.org/Terms_of_site">openSUSE</a></li>
    <li><a href="https://www.suse.com/company/legal/">SUSE</a></li>
  </ul>
</ul>

  <div class="outro"></div>
</div>


</body>
</html>