<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1501152 - (CVE-2019-11752) Use after free in KeyPath::ExtractKey">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1501152">
<meta property="og:description"
      content="VERIFIED (ytausky) in Core - Storage: IndexedDB. Last updated 2020-06-05.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P2">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1501152 - (CVE-2019-11752) Use after free in KeyPath::ExtractKey</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1501152&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1501152">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1501152">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/yui.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/global.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/util.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"flags\":{\"tracking\":{\"cf_status_firefox95\":\"---\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_status_firefox68\":\"wontfix\",\"cf_tracking_firefox69\":\"+\",\"cf_status_firefox67\":\"wontfix\",\"cf_status_firefox69\":\"verified\",\"cf_status_firefox70\":\"verified\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_status_firefox65\":\"wontfix\",\"cf_tracking_firefox70\":\"+\",\"cf_status_firefox_esr91\":\"---\",\"cf_tracking_firefox95\":\"---\",\"cf_status_firefox66\":\"wontfix\",\"cf_tracking_firefox_esr68\":\"69+\",\"cf_tracking_firefox_esr60\":\"69+\",\"cf_tracking_firefox67\":\"-\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_status_firefox94\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox_esr60\":\"verified\",\"cf_tracking_firefox93\":\"---\",\"cf_status_firefox_esr68\":\"verified\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_firefox94\":\"---\",\"cf_tracking_firefox68\":\"+\",\"cf_status_firefox_esr78\":\"---\",\"cf_tracking_thunderbird_esr91\":\"---\"},\"project\":{\"cf_fission_milestone\":\"---\",\"cf_root_cause\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_a11y_review_project_flag\":\"---\"}},\"comments\":{\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox70\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox68\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_esr68\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox69\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox67\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr60\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"}},\"types\":[\"tracking\"]}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1501152;
  BUGZILLA.bug_title = '1501152 - (CVE-2019-11752) Use after free in KeyPath::ExtractKey';
  BUGZILLA.bug_summary = 'Use after free in KeyPath::ExtractKey';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1501152';
  BUGZILLA.bug_keywords = 'csectype-uaf, sec-high, testcase',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/field.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/comments.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1501152">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1501152"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1501152 - (CVE-2019-11752) Use after free in KeyPath::ExtractKey">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="VJtpi7UV1dQ2TfEMzS1XN7Bp0r2nxUWhLrlLPKMA8IyJrxV8O1gZ6k13F1DBdLGckN0bt6HG4Al8TMHZ1A7gyRlPQGQl09MxQZJmJ9mZtI9zCnQPvkPCQJrOT263k6EJQ7siALz85JcFQ2Z54bokPXkl4H0SXq2rfd266fXMr88ReLonJa6JLpt6Dvqh9HprzmxVNmpUBOBi5uEGX0oJngkRLG4CjZrAEmtfif02kMzfalYktdTycprRzB9FPpyi">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1501152" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623367-Ws2lpZd0ESiXr5b8PcCX__B-XX3Wcw39DmeCZXQu1J0">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1501152" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1501152" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1501152">Bug 1501152</a>
          <span class="edit-hide">(CVE-2019-11752)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2018-10-22 20:55 PDT" data-time="1540266924">3 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2019-08-22 08:33 PDT" data-time="1566488004">2 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">Use after free in Key<wbr>Path::Extract<wbr>Key</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            Use after free in KeyPath::ExtractKey

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: Storage: IndexedDB, defect, P2)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=Storage%3A%20IndexedDB#Storage%3A%20IndexedDB" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Storage: IndexedDB
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: Storage: IndexedDB</div>
            <div class="description"><a href="https://w3c.github.io/IndexedDB/">IndexedDB</a> implementation, exposed through self.indexedDB.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=Storage%3A%20IndexedDB&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=Storage%3A%20IndexedDB&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=Storage%3A%20IndexedDB"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="Storage: IndexedDB"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-version"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            65 Branch

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P2
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr68&quot;:&quot;69+&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;cf_status_firefox65&quot;:&quot;wontfix&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox70&quot;:&quot;+&quot;,&quot;cf_status_firefox66&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;status&quot;:&quot;VERIFIED&quot;,&quot;cf_status_firefox69&quot;:&quot;verified&quot;,&quot;cf_status_firefox67&quot;:&quot;wontfix&quot;,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla70&quot;,&quot;cf_status_firefox70&quot;:&quot;verified&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox68&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox69&quot;:&quot;+&quot;,&quot;dupe_of&quot;:null,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;keywords&quot;:[&quot;csectype-uaf&quot;,&quot;sec-high&quot;,&quot;testcase&quot;],&quot;cf_tracking_firefox68&quot;:&quot;+&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;priority&quot;:&quot;P2&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr60&quot;:&quot;verified&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr68&quot;:&quot;verified&quot;,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;id&quot;:1501152,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;flags&quot;:[{&quot;name&quot;:&quot;sec-bounty&quot;,&quot;status&quot;:&quot;+&quot;}],&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr60&quot;:&quot;69+&quot;,&quot;cf_tracking_firefox67&quot;:&quot;-&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla70

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr60</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=69%2B">69+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr68</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr68&amp;o1=equals&amp;v1=69%2B">69+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox65</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox66</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox67</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=equals&amp;v1=-">-</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox68</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox68&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox69</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox69&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox70</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox70&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr60</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr60-dirty">
  <select id="cf_tracking_firefox_esr60" name="cf_tracking_firefox_esr60">
        <option value="69+"
          id="v4336_cf_tracking_firefox_esr60" selected
        >69+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr60-dirty">
  <select id="cf_status_firefox_esr60" name="cf_status_firefox_esr60">
        <option value="verified"
          id="v3637_cf_status_firefox_esr60" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr68-dirty">
  <select id="cf_tracking_firefox_esr68" name="cf_tracking_firefox_esr68">
        <option value="69+"
          id="v4406_cf_tracking_firefox_esr68" selected
        >69+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr68-dirty">
  <select id="cf_status_firefox_esr68" name="cf_status_firefox_esr68">
        <option value="verified"
          id="v4413_cf_status_firefox_esr68" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox65</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox65-dirty">
  <select id="cf_status_firefox65" name="cf_status_firefox65">
        <option value="wontfix"
          id="v4037_cf_status_firefox65" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox66</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox66-dirty">
  <select id="cf_status_firefox66" name="cf_status_firefox66">
        <option value="wontfix"
          id="v4109_cf_status_firefox66" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox67</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox67-dirty">
  <select id="cf_tracking_firefox67" name="cf_tracking_firefox67">
        <option value="-"
          id="v4189_cf_tracking_firefox67" selected
        >-
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox67-dirty">
  <select id="cf_status_firefox67" name="cf_status_firefox67">
        <option value="wontfix"
          id="v4197_cf_status_firefox67" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox68-dirty">
  <select id="cf_tracking_firefox68" name="cf_tracking_firefox68">
        <option value="+"
          id="v4252_cf_tracking_firefox68" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox68-dirty">
  <select id="cf_status_firefox68" name="cf_status_firefox68">
        <option value="wontfix"
          id="v4261_cf_status_firefox68" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox69</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox69-dirty">
  <select id="cf_tracking_firefox69" name="cf_tracking_firefox69">
        <option value="+"
          id="v4323_cf_tracking_firefox69" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox69-dirty">
  <select id="cf_status_firefox69" name="cf_status_firefox69">
        <option value="verified"
          id="v4333_cf_status_firefox69" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox70</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox70-dirty">
  <select id="cf_tracking_firefox70" name="cf_tracking_firefox70">
        <option value="+"
          id="v4429_cf_tracking_firefox70" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox70-dirty">
  <select id="cf_status_firefox70" name="cf_status_firefox70">
        <option value="verified"
          id="v4439_cf_status_firefox70" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: zhanjiasong45, Assigned: ytausky)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_621888" ><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=621888" > <span class="fna">ytausky</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_615701" ><img src="https://secure.gravatar.com/avatar/3c10788660c0b5ff64ab9183c51c1882?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_646284" ><img src="https://secure.gravatar.com/avatar/9dcff4a8838b41f34d204c2f4cadbcc4?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=646284" > <span class="fna">jstutte</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="25">25 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Inheriting constructors whose inherited constructors are implicit are always rejected"
   href="/show_bug.cgi?id=1554989">1554989</a>
      </div>
      <div class="bug-list">
        <span class="bug-type-label iconic" title="task"
              aria-label="task" data-type="task">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Refactor IndexedDB's add() and put() operations to make correspondence to spec clearer"
   href="/show_bug.cgi?id=1544750">1544750</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1501152&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1501152">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-see_also"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="enhancement"
              aria-label="enhancement" data-type="enhancement">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WORKSFORME"
   href="/show_bug.cgi?id=1570585">1570585</a>
      </div>

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: csectype-uaf, sec-high, testcase, Whiteboard: [reporter-external] [client-bounty-form][fixed in bug 1544750][post-critsmash-triage][adv-main69+][adv-esr68.1+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2019-11752

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-uaf&amp;resolution=---">csectype-uaf</a>, 
          <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a>, 
          <a href="/buglist.cgi?keywords=testcase&amp;resolution=---">testcase</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[reporter-external] [client-bounty-form][fixed in bug 1544750][post-critsmash-triage][adv-main69+][adv-esr68.1+]
        </span>
    </div>

  
</div><div class="field" id="field-cf_qa_whiteboard"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
            [qa-triaged]

        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a26570886_1689"
            class="rel-time-title activity-ref"
            title="3 years ago"
        data-time="1540266924"
      >sec-bounty</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag-1819628">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1819628-dirty">
      <select id="flag-1819628" name="flag-1819628"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
            <option value="+" selected>+</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (9 files, 1 obsolete file)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9019240">FireFox_IndexedDB_UAF3.html</a>
        </div>
        <div>
            <a href="#c0" class="attach-time activity-ref"><span class="rel-time" title="2018-10-22 20:55 PDT" data-time="1540266924">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_615701" ><a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div></span>
        </div>
        <div class="attach-info">1.10 KB,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9019240&amp;action=edit">Details</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9019241">ASan.txt</a>
        </div>
        <div>
            <a href="#c1" class="attach-time activity-ref"><span class="rel-time" title="2018-10-22 20:58 PDT" data-time="1540267106">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_615701" ><a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div></span>
        </div>
        <div class="attach-info">27.15 KB,
          text/plain        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9019241&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9023990">patch for spidermonkey</a>
        </div>
        <div>
            <a href="#c11" class="attach-time activity-ref"><span class="rel-time" title="2018-11-09 07:47 PST" data-time="1541778453">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_8340" ><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div></span>
        </div>
        <div class="attach-info">2.26 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_586681" ><span class="fn">tcampbell</span>
</div>:
              <a href="#c17"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1541778453"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9023990&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9023990&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9023990">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9023991">patch for indexeddb</a>
        </div>
        <div>
            <a href="#c12" class="attach-time activity-ref"><span class="rel-time" title="2018-11-09 07:54 PST" data-time="1541778871">3 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_8340" ><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div></span>
        </div>
        <div class="attach-info">17.93 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_151407" ><span class="fn">asuth</span>
</div>:
              <a href="#c13"
                  class="flag-name-status rel-time-title activity-ref"
                  title="3 years ago"
              data-time="1541778871"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9023991&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9023991&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9023991">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9078768">Bug 1501152 - Have a function to get elements from JS array;</a>
        </div>
        <div>
            <a href="#c38" class="attach-time activity-ref"><span class="rel-time" title="2019-07-17 09:27 PDT" data-time="1563380832">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_552411" ><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9078768&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9078768">Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9087003">Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</a>
        </div>
        <div>
            <a href="#c53" class="attach-time activity-ref"><span class="rel-time" title="2019-08-21 05:59 PDT" data-time="1566392397">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_621888" ><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_75935" ><span class="fn">RyanVM</span>
</div>:
              <a href="#c58"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1566481522"
            >
              approval-mozilla-beta+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#c60"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1566481522"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9087003&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9087003">Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9087298">Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</a>
        </div>
        <div>
            <a href="#c54" class="attach-time activity-ref"><span class="rel-time" title="2019-08-22 00:31 PDT" data-time="1566459118">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_621888" ><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_75935" ><span class="fn">RyanVM</span>
</div>:
              <a href="#c63"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1566481630"
            >
              approval-mozilla-esr68+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9087298&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9087298">Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9088091">Bug 1554989 - Fix implicit checker on inheriting constructors r=andi</a>
        </div>
        <div>
            <a href="#c67" class="attach-time activity-ref"><span class="rel-time" title="2019-08-26 04:32 PDT" data-time="1566819160">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_621888" ><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div></span>
        </div>
        <div class="attach-info">47 bytes,
          text/x-phabricator-request        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9088091&amp;action=edit">Details</a>&#x0020; |
  <a href="/attachment.cgi?id=9088091">Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9089466">patch for esr60</a>
        </div>
        <div>
            <a href="#c74" class="attach-time activity-ref"><span class="rel-time" title="2019-08-30 10:02 PDT" data-time="1567184549">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_580382" ><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div></span>
        </div>
        <div class="attach-info">44.34 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_151407" ><span class="fn">asuth</span>
</div>:
              <a href="#c75"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1567184549"
            >
              feedback+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_580382" ><span class="fn">jcristau</span>
</div>:
              <a href="#c78"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1567330432"
            >
              approval-mozilla-esr60+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9089466&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9089466&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9089466">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9089512">Matcher fix</a>
        </div>
        <div>
            <a href="#c76" class="attach-time activity-ref"><span class="rel-time" title="2019-08-30 13:03 PDT" data-time="1567195380">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_8340" ><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div></span>
        </div>
        <div class="attach-info">2.10 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9089512&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9089512&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9089512">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="nbFQQg77o2BtMhwv4Umn8kBWSTcxDEX7Gsl1kxIwuKEBOqrN">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="13705946" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_615701" ><img src="https://secure.gravatar.com/avatar/3c10788660c0b5ff64ab9183c51c1882?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_615701" ><a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-22 20:55 PDT" data-time="1540266924">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9019240"
         class="attachment"
         data-id="9019240" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="FireFox_IndexedDB_UAF3.html">
      <meta itemprop="contentSize" content="1125">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9019240" itemprop="contentUrl">
        <span id="att-9019240-description" itemprop="description">FireFox_IndexedDB_UAF3.html</span></a>
        — <a href="attachment.cgi?id=9019240&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-0" data-comment-id="13705946">nsresult
KeyPath::ExtractKey(JSContext* aCx, const JS::Value&amp; aValue, Key&amp; aKey) const
{
  uint32_t len = mStrings.Length();
  JS::Rooted&lt;JS::Value&gt; value(aCx);

  aKey.Unset();

  for (uint32_t i = 0; i &lt; len; ++i) {
    nsresult rv = GetJSValFromKeyPathString(aCx, aValue, mStrings[i],
                                            value.address(),
                                            DoNotCreateProperties, nullptr,
                                            nullptr);
    if (NS_FAILED(rv)) {
      return rv;
    }

    if (NS_FAILED(aKey.AppendItem(aCx, IsArray() &amp;&amp; i == 0, value))) { // aKey.AppendItem can execute js getter (AppendItem =&gt; EncodeJSVal =&gt;  EncodeJSValInternal =&gt; JS_GetElement)
      NS_ASSERTION(aKey.IsUnset(), &quot;Encoding error should unset&quot;);
      return NS_ERROR_DOM_INDEXEDDB_DATA_ERR;
    }
  }

  aKey.FinishArray();

  return NS_OK;
}

aKey.AppendItem can execute js getter, call deleteIndex in the getter will cause UAF.</pre><div class="activity"><div class="change">Flags: sec-bounty?</div></div></div><div class="change-set" id="a58_615701"><div class="change" id="aa58_615701">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_615701" id="a58_615701"><img src="https://secure.gravatar.com/avatar/3c10788660c0b5ff64ab9183c51c1882?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_615701" id="a58_615701"><a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a58_615701"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a58_615701">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a58_615701">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-22 20:56 PDT" data-time="1540266982">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Version: unspecified &rarr; 65 Branch</div></div></div><div class="change-set" id="c1"><div class="comment" data-id="13705950" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_615701" id="a58_615701"><img src="https://secure.gravatar.com/avatar/3c10788660c0b5ff64ab9183c51c1882?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_615701" id="a58_615701"><a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-22 20:58 PDT" data-time="1540267106">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9019241"
         class="attachment"
         data-id="9019241" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="ASan.txt">
      <meta itemprop="contentSize" content="27798">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9019241" itemprop="contentUrl">
        <span id="att-9019241-description" itemprop="description">ASan.txt</span></a>
        — <a href="attachment.cgi?id=9019241&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-1" data-comment-id="13705950">test with <a rel="nofollow" href="https://developer.mozilla.org/en-US/docs/Mozilla/Testing/Firefox_and_Address_Sanitizer,65.0a1">https://developer.mozilla.org/en-US/docs/Mozilla/Testing/Firefox_and_Address_Sanitizer,65.0a1</a> (2018-10-22) (64-bit)</pre></div><div class="change-set" id="c2"><div class="comment" data-id="13706411" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a58_615701"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a58_615701"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-23 02:31 PDT" data-time="1540287103">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="13706411">Jan/Andrew, can you look at this or redirect to the right person? Thank you!</pre><div class="activity"><div class="change">Group: firefox-core-security &rarr; dom-core-security</div><div class="change">Component: Security &rarr; DOM: IndexedDB</div><div class="change">Flags: needinfo?(jvarga)</div><div class="change">Flags: needinfo?(bugmail)</div><div class="change">Product: Firefox &rarr; Core</div></div></div><div class="change-set" id="c3"><div class="comment" data-id="13706418" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a58_615701"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a58_615701"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-23 02:37 PDT" data-time="1540287427">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="13706418">We fixed this by cloning the object before calling ExtractKey. However, there may be still some corner cases.</pre><div class="activity"><div class="change">Assignee: nobody &rarr; jvarga</div><div class="change">Flags: <span class="activity-deleted">needinfo?(jvarga)</span></div></div></div><div class="change-set" id="c4"><div class="comment" data-id="13706734" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a58_615701"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a58_615701"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-23 06:23 PDT" data-time="1540300988">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="13706734">So, restating my understanding, the issue is now that when we are encoding a value into the key (which has a custom encoding mechanism) we have special handling for JS Arrays.  At <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/fcfb479e6ff63aea017d063faa17877ff750b4e5/dom/indexedDB/Key.cpp#265">https://searchfox.org/mozilla-central/rev/fcfb479e6ff63aea017d063faa17877ff750b4e5/dom/indexedDB/Key.cpp#265</a> we manually traverse the array using JS_GetElement.  This is impacted by the prototype chain because we don't do any &quot;own&quot; magic and we lose.  And because we didn't make deleteIndex() throw when there's an IDB operation on the stack, we have a use-after-free.

Xray wrappers thoughts on the subject are found in the comment above the Array special-case here:
<a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/fcfb479e6ff63aea017d063faa17877ff750b4e5/js/xpconnect/wrappers/XrayWrapper.cpp#536">https://searchfox.org/mozilla-central/rev/fcfb479e6ff63aea017d063faa17877ff750b4e5/js/xpconnect/wrappers/XrayWrapper.cpp#536</a>

It looks like this is the only dangerous call for encoding given that JS_GetArrayLength has already checked the internal class of the object and so it should not reach the dangerous GetProperty call at <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/fcfb479e6ff63aea017d063faa17877ff750b4e5/js/src/builtin/Array.cpp#142">https://searchfox.org/mozilla-central/rev/fcfb479e6ff63aea017d063faa17877ff750b4e5/js/src/builtin/Array.cpp#142</a> but let's involve :sfink because maybe he wants to write a bunch of cool static analyses that can help C++ code ensure that it's not triggering content-controlled JS when it doesn't want to.

:sfink, for extra context, I suggest reading the comment at <a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/indexedDB/Key.cpp#33">https://searchfox.org/mozilla-central/source/dom/indexedDB/Key.cpp#33</a> which describes how IndexedDB cleverly encodes the keys defined by the spec at <a rel="nofollow" href="https://www.w3.org/TR/IndexedDB/#key-construct">https://www.w3.org/TR/IndexedDB/#key-construct</a>.   We cleverly encode the keys into a binary representation so SQLite can just do its binary comparison thing without us needing to provide a custom collation function.  (Structured Clone can't do that for us... yet... ;)</pre><div class="activity"><div class="change">Flags: needinfo?(bugmail) &rarr; needinfo?(sphink)</div></div></div><div class="change-set" id="a220979_486634"><div class="change" id="aa220979_486634">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_486634" id="a220979_486634"><img src="https://secure.gravatar.com/avatar/a2837b951fa7dc639a2568203478ff0a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_486634" id="a220979_486634"><a class="email " href="/user_profile?user_id=486634" > <span class="fna">Tyson Smith [:tsmith] (PTO)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a220979_486634"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a220979_486634">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a220979_486634">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-25 10:18 PDT" data-time="1540487903">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-uaf&amp;resolution=---">csectype-uaf</a>, 
          
            <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a>, 
          
            <a href="/buglist.cgi?keywords=testcase&amp;resolution=---">testcase</a></div></div></div><div class="change-set" id="a221333_451704"><div class="change" id="aa221333_451704">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a221333_451704"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_451704" id="a221333_451704"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a221333_451704"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a221333_451704">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a221333_451704">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-25 10:24 PDT" data-time="1540488257">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=isnotempty">status-firefox65</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=%3F">?</a></div></div></div><div class="change-set" id="a224052_486634"><div class="change" id="aa224052_486634">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_486634" id="a224052_486634"><img src="https://secure.gravatar.com/avatar/a2837b951fa7dc639a2568203478ff0a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_486634" id="a224052_486634"><a class="email " href="/user_profile?user_id=486634" > <span class="fna">Tyson Smith [:tsmith] (PTO)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a224052_486634"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a224052_486634">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a224052_486634">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-10-25 11:09 PDT" data-time="1540490976">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: UNCONFIRMED &rarr; NEW</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=isnotempty">status-firefox65</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">Ever confirmed: true</div></div></div><div class="change-set" id="a823086_359004"><div class="change" id="aa823086_359004">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_359004" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/d269c0228684029dedb75d73b81a64c3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_359004" id="a823086_359004"><a class="email " href="/user_profile?user_id=359004" > <span class="fna">Steve Fink [:sfink] [:s:]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a823086_359004"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a823086_359004">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a823086_359004">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-01 09:33 PDT" data-time="1541090010">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(sphink)</span></div></div></div><div class="change-set" id="c5"><div class="comment" data-id="13729849" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_359004" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/d269c0228684029dedb75d73b81a64c3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_359004" id="a823086_359004"><a class="email " href="/user_profile?user_id=359004" > <span class="fna">Steve Fink [:sfink] [:s:]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-01 15:56 PDT" data-time="1541112960">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="13729849">Oops, I didn't mean to un-needinfo myself.</pre><div class="activity"><div class="change">Flags: needinfo?(sphink)</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="13729960" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_359004" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/d269c0228684029dedb75d73b81a64c3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_359004" id="a823086_359004"><a class="email " href="/user_profile?user_id=359004" > <span class="fna">Steve Fink [:sfink] [:s:]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-01 17:02 PDT" data-time="1541116937">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="13729960">This really ought to be caught by the static rooting hazard analysis. It currently is not.

aValue is kept live across GC calls: it's live upon entry, live across both GC calls GetJSValFromKeyPathString() and AppendItem() during the first iteration of the loop, and then consumed at the top of the second iteration. It's not reported by the analysis because the analysis sees const Value&amp; as Value*, and that's a pointer to a pointer encoded in a Value. Pointers to pointers don't get invalidated by GC. It *should* be reported as a warning in the caller, but it won't because of <a class="bz_bug_link
          bz_status_NEW"
   title="NEW"
   href="/show_bug.cgi?id=1497593">bug 1497593</a> (not that we're good about warnings.)

(In reply to Jan Varga [:janv] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey"
   href="/show_bug.cgi?id=1501152#c3">comment #3</a>)
<span class="quote">&gt; We fixed this by cloning the object before calling ExtractKey. However,
&gt; there may be still some corner cases.</span >

That would fix the problem where the getter removes the value or some property of it, but cloning by itself wouldn't solve the rooting problem. But I see that it's done with ValueWrapper, which contains mValue in a Rooted, so that fixes the rooting hazard.

This bug makes me think that perhaps <a class="bz_bug_link
          bz_status_NEW"
   title="NEW"
   href="/show_bug.cgi?id=1497593">bug 1497593</a> is not enough; that would only produce warnings in the caller that we would almost certainly ignore. (We periodically sweep through those looking for real problems, but rarely.) Conceptually, this passing of a const Value&amp; ought to be analyzed as if we were passing a plain Value. We're only passing by reference because (1) alignment constraints make passing by value problematic, and (2) it is more efficient on 32-bit (though I'm not wholly convinced that's really true, but it makes life easier on the JIT so I won't argue.)

Then again, if I *did* make this change to the analysis, it would turn this case into a false positive. But it really does smell like a problem if you only look at it locally. What would be better, and would survive the intended analysis change, would be if ExtractKey took a Handle&lt;JS::Value&gt; instead of a const Value&amp;. I think that should just work, since ValueWrapper hands out its Value as a Rooted&lt;Value&gt;&amp;. Which, by the way, is kind of weird -- I would prefer that to be returning a Handle&lt;Value&gt; instead.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(sphink)</span></div></div></div><div class="change-set" id="c7"><div class="comment" data-id="13729968" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_359004" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/d269c0228684029dedb75d73b81a64c3?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_359004" id="a823086_359004"><a class="email " href="/user_profile?user_id=359004" > <span class="fna">Steve Fink [:sfink] [:s:]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-01 17:06 PDT" data-time="1541117172">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="13729968">Filed <a class="bz_bug_link
          bz_status_NEW"
   title="NEW"
   href="/show_bug.cgi?id=1504075">bug 1504075</a> for treating const Value&amp; as a GC pointer.</pre></div><div class="change-set" id="c8"><div class="comment" data-id="13741987" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a823086_359004"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-07 07:41 PST" data-time="1541605309">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="13741987">It seems, we can just replace:

if (!JS_GetElement(aCx, obj, index, &amp;val)) {
  IDB_REPORT_INTERNAL_ERR();
  return NS_ERROR_DOM_INDEXEDDB_UNKNOWN_ERR;
}

with:

JS::RootedId id(aCx);
if (!JS_IndexToId(aCx, index, &amp;id)) {
  IDB_REPORT_INTERNAL_ERR();
  return NS_ERROR_DOM_INDEXEDDB_UNKNOWN_ERR;
}

JS::Rooted&lt;JS::PropertyDescriptor&gt; desc(aCx);
if (!JS_GetOwnPropertyDescriptorById(aCx, obj, id, &amp;desc)) {
  IDB_REPORT_INTERNAL_ERR();
  return NS_ERROR_DOM_INDEXEDDB_UNKNOWN_ERR;
}

if (!desc.object()) {
  return NS_ERROR_DOM_INDEXEDDB_DATA_ERR;
}

I'll submit a patch once I finish testing.</pre></div><div class="change-set" id="c9"><div class="comment" data-id="13744669" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a823086_359004"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-08 07:53 PST" data-time="1541692388">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="13744669">I have a patch and all tests pass except key-conversion-exceptions.htm, trying to fix that.</pre></div><div class="change-set" id="c10"><div class="comment" data-id="13747028" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a823086_359004"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-09 06:39 PST" data-time="1541774358">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="13747028">testing on try:
<a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=c29d5448a8a63b464e04680b0be7894cf59bc753">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=c29d5448a8a63b464e04680b0be7894cf59bc753</a></pre></div><div class="change-set" id="c11"><div class="comment" data-id="13747229" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a823086_359004"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-09 07:47 PST" data-time="1541778453">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9023990"
         class="attachment patch"
         data-id="9023990" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug-1501152-pre">
      <meta itemprop="contentSize" content="2310">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9023990">
          <a class="link" href="attachment.cgi?id=9023990&amp;action=diff">
        <span id="att-9023990-description" itemprop="description">patch for spidermonkey</span></a>
        — <a href="attachment.cgi?id=9023990&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9023990">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-11" data-comment-id="13747229">Maybe there's a better way (more efficient), but this works good enough.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9023990&amp;action=edit"
           title="patch for spidermonkey"
           class=""
        >Attachment #9023990</a> -
        Flags: review?(jwalden+bmo)</div></div></div><div class="change-set" id="c12"><div class="comment" data-id="13747239" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a823086_359004"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-09 07:54 PST" data-time="1541778871">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9023991"
         class="attachment patch"
         data-id="9023991" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug-1501152">
      <meta itemprop="contentSize" content="18365">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9023991">
          <a class="link" href="attachment.cgi?id=9023991&amp;action=diff">
        <span id="att-9023991-description" itemprop="description">patch for indexeddb</span></a>
        — <a href="attachment.cgi?id=9023991&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9023991">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-12" data-comment-id="13747239">Andrew, I checked if JS_GetArrayLength() and I believe it's safe. This JS code:
arr1.__proto__.__defineGetter__(&quot;length&quot;, function() {
  objectStore.deleteIndex(&quot;index_name&quot;);
  return &quot;ID_002&quot;;
});

doesn't work, because the &quot;length&quot; property is not configurable.

However, the patch is a bit more complicated because of testing/web-platform/tests/IndexedDB/key-conversion-exceptions.htm
I had to add the aCallGetters argument all over to make this test pass.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9023991&amp;action=edit"
           title="patch for indexeddb"
           class=""
        >Attachment #9023991</a> -
        Flags: review?(bugmail)</div></div></div><div class="change-set" id="c13"><div class="comment" data-id="13747346" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a823086_359004"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-09 08:38 PST" data-time="1541781523">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="13747346">Comment on <span class=""><a href="/attachment.cgi?id=9023991" name="attach_9023991" title="patch for indexeddb">attachment 9023991</a> <a href="/attachment.cgi?id=9023991&amp;action=edit" title="patch for indexeddb">[details]</a> <a href="/attachment.cgi?id=9023991&amp;action=diff" title="patch for indexeddb">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023991'>[review]</a>
patch for indexeddb

Review of <span class=""><a href="/attachment.cgi?id=9023991" name="attach_9023991" title="patch for indexeddb">attachment 9023991</a> <a href="/attachment.cgi?id=9023991&amp;action=edit" title="patch for indexeddb">[details]</a> <a href="/attachment.cgi?id=9023991&amp;action=diff" title="patch for indexeddb">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023991'>[review]</a>:
-----------------------------------------------------------------

Looks great!  (And I'm glad you put the helper method in JS space so it can be used by all!)

Restating:
- The semantics for IDB and getters is that we want to evaluate a getter at most once when there's a getter involved *per argument*.  The spec is aware of the impact of this and so has specified that the structured clone algorithm be invoked in the cases where multiple traversals that could trigger.  For efficiency reasons, we somewhat complicate this so that add()/put()/update() do not need to perform a wasteful clone when out-of-line keys are used.
- Accordingly, the basic invariants we are trying to maintain are:
  - We never call getters when we're building the key from an already-evaluated value.  We require that the arrays are raw, actual arrays/whatever, not crazy getter things.
  - We do not call getters on a cloned value, AKA: (aCallGetters == !valueWrapper.mCloned)
  - We make at most one of the following invocations per value from content (which may mean multiples calls for multiple values in the case of IDBKeyRange, and both the value and the out-of-line key when out-of-line keys are in use): blah(...aCallGetters==true), valueWrapper.Clone().
- GetAddInfo is the interesting case because the state of ValueWrapper.mCloned can vary, and in the case where mCloned is not expected to be true at entry because we currently allow createIndex/deleteIndex to be invoked by re-entrant code and the evaluation of the out-of-line key and the value BOTH can trigger getters, whether mCloned will be invoked can change!

::: dom/indexedDB/IDBCursor.cpp
&#64;&#64; +727,5 &#64;&#64;
<span class="quote">&gt;  
&gt; +    aRv = keyPath.ExtractKey(aCx,
&gt; +                             valueWrapper.Value(),
&gt; +                             key,
&gt; +                             /* aCallGetters */ false);</span >

(This is right because this is the payload value and we cloned it above so we don't call getters because they've already been called.)

::: dom/indexedDB/IDBObjectStore.cpp
&#64;&#64; +1554,5 &#64;&#64;
<span class="quote">&gt;    nsresult rv;
&gt;  
&gt;    if (!HasValidKeyPath()) {
&gt;      // Out-of-line keys must be passed in.
&gt; +    rv = aKey.SetFromJSVal(aCx, aKeyVal, /* aCallGetters */ true);</span >

(This is right because the out-of-line key should be evaluated with getters invoked because the out-of-line key is logically distinct from the payload value.)

&#64;&#64; +1566,5 &#64;&#64;
<span class="quote">&gt;  
&gt; +    rv = GetKeyPath().ExtractKey(aCx,
&gt; +                                 aValueWrapper.Value(),
&gt; +                                 aKey,
&gt; +                                 /* aCallGetters */ false);</span >

(This is right because this is the payload value and we just ensured we cloned it.)

&#64;&#64; +1622,5 &#64;&#64;
<span class="quote">&gt;                                           aValueWrapper.Value(),
&gt;                                           aKey,
&gt;                                           &amp;GetAddInfoCallback,
&gt; +                                         &amp;data,
&gt; +                                         /* aCallGetters */ false);</span >

(This is right because this is the payload value and we just ensured we cloned it.)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9023991&amp;action=edit"
           title="patch for indexeddb"
           class=""
        >Attachment #9023991</a> -
        Flags: review?(bugmail) &rarr; review+</div></div></div><div class="change-set" id="c14"><div class="comment" data-id="13763927" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a823086_359004"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a823086_359004"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-18 21:14 PST" data-time="1542604486">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="13763927">Waldo, can you take a look at the spidermonkey patch ?</pre><div class="activity"><div class="change">Flags: needinfo?(jwalden+bmo)</div></div></div><div class="change-set" id="a2473346_8340"><div class="change" id="aa2473346_8340">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_8340" id="a2473346_8340"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2473346_8340"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2473346_8340">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a2473346_8340">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 10:57 PST" data-time="1542740270">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jwalden+bmo)</span></div></div></div><div class="change-set" id="c15"><div class="comment" data-id="13769429" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a2473346_8340"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 10:58 PST" data-time="1542740280">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="13769429">Comment on <span class=""><a href="/attachment.cgi?id=9023990" name="attach_9023990" title="patch for spidermonkey">attachment 9023990</a> <a href="/attachment.cgi?id=9023990&amp;action=edit" title="patch for spidermonkey">[details]</a> <a href="/attachment.cgi?id=9023990&amp;action=diff" title="patch for spidermonkey">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023990'>[review]</a>
patch for spidermonkey

I was told Waldo is super busy.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9023990&amp;action=edit"
           title="patch for spidermonkey"
           class=""
        >Attachment #9023990</a> -
        Flags: review?(jwalden+bmo) &rarr; review?(jorendorff)</div></div></div><div class="change-set" id="c16"><div class="comment" data-id="13769775" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_281791" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/5a83f46f9f97d184457cb2dedfa19173?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_281791" id="a2473346_8340"><a class="email disabled" href="/user_profile?user_id=281791" > <span class="fna">Jason Orendorff [:jorendorff]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 13:34 PST" data-time="1542749679">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="13769775">Comment on <span class=""><a href="/attachment.cgi?id=9023990" name="attach_9023990" title="patch for spidermonkey">attachment 9023990</a> <a href="/attachment.cgi?id=9023990&amp;action=edit" title="patch for spidermonkey">[details]</a> <a href="/attachment.cgi?id=9023990&amp;action=diff" title="patch for spidermonkey">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023990'>[review]</a>
patch for spidermonkey

Review of <span class=""><a href="/attachment.cgi?id=9023990" name="attach_9023990" title="patch for spidermonkey">attachment 9023990</a> <a href="/attachment.cgi?id=9023990&amp;action=edit" title="patch for spidermonkey">[details]</a> <a href="/attachment.cgi?id=9023990&amp;action=diff" title="patch for spidermonkey">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023990'>[review]</a>:
-----------------------------------------------------------------

This patch looks fine, as far as the code goes. But (being unfamiliar with IndexedDB) the API looks a bit like a wrong thing to want.

I'm out of the office Wednesday through Friday, so I'm forwarding this review to tcampbell; or maybe sfink will chime in.

::: js/src/jsapi.cpp
&#64;&#64; +2107,5 &#64;&#64;
<span class="quote">&gt; +        return false;
&gt; +    }
&gt; +
&gt; +    if (desc.object()) {
&gt; +        vp.set(desc.value());</span >

Style nit: Please write

    if (desc.object() &amp;&amp; desc.isDataDescriptor()) {

instead of 

    if (desc.object()) {</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9023990&amp;action=edit"
           title="patch for spidermonkey"
           class=""
        >Attachment #9023990</a> -
        Flags: review?(jorendorff) &rarr; review?(tcampbell)</div></div></div><div class="change-set" id="c17"><div class="comment" data-id="13770064" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_586681" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/1e2fa288b943b923daa29c9365f07e40?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_586681" id="a2473346_8340"><a class="email " href="/user_profile?user_id=586681" > <span class="fna">Ted Campbell [:tcampbell]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 15:57 PST" data-time="1542758238">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="13770064">Comment on <span class=""><a href="/attachment.cgi?id=9023990" name="attach_9023990" title="patch for spidermonkey">attachment 9023990</a> <a href="/attachment.cgi?id=9023990&amp;action=edit" title="patch for spidermonkey">[details]</a> <a href="/attachment.cgi?id=9023990&amp;action=diff" title="patch for spidermonkey">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023990'>[review]</a>
patch for spidermonkey

Review of <span class=""><a href="/attachment.cgi?id=9023990" name="attach_9023990" title="patch for spidermonkey">attachment 9023990</a> <a href="/attachment.cgi?id=9023990&amp;action=edit" title="patch for spidermonkey">[details]</a> <a href="/attachment.cgi?id=9023990&amp;action=diff" title="patch for spidermonkey">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023990'>[review]</a>:
-----------------------------------------------------------------

Unfortunately |GetOwnElement| is not a general purpose API. Depending on context one should prefer JS_GetElement/JS_GetProperty family or the GetOwnPropertyDescriptor family of APIs and avoid any sort of hybrid. I think for your case here you should continue to directly call GetOwnPropertyDescriptor and be explicit. Note that GetOwnPropertyDescriptor may still invoke arbitrary code if the object is a property.

If you explicitly check JS_IsArrayObject before calling GetOwnPropertyDescriptor* then you should be in safe territory. We can arrange a chat is at all-hands with some JS people to give some guidance on how IndexedDB code should in general interact with SpiderMonkey.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9023990&amp;action=edit"
           title="patch for spidermonkey"
           class=""
        >Attachment #9023990</a> -
        Flags: review?(tcampbell) &rarr; review-</div></div></div><div class="change-set" id="c18"><div class="comment" data-id="13770080" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_586681" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/1e2fa288b943b923daa29c9365f07e40?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_586681" id="a2473346_8340"><a class="email " href="/user_profile?user_id=586681" > <span class="fna">Ted Campbell [:tcampbell]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 16:04 PST" data-time="1542758646">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="13770080">Comment on <span class=""><a href="/attachment.cgi?id=9023991" name="attach_9023991" title="patch for indexeddb">attachment 9023991</a> <a href="/attachment.cgi?id=9023991&amp;action=edit" title="patch for indexeddb">[details]</a> <a href="/attachment.cgi?id=9023991&amp;action=diff" title="patch for indexeddb">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023991'>[review]</a>
patch for indexeddb

Review of <span class=""><a href="/attachment.cgi?id=9023991" name="attach_9023991" title="patch for indexeddb">attachment 9023991</a> <a href="/attachment.cgi?id=9023991&amp;action=edit" title="patch for indexeddb">[details]</a> <a href="/attachment.cgi?id=9023991&amp;action=diff" title="patch for indexeddb">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9023991'>[review]</a>:
-----------------------------------------------------------------

::: dom/indexedDB/IDBObjectStore.cpp
&#64;&#64; +1075,5 &#64;&#64;
<span class="quote">&gt;      }
&gt;  
&gt;      for (uint32_t arrayIndex = 0; arrayIndex &lt; arrayLength; arrayIndex++) {
&gt;        JS::Rooted&lt;JS::Value&gt; arrayItem(aCx);
&gt; +      if (NS_WARN_IF(!JS_GetOwnElement(aCx, array, arrayIndex, &amp;arrayItem))) {</span >

Instead, you probably want a helper function that asserts array is JS_IsArrayObject, then use JS_GetOwnPropertyDescriptorById. The helper should probably have a comment explaining why undefined is a the appropriate result to use for a non-data PropertyDescriptor.

::: dom/indexedDB/Key.cpp
&#64;&#64; +265,5 &#64;&#64;
<span class="quote">&gt;  
&gt;        for (uint32_t index = 0; index &lt; length; index++) {
&gt;          JS::Rooted&lt;JS::Value&gt; val(aCx);
&gt; +        bool ok = aCallGetters ? JS_GetElement(aCx, obj, index, &amp;val)
&gt; +                               : JS_GetOwnElement(aCx, obj, index, &amp;val);</span >

I wonder if |aCanCallGetters| is a better description of what this represents.</pre></div><div class="change-set" id="c19"><div class="comment" data-id="13770109" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_586681" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/1e2fa288b943b923daa29c9365f07e40?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_586681" id="a2473346_8340"><a class="email " href="/user_profile?user_id=586681" > <span class="fna">Ted Campbell [:tcampbell]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 16:17 PST" data-time="1542759451">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="13770109">One part that isn't clear to me when I look at this code versus the spec is..

<a rel="nofollow" href="https://www.w3.org/TR/IndexedDB/#convert-a-value-to-a-key">https://www.w3.org/TR/IndexedDB/#convert-a-value-to-a-key</a> -&gt; IsArray -&gt; Step 5.1

The property must be checked by HasOwnProperty or return invalid so the prototype chain should never be involved.</pre></div><div class="change-set" id="c20"><div class="comment" data-id="13770308" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a2473346_8340"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-20 19:30 PST" data-time="1542771014">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="13770308">(In reply to Ted Campbell [:tcampbell] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey"
   href="/show_bug.cgi?id=1501152#c19">comment #19</a>)
<span class="quote">&gt; One part that isn't clear to me when I look at this code versus the spec is..
&gt; 
&gt; <a rel="nofollow" href="https://www.w3.org/TR/IndexedDB/#convert-a-value-to-a-key">https://www.w3.org/TR/IndexedDB/#convert-a-value-to-a-key</a> -&gt; IsArray -&gt; Step
&gt; 5.1
&gt; 
&gt; The property must be checked by HasOwnProperty or return invalid so the
&gt; prototype chain should never be involved.</span >

You mean that there shouldn't be aCanCallGetters and just always avoid searching the prototype chain ?
Well, there is a wpt test - testing/web-platform/tests/IndexedDB/key-conversion-exceptions.htm and that proofs that sometimes we need to search the prototype chain.
You may want to look at <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey"
   href="/show_bug.cgi?id=1501152#c12">comment 12</a> and <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey"
   href="/show_bug.cgi?id=1501152#c13">comment 13</a>.
I don't know maybe the spec should be updated or the test fixed, but the patch should be safe because we don't allow calling getters for values logically distinct from the payload value.</pre></div><div class="change-set" id="c21"><div class="comment" data-id="13771552" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a2473346_8340"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-21 09:14 PST" data-time="1542820494">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="13771552">Thanks for the eagle eyes on the spec, Ted!  I absolutely missed that, as was probably clear from my explicitly stating in vidyo that I thought we needed to have the same side-effect semantics as structured clone for key evaluation of out-of-line keys.

(In reply to Jan Varga [:janv] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey"
   href="/show_bug.cgi?id=1501152#c20">comment #20</a>)
<span class="quote">&gt; Well, there is a wpt test -
&gt; testing/web-platform/tests/IndexedDB/key-conversion-exceptions.htm and that
&gt; proofs that sometimes we need to search the prototype chain.</span >

I think the test is wrong.  &quot;Convert a value to a key&quot; is very explicit.  That getter should never be invoked.  DataCloneError should be thrown.  I suggest we change the WPT test to be correct, citing the spec.</pre></div><div class="change-set" id="c22"><div class="comment" data-id="13771880" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a2473346_8340"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-21 11:54 PST" data-time="1542830058">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="13771880">(In reply to Andrew Sutherland [:asuth] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey"
   href="/show_bug.cgi?id=1501152#c21">comment #21</a>)
<span class="quote">&gt; I think the test is wrong.  &quot;Convert a value to a key&quot; is very explicit. 
&gt; That getter should never be invoked.  DataCloneError should be thrown.  I
&gt; suggest we change the WPT test to be correct, citing the spec.</span >

Note, I was wrong here.  After talking with Ted it turns out I missed that the test is defining a property on the test object, not the Object prototype.  So HasOwnProperty will pass, and the getter will be invoked and explode with its custom exception.  So the test is legit.  And then there are some other nuances that Ted is writing up for our benefit that we'll receive via email soon!  I just wanted to update the bug before this falls out of my brain, or in case other people reading the bug get misled.</pre></div><div class="change-set" id="c23"><div class="comment" data-id="13772028" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_586681" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/1e2fa288b943b923daa29c9365f07e40?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_586681" id="a2473346_8340"><a class="email " href="/user_profile?user_id=586681" > <span class="fna">Ted Campbell [:tcampbell]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-21 13:20 PST" data-time="1542835245">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="13772028">Jan, I'm organizing a few notes to try and motivate some of the subtlety here. For this bug, I think having leaving jsapi.h alone is best. We should use JS_GetOwnPropertyDescriptorById in the code for the |aCanCallGetters| case, but please include |MOZ_ASSERT(JS_IsArrayObject(...))| check for documentation.

The JS teams experience with algorithms like <a rel="nofollow" href="https://www.w3.org/TR/IndexedDB/#convert-a-value-to-a-key">https://www.w3.org/TR/IndexedDB/#convert-a-value-to-a-key</a> is to go step by step tracking the spec as comments, and if there are optimizations to justify why they are valid. See <a rel="nofollow" href="https://searchfox.org/mozilla-central/rev/55895c49f55073d82d977cb74ec1d3a71ae4b25f/js/src/builtin/Stream.cpp#753">https://searchfox.org/mozilla-central/rev/55895c49f55073d82d977cb74ec1d3a71ae4b25f/js/src/builtin/Stream.cpp#753</a> for an example of the detailed steps.

For this bug, I think we can focus on the sec issue by preventing the getter from being called in the specific case. I can help review a helper method (put in indexeddb) that uses JS_GetOwnPropertyDescriptorById to avoid calling getters and combines the HasOwnProperty and Get steps from the spec.</pre></div><div class="change-set" id="c24"><div class="comment" data-id="13772216" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_586681" id="a2473346_8340"><img src="https://secure.gravatar.com/avatar/1e2fa288b943b923daa29c9365f07e40?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_586681" id="a2473346_8340"><a class="email " href="/user_profile?user_id=586681" > <span class="fna">Ted Campbell [:tcampbell]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-11-21 14:19 PST" data-time="1542838757">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="13772216">Something vaguely like so we can be explicit about not handling getters and about why HasOwnProperty itself isn't triggering code.

<span class="quote">&gt; MOZ_ASSERT(JS_IsArrayObject(input));
&gt; 
&gt; // 1. Let hop = ? HasOwnProperty(input, index)
&gt; // NOTE: Array uses OrdinaryGetOwnProperty so we can get the descriptor
&gt; // directly.
&gt; Rooted&lt;PropertyDescriptor&gt; desc(cx);
&gt; Rooted&lt;jsid&gt; id(cx, INT_TO_JSID(index));
&gt; JS_GetPropertyDescriptorById(cx, input, id, &amp;desc);
&gt; 
&gt; // 2. If hop is false, return invalid.
&gt; if (!desc.object()) {
&gt;   return invalid;
&gt; }
&gt; 
&gt; // 3. Let entry be ? Get(input, index)
&gt; if (!desc.isDataDescriptor()) {
&gt;     // Has a getter
&gt;     ???
&gt;     // Note, if you wanted to evaluate the getter, you'd call
&gt;     // JS_GetElement. This won't have any issues with the
&gt;     // JS_GetPropertyDescriptById call above.
&gt; }
&gt; 
&gt; // The array element
&gt; Rooted&lt;Value&gt; elem(cx, desc.value());</span ></pre></div><div class="change-set" id="a7471314_442218"><div class="change" id="aa7471314_442218">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_442218" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/c949006731dfdca9783f621522f42ca6?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_442218" id="a7471314_442218"><a class="email " href="/user_profile?user_id=442218" > <span class="fna">Andrew Overholt [:overholt]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7471314_442218"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7471314_442218">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a7471314_442218">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-01-17 07:17 PST" data-time="1547738238">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Priority: -- &rarr; P2</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="13903307" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_406194" id="a7471314_442218"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-02-04 11:02 PST" data-time="1549306977">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-25" data-comment-id="13903307" data-ismarkdown="true" ><p>Any change you can look at this again, Jan? Thanks.</p>
</div><div class="activity"><div class="change">Flags: needinfo?(jvarga)</div></div></div><div class="change-set" id="c26"><div class="comment" data-id="13991353" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_615701" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/3c10788660c0b5ff64ab9183c51c1882?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_615701" id="a7471314_442218"><a class="email " href="/user_profile?user_id=615701" > <span class="fna">zhanjiasong45</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-17 20:14 PDT" data-time="1552878868">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-26" data-comment-id="13991353" data-ismarkdown="true" ><p>Is this bug fixed? I wonder when can I disclose it.</p>
</div></div><div class="change-set" id="c27"><div class="comment" data-id="13993741" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_428608" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/1f41f3ef916e1c1fc9401cf3212a6708?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_428608" id="a7471314_442218"><a class="email " href="/user_profile?user_id=428608" > <span class="fna">Frederik Braun [:freddy] - vacation (back Nov 1st)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-18 08:38 PDT" data-time="1552923523">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-27" data-comment-id="13993741" data-ismarkdown="true" ><p>We&#39;d appreciate if you hold off disclosure until the bug is fixed, as I just learned that a fix for this is imminent.<br>
Thank you for reporting the bug and for your patience so far.</p>
</div></div><div class="change-set" id="c28"><div class="comment" data-id="13996857" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a7471314_442218"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-19 11:45 PDT" data-time="1553021137">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-28" data-comment-id="13996857" data-ismarkdown="true" ><p>I&#39;ll take this over.</p>
<p>First thing, I&#39;ll try to refactor the code to be more similar to the spec&#39;s control flow and add corresponding excerpts (probably under a different bug number, since it shouldn&#39;t look too suspicious). Then I&#39;ll fix the wrong JS object accesses here, and finally, see if there&#39;s a way to avoid creating a cloned JS object while still maintaining the correctness of the whole thing. I suspect that by weaving key path traversal into the serialization code this would be possible, but let&#39;s only do that once correctness and safety are established.</p>
</div><div class="activity"><div class="change">Assignee: jvarga &rarr; ytausky</div><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c29"><div class="comment" data-id="13996968" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a7471314_442218"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-19 12:27 PDT" data-time="1553023643">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-29" data-comment-id="13996968" data-ismarkdown="true" ><p>FWIW, I did propose weaving key path traversal into the serialization, but it added a lot of complexity and potentially required performance-hindering alterations to the JS engine&#39;s structured clone logic.</p>
<p>(Specifically, if there was a mechanism for something to listen to the the serialization process, say using the visitor idiom, it could maintain an understanding of the current &quot;path&quot; and capture values at the right path points.  Where capturing values could entail listening to further nested traversal.  However, I believe I was erroneously assuming that the existing structured clone ops already provided the visibility we needed.  I believe reality is that the hooks are not called during normal plain object serialization, and so would need to be made more generic.  This was deemed undesirable for complexity reasons and because structured cloning is generally performance-sensitive.)</p>
</div></div><div class="change-set" id="c30"><div class="comment" data-id="13996982" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a7471314_442218"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-19 12:31 PDT" data-time="1553023864">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-30" data-comment-id="13996982" data-ismarkdown="true" ><p>Yeah, let&#39;s fix it first and then check the performance implications.</p>
</div></div><div class="change-set" id="c31"><div class="comment" data-id="13997811" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a7471314_442218"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a7471314_442218"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-03-19 20:15 PDT" data-time="1553051717">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-31" data-comment-id="13997811" data-ismarkdown="true" ><p>This security vulnerability affects ESR-60 as well.</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=isnotempty">status-firefox65</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox65&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=isnotempty">status-firefox66</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox66&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=isnotempty">status-firefox67</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=isnotempty">status-firefox68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=isnotempty">tracking-firefox67</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox68&amp;o1=isnotempty">tracking-firefox68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox68&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=67%2B">67+</a></div></div></div><div class="change-set" id="a14015557_8340"><div class="change" id="aa14015557_8340">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_8340" id="a14015557_8340"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a14015557_8340"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a14015557_8340">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a14015557_8340">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-04-03 02:08 PDT" data-time="1554282481">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jvarga)</span></div></div></div><div class="change-set" id="c32"><div class="comment" data-id="14032595" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a14015557_8340"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-04-04 01:37 PDT" data-time="1554367056">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-32" data-comment-id="14032595" data-ismarkdown="true" ><p>Small update: I&#39;m still working on this; making control flow as close as possible to the spec without touching the lower-level implementation details is a little tricky here.</p>
<p>We would probably need to consider more hooks into the structured clone algorithm, though. It seems to be used as a basic building block for optimization-ripe spec operations. There are ways to mitigate potential performance problems for non-specialized use cases (e.g. have versions with and without hooks instantiated from a template), so it would probably boil down to the trade-off between implementation complexity and some DOM components&#39; performance.</p>
</div></div><div class="change-set" id="c33"><div class="comment" data-id="14117606" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a14015557_8340"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-05-14 09:13 PDT" data-time="1557850389">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-33" data-comment-id="14117606" data-ismarkdown="true" ><p>This is going to miss the 67/60.7.0esr releases. If you think we may come up with a fix and it would drive a dot release, we can keep tracking for 67. Otherwise we should wontfix it and move the flags to 68.</p>
</div><div class="activity"><div class="change">Flags: needinfo?(ytausky)</div><div class="change">Flags: needinfo?(dveditz)</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="14119582" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a14015557_8340"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-05-15 07:06 PDT" data-time="1557929198">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-34" data-comment-id="14119582" data-ismarkdown="true" ><p>I&#39;m following tcampbell&#39;s recommendations concerning this bug, and they necessitate a bigger-ish refactoring of the surrounding code, including iteration on the design of several classes. I&#39;m not sure it would make sense as a point release.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ytausky)</span></div></div></div><div class="change-set" id="c35"><div class="comment" data-id="14120159" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a14015557_8340"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-05-15 10:24 PDT" data-time="1557941098">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-35" data-comment-id="14120159" data-ismarkdown="true" ><p>That makes sense. Thanks!</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=isnotempty">status-firefox67</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox67&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=isnotempty">tracking-firefox67</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=equals&amp;v1=%2B">+</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox67&amp;o1=equals&amp;v1=-">-</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=67%2B">67+</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=68%2B">68+</a></div><div class="change">Flags: <span class="activity-deleted">needinfo?(dveditz)</span></div></div></div><div class="change-set" id="c36"><div class="comment" data-id="14204110" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a14015557_8340"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-06-28 06:02 PDT" data-time="1561726965">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-36" data-comment-id="14204110" data-ismarkdown="true" ><p>Too late now for 68.</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=isnotempty">status-firefox68</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox68&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=isnotempty">status-firefox69</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=isnotempty">status-firefox-esr68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox69&amp;o1=isnotempty">tracking-firefox69</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox69&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=68%2B">68+</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr68&amp;o1=isnotempty">tracking-firefox-esr68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr68&amp;o1=equals&amp;v1=%3F">?</a></div></div></div><div class="change-set" id="c37"><div class="comment" data-id="14229236" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434964" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/331afc283e18d6d28cb7ebb11b2cf5bb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434964" id="a14015557_8340"><a class="email " href="/user_profile?user_id=434964" > <span class="fna">Hsin-Yi Tsai [:hsinyi]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-11 07:29 PDT" data-time="1562855344">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-37" data-comment-id="14229236" data-ismarkdown="true" ><p>Tom is helping here while Yaron is on leave. Thanks, Tom!</p>
</div><div class="activity"><div class="change">Assignee: ytausky &rarr; shes050117</div></div></div><div class="change-set" id="c38"><div class="comment" data-id="14242572" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_552411" id="a14015557_8340"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-17 09:27 PDT" data-time="1563380832">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9078768"
         class="attachment obsolete"
         data-id="9078768" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D38366-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9078768" itemprop="contentUrl">
        <span id="att-9078768-description" itemprop="description">Bug 1501152 - Have a function to get elements from JS array;</span></a> (obsolete)
        — <a href="attachment.cgi?id=9078768&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div></div><div class="change-set" id="c39"><div class="comment" data-id="14242941" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a14015557_8340"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-17 12:00 PDT" data-time="1563390050">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-39" data-comment-id="14242941" data-ismarkdown="true" ><p>To clarify, I was under the impression that Yaron&#39;s work on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> was basically ready to land, modulo the one line: &quot;Blockers: The missing SupressExceptions and calling aRv.Throw without checking it isn&#39;t already having an Exception.&quot; in <a href="https://phabricator.services.mozilla.com/D28976#1020675" rel="nofollow">https://phabricator.services.mozilla.com/D28976#1020675</a> with the rest able to be follow-ups.  Is there a reason not to land that?</p>
<p>(I realize there may have been some confusion since we didn&#39;t explicitly establish a &quot;see also&quot; relationship between <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> and this one because it would make it clear that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> is a security fix pretending to be a cleanup.)</p>
</div><div class="activity"><div class="change">Flags: needinfo?(shes050117)</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="14244032" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a14015557_8340"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_552411" id="a14015557_8340"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-18 00:35 PDT" data-time="1563435327">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-40" data-comment-id="14244032" data-ismarkdown="true" ><p>(In reply to Andrew Sutherland [:asuth] (he/him) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed" href="/show_bug.cgi?id=1501152#c39" title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey">comment #39</a>)</p>
<blockquote>
<p>To clarify, I was under the impression that Yaron&#39;s work on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> was basically ready to land, modulo the one line: &quot;Blockers: The missing SupressExceptions and calling aRv.Throw without checking it isn&#39;t already having an Exception.&quot; in <a href="https://phabricator.services.mozilla.com/D28976#1020675" rel="nofollow">https://phabricator.services.mozilla.com/D28976#1020675</a> with the rest able to be follow-ups.  Is there a reason not to land that?</p>
<p>(I realize there may have been some confusion since we didn&#39;t explicitly establish a &quot;see also&quot; relationship between <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> and this one because it would make it clear that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> is a security fix pretending to be a cleanup.)</p>
</blockquote>
<p>Ah, I somehow couldn&#39;t connect these two tickets with each other. I&#39;ll rebase and try to address the patch in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a>.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(shes050117)</span></div></div></div><div class="change-set" id="a23169297_600971"><div class="change" id="aa23169297_600971">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_600971" id="a23169297_600971"><img src="https://secure.gravatar.com/avatar/a088418052679d9583556d277e6774ee?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_600971" id="a23169297_600971"><a class="email " href="/user_profile?user_id=600971" > <span class="fna">Phabricator Automation</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a23169297_600971"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a23169297_600971">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a23169297_600971">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-18 00:50 PDT" data-time="1563436221">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9078768&amp;action=edit"
           title="Bug 1501152 - Have a function to get elements from JS array;"
           class=""
        >Attachment #9078768</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="14269449" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a23169297_600971"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_552411" id="a23169297_600971"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-30 09:12 PDT" data-time="1564503146">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1501152&amp;comment_id=14269449"
     title="1 revision">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-41" data-comment-id="14269449" data-ismarkdown="true" ><p>Hi Daniel,</p>
<p>The fix for this issue has been landed by pretending itself to be a cleanup in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a>. Since this is not the general procedure for security issue (at least I couldn&#39;t find a document for this), I have a few questions for the status of this bug. Would you mind giving me some feedback? Thanks!</p>
<p>My questions here are:</p>
<ul>
<li>Can we close this bug now? And would it be safe if we set any dependency between this and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> now? (e.g. duplicate or see also)</li>
<li>Should we uplift the patches in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> to Beta since this is a sec-high issue from your perspective? (I wouldn&#39;t recommend doing that since the patches also refactor surrounding code)</li>
</ul>
</div><div class="activity"><div class="change">Flags: needinfo?(dveditz)</div></div></div><div class="change-set" id="c42"><div class="comment" data-id="14270650" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a23169297_600971"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a23169297_600971"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-30 16:08 PDT" data-time="1564528092">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-42" data-comment-id="14270650" data-ismarkdown="true" ><p>One problem with with hiding security fixes in unrelated bugs is that it completely bypasses the <a href="https://wiki.mozilla.org/Security/Bug_Approval_Process" rel="nofollow">sec-approval process</a> which would have answered some of those questions, as well as explored potential solutions to problems such as &quot;if we can&#39;t uplift this to Beta, how the heck are we going to secure ESR-68 for the next year it&#39;s supported?&quot; This process is linked to in the warning text &quot;sec-approval required on patches before landing&quot; in the attachments area of this bug.</p>
<blockquote>
<p>Can we close this bug now? And would it be safe if we set any dependency between this and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> now? (e.g. duplicate or see also)</p>
</blockquote>
<p>We need to mark this bug FIXED so it triggers the proper advisory and bug bounty treatment. Linking them now is OK.</p>
<p>So now what? If we wait until Firefox 70 ships that&#39;s late October which is pretty long for a sec-high fix to sit in the tree. We&#39;ve done that before but this patch looks fairly straightforward, if large, so maybe it&#39;s safe to backport? We definitely need to backport to ESR-68 branch anyway.</p>
<p>We&#39;re also still supporting ESR-60. How complex would it be to backport to that? I can&#39;t imagine IndexedDB has changed much.</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=isnotempty">status-firefox70</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox70&amp;o1=isnotempty">tracking-firefox70</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox70&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr68&amp;o1=isnotempty">tracking-firefox-esr68</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr68&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr68&amp;o1=equals&amp;v1=69%2B">69+</a></div><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Refactor IndexedDB's add() and put() operations to make correspondence to spec clearer"
   href="/show_bug.cgi?id=1544750">1544750</a></div><div class="change">Flags: needinfo?(dveditz) &rarr; needinfo?(shes050117)</div><div class="change">Whiteboard: [reporter-external] [client-bounty-form] [verif?] &rarr; [reporter-external] [client-bounty-form][fixed in bug 1544750]</div></div></div><div class="change-set" id="c43"><div class="comment" data-id="14270694" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_586681" id="a23169297_600971"><img src="https://secure.gravatar.com/avatar/1e2fa288b943b923daa29c9365f07e40?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_586681" id="a23169297_600971"><a class="email " href="/user_profile?user_id=586681" > <span class="fna">Ted Campbell [:tcampbell]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-30 16:49 PDT" data-time="1564530557">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-43" data-comment-id="14270694" data-ismarkdown="true" ><p>Tom, are we sure that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> covered all the cases for this bug? For example, [1] still can run arbitrary JS which is what the spec allows. This fixes the prototype stuff (and we now better follow spec), but is the re-entrancy issue addressed in other ways?</p>
<p>[1] <a href="https://hg.mozilla.org/integration/autoland/rev/b14b8efda186#l8.169" rel="nofollow">https://hg.mozilla.org/integration/autoland/rev/b14b8efda186#l8.169</a></p>
</div></div><div class="change-set" id="c44"><div class="comment" data-id="14271048" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a23169297_600971"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_552411" id="a23169297_600971"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-31 00:31 PDT" data-time="1564558270">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-44" data-comment-id="14271048" data-ismarkdown="true" ><p>(In reply to Daniel Veditz [:dveditz] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed" href="/show_bug.cgi?id=1501152#c42" title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey">comment #42</a>)</p>
<blockquote>
<p>One problem with with hiding security fixes in unrelated bugs is that it completely bypasses the <a href="https://wiki.mozilla.org/Security/Bug_Approval_Process" rel="nofollow">sec-approval process</a> which would have answered some of those questions, as well as explored potential solutions to problems such as &quot;if we can&#39;t uplift this to Beta, how the heck are we going to secure ESR-68 for the next year it&#39;s supported?&quot; This process is linked to in the warning text &quot;sec-approval required on patches before landing&quot; in the attachments area of this bug.</p>
</blockquote>
<p>I see. Thanks for the explanation! I will try to ask the sec-approval in the security bug for the patches in the unrelated bugs if I have similar condition next time. So that, we can also cover this problem.</p>
<blockquote>
<p>So now what? If we wait until Firefox 70 ships that&#39;s late October which is pretty long for a sec-high fix to sit in the tree. We&#39;ve done that before but this patch looks fairly straightforward, if large, so maybe it&#39;s safe to backport? We definitely need to backport to ESR-68 branch anyway.</p>
</blockquote>
<p>It makes sense to backport it to ESR-68, but it&#39;s better to observe the status for the patch on the Nightly for a while (a week). If the patch is stable (there is no new issues related to that for a week), then I will check and try to uplift the patch to ESR-68.</p>
<blockquote>
<p>We&#39;re also still supporting ESR-60. How complex would it be to backport to that? I can&#39;t imagine IndexedDB has changed much.</p>
</blockquote>
<p>I rebased both part1 and part2 on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a>. There are some conflicts on dom/indexedDB/ActorsParent.cpp and dom/indexedDB/Key.cpp. I&#39;ll take a closer look (checking the changes on IDBKey after ESR60 til now since patches on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> refactor the code there) next week when I rebase the patches to ESR68.<br>
Also, we still need to check the performance impact after applying the patches on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a>.</p>
<p>Keep the ni flag to remind me of checking the complexity of backporting to 60 next week.</p>
</div></div><div class="change-set" id="c45"><div class="comment" data-id="14271052" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a23169297_600971"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_552411" id="a23169297_600971"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-31 00:37 PDT" data-time="1564558627">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-45" data-comment-id="14271052" data-ismarkdown="true" ><p>(In reply to Ted Campbell [:tcampbell] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed" href="/show_bug.cgi?id=1501152#c43" title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey">comment #43</a>)</p>
<blockquote>
<p>Tom, are we sure that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> covered all the cases for this bug? For example, [1] still can run arbitrary JS which is what the spec allows. This fixes the prototype stuff (and we now better follow spec), but is the re-entrancy issue addressed in other ways?</p>
<p>[1] <a href="https://hg.mozilla.org/integration/autoland/rev/b14b8efda186#l8.169" rel="nofollow">https://hg.mozilla.org/integration/autoland/rev/b14b8efda186#l8.169</a></p>
</blockquote>
<p>Ah, sorry for the confusion. I was thinking this bug is mainly for the prototype stuff and the rest of the works should be taken care of in other bugs. And I was wrong. I&#39;ll ensure that we have taken all the cases before closing this security bug. Thanks for the notice!</p>
</div></div><div class="change-set" id="a24363596_75935"><div class="change" id="aa24363596_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a24363596_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a24363596_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a24363596_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a24363596_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a24363596_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-07-31 20:35 PDT" data-time="1564630520">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2019-07-31 20:35 PDT" data-time="1564630520">2 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="a24377801_552411"><div class="change" id="aa24377801_552411">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a24377801_552411"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_552411" id="a24377801_552411"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a24377801_552411"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a24377801_552411">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a24377801_552411">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-01 00:32 PDT" data-time="1564644725">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">See Also:  &rarr; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WORKSFORME"
   href="/show_bug.cgi?id=1570585">1570585</a></div></div></div><div class="change-set" id="a24413342_75935"><div class="change" id="aa24413342_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a24413342_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a24413342_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a24413342_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a24413342_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a24413342_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-01 10:24 PDT" data-time="1564680266">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: RESOLVED &rarr; REOPENED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=isnotempty">status-firefox70</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">Resolution: FIXED &rarr; ---</div></div></div><div class="change-set" id="a24413355_75935"><div class="change" id="aa24413355_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a24413355_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a24413355_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a24413355_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a24413355_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-01 10:24 PDT" data-time="1564680279">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: REOPENED &rarr; ASSIGNED</div></div></div><div class="change-set" id="c46"><div class="comment" data-id="14297020" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-13 06:28 PDT" data-time="1565702889">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-46" data-comment-id="14297020" data-ismarkdown="true" ><p>In the strictest sense, the re-entrancy issue is already addressed by cloning the value, which strips getters. By avoiding the prototype chain, I believe the security hole is plugged. The PoC posted on this issue doesn&#39;t produce an ASan message for me any more.</p>
</div><div class="activity"><div class="change">Assignee: shes050117 &rarr; ytausky</div></div></div><div class="change-set" id="c47"><div class="comment" data-id="14297036" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a24413355_75935"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-13 06:34 PDT" data-time="1565703296">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-47" data-comment-id="14297036" data-ismarkdown="true" ><p>I think there are still some theoretical edge cases in spidermonkey, I don&#39;t remember exactly, maybe when some wrappers or proxies are involved, so long term it would be safer to fix <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1570585" title="RESOLVED WORKSFORME">bug 1570585</a>.</p>
</div></div><div class="change-set" id="c48"><div class="comment" data-id="14297432" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_552411" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/08b5f16b66786915fef5524c528fdb49?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_552411" id="a24413355_75935"><a class="email " href="/user_profile?user_id=552411" > <span class="fna">Tom Tung [:tt, :ttung]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-13 09:06 PDT" data-time="1565712383">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1501152&amp;comment_id=14297432"
     title="3 revisions">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-48" data-comment-id="14297432" data-ismarkdown="true" ><p>Quick update: the plan for uplift is that if I/Yaron can implement a quick &amp; simple fix for <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1570585" title="RESOLVED WORKSFORME">bug 1570585</a> (I have a naive plan for fixing that in mind, but it need to be verified), then maybe it&#39;s better to uplift the patch there to Beta or ESR since I expect the patch there would be smaller and should also fix the issue here. If we cannot make it, I would suggest just uplifting patches here.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(shes050117)</span></div></div></div><div class="change-set" id="c49"><div class="comment" data-id="14298950" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-13 23:47 PDT" data-time="1565765275">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-49" data-comment-id="14298950" data-ismarkdown="true" ><p>Jan (and Ted, privately) are correct, I forgot about the possibility of using proxies. So this is not fixed yet.</p>
</div></div><div class="change-set" id="c50"><div class="comment" data-id="14310619" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-20 01:07 PDT" data-time="1566288463">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-50" data-comment-id="14310619" data-ismarkdown="true" ><p>Back-flipping yet again, step 23 of <a href="https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeinternal" rel="nofollow">StructuredSerializeInternal</a> makes clones of objects with proxies impossible, so I once again think this is actually fixed in m-c. I think this highlights the need for a systematic approach to dealing with <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1570585" title="RESOLVED WORKSFORME">bug 1570585</a>.</p>
</div></div><div class="change-set" id="c51"><div class="comment" data-id="14312312" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a24413355_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-20 15:15 PDT" data-time="1566339319">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-51" data-comment-id="14312312" data-ismarkdown="true" ><p>We have one beta left before 69 goes to RC next week. If we plan to do something for Fx69/68.1esr, that needs to be sorted out ASAP.</p>
</div><div class="activity"><div class="change">Flags: needinfo?(ytausky)</div></div></div><div class="change-set" id="c52"><div class="comment" data-id="14313006" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-21 02:01 PDT" data-time="1566378070">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-52" data-comment-id="14313006" data-ismarkdown="true" ><p>I&#39;m compiling the patches from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">bug 1544750</a> for beta, when that&#39;s done I&#39;ll do it for the ESR as well.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ytausky)</span></div></div></div><div class="change-set" id="c53"><div class="comment" data-id="14313411" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-21 05:59 PDT" data-time="1566392397">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9087003"
         class="attachment"
         data-id="9087003" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D42835-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9087003" itemprop="contentUrl">
        <span id="att-9087003-description" itemprop="description">Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</span></a>
        — <a href="attachment.cgi?id=9087003&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-53" data-comment-id="14313411" data-ismarkdown="true" ><p>This commit adds the text of the spec as inline comments and refactors<br>
the code such that it directly corresponds to the spec&#39;s steps. This<br>
makes it easier to understand how the spec&#39;s algorithm is implemented.</p>
</div></div><div class="change-set" id="c54"><div class="comment" data-id="14315302" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 00:31 PDT" data-time="1566459118">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9087298"
         class="attachment"
         data-id="9087298" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D43016-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9087298" itemprop="contentUrl">
        <span id="att-9087298-description" itemprop="description">Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</span></a>
        — <a href="attachment.cgi?id=9087298&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-54" data-comment-id="14315302" data-ismarkdown="true" ><p>This commit adds the text of the spec as inline comments and refactors<br>
the code such that it directly corresponds to the spec&#39;s steps. This<br>
makes it easier to understand how the spec&#39;s algorithm is implemented.</p>
</div></div><div class="change-set" id="c55"><div class="comment" data-id="14315894" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a24413355_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a24413355_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 06:45 PDT" data-time="1566481522">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-55" data-comment-id="14315894" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9087003" name="attach_9087003" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">attachment 9087003</a> <a href="/attachment.cgi?id=9087003&amp;action=edit" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</p>
<h3>Beta/Release Uplift Approval Request</h3>
<ul>
<li><strong>User impact if declined</strong>: Potentially exploitable use-after-free</li>
<li><strong>Is this code covered by automated tests?</strong>: No</li>
<li><strong>Has the fix been verified in Nightly?</strong>: Yes</li>
<li><strong>Needs manual test from QE?</strong>: No</li>
<li><strong>If yes, steps to reproduce</strong>:</li>
<li><strong>List of other uplifts needed</strong>: None</li>
<li><strong>Risk to taking this patch</strong>: Low</li>
<li><strong>Why is the change risky/not risky? (and alternatives if risky)</strong>: It&#39;s been on nightly and we haven&#39;t seen regressions.</li>
<li><strong>String changes made/needed</strong>: None</li>
</ul>
<h3>Security Approval Request</h3>
<ul>
<li><strong>How easily could an exploit be constructed based on the patch?</strong>: Easy to trigger UAF, not sure how easy it is to exploit</li>
<li><strong>Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?</strong>: No</li>
<li><strong>Which older supported branches are affected by this flaw?</strong>: esr68</li>
<li><strong>If not all supported branches, which bug introduced the flaw?</strong>: None</li>
<li><strong>Do you have backports for the affected branches?</strong>: Yes</li>
<li><strong>If not, how different, hard to create, and risky will they be?</strong>:</li>
<li><strong>How likely is this patch to cause regressions; how much testing does it need?</strong>: It&#39;s possible that it introduces regressions since it&#39;s a new implementation of existing functionality, but it&#39;s been on nightly and we haven&#39;t seen any regressions.</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087003&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087003</a> -
        Flags: sec-approval?</div><div class="change">
        <a href="/attachment.cgi?id=9087003&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087003</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="a26214601_621888"><div class="change" id="aa26214601_621888">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_621888" id="a26214601_621888"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26214601_621888"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26214601_621888">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26214601_621888">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 06:45 PDT" data-time="1566481525">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087298&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087298</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c56"><div class="comment" data-id="14315900" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a26214601_621888"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 06:47 PDT" data-time="1566481630">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-56" data-comment-id="14315900" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9087298" name="attach_9087298" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">attachment 9087298</a> <a href="/attachment.cgi?id=9087298&amp;action=edit" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</p>
<h3>ESR Uplift Approval Request</h3>
<ul>
<li><strong>If this is not a sec:{high,crit} bug, please state case for ESR consideration</strong>:</li>
<li><strong>User impact if declined</strong>: Potentially exploitable UAF</li>
<li><strong>Fix Landed on Version</strong>: 70</li>
<li><strong>Risk to taking this patch</strong>: Low</li>
<li><strong>Why is the change risky/not risky? (and alternatives if risky)</strong>: It&#39;s been tested on nightly and we haven&#39;t seen regressions.</li>
<li><strong>String or UUID changes made by this patch</strong>: None</li>
</ul>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087298&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087298</a> -
        Flags: approval-mozilla-esr68?</div></div></div><div class="change-set" id="c57"><div class="comment" data-id="14316176" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26214601_621888"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 08:33 PDT" data-time="1566488004">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-57" data-comment-id="14316176" data-ismarkdown="true" ><p>Can you clarify the status for esr60? The sec-approval says this only goes back as far as esr68, but <a class="bz_bug_link
          bz_status_VERIFIED bz_closed" href="/show_bug.cgi?id=1501152#c31" title="VERIFIED FIXED - Use after free in KeyPath::ExtractKey">comment 31</a> says esr60 is also affected. Also, updating the flags to reflect that this is fixed in 70 already.</p>
</div><div class="activity"><div class="change">Group: dom-core-security &rarr; core-security-release</div><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2019-07-31 20:35 PDT" data-time="1564630520">2 years ago</span> &rarr; <span class="rel-time" title="2019-08-22 08:33 PDT" data-time="1566488004">2 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=isnotempty">status-firefox70</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Flags: needinfo?(ytausky)</div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla70</div></div></div><div class="change-set" id="c58"><div class="comment" data-id="14316180" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26214601_621888"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 08:34 PDT" data-time="1566488066">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-58" data-comment-id="14316180" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9087003" name="attach_9087003" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">attachment 9087003</a> <a href="/attachment.cgi?id=9087003&amp;action=edit" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</p>
<p>This has baked on Nightly for awhile now, let&#39;s take it for 69.0b16 also.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087003&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087003</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="c59"><div class="comment" data-id="14316198" data-no="59"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-59" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26214601_621888"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 08:41 PDT" data-time="1566488469">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-59" data-comment-id="14316198" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/releases/mozilla-beta/rev/db9bda005eff" rel="nofollow">https://hg.mozilla.org/releases/mozilla-beta/rev/db9bda005eff</a></p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=isnotempty">status-firefox69</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c60"><div class="comment" data-id="14317221" data-no="60"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-60" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a26214601_621888"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-60"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-60" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c60">Comment 60</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-22 17:40 PDT" data-time="1566520852">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-60">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-60" data-comment-id="14317221" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9087003" name="attach_9087003" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">attachment 9087003</a> <a href="/attachment.cgi?id=9087003&amp;action=edit" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</p>
<p>Giving sec-approval+ since it is already in all the things. :-)</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087003&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087003</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="c61"><div class="comment" data-id="14317582" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-61" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26214601_621888"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a26214601_621888"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 01:01 PDT" data-time="1566547305">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1501152&amp;comment_id=14317582"
     title="1 revision">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-61" data-comment-id="14317582" data-ismarkdown="true" ><p>I forgot about esr60, I&#39;ll backport it now.<br>
Update: it does not apply cleanly, so this may require more work and testing.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ytausky)</span></div></div></div><div class="change-set" id="a26281583_600971"><div class="change" id="aa26281583_600971">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_600971" id="a26281583_600971"><img src="https://secure.gravatar.com/avatar/a088418052679d9583556d277e6774ee?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_600971" id="a26281583_600971"><a class="email " href="/user_profile?user_id=600971" > <span class="fna">Phabricator Automation</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26281583_600971"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26281583_600971">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26281583_600971">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 01:21 PDT" data-time="1566548507">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087003&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087003</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c62"><div class="comment" data-id="14318712" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-62" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26281583_600971"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26281583_600971"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 11:57 PDT" data-time="1566586648">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-62" data-comment-id="14318712" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9087003" name="attach_9087003" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">attachment 9087003</a> <a href="/attachment.cgi?id=9087003&amp;action=edit" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</p>
<p>This isn&#39;t obsolete just because it was uplifted already.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087003&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087003</a> -
        Attachment is obsolete: false</div></div></div><div class="change-set" id="c63"><div class="comment" data-id="14318713" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-63" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26281583_600971"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26281583_600971"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 11:57 PDT" data-time="1566586665">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-63" data-comment-id="14318713" data-ismarkdown="true" ><p>Comment on <span class=""><a href="/attachment.cgi?id=9087298" name="attach_9087298" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">attachment 9087298</a> <a href="/attachment.cgi?id=9087298&amp;action=edit" title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell">[details]</a></span><br>
<a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell</p>
<p>Approved for 68.1esr.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9087298&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087298</a> -
        Flags: <span class="activity-deleted">sec-approval?</span></div><div class="change">
        <a href="/attachment.cgi?id=9087298&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087298</a> -
        Flags: <span class="activity-deleted">approval-mozilla-esr68?</span></div><div class="change">
        <a href="/attachment.cgi?id=9087298&amp;action=edit"
           title="Bug 1544750 - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell"
           class=""
        >Attachment #9087298</a> -
        Flags: approval-mozilla-esr68+</div></div></div><div class="change-set" id="c64"><div class="comment" data-id="14318812" data-no="64"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-64" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a26281583_600971"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a26281583_600971"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 13:08 PDT" data-time="1566590905">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-64" data-comment-id="14318812" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/releases/mozilla-esr68/rev/ebb385dc5c27434ca6e1b951fa57492bdc1e1d62" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr68/rev/ebb385dc5c27434ca6e1b951fa57492bdc1e1d62</a></p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=isnotempty">status-firefox-esr68</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c65"><div class="comment" data-id="14318826" data-no="65"
       data-tags="backout">
    
    <table class="layout-table change-head " id="ch-65" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a26281583_600971"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a26281583_600971"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-65"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-65" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c65">Comment 65</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 13:16 PDT" data-time="1566591386">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-65">
        <td colspan="2" class="comment-tags"><span class="comment-tag">backout</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-65" data-comment-id="14318826" data-ismarkdown="true" ><p>Backed out for from ESR68 bustage in IDBResult.h:</p>
<p><a href="https://hg.mozilla.org/releases/mozilla-esr68/rev/9fd0d4493c77bfed937299c2b7fd3843f8543a3a" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr68/rev/9fd0d4493c77bfed937299c2b7fd3843f8543a3a</a></p>
<p>Push with bustage: <a href="https://treeherder.mozilla.org/#/jobs?repo=mozilla-esr68&amp;revision=091473bf2727d37a4107cfca1185ef99c3f2eeff" rel="nofollow">https://treeherder.mozilla.org/#/jobs?repo=mozilla-esr68&amp;revision=091473bf2727d37a4107cfca1185ef99c3f2eeff</a><br>
Failure log: <a href="https://treeherder.mozilla.org/logviewer.html#?job_id=263243122&amp;repo=mozilla-esr68" rel="nofollow">https://treeherder.mozilla.org/logviewer.html#?job_id=263243122&amp;repo=mozilla-esr68</a></p>
<p>[task 2019-08-23T20:05:13.369Z] 20:05:13     INFO -  In file included from /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/dom/IDBCursor.h:14:<br>
[task 2019-08-23T20:05:13.369Z] 20:05:13     INFO -  In file included from /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/dom/indexedDB/Key.h:10:<br>
[task 2019-08-23T20:05:13.369Z] 20:05:13    ERROR -  /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/dom/indexedDB/IDBResult.h:164:35: error: bad implicit conversion constructor for &#39;IDBResult&#39;<br>
[task 2019-08-23T20:05:13.369Z] 20:05:13     INFO -    using IDBResult::IDBResultBase::IDBResultBase;<br>
[task 2019-08-23T20:05:13.369Z] 20:05:13     INFO -                                    ^<br>
[task 2019-08-23T20:05:13.370Z] 20:05:13     INFO -  /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/dom/indexedDB/IDBResult.h:164:35: note: consider adding the explicit keyword to the constructor<br>
[task 2019-08-23T20:05:13.370Z] 20:05:13     INFO -    using IDBResult::IDBResultBase::IDBResultBase;<br>
[task 2019-08-23T20:05:13.370Z] 20:05:13     INFO -                                    ^<br>
[task 2019-08-23T20:05:13.370Z] 20:05:13     INFO -                                    explicit</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=isnotempty">status-firefox-esr68</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">Flags: needinfo?(ytausky)</div></div></div><div class="change-set" id="a26326656_75935"><div class="change" id="aa26326656_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26326656_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a26326656_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26326656_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26326656_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26326656_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-23 13:53 PDT" data-time="1566593580">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=isnotempty">tracking-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr60&amp;o1=equals&amp;v1=69%2B">69+</a></div></div></div><div class="change-set" id="c66"><div class="comment" data-id="14322344" data-no="66"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-66" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26326656_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a26326656_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-66"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-66" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c66">Comment 66</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-26 01:15 PDT" data-time="1566807357">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-66">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-66" data-comment-id="14322344" data-ismarkdown="true" ><p>Right, that patch triggered a bug in the static analysis, which was fixed in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1554989" title="RESOLVED FIXED - Inheriting constructors whose inherited constructors are implicit are always rejected">bug 1554989</a>. I&#39;ll have to uplift that one as well.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ytausky)</span></div></div></div><div class="change-set" id="c67"><div class="comment" data-id="14322536" data-no="67"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-67" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26326656_75935"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a26326656_75935"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-67"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-67" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c67">Comment 67</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-26 04:32 PDT" data-time="1566819160">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-67">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9088091"
         class="attachment"
         data-id="9088091" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="phabricator-D43412-url.txt">
      <meta itemprop="contentSize" content="47">
      <meta itemprop="encodingFormat" content="text/x-phabricator-request">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9088091" itemprop="contentUrl">
        <span id="att-9088091-description" itemprop="description">Bug 1554989 - Fix implicit checker on inheriting constructors r=andi</span></a>
        — <a href="attachment.cgi?id=9088091&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-67" data-comment-id="14322536" data-ismarkdown="true" ><p>Inheriting constructors are implicitly introduced via a using-declaration.<br>
Since the C++ grammar doesn&#39;t allow attributes on using-declarations, it<br>
is currently impossible to add MOZ_IMPLICIT to implicit inheriting<br>
constructors.</p>
<p>This commit changes the AST matcher such that it ignores inheriting<br>
constructors altogether. If they are inheriting from an implicit inherited<br>
constructor, that constructor&#39;s check should be enough to ensure that no<br>
constructors are unintentionally implicit.</p>
<p><a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1544750" title="RESOLVED FIXED - Refactor IndexedDB&#39;s add() and put() operations to make correspondence to spec clearer">Bug 1544750</a> - Part 2: Refactor Key::EncodeJSValInternal to show direct correspondence to spec r=asuth,tcampbell a=RyanVM</p>
<p>This commit adds the text of the spec as inline comments and refactors<br>
the code such that it directly corresponds to the spec&#39;s steps. This<br>
makes it easier to understand how the spec&#39;s algorithm is implemented.</p>
</div></div><div class="change-set" id="a26554951_458188"><div class="change" id="aa26554951_458188">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_458188" id="a26554951_458188"><img src="https://secure.gravatar.com/avatar/8f3f8c3f93e13fdf486474e1382bf53e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_458188" id="a26554951_458188"><a class="email " href="/user_profile?user_id=458188" > <span class="fna">PTO until 15th Nov [:bogdan_maris], Release Desktop QA</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26554951_458188"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26554951_458188">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26554951_458188">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-26 05:17 PDT" data-time="1566821875">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify+</div><div class="change">Whiteboard: [reporter-external] [client-bounty-form][fixed in bug 1544750] &rarr; [reporter-external] [client-bounty-form][fixed in bug 1544750][post-critsmash-triage]</div></div></div><div class="change-set" id="c68"><div class="comment" data-id="14322743" data-no="68"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-68" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26554951_458188"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26554951_458188"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-68"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-68" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c68">Comment 68</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-26 06:21 PDT" data-time="1566825699">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-68">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-68" data-comment-id="14322743" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/releases/mozilla-esr68/rev/80175938fbd8" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr68/rev/80175938fbd8</a></p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=isnotempty">status-firefox-esr68</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a26569843_280903"><div class="change" id="aa26569843_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a26569843_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a26569843_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26569843_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26569843_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26569843_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-26 09:26 PDT" data-time="1566836767">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2019-11752</div><div class="change">Whiteboard: [reporter-external] [client-bounty-form][fixed in bug 1544750][post-critsmash-triage] &rarr; [reporter-external] [client-bounty-form][fixed in bug 1544750][post-critsmash-triage][adv-main69+][adv-esr68.1+]</div></div></div><div class="change-set" id="a26570886_1689"><div class="change" id="aa26570886_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a26570886_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a26570886_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26570886_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26570886_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26570886_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-26 09:43 PDT" data-time="1566837810">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty? &rarr; sec-bounty+</div></div></div><div class="change-set" id="a26622617_458188"><div class="change" id="aa26622617_458188">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_458188" id="a26622617_458188"><img src="https://secure.gravatar.com/avatar/8f3f8c3f93e13fdf486474e1382bf53e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_458188" id="a26622617_458188"><a class="email " href="/user_profile?user_id=458188" > <span class="fna">PTO until 15th Nov [:bogdan_maris], Release Desktop QA</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26622617_458188"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26622617_458188">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26622617_458188">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-27 00:05 PDT" data-time="1566889541">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">QA Whiteboard: [qa-triaged]</div></div></div><div class="change-set" id="c69"><div class="comment" data-id="14325272" data-no="69"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-69" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a26622617_458188"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a26622617_458188"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-69"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-69" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c69">Comment 69</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-27 07:34 PDT" data-time="1566916464">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-69">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-69" data-comment-id="14325272" data-ismarkdown="true" ><p>Hi Yaron, any updates on the ESR60 patch?</p>
</div><div class="activity"><div class="change">Flags: needinfo?(ytausky)</div></div></div><div class="change-set" id="c70"><div class="comment" data-id="14325519" data-no="70"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-70" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26622617_458188"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a26622617_458188"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-70"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-70" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c70">Comment 70</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-27 09:32 PDT" data-time="1566923577">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-70">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-70" data-comment-id="14325519" data-ismarkdown="true" ><p>I&#39;m slowed down with it because my local build of esr60 fails and there are some merge conflicts that need to be solved and tested.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ytausky)</span></div></div></div><div class="change-set" id="c71"><div class="comment" data-id="14327897" data-no="71"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-71" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_614785" id="a26622617_458188"><img src="https://secure.gravatar.com/avatar/74f649df9d410bf2cf0212276ef886d4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_614785" id="a26622617_458188"><a class="email " href="/user_profile?user_id=614785" > <span class="fna">Cristian Baica [:cbaica], Release Desktop QA</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-71"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-71" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c71">Comment 71</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-28 04:26 PDT" data-time="1566991595">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-71">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-71" data-comment-id="14327897" data-ismarkdown="true" ><p>I&#39;ve used Fx65.0a1 (2018-10-22) asan build and tried loading the test-case to reproduce the issue, but the tabs keep crashing so I cannot run the test-case.<br>
Is there anything that can be done by QA to verify this?</p>
</div></div><div class="change-set" id="a26728278_614785"><div class="change" id="aa26728278_614785">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_614785" id="a26728278_614785"><img src="https://secure.gravatar.com/avatar/74f649df9d410bf2cf0212276ef886d4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_614785" id="a26728278_614785"><a class="email " href="/user_profile?user_id=614785" > <span class="fna">Cristian Baica [:cbaica], Release Desktop QA</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26728278_614785"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26728278_614785">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26728278_614785">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-28 05:26 PDT" data-time="1566995202">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(ytausky)</div></div></div><div class="change-set" id="c72"><div class="comment" data-id="14328032" data-no="72"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-72" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_621888" id="a26728278_614785"><img src="https://secure.gravatar.com/avatar/ce4b8df294aef146c65ea1a5a2fca66c?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_621888" id="a26728278_614785"><a class="email " href="/user_profile?user_id=621888" > <span class="fna">Yaron Tausky [:ytausky]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-72"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-72" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c72">Comment 72</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-28 05:50 PDT" data-time="1566996622">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-72">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-72" data-comment-id="14328032" data-ismarkdown="true" ><p>You could verify that there are no crashes with the newest builds for ESR68 and Beta; all other versions are known to be affected (I&#39;m still working on ESR60).</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ytausky)</span></div></div></div><div class="change-set" id="c73"><div class="comment" data-id="14329733" data-no="73"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-73" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_614785" id="a26728278_614785"><img src="https://secure.gravatar.com/avatar/74f649df9d410bf2cf0212276ef886d4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_614785" id="a26728278_614785"><a class="email " href="/user_profile?user_id=614785" > <span class="fna">Cristian Baica [:cbaica], Release Desktop QA</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-73"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-73" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c73">Comment 73</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-29 00:57 PDT" data-time="1567065429">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-73">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-73" data-comment-id="14329733" data-ismarkdown="true" ><p>Verified with the fixed Fx70.0a1, Fx69.0b16 and ESR68 builds. The tabs no longer crash when loading the test-case. Waiting for the fix on ESR60.</p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=isnotempty">status-firefox69</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox69&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=isnotempty">status-firefox70</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox70&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=isnotempty">status-firefox-esr68</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr68&amp;o1=equals&amp;v1=verified">verified</a></div></div></div><div class="change-set" id="a26828558_1689"><div class="change" id="aa26828558_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a26828558_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a26828558_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a26828558_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a26828558_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-29 09:18 PDT" data-time="1567095482">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Inheriting constructors whose inherited constructors are implicit are always rejected"
   href="/show_bug.cgi?id=1554989">1554989</a></div></div></div><div class="change-set" id="c74"><div class="comment" data-id="14332926" data-no="74"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-74" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a26828558_1689"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-74"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-74" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c74">Comment 74</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-30 10:02 PDT" data-time="1567184549">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-74">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9089466"
         class="attachment patch"
         data-id="9089466" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1501152-esr60.patch">
      <meta itemprop="contentSize" content="45408">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9089466">
          <a class="link" href="attachment.cgi?id=9089466&amp;action=diff">
        <span id="att-9089466-description" itemprop="description">patch for esr60</span></a>
        — <a href="attachment.cgi?id=9089466&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9089466">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-74" data-comment-id="14332926" data-ismarkdown="true" ><p>Andrew, can you sanity-check this?</p>
<p>There were some conflicts in Key.cpp around <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1499854" title="RESOLVED FIXED - Assertion failure: (typeOffset % eArray == 0) &amp;&amp; (typeOffset / eArray &lt;= 2), at /builds/worker/workspace/build/src/dom/indexedDB/Key.cpp:195">bug 1499854</a>, and a dependency on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1429613" title="RESOLVED FIXED - Variant::match accepting lambdas, or one generic lambda">bug 1429613</a> for IDBResult (the latter fixed by janv with <a href="https://paste.mozilla.org/1CY8myH6" rel="nofollow">https://paste.mozilla.org/1CY8myH6</a>).  This applies on top of <a href="https://hg.mozilla.org/mozilla-central/rev/e8c59393c809" rel="nofollow">https://hg.mozilla.org/mozilla-central/rev/e8c59393c809</a> (which grafts cleanly to esr60).</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9089466&amp;action=edit"
           title="patch for esr60"
           class=""
        >Attachment #9089466</a> -
        Flags: feedback?(bugmail)</div></div></div><div class="change-set" id="c75"><div class="comment" data-id="14333224" data-no="75"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-75" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_151407" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/75b1e0d00a677e73b24efe34917fa1e9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_151407" id="a26828558_1689"><a class="email " href="/user_profile?user_id=151407" > <span class="fna">Andrew Sutherland [:asuth] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-75"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-75" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c75">Comment 75</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-30 13:01 PDT" data-time="1567195264">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-75">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-75" data-comment-id="14333224">Comment on <span class=""><a href="/attachment.cgi?id=9089466" name="attach_9089466" title="patch for esr60">attachment 9089466</a> <a href="/attachment.cgi?id=9089466&amp;action=edit" title="patch for esr60">[details]</a> <a href="/attachment.cgi?id=9089466&amp;action=diff" title="patch for esr60">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9089466'>[review]</a>
patch for esr60

Review of <span class=""><a href="/attachment.cgi?id=9089466" name="attach_9089466" title="patch for esr60">attachment 9089466</a> <a href="/attachment.cgi?id=9089466&amp;action=edit" title="patch for esr60">[details]</a> <a href="/attachment.cgi?id=9089466&amp;action=diff" title="patch for esr60">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9089466'>[review]</a>:
-----------------------------------------------------------------

So, it turns out I also can't actually build esr60 on my machine, but I can certify this as sane and resembling the code I previously reviewed.  (It seems like rustc 1.36.0 is probably too recent, but I'm very wary of messing with any default build toolchains right now because it might invalidate some of my other-secbug rr traces.)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9089466&amp;action=edit"
           title="patch for esr60"
           class=""
        >Attachment #9089466</a> -
        Flags: feedback?(bugmail) &rarr; feedback+</div></div></div><div class="change-set" id="c76"><div class="comment" data-id="14333227" data-no="76"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-76" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a26828558_1689"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-76"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-76" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c76">Comment 76</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-30 13:03 PDT" data-time="1567195380">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-76">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9089512"
         class="attachment patch"
         data-id="9089512" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="matcher.diff">
      <meta itemprop="contentSize" content="2153">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9089512">
          <a class="link" href="attachment.cgi?id=9089512&amp;action=diff">
        <span id="att-9089512-description" itemprop="description">Matcher fix</span></a>
        — <a href="attachment.cgi?id=9089512&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1501152&attachment=9089512">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-76" data-comment-id="14333227" data-ismarkdown="true" ><p>Sorry, the pastebin lasted just one hour.</p>
</div></div><div class="change-set" id="c77"><div class="comment" data-id="14333233" data-no="77"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-77" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_8340" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/87e2a0e5d7e2067a42ab082c391363fa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_8340" id="a26828558_1689"><a class="email " href="/user_profile?user_id=8340" > <span class="fna">Jan Varga [:janv]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-77"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-77" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c77">Comment 77</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-08-30 13:06 PDT" data-time="1567195592">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-77">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-77" data-comment-id="14333233" data-ismarkdown="true" ><p>I have rustc 1.36.0 too and I can build it. However, one need to do this before configure/build:<br>
export RUSTFLAGS=&quot;--cap-lints warn&quot;<br>
to workaround <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1519629" title="RESOLVED FIXED - Stylo fails with --enable-warnings-as-errors using Rust 1.33">bug 1519629</a>, this was all discovered by Julien (thanks for the investigation).</p>
</div></div><div class="change-set" id="c78"><div class="comment" data-id="14334419" data-no="78"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-78" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a26828558_1689"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-78"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-78" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c78">Comment 78</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-09-01 02:33 PDT" data-time="1567330432">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-78">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-78" data-comment-id="14334419">Comment on <span class=""><a href="/attachment.cgi?id=9089466" name="attach_9089466" title="patch for esr60">attachment 9089466</a> <a href="/attachment.cgi?id=9089466&amp;action=edit" title="patch for esr60">[details]</a> <a href="/attachment.cgi?id=9089466&amp;action=diff" title="patch for esr60">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1501152&amp;attachment=9089466'>[review]</a>
patch for esr60

taking this for 60.9.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9089466&amp;action=edit"
           title="patch for esr60"
           class=""
        >Attachment #9089466</a> -
        Flags: approval-mozilla-esr60+</div></div></div><div class="change-set" id="c79"><div class="comment" data-id="14336441" data-no="79"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-79" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a26828558_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a26828558_1689"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-79"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-79" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c79">Comment 79</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-09-01 23:58 PDT" data-time="1567407486">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-79">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-79" data-comment-id="14336441" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/2ce17180fd4dd8828caa964ba55205a51c313355" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/2ce17180fd4dd8828caa964ba55205a51c313355</a><br>
<a href="https://hg.mozilla.org/releases/mozilla-esr60/rev/d8dd10ac54302e4bd9cf6c537f790933b149099d" rel="nofollow">https://hg.mozilla.org/releases/mozilla-esr60/rev/d8dd10ac54302e4bd9cf6c537f790933b149099d</a></p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c80"><div class="comment" data-id="14336491" data-no="80"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-80" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_614785" id="a26828558_1689"><img src="https://secure.gravatar.com/avatar/74f649df9d410bf2cf0212276ef886d4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_614785" id="a26828558_1689"><a class="email " href="/user_profile?user_id=614785" > <span class="fna">Cristian Baica [:cbaica], Release Desktop QA</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-80"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-80" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#c80">Comment 80</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-09-02 00:48 PDT" data-time="1567410532">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-80">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-80" data-comment-id="14336491" data-ismarkdown="true" ><p>Confirming the tabs no longer crash on Fx 60.9.0ESR buildID: 20190901094603. Marking the entire ticket as verified fixed.</p>
</div><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=isnotempty">status-firefox-esr60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr60&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">Flags: <span class="activity-deleted">qe-verify+</span></div></div></div><div class="change-set" id="a51074809_1689"><div class="change" id="aa51074809_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a51074809_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a51074809_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a51074809_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a51074809_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1501152#a51074809_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-06-05 00:22 PDT" data-time="1591341733">1 year ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1501152&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>