<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 1045735 &ndash; VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://bugzilla.suse.com/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=1045735&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=1045735">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=1045735">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=1045735">



    
    <link href="skins/standard/global.css?1411227340"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1411227331" rel="stylesheet"
            type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1411227331" rel="stylesheet"
            type="text/css" ><link href="skins/standard/global.css?1411227340" rel="stylesheet"
            type="text/css" ><link href="skins/standard/show_bug.css?1416528352" rel="stylesheet"
            type="text/css" ><link href="extensions/Voting/web/style.css?1411227348" rel="stylesheet"
            type="text/css" ><!--[if lte IE 7]>
      


      <link href="skins/standard/IE-fixes.css?1411227340" rel="stylesheet"
            type="text/css" >
<![endif]-->

    <link href="skins/contrib/SUSE/global.css?1411227340" rel="stylesheet"
            type="text/css" 
          title="SUSE">

    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1411227335"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1411227333"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1411227329"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1411227329"></script><script type="text/javascript" src="js/yui/json/json-min.js?1411227333"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1411227334"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1411227335"></script><script type="text/javascript" src="js/global.js?1411227336"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 1045735 – VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected",  
                             "show_bug.cgi?id=1045735" );
        document.title = "Bug 1045735 – VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 1045735 – VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1411227336"></script><script type="text/javascript" src="js/field.js?1414105521"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" ><link href="extensions/Testopia/css/testopia.css" rel="stylesheet" type="text/css">
    <link href="extensions/Testopia/extjs/examples/ux/css/RowEditor.css" rel="stylesheet" type="text/css"  />
    <script type="text/javascript">
        Testopia_user = {login: "", id: 0};
        DEFAULT_CASE_STATUS = 'CONFIRMED';
    </script>
  </head>



  <body onload=""
        class="bugzilla-suse-com bz_bug bz_status_RESOLVED bz_product_SUSE_Security_Incidents bz_component_Incidents bz_bug_1045735 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<!--div id="tmp_warning_wnd" style="
    position:fixed; 
    color:red; 
    font-size:20px; 
    top:50px; 
    left:10%; 
    right:10%; 
    padding:1em;
    background-color:#ffffff;
    border:3px solid red;
    z-index:9999;
    text-align:center;">
  This Bugzilla is for TESTING ONLY. All new bugs and comments WILL BE LOST. Use <a href="https://bugzilla.suse.com">bugzilla.suse.com</a> instead.
  <button style="
      background:none;
      border:0;
      box-shadow:none;
      color:red;
      text-shadow:none;
      position:absolute;
      right:0;
      top:0;" onclick="document.getElementById('tmp_warning_wnd').style.display='none';">[X]</button>
</div-->

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;1045735</p>
    </td>

    <td id="subtitle">
      <p class="subheader">VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2020-06-27 19:39:11 UTC</p>
    </td>
</tr>
</table>

<table id="lang_links_container" cellpadding="0" cellspacing="0"
       class="bz_default_hidden"><tr><td>
</td></tr></table>
<ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <!--a id="login_link_top" href="show_bug.cgi?id=1045735&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a-->
  <a id="login_link_top" href="show_bug.cgi?id=1045735&amp;GoAheadAndLogIn=1">Log In</a>


  <form action="show_bug.cgi?id=1045735" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_top"
        onsubmit="return check_mini_login_fields( '_top' );"
  >
    <input id="Bugzilla_login_top" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_top')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_top" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_top')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_top">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_top');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_top');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
<li id="forgot_container_top">
  <span class="separator">| </span>
  <a id="forgot_link_top" href="https://idp-portal.suse.com/univention/self-service/#page=passwordreset">Forgot Password</a>
</li>
</ul>
</div> 

<div id="bugzilla-body">

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2020-06-27 19:39:11">
  <input type="hidden" name="longdesclength" value="59">
  <input type="hidden" name="id" value="1045735">
  <input type="hidden" name="token" value="1635630207-1jXVu3cj_MgiaO_4ZFYrDBa4JwXdBm9Y9PMghybzj6s">
<div class="bz_alias_short_desc_container edit_form">
        <strike>
     <a href="show_bug.cgi?id=1045735"><b>Bug&nbsp;1045735</b></a> -<span id="summary_alias_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2017-9269</span>) 
      <span id="short_desc_nonedit_display">VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected</span></strike>
     </span>  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">(CVE-2017-9269)
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=glossary.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td><span title="VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected">VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange...
        </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('VUL-0: CVE-2017-9269: libzypp: Missing key pinning allows mirrors to exchange content undetected', 'CVE-2017-9269');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=status_resolution_matrix.html">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>

          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=glossary.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Novell Products</td>
      </tr>

    
    
    
    <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >SUSE Security Incidents</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=glossary.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Novell Products</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=SUSE Security Incidents"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Incidents</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=glossary.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=glossary.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">Other
       Other
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority">
          <a href="page.cgi?id=glossary.html#priority">Priority</a></label>:
      </th>
      <td>P3 - Medium
        <label for="severity">
          <b>Severity</b></label>:
       Major
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=glossary.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=glossary.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Michael Andres</span>
</span>
      </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_qa_contact">

    <label for="qa_contact" accesskey="q">

  <a 
      title="The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#qa_contact"
  >QA Contact:</a>
</label>
</th>
      <td><span class="vcard"><span class="fn">Security Team bot</span>
</span>
      </td>
    </tr>
    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'security-team\x40suse.de',
        'security-team\x40suse.de');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=glossary.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
          <a href="https://smash.suse.de/issue/187245/">https://smash.suse.de/issue/187245/</a>
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=glossary.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">
        <span title="CVSSv3:SUSE:CVE-2017-9269:7.7:(AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:L) CVSSv2:NVD:CVE-2017-9269:7.5:(AV:N/AC:L/Au:N/C:P/I:P/A:P) CVSSv3:NVD:CVE-2017-9269:9.8:(AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)">CVSSv3:SUSE:CVE-2017-9269:7.7:(AV:N/A...
        </span>  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=glossary.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=1045735&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=1045735">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2017-06-23 09:54 UTC by <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2020-06-27 19:39 UTC 
      (<a href="show_activity.cgi?id=1045735">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>16 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="ast">ast</option>
                <option value="astieger">astieger</option>
                <option value="blandorff">blandorff</option>
                <option value="doerges">doerges</option>
                <option value="duge">duge</option>
                <option value="fcrozat">fcrozat</option>
                <option value="karol">karol</option>
                <option value="kkaempf">kkaempf</option>
                <option value="meissner">meissner</option>
                <option value="rich.paredes">rich.paredes</option>
                <option value="sbahling">sbahling</option>
                <option value="schubi">schubi</option>
                <option value="thomas">thomas</option>
                <option value="tschmidt">tschmidt</option>
                <option value="vpereira">vpereira</option>
                <option value="zypp-maintainers">zypp-maintainers</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=glossary.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ><ul class="bug_urls">
          <li><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - VUL-1: kiwi: --no-gpg-checks set by default"
   href="show_bug.cgi?id=1052100">1052100</a>
          </li>
          <li><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WONTFIX - rpm should warn about unsigned package files"
   href="show_bug.cgi?id=1053253">1053253</a>
          </li></ul></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_foundby">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_foundby"
  >Found By:</a>

</th>
  <td class="field_value "
      id="field_container_cf_foundby"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_nts_priority">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_nts_priority"
  >Services Priority:</a>

</th>
  <td class="field_value "
      id="field_container_cf_nts_priority"  colspan="2"></td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_biz_priority">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_biz_priority"
  >Business Priority:</a>

</th>
  <td class="field_value "
      id="field_container_cf_biz_priority"  colspan="2"></td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_blocker">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_blocker"
  >Blocker:</a>

</th>
  <td class="field_value "
      id="field_container_cf_blocker"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_marketing_qa_status">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_marketing_qa_status"
  >Marketing QA Status:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_marketing_qa_status"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_it_deployment">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=glossary.html#cf_it_deployment"
  >IT Deployment:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_it_deployment"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         <ul>
    <li><a href="tr_new_case.cgi?product=SUSE%20Security%20Incidents&bug=1045735">Create test case</a></li>
</ul><ul>
  <li><a href="enter_bug.cgi?cloned_bug_id=1045735">Clone This Bug</a></li>
</ul>
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>



  <tr class="bz_attach_footer">
    <td colspan="2">
        <a href="attachment.cgi?bugid=1045735&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=1045735&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1411227336" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-23 09:54:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Reported by Moritz Duge and Till Doerges from PRESENSE

=== (3) spoofing (replacing signed with unsigned repo) ===
You can probably also do this by modifying your /etc/hosts or adding IP
routes. I did it by setting up an own mirror server.

After successfully setting up a mirror server for
<a href="http://download.opensuse.org/update/leap/42.2/oss/">http://download.opensuse.org/update/leap/42.2/oss/</a> I changed my
YaST/Zypper to use my mirror instead. Installing packages from my mirror
worked fine.
No manipulations until now!

Maybe this is of no importance, but I used /update/leap/42.2/oss/
because it has a directory structure like what comes out of
&quot;createrepo&quot;. The structure of the distribution-oss repo is slightly
different.
<a href="http://download.opensuse.org/distribution/leap/42.2/repo/oss/">http://download.opensuse.org/distribution/leap/42.2/repo/oss/</a>

Then I replaced the mirror directory on the mirror with the repository
from step (2).
After this YaST didn't refreshed the repository by itself. It still
showed the old package list. I'm not sure if that would have happened
automatically after a few hours or if there's any way to enforce a
refresh by the server. So I had to run this on my client:

zypper clean -a
(again: no warning)

Afterwards installing &quot;vim&quot; got me that modified package from the mirror
server. No warnings!

=================

The repository in step 2 was created like this:
mkdir -p ~/testrepo/repodata/
mkdir -p  ~/testrepo/rpm/
Then a unsigned, self generated rpm was place in ~/testrepo/rpm
createrepo ~/testrepo/

We need to ensure that signed repos can't be &quot;downgraded&quot; to unsigned repos.

So this allows any mirror to change the content and potentially infecting users of these repos with arbitrary code.</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-23 09:55:33 UTC
        </span>
      </div>



<pre class="bz_comment_text" >CRD still under discussion.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-29 09:45:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Credit: Discovered by Till Dörges and Moritz Duge of PRESENSE Technologies

CRD: 2017-07-20 14:00 UTC</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-06-29 09:50:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >While we're at changing how zypper handles things another report by them:

<span class="quote">&gt; Bottom line (AFAICT): zypper accepts unsigned packages in its cache.</span >
&gt;
<span class="quote">&gt; I haven't gotten around to creating a (simple) reproducer. And perhaps this will also
&gt; be fixed by the fixes for issues #2 and #3 from above.</span >


Here's a relatively simple way (even though it requires kiwi) to reproduce what I tried to describe above.

Following these steps, you can make zypper accept a package into its cache even though the GPG signature check of the package failed.

All tests were done on this system with all the latests patches installed: 

--- snip ---
$  lsb-release -a
LSB Version:    n/a
Distributor ID: openSUSE project
Description:    openSUSE Leap 42.2
Release:        42.2
Codename:       n/a


$  uname -a
Linux loderunner 4.4.72-18.12-default #1 SMP Mon Jun 19 14:11:41 UTC 2017 (9c03296)
x86_64 x86_64 x86_64 GNU/Linux

--- snap ---


Prerequisites (install latest kiwi etc., execute kiwi 1st stage):

--- snip ---
zypper ar
<a href="http://download.opensuse.org/repositories/Virtualization:/Appliances:/Builder/openSUSE_Leap_42.2/Virtualization:Appliances:Builder.repo">http://download.opensuse.org/repositories/Virtualization:/Appliances:/Builder/openSUSE_Leap_42.2/Virtualization:Appliances:Builder.repo</a>

zypper in python3-kiwi kiwi-tools git
git clone <a href="https://github.com/SUSE/kiwi-descriptions">https://github.com/SUSE/kiwi-descriptions</a>

# sigs are not checked (yet)
grep rpm-check ./kiwi-descriptions/suse/x86_64/suse-leap-42.2-JeOS/config.xml

# make sure we actually check signatures
sed -i.orig \
    -e
's;&lt;rpm-check-signatures&gt;.*&lt;/rpm-check-signatures&gt;;&lt;rpm-check-signatures&gt;true&lt;/rpm-check-signatures&gt;;'
\
    ./kiwi-descriptions/suse/x86_64/suse-leap-42.2-JeOS/config.xml

# sigs are checked now
grep rpm-check ./kiwi-descriptions/suse/x86_64/suse-leap-42.2-JeOS/config.xml

rm -rf --one-file-system kiwisharedcache kiwidestdir
mkdir {kiwisharedcache,kiwidestdir}

rm -rf --one-file-system kiwirootdir

kiwi --debug --logfile ./kiwi.1.log --shared-cache-dir=kiwisharedcache system prepare
--description=./kiwi-descriptions/suse/x86_64/suse-leap-42.2-JeOS --root=kiwirootdir
--signing-key=/usr/lib/rpm/gnupg/keys/gpg-pubkey-3dbdc284-53674dd4.asc
--- snap ---


Up to here everything behaves as expected. And if you called the 2nd kiwi stage like
this, everything would still be fine:

--- snip ---
kiwi --debug --logfile=./kiwi.2.log --shared-cache-dir=kiwisharedcache --type=iso
system create --root=kiwirootdir --target-dir=kiwidestdir
--signing-key=/usr/lib/rpm/gnupg/keys/gpg-pubkey-3dbdc284-53674dd4.asc
--- snap ---


However, if you omit the --signing-key option and call kiwi like this:

--- snip ---
kiwi --debug --logfile=./kiwi.2.log --shared-cache-dir=kiwisharedcache --type=iso
system create --root=kiwirootdir --target-dir=kiwidestdir
--- snap ---

you'll get an error (still everything's fine):

--- snip ---
[ DEBUG   ]: 22:30:02 | bootstrap: Retrieving: adaptec-firmware-1.35-25.2.noarch.rpm
[done]
[ DEBUG   ]: 22:30:02 | bootstrap: adaptec-firmware-1.35-25.2.noarch.rpm:
[ DEBUG   ]: 22:30:02 | bootstrap:     Header V3 RSA/SHA256 Signature, key ID
3dbdc284: NOKEY
[ DEBUG   ]: 22:30:02 | bootstrap:     V3 RSA/SHA256 Signature, key ID 3dbdc284: NOKEY
[ DEBUG   ]: 22:30:02 | bootstrap: Abort, retry, ignore? [a/r/i] (a): a
[ INFO    ]: Processing: [########################################] 100%
[ ERROR   ]: 22:30:02 | KiwiBootStrapPhaseFailed: Bootstrap package installation
failed: adaptec-firmware-1.35-25.2.noarch (de36b9be105dc4782ce19db6c895bded):
Signature verification failed [4-Signatures public key is not available]
--- snap ---


*but* now adaptec-firmware-1.35-25.2.noarch.rpm has been placed in the cache (this is where things break):

--- snip ---
find . -iname adaptec-firmware-1.35-25.2.noarch.rpm
./kiwisharedcache/packages/de36b9be105dc4782ce19db6c895bded/suse/noarch/adaptec-firmware-1.35-25.2.noarch.rpm
--- snap ---

If you call the kiwi 2nd stage again:

--- snip ---
kiwi --debug --logfile=./kiwi.2.log --shared-cache-dir=kiwisharedcache --type=iso
system create --root=kiwirootdir --target-dir=kiwidestdir
--- snip ---

zypper will happily install adaptec-firmware, because it considers the cache as
trusted - even though the signature was never successfully verified:

--- snip ---
[ DEBUG   ]: 22:36:11 | bootstrap: (  1/248) Installing:
adaptec-firmware-1.35-25.2.noarch [....done]
[ INFO    ]: Processing: [#                                       ] 2%[ DEBUG   ]:
22:36:11 | bootstrap: Additional rpm output:
[ DEBUG   ]: 22:36:11 | bootstrap: warning:
/home/doerges/tmp/kiwidestdir/kiwi_boot_root.0nq6k4ig/home/doerges/tmp/kiwisharedcache/packages/de36b9be105dc4782ce19db6c895bded/suse/noarch/adaptec-firmware-1.35-25.2.noarch.rpm:
Header V3 RSA/SHA256 Signature, key ID 3dbdc284: NOKEY
--- snip ---

And instead the build fails because the next package fails to pass the signature check:

--- snip ---
[ DEBUG   ]: 22:36:12 | bootstrap: Retrieving: sysfsutils-2.1.0-154.4.x86_64.rpm [done]
[ DEBUG   ]: 22:36:12 | bootstrap: sysfsutils-2.1.0-154.4.x86_64.rpm:
[ DEBUG   ]: 22:36:12 | bootstrap:     Header V3 RSA/SHA256 Signature, key ID
3dbdc284: NOKEY
[ DEBUG   ]: 22:36:12 | bootstrap:     V3 RSA/SHA256 Signature, key ID 3dbdc284: NOKEY
[ DEBUG   ]: 22:36:12 | bootstrap: Abort, retry, ignore? [a/r/i] (a): a
[ INFO    ]: Processing: [########################################] 100%
[ ERROR   ]: 22:36:12 | KiwiBootStrapPhaseFailed: Bootstrap package installation
failed: sysfsutils-2.1.0-154.4.x86_64 (de36b9be105dc4782ce19db6c895bded): Signature
verification failed [4-Signatures public key is not available]
--- snap ---

For the 2nd call of the kiwi 2nd stage the expected behavior would have been to fail at exactly the same package, i.e. adaptec-firmware-1.35-25.2.noarch.rpm. IOW it should not have ended up in the cache in the first place.

I'm not sure how to extract meaningful zypper logs, but the kiwi output should give enough information to narrow this down.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Thomas Schmidt</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-21 09:46:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Do you have zypp packages with the fix available for SLES? 
Then we could check if SCC activation still works without issues. 
We should especially test the external repositories (AMD/IBM) that get delivered with SLES.</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-21 09:58:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Thomas Schmidt from <a href="show_bug.cgi?id=1045735#c7">comment #7</a>)
We had to reject our first attempt, but I will have something later today. I'll update here once it's available.</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-21 12:01:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Till kindly agreed to extending the CRD. We currently aim for
CRD: 2017-08-03 14:00 UTC</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-22 13:48:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Thomas Schmidt from <a href="show_bug.cgi?id=1045735#c7">comment #7</a>)
Binaries are now available in SUSE:Maintenance:5191</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ivan Kapelyukhin</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-26 10:38:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hello, everyone.

I've looked into how the patch will affect registering against SCC and SMT.

Registering against SCC shouldn't be affected, as all the repos are properly signed.
Registering against SMT will cause errors in the following scenarios:

1. If the customer has patch filtering enabled for a module on their SMT, and GPG re-signing is not enabled, then activating this module is broken.
2. If the customer has added unsigned custom repos to a module on their SMT, then activating this module is broken.

Both errors are caused by SUSEConnect trying to install product RPM in non-interactive mode, while patched zypper is asking to confirm trusting an unsigned repo.

The proposed solution would be to issue a TID for the affected customers. The proposed ways to fix the issue for them would be to:

1. Either use their own GPG key for signing their repos/re-signing our repos in case of patch filtering;
2. Or relax global zypper settings on client machines to allow unsigned repos without zypper asking.

Thanks, Ivan.</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Moritz Duge</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-26 12:59:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Ivan Kapelyukhin from <a href="show_bug.cgi?id=1045735#c12">comment #12</a>)
<span class="quote">&gt; [...]
&gt; 2. Or relax global zypper settings on client machines to allow unsigned
&gt; repos without zypper asking.</span >

Sorry, but that sounds like restoring the original vulnerable behavior!?

In the end, rpm's should never be downloaded from remote without any signature check. Either on the repo or on each single rpm. Else that's always an open door for attackers.</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ivan Kapelyukhin</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-26 13:06:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Moritz Duge from <a href="show_bug.cgi?id=1045735#c13">comment #13</a>)
<span class="quote">&gt; Sorry, but that sounds like restoring the original vulnerable behavior!?</span >

Well, if the customer wants to install unsigned repos of their own -- they'll have to do it somehow.

But I see your point -- OK, rather then relaxing the settings globally we can advise the customers to trust the repos on per-repository basis.</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-26 13:20:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Ivan Kapelyukhin from <a href="show_bug.cgi?id=1045735#c14">comment #14</a>)
yes, please use this solution</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-26 14:10:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Ivan Kapelyukhin from <a href="show_bug.cgi?id=1045735#c14">comment #14</a>)
<span class="quote">&gt; But I see your point -- OK, rather then relaxing the settings globally we
&gt; can advise the customers to trust the repos on per-repository basis.</span >

JFYI: zypper-1.13.31 will provide new options to add-repo/modify-repo, to allow 
setting the options according to your needs:

    --gpgcheck (default: requires either signed repo or signed package)
        gpgcheck        = 1
	(repo_gpgcheck/pkg_gpgcheck unset: follow zypp.conf)

    --gpgcheck-strikt (requires signed package even for signed repos)
        gpgcheck        = 1
        repo_gpgcheck   = 1
        pkg_gpgcheck    = 1
 
    --gpgcheck-allow-unsigned  (allow repo and package to be unsigned)
        gpgcheck        = 1
        repo_gpgcheck   = 0
        pkg_gpgcheck    = 0

    --gpgcheck-allow-unsigned-repo  (allow repo to be unsigned)    
        gpgcheck        = 1
        repo_gpgcheck   = 0
        (pkg_gpgcheck unset: follow zypp.conf)

    --gpgcheck-allow-unsigned-package (allow package to be unsigned)  
        gpgcheck        = 1
        (repo_gpgcheck unset: follow zypp.conf)
        pkg_gpgcheck    = 0</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-28 12:53:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm just reviewing the QA report for this update (<a href="http://qam.suse.de/testreports/SUSE:Maintenance:5191:136224/log">http://qam.suse.de/testreports/SUSE:Maintenance:5191:136224/log</a>). The behavior change is fine, but I think we could make the warning a bit more drastic:
Current: 
File 'repomd.xml' from repository 'slesup' is unsigned, continue? [yes/no] (no):

I would prefer something along the line of:
File 'repomd.xml' from repository 'slesup' is unsigned. This could mean that someone meddled with this repository and it might not be trustworthy anymore. Do you want to continue (it is safer not to)? [yes/no] (no):

or something shorter that still conveys that this is bad. No need to resubmit for that though, we could take it in the next update</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Moritz Duge</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-28 14:12:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Johannes Segitz from <a href="show_bug.cgi?id=1045735#c17">comment #17</a>)
<span class="quote">&gt; I'm just reviewing the QA report for this update
&gt; (<a href="http://qam.suse.de/testreports/SUSE:Maintenance:5191:136224/log">http://qam.suse.de/testreports/SUSE:Maintenance:5191:136224/log</a>). The
&gt; behavior change is fine, but I think we could make the warning a bit more
&gt; drastic:
&gt; Current: 
&gt; File 'repomd.xml' from repository 'slesup' is unsigned, continue? [yes/no]
&gt; (no):</span >

Yes!

And even an experienced user might not recognize, that the 'repomod.xml' ensures the integrity of the whole repo. So an unsigned 'repomod.xml' means the whole content of the repo isn't safe.

So that should be mentioned too.</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-07-31 11:53:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'll fix this in zypper-1.13.31</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-03 19:09:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:2040-1: An update that solves three vulnerabilities and has 6 fixes is now available.

Category: security (important)
Bug References: 1009745,1031756,1033236,1038132,1038984,1043218,1045735,1047785,1048315
CVE References: CVE-2017-7435,CVE-2017-7436,CVE-2017-9269
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP2 (src):    libzypp-16.15.2-27.21.1
SUSE Linux Enterprise Server for Raspberry Pi 12-SP2 (src):    libzypp-16.15.2-27.21.1, zypper-1.13.30-18.13.3
SUSE Linux Enterprise Server 12-SP2 (src):    libzypp-16.15.2-27.21.1, zypper-1.13.30-18.13.3
SUSE Linux Enterprise Desktop 12-SP2 (src):    libzypp-16.15.2-27.21.1, zypper-1.13.30-18.13.3
OpenStack Cloud Magnum Orchestration 7 (src):    libzypp-16.15.2-27.21.1, zypper-1.13.30-18.13.3</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-07 13:08:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >public</pre>
    </div><div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-09 13:21:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-SU-2017:2111-1: An update that solves three vulnerabilities and has 6 fixes is now available.

Category: security (important)
Bug References: 1009745,1031756,1033236,1038132,1038984,1043218,1045735,1047785,1048315
CVE References: CVE-2017-7435,CVE-2017-7436,CVE-2017-9269
Sources used:
openSUSE Leap 42.2 (src):    libzypp-16.15.2-5.9.1, zypper-1.13.30-5.9.1</pre>
    </div><div id="c23" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-11 12:15:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >It will look like this in case of an unsigned repo (accordingly if missing key):

<span class="quote">&gt; Retrieving repository 'xxx' metadata --------------------------------------------------------------[\]
&gt; Warning: File 'repomd.xml' from repository 'xxx' is unsigned.
&gt; 
&gt;     Note: Signing data enables the recipient to verify that no modifications occurred after the data
&gt;     were signed. Accepting data with no, wrong or unknown signature can lead to a corrupted system
&gt;     and in extreme cases even to a system compromise.
&gt; 
&gt;     Note: File 'repomd.xml' is the repositories master index file. It ensures the integrity of the
&gt;     whole repo.
&gt; 
&gt;     Warning: We can't verify that no one meddled with this file, so it might not be trustworthy
&gt;     anymore! You should not continue unless you know it's safe.
&gt; 
&gt; File 'repomd.xml' from repository 'xxx' is unsigned, continue? [yes/no] (no):</span >


In case of a failed signature verification:
<span class="quote">&gt; 
&gt;     Warning: This file was modified after it has been signed. This may have been a malicious change,
&gt;     so it might not be trustworthy anymore! You should not continue unless you know it's safe.</span ></pre>
    </div><div id="c24" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-11 12:16:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Fixed in zypper-1.13.31</pre>
    </div><div id="c25" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Segitz</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-11 12:37:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Michael Andres from <a href="show_bug.cgi?id=1045735#c23">comment #23</a>)
Very nice, thank you</pre>
    </div><div id="c26" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-11 13:49:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Submitted for SLES12-SP2/3 (Leap-42.2/3) and Tumbleweed</pre>
    </div><div id="c27" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Victor Pereira</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-16 12:03:28 UTC
        </span>
      </div>



<pre class="bz_comment_text" >please let the bug open. The security team will close it as soon it is released to all products. thank you!</pre>
    </div><div id="c28" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-08-25 16:24:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:2264-1: An update that solves three vulnerabilities and has 5 fixes is now available.

Category: security (important)
Bug References: 1009745,1036659,1038984,1043218,1045735,1046417,1047785,1048315
CVE References: CVE-2017-7435,CVE-2017-7436,CVE-2017-9269
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP3 (src):    libzypp-16.15.3-2.3.1, yast2-pkg-bindings-devel-doc-3.2.4-2.3.1
SUSE Linux Enterprise Server 12-SP3 (src):    libzypp-16.15.3-2.3.1, yast2-pkg-bindings-3.2.4-2.3.1
SUSE Linux Enterprise Desktop 12-SP3 (src):    libzypp-16.15.3-2.3.1, yast2-pkg-bindings-3.2.4-2.3.1</pre>
    </div><div id="c29" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-02 16:10:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-SU-2017:2335-1: An update that solves three vulnerabilities and has 5 fixes is now available.

Category: security (important)
Bug References: 1009745,1036659,1038984,1043218,1045735,1046417,1047785,1048315
CVE References: CVE-2017-7435,CVE-2017-7436,CVE-2017-9269
Sources used:
openSUSE Leap 42.3 (src):    libzypp-16.15.3-9.1, yast2-pkg-bindings-3.2.4-4.1, yast2-pkg-bindings-devel-doc-3.2.4-4.1</pre>
    </div><div id="c30" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-04 19:43:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:2344-1: An update that solves one vulnerability and has 6 fixes is now available.

Category: security (important)
Bug References: 1008325,1038984,1045735,1047785,1054088,1054671,1055920
CVE References: CVE-2017-7436
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP3 (src):    libzypp-16.15.6-2.8.1
SUSE Linux Enterprise Server 12-SP3 (src):    libzypp-16.15.6-2.8.1, zypper-1.13.32-21.3.2
SUSE Linux Enterprise Desktop 12-SP3 (src):    libzypp-16.15.6-2.8.1, zypper-1.13.32-21.3.2</pre>
    </div><div id="c31" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-06 01:16:02 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-SU-2017:2370-1: An update that solves one vulnerability and has 6 fixes is now available.

Category: security (important)
Bug References: 1008325,1038984,1045735,1047785,1054088,1054671,1055920
CVE References: CVE-2017-7436
Sources used:
openSUSE Leap 42.3 (src):    libzypp-16.15.6-12.1, zypper-1.13.32-8.1</pre>
    </div><div id="c32" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-14 16:09:41 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-RU-2017:2462-1: An update that has 5 recommended fixes can now be installed.

Category: recommended (moderate)
Bug References: 1008325,1045735,1054088,1054671,1055920
CVE References: 
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP2 (src):    libzypp-16.15.6-27.28.2
SUSE Linux Enterprise Server for Raspberry Pi 12-SP2 (src):    libzypp-16.15.6-27.28.2, zypper-1.13.32-18.16.3
SUSE Linux Enterprise Server 12-SP2 (src):    libzypp-16.15.6-27.28.2, zypper-1.13.32-18.16.3
SUSE Linux Enterprise Desktop 12-SP2 (src):    libzypp-16.15.6-27.28.2, zypper-1.13.32-18.16.3
SUSE Container as a Service Platform ALL (src):    libzypp-16.15.6-27.28.2, zypper-1.13.32-18.16.3
OpenStack Cloud Magnum Orchestration 7 (src):    libzypp-16.15.6-27.28.2, zypper-1.13.32-18.16.3</pre>
    </div><div id="c33" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-14 19:17:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:2470-1: An update that solves 18 vulnerabilities and has 46 fixes is now available.

Category: security (important)
Bug References: 1004995,1009745,1014471,1017420,1019637,1026825,1027079,1027688,1027908,1028281,1028723,1029523,1031756,1032706,1033236,1035062,1036659,1038132,1038444,1038984,1042392,1043218,1043333,1044095,1044107,1044175,1044840,1045384,1045735,1045987,1046268,1046417,1046659,1046853,1046858,1047008,1047236,1047240,1047310,1047379,1047785,1047964,1047965,1048315,1048483,1048605,1048679,1048715,1049344,1050396,1050484,1051626,1051643,1051644,1052030,1052759,1053409,874665,902364,938657,944903,954661,960820,963041
CVE References: CVE-2013-7459,CVE-2016-9063,CVE-2017-1000100,CVE-2017-1000101,CVE-2017-10684,CVE-2017-10685,CVE-2017-11112,CVE-2017-11113,CVE-2017-3308,CVE-2017-3309,CVE-2017-3453,CVE-2017-3456,CVE-2017-3464,CVE-2017-7435,CVE-2017-7436,CVE-2017-8872,CVE-2017-9233,CVE-2017-9269
Sources used:
SUSE Container as a Service Platform ALL (src):    caasp-container-manifests-0.0.0+git_r155_93e40ab-2.3.3, container-feeder-0.0.0+20170901.git_r55_17ecbd3-2.3.3, sles12-mariadb-docker-image-1.1.0-2.3.10, sles12-pause-docker-image-1.1.0-2.3.11, sles12-pv-recycler-node-docker-image-1.1.0-2.3.10, sles12-salt-api-docker-image-1.1.0-2.3.9, sles12-salt-master-docker-image-1.1.0-4.3.10, sles12-salt-minion-docker-image-1.1.0-2.3.8, sles12-velum-docker-image-1.1.0-4.3.9</pre>
    </div><div id="c34" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andreas Stieger</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-15 06:17:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >should be done</pre>
    </div><div id="c35" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-09-15 10:12:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-RU-2017:2484-1: An update that has 5 recommended fixes can now be installed.

Category: recommended (moderate)
Bug References: 1008325,1045735,1054088,1054671,1055920
CVE References: 
Sources used:
openSUSE Leap 42.2 (src):    libzypp-16.15.6-5.12.1, zypper-1.13.32-5.12.1</pre>
    </div><div id="c36" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2017-10-27 01:10:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2017:2861-1: An update that solves three vulnerabilities and has 22 fixes is now available.

Category: security (moderate)
Bug References: 1005063,1008325,1009269,1012523,1025176,1028485,1032680,1036659,1042781,1045628,1045735,1050767,1050943,1054028,1054088,1054671,1055920,1056995,1060653,1061876,1063824,903543,978055,998893,999878
CVE References: CVE-2017-1000254,CVE-2017-1000257,CVE-2017-11462
Sources used:
SUSE Container as a Service Platform ALL (src):    sles12-mariadb-docker-image-1.1.0-2.5.19, sles12-pause-docker-image-1.1.0-2.5.21, sles12-pv-recycler-node-docker-image-1.1.0-2.5.19, sles12-salt-api-docker-image-1.1.0-2.5.19, sles12-salt-master-docker-image-1.1.0-4.5.18, sles12-salt-minion-docker-image-1.1.0-2.5.18, sles12-velum-docker-image-1.1.0-4.5.18</pre>
    </div><div id="c43" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Till Dörges</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-08-02 13:44:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I just had another look at this with

  $  zypper --version
  zypper 1.13.40
  $  lsb-release -d
  Description:    openSUSE Leap 42.3

and the default settings for zypper/libzypp. This means an unmodified /etc/zypp/zypp.conf in particular.


Throughout the ticket you mention that the integrity of repomd.xml is checked. But this does not (always) seem to be the case.


In my setup only the file content was checked.


Not sure this is important but I took me a moment to chase.


Details follow below.


repomd.xml
----------
user&#64;reposrv:~&gt; gpg .../distribution/leap/42.3/repo/oss/suse/repodata/repomd.xml.asc
gpg: Signatur vom Mi 19 Jul 2017 20:57:50 CEST mittels RSA-Schlüssel ID 3DBDC284
gpg: Korrekte Signatur von &quot;openSUSE Project Signing Key &lt;<a href="mailto:opensuse&#64;opensuse.org">opensuse&#64;opensuse.org</a>&gt;&quot; [unbekannt]
gpg: WARNUNG: Dieser Schlüssel trägt keine vertrauenswürdige Signatur!
gpg:          Es gibt keinen Hinweis, daß die Signatur wirklich dem vorgeblichen Besitzer gehört.
Haupt-Fingerabdruck  = 22C0 7BA5 3417 8CD0 2EFE  22AA B88B 2FD4 3DBD C284


reposrv:.../distribution/leap/42.3/repo/oss/suse/repodata # joe repomd.xml
reposrv:.../distribution/leap/42.3/repo/oss/suse/repodata # diff repomd.xml.orig repomd.xml
3c3
&lt;   &lt;revision&gt;1500484332&lt;/revision&gt;
---
<span class="quote">&gt;   &lt;revision&gt;1500484333&lt;/revision&gt;</span >


user&#64;reposrv:~&gt; gpg .../distribution/leap/42.3/repo/oss/suse/repodata/repomd.xml.asc
gpg: Signatur vom Mi 19 Jul 2017 20:57:50 CEST mittels RSA-Schlüssel ID 3DBDC284
gpg: FALSCHE Signatur von &quot;openSUSE Project Signing Key &lt;<a href="mailto:opensuse&#64;opensuse.org">opensuse&#64;opensuse.org</a>&gt;&quot; [unbekannt]



client:~ # zypper cc -a
All repositories have been cleaned up.
client:~ # zypper ref --repo reposrv_oss 
Retrieving repository 'Reposrv Oss' metadata ...............................[done]
Building repository 'Reposrv Oss' cache ....................................[done]
Specified repositories have been refreshed.



content
-------
reposrv:.../latest/distribution/leap/42.3/repo/oss # diff content.orig content
1c1
&lt; CONTENTSTYLE  11
---
<span class="quote">&gt; CONTENTSTYLE  11 </span >

user&#64;reposrv:~&gt; gpg .../latest/distribution/leap/42.3/repo/oss/content.asc
gpg: Signatur vom Mi 19 Jul 2017 20:57:50 CEST mittels RSA-Schlüssel ID 3DBDC284
gpg: FALSCHE Signatur von &quot;openSUSE Project Signing Key &lt;<a href="mailto:opensuse&#64;opensuse.org">opensuse&#64;opensuse.org</a>&gt;&quot; [unbekannt]



client:~ # zypper cc -a
All repositories have been cleaned up.
client:~ # zypper ref --repo reposrv_oss 
Retrieving repository 'Reposrv Oss' metadata ---------------------------------------[\]
Signature verification failed for file 'content' from repository 'Reposrv Oss'.

    Note: Signing data enables the recipient to verify that no modifications occurred after the data
    were signed. Accepting data with no, wrong or unknown signature can lead to a corrupted system
    and in extreme cases even to a system compromise.

    Note: File 'content' is the repositories master index file. It ensures the integrity of the
    whole repo.

    Warning: This file was modified after it has been signed. This may have been a malicious change,
    so it might not be trustworthy anymore! You should not continue unless you know it's safe.

Signature verification failed for file 'content' from repository 'Reposrv Oss'. Continue? [yes/no] (no):</pre>
    </div><div id="c44" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-08-02 15:26:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >&#64;Till: I guess the behavior is ok, because repomd.xml is most probably not used:

This is how your repo on the server looks like?
<span class="quote">&gt; reposrv:.../distribution/leap/42.3/repo/oss/
&gt;       content
&gt;       content.asc
&gt;       content.key
&gt;       suse/
&gt;           /repodata/
&gt;                    /repomd.xml
&gt;                    /repomd.xml.asc
&gt;                    /repomd.xml.key</span >

This layout actually contains 2 repositories. One in SUSETAGS fomat (content as master index), one in RPMMD (repomd.xml as master index). But you don't use both at the same time.


On a client: 
When probing the repositories URL to figure out the repositories type, ZYPP recognizes

<span class="quote">&gt;  &lt;URL&gt;/content
&gt;  &lt;URL&gt;/repodata/repomd.xml</span >

So if your URL is ...leap/42.3/repo/oss, ZYPP will probe it as type SUSETAGS and use content as master index.

It the URL is ...leap/42.3/repo/oss/suse, ZYPP wouLd probe it as RPMMD and use repomd.xml as master index.


Your comment does not tell how the repository URL in the 'repomd.xml' case looked like. You can call 'zypper -v ref' to see which index files are actually downloaded.</pre>
    </div><div id="c45" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Till Dörges</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-08-03 06:29:29 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Michael Andres from <a href="show_bug.cgi?id=1045735#c44">comment #44</a>)

<span class="quote">&gt; This is how your repo on the server looks like?</span >

Yes.

<span class="quote">&gt; So if your URL is ...leap/42.3/repo/oss, ZYPP will probe it as type SUSETAGS
&gt; and use content as master index.
&gt; 
&gt; It the URL is ...leap/42.3/repo/oss/suse, ZYPP wouLd probe it as RPMMD and
&gt; use repomd.xml as master index.</span >

client:~ # tail -1 /etc/zypp/repos.d/reposrv_oss.repo 
type=yast2

client:~ # zypper -v ref --repo reposrv_oss
[...]
Retrieving: content....................................................[done]
Retrieving: media......................................................[done]
Repository 'Reposrv Oss' is up to date.                                                                           
Specified repositories have been refreshed.


Thank you very much for the explanation. Now I understand, why only 1 master index is used.</pre>
    </div><div id="c46" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-08-20 10:34:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Fixes submitted for 
SLES12-SP1      libzypp 15.25.16   zypper 1.12.58    (MR#170535)</pre>
    </div><div id="c49" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-08-24 15:36:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Amended the fix for SP1; included updated translations and rephrased some libzypp code, so swig understands it. SLE12* swig does not fully understand C++11. Without this libzypp-bindings won't build.

SLES12-SP1      libzypp 15.25.16   zypper 1.12.58    (MR#170947)
SLES12          libzypp 14.45.16   zypper 1.11.70    (MR#170948)</pre>
    </div><div id="c50" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-08-30 10:15:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:2555-1: An update that solves four vulnerabilities and has 10 fixes is now available.

Category: security (important)
Bug References: 1037210,1038984,1045735,1048315,1054088,1070851,1076192,1088705,1091624,1092413,1096803,1100028,1101349,1102429
CVE References: CVE-2017-7435,CVE-2017-7436,CVE-2017-9269,CVE-2018-7685
Sources used:
SUSE Linux Enterprise Server for SAP 12-SP1 (src):    libzypp-15.25.17-46.22.1, zypper-1.12.59-46.10.1
SUSE Linux Enterprise Server 12-SP1-LTSS (src):    libzypp-15.25.17-46.22.1, zypper-1.12.59-46.10.1</pre>
    </div><div id="c52" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-09-11 16:09:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:2688-1: An update that solves four vulnerabilities and has 13 fixes is now available.

Category: security (important)
Bug References: 1036304,1037210,1038984,1045735,1048315,1054088,1070851,1076192,1079334,1088705,1091624,1092413,1096803,1099847,1100028,1101349,1102429
CVE References: CVE-2017-7435,CVE-2017-7436,CVE-2017-9269,CVE-2018-7685
Sources used:
SUSE Linux Enterprise Server 12-LTSS (src):    libzypp-14.45.17-2.82.1, zypper-1.11.70-2.69.2</pre>
    </div><div id="c53" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-09-11 19:09:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:2690-1: An update that solves two vulnerabilities and has 26 fixes is now available.

Category: security (important)
Bug References: 1036304,1041178,1043166,1045735,1058515,1066215,1070770,1070851,1082318,1084525,1088037,1088705,1091624,1092413,1093103,1096217,1096617,1096803,1099847,1100028,1100095,1100427,1101349,1102019,1102429,408814,428822,907538
CVE References: CVE-2017-9269,CVE-2018-7685
Sources used:
SUSE Linux Enterprise Module for Development Tools 15 (src):    libsolv-0.6.35-3.5.2
SUSE Linux Enterprise Module for Basesystem 15 (src):    libsolv-0.6.35-3.5.2, libzypp-17.6.4-3.10.1, zypper-1.14.10-3.7.1</pre>
    </div><div id="c54" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-09-14 16:11:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:2716-1: An update that solves two vulnerabilities and has 12 fixes is now available.

Category: security (important)
Bug References: 1036304,1045735,1049825,1070851,1076192,1079334,1088705,1091624,1092413,1096803,1099847,1100028,1101349,1102429
CVE References: CVE-2017-9269,CVE-2018-7685
Sources used:
SUSE OpenStack Cloud 7 (src):    libzypp-16.17.20-27.52.1, zypper-1.13.45-18.33.1
SUSE Linux Enterprise Server for SAP 12-SP2 (src):    libzypp-16.17.20-27.52.1, zypper-1.13.45-18.33.1
SUSE Linux Enterprise Server 12-SP2-LTSS (src):    libzypp-16.17.20-27.52.1, zypper-1.13.45-18.33.1
SUSE Enterprise Storage 4 (src):    libzypp-16.17.20-27.52.1, zypper-1.13.45-18.33.1
OpenStack Cloud Magnum Orchestration 7 (src):    libzypp-16.17.20-27.52.1, zypper-1.13.45-18.33.1</pre>
    </div><div id="c55" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-09-17 10:08:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >openSUSE-SU-2018:2739-1: An update that solves two vulnerabilities and has 26 fixes is now available.

Category: security (important)
Bug References: 1036304,1041178,1043166,1045735,1058515,1066215,1070770,1070851,1082318,1084525,1088037,1088705,1091624,1092413,1093103,1096217,1096617,1096803,1099847,1100028,1100095,1100427,1101349,1102019,1102429,408814,428822,907538
CVE References: CVE-2017-9269,CVE-2018-7685
Sources used:
openSUSE Leap 15.0 (src):    libsolv-0.6.35-lp150.2.3.1, libzypp-17.6.4-lp150.2.3.1, zypper-1.14.10-lp150.2.3.1</pre>
    </div><div id="c56" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-09-24 10:12:47 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:2814-1: An update that solves two vulnerabilities and has 11 fixes is now available.

Category: security (important)
Bug References: 1036304,1045735,1049825,1070851,1076192,1088705,1091624,1092413,1096803,1099847,1100028,1101349,1102429
CVE References: CVE-2017-9269,CVE-2018-7685
Sources used:
SUSE Linux Enterprise Software Development Kit 12-SP3 (src):    libzypp-16.17.20-2.33.2
SUSE Linux Enterprise Server 12-SP3 (src):    libzypp-16.17.20-2.33.2, zypper-1.13.45-21.21.2
SUSE Linux Enterprise Desktop 12-SP3 (src):    libzypp-16.17.20-2.33.2, zypper-1.13.45-21.21.2
SUSE CaaS Platform ALL (src):    libzypp-16.17.20-2.33.2, zypper-1.13.45-21.21.2
SUSE CaaS Platform 3.0 (src):    libzypp-16.17.20-2.33.2, zypper-1.13.45-21.21.2</pre>
    </div><div id="c57" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Swamp Workflow Management</span>
</span>
        </span>

        <span class="bz_comment_time">
          2018-10-18 17:14:32 UTC
        </span>
      </div>



<pre class="bz_comment_text" >SUSE-SU-2018:2716-2: An update that solves two vulnerabilities and has 12 fixes is now available.

Category: security (important)
Bug References: 1036304,1045735,1049825,1070851,1076192,1079334,1088705,1091624,1092413,1096803,1099847,1100028,1101349,1102429
CVE References: CVE-2017-9269,CVE-2018-7685
Sources used:
SUSE Linux Enterprise Server 12-SP2-BCL (src):    libzypp-16.17.20-27.52.1, zypper-1.13.45-18.33.1</pre>
    </div><div id="c58" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=1045735#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Andres</span>
</span>
        </span>

        <span class="bz_comment_time">
          2020-06-27 19:39:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Guess we forgot to close it.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=1045735">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=1045735">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=1045735">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <!--a id="login_link_bottom" href="show_bug.cgi?id=1045735&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a-->
  <a id="login_link_bottom" href="show_bug.cgi?id=1045735&amp;GoAheadAndLogIn=1">Log In</a>


  <form action="show_bug.cgi?id=1045735" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_bottom"
        onsubmit="return check_mini_login_fields( '_bottom' );"
  >
    <input id="Bugzilla_login_bottom" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_bottom" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_bottom" value="password"
           title="Password"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_bottom">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_bottom');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_bottom');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
<li id="forgot_container_bottom">
  <span class="separator">| </span>
  <a id="forgot_link_bottom" href="https://idp-portal.suse.com/univention/self-service/#page=passwordreset">Forgot Password</a>
</li>
</ul>
  </li>

  
    


  <form id="testopia_helper_frm"></form><ul class="links">
    <li>Legal: </li>
    <li><a href="http://en.opensuse.org/Terms_of_site">openSUSE</a></li>
    <li><a href="https://www.suse.com/company/legal/">SUSE</a></li>
  </ul>
</ul>

  <div class="outro"></div>
</div>


</body>
</html>