<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>c2905409c20c8692d4396b8531b09e7ec81fa3fb - platform/frameworks/opt/net/wifi - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/frameworks/opt/net/wifi/%2B/c2905409c20c8692d4396b8531b09e7ec81fa3fb">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/frameworks/">frameworks</a> / <a class="Breadcrumbs-crumb" href="/platform/frameworks/opt/">opt</a> / <a class="Breadcrumbs-crumb" href="/platform/frameworks/opt/net/">net</a> / <a class="Breadcrumbs-crumb" href="/platform/frameworks/opt/net/wifi/">wifi</a> / <span class="Breadcrumbs-crumb">c2905409c20c8692d4396b8531b09e7ec81fa3fb</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>c2905409c20c8692d4396b8531b09e7ec81fa3fb</td><td><span>[<a href="/platform/frameworks/opt/net/wifi/+log/c2905409c20c8692d4396b8531b09e7ec81fa3fb">log</a>]</span> <span>[<a href="/platform/frameworks/opt/net/wifi/+archive/c2905409c20c8692d4396b8531b09e7ec81fa3fb.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Samuel Tan &lt;samueltan@google.com&gt;</td><td>Tue Jul 19 17:35:57 2016 -0700</td></tr><tr><th class="Metadata-title">committer</th><td>Adam Seaton &lt;aseaton@google.com&gt;</td><td>Thu Aug 25 11:49:32 2016 -0700</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb/">1957b9cabef53dffc9cd78142eafefdab52713e4</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb%5E">eaebcd45c5d1eaa54e585f3537e3adfc81414d40</a> <span>[<a href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">ANQPFactory: catch all potential parsing errors

Fix Merge Conflict for nyc-release

The ANQP Element parsing code that parses untrusted data broadcasted
by APs is currently untested, and might contain errors that will
trigger exceptions that can crash the system service (e.g. null pointer
exceptions).

To contain this risk, catch all possible exceptions from the invoking
ANQP element parsing code from ANQPFactory, and throw them again
as ProtocolExceptions, which users of ANQPFactory already catch.

BUG: 30230534
Change-Id: <a href="https://android-review.googlesource.com/#/q/Icaba02c0e6739d94482cf4a5e704b59f8d4105b4">Icaba02c0e6739d94482cf4a5e704b59f8d4105b4</a>
</pre><ul class="DiffTree"><li><a href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb/service/java/com/android/server/wifi/anqp/ANQPFactory.java">service/java/com/android/server/wifi/anqp/ANQPFactory.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb%5E%21/#F0">diff</a>]</span></li></ul><div class="DiffSummary">1 file changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 1957b9cabef53dffc9cd78142eafefdab52713e4</div><ol class="FileList"><li class="FileList-item FileList-item--gitTree" title="Tree - service/"><a class="FileList-itemLink" href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb/service/">service/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tests/"><a class="FileList-itemLink" href="/platform/frameworks/opt/net/wifi/+/c2905409c20c8692d4396b8531b09e7ec81fa3fb/tests/">tests/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>