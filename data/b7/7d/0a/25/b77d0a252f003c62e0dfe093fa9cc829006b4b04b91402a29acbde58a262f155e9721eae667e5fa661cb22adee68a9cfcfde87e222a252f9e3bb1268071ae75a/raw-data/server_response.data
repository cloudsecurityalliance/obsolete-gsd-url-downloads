<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+index" />

    <meta charset="UTF-8" />
    <title>Bug #720095 “vsftpd causes a vmalloc space leak in Lucid” : Bugs : linux package : Ubuntu</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/720095" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/720095/bug.atom" title="Bug 720095 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="SRU justification:

Impact: With activated network namespace (CONFIG_NET_NS) support it is possible to create new namespaces much faster than cleaning them up. This can lead to memory pressure and in the case of vsftp it is easily possible to bring down the server by just repeatedly connecting to it.

Fix: The issue was fixed by a long series of changes to make cleanup quicker. The vast amount of changes makes them unsuited for SRU. So it was decided that the safest way for a 2.6.32 based ker..." />
      <meta property="og:description" content="SRU justification:

Impact: With activated network namespace (CONFIG_NET_NS) support it is possible to create new namespaces much faster than cleaning them up. This can lead to memory pressure and in the case of vsftp it is easily possible to bring down the server by just repeatedly connecting to it.

Fix: The issue was fixed by a long series of changes to make cleanup quicker. The vast amount of changes makes them unsuited for SRU. So it was decided that the safest way for a 2.6.32 based ker..." />
    

    
    
      <meta property="og:title" content="Bug #720095 “vsftpd causes a vmalloc space leak in Lucid” : Bugs : linux package : Ubuntu" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/720095" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["a11y", "appstream", "bionic", "bisect-done", "bitesize", "cherry-pick", "community-security", "desktop-file", "disco", "dist-upgrade", "focal", "ftbfs", "groovy", "hirsute", "hw-specific", "impish", "jammy", "kernel-bug", "manpage", "metabug", "multiarch", "needs-bisect", "needs-design", "needs-packaging", "needs-reassignment", "package-conflict", "packaging", "patch", "patch-accepted-debian", "patch-accepted-upstream", "patch-forwarded-debian", "patch-forwarded-upstream", "patch-needswork", "patch-rejected", "patch-rejected-debian", "patch-rejected-upstream", "performing-bisect", "py2-removal", "qt4-removal", "regression-proposed", "regression-release", "regression-update", "string-fix", "suspend-resume", "systemd-boot", "testcase", "touch", "unmetdeps", "upgrade-software-version", "verification-done-bionic", "verification-done-focal", "verification-done-groovy", "verification-done-hirsute", "verification-done-impish", "verification-done-xenial", "verification-failed-bionic", "verification-failed-groovy", "verification-failed-impish", "verification-failed-xenial", "verification-needed-bionic", "verification-needed-focal", "verification-needed-groovy", "verification-needed-hirsute", "verification-needed-impish", "verification-needed-trusty", "verification-needed-xenial", "wayland", "xenial"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/ubuntu"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/49558155/64_logo.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/ubuntu">Ubuntu</a><br /><a href="https://launchpad.net/ubuntu/+source/linux">linux package</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/ubuntu/+source/linux">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/ubuntu/+source/linux">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/ubuntu/+source/linux">Bugs</a></li>
      
      
    
    
      
      
      <li class="specifications disabled-tab"><span>Blueprints</span></li>
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/ubuntu/+source/linux">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/ubuntu/+source/linux">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    vsftpd causes a vmalloc space leak in Lucid
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #720095 reported by
      <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis</a>
      <time title="2011-02-16 14:39:50 UTC" datetime="2011-02-16T14:39:50.013545+00:00">on 2011-02-16</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">42</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 6 people</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary841832">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary841832">
        <span class="yui3-activator-data-box">
            <a class="sprite package-source" href="https://bugs.launchpad.net/ubuntu/+source/linux" title="Latest release: 5.11.0-40.44, uploaded to main on 2021-10-20 14:31:33.255814+00:00 by Stefan Bader (smb), maintained by Ubuntu Kernel Team (kernel-team)">linux (Ubuntu)</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+editstatus" style="float: left" class="value statusINVALID">Invalid</a>
          <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceMEDIUM">Medium</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary841832">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task841832">
     <td colspan="7"><form action="/ubuntu/+source/linux/+bug/720095/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ubuntu/+source/linux">linux (Ubuntu)</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2011-02-16 14:39:50 UTC" datetime="2011-02-16T14:39:50.013545+00:00">2011-02-16</time>
      </td>
    </tr>
    
    
    
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2011-03-30 12:34:12 UTC" datetime="2011-03-30T12:34:12.051889+00:00">2011-03-30</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ubuntu_linux.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ubuntu_linux.target.option.package" name="ubuntu_linux.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ubuntu_linux.target.distribution" name="ubuntu_linux.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ubuntu_linux.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ubuntu_linux.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="linux" id="ubuntu_linux.target.package"
                         name="ubuntu_linux.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_linux.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_linux.target.package');
              var select_menu = Y.DOM.byId('ubuntu_linux.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_linux-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionPackage", "extra_no_results_message": null, "selected_value": "linux", "show_assign_me_button": false, "show_widget_id": "show-widget-ubuntu_linux-target-package", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "ubuntu_linux.target.package"};
        var show_widget_id = 'show-widget-ubuntu_linux-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" id="ubuntu_linux.target.option.product" name="ubuntu_linux.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ubuntu_linux.target.product"
                         name="ubuntu_linux.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ubuntu_linux.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_linux.target.product');
              var select_menu = Y.DOM.byId('ubuntu_linux.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_linux-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a project", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "Product", "extra_no_results_message": null, "selected_value": null, "show_assign_me_button": false, "show_widget_id": "show-widget-ubuntu_linux-target-product", "step_title": "Search", "assign_me_text": "Pick me", "input_element": "ubuntu_linux.target.product"};
        var show_widget_id = 'show-widget-ubuntu_linux-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_linux.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ubuntu_linux.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ubuntu_linux.status" name="ubuntu_linux.status" size="1" >
<option selected="selected" value="Invalid">Invalid</option>
</select>
</div>
<input name="ubuntu_linux.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceMEDIUM">Medium</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_linux.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="ubuntu_linux.assignee.assign_to_nobody" name="ubuntu_linux.assignee.option" value="ubuntu_linux.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_linux.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ubuntu_linux.assignee.assign_to_me" name="ubuntu_linux.assignee.option" value="ubuntu_linux.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_linux.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ubuntu_linux.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ubuntu_linux.comment_on_change" name="ubuntu_linux.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary874550">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ubuntu/lucid/+source/linux/+bug/720095/+editstatus">
        &#8203;
      </a>
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/ubuntu/lucid/+source/linux">Lucid</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ubuntu/lucid/+source/linux/+bug/720095/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ubuntu/lucid/+source/linux/+bug/720095/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceMEDIUM">Medium</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary874550">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~smb">Stefan Bader</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task874550">
     <td colspan="7"><form action="/ubuntu/lucid/+source/linux/+bug/720095/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ubuntu/lucid/+source/linux">linux (Ubuntu Lucid)</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2011-03-30 12:29:14 UTC" datetime="2011-03-30T12:29:14.233193+00:00">2011-03-30</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2011-03-30 12:32:57 UTC" datetime="2011-03-30T12:32:57.217757+00:00">2011-03-30</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2011-03-30 12:32:57 UTC" datetime="2011-03-30T12:32:57.219764+00:00">2011-03-30</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2011-03-30 12:32:57 UTC" datetime="2011-03-30T12:32:57.217757+00:00">2011-03-30</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2011-05-30 05:17:09 UTC" datetime="2011-05-30T05:17:09.618033+00:00">2011-05-30</time>
      </td>
    </tr>
  </table>
  <div class="field">
    
    <table>
      <tr>
        <td>
          <label for="ubuntu_lucid_linux.sourcepackagename">Package</label>
        </td>
      </tr>
      <tr>
        <td>
          


    <input type="text" value="linux" id="ubuntu_lucid_linux.sourcepackagename"
                         name="ubuntu_lucid_linux.sourcepackagename" size="20"
                         maxlength=""
                         onKeyPress="" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ubuntu_lucid_linux.sourcepackagename');
              var select_menu = Y.DOM.byId('ubuntu_lucid_linux.sourcepackagename-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ubuntu_lucid_linux-sourcepackagename" href="#">Find&hellip;</a>)</span>
    <script>
  LPJS.use('node', 'lp.app.picker', function(Y) {
      var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionSourcePackage", "extra_no_results_message": null, "selected_value": "linux", "show_assign_me_button": false, "show_widget_id": "show-widget-ubuntu_lucid_linux-sourcepackagename", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "ubuntu_lucid_linux.sourcepackagename"};
      var distribution_name = '';
      var distribution_id = '';
      var distroseries_id = '';
      if (distribution_name !== '') {
          config.getContextPath = function() {
              return '/' + distribution_name;
          }
      } else if (distribution_id !== '') {
          config.getContextPath = function() {
              return '/' + Y.DOM.byId(distribution_id).value;
          };
      } else if (distroseries_id !== '') {
          config.getContextPath = function() {
              return '/' + Y.DOM.byId(distroseries_id).value.split('/', 2)[0];
          };
      }
      var show_widget_id = 'show-widget-ubuntu_lucid_linux-sourcepackagename';
      Y.on('domready', function(e) {
          Y.lp.app.picker.addPicker(config, show_widget_id);
      });
  });
  </script>
  



          
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_lucid_linux.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ubuntu_lucid_linux.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ubuntu_lucid_linux.status" name="ubuntu_lucid_linux.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ubuntu_lucid_linux.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceMEDIUM">Medium</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ubuntu_lucid_linux.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ubuntu_lucid_linux.assignee.assign_to_me" name="ubuntu_lucid_linux.assignee.option" value="ubuntu_lucid_linux.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ubuntu_lucid_linux.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="ubuntu_lucid_linux.assignee.assigned_to" name="ubuntu_lucid_linux.assignee.option" value="ubuntu_lucid_linux.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="ubuntu_lucid_linux.assignee.assigned_to">
              Stefan Bader (smb)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ubuntu_lucid_linux.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ubuntu_lucid_linux.comment_on_change" name="ubuntu_lucid_linux.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>SRU justification:</p>
<p>Impact: With activated network namespace (CONFIG_NET_NS) support it is possible to create new namespaces much faster than cleaning them up. This can lead to memory pressure and in the case of vsftp it is easily possible to bring down the server by just repeatedly connecting to it.</p>
<p>Fix: The issue was fixed by a long series of changes to make cleanup quicker. The vast amount of changes makes them unsuited for SRU. So it was decided that the safest way for a 2.6.32 based kernel is to turn that feature off (it was considered experimental until 2.6.37 anyway).</p>
<p>Testcase: Se report.</p>
<p>---</p>
<p>A simple stress test conducted on a KVM guest running standard updated Lucid with vsftpd demonstrates that memory is continuously used up until OOM Killer starts to protect the system (after ~12 min on my system).  If test is terminated before that point is reached then memory is freed only after several hours.  If vsftpd is stopped then memory is freed (after ~45 min on my system).</p>
<p>This does not occur with the 2.6.35 kernel (LTS backported kernel).</p>
<p>The test is started in this way:</p>
<p>$ for i in 1 2 3 4 5 6 7 8 ; do ./feedftp $i &gt;/dev/null &amp; done</p>
<p>What is observed during the test is that /proc/vmallocinfo grows continually with lines like the following being added:</p>
<p>0xffffe8ffff800<wbr />000-0xffffe8fff<wbr />fa00000 2097152 pcpu_get_<wbr />vm_areas+<wbr />0x0/0x790 vmalloc<br />
0xffffe8ffffa00<wbr />000-0xffffe8fff<wbr />fc00000 2097152 pcpu_get_<wbr />vm_areas+<wbr />0x0/0x790 vmalloc<br />
0xffffe8ffffc00<wbr />000-0xffffe8fff<wbr />fe00000 2097152 pcpu_get_<wbr />vm_areas+<wbr />0x0/0x790 vmalloc</p>
<p>Attached:</p>
<p>- test script (see feedftp)<br />
- tarball containing the proc file at various times during the test (see vmallocinfo.32.tar)<br />
- dmesg output showing OOM Killer at work (see dmesg-oom.32.txt)</p>
<p>May be related: <a rel="nofollow" href="https://bugs.launchpad.net/ubuntu/+source/vsftpd/+bug/682865">https:/<wbr />/bugs.launchpad<wbr />.net/ubuntu/<wbr />+source/<wbr />vsftpd/<wbr />+bug/682865</a></p>
<p>=========</p>
<p>ProblemType: Bug<br />
DistroRelease: Ubuntu 10.04<br />
Package: linux-image-<wbr />2.6.32-<wbr />28-server (not installed)<br />
Regression: No<br />
Reproducible: Yes<br />
ProcVersionSign<wbr />ature: User Name 2.6.32-28.55-server 2.6.32.27+drm33.12<br />
Uname: Linux 2.6.32-28-server x86_64<br />
AlsaDevices: Error: command [&#x27;ls&#x27;, &#x27;-l&#x27;, &#x27;/dev/snd/&#x27;] failed with exit code 2: ls: cannot access /dev/snd/: No such file or directory<br />
AplayDevices: Error: [Errno 2] No such file or directory<br />
Architecture: amd64<br />
ArecordDevices: Error: [Errno 2] No such file or directory<br />
CurrentDmesg: [   12.360149] eth0: no IPv6 routers present<br />
Date: Wed Feb 16 14:00:19 2011<br />
Lspci: Error: [Errno 2] No such file or directory<br />
Lsusb: Error: [Errno 2] No such file or directory<br />
MachineType: Bochs Bochs<br />
PciMultimedia:</p>
<p>ProcCmdLine: root=UUID=<wbr />7bbf58be-<wbr />9c5f-4113-<wbr />ad1b-4611fd131d<wbr />33 ro<br />
ProcEnviron:<br />
&nbsp;LANG=en_US.UTF-8<br />
&nbsp;SHELL=/bin/bash<br />
SourcePackage: linux<br />
dmi.bios.date: 01/01/2007<br />
dmi.bios.vendor: Bochs<br />
dmi.bios.version: Bochs<br />
dmi.chassis.type: 1<br />
dmi.chassis.vendor: Bochs<br />
dmi.modalias: dmi:bvnBochs:<wbr />bvrBochs:<wbr />bd01/01/<wbr />2007:svnBochs:<wbr />pnBochs:<wbr />pvr:cvnBochs:<wbr />ct1:cvr:<br />
dmi.product.name: Bochs<br />
dmi.sys.vendor: Bochs</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          <span>See <a href="comments/0">original description</a></span>
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="unofficial-tag" href="/ubuntu/+source/linux/+bugs?field.tag=amd64">amd64</a>
            <a class="unofficial-tag" href="/ubuntu/+source/linux/+bugs?field.tag=apport-bug">apport-bug</a>
            <a class="unofficial-tag" href="/ubuntu/+source/linux/+bugs?field.tag=kernel-key">kernel-key</a>
            <a class="unofficial-tag" href="/ubuntu/+source/linux/+bugs?field.tag=lucid">lucid</a>
            <a class="unofficial-tag" href="/ubuntu/+source/linux/+bugs?field.tag=needs-upstream-testing">needs-upstream-testing</a>
            <a class="unofficial-tag" href="/ubuntu/+source/linux/+bugs?field.tag=verification-done">verification-done</a>
          </span>
          
          <a href="+edit" title="Edit tags" id="tags-trigger" class="sprite edit action-icon">Edit</a>
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          

            <div id="bug-branches">
              <h2>Related branches</h2>

              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ubuntu-branches/ubuntu/lucid/linux-ec2/lucid-proposed" class="sprite branch">lp:ubuntu/lucid-proposed/linux-ec2</a>
  
  
</div>



              
              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ubuntu-branches/ubuntu/lucid/linux-mvl-dove/lucid-proposed" class="sprite branch">lp:ubuntu/lucid-proposed/linux-mvl-dove</a>
  
  
</div>



              
              
                

 

 <div class="buglink-summary">

  <a href="https://code.launchpad.net/~ubuntu-branches/ubuntu/maverick/linux-mvl-dove/maverick-proposed" class="sprite branch">lp:ubuntu/maverick-proposed/linux-mvl-dove</a>
  
  
</div>



              
            </div>
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2010-4263" title="The igb_receive_skb function in drive...">2010-4263</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2010-4342" title="The aun_incoming function in net/econ...">2010-4342</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2010-4529" title="Integer underflow in the irda_getsock...">2010-4529</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2011-0726" title="The do_task_stat function in fs/proc/...">2011-0726</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2011-1013" title="Integer signedness error in the drm_m...">2011-1013</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2011-1016" title="The Radeon GPU drivers in the Linux k...">2011-1016</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2011-1019" title="The dev_load function in net/core/dev...">2011-1019</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T14:39:50.013545+00:00" title="2011-02-16 14:39:50 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853929/+files/BootDmesg.txt">BootDmesg.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853929">Edit</a>
        (23.1 KiB,
        text/plain; charset="utf-8")
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853930/+files/ProcCpuinfo.txt">ProcCpuinfo.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853930">Edit</a>
        (1.9 KiB,
        text/plain; charset="utf-8")
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853931/+files/ProcInterrupts.txt">ProcInterrupts.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853931">Edit</a>
        (1.9 KiB,
        text/plain; charset="utf-8")
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853932/+files/ProcModules.txt">ProcModules.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853932">Edit</a>
        (620 bytes,
        text/plain; charset="utf-8")
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853933/+files/UdevDb.txt">UdevDb.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853933">Edit</a>
        (57.7 KiB,
        text/plain; charset="utf-8")
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853934/+files/UdevLog.txt">UdevLog.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853934">Edit</a>
        (125.4 KiB,
        text/plain; charset="utf-8")
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T14:41:48.285853+00:00" title="2011-02-16 14:41:48 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853959/+files/feedftp">feedftp</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853959">Edit</a>
        (531 bytes,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T14:42:17.656064+00:00" title="2011-02-16 14:42:17 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853960/+files/dmesg-oom.32.txt">dmesg-oom.32.txt</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853960">Edit</a>
        (245.6 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T14:42:42.045643+00:00" title="2011-02-16 14:42:42 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853961/+files/vmallocinfo.32.tar">vmallocinfo.32.tar</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/1853961">Edit</a>
        (410.0 KiB,
        application/x-tar)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
    
    <time title="2011-02-16 15:12:22 UTC" datetime="2011-02-16T15:12:22.452513+00:00">on 2011-02-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~jeremyfoshee" class="sprite person">Jeremy Foshee (jeremyfoshee)</a>
    
    <time title="2011-02-16 15:16:21 UTC" datetime="2011-02-16T15:16:21.837389+00:00">on 2011-02-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: kernel-key
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
    
    <time title="2011-02-16 15:20:47 UTC" datetime="2011-02-16T15:20:47.380697+00:00">on 2011-02-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~apw" class="sprite person">Andy Whitcroft (apw)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T15:20:57.279325+00:00" title="2011-02-16 15:20:57 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>From the report it seems that this was broken in v2.6.32 and maybe fixed in v2.6.35.  The commit below sounds plausable and might be worth looking at:</p>
<p>&nbsp;&nbsp;commit 02b709df817c0db<wbr />174f249cc59e5f7<wbr />fd01b64d92<br />
&nbsp;&nbsp;Author: Nick Piggin &lt;email address hidden&gt;<br />
&nbsp;&nbsp;Date:   Mon Feb 1 22:25:57 2010 +1100</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;mm: purge fragmented percpu vmap blocks</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Improve handling of fragmented per-CPU vmaps.  We previously don&#x27;t free<br />
&nbsp;&nbsp;&nbsp;&nbsp;up per-CPU maps until all its addresses have been used and freed.  So<br />
&nbsp;&nbsp;&nbsp;&nbsp;fragmented blocks could fill up vmalloc space even if they actually had<br />
&nbsp;&nbsp;&nbsp;&nbsp;no active vmap regions within them.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add some logic to allow all CPUs to have these blocks purged in the case<br />
&nbsp;&nbsp;&nbsp;&nbsp;of failure to allocate a new vm area, and also put some logic to trim<br />
&nbsp;&nbsp;&nbsp;&nbsp;such blocks of a current CPU if we hit them in the allocation path (so<br />
&nbsp;&nbsp;&nbsp;&nbsp;as to avoid a large build up of them).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Christoph reported some vmap allocation failures when using the per CPU<br />
&nbsp;&nbsp;&nbsp;&nbsp;vmap APIs in XFS, which cannot be reproduced after this patch and the<br />
&nbsp;&nbsp;&nbsp;&nbsp;previous bug fix.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Cc: &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Cc: &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Tested-by: Christoph Hellwig &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Nick Piggin &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;--<br />
&nbsp;&nbsp;&nbsp;&nbsp;Signed-off-by: Linus Torvalds &lt;email address hidden&gt;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">From the report it seems that this was broken in v2.6.32 and maybe fixed in v2.6.35.  The commit below sounds plausable and might be worth looking at:

  commit 02b709df817c0db174f249cc59e5f7fd01b64d92
  Author: Nick Piggin &lt;npiggin@suse.de&gt;
  Date:   Mon Feb 1 22:25:57 2010 +1100

    mm: purge fragmented percpu vmap blocks
    
    Improve handling of fragmented per-CPU vmaps.  We previously don't free
    up per-CPU maps until all its addresses have been used and freed.  So
    fragmented blocks could fill up vmalloc space even if they actually had
    no active vmap regions within them.
    
    Add some logic to allow all CPUs to have these blocks purged in the case
    of failure to allocate a new vm area, and also put some logic to trim
    such blocks of a current CPU if we hit them in the allocation path (so
    as to avoid a large build up of them).
    
    Christoph reported some vmap allocation failures when using the per CPU
    vmap APIs in XFS, which cannot be reproduced after this patch and the
    previous bug fix.
    
    Cc: linux-mm@kvack.org
    Cc: stable@kernel.org
    Tested-by: Christoph Hellwig &lt;hch@infradead.org&gt;
    Signed-off-by: Nick Piggin &lt;npiggin@suse.de&gt;
    --
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - vsftpd causes memory leak in Lucid<br />+ vsftpd causes a vmalloc space leak in Lucid
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T16:09:51.425348+00:00" title="2011-02-16 16:09:51 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Seems we got this already in Lucid.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Seems we got this already in Lucid.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T16:26:22.473161+00:00" title="2011-02-16 16:26:22 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>It may be interesting if you had a spare disk and could do a bare metal installation of Lucid to repeat that test there.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">It may be interesting if you had a spare disk and could do a bare metal installation of Lucid to repeat that test there.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
    
    <time title="2011-02-16 17:11:39 UTC" datetime="2011-02-16T17:11:39.285562+00:00">on 2011-02-16</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in linux (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Stefan Bader (stefan-bader-canonical)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Medium
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Confirmed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~walter-richards-ec" class="sprite person">Walter Richards (walter-richards-ec)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T18:17:25.907309+00:00" title="2011-02-16 18:17:25 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi, we have this issue on bare metal installation as you say. On a Dell M605 (AMD processor) and on an IBM x3650 (Intel).</p>
<p>As well, it might help you to know that we tested it on SUSE with kernel 2.6.32-24, and the bug is not there.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, we have this issue on bare metal installation as you say. On a Dell M605 (AMD processor) and on an IBM x3650 (Intel).

As well, it might help you to know that we tested it on SUSE with kernel 2.6.32-24, and the bug is not there.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jef-goupil-ec" class="sprite person">Jef Goupil (jef-goupil-ec)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-16T20:02:34.915185+00:00" title="2011-02-16 20:02:34 UTC">on 2011-02-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi, I am working with Walter Richards. During our testing, we realized that it takes several hours to retrieve the memory after we stopped the ftp connections.<br />
On our 32GB Dell server, it took 5 hours to fill all the memory (until OOM kills at 2.1GB of free memory). Then, it took 8 hours before it started to retrieve the free memory, and then it took another 7 hours to completely get the 30GB back...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, I am working with Walter Richards. During our testing, we realized that it takes several hours to retrieve the memory after we stopped the ftp connections.
On our 32GB Dell server, it took 5 hours to fill all the memory (until OOM kills at 2.1GB of free memory). Then, it took 8 hours before it started to retrieve the free memory, and then it took another 7 hours to completely get the 30GB back...
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~petermatulis" class="sprite person">Peter Matulis (petermatulis)</a>
    
    <time title="2011-02-17 03:40:18 UTC" datetime="2011-02-17T03:40:18.162957+00:00">on 2011-02-17</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-17T18:18:42.060435+00:00" title="2011-02-17 18:18:42 UTC">on 2011-02-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Ok, so this is not really something conclusive yet, but it seems to me (when playing with that locally) that for that memory allocations to grow, there is no actual file transfer needed. Just looping through doing a connect and immediately disconnect again showed those 2M chunks growing. So I guess I can concentrate on that area further on.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Ok, so this is not really something conclusive yet, but it seems to me (when playing with that locally) that for that memory allocations to grow, there is no actual file transfer needed. Just looping through doing a connect and immediately disconnect again showed those 2M chunks growing. So I guess I can concentrate on that area further on.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-24T14:18:13.972724+00:00" title="2011-02-24 14:18:13 UTC">on 2011-02-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>So this is what I found out so far: whenever a client connects to vsftpd, it forks of a process to handle the connection. This is done in a way that also duplicates the network namespace (beside of the process namespace). This can actually be observed by the fact that every time that happens there is a message about &quot;lo: Disabled Privacy Extensions&quot; (which is slightly stupid to note as that is the default for lo). Anyway, so cloning the network namespace also sets up the snmp mib structures and those are allocated by pcpu.</p>
<p>The main problem seems to be that cleaning up those structures is done in Lucid for each interface on its own by putting it onto a work queue. This seems to be rather slow, so while the test case is running its seems the system is too busy with creating new namespaces than it is able to clean them up. Even after stopping the test this takes a while and because the way that vmalloc pcpu areas are handled can potentially stick even longer (the areas are not exclusively used by network namespace, something else may use parts of the area and the area cannot be cleaned up until the last user is gone).</p>
<p>Between 2.6.32 and 2.6.35, there was a series of changes that allowed to batch the cleanup of network namespace. The comment on one of those indicated that 4000 namespaces would have taken more than 7 minutes before and could be reduced to 44 seconds (at the price of an increased cpu load). I was able to backport all required changes and this seems to avoid the build up of the vmalloc area (I am not sure about that but it felt like the speed of connects and disconnects was lower). I am still reluctant to go that road because the required changes were somewhat big and the more gets changed, the higher chance to pick up some regression. Also the question is whether the test case models a realistic usage. To clarify, this is not a real leakage. It is a combination of specially allocated memory and slowness / complicated policy to free that allocations.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">So this is what I found out so far: whenever a client connects to vsftpd, it forks of a process to handle the connection. This is done in a way that also duplicates the network namespace (beside of the process namespace). This can actually be observed by the fact that every time that happens there is a message about "lo: Disabled Privacy Extensions" (which is slightly stupid to note as that is the default for lo). Anyway, so cloning the network namespace also sets up the snmp mib structures and those are allocated by pcpu.

The main problem seems to be that cleaning up those structures is done in Lucid for each interface on its own by putting it onto a work queue. This seems to be rather slow, so while the test case is running its seems the system is too busy with creating new namespaces than it is able to clean them up. Even after stopping the test this takes a while and because the way that vmalloc pcpu areas are handled can potentially stick even longer (the areas are not exclusively used by network namespace, something else may use parts of the area and the area cannot be cleaned up until the last user is gone).

Between 2.6.32 and 2.6.35, there was a series of changes that allowed to batch the cleanup of network namespace. The comment on one of those indicated that 4000 namespaces would have taken more than 7 minutes before and could be reduced to 44 seconds (at the price of an increased cpu load). I was able to backport all required changes and this seems to avoid the build up of the vmalloc area (I am not sure about that but it felt like the speed of connects and disconnects was lower). I am still reluctant to go that road because the required changes were somewhat big and the more gets changed, the higher chance to pick up some regression. Also the question is whether the test case models a realistic usage. To clarify, this is not a real leakage. It is a combination of specially allocated memory and slowness / complicated policy to free that allocations.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jef-goupil-ec" class="sprite person">Jef Goupil (jef-goupil-ec)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-24T20:50:47.400806+00:00" title="2011-02-24 20:50:47 UTC">on 2011-02-24</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi,<br />
our production servers have more than 250000 vsftpd connections for day:<br />
# zgrep CONNECT vsftpd.log.3.gz|wc -l<br />
&nbsp;260210<br />
which is about 3 connections per second. Each connection may have up to 200 file transferts. The testcase produces about 15 connections per seconds. It is 5 times more than our reality, but we can see the problem with only 3 connections per seconds.</p>
<p>Btw, for the &quot;Disabled Privacy Extensions&quot; messages, this can be avoided by disabling the ipv6 (ipv6.disable=1 on the grub command line).<br />
Thanks</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, 
our production servers have more than 250000 vsftpd connections for day:
# zgrep CONNECT vsftpd.log.3.gz|wc -l
 260210
which is about 3 connections per second. Each connection may have up to 200 file transferts. The testcase produces about 15 connections per seconds. It is 5 times more than our reality, but we can see the problem with only 3 connections per seconds.

Btw, for the "Disabled Privacy Extensions" messages, this can be avoided by disabling the ipv6 (ipv6.disable=1 on the grub command line). 
Thanks
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-02-25T17:48:38.533746+00:00" title="2011-02-25 17:48:38 UTC">on 2011-02-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The privacy extension message was more of a side note. It has been removed in current code (probably because of the limited use).</p>
<p>So the test case is making sense. And I was also beginning to think whether this could be seen as a security issue. As someone could bring down the server by doing many connects. It probably takes a while. Still...</p>
<p>Unfortunately I am not really happy with backports I mentioned before. They really seem to slow down the number of connects. So it could only be due to that, that the vmalloc space is not filled up quicker that it gets released. I think I have to do a few more experiments. Not sure it can be done but I would rather want to avoid making too large changes.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The privacy extension message was more of a side note. It has been removed in current code (probably because of the limited use).

So the test case is making sense. And I was also beginning to think whether this could be seen as a security issue. As someone could bring down the server by doing many connects. It probably takes a while. Still...

Unfortunately I am not really happy with backports I mentioned before. They really seem to slow down the number of connects. So it could only be due to that, that the vmalloc space is not filled up quicker that it gets released. I think I have to do a few more experiments. Not sure it can be done but I would rather want to avoid making too large changes.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-03-17T17:28:49.401578+00:00" title="2011-03-17 17:28:49 UTC">on 2011-03-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Unfortunately this got a bit hit by other issues I was looking at. So I did not really see any small change to improve things. I guess I need to reach out for help from upstream. Meanwhile there is this series of patches I backported from 2.6.35 that allow network namespaces to be cleaned up in batches. From my feeling this seems to slow down the rate I see the test tasks connecting, but this seems to be the same on 2.6.35. Maybe that is something one can live with.<br />
In order to give other people a chance to look at that I have prepared kernel packages and put them to:<br />
<a rel="nofollow" href="http://people.canonical.com/~smb/lucid-netnsbp">http://<wbr />people.<wbr />canonical.<wbr />com/~smb/<wbr />lucid-netnsbp</a><br />
Meanwhile I try to get some help...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Unfortunately this got a bit hit by other issues I was looking at. So I did not really see any small change to improve things. I guess I need to reach out for help from upstream. Meanwhile there is this series of patches I backported from 2.6.35 that allow network namespaces to be cleaned up in batches. From my feeling this seems to slow down the rate I see the test tasks connecting, but this seems to be the same on 2.6.35. Maybe that is something one can live with.
In order to give other people a chance to look at that I have prepared kernel packages and put them to:
http://people.canonical.com/~smb/lucid-netnsbp
Meanwhile I try to get some help...</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jef-goupil-ec" class="sprite person">Jef Goupil (jef-goupil-ec)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-03-21T19:36:01.725461+00:00" title="2011-03-21 19:36:01 UTC">on 2011-03-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi,<br />
I installed the following files from your site and rebooted:</p>
<p>/root/linux-<wbr />headers-<wbr />2.6.32-<wbr />31-server_<wbr />2.6.32-<wbr />31.60+netnsbp1_<wbr />amd64.deb<br />
/root/linux-<wbr />headers-<wbr />2.6.32-<wbr />31_2.6.<wbr />32-31.60+<wbr />netnsbp1_<wbr />all.deb<br />
/root/linux-<wbr />image-2.<wbr />6.32-31-<wbr />server_<wbr />2.6.32-<wbr />31.60+netnsbp1_<wbr />amd64.deb<br />
/root/linux-<wbr />libc-dev_<wbr />2.6.32-<wbr />31.60+netnsbp1_<wbr />amd64.deb<br />
/root/linux-<wbr />tools-2.<wbr />6.32-31_<wbr />2.6.32-<wbr />31.60+netnsbp1_<wbr />amd64.deb<br />
/root/linux-<wbr />tools-common_<wbr />2.6.32-<wbr />31.60+netnsbp1_<wbr />all.deb</p>
<p>Then, my ftp tests worked properly without using any free memory...  The file /proc/vmallocinfo stayed at around 5 lines (2 new lines only) (grep pcpu /proc/vmallocinfo). Before, it was constantly growing.</p>
<p>Seems it is fixed in this kernel level.</p>
<p>Thanks a lot!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, 
I installed the following files from your site and rebooted:

/root/linux-headers-2.6.32-31-server_2.6.32-31.60+netnsbp1_amd64.deb
/root/linux-headers-2.6.32-31_2.6.32-31.60+netnsbp1_all.deb
/root/linux-image-2.6.32-31-server_2.6.32-31.60+netnsbp1_amd64.deb
/root/linux-libc-dev_2.6.32-31.60+netnsbp1_amd64.deb
/root/linux-tools-2.6.32-31_2.6.32-31.60+netnsbp1_amd64.deb
/root/linux-tools-common_2.6.32-31.60+netnsbp1_all.deb

Then, my ftp tests worked properly without using any free memory...  The file /proc/vmallocinfo stayed at around 5 lines (2 new lines only) (grep pcpu /proc/vmallocinfo). Before, it was constantly growing.

Seems it is fixed in this kernel level.

Thanks a lot!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~jef-goupil-ec" class="sprite person">Jef Goupil (jef-goupil-ec)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-03-21T20:06:16.744657+00:00" title="2011-03-21 20:06:16 UTC">on 2011-03-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi,<br />
Sorry, I forgot to add a comment about the process netns: it was using a lot of CPU during my tests...:</p>
<p>&nbsp;&nbsp;PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;37 root      20   0         0       0      0 D  15  0.0   0:51.89 netns<br />
&nbsp;7218 root      20   0 33464 1328  888 D    1  0.0   0:00.03 vsftpd<br />
&nbsp;7220 root      20   0 33464 1328  888 D    1  0.0   0:00.03 vsftpd<br />
&nbsp;7221 root      20   0 33464 1328  888 D    1  0.0   0:00.03 vsftpd</p>
<p>I think this is what you were affraid of... slowing down.  I am not sure what would be the effect on my production servers.</p>
<p>Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi, 
Sorry, I forgot to add a comment about the process netns: it was using a lot of CPU during my tests...:

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                        
     37 root      20   0         0       0      0 D  15  0.0   0:51.89 netns     
 7218 root      20   0 33464 1328  888 D    1  0.0   0:00.03 vsftpd
 7220 root      20   0 33464 1328  888 D    1  0.0   0:00.03 vsftpd
 7221 root      20   0 33464 1328  888 D    1  0.0   0:00.03 vsftpd

I think this is what you were affraid of... slowing down.  I am not sure what would be the effect on my production servers.

Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-03-22T16:52:27.337100+00:00" title="2011-03-22 16:52:27 UTC">on 2011-03-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes, basically cleanup is rather done in batches, which takes more cpu but could also affect lock contention. That and the fact that it requires backporting several patches which may cause effects we don&#x27;t know of, causes me to be a bit reluctant about the changes.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes, basically cleanup is rather done in batches, which takes more cpu but could also affect lock contention. That and the fact that it requires backporting several patches which may cause effects we don't know of, causes me to be a bit reluctant about the changes.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-03-30T12:32:56.125678+00:00" title="2011-03-30 12:32:56 UTC">on 2011-03-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>After trying various approaches of backports which all seemed not really satisfying, it was decided that the safest way to go is to just turn off support for network namespaces. While this can have some impact on use-cases which try to containerize network, the feature was too immature to be turned on the first place. To use network namespaces in Lucid people should use the lts backport kernel.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">After trying various approaches of backports which all seemed not really satisfying, it was decided that the safest way to go is to just turn off support for network namespaces. While this can have some impact on use-cases which try to containerize network, the feature was too immature to be turned on the first place. To use network namespaces in Lucid people should use the lts backport kernel.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in linux (Ubuntu Lucid): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Stefan Bader (stefan-bader-canonical)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Medium
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Fix Committed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-03-30T12:34:10.966433+00:00" title="2011-03-30 12:34:10 UTC">on 2011-03-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The problem only occurs on Lucid with network namespaces turned on. So not valid for Maverick and later.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The problem only occurs on Lucid with network namespaces turned on. So not valid for Maverick and later.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in linux (Ubuntu): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        Stefan Bader (stefan-bader-canonical) &#8594; nobody
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Invalid
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
    
    <time title="2011-03-30 12:41:02 UTC" datetime="2011-03-30T12:41:02.203813+00:00">on 2011-03-30</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rachel-strangenoises" class="sprite person">Rachel Greenham (rachel-strangenoises)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-04-16T11:25:10.253607+00:00" title="2011-04-16 11:25:10 UTC">on 2011-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I think I&#x27;ve been experiencing this bug on a production vmware guest server running Lucid with vsftp being connected to frequently by client machines.</p>
<p>The thing is, this bug shows as being &quot;fix committed&quot; - and the implication I get from comment #18 is that the current production (ie: not backport) kernel has netns disabled. I&#x27;m  all up to date, with kernel 2.6.32-30-server, and still seeing elevated netns cpu usage, and a general slowdown of other activity which I believe is related.</p>
<p>Is there something we need to do specifically to ensure netns is disabled?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I think I've been experiencing this bug on a production vmware guest server running Lucid with vsftp being connected to frequently by client machines.

The thing is, this bug shows as being "fix committed" - and the implication I get from comment #18 is that the current production (ie: not backport) kernel has netns disabled. I'm  all up to date, with kernel 2.6.32-30-server, and still seeing elevated netns cpu usage, and a general slowdown of other activity which I believe is related.

Is there something we need to do specifically to ensure netns is disabled?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~clint-fewbar" class="sprite person">Clint Byrum (clint-fewbar)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-04-16T14:54:13+00:00" title="2011-04-16 14:54:13 UTC">on 2011-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/ubuntu/+source/linux/+bug/720095/comments/21">
                <strong>Re: [Bug 720095] Re: vsftpd causes a vmalloc space leak in Lucid</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Excerpts from Rachel Greenham&#x27;s message of Sat Apr 16 11:25:10 UTC 2011:<br />
<span class="foldable-quoted">
&gt; I think I&#x27;ve been experiencing this bug on a production vmware guest<br />
&gt; server running Lucid with vsftp being connected to frequently by client<br />
&gt; machines.<br />
&gt;<br />
&gt; The thing is, this bug shows as being &quot;fix committed&quot; - and the<br />
&gt; implication I get from comment #18 is that the current production (ie:<br />
&gt; not backport) kernel has netns disabled. I&#x27;m  all up to date, with<br />
&gt; kernel 2.6.32-30-server, and still seeing elevated netns cpu usage, and<br />
&gt; a general slowdown of other activity which I believe is related.<br />
&gt;<br />
&gt; Is there something we need to do specifically to ensure netns is<br />
&gt; disabled?
</span></p>
<p>Rachel, Fix Committed means that the developers have it in their tree<br />
but it hasn&#x27;t been released yet. Presumably this means that netns will<br />
be disabled in the next lucid kernel update.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Excerpts from Rachel Greenham's message of Sat Apr 16 11:25:10 UTC 2011:
&gt; I think I've been experiencing this bug on a production vmware guest
&gt; server running Lucid with vsftp being connected to frequently by client
&gt; machines.
&gt; 
&gt; The thing is, this bug shows as being "fix committed" - and the
&gt; implication I get from comment #18 is that the current production (ie:
&gt; not backport) kernel has netns disabled. I'm  all up to date, with
&gt; kernel 2.6.32-30-server, and still seeing elevated netns cpu usage, and
&gt; a general slowdown of other activity which I believe is related.
&gt; 
&gt; Is there something we need to do specifically to ensure netns is
&gt; disabled?

Rachel, Fix Committed means that the developers have it in their tree
but it hasn't been released yet. Presumably this means that netns will
be disabled in the next lucid kernel update.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rachel-strangenoises" class="sprite person">Rachel Greenham (rachel-strangenoises)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-04-18T06:20:45.877703+00:00" title="2011-04-18 06:20:45 UTC">on 2011-04-18</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Quite right, I should have noticed that. :-) I may just need to be patient then, although this being a production machine experiencing real problems since go-live with users connecting in volume may preclude patience. I had been considering embedding a java FTP server into our application instead, although now I&#x27;ve thought of that other advantages of doing so come to mind. :-) Late reply because commenting on this bug didn&#x27;t subscribe me to it like I expected. Will subscribe now.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Quite right, I should have noticed that. :-) I may just need to be patient then, although this being a production machine experiencing real problems since go-live with users connecting in volume may preclude patience. I had been considering embedding a java FTP server into our application instead, although now I've thought of that other advantages of doing so come to mind. :-) Late reply because commenting on this bug didn't subscribe me to it like I expected. Will subscribe now.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/23" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~pitti" class="sprite person">Martin Pitt (pitti)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-04-25T18:44:27.372650+00:00" title="2011-04-25 18:44:27 UTC">on 2011-04-25</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/ubuntu/+source/linux/+bug/720095/comments/23">
                <strong>Please test proposed package</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/23"> #23</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Accepted linux into lucid-proposed, the package will build now and be available in a few hours. Please test and give feedback here. See <a rel="nofollow" href="https://wiki.ubuntu.com/Testing/EnableProposed">https:/<wbr />/wiki.ubuntu.<wbr />com/Testing/<wbr />EnableProposed</a> for documentation how to enable and use -proposed. Thank you in advance!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Accepted linux into lucid-proposed, the package will build now and be available in a few hours. Please test and give feedback here. See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you in advance!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/24" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~sconklin" class="sprite person">Steve Conklin (sconklin)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-04-25T21:38:32.252260+00:00" title="2011-04-25 21:38:32 UTC">on 2011-04-25</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/24"> #24</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag &#x27;verification-<wbr />needed&#x27; to &#x27;verification-<wbr />done&#x27;.</p>
<p>See <a rel="nofollow" href="https://wiki.ubuntu.com/Testing/EnableProposed">https:/<wbr />/wiki.ubuntu.<wbr />com/Testing/<wbr />EnableProposed</a> for documentation how to enable and use -proposed. Thank you!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This bug is awaiting verification that the kernel in -proposed solves the problem. Please test the kernel and update this bug with the results. If the problem is solved, change the tag 'verification-needed' to 'verification-done'.

See https://wiki.ubuntu.com/Testing/EnableProposed for documentation how to enable and use -proposed. Thank you!
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: verification-needed-lucid
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/25" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rachel-strangenoises" class="sprite person">Rachel Greenham (rachel-strangenoises)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-04-26T10:53:30.336759+00:00" title="2011-04-26 10:53:30 UTC">on 2011-04-26</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/25"> #25</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Applied successfully to two test instances; can confirm absence of netns process, and nothing seems to be broken. :-) My problem is only exhibiting on a production server under load though, and while I can see elevated netns cpu usage most of the time it only becomes a problem intermittently, so it may take a little longer to install this there and see if it really helps.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Applied successfully to two test instances; can confirm absence of netns process, and nothing seems to be broken. :-) My problem is only exhibiting on a production server under load though, and while I can see elevated netns cpu usage most of the time it only becomes a problem intermittently, so it may take a little longer to install this there and see if it really helps.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~clint-fewbar" class="sprite person">Clint Byrum (clint-fewbar)</a>
    
    <time title="2011-04-26 17:12:12 UTC" datetime="2011-04-26T17:12:12.702763+00:00">on 2011-04-26</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: verification-done<br />removed: verification-needed-lucid
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/26" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~janitor" class="sprite person-inactive">Launchpad Janitor (janitor)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-05-30T05:16:55.114017+00:00" title="2011-05-30 05:16:55 UTC">on 2011-05-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/26"> #26</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/comments/26/+download">Download full text</a> (12.8 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package linux - 2.6.32-32.62</p>
<p>---------------<br />
linux (2.6.32-32.62) lucid-proposed; urgency=low</p>
<p>&nbsp;&nbsp;[ Brad Figg ]</p>
<p>&nbsp;&nbsp;* Release Tracking Bug<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/767370" class="bug-link">#767370</a></p>
<p>&nbsp;&nbsp;[ Stefan Bader ]</p>
<p>&nbsp;&nbsp;* (config) Disable CONFIG_NET_NS<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/720095" class="bug-link">#720095</a></p>
<p>&nbsp;&nbsp;[ Upstream Kernel Changes ]</p>
<p>&nbsp;&nbsp;* Revert &quot;drm/radeon/kms: Fix retrying ttm_bo_init() after it failed<br />
&nbsp;&nbsp;&nbsp;&nbsp;once.&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* Revert &quot;drm/radeon: fall back to GTT if bo creation/validation in VRAM<br />
&nbsp;&nbsp;&nbsp;&nbsp;fails.&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* x86: pvclock: Move scale_delta into common header<br />
&nbsp;&nbsp;* KVM: x86: Fix a possible backwards warp of kvmclock<br />
&nbsp;&nbsp;* KVM: x86: Fix kvmclock bug<br />
&nbsp;&nbsp;* cpuset: add a missing unlock in cpuset_<wbr />write_resmask(<wbr />)<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* keyboard: integer underflow bug<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* RxRPC: Fix v1 keys<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* ixgbe: fix for 82599 erratum on Header Splitting<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* mm: fix possible cause of a page_mapped BUG<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc/kdump: CPUs assume the context of the oopsing CPU<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc/kdump: Use chip-&gt;shutdown to disable IRQs<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc: Use more accurate limit for first segment memory allocations<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc/pseries: Add hcall to read 4 ptes at a time in real mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc/kexec: Speedup kexec hash PTE tear down<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc/crashdump: Do not fail on NULL pointer dereferencing<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* powerpc/kexec: Fix orphaned offline CPUs across kexec<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* netfilter: nf_log: avoid oops in (un)bind with invalid nfproto values<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* nfsd: wrong index used in inner loop<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* r8169: use RxFIFO overflow workaround for 8168c chipset.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* Staging: comedi: jr3_pci: Don&#x27;t ioremap too much space. Check result.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* net: don&#x27;t allow CAP_NET_ADMIN to load non-netdev kernel modules,<br />
&nbsp;&nbsp;&nbsp;&nbsp;CVE-2011-1019<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2011-1019<br />
&nbsp;&nbsp;* ip6ip6: autoload ip6 tunnel<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* Linux 2.6.32.33<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* drm/radeon: fall back to GTT if bo creation/validation in VRAM fails.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/652934" class="bug-link">#652934</a>, <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* drm/radeon/kms: Fix retrying ttm_bo_init() after it failed once.<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/652934" class="bug-link">#652934</a>, <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* drm: fix unsigned vs signed comparison issue in modeset ctl ioctl,<br />
&nbsp;&nbsp;&nbsp;&nbsp;CVE-2011-1013<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2011-1013<br />
&nbsp;&nbsp;* Linux 2.6.32.33+drm33.15<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736234" class="bug-link">#736234</a><br />
&nbsp;&nbsp;* econet: Fix crash in aun_incoming(). CVE-2010-4342<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/736394" class="bug-link">#736394</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2010-4342<br />
&nbsp;&nbsp;* igb: only use vlan_gro_receive if vlans are registered, CVE-2010-4263<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/737024" class="bug-link">#737024</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2010-4263<br />
&nbsp;&nbsp;* irda: prevent integer underflow in IRLMP_ENUMDEVICES, CVE-2010-4529<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/737823" class="bug-link">#737823</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2010-4529<br />
&nbsp;&nbsp;* hwmon/f71882fg: Set platform drvdata to NULL later<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/742056" class="bug-link">#742056</a><br />
&nbsp;&nbsp;* mtd: add &quot;platform:&quot; prefix for platform modalias<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/742056" class="bug-link">#742056</a><br />
&nbsp;&nbsp;* libata: no special completion processing for EH commands<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/742056" class="bug-link">#742056</a><br />
&nbsp;&nbsp;* MIPS: MTX-1: Make au1000_eth probe all PHY addresses<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/742056" class="bug-link">#742056</a><br />
&nbsp;&nbsp;* x86/mm: Handle mm_fault_error() in kernel space<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/742056" class="bug-link">#742056</a><br />
&nbsp;&nbsp;* ftrace: Fix memory leak with function graph and cpu hotplug<br />
&nbsp;&nbsp;&nbsp;&nbsp;- LP: <a href="/bugs/742056" class="bug-link">#742056</a><br />
&nbsp;&nbsp;* x86: Fix panic when ...</p></div>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This bug was fixed in the package linux - 2.6.32-32.62

---------------
linux (2.6.32-32.62) lucid-proposed; urgency=low

  [ Brad Figg ]

  * Release Tracking Bug
    - LP: #767370

  [ Stefan Bader ]

  * (config) Disable CONFIG_NET_NS
    - LP: #720095

  [ Upstream Kernel Changes ]

  * Revert "drm/radeon/kms: Fix retrying ttm_bo_init() after it failed
    once."
    - LP: #736234
  * Revert "drm/radeon: fall back to GTT if bo creation/validation in VRAM
    fails."
    - LP: #736234
  * x86: pvclock: Move scale_delta into common header
  * KVM: x86: Fix a possible backwards warp of kvmclock
  * KVM: x86: Fix kvmclock bug
  * cpuset: add a missing unlock in cpuset_write_resmask()
    - LP: #736234
  * keyboard: integer underflow bug
    - LP: #736234
  * RxRPC: Fix v1 keys
    - LP: #736234
  * ixgbe: fix for 82599 erratum on Header Splitting
    - LP: #736234
  * mm: fix possible cause of a page_mapped BUG
    - LP: #736234
  * powerpc/kdump: CPUs assume the context of the oopsing CPU
    - LP: #736234
  * powerpc/kdump: Use chip-&gt;shutdown to disable IRQs
    - LP: #736234
  * powerpc: Use more accurate limit for first segment memory allocations
    - LP: #736234
  * powerpc/pseries: Add hcall to read 4 ptes at a time in real mode
    - LP: #736234
  * powerpc/kexec: Speedup kexec hash PTE tear down
    - LP: #736234
  * powerpc/crashdump: Do not fail on NULL pointer dereferencing
    - LP: #736234
  * powerpc/kexec: Fix orphaned offline CPUs across kexec
    - LP: #736234
  * netfilter: nf_log: avoid oops in (un)bind with invalid nfproto values
    - LP: #736234
  * nfsd: wrong index used in inner loop
    - LP: #736234
  * r8169: use RxFIFO overflow workaround for 8168c chipset.
    - LP: #736234
  * Staging: comedi: jr3_pci: Don't ioremap too much space. Check result.
    - LP: #736234
  * net: don't allow CAP_NET_ADMIN to load non-netdev kernel modules,
    CVE-2011-1019
    - LP: #736234
    - CVE-2011-1019
  * ip6ip6: autoload ip6 tunnel
    - LP: #736234
  * Linux 2.6.32.33
    - LP: #736234
  * drm/radeon: fall back to GTT if bo creation/validation in VRAM fails.
    - LP: #652934, #736234
  * drm/radeon/kms: Fix retrying ttm_bo_init() after it failed once.
    - LP: #652934, #736234
  * drm: fix unsigned vs signed comparison issue in modeset ctl ioctl,
    CVE-2011-1013
    - LP: #736234
    - CVE-2011-1013
  * Linux 2.6.32.33+drm33.15
    - LP: #736234
  * econet: Fix crash in aun_incoming(). CVE-2010-4342
    - LP: #736394
    - CVE-2010-4342
  * igb: only use vlan_gro_receive if vlans are registered, CVE-2010-4263
    - LP: #737024
    - CVE-2010-4263
  * irda: prevent integer underflow in IRLMP_ENUMDEVICES, CVE-2010-4529
    - LP: #737823
    - CVE-2010-4529
  * hwmon/f71882fg: Set platform drvdata to NULL later
    - LP: #742056
  * mtd: add "platform:" prefix for platform modalias
    - LP: #742056
  * libata: no special completion processing for EH commands
    - LP: #742056
  * MIPS: MTX-1: Make au1000_eth probe all PHY addresses
    - LP: #742056
  * x86/mm: Handle mm_fault_error() in kernel space
    - LP: #742056
  * ftrace: Fix memory leak with function graph and cpu hotplug
    - LP: #742056
  * x86: Fix panic when handling "mem={invalid}" param
    - LP: #553464, #742056
  * x86: Emit "mem=nopentium ignored" warning when not supported
    - LP: #553464, #742056
  * ahci: AHCI and RAID mode SATA patch for Intel Patsburg DeviceIDs
    - LP: #742056
  * ahci: AHCI mode SATA patch for Intel DH89xxCC DeviceIDs
    - LP: #742056
  * ahci: AHCI mode SATA patch for Intel Patsburg SATA RAID controller
    - LP: #742056
  * RDMA/cma: Fix crash in request handlers
    - LP: #742056
  * IB/cm: Bump reference count on cm_id before invoking callback
    - LP: #742056
  * ath9k_hw: Fix incorrect macversion and macrev checks
    - LP: #742056
  * USB: serial/kobil_sct, fix potential tty NULL dereference
    - LP: #742056
  * USB: serial: ch341: add new id
    - LP: #742056
  * xhci: Fix cycle bit calculation during stall handling.
    - LP: #742056
  * ALSA: hda - fix digital mic selection in mixer on 92HD8X codecs
    - LP: #742056
  * PCI: remove quirk for pre-production systems
    - LP: #742056
  * PCI: add more checking to ICH region quirks
    - LP: #742056
  * PCI: do not create quirk I/O regions below PCIBIOS_MIN_IO for ICH
    - LP: #742056
  * PCI: sysfs: Fix failure path for addition of "vpd" attribute
    - LP: #742056
  * ALSA: ctxfi - Fix incorrect SPDIF status bit mask
    - LP: #742056
  * ALSA: ctxfi - Fix SPDIF status retrieval
    - LP: #742056
  * ALSA: ctxfi - Clear input settings before initialization
    - LP: #742056
  * SUNRPC: Ensure we always run the tk_callback before tk_action
    - LP: #742056
  * perf, powerpc: Handle events that raise an exception without
    overflowing
    - LP: #742056
  * ext3: Always set dx_node's fake_dirent explicitly.
    - LP: #742056
  * call_function_many: fix list delete vs add race
    - LP: #742056
  * call_function_many: add missing ordering
    - LP: #742056
  * x86: Flush TLB if PGD entry is changed in i386 PAE mode
    - LP: #742056
  * isdn: avoid calling tty_ldisc_flush() in atomic context
    - LP: #742056
  * smp_call_function_many: handle concurrent clearing of mask
    - LP: #742056
  * fix per-cpu flag problem in the cpu affinity checkers
    - LP: #742056
  * i2c: Fix typo in instantiating-devices document
    - LP: #742056
  * mmc: sdio: remember new card RCA when redetecting card
    - LP: #742056
  * powerpc/kexec: Fix race in kexec shutdown
    - LP: #742056
  * powerpc/kdump: Fix race in kdump shutdown
    - LP: #742056
  * powerpc: rtas_flash needs to use rtas_data_buf
    - LP: #742056
  * x86, binutils, xen: Fix another wrong size directive
    - LP: #742056
  * hwmon: (sht15) Fix integer overflow in humidity calculation
    - LP: #742056
  * Linux 2.6.32.34
    - LP: #742056
  * Linux 2.6.32.35
    - LP: #742056
  * aio: wake all waiters when destroying ctx
    - LP: #744921
  * shmem: let shared anonymous be nonlinear again
    - LP: #744921
  * PCI hotplug: acpiphp: set current_state to D0 in register_slot
    - LP: #744921
  * xen: set max_pfn_mapped to the last pfn mapped
    - LP: #744921
  * PCI: return correct value when writing to the "reset" attribute
    - LP: #744921
  * Prevent rt_sigqueueinfo and rt_tgsigqueueinfo from spoofing the signal
    code
    - LP: #744921
  * ext3: skip orphan cleanup on rocompat fs
    - LP: #744921
  * procfs: fix /proc/&lt;pid&gt;/maps heap check
    - LP: #744921
  * proc: protect mm start_code/end_code in /proc/pid/stat, CVE-2011-0726
    - LP: #744921
    - CVE-2011-0726
  * fbcon: Bugfix soft cursor detection in Tile Blitting
    - LP: #744921
  * nfsd41: modify the members value of nfsd4_op_flags
    - LP: #744921
  * nfsd: wrong index used in inner loop
    - LP: #744921
  * uvcvideo: Fix uvc_fixup_video_ctrl() format search
    - LP: #744921
  * ehci-hcd: Bug fix: don't set a QH's Halt bit
    - LP: #744921
  * USB: uss720 fixup refcount position
    - LP: #744921
  * USB: cdc-acm: fix memory corruption / panic
    - LP: #744921
  * USB: cdc-acm: fix potential null-pointer dereference
    - LP: #744921
  * USB: cdc-acm: fix potential null-pointer dereference on disconnect
    - LP: #744921
  * Input: xen-kbdfront - advertise either absolute or relative coordinates
    - LP: #744921
  * SUNRPC: Never reuse the socket port after an xs_close()
    - LP: #744921
  * fs: call security_d_instantiate in d_obtain_alias V2
    - LP: #744921
  * dcdbas: force SMI to happen when expected
    - LP: #744921
  * Linux 2.6.32.36
    - LP: #744921
  * drm/radeon/kms: check AA resolve registers on r300, CVE-2011-1016
    - LP: #745686
    - CVE-2011-1016
  * drm/radeon: fix regression with AA resolve checking, CVE-2011-1016
    - LP: #745686
    - CVE-2011-1016
  * xen: events: do not unmask event channels on resume
    - LP: #681083
  * drm/radeon/kms: check AA resolve registers on r300
    - LP: #754584
  * drm/radeon: fix regression with AA resolve checking
    - LP: #754584
  * Linux 2.6.32.36+drm33.16
    - LP: #754584
  * ALSA: hda - Fix SPDIF out regression on ALC889
    - LP: #764685
  * ALSA: Fix yet another race in disconnection
    - LP: #764685
  * perf: Better fit max unprivileged mlock pages for tools needs
    - LP: #764685
  * myri10ge: fix rmmod crash
    - LP: #764685
  * cciss: fix lost command issue
    - LP: #764685
  * sound/oss/opl3: validate voice and channel indexes
    - LP: #764685
  * mac80211: initialize sta-&gt;last_rx in sta_info_alloc
    - LP: #764685
  * ses: show devices for enclosures with no page 7
    - LP: #764685
  * ses: Avoid kernel panic when lun 0 is not mapped
    - LP: #764685
  * eCryptfs: Unlock page in write_begin error path
    - LP: #764685
  * eCryptfs: ecryptfs_keyring_auth_tok_for_sig() bug fix
    - LP: #764685
  * staging: usbip: bugfixes related to kthread conversion
    - LP: #764685
  * staging: usbip: bugfix add number of packets for isochronous frames
    - LP: #764685
  * staging: usbip: bugfix for isochronous packets and optimization
    - LP: #764685
  * staging: hv: Fix GARP not sent after Quick Migration
    - LP: #764685
  * staging: hv: use sync_bitops when interacting with the hypervisor
    - LP: #764685
  * Relax si_code check in rt_sigqueueinfo and rt_tgsigqueueinfo
    - LP: #764685
  * xfs: prevent leaking uninitialized stack memory in FSGEOMETRY_V1
    - LP: #764685
  * irda: validate peer name and attribute lengths
    - LP: #764685
  * irda: prevent heap corruption on invalid nickname
    - LP: #764685
  * nilfs2: fix data loss in mmap page write for hole blocks
    - LP: #764685
  * ASoC: Explicitly say registerless widgets have no register
    - LP: #764685
  * ALSA: ens1371: fix Creative Ectiva support
    - LP: #764685
  * ROSE: prevent heap corruption with bad facilities
    - LP: #764685
  * Btrfs: Fix uninitialized root flags for subvolumes
    - LP: #764685
  * x86, mtrr, pat: Fix one cpu getting out of sync during resume
    - LP: #764685
  * ath9k: fix a chip wakeup related crash in ath9k_start
    - LP: #764685
  * UBIFS: do not read flash unnecessarily
    - LP: #764685
  * UBIFS: fix oops on error path in read_pnode
    - LP: #764685
  * UBIFS: fix debugging failure in dbg_check_space_info
    - LP: #764685
  * quota: Don't write quota info in dquot_commit()
    - LP: #764685
  * mm: avoid wrapping vm_pgoff in mremap()
    - LP: #764685
  * p54usb: IDs for two new devices
    - LP: #764685
  * b43: allocate receive buffers big enough for max frame len + offset
    - LP: #764685
  * Bluetooth: sco: fix information leak to userspace
    - LP: #764685
  * bridge: netfilter: fix information leak
    - LP: #764685
  * Bluetooth: bnep: fix buffer overflow
    - LP: #764685
  * Bluetooth: add support for Apple MacBook Pro 8,2
    - LP: #764685
  * Treat writes as new when holes span across page boundaries
    - LP: #764685
  * char/tpm: Fix unitialized usage of data buffer
    - LP: #764685
  * netfilter: ip_tables: fix infoleak to userspace
    - LP: #764685
  * netfilter: arp_tables: fix infoleak to userspace
    - LP: #764685
  * netfilter: ipt_CLUSTERIP: fix buffer overflow
    - LP: #764685
  * ipv6: netfilter: ip6_tables: fix infoleak to userspace
    - LP: #764685
  * mfd: ab3100: world-writable debugfs *_priv files
    - LP: #764685
  * drivers/rtc/rtc-ds1511.c: world-writable sysfs nvram file
    - LP: #764685
  * drivers/misc/ep93xx_pwm.c: world-writable sysfs files
    - LP: #764685
  * econet: 4 byte infoleak to the network
    - LP: #764685
  * sound/oss: remove offset from load_patch callbacks
    - LP: #764685
  * sound: oss: midi_synth: check get_user() return value
    - LP: #764685
  * repair gdbstub to match the gdbserial protocol specification
    - LP: #764685
  * gro: Reset dev pointer on reuse
    - LP: #764685
  * gro: reset skb_iif on reuse
    - LP: #764685
  * x86, amd-ucode: Remove needless log messages
    - LP: #764685
  * x86, microcode, AMD: Extend ucode size verification
    - LP: #764685
  * powerpc/kexec: Add ifdef CONFIG_PPC_STD_MMU_64 to PPC64 code
    - LP: #764685
  * powerpc: Fix default_machine_crash_shutdown #ifdef botch
    - LP: #764685
  * Squashfs: handle corruption of directory structure
    - LP: #764685
  * sctp: fix to calc the INIT/INIT-ACK chunk length correctly is set
    - LP: #764685
  * atm/solos-pci: Don't include frame pseudo-header on transmit hex-dump
    - LP: #764685
  * ext4: fix credits computing for indirect mapped files
    - LP: #764685
  * nfsd: fix auth_domain reference leak on nlm operations
    - LP: #764685
  * CAN: Use inode instead of kernel address for /proc file
    - LP: #764685
  * exec: make argv/envp memory visible to oom-killer
    - LP: #764685
  * exec: copy-and-paste the fixes into compat_do_execve() paths
    - LP: #764685
  * xfs: zero proper structure size for geometry calls
    - LP: #764685
  * Linux 2.6.32.37
    - LP: #764685
  * Linux 2.6.32.38
    - LP: #764685
 -- Brad Figg &lt;brad.figg@canonical.com&gt;   Wed, 20 Apr 2011 08:28:25 -0700</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in linux (Ubuntu Lucid): </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/27" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~serge-hallyn" class="sprite person">Serge Hallyn (serge-hallyn)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-05-31T19:40:29.878565+00:00" title="2011-05-31 19:40:29 UTC">on 2011-05-31</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/27"> #27</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>lxc is now not usable on lucid.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">lxc is now not usable on lucid.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/28" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~metze" class="sprite person">Stefan Metzmacher (metze)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-06-01T07:31:41.501302+00:00" title="2011-06-01 07:31:41 UTC">on 2011-06-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/28"> #28</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes, lxc is broken now see <a rel="nofollow" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/790863">https:/<wbr />/bugs.launchpad<wbr />.net/ubuntu/<wbr />+source/<wbr />linux/+<wbr />bug/790863</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes, lxc is broken now see https://bugs.launchpad.net/ubuntu/+source/linux/+bug/790863</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/29" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~serge-hallyn" class="sprite person">Serge Hallyn (serge-hallyn)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-06-01T15:13:16.509961+00:00" title="2011-06-01 15:13:16 UTC">on 2011-06-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/29"> #29</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/2150773/+files/debdiff">debdiff</a>
        <a class="sprite edit action-icon" href="/ubuntu/+source/linux/+bug/720095/+attachment/2150773">Edit</a>
        (757 bytes,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Actually, this isn&#x27;t making sense to me.  CLONE_NEWNET requires privilege, so this isn&#x27;t something a random user can exploit.  So what is the value in turning netns support off in the kernel as opposed to just stopping vsftpd from using it?  (Attached debdiff not tested, but should suffice.  I&#x27;ll test if it will be considered IN PLACE of turning off CONFIG_NET_NS).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Actually, this isn't making sense to me.  CLONE_NEWNET requires privilege, so this isn't something a random user can exploit.  So what is the value in turning netns support off in the kernel as opposed to just stopping vsftpd from using it?  (Attached debdiff not tested, but should suffice.  I'll test if it will be considered IN PLACE of turning off CONFIG_NET_NS).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/30" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~metze" class="sprite person">Stefan Metzmacher (metze)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-06-01T16:08:56.258212+00:00" title="2011-06-01 16:08:56 UTC">on 2011-06-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/30"> #30</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fixing vsftpd looks like a much better fix for this!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fixing vsftpd looks like a much better fix for this!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/31" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rachel-strangenoises" class="sprite person">Rachel Greenham (rachel-strangenoises)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-06-02T13:32:45+00:00" title="2011-06-02 13:32:45 UTC">on 2011-06-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/ubuntu/+source/linux/+bug/720095/comments/31">
                <strong>Re: [Bug 720095] Re: vsftpd causes a vmalloc space leak in Lucid</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/31"> #31</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>On 01/06/11 17:08, Stefan Metzmacher wrote:<br />
<span class="foldable-quoted">
&gt; Fixing vsftpd looks like a much better fix for this
</span></p>
<p>It would seem at first sight to be simpler; but presumably the problem<br />
was that there are bugs in the implementation in the Lucid kernel (and<br />
upstream) that won&#x27;t necessarily *only* impact vsftpd users, although we<br />
were the ones who first reported it. Certainly from my practical point<br />
of view I&#x27;d have been happy with a simple vsftpd update to remove the<br />
problem. :-)</p>
<p>The bug being in the kernel, and backporting the fix to it being deemed<br />
too complicated (see nearer the top of this bug report thread) the<br />
decision was therefore to disable the feature.</p>
<p>To those that depend on the feature, ie: lxc users (aside: i hadn&#x27;t<br />
heard of that! after googling i may want to use it now!), given the<br />
feature is buggy in the lucid - and upstream - kernel *anyway*, maybe<br />
the appropriate action is to use the maverick backport kernel?</p>
<p><span class="foldable">--<br />
Rachel
</span></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">On 01/06/11 17:08, Stefan Metzmacher wrote:
&gt; Fixing vsftpd looks like a much better fix for this

It would seem at first sight to be simpler; but presumably the problem 
was that there are bugs in the implementation in the Lucid kernel (and 
upstream) that won't necessarily *only* impact vsftpd users, although we 
were the ones who first reported it. Certainly from my practical point 
of view I'd have been happy with a simple vsftpd update to remove the 
problem. :-)

The bug being in the kernel, and backporting the fix to it being deemed 
too complicated (see nearer the top of this bug report thread) the 
decision was therefore to disable the feature.

To those that depend on the feature, ie: lxc users (aside: i hadn't 
heard of that! after googling i may want to use it now!), given the 
feature is buggy in the lucid - and upstream - kernel *anyway*, maybe 
the appropriate action is to use the maverick backport kernel?

-- 
Rachel

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/32" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~rachel-strangenoises" class="sprite person">Rachel Greenham (rachel-strangenoises)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-06-02T13:51:20+00:00" title="2011-06-02 13:51:20 UTC">on 2011-06-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/32"> #32</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>On 02/06/11 14:32, Rachel Greenham wrote:<br />
<span class="foldable-quoted">
&gt; On 01/06/11 17:08, Stefan Metzmacher wrote:<br />
&gt;&gt; Fixing vsftpd looks like a much better fix for this
</span></p>
<p>Also presumably disabling it in vsftpd will hurt people who want to use<br />
that in an lxc setting without providing an easily-applied solution.</p>
<p><span class="foldable">--<br />
Rachel
</span></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">On 02/06/11 14:32, Rachel Greenham wrote:
&gt; On 01/06/11 17:08, Stefan Metzmacher wrote:
&gt;&gt; Fixing vsftpd looks like a much better fix for this

Also presumably disabling it in vsftpd will hurt people who want to use 
that in an lxc setting without providing an easily-applied solution.

-- 
Rachel

</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/33" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~metze" class="sprite person">Stefan Metzmacher (metze)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-06-03T09:46:03.085257+00:00" title="2011-06-03 09:46:03 UTC">on 2011-06-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/33"> #33</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>As far as I understand the problem, the problem comes with creating a new network namespace with every clone() syscall.</p>
<p>In a lxc setup only the startup process creates a new network namespace, just once.</p>
<p>I can&#x27;t see why vsftpd (without CLONE_NEWNET) won&#x27;t run within an already established lxc session.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">As far as I understand the problem, the problem comes with creating a new network namespace with every clone() syscall.

In a lxc setup only the startup process creates a new network namespace, just once.

I can't see why vsftpd (without CLONE_NEWNET) won't run within an already established lxc session.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/34" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ubuntu-alex-org" class="sprite person">Alex Bligh (ubuntu-alex-org)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-09-07T19:16:52.040620+00:00" title="2011-09-07 19:16:52 UTC">on 2011-09-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/34"> #34</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The released resolution broke a production environment here: See #844185</p>
<p>I propose this is instead fixed by disabling it in vsftpd.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The released resolution broke a production environment here: See #844185

I propose this is instead fixed by disabling it in vsftpd.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/35" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~smb" class="sprite person">Stefan Bader (smb)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-09-07T20:26:16+00:00" title="2011-09-07 20:26:16 UTC">on 2011-09-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/35"> #35</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>On 07.09.2011 12:16, Alex Bligh wrote:<br />
<span class="foldable-quoted">
&gt; The released resolution broke a production environment here: See #844185<br />
&gt;<br />
&gt; I propose this is instead fixed by disabling it in vsftpd.<br />
&gt;<br />
</span>

The problem is that nobody can say that vsftp was or is the only vector that<br />
allows to DOS a system doing something that involves network namespaces.</p>
<p>If netns is essential. It is probably a better solution to move to the<br />
LTS-backports kernel which is newer and does not have those memory cleanup issues.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">On 07.09.2011 12:16, Alex Bligh wrote:
&gt; The released resolution broke a production environment here: See #844185
&gt; 
&gt; I propose this is instead fixed by disabling it in vsftpd.
&gt; 
The problem is that nobody can say that vsftp was or is the only vector that
allows to DOS a system doing something that involves network namespaces.

If netns is essential. It is probably a better solution to move to the
LTS-backports kernel which is newer and does not have those memory cleanup issues.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/36" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ubuntu-alex-org" class="sprite person">Alex Bligh (ubuntu-alex-org)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-09-07T22:36:51.723218+00:00" title="2011-09-07 22:36:51 UTC">on 2011-09-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/36"> #36</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>That is sadly not an option. LTS-backport kernel has a spectacular and easy to repeat Oops when namespaces are used. See #843892.</p>
<p>It is not guaranteed by the kernel (it certainly wasn&#x27;t in 2.6.32) that namespaces would be created and deleted instantly and without undue system pressure. It seems to me that the bug is in applications which think this can be done. As an example, in 2.6.32 creating 1000 interfaces and deleting them takes a huge time on delete due to RCU sync issues. If a userspace program did this, prompted by an external user, our response would not be to disable creation and deletion of interfaces. Rather we&#x27;d fix the userspace program not to do it.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">That is sadly not an option. LTS-backport kernel has a spectacular and easy to repeat Oops when namespaces are used. See #843892.

It is not guaranteed by the kernel (it certainly wasn't in 2.6.32) that namespaces would be created and deleted instantly and without undue system pressure. It seems to me that the bug is in applications which think this can be done. As an example, in 2.6.32 creating 1000 interfaces and deleting them takes a huge time on delete due to RCU sync issues. If a userspace program did this, prompted by an external user, our response would not be to disable creation and deletion of interfaces. Rather we'd fix the userspace program not to do it.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/ubuntu/+source/linux/+bug/720095/comments/37" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~ubuntu-alex-org" class="sprite person">Alex Bligh (ubuntu-alex-org)</a>
            wrote
            <time itemprop="commentTime" datetime="2011-09-07T22:44:05.425339+00:00" title="2011-09-07 22:44:05 UTC">on 2011-09-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/ubuntu/+source/linux/+bug/720095/comments/37"> #37</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Note also that if vsftp continues to use clone(NEW_NETNS) (i.e. network namespaces) it is likely to suffer from #843892 anyway, so not using network namespaces will give you a stability increase. (NB - I have not tested vsftp against the bug in #843892 but as you can see from the text, it is hardly difficult to hit).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Note also that if vsftp continues to use clone(NEW_NETNS) (i.e. network namespaces) it is likely to suffer from #843892 anyway, so not using network namespaces will give you a stability increase. (NB - I have not tested vsftp against the bug in #843892 but as you can see from the text, it is hardly difficult to hit).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/ubuntu/+source/linux/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/ubuntu/+source/linux/+bug/720095/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/ubuntu/+source/linux/+bug/720095/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/ubuntu/+source/linux/+bug/720095/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/2150773/+files/debdiff">debdiff</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/2150773">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/ubuntu/+source/linux/+bug/720095/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  <div class="portlet" id="portlet-attachments">
    <h2>Bug attachments</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853929/+files/BootDmesg.txt">BootDmesg.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853929">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853930/+files/ProcCpuinfo.txt">ProcCpuinfo.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853930">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853931/+files/ProcInterrupts.txt">ProcInterrupts.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853931">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853932/+files/ProcModules.txt">ProcModules.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853932">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853933/+files/UdevDb.txt">UdevDb.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853933">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853934/+files/UdevLog.txt">UdevLog.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853934">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853959/+files/feedftp">feedftp</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853959">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853960/+files/dmesg-oom.32.txt">dmesg-oom.32.txt</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853960">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+attachment/1853961/+files/vmallocinfo.32.tar">vmallocinfo.32.tar</a>
        <small>
          (<a href="/ubuntu/+source/linux/+bug/720095/+attachment/1853961">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/ubuntu/+source/linux/+bug/720095/+addcomment">Add attachment</a>
      </li>
    </ul>
  </div>


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"bug_is_private": false, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/720095", "web_link": "https://bugs.launchpad.net/bugs/720095", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 720095, "private": false, "information_type": "Public", "name": null, "title": "vsftpd causes a vmalloc space leak in Lucid", "description": "SRU justification:\n\nImpact: With activated network namespace (CONFIG_NET_NS) support it is possible to create new namespaces much faster than cleaning them up. This can lead to memory pressure and in the case of vsftp it is easily possible to bring down the server by just repeatedly connecting to it.\n\nFix: The issue was fixed by a long series of changes to make cleanup quicker. The vast amount of changes makes them unsuited for SRU. So it was decided that the safest way for a 2.6.32 based kernel is to turn that feature off (it was considered experimental until 2.6.37 anyway).\n\nTestcase: Se report.\n\n---\n\nA simple stress test conducted on a KVM guest running standard updated Lucid with vsftpd demonstrates that memory is continuously used up until OOM Killer starts to protect the system (after ~12 min on my system).  If test is terminated before that point is reached then memory is freed only after several hours.  If vsftpd is stopped then memory is freed (after ~45 min on my system).\n\nThis does not occur with the 2.6.35 kernel (LTS backported kernel).\n\nThe test is started in this way:\n\n$ for i in 1 2 3 4 5 6 7 8 ; do ./feedftp $i \u003e/dev/null \u0026 done\n\nWhat is observed during the test is that /proc/vmallocinfo grows continually with lines like the following being added:\n\n0xffffe8ffff800000-0xffffe8ffffa00000 2097152 pcpu_get_vm_areas+0x0/0x790 vmalloc\n0xffffe8ffffa00000-0xffffe8ffffc00000 2097152 pcpu_get_vm_areas+0x0/0x790 vmalloc\n0xffffe8ffffc00000-0xffffe8ffffe00000 2097152 pcpu_get_vm_areas+0x0/0x790 vmalloc\n\nAttached:\n\n- test script (see feedftp)\n- tarball containing the proc file at various times during the test (see vmallocinfo.32.tar)\n- dmesg output showing OOM Killer at work (see dmesg-oom.32.txt)\n\nMay be related: https://bugs.launchpad.net/ubuntu/+source/vsftpd/+bug/682865\n\n=========\n\nProblemType: Bug\nDistroRelease: Ubuntu 10.04\nPackage: linux-image-2.6.32-28-server (not installed)\nRegression: No\nReproducible: Yes\nProcVersionSignature: User Name 2.6.32-28.55-server 2.6.32.27+drm33.12\nUname: Linux 2.6.32-28-server x86_64\nAlsaDevices: Error: command ['ls', '-l', '/dev/snd/'] failed with exit code 2: ls: cannot access /dev/snd/: No such file or directory\nAplayDevices: Error: [Errno 2] No such file or directory\nArchitecture: amd64\nArecordDevices: Error: [Errno 2] No such file or directory\nCurrentDmesg: [   12.360149] eth0: no IPv6 routers present\nDate: Wed Feb 16 14:00:19 2011\nLspci: Error: [Errno 2] No such file or directory\nLsusb: Error: [Errno 2] No such file or directory\nMachineType: Bochs Bochs\nPciMultimedia:\n\nProcCmdLine: root=UUID=7bbf58be-9c5f-4113-ad1b-4611fd131d33 ro\nProcEnviron:\n\u00a0LANG=en_US.UTF-8\n\u00a0SHELL=/bin/bash\nSourcePackage: linux\ndmi.bios.date: 01/01/2007\ndmi.bios.vendor: Bochs\ndmi.bios.version: Bochs\ndmi.chassis.type: 1\ndmi.chassis.vendor: Bochs\ndmi.modalias: dmi:bvnBochs:bvrBochs:bd01/01/2007:svnBochs:pnBochs:pvr:cvnBochs:ct1:cvr:\ndmi.product.name: Bochs\ndmi.sys.vendor: Bochs", "owner_link": "https://bugs.launchpad.net/api/devel/~petermatulis", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/bug_tasks", "duplicate_of_link": null, "date_created": "2011-02-16T14:39:50.013545+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/subscriptions", "date_last_updated": "2012-01-26T11:00:52.005162+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 42, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/attachments", "security_related": false, "latest_patch_uploaded": "2011-06-01T15:13:16.509961+00:00", "tags": ["amd64", "apport-bug", "kernel-key", "lucid", "needs-upstream-testing", "verification-done"], "date_last_message": "2011-09-07T22:44:05.425339+00:00", "number_of_duplicates": 0, "message_count": 38, "users_affected_count": 6, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/users_unaffected", "users_affected_count_with_dupes": 6, "other_users_affected_count_with_dupes": 6, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/720095/linked_merge_proposals", "http_etag": "\"8d7f54ac7bb22303388448b3328fda4000d85698-1c1a7e3069bc2837913ee4fcb6989cbff9c25982\""}, "total_comments_and_activity": 82, "related_features": {}, "information_type_data": {"PUBLIC": {"is_private": false, "name": "Public", "order": 0, "description": "Everyone can see this information.\n", "value": "PUBLIC", "description_css_class": "choice-description"}, "PRIVATESECURITY": {"is_private": true, "name": "Private Security", "order": 2, "description": "Only the security group can see this information.\n ", "value": "PRIVATESECURITY", "description_css_class": "choice-description"}, "PUBLICSECURITY": {"is_private": false, "name": "Public Security", "order": 1, "description": "Everyone can see this security related information.\n", "value": "PUBLICSECURITY", "description_css_class": "choice-description"}, "USERDATA": {"is_private": true, "name": "Private", "order": 3, "description": "Only shared with users permitted to see private user information.\n", "value": "USERDATA", "description_css_class": "choice-description"}}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/ubuntu/+source/linux/+bug/720095", "web_link": "https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/720095", "milestone_link": null, "status": "Invalid", "importance": "Medium", "assignee_link": null, "bug_target_display_name": "linux (Ubuntu)", "bug_target_name": "linux (Ubuntu)", "bug_watch_link": null, "date_assigned": null, "date_created": "2011-02-16T14:39:50.013545+00:00", "date_confirmed": null, "date_incomplete": null, "date_in_progress": null, "date_closed": "2011-03-30T12:34:12.051889+00:00", "date_left_new": "2011-02-16T17:11:39.993796+00:00", "date_triaged": null, "date_fix_committed": null, "date_fix_released": null, "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~petermatulis", "target_link": "https://bugs.launchpad.net/api/devel/ubuntu/+source/linux", "title": "Bug #720095 in linux (Ubuntu): \"vsftpd causes a vmalloc space leak in Lucid\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/ubuntu/+source/linux/+bug/720095/related_tasks", "is_complete": true, "http_etag": "\"e64ad48a381de405ef469f160d6775f60183f889-481cda2dc493082476c0b6e842df40ba99b2f06c\""}, "bugtask_data": {"841832": {"delete_link": "https://bugs.launchpad.net/ubuntu/+source/linux/+bug/720095/+delete", "bug_title": "vsftpd causes a vmalloc space leak in Lucid", "user_can_unassign": false, "importance_value": "Medium", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary841832", "target_is_product": false, "user_can_edit_milestone": false, "prefix": "ubuntu_linux", "bugtask_path": "/ubuntu/+source/linux/+bug/720095", "id": 841832, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task841832", "targetname": "linux (Ubuntu)", "assignee_is_team": null, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": null, "status_value": "Invalid"}, "874550": {"delete_link": "https://bugs.launchpad.net/ubuntu/lucid/+source/linux/+bug/720095/+delete", "bug_title": "vsftpd causes a vmalloc space leak in Lucid", "user_can_unassign": false, "importance_value": "Medium", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary874550", "target_is_product": false, "user_can_edit_milestone": false, "prefix": "ubuntu_lucid_linux", "bugtask_path": "/ubuntu/lucid/+source/linux/+bug/720095", "id": 874550, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task874550", "targetname": "linux (Ubuntu Lucid)", "assignee_is_team": false, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": "smb", "status_value": "Fix Released"}}, "subscribers_portlet_url_data": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/720095", "web_link": "https://bugs.launchpad.net/bugs/720095"}, "initial_comment_batch_offset": 41, "first visible_recent_comment": -3};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 102 queries/external actions issued in 1.64 seconds

    Features: {'app.maintenance_message': None, 'hard_timeout': '9000', 'js.yui_version': None, 'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'baselayout.careers_link.disabled': None, 'bugs.affected_count_includes_dupes.disabled': None, 'visible_render_time': None, 'profiling.enabled': None, 'bugs.nominations.bug_supervisors_can_target': 'on'}

    r0d8de2b

    -->

</html>

