<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/keystone/+bug/1872735/+index" />

    <meta charset="UTF-8" />
    <title>Bug #1872735 “[OSSA-2020-004] EC2 and/or credential endpoints ar...” : Bugs : OpenStack Identity (keystone)</title>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/1872735" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/1872735/bug.atom" title="Bug 1872735 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/combo.css" />


    

    
      <meta name="description" content="Being authorized within a limited scope context, i.e. trust / oauth / application credential with a limited role, e.g. &quot;monitoring_viewer&quot; or &quot;viewer&quot;, it is still possible to create EC2 credentials. User can auth against Keystone using EC2 credentials and obtain all project roles
 of a trust/oauth/application_credential owner.

I prepared a tool to auth against keyston using ec2 credentials: https://github.com/kayrus/ec2auth

* auth against keystone using trust/oauth/application_credential c..." />
      <meta property="og:description" content="Being authorized within a limited scope context, i.e. trust / oauth / application credential with a limited role, e.g. &quot;monitoring_viewer&quot; or &quot;viewer&quot;, it is still possible to create EC2 credentials. User can auth against Keystone using EC2 credentials and obtain all project roles
 of a trust/oauth/application_credential owner.

I prepared a tool to auth against keyston using ec2 credentials: https://github.com/kayrus/ec2auth

* auth against keystone using trust/oauth/application_credential c..." />
    

    
    
      <meta property="og:title" content="Bug #1872735 “[OSSA-2020-004] EC2 and/or credential endpoints ar...” : Bugs : OpenStack Identity (keystone)" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/1872735" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?lp/',
                    comboBase: '/+combo/rev0d8de2bfee2024772b3040d4d19f42f47395ac0d/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["api-ref", "caching", "configuration", "default-roles", "documentation", "federation", "fernet", "fix-requires-microversion", "hierarchical-multitenancy", "i18n", "jwt", "ldap", "limits", "logging", "low-hanging-fruit", "meeting-topic", "notifications", "ocata-backport-potential", "office-hours", "ops", "password", "pci", "performance", "pike-backport-potential", "pki", "policy", "python3", "queens-backport-potential", "rc-potential", "revoke", "rfe", "rocky-backport-potential", "security", "sql", "system-scope", "test-improvement", "trusts", "upgrades", "user-experience", "x509"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/keystone/+bug/1872735/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/keystone"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/359059841/OpenStack_Project_Keystone_mascot%20%281%29.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/keystone">OpenStack Identity (keystone)</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/keystone">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/keystone">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/keystone">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/keystone">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/keystone">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/keystone">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    [OSSA-2020-004] EC2 and/or credential endpoints are not protected from a scoped context (CVE-2020-12689)
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #1872735 reported by
      <a href="https://launchpad.net/~kay-diam" class="sprite person">kay</a>
      <time title="2020-04-14 14:56:28 UTC" datetime="2020-04-14T14:56:28.082881+00:00">on 2020-04-14</time>
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">266</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 1 person</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr class="highlight" id="tasksummary2591943">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/keystone/+bug/1872735/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2591943">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/keystone">OpenStack Identity (keystone)</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/keystone/+bug/1872735/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/keystone/+bug/1872735/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2591943">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~krinkle">Colleen Murphy</a>
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2591943">
     <td colspan="7"><form action="/keystone/+bug/1872735/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/keystone">OpenStack Identity (keystone)</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~kay-diam" class="sprite person">kay</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2020-04-14 14:56:28 UTC" datetime="2020-04-14T14:56:28.082881+00:00">2020-04-14</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2020-04-15 17:45:38 UTC" datetime="2020-04-15T17:45:38.198459+00:00">2020-04-15</time>
      </td>
    </tr>
    <tr>
      <th>Assigned:</th>
      <td>
        <time title="2020-04-27 16:53:07 UTC" datetime="2020-04-27T16:53:07.036121+00:00">2020-04-27</time>
      </td>
    </tr>
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2020-04-27 16:53:03 UTC" datetime="2020-04-27T16:53:03.848148+00:00">2020-04-27</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2020-05-08 16:15:04 UTC" datetime="2020-05-08T16:15:04.310196+00:00">2020-05-08</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="keystone.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="keystone.target.option.package" name="keystone.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="keystone.target.distribution" name="keystone.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="keystone.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="keystone.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="keystone.target.package"
                         name="keystone.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;keystone.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('keystone.target.package');
              var select_menu = Y.DOM.byId('keystone.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-keystone-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionPackage", "extra_no_results_message": null, "selected_value": null, "show_assign_me_button": false, "show_widget_id": "show-widget-keystone-target-package", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "keystone.target.package"};
        var show_widget_id = 'show-widget-keystone-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="keystone.target.option.product" name="keystone.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="keystone" id="keystone.target.product"
                         name="keystone.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;keystone.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('keystone.target.product');
              var select_menu = Y.DOM.byId('keystone.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-keystone-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a project", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "Product", "extra_no_results_message": null, "selected_value": "keystone", "show_assign_me_button": false, "show_widget_id": "show-widget-keystone-target-product", "step_title": "Search", "assign_me_text": "Pick me", "input_element": "keystone.target.product"};
        var show_widget_id = 'show-widget-keystone-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="keystone.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="keystone.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="keystone.status" name="keystone.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="keystone.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceHIGH">High</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="keystone.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="keystone.assignee.assign_to_me" name="keystone.assignee.option" value="keystone.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="keystone.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
      
        <tr>
          <td style="padding: 0 2px 2px 0">
              <input type="radio" checked="checked" id="keystone.assignee.assigned_to" name="keystone.assignee.option" value="keystone.assignee.assigned_to" />
          </td>
          <td style="padding: 0">
            <label style="font-weight: normal" for="keystone.assignee.assigned_to">
              Colleen Murphy (krinkle)
            </label>
          </td>
        </tr>
      
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="keystone.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="keystone.comment_on_change" name="keystone.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
        
          
  <tr id="tasksummary2591966">
    <td>
      <a class="bugtask-expander" href="https://bugs.launchpad.net/ossa/+bug/1872735/+editstatus">
        &#8203;
      </a>
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary2591966">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
          Edit
        </button>
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        
        
          <a href="https://bugs.launchpad.net/ossa/+bug/1872735/+editstatus" style="float: left" class="value statusFIXRELEASED">Fix Released</a>
          <a href="https://bugs.launchpad.net/ossa/+bug/1872735/+editstatus" style="margin-left: 3px">
            <img class="editicon" src="/@@/edit" />
          </a>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary2591966">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          <button class="lazr-btn yui3-activator-act yui3-activator-hidden">
            Edit
          </button>
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  
    <tr class="bugtask-collapsible-content hidden" id="task2591966">
     <td colspan="7"><form action="/ossa/+bug/1872735/+editstatus" method="post" enctype="multipart/form-data">
  

  <p class="error message">
    You need to log in to change this bug's status.
  </p>
  
  <table class="summary" style="float: right; margin-left: 1em;">
    <tr>
      <th>Affecting:</th>
      <td><a href="/ossa">OpenStack Security Advisory</a></td>
    </tr>
    <tr>
      <th>Filed here by:</th>
      <td><a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley</a></td>
    </tr>
    <tr>
      <th>When:</th>
      <td>
        <time title="2020-04-14 15:43:47 UTC" datetime="2020-04-14T15:43:47.296278+00:00">2020-04-14</time>
      </td>
    </tr>
    <tr>
      <th>Confirmed:</th>
      <td>
        <time title="2020-05-06 15:59:14 UTC" datetime="2020-05-06T15:59:14.221928+00:00">2020-05-06</time>
      </td>
    </tr>
    
    <tr>
      <th>Started work:</th>
      <td>
        <time title="2020-05-06 15:59:14 UTC" datetime="2020-05-06T15:59:14.221928+00:00">2020-05-06</time>
      </td>
    </tr>
    <tr>
      <th>Completed:</th>
      <td>
        <time title="2020-05-06 18:57:33 UTC" datetime="2020-05-06T18:57:33.170878+00:00">2020-05-06</time>
      </td>
    </tr>
  </table>
  <div class="field">
    <table>
      <tr>
        <td>
          <label for="ossa.target">Target</label>
        </td>
      </tr>
      <tr>
        <td>
          <table>
  <tr>
    <td>
      <label>
        <input class="radioType" id="ossa.target.option.package" name="ossa.target" type="radio" value="package" />
        Distribution
      </label>
    </td>
    <td>
      <select id="ossa.target.distribution" name="ossa.target.distribution" size="1" >
<option value="baltix">Baltix</option>
<option value="boss">BOSS</option>
<option value="charms">Juju Charms Collection</option>
<option value="elbuntu">Elbuntu</option>
<option value="guadalinex">Guadalinex</option>
<option value="guadalinexedu">Guadalinex Edu</option>
<option value="kiwilinux">Kiwi Linux</option>
<option value="nubuntu">nUbuntu</option>
<option value="pld-linux">PLD Linux</option>
<option value="tilix">Tilix</option>
<option value="tuxlab">tuXlab</option>
<option selected="selected" value="ubuntu">Ubuntu</option>
<option value="ubuntu-leb">Ubuntu Linaro Evaluation Build</option>
<option value="ubuntu-rtm">Ubuntu RTM</option>
</select>
<input name="ossa.target.distribution-empty-marker" type="hidden" value="1" />
    </td>
  </tr>
  <tr>
    <td align="right">
      <label for="ossa.target.option.package">
        Package
      </label>
    </td>
    <td>
      


    <input type="text" value="" id="ossa.target.package"
                         name="ossa.target.package" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.package&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.package');
              var select_menu = Y.DOM.byId('ossa.target.package-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-package" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a package", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "DistributionPackage", "extra_no_results_message": null, "selected_value": null, "show_assign_me_button": false, "show_widget_id": "show-widget-ossa-target-package", "step_title": "Search by name", "assign_me_text": "Pick me", "input_element": "ossa.target.package"};
        var show_widget_id = 'show-widget-ossa-target-package';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>

  <tr>
    <td>
      <label>
        <input class="radioType" checked="checked" id="ossa.target.option.product" name="ossa.target" type="radio" value="product" />
       Project
      </label>
    </td>
    <td>
      


    <input type="text" value="ossa" id="ossa.target.product"
                         name="ossa.target.product" size="20"
                         maxlength=""
                         onKeyPress="selectWidget(&#x27;ossa.target.option.product&#x27;, event)" style=""
                         class="" />

    
      
      <script type="text/javascript">
          LPJS.use('node', 'lp.app.picker', function(Y) {
              var text_input = Y.DOM.byId('ossa.target.product');
              var select_menu = Y.DOM.byId('ossa.target.product-suggestions');
              Y.lp.app.picker.connect_select_menu(
                  select_menu, text_input);
          });</script>
    

    <span class="hidden">(<a id="show-widget-ossa-target-product" href="#">Find&hellip;</a>)</span>
    <script>
    LPJS.use('node', 'lp.app.picker', function(Y) {
        var config = {"show_remove_button": false, "header": "Select a project", "vocabulary_filters": [], "remove_team_text": "Remove team", "remove_person_text": "Remove person", "selected_value_metadata": null, "show_create_team": false, "picker_type": "default", "vocabulary_name": "Product", "extra_no_results_message": null, "selected_value": "ossa", "show_assign_me_button": false, "show_widget_id": "show-widget-ossa-target-product", "step_title": "Search", "assign_me_text": "Pick me", "input_element": "ossa.target.product"};
        var show_widget_id = 'show-widget-ossa-target-product';
        Y.lp.app.picker.addPicker(config, show_widget_id);
    });
    </script>
  



    </td>
  </tr>
</table>

          
        </td>
      </tr>
    </table>
    
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.status">Status</label>
        </td>
        <td>
          <label style="font-weight: bold" for="ossa.importance">Importance</label>
        </td>
        
      </tr>
      <tr>
        <td><div>
<div class="value">
<select id="ossa.status" name="ossa.status" size="1" >
<option selected="selected" value="Fix Released">Fix Released</option>
</select>
</div>
<input name="ossa.status-empty-marker" type="hidden" value="1" />
</div></td>
        <td title="Changeable only by a project maintainer or bug supervisor">
          <span class="sprite read-only"></span>
          <span class="importanceUNDECIDED">Undecided</span>
        </td>
        
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <label style="font-weight: bold" for="ossa.assignee">Assigned to</label>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="white-space: nowrap">

  <table>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" checked="checked" id="ossa.assignee.assign_to_nobody" name="ossa.assignee.option" value="ossa.assignee.assign_to_nobody" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_nobody">
          Nobody
        </label>
      </td>
    </tr>
    <tr>
      <td style="padding: 0 2px 2px 0">
        <input type="radio" id="ossa.assignee.assign_to_me" name="ossa.assignee.option" value="ossa.assignee.assign_to_me" />
      </td>
      <td style="padding: 0">
        <label style="font-weight: normal" for="ossa.assignee.assign_to_me">
          Me
        </label>
      </td>
    </tr>
    
    
  </table>


</td>
      </tr>
    </table>
    
  </div>
  <div class="field">
    <div>
      <label style="font-weight: bold" for="ossa.comment_on_change">Comment on this change (optional)</label>
      <textarea cols="62" rows="4" id="ossa.comment_on_change" name="ossa.comment_on_change"></textarea>
    </div>
    <div>
      <label style="font-weight: normal">
        <input type="checkbox" name="subscribe" id="subscribe" value="Subscribe" />
        Email me about changes to this bug report
      </label>
    </div>
  </div>
  
</form>
</td>
    </tr>
  


        
      </tbody>

    </table>



<div class="actions">
  
    <span id="also-affects-product" class="">
    <a class="menu-link-addupstream sprite add" href="https://bugs.launchpad.net/keystone/+bug/1872735/+choose-affected-product">Also affects project</a>
        <a href="/+help-bugs/also-affects-project-help.html" target="help" class="sprite maybe action-icon">(?)</a>
    </span>
    <span id="also-affects-package" class="">
    <a class="menu-link-adddistro sprite add" href="https://bugs.launchpad.net/keystone/+bug/1872735/+distrotask">Also affects distribution/package</a>
    </span>
    <a class="menu-link-nominate sprite milestone" href="https://bugs.launchpad.net/keystone/+bug/1872735/+nominate">Nominate for series</a>
    
  

</div>




      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>Being authorized within a limited scope context, i.e. trust / oauth / application credential with a limited role, e.g. &quot;monitoring_viewer&quot; or &quot;viewer&quot;, it is still possible to create EC2 credentials. User can auth against Keystone using EC2 credentials and obtain all project roles<br />
&nbsp;of a trust/oauth/<wbr />application_<wbr />credential owner.</p>
<p>I prepared a tool to auth against keyston using ec2 credentials: <a rel="nofollow" href="https://github.com/kayrus/ec2auth">https:/<wbr />/github.<wbr />com/kayrus/<wbr />ec2auth</a></p>
<p>* auth against keystone using trust/oauth/<wbr />application_<wbr />credential credentials<br />
* issue ec2 credentials: &quot;openstack ec2 credentials create&quot;<br />
* authenticate against keystone using ec2 credentials: &quot;ec2auth --access 7522162ced8f4e3<wbr />eb9502168ef1995<wbr />84 --secret c558d9401a6943b<wbr />bbb77a83ce910e5<wbr />a5 --debug&quot;</p>
<p>You&#x27;ll see that returned token contains all owner roles.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          <span>See <a href="comments/0">original description</a></span>
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="unofficial-tag" href="/keystone/+bugs?field.tag=in-stable-pike">in-stable-pike</a>
            <a class="unofficial-tag" href="/keystone/+bugs?field.tag=in-stable-queens">in-stable-queens</a>
            <a class="unofficial-tag" href="/keystone/+bugs?field.tag=in-stable-rocky">in-stable-rocky</a>
            <a class="unofficial-tag" href="/keystone/+bugs?field.tag=in-stable-stein">in-stable-stein</a>
            <a class="unofficial-tag" href="/keystone/+bugs?field.tag=in-stable-train">in-stable-train</a>
            <a class="unofficial-tag" href="/keystone/+bugs?field.tag=in-stable-ussuri">in-stable-ussuri</a>
          </span>
          
          <a href="+edit" title="Edit tags" id="tags-trigger" class="sprite edit action-icon">Edit</a>
          <a href="/+help-bugs/tag-help.html" target="help" class="sprite maybe action-icon">Tag help</a>
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2020-12689" title="An issue was discovered in OpenStack ...">2020-12689</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-14T15:44:28.444058+00:00" title="2020-04-14 15:44:28 UTC">on 2020-04-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Since this report concerns a possible security risk, an incomplete<br />
security advisory task has been added while the core security<br />
reviewers for the affected project or projects confirm the bug and<br />
discuss the scope of any vulnerability along with potential<br />
solutions.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Since this report concerns a possible security risk, an incomplete
security advisory task has been added while the core security
reviewers for the affected project or projects confirm the bug and
discuss the scope of any vulnerability along with potential
solutions.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-14T21:29:33.748119+00:00" title="2020-04-14 21:29:33 UTC">on 2020-04-14</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5354179/+files/ec2.example.2">ec2.example.2</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5354179">Edit</a>
        (3.4 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Attached is what I get when I use your tool to authenticate with an ec2 credential for a user who only has the &quot;reader&quot; role on the &quot;demo&quot; project. The token only contains the &quot;reader&quot; role, which is expected. Any project-scoped request the user makes will be limited by that role.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Attached is what I get when I use your tool to authenticate with an ec2 credential for a user who only has the "reader" role on the "demo" project. The token only contains the "reader" role, which is expected. Any project-scoped request the user makes will be limited by that role.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in keystone: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Invalid
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~kay-diam" class="sprite person">kay (kay-diam)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-15T06:24:23.242865+00:00" title="2020-04-15 06:24:23 UTC">on 2020-04-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5354359/+files/test.log">test.log</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5354359">Edit</a>
        (12.7 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Colleen. Sorry for not being clear enough. I was talking about creating EC2 credentials under &quot;trust / oauth / application credential&quot;. For instance, when your base user has &quot;admin&quot; and &quot;viewer&quot; roles, you create &quot;application credential&quot; with a &quot;viewer&quot; and expect that &quot;application credential&quot; won&#x27;t be able to escalate privileges to &quot;admin&quot;.</p>
<p>However being authed using &quot;application credential&quot; with a &quot;viewer&quot; role allows to create EC2 credentials, which are associated with a parent user. Therefore &quot;application credential&quot; with a &quot;viewer&quot; role can successfully escalate privileges to &quot;admin&quot;.</p>
<p>I uploaded more detailed JSON logs for convenience. Note that I created &quot;application credential&quot; with a limited &quot;monitoring_viewer&quot; role, then created &quot;ec2 credentials&quot; within &quot;application credential&quot; scope, and escalated privileges to parent user roles.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Colleen. Sorry for not being clear enough. I was talking about creating EC2 credentials under "trust / oauth / application credential". For instance, when your base user has "admin" and "viewer" roles, you create "application credential" with a "viewer" and expect that "application credential" won't be able to escalate privileges to "admin".

However being authed using "application credential" with a "viewer" role allows to create EC2 credentials, which are associated with a parent user. Therefore "application credential" with a "viewer" role can successfully escalate privileges to "admin".

I uploaded more detailed JSON logs for convenience. Note that I created "application credential" with a limited "monitoring_viewer" role, then created "ec2 credentials" within "application credential" scope, and escalated privileges to parent user roles.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-15T17:45:30.575712+00:00" title="2020-04-15 17:45:30 UTC">on 2020-04-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for the clarification, I&#x27;ve now reproduced this.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for the clarification, I've now reproduced this.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in keystone: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Invalid &#8594; Triaged
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-15T19:44:55.490651+00:00" title="2020-04-15 19:44:55 UTC">on 2020-04-15</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This sounds like a class A report for a privilege escalation vulnerability:</p>
<p><a rel="nofollow" href="https://security.openstack.org/vmt-process.html#incident-report-taxonomy">https:/<wbr />/security.<wbr />openstack.<wbr />org/vmt-<wbr />process.<wbr />html#incident-<wbr />report-<wbr />taxonomy</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This sounds like a class A report for a privilege escalation vulnerability:

https://security.openstack.org/vmt-process.html#incident-report-taxonomy</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/6" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T07:38:48.627798+00:00" title="2020-04-16 07:38:48 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/6"> #6</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5355250/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch">0001-Respect-token-roles-when-creating-EC2-credentials.patch</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5355250">Edit</a>
        (22.4 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Attaching a fix for this. Running tempest and unit tests locally.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Attaching a fix for this. Running tempest and unit tests locally.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~kay-diam" class="sprite person">kay (kay-diam)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T08:09:22.013212+00:00" title="2020-04-16 08:09:22 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; OAUTH1 tokens already always contain all of the roles the authorizing user has on the requested project, ignoring the authorized roles that are stored with the access token during the authorization request.
</span></p>
<p>Hi Colleen, thanks for a fix. I read the &quot;<a rel="nofollow" href="https://docs.openstack.org/api-ref/identity/v3-ext/?expanded=authorize-request-token-detail#authorize-request-token">https:/<wbr />/docs.openstack<wbr />.org/api-<wbr />ref/identity/<wbr />v3-ext/<wbr />?expanded=<wbr />authorize-<wbr />request-<wbr />token-detail#<wbr />authorize-<wbr />request-<wbr />token</a>&quot; and I&#x27;m confused, why does the request contain roles list?</p>
<p><a rel="nofollow" href="https://github.com/openstack/keystone/blob/7bb6314e40d6947294260324e84a58de191f8609/keystone/api/os_oauth1.py#L287">https:/<wbr />/github.<wbr />com/openstack/<wbr />keystone/<wbr />blob/7bb6314e40<wbr />d6947294260324e<wbr />84a58de191f8609<wbr />/keystone/<wbr />api/os_<wbr />oauth1.<wbr />py#L287</a></p>
<p>Do I miss something?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; OAUTH1 tokens already always contain all of the roles the authorizing user has on the requested project, ignoring the authorized roles that are stored with the access token during the authorization request.

Hi Colleen, thanks for a fix. I read the "https://docs.openstack.org/api-ref/identity/v3-ext/?expanded=authorize-request-token-detail#authorize-request-token" and I'm confused, why does the request contain roles list?

https://github.com/openstack/keystone/blob/7bb6314e40d6947294260324e84a58de191f8609/keystone/api/os_oauth1.py#L287

Do I miss something?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T14:24:32.326707+00:00" title="2020-04-16 14:24:32 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; I&#x27;m confused, why does the request contain roles list?
</span></p>
<p>I find this confusing too. Let me know if you see the same behavior. I don&#x27;t think it&#x27;s the intended behavior but as far as I can tell it&#x27;s either always been that way or has for a long time, and wasn&#x27;t discovered because it used to be rare to have more than one role assignment on a project.</p>
<p>I think it&#x27;s fixable but the patch for this bug was already getting dense. I think opening a second (public?) bug might be worthwhile.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; I'm confused, why does the request contain roles list?

I find this confusing too. Let me know if you see the same behavior. I don't think it's the intended behavior but as far as I can tell it's either always been that way or has for a long time, and wasn't discovered because it used to be rare to have more than one role assignment on a project.

I think it's fixable but the patch for this bug was already getting dense. I think opening a second (public?) bug might be worthwhile.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T14:24:58.035483+00:00" title="2020-04-16 14:24:58 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; Attaching a fix for this. Running tempest and unit tests locally.
</span></p>
<p>Tempest and py37/pep8 tests passed for me locally.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; Attaching a fix for this. Running tempest and unit tests locally.

Tempest and py37/pep8 tests passed for me locally.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/10" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~kay-diam" class="sprite person">kay (kay-diam)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T14:57:06.680511+00:00" title="2020-04-16 14:57:06 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/10"> #10</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; I think opening a second (public?) bug might be worthwhile.
</span></p>
<p>To be on the safe side, I&#x27;d open a private issue for this, because &quot;openstack request token authorize&quot; requires a role definition and &quot;OAuth1 trustor&quot; user expects that oauth1 token will be limited to this role, but it this role is ignored by Keystone: <a rel="nofollow" href="https://bugs.launchpad.net/keystone/+bug/1873290">https:/<wbr />/bugs.launchpad<wbr />.net/keystone/<wbr />+bug/1873290</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; I think opening a second (public?) bug might be worthwhile.

To be on the safe side, I'd open a private issue for this, because "openstack request token authorize" requires a role definition and "OAuth1 trustor" user expects that oauth1 token will be limited to this role, but it this role is ignored by Keystone: https://bugs.launchpad.net/keystone/+bug/1873290</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T19:45:59.444242+00:00" title="2020-04-16 19:45:59 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5355722/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch">0001-Respect-token-roles-when-creating-EC2-credentials.patch</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5355722">Edit</a>
        (22.7 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated release note to include bug reference</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated release note to include bug reference</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/12" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T20:05:51.885331+00:00" title="2020-04-16 20:05:51 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/12"> #12</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Given the interrelationship, should we try to cover this and <a href="/bugs/1873290" class="bug-link">bug 1873290</a> in the same advisory, or write them up and disclose them independently when the time comes?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Given the interrelationship, should we try to cover this and bug 1873290 in the same advisory, or write them up and disclose them independently when the time comes?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-16T22:12:46.087699+00:00" title="2020-04-16 22:12:46 UTC">on 2020-04-16</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Colleen&#x27;s patch looks fine, would like another pair of eyes on it as well as it touches a bit more logic here.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Colleen's patch looks fine, would like another pair of eyes on it as well as it touches a bit more logic here.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~knikolla" class="sprite person">Kristi Nikolla (knikolla)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-17T02:03:25.964885+00:00" title="2020-04-17 02:03:25 UTC">on 2020-04-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Colleen&#x27;s patch at #11 looks good and the test correctly covers the issue. The release note also accurately describes the problem and solution.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Colleen's patch at #11 looks good and the test correctly covers the issue. The release note also accurately describes the problem and solution.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~lbragstad" class="sprite person">Lance Bragstad (lbragstad)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-17T02:06:00.991799+00:00" title="2020-04-17 02:06:00 UTC">on 2020-04-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>+2 on Colleen&#x27;s patch in comment #11.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">+2 on Colleen's patch in comment #11.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-17T03:54:34.456989+00:00" title="2020-04-17 03:54:34 UTC">on 2020-04-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; Given the interrelationship, should we try to cover this and <a href="/bugs/1873290" class="bug-link">bug 1873290</a> in the same advisory, or write them up and disclose them independently when the time comes?
</span></p>
<p>Although they are separate problems, the solution to <a href="/bugs/1873290" class="bug-link">bug 1873290</a> is closely related to the solution to this one so I think it&#x27;s not possible to safely disclose them separately.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; Given the interrelationship, should we try to cover this and bug 1873290 in the same advisory, or write them up and disclose them independently when the time comes?

Although they are separate problems, the solution to bug 1873290 is closely related to the solution to this one so I think it's not possible to safely disclose them separately.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-21T20:47:41.902083+00:00" title="2020-04-21 20:47:41 UTC">on 2020-04-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Below is a rough draft for an impact description for this bug, please review it for any changes.</p>
<p>I assumed this will not get fixed before ussuri release as we will need this impact before obtaining a CVE.</p>
<p>Also @kay, if there is another name/alias you wish to go by, please feel free to correct me.</p>
<p>Title: EC2 and/or credential endpoints are not protected from a scoped context<br />
Reporter: kay (kay-diam)<br />
Products: Keystone<br />
Affects: ==15.0.0, ==16.0.0, ==17.0.0</p>
<p>Description:<br />
kay (kay-diam) reported a vulnerability in Keystone&#x27;s EC2 credentials API. Any user authenticated within a limited scope (trust/<wbr />oauth/applicati<wbr />on credential) can create an EC2 credential with an escalated permission, such as obtaining &quot;admin&quot; while the user is on a limited &quot;viewer&quot; role.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Below is a rough draft for an impact description for this bug, please review it for any changes. 

I assumed this will not get fixed before ussuri release as we will need this impact before obtaining a CVE.

Also @kay, if there is another name/alias you wish to go by, please feel free to correct me.


Title: EC2 and/or credential endpoints are not protected from a scoped context 
Reporter: kay (kay-diam)
Products: Keystone
Affects: ==15.0.0, ==16.0.0, ==17.0.0

Description:
kay (kay-diam) reported a vulnerability in Keystone's EC2 credentials API. Any user authenticated within a limited scope (trust/oauth/application credential) can create an EC2 credential with an escalated permission, such as obtaining "admin" while the user is on a limited "viewer" role.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-21T21:20:23.162069+00:00" title="2020-04-21 21:20:23 UTC">on 2020-04-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; Affects: ==15.0.0, ==16.0.0, ==17.0.0
</span></p>
<p>I think this affects Rocky too, which is 14.0.0. Will verify shortly.<br />
<a rel="nofollow" href="https://opendev.org/openstack/keystone/src/branch/stable/rocky/keystone/contrib/ec2/controllers.py#L148-L150">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />keystone/<wbr />src/branch/<wbr />stable/<wbr />rocky/keystone/<wbr />contrib/<wbr />ec2/controllers<wbr />.py#L148-<wbr />L150</a><br />
<a rel="nofollow" href="https://opendev.org/openstack/keystone/src/branch/stable/rocky/keystone/contrib/ec2/controllers.py#L296-L298">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />keystone/<wbr />src/branch/<wbr />stable/<wbr />rocky/keystone/<wbr />contrib/<wbr />ec2/controllers<wbr />.py#L296-<wbr />L298</a></p>
<p><span class="foldable-quoted">&gt; Any user authenticated within a limited scope ... can create an EC2 credential with an escalated permission, such as obtaining &quot;admin&quot; while the user is on a limited &quot;viewer&quot; role.
</span></p>
<p>This look okay to me, though I think it overestimates the problem slightly. The user who is exploiting this can only assume the role assignments that the delegator currently has on the project, which might not necessarily be as bad as admin. But if the impact description is meant to illustrate the worst-case scenario then this looks fine to me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; Affects: ==15.0.0, ==16.0.0, ==17.0.0

I think this affects Rocky too, which is 14.0.0. Will verify shortly.
https://opendev.org/openstack/keystone/src/branch/stable/rocky/keystone/contrib/ec2/controllers.py#L148-L150
https://opendev.org/openstack/keystone/src/branch/stable/rocky/keystone/contrib/ec2/controllers.py#L296-L298

&gt; Any user authenticated within a limited scope ... can create an EC2 credential with an escalated permission, such as obtaining "admin" while the user is on a limited "viewer" role.

This look okay to me, though I think it overestimates the problem slightly. The user who is exploiting this can only assume the role assignments that the delegator currently has on the project, which might not necessarily be as bad as admin. But if the impact description is meant to illustrate the worst-case scenario then this looks fine to me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-21T21:53:11.032900+00:00" title="2020-04-21 21:53:11 UTC">on 2020-04-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Examples in advisories will typically illustrate worst-case scenarios, but we use terms like &quot;can,&quot; &quot;could,&quot; &quot;may,&quot; or &quot;might&quot; so as to avoid writing in absolutes and make it apparent that the severity of the impact depends greatly on situational variables.</p>
<p>As for whether this can be disclosed soon enough to make it into Ussuri, final release candidates aren&#x27;t due until May 8. If we took the day before as the proposed disclosure date (which would admittedly be cutting it close), then we would need a suitable impact description and working backports no later than May 4. If we had those any time between now and April 25, we could set a disclosure date of April 28 (too late for RC1 so would need to be committed to both master and stable/ussuri branches, but still well in time for the release). Timeframes for coordinated disclosure are calculated per the rules outlined here: <a rel="nofollow" href="https://security.openstack.org/vmt-process.html#embargoed-disclosure">https:/<wbr />/security.<wbr />openstack.<wbr />org/vmt-<wbr />process.<wbr />html#embargoed-<wbr />disclosure</a></p>
<p>Also, the reporter detail in parentheses would typically be Kay&#x27;s employer or other affiliated organization they wanted to credit along with their name.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Examples in advisories will typically illustrate worst-case scenarios, but we use terms like "can," "could," "may," or "might" so as to avoid writing in absolutes and make it apparent that the severity of the impact depends greatly on situational variables.

As for whether this can be disclosed soon enough to make it into Ussuri, final release candidates aren't due until May 8. If we took the day before as the proposed disclosure date (which would admittedly be cutting it close), then we would need a suitable impact description and working backports no later than May 4. If we had those any time between now and April 25, we could set a disclosure date of April 28 (too late for RC1 so would need to be committed to both master and stable/ussuri branches, but still well in time for the release). Timeframes for coordinated disclosure are calculated per the rules outlined here: https://security.openstack.org/vmt-process.html#embargoed-disclosure

Also, the reporter detail in parentheses would typically be Kay's employer or other affiliated organization they wanted to credit along with their name.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-21T22:21:44.186387+00:00" title="2020-04-21 22:21:44 UTC">on 2020-04-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; &gt; Affects: ==15.0.0, ==16.0.0, ==17.0.0
</span></p>
<p><span class="foldable-quoted">&gt; I think this affects Rocky too, which is 14.0.0. Will verify shortly.
</span></p>
<p>Verified this affects Rocky.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; &gt; Affects: ==15.0.0, ==16.0.0, ==17.0.0

&gt; I think this affects Rocky too, which is 14.0.0. Will verify shortly.

Verified this affects Rocky.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-21T22:43:28.667716+00:00" title="2020-04-21 22:43:28 UTC">on 2020-04-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated, please review:</p>
<p>Title: EC2 and/or credential endpoints are not protected from a scoped context<br />
Reporter: kay<br />
Products: Keystone<br />
Affects: &gt;=14.0.0 &lt;=14.2.0, ==15.0.0, ==16.0.0</p>
<p>Description:<br />
kay reported a vulnerability in Keystone&#x27;s EC2 credentials API. Any user authenticated within a limited scope (trust/<wbr />oauth/applicati<wbr />on credential) can create an EC2 credential with an escalated permission, such as obtaining &quot;admin&quot; while the user is on a limited &quot;viewer&quot; role.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated, please review:

Title: EC2 and/or credential endpoints are not protected from a scoped context
Reporter: kay
Products: Keystone
Affects: &gt;=14.0.0 &lt;=14.2.0, ==15.0.0, ==16.0.0

Description:
kay reported a vulnerability in Keystone's EC2 credentials API. Any user authenticated within a limited scope (trust/oauth/application credential) can create an EC2 credential with an escalated permission, such as obtaining "admin" while the user is on a limited "viewer" role.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-21T23:41:02.455313+00:00" title="2020-04-21 23:41:02 UTC">on 2020-04-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p><span class="foldable-quoted">&gt; Verified this affects Rocky.
</span></p>
<p>I was off by one in my head, I forgot that Rocky just went to EM. I interpret <a rel="nofollow" href="https://security.openstack.org/vmt-process.html#supported-versions">https:/<wbr />/security.<wbr />openstack.<wbr />org/vmt-<wbr />process.<wbr />html#supported-<wbr />versions</a> to mean we don&#x27;t need to support fixes for Rocky? (a lot of the controller code changed between Rocky and Stein so the backport is a pain)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">&gt; Verified this affects Rocky.

I was off by one in my head, I forgot that Rocky just went to EM. I interpret https://security.openstack.org/vmt-process.html#supported-versions to mean we don't need to support fixes for Rocky? (a lot of the controller code changed between Rocky and Stein so the backport is a pain)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/23" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-22T16:55:05.317243+00:00" title="2020-04-22 16:55:05 UTC">on 2020-04-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/23"> #23</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes, if Rocky has entered extended maintenance now for Keystone, there will be no new Rocky stable point release which includes the fix (even if the stable/rocky branch gets a backport of it under extended maintenance). We usually try to refer to ranges with inequalities excluding the next highest possible version number, which for Stein would be 15.0.1. When there&#x27;s only a singular version in the range, like with 16.0.0 for Train, an equivalency is acceptable. There should be no need to mention 17.0.0 unless the fix does not get backported into stable/ussuri prior to Ussuri release day. As such, an accurate impact would include...</p>
<p>Affects: &lt;15.0.1, ==16.0.0</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes, if Rocky has entered extended maintenance now for Keystone, there will be no new Rocky stable point release which includes the fix (even if the stable/rocky branch gets a backport of it under extended maintenance). We usually try to refer to ranges with inequalities excluding the next highest possible version number, which for Stein would be 15.0.1. When there's only a singular version in the range, like with 16.0.0 for Train, an equivalency is acceptable. There should be no need to mention 17.0.0 unless the fix does not get backported into stable/ussuri prior to Ussuri release day. As such, an accurate impact would include...

Affects: &lt;15.0.1, ==16.0.0</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/24" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-22T17:24:00.819784+00:00" title="2020-04-22 17:24:00 UTC">on 2020-04-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/24"> #24</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated, please review:</p>
<p>Title: EC2 and/or credential endpoints are not protected from a scoped context<br />
Reporter: kay<br />
Products: Keystone<br />
Affects: &lt;15.0.1, ==16.0.0</p>
<p>Description:<br />
kay reported a vulnerability in Keystone&#x27;s EC2 credentials API. Any user authenticated within a limited scope (trust/<wbr />oauth/applicati<wbr />on credential) can create an EC2 credential with an escalated permission, such as obtaining &quot;admin&quot; while the user is on a limited &quot;viewer&quot; role.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated, please review:

Title: EC2 and/or credential endpoints are not protected from a scoped context
Reporter: kay
Products: Keystone
Affects: &lt;15.0.1, ==16.0.0

Description:
kay reported a vulnerability in Keystone's EC2 credentials API. Any user authenticated within a limited scope (trust/oauth/application credential) can create an EC2 credential with an escalated permission, such as obtaining "admin" while the user is on a limited "viewer" role.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/25" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-22T17:37:35.269090+00:00" title="2020-04-22 17:37:35 UTC">on 2020-04-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/25"> #25</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Also, the &quot;and/or&quot; in the title should probably just be &quot;and&quot; as that&#x27;s more inclusive and less likely to lead to confusion if someone has both.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Also, the "and/or" in the title should probably just be "and" as that's more inclusive and less likely to lead to confusion if someone has both.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/26" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-22T17:59:47.417727+00:00" title="2020-04-22 17:59:47 UTC">on 2020-04-22</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/26"> #26</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated, please review:</p>
<p>Title: EC2 and credential endpoints are not protected from a scoped context<br />
Reporter: kay<br />
Products: Keystone<br />
Affects: &lt;15.0.1, ==16.0.0</p>
<p>Description:<br />
kay reported a vulnerability in Keystone&#x27;s EC2 credentials API. Any user authenticated within a limited scope (trust/<wbr />oauth/applicati<wbr />on credential) can create an EC2 credential with an escalated permission, such as obtaining &quot;admin&quot; while the user is on a limited &quot;viewer&quot; role.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated, please review:

Title: EC2 and credential endpoints are not protected from a scoped context
Reporter: kay
Products: Keystone
Affects: &lt;15.0.1, ==16.0.0

Description:
kay reported a vulnerability in Keystone's EC2 credentials API. Any user authenticated within a limited scope (trust/oauth/application credential) can create an EC2 credential with an escalated permission, such as obtaining "admin" while the user is on a limited "viewer" role.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/27" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-27T16:50:24.878010+00:00" title="2020-04-27 16:50:24 UTC">on 2020-04-27</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/27"> #27</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The impact description looks fine to me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The impact description looks fine to me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in keystone: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Triaged &#8594; In Progress
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Colleen Murphy (krinkle)
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/28" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-27T22:03:58.669115+00:00" title="2020-04-27 22:03:58 UTC">on 2020-04-27</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/28"> #28</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I agree, Gage&#x27;s impact description in comment #26 looks ready for a CVE assignment request.</p>
<p>Separately, it seems we&#x27;ve reached some consensus that we should switch <a href="/bugs/1872755" class="bug-link">bug 1872755</a> to public at the same time this report is officially disclosed.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I agree, Gage's impact description in comment #26 looks ready for a CVE assignment request.

Separately, it seems we've reached some consensus that we should switch bug 1872755 to public at the same time this report is officially disclosed.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/29" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-28T21:10:25.830169+00:00" title="2020-04-28 21:10:25 UTC">on 2020-04-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/29"> #29</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Awaiting CVE, does the patch here apply cleanly to Stein/Train as well?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Awaiting CVE, does the patch here apply cleanly to Stein/Train as well?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/30" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-28T22:12:20.419989+00:00" title="2020-04-28 22:12:20 UTC">on 2020-04-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/30"> #30</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5363000/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch-train">train</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5363000">Edit</a>
        (23.2 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The patch does not apply cleanly. Attaching the modified backports for stein and train.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The patch does not apply cleanly. Attaching the modified backports for stein and train.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/31" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-28T22:12:50.437434+00:00" title="2020-04-28 22:12:50 UTC">on 2020-04-28</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/31"> #31</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5363001/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch-stein">stein</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5363001">Edit</a>
        (23.2 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/32" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-29T19:57:19.075231+00:00" title="2020-04-29 19:57:19 UTC">on 2020-04-29</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/32"> #32</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5363648/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch-stein">stein updated</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5363648">Edit</a>
        (23.4 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fixed unit test for stein patch</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fixed unit test for stein patch</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/33" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-30T03:39:04.404290+00:00" title="2020-04-30 03:39:04 UTC">on 2020-04-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/33"> #33</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Waiting on a response for the CVE.</p>
<p>I&#x27;d like to propose next Tuesday (May 5th) as the proper disclosure date as well for this. Does that sound reasonable?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Waiting on a response for the CVE.

I'd like to propose next Tuesday (May 5th) as the proper disclosure date as well for this. Does that sound reasonable?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/34" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-04-30T21:18:07.589142+00:00" title="2020-04-30 21:18:07 UTC">on 2020-04-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/34"> #34</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>May 5 should work as long as we send a downstream stakeholder notification with the patches for this no later than tomorrow (Friday, May 1).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">May 5 should work as long as we send a downstream stakeholder notification with the patches for this no later than tomorrow (Friday, May 1).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/35" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-01T15:14:49.598050+00:00" title="2020-05-01 15:14:49 UTC">on 2020-05-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/35"> #35</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>In retrospect, what with the tight timeline and this being a major holiday weekend for much of the World, let&#x27;s push the advisory date to Wednesday May 6.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">In retrospect, what with the tight timeline and this being a major holiday weekend for much of the World, let's push the advisory date to Wednesday May 6.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/36" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-01T15:59:40.581476+00:00" title="2020-05-01 15:59:40 UTC">on 2020-05-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/36"> #36</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>May 6th works, we will still send out the embargo notification today.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">May 6th works, we will still send out the embargo notification today.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/37" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-01T17:52:31.239885+00:00" title="2020-05-01 17:52:31 UTC">on 2020-05-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/37"> #37</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Notification sent for this one.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Notification sent for this one.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/38" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nickthetait" class="sprite person">Nick Tait (nickthetait)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-01T23:53:20.017613+00:00" title="2020-05-01 23:53:20 UTC">on 2020-05-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/38"> #38</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I also support Class A for this one. Description looks pretty good.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I also support Class A for this one. Description looks pretty good.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/39" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-01T23:59:41.408728+00:00" title="2020-05-01 23:59:41 UTC">on 2020-05-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/39"> #39</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;d like to propose squashing the patches for this and the other currently-private EC2 bugs reported by kay into one patch, with the fix for the OAuth1 <a href="/bugs/1873290" class="bug-link">bug 1873290</a> kept as its own patch that will only affect the token model code and not the EC2 credential code. This cuts the number of patches needed from 4 per branch down to 2, so with 4 branches the total number is cut from 16 to 8. This eliminates the merge conflicts, will make it easier for stakeholders to patch their packages and deployments and will make the public review and backporting process in gerrit much smoother. I&#x27;ve reworked the patches for master in my development environment and am currently validating them, and if the VMT is okay with this approach I will do the same for ussuri, train, and stein and attach them to the relevant bugs.</p>
<p>If, on the other hand, it is too late to do this reorganization since the embargo notification has already been sent, I will instead just update the patches to resolve the merge conflict with the now-landed <a rel="nofollow" href="https://review.opendev.org/724124">https:/<wbr />/review.<wbr />opendev.<wbr />org/724124</a>.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I'd like to propose squashing the patches for this and the other currently-private EC2 bugs reported by kay into one patch, with the fix for the OAuth1 bug 1873290 kept as its own patch that will only affect the token model code and not the EC2 credential code. This cuts the number of patches needed from 4 per branch down to 2, so with 4 branches the total number is cut from 16 to 8. This eliminates the merge conflicts, will make it easier for stakeholders to patch their packages and deployments and will make the public review and backporting process in gerrit much smoother. I've reworked the patches for master in my development environment and am currently validating them, and if the VMT is okay with this approach I will do the same for ussuri, train, and stein and attach them to the relevant bugs.

If, on the other hand, it is too late to do this reorganization since the embargo notification has already been sent, I will instead just update the patches to resolve the merge conflict with the now-landed https://review.opendev.org/724124.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/40" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nickthetait" class="sprite person">Nick Tait (nickthetait)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-02T00:31:51.129047+00:00" title="2020-05-02 00:31:51 UTC">on 2020-05-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/40"> #40</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Simplifying the number of patches is highly desirable (but I&#x27;m not a VMT member). If a notified downstream fails to request access and pay attention to developments, that is on them.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Simplifying the number of patches is highly desirable (but I'm not a VMT member). If a notified downstream fails to request access and pay attention to developments, that is on them.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/41" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nickthetait" class="sprite person">Nick Tait (nickthetait)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-02T01:07:25.113121+00:00" title="2020-05-02 01:07:25 UTC">on 2020-05-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/41"> #41</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>While not part of the VMT, I support simplifying the patches. Personally do not see any drawbacks to this option.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">While not part of the VMT, I support simplifying the patches. Personally do not see any drawbacks to this option.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/42" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-04T04:58:13.002827+00:00" title="2020-05-04 04:58:13 UTC">on 2020-05-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/42"> #42</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365983/+files/0002-Fix-security-issues-with-EC2-credentials.patch">master</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5365983">Edit</a>
        (42.4 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;ve reworked this patch to include fixes for <a href="/bugs/1872733" class="bug-link">bug 1872733</a>, bug, 1872735 and <a href="/bugs/1872755" class="bug-link">bug 1872755</a> and to resolve the merge conflict arising from the fix for <a href="/bugs/1872737" class="bug-link">bug 1872737</a>. These patches are independently appliable but they won&#x27;t pass unit tests without also applying the fix for 1873290. Attaching patches for master, ussuri, train, and stein.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I've reworked this patch to include fixes for bug 1872733, bug, 1872735 and bug 1872755 and to resolve the merge conflict arising from the fix for bug 1872737. These patches are independently appliable but they won't pass unit tests without also applying the fix for 1873290. Attaching patches for master, ussuri, train, and stein.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/43" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-04T04:58:42.850457+00:00" title="2020-05-04 04:58:42 UTC">on 2020-05-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/43"> #43</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365984/+files/0002-Fix-security-issues-with-EC2-credentials.patch">ussuri</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5365984">Edit</a>
        (42.5 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/44" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-04T04:59:00.753709+00:00" title="2020-05-04 04:59:00 UTC">on 2020-05-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/44"> #44</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365985/+files/0002-Fix-security-issues-with-EC2-credentials.patch">train</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5365985">Edit</a>
        (43.2 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/45" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-04T05:00:28.866452+00:00" title="2020-05-04 05:00:28 UTC">on 2020-05-04</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/45"> #45</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365986/+files/0002-Fix-security-issues-with-EC2-credentials.patch">stein</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5365986">Edit</a>
        (43.2 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Note that this patch only applies on top of the as-of-this-<wbr />writing-<wbr />unmerged <a rel="nofollow" href="https://review.opendev.org/725069">https:/<wbr />/review.<wbr />opendev.<wbr />org/725069</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Note that this patch only applies on top of the as-of-this-writing-unmerged https://review.opendev.org/725069</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/46" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nickthetait" class="sprite person">Nick Tait (nickthetait)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T00:55:35.449166+00:00" title="2020-05-05 00:55:35 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/46"> #46</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Description doesn&#x27;t include 17. That needs fixing right?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Description doesn't include 17. That needs fixing right?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/47" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nickthetait" class="sprite person">Nick Tait (nickthetait)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T00:57:43.419340+00:00" title="2020-05-05 00:57:43 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/47"> #47</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>(I was trying to talk about the affects field of description but didn&#x27;t mention that)<br />
Corrected version should read<br />
Affects: &lt;15.0.1, ==16.0.0, ==17.0.0</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">(I was trying to talk about the affects field of description but didn't mention that)
Corrected version should read
Affects: &lt;15.0.1, ==16.0.0, ==17.0.0</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/48" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T01:47:27.072638+00:00" title="2020-05-05 01:47:27 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/48"> #48</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The goal is to get this merged into Ussuri before the release is cut, so any releases after 16.0.0 should not be vulnerable.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The goal is to get this merged into Ussuri before the release is cut, so any releases after 16.0.0 should not be vulnerable.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/49" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T01:51:57.553259+00:00" title="2020-05-05 01:51:57 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/49"> #49</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5366542/+files/0002-Fix-security-issues-with-EC2-credentials.patch">rocky</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5366542">Edit</a>
        (45.1 KiB,
        text/plain)
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I&#x27;m attaching a patch for rocky even though it has reached EM to help distros that need to support older releases. This patch must be applied on top of this public patch: <a rel="nofollow" href="https://review.opendev.org/725385">https:/<wbr />/review.<wbr />opendev.<wbr />org/725385</a></p>
<p>To mitigate this bug for older branches, I recommend disabling the use of ec2 and s3 tokens as authentication mechanisms by removing ec2_extension, ec2_extension_v3, and s3_extension from the paste pipelines in keystone-paste.ini. Note that this will not work for rocky - even though keystone includes an example keystone-paste.ini file, it is not respected in the keystone service as this release was a transitional release away from the paste middleware implementation.</p>
<p>An alternative mitigation strategy is to disable the ability to create and modify credentials by restricting them with policies. For example, you can use the following rules in your policy.json:</p>
<p>&quot;identity:<wbr />create_<wbr />credential&quot;<wbr />: &quot;!&quot;<br />
&quot;identity:<wbr />update_<wbr />credential&quot;<wbr />: &quot;!&quot;<br />
&quot;identity:<wbr />ec2_create_<wbr />credential&quot;<wbr />: &quot;!&quot;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I'm attaching a patch for rocky even though it has reached EM to help distros that need to support older releases. This patch must be applied on top of this public patch: https://review.opendev.org/725385

To mitigate this bug for older branches, I recommend disabling the use of ec2 and s3 tokens as authentication mechanisms by removing ec2_extension, ec2_extension_v3, and s3_extension from the paste pipelines in keystone-paste.ini. Note that this will not work for rocky - even though keystone includes an example keystone-paste.ini file, it is not respected in the keystone service as this release was a transitional release away from the paste middleware implementation.

An alternative mitigation strategy is to disable the ability to create and modify credentials by restricting them with policies. For example, you can use the following rules in your policy.json:

"identity:create_credential": "!"
"identity:update_credential": "!"
"identity:ec2_create_credential": "!"</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/50" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~thomas-goirand" class="sprite person">Thomas Goirand (thomas-goirand)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T10:04:32.831945+00:00" title="2020-05-05 10:04:32 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/50"> #50</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi,</p>
<p>I found that less than 24 hours is a very short timeframe to get things organized:<br />
- patch the distro<br />
- test the patch<br />
- send to the security team<br />
- wait for approval<br />
- upload<br />
- wait for security team ACK of the upload</p>
<p>All of this in a few hours of time (since I got the pre-OSSA yesterday before sleep time) is really too short. I understand the urgency to fix this before the release is out, though we have until Friday for this, so maybe waiting until tomorrow was enough, no?</p>
<p>I&#x27;m working on this, hopefully I can catch up before the 1500 UTC deadline...</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi,

I found that less than 24 hours is a very short timeframe to get things organized:
- patch the distro
- test the patch
- send to the security team
- wait for approval
- upload
- wait for security team ACK of the upload

All of this in a few hours of time (since I got the pre-OSSA yesterday before sleep time) is really too short. I understand the urgency to fix this before the release is out, though we have until Friday for this, so maybe waiting until tomorrow was enough, no?

I'm working on this, hopefully I can catch up before the 1500 UTC deadline...
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/51" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~thomas-goirand" class="sprite person">Thomas Goirand (thomas-goirand)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T11:04:10.654353+00:00" title="2020-05-05 11:04:10 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/51"> #51</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5366711/+files/ec2_test_failure.txt">ec2_test_failure.txt</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5366711">Edit</a>
        (19.0 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Colleen,</p>
<p>I&#x27;m getting a unit test failure when building Keystone for Debian Buster (that&#x27;s Rocky) with the added patches on top of 14.2.0:</p>
<p>0001-Add-<wbr />cadf-auditing-<wbr />to-credentials.<wbr />patch<br />
CVE_Check_<wbr />timestamp_<wbr />of_signed_<wbr />EC2_token_<wbr />request.<wbr />patch<br />
0002_Fix_<wbr />security_<wbr />issues_<wbr />with_EC2_<wbr />credentials.<wbr />patch</p>
<p>Please find attached failure dump.</p>
<p>Can you help fixing it?</p>
<p>Cheers,</p>
<p>Thomas Goirand</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Colleen,

I'm getting a unit test failure when building Keystone for Debian Buster (that's Rocky) with the added patches on top of 14.2.0:

0001-Add-cadf-auditing-to-credentials.patch
CVE_Check_timestamp_of_signed_EC2_token_request.patch
0002_Fix_security_issues_with_EC2_credentials.patch

Please find attached failure dump.

Can you help fixing it?

Cheers,

Thomas Goirand
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/52" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~krinkle" class="sprite person">Colleen Murphy (krinkle)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T13:49:26.957964+00:00" title="2020-05-05 13:49:26 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/52"> #52</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5366841/+files/0001-Ensure-OAuth1-authorized-roles-are-respected.patch">bug 1873290 rocky patch</a>
        <a class="sprite edit action-icon" href="/keystone/+bug/1872735/+attachment/5366841">Edit</a>
        (5.5 KiB,
        text/plain)
      </li>
    </ul>

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Thomas, as mentioned in comment 42 you will also need the fix for <a href="/bugs/1873290" class="bug-link">bug 1873290</a> in order for that unit test test_access_<wbr />token_ec2_<wbr />credential to pass. I will attach the patch for rocky here for your convenience.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Thomas, as mentioned in comment 42 you will also need the fix for bug 1873290 in order for that unit test test_access_token_ec2_credential to pass. I will attach the patch for rocky here for your convenience.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/53" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~thomas-goirand" class="sprite person">Thomas Goirand (thomas-goirand)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T14:07:56.550527+00:00" title="2020-05-05 14:07:56 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/53"> #53</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>With this last patch that was missing, all builds fine, thanks!</p>
<p>Pushing this to the Debian security team.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">With this last patch that was missing, all builds fine, thanks!

Pushing this to the Debian security team.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/54" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T14:24:23.319571+00:00" title="2020-05-05 14:24:23 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/54"> #54</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Thomas,</p>
<p>The disclosure date is tomorrow at 1500 UTC, would you need this extended?</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Thomas,

The disclosure date is tomorrow at 1500 UTC, would you need this extended?</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/55" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~thomas-goirand" class="sprite person">Thomas Goirand (thomas-goirand)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T15:02:57.003156+00:00" title="2020-05-05 15:02:57 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/55"> #55</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Oh, I thought it was today. Tomorrow is fine for me then, this gives me plenty of time for testing!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Oh, I thought it was today. Tomorrow is fine for me then, this gives me plenty of time for testing!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/56" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T15:26:31.480424+00:00" title="2020-05-05 15:26:31 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/56"> #56</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Yes, and sorry about the tight disclosure timeline. OpenStack&#x27;s VMT process recommends 3-5 &quot;business days&quot; between downstream stakeholder notification and publication, but with final RCs for Ussuri due on Thursday we wanted to avoid releasing with known vulnerabilities which have fixes ready. As it is, we chose Wednesday instead of Tuesday because we realized last weekend was a major holiday for much of the World.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Yes, and sorry about the tight disclosure timeline. OpenStack's VMT process recommends 3-5 "business days" between downstream stakeholder notification and publication, but with final RCs for Ussuri due on Thursday we wanted to avoid releasing with known vulnerabilities which have fixes ready. As it is, we chose Wednesday instead of Tuesday because we realized last weekend was a major holiday for much of the World.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/57" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~thomas-goirand" class="sprite person">Thomas Goirand (thomas-goirand)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-05T23:31:33.786496+00:00" title="2020-05-05 23:31:33 UTC">on 2020-05-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/57"> #57</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hi Jeremy,</p>
<p>It&#x27;s all on me. I thought I had only about 16 hours to do my tests, but there&#x27;s 24 hours more than what I thought, which should hopefully be enough.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hi Jeremy,

It's all on me. I thought I had only about 16 hours to do my tests, but there's 24 hours more than what I thought, which should hopefully be enough.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/58" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T15:13:32.653039+00:00" title="2020-05-06 15:13:32 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/58"> #58</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>The embargo for this bug will now be lifted and fixes will be available in gerrit here shortly.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">The embargo for this bug will now be lifted and fixes will be available in gerrit here shortly.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/59" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T15:16:15.263666+00:00" title="2020-05-06 15:16:15 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/59">
                <strong>Fix proposed to keystone (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/59"> #59</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: master<br />
Review: <a rel="nofollow" href="https://review.opendev.org/725886">https:/<wbr />/review.<wbr />opendev.<wbr />org/725886</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: master
Review: https://review.opendev.org/725886</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/60" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T15:17:07.701272+00:00" title="2020-05-06 15:17:07 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/60">
                <strong>Fix proposed to keystone (stable/ussuri)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/60"> #60</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/ussuri<br />
Review: <a rel="nofollow" href="https://review.opendev.org/725888">https:/<wbr />/review.<wbr />opendev.<wbr />org/725888</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/ussuri
Review: https://review.opendev.org/725888</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/61" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T15:18:12.988060+00:00" title="2020-05-06 15:18:12 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/61">
                <strong>Fix proposed to keystone (stable/train)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/61"> #61</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/train<br />
Review: <a rel="nofollow" href="https://review.opendev.org/725891">https:/<wbr />/review.<wbr />opendev.<wbr />org/725891</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/train
Review: https://review.opendev.org/725891</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/62" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T15:19:04.125915+00:00" title="2020-05-06 15:19:04 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/62">
                <strong>Fix proposed to keystone (stable/stein)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/62"> #62</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/stein<br />
Review: <a rel="nofollow" href="https://review.opendev.org/725893">https:/<wbr />/review.<wbr />opendev.<wbr />org/725893</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/stein
Review: https://review.opendev.org/725893</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/63" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T15:20:34.102992+00:00" title="2020-05-06 15:20:34 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/63">
                <strong>Fix proposed to keystone (stable/rocky)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/63"> #63</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/rocky<br />
Review: <a rel="nofollow" href="https://review.opendev.org/725895">https:/<wbr />/review.<wbr />opendev.<wbr />org/725895</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/rocky
Review: https://review.opendev.org/725895</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/64" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-06T18:57:36.008796+00:00" title="2020-05-06 18:57:36 UTC">on 2020-05-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/64">
                <strong>Fix merged to ossa (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/64"> #64</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/725912">https:/<wbr />/review.<wbr />opendev.<wbr />org/725912</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/ossa/commit/?id=2548f46b0aff357f6c953b30179b4d8e151e4236">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />ossa/commit/<wbr />?id=2548f46b0af<wbr />f357f6c953b3017<wbr />9b4d8e151e4236</a><br />
Submitter: Zuul<br />
Branch:    master</p>
<p>commit 2548f46b0aff357<wbr />f6c953b30179b4d<wbr />8e151e4236<br />
Author: Gage Hugo &lt;email address hidden&gt;<br />
Date:   Wed May 6 10:57:15 2020 -0500</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add OSSA-2020-004 (CVEs Pending)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ide28e91b184eda<wbr />b45d22c47661ad6<wbr />bb6003dd244<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1872735<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #1872733</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/725912
Committed: https://git.openstack.org/cgit/openstack/ossa/commit/?id=2548f46b0aff357f6c953b30179b4d8e151e4236
Submitter: Zuul
Branch:    master

commit 2548f46b0aff357f6c953b30179b4d8e151e4236
Author: Gage Hugo &lt;gagehugo@gmail.com&gt;
Date:   Wed May 6 10:57:15 2020 -0500

    Add OSSA-2020-004 (CVEs Pending)
    
    Change-Id: Ide28e91b184edab45d22c47661ad6bb6003dd244
    Closes-Bug: #1872735
    Closes-Bug: #1872733
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/65" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-07T06:32:53.597750+00:00" title="2020-05-07 06:32:53 UTC">on 2020-05-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/65">
                <strong>Fix proposed to keystone (stable/pike)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/65"> #65</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/pike<br />
Review: <a rel="nofollow" href="https://review.opendev.org/726046">https:/<wbr />/review.<wbr />opendev.<wbr />org/726046</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/pike
Review: https://review.opendev.org/726046</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/66" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~nickthetait" class="sprite person">Nick Tait (nickthetait)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-07T16:36:16.321214+00:00" title="2020-05-07 16:36:16 UTC">on 2020-05-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/66">
                <strong>Re: EC2 and/or credential endpoints are not protected from a scoped context</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/66"> #66</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Any news on CVE assignment? This seems longer than usual.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Any news on CVE assignment? This seems longer than usual.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/67" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-07T16:54:16.343633+00:00" title="2020-05-07 16:54:16 UTC">on 2020-05-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/67"> #67</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I got a reply last night, updates will go out this afternoon.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I got a reply last night, updates will go out this afternoon.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/68" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-07T17:07:31.579806+00:00" title="2020-05-07 17:07:31 UTC">on 2020-05-07</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/68"> #68</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Our best guess is that MITRE is recently backlogged (understaffed/<wbr />overworked?<wbr />), and our publications to the oss-security ML yesterday prompted them to complete our requested assignments.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Our best guess is that MITRE is recently backlogged (understaffed/overworked?), and our publications to the oss-security ML yesterday prompted them to complete our requested assignments.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~gagehugo" class="sprite person">Gage Hugo (gagehugo)</a>
    
    <time title="2020-05-07 18:40:49 UTC" datetime="2020-05-07T18:40:49.158241+00:00">on 2020-05-07</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - EC2 and/or credential endpoints are not protected from a scoped context<br />+ [OSSA-2020-004] EC2 and/or credential endpoints are not protected from a<br />+ scoped context (CVE-2020-12689)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/69" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-07T19:53:08.233938+00:00" title="2020-05-07 19:53:08 UTC">on 2020-05-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/69">
                <strong>Fix merged to keystone (stable/ussuri)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/69"> #69</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/725888">https:/<wbr />/review.<wbr />opendev.<wbr />org/725888</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=2f2736ebb267c757ad77fcf25ee0aaeefab2a09d">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=2f2736ebb26<wbr />7c757ad77fcf25e<wbr />e0aaeefab2a09d</a><br />
Submitter: Zuul<br />
Branch:    stable/ussuri</p>
<p>commit 2f2736ebb267c75<wbr />7ad77fcf25ee0aa<wbr />eefab2a09d<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I39d0d705839fbe<wbr />31ac518ac9a8295<wbr />9e108cb7c1d<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1872733<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1872755<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1872735<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 37e9907a176dad6<wbr />843819b1bec4946<wbr />c3aecc4548)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/725888
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=2f2736ebb267c757ad77fcf25ee0aaeefab2a09d
Submitter: Zuul
Branch:    stable/ussuri

commit 2f2736ebb267c757ad77fcf25ee0aaeefab2a09d
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
    (cherry picked from commit 37e9907a176dad6843819b1bec4946c3aecc4548)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-ussuri
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/70" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-08T16:15:07.699695+00:00" title="2020-05-08 16:15:07 UTC">on 2020-05-08</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/70">
                <strong>Fix merged to keystone (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/70"> #70</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/725886">https:/<wbr />/review.<wbr />opendev.<wbr />org/725886</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=37e9907a176dad6843819b1bec4946c3aecc4548">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=37e9907a176<wbr />dad6843819b1bec<wbr />4946c3aecc4548</a><br />
Submitter: Zuul<br />
Branch:    master</p>
<p>commit 37e9907a176dad6<wbr />843819b1bec4946<wbr />c3aecc4548<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I39d0d705839fbe<wbr />31ac518ac9a8295<wbr />9e108cb7c1d<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1872733<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1872755<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #1872735</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/725886
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=37e9907a176dad6843819b1bec4946c3aecc4548
Submitter: Zuul
Branch:    master

commit 37e9907a176dad6843819b1bec4946c3aecc4548
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in keystone: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/71" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-08T16:23:01.882494+00:00" title="2020-05-08 16:23:01 UTC">on 2020-05-08</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/71">
                <strong>Fix proposed to keystone (stable/queens)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/71"> #71</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: stable/queens<br />
Review: <a rel="nofollow" href="https://review.opendev.org/726435">https:/<wbr />/review.<wbr />opendev.<wbr />org/726435</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: stable/queens
Review: https://review.opendev.org/726435</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/72" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-11T05:38:44.197548+00:00" title="2020-05-11 05:38:44 UTC">on 2020-05-11</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/72">
                <strong>Fix merged to keystone (stable/train)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/72"> #72</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/keystone/+bug/1872735/comments/72/+download">Download full text</a> (3.4 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/725891">https:/<wbr />/review.<wbr />opendev.<wbr />org/725891</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=54590544fb7a2cd65e23fce8abcf77296352cd29">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=54590544fb7<wbr />a2cd65e23fce8ab<wbr />cf77296352cd29</a><br />
Submitter: Zuul<br />
Branch:    stable/train</p>
<p>commit 54590544fb7a2cd<wbr />65e23fce8abcf77<wbr />296352cd29<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9, test helper<br />
&nbsp;&nbsp;&nbsp;&nbsp;in 52da4d0e12):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />api/credentials<wbr />.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />application_<wbr />credential.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />credential.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Depends-on: htt...</p></div>
    
    <p>
      <a href="/keystone/+bug/1872735/comments/72">Read more...</a>
    </p>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/725891
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=54590544fb7a2cd65e23fce8abcf77296352cd29
Submitter: Zuul
Branch:    stable/train

commit 54590544fb7a2cd65e23fce8abcf77296352cd29
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9, test helper
    in 52da4d0e12):
          keystone/api/credentials.py
          keystone/tests/unit/test_v3_application_credential.py
          keystone/tests/unit/test_v3_credential.py
    
    Depends-on: https://review.opendev.org/726526
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
    (cherry picked from commit 37e9907a176dad6843819b1bec4946c3aecc4548)
    (cherry picked from commit 2f2736ebb267c757ad77fcf25ee0aaeefab2a09d)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-train
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/73" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-11T20:02:11.479524+00:00" title="2020-05-11 20:02:11 UTC">on 2020-05-11</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/73">
                <strong>Fix merged to keystone (stable/stein)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/73"> #73</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/keystone/+bug/1872735/comments/73/+download">Download full text</a> (3.4 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/725893">https:/<wbr />/review.<wbr />opendev.<wbr />org/725893</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=206392a40ce3da3d389e5e7ec721ada2737b84da">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=206392a40ce<wbr />3da3d389e5e7ec7<wbr />21ada2737b84da</a><br />
Submitter: Zuul<br />
Branch:    stable/stein</p>
<p>commit 206392a40ce3da3<wbr />d389e5e7ec721ad<wbr />a2737b84da<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />api/credentials<wbr />.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />application_<wbr />credential.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />credential.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I39d0d705839fbe<wbr />31ac518ac9a8295<wbr />9e108..<wbr />.</p></div>
    
    <p>
      <a href="/keystone/+bug/1872735/comments/73">Read more...</a>
    </p>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/725893
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=206392a40ce3da3d389e5e7ec721ada2737b84da
Submitter: Zuul
Branch:    stable/stein

commit 206392a40ce3da3d389e5e7ec721ada2737b84da
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):
          keystone/api/credentials.py
          keystone/tests/unit/test_v3_application_credential.py
          keystone/tests/unit/test_v3_credential.py
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
    (cherry picked from commit 37e9907a176dad6843819b1bec4946c3aecc4548)
    (cherry picked from commit 2f2736ebb267c757ad77fcf25ee0aaeefab2a09d)
    (cherry picked from commit 27caafe3daa552663719954f2cd6713dd4493178)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-stein
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/74" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-13T17:14:49.048132+00:00" title="2020-05-13 17:14:49 UTC">on 2020-05-13</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/74">
                <strong>Fix merged to keystone (stable/rocky)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/74"> #74</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/keystone/+bug/1872735/comments/74/+download">Download full text</a> (3.9 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/725895">https:/<wbr />/review.<wbr />opendev.<wbr />org/725895</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=53d1ccb8a1bdbb5aa0efaacf9739b1a6f436e191">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=53d1ccb8a1b<wbr />dbb5aa0efaacf97<wbr />39b1a6f436e191</a><br />
Submitter: Zuul<br />
Branch:    stable/rocky</p>
<p>commit 53d1ccb8a1bdbb5<wbr />aa0efaacf9739b1<wbr />a6f436e191<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />api/credentials<wbr />.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />application_<wbr />credential.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />credential.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts due to flask reorg:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys...</p></div>
    
    <p>
      <a href="/keystone/+bug/1872735/comments/74">Read more...</a>
    </p>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/725895
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=53d1ccb8a1bdbb5aa0efaacf9739b1a6f436e191
Submitter: Zuul
Branch:    stable/rocky

commit 53d1ccb8a1bdbb5aa0efaacf9739b1a6f436e191
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):
          keystone/api/credentials.py
          keystone/tests/unit/test_v3_application_credential.py
          keystone/tests/unit/test_v3_credential.py
    
    Conflicts due to flask reorg:
            keystone/api/_shared/EC2_S3_Resource.py
            keystone/api/credentials.py
            keystone/api/users.py
            keystone/tests/unit/test_v3_credential.py
    
    Moved the test_update_credential_non_owner unit test to
    CredentialSelfServiceTestCase since in this branch the default policies
    are not affected by #1872733.
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
    (cherry picked from commit 37e9907a176dad6843819b1bec4946c3aecc4548)
    (cherry picked from commit 2f2736ebb267c757ad77fcf25ee0aaeefab2a09d)
    (cherry picked from commit 27caafe3daa552663719954f2cd6713dd4493178)
    (cherry picked from commit bfba75fc3c5c8f119f74dbf31347e008824a2134)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-rocky
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/75" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-05-14T22:09:43.477546+00:00" title="2020-05-14 22:09:43 UTC">on 2020-05-14</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/75">
                <strong>Fix merged to keystone (stable/queens)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/75"> #75</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/keystone/+bug/1872735/comments/75/+download">Download full text</a> (4.3 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/726435">https:/<wbr />/review.<wbr />opendev.<wbr />org/726435</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=487c7276c7608fb11086b9875b0d7cc7cf594a5a">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=487c7276c76<wbr />08fb11086b9875b<wbr />0d7cc7cf594a5a</a><br />
Submitter: Zuul<br />
Branch:    stable/queens</p>
<p>commit 487c7276c7608fb<wbr />11086b9875b0d7c<wbr />c7cf594a5a<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />api/credentials<wbr />.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />application_<wbr />credential.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />credential.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts due to flask reorg:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key...</p></div>
    
    <p>
      <a href="/keystone/+bug/1872735/comments/75">Read more...</a>
    </p>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/726435
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=487c7276c7608fb11086b9875b0d7cc7cf594a5a
Submitter: Zuul
Branch:    stable/queens

commit 487c7276c7608fb11086b9875b0d7cc7cf594a5a
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):
          keystone/api/credentials.py
          keystone/tests/unit/test_v3_application_credential.py
          keystone/tests/unit/test_v3_credential.py
    
    Conflicts due to flask reorg:
            keystone/api/_shared/EC2_S3_Resource.py
            keystone/api/credentials.py
            keystone/api/users.py
            keystone/tests/unit/test_v3_credential.py
    
    Conflicts due to token provider refactor between Queens and Rocky. Also
    conflicted due to changing method signature for _authenticate().
        keystone/credential/controllers.py
        keystone/contrib/ec2/controllers.py
        keystone/application_credential/controllers.py
        keystone/token/providers/common.py
    
    Moved the test_update_credential_non_owner unit test to
    CredentialSelfServiceTestCase since in this branch the default policies
    are not affected by #1872733.
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
    (cherry picked from commit 37e9907a176dad6843819b1bec4946c3aecc4548)
    (cherry picked from commit 2f2736ebb267c757ad77fcf25ee0aaeefab2a09d)
    (cherry picked from commit 27caafe3daa552663719954f2cd6713dd4493178)
    (cherry picked from commit bfba75fc3c5c8f119f74dbf31347e008824a2134)
    (cherry picked from commit 53d1ccb8a1bdbb5aa0efaacf9739b1a6f436e191)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-queens
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/keystone/+bug/1872735/comments/76" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2020-06-04T20:12:54.541165+00:00" title="2020-06-04 20:12:54 UTC">on 2020-06-04</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/keystone/+bug/1872735/comments/76">
                <strong>Fix merged to keystone (stable/pike)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/keystone/+bug/1872735/comments/76"> #76</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/keystone/+bug/1872735/comments/76/+download">Download full text</a> (4.2 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/726046">https:/<wbr />/review.<wbr />opendev.<wbr />org/726046</a><br />
Committed: <a rel="nofollow" href="https://git.openstack.org/cgit/openstack/keystone/commit/?id=a405e4b71d7de31e81a01f07e02f189650eb66fe">https:/<wbr />/git.openstack.<wbr />org/cgit/<wbr />openstack/<wbr />keystone/<wbr />commit/<wbr />?id=a405e4b71d7<wbr />de31e81a01f07e0<wbr />2f189650eb66fe</a><br />
Submitter: Zuul<br />
Branch:    stable/pike</p>
<p>commit a405e4b71d7de31<wbr />e81a01f07e02f18<wbr />9650eb66fe<br />
Author: Colleen Murphy &lt;email address hidden&gt;<br />
Date:   Tue Apr 14 16:47:44 2020 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix security issues with EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change addresses several issues in the creation and use of EC2/S3<br />
&nbsp;&nbsp;&nbsp;&nbsp;credentials with keystone tokens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;1. Disable altering credential owner attributes or metadata</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, an authenticated user can create an EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;for themself for a project they have a role on, then update the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential to target a user and project completely unrelated to them. In<br />
&nbsp;&nbsp;&nbsp;&nbsp;the worst case, this could be the admin user and a project the admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user has a role assignment on. A token granted for an altered credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;like this would allow the user to masquerade as the victim user. This<br />
&nbsp;&nbsp;&nbsp;&nbsp;patch ensures that when updating a credential, the new form of the<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential is one the acting user has access to: if the system admin<br />
&nbsp;&nbsp;&nbsp;&nbsp;user is changing the credential, the new user ID or project ID could be<br />
&nbsp;&nbsp;&nbsp;&nbsp;anything, but regular users may only change the credential to be one<br />
&nbsp;&nbsp;&nbsp;&nbsp;that they still own.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Relatedly, when a user uses an application credential or a trust to<br />
&nbsp;&nbsp;&nbsp;&nbsp;create an EC2 credential, keystone automatically adds the trust ID or<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential ID as metadata in the EC2 access blob so that it<br />
&nbsp;&nbsp;&nbsp;&nbsp;knows how the token can be scoped when it is used. Without this patch, a<br />
&nbsp;&nbsp;&nbsp;&nbsp;user who has created a credential in this way can update the access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;to remove or alter this metadata and escalate their privileges to be<br />
&nbsp;&nbsp;&nbsp;&nbsp;fully authorized for the trustor&#x27;s, application credential creator&#x27;s, or<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token authorizor&#x27;s privileges on the project. This patch<br />
&nbsp;&nbsp;&nbsp;&nbsp;fixes the issue by simply disallowing updates to keystone-controlled<br />
&nbsp;&nbsp;&nbsp;&nbsp;metadata in the credential.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;2. Respect token roles when creating EC2 credentials</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Without this patch, a trustee, an application credential user, or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;OAuth1 access token holder could create an EC2 credential or an<br />
&nbsp;&nbsp;&nbsp;&nbsp;application credential using any roles the trustor, application<br />
&nbsp;&nbsp;&nbsp;&nbsp;credential creator, or access token authorizor had on the project,<br />
&nbsp;&nbsp;&nbsp;&nbsp;regardless of whether the creator had delegated only a limited subset of<br />
&nbsp;&nbsp;&nbsp;&nbsp;roles. This was because the trust_id attribute of the EC2 access blob<br />
&nbsp;&nbsp;&nbsp;&nbsp;was ignored, and no metadata for the application credential or access<br />
&nbsp;&nbsp;&nbsp;&nbsp;token was recorded either. This change ensures that the access<br />
&nbsp;&nbsp;&nbsp;&nbsp;delegation resource is recorded in the metadata of the EC2 credential<br />
&nbsp;&nbsp;&nbsp;&nbsp;when created and passed to the token provider when used for<br />
&nbsp;&nbsp;&nbsp;&nbsp;authentication so that the token provider can look up the correct roles<br />
&nbsp;&nbsp;&nbsp;&nbsp;for the request.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />api/credentials<wbr />.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />application_<wbr />credential.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;keystone/<wbr />tests/unit/<wbr />test_v3_<wbr />credential.<wbr />py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts due to flask reorg:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keyst.<wbr />..</p></div>
    
    <p>
      <a href="/keystone/+bug/1872735/comments/76">Read more...</a>
    </p>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/726046
Committed: https://git.openstack.org/cgit/openstack/keystone/commit/?id=a405e4b71d7de31e81a01f07e02f189650eb66fe
Submitter: Zuul
Branch:    stable/pike

commit a405e4b71d7de31e81a01f07e02f189650eb66fe
Author: Colleen Murphy &lt;colleen.murphy@suse.com&gt;
Date:   Tue Apr 14 16:47:44 2020 -0700

    Fix security issues with EC2 credentials
    
    This change addresses several issues in the creation and use of EC2/S3
    credentials with keystone tokens.
    
    1. Disable altering credential owner attributes or metadata
    
    Without this patch, an authenticated user can create an EC2 credential
    for themself for a project they have a role on, then update the
    credential to target a user and project completely unrelated to them. In
    the worst case, this could be the admin user and a project the admin
    user has a role assignment on. A token granted for an altered credential
    like this would allow the user to masquerade as the victim user. This
    patch ensures that when updating a credential, the new form of the
    credential is one the acting user has access to: if the system admin
    user is changing the credential, the new user ID or project ID could be
    anything, but regular users may only change the credential to be one
    that they still own.
    
    Relatedly, when a user uses an application credential or a trust to
    create an EC2 credential, keystone automatically adds the trust ID or
    application credential ID as metadata in the EC2 access blob so that it
    knows how the token can be scoped when it is used. Without this patch, a
    user who has created a credential in this way can update the access blob
    to remove or alter this metadata and escalate their privileges to be
    fully authorized for the trustor's, application credential creator's, or
    OAuth1 access token authorizor's privileges on the project. This patch
    fixes the issue by simply disallowing updates to keystone-controlled
    metadata in the credential.
    
    2. Respect token roles when creating EC2 credentials
    
    Without this patch, a trustee, an application credential user, or an
    OAuth1 access token holder could create an EC2 credential or an
    application credential using any roles the trustor, application
    credential creator, or access token authorizor had on the project,
    regardless of whether the creator had delegated only a limited subset of
    roles. This was because the trust_id attribute of the EC2 access blob
    was ignored, and no metadata for the application credential or access
    token was recorded either. This change ensures that the access
    delegation resource is recorded in the metadata of the EC2 credential
    when created and passed to the token provider when used for
    authentication so that the token provider can look up the correct roles
    for the request.
    
    Conflicts (six removal in  e2d83ae9, pep8 fixes in e2d83ae9):
          keystone/api/credentials.py
          keystone/tests/unit/test_v3_application_credential.py
          keystone/tests/unit/test_v3_credential.py
    
    Conflicts due to flask reorg:
            keystone/api/_shared/EC2_S3_Resource.py
            keystone/api/credentials.py
            keystone/api/users.py
            keystone/tests/unit/test_v3_credential.py
    
    Moved the test_update_credential_non_owner unit test to
    CredentialSelfServiceTestCase since in this branch the default policies
    are not affected by #1872733.
    
    NOTE: the application credential functional changes, along with its
    tests were removed from the stable/pike backport as stable/pike does not
    support application credentials.
    
    Change-Id: I39d0d705839fbe31ac518ac9a82959e108cb7c1d
    Closes-bug: #1872733
    Closes-bug: #1872755
    Closes-bug: #1872735
    (cherry picked from commit 37e9907a176dad6843819b1bec4946c3aecc4548)
    (cherry picked from commit 2f2736ebb267c757ad77fcf25ee0aaeefab2a09d)
    (cherry picked from commit 27caafe3daa552663719954f2cd6713dd4493178)
    (cherry picked from commit bfba75fc3c5c8f119f74dbf31347e008824a2134)
    (cherry picked from commit 53d1ccb8a1bdbb5aa0efaacf9739b1a6f436e191)
    (cherry picked from commit 6db1bb09a048dfb7f337484698a9a19fdbbe9546)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-stable-pike
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/keystone/+bug/1872735/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
          

          
            <div align="center" id="add-comment-login-first">
              To post a comment you must <a href="+login?comments=all">log in</a>.
            </div>
          
        
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/keystone/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;<a class="sprite edit action-icon" id="privacy-link" href="/keystone/+bug/1872735/+secrecy">Edit</a>

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    <li class="sprite bug-dupe">
    <span id="mark-duplicate-text">
    <a class="menu-link-mark-dupe" href="/keystone/+bug/1872735/+duplicate">Mark as duplicate</a>
    </span>
    </li>
    
    <li><a class="menu-link-createquestion sprite add" href="https://bugs.launchpad.net/keystone/+bug/1872735/+create-question">Convert to a question</a></li>
    
    <li><a class="menu-link-addbranch sprite add" href="https://bugs.launchpad.net/keystone/+bug/1872735/+addbranch">Link a related branch</a></li>
    <li><a class="menu-link-linktocve sprite add" href="https://bugs.launchpad.net/keystone/+bug/1872735/+linkcve">Link to <abbr title="Common Vulnerabilities and Exposures Index">CVE</abbr></a></li>
    <li><a class="menu-link-unlinkcve sprite modify remove" href="https://bugs.launchpad.net/keystone/+bug/1872735/+unlinkcve">Remove CVE link</a></li>
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/keystone/+bug/1872735/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/keystone/+bug/1872735/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/keystone/+bug/1872735/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5355250/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch">0001-Respect-token-roles-when-creating-EC2-credentials.patch</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5355250">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5355722/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch">0001-Respect-token-roles-when-creating-EC2-credentials.patch</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5355722">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5363648/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch-stein">stein updated</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5363648">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365983/+files/0002-Fix-security-issues-with-EC2-credentials.patch">master</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5365983">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365984/+files/0002-Fix-security-issues-with-EC2-credentials.patch">ussuri</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5365984">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365985/+files/0002-Fix-security-issues-with-EC2-credentials.patch">train</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5365985">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5365986/+files/0002-Fix-security-issues-with-EC2-credentials.patch">stein</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5365986">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite haspatch-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5366542/+files/0002-Fix-security-issues-with-EC2-credentials.patch">rocky</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5366542">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/keystone/+bug/1872735/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  <div class="portlet" id="portlet-attachments">
    <h2>Bug attachments</h2>
    <ul>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5354179/+files/ec2.example.2">ec2.example.2</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5354179">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5354359/+files/test.log">test.log</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5354359">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5363000/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch-train">train</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5363000">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5363001/+files/0001-Respect-token-roles-when-creating-EC2-credentials.patch-stein">stein</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5363001">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5366711/+files/ec2_test_failure.txt">ec2_test_failure.txt</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5366711">edit</a>)
        </small>
      </li>
      <li class="download-attachment">
        <a class="sprite download-icon" href="https://bugs.launchpad.net/keystone/+bug/1872735/+attachment/5366841/+files/0001-Ensure-OAuth1-authorized-roles-are-respected.patch">bug 1873290 rocky patch</a>
        <small>
          (<a href="/keystone/+bug/1872735/+attachment/5366841">edit</a>)
        </small>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/keystone/+bug/1872735/+addcomment">Add attachment</a>
      </li>
    </ul>
  </div>


      

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-logo-and-name-hierarchy.png" alt="Launchpad" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004-2021
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://twitter.com/launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        r0d8de2b
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"bug_is_private": false, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1872735", "web_link": "https://bugs.launchpad.net/bugs/1872735", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 1872735, "private": false, "information_type": "Public Security", "name": null, "title": "[OSSA-2020-004] EC2 and/or credential endpoints are not protected from a scoped context (CVE-2020-12689)", "description": "Being authorized within a limited scope context, i.e. trust / oauth / application credential with a limited role, e.g. \"monitoring_viewer\" or \"viewer\", it is still possible to create EC2 credentials. User can auth against Keystone using EC2 credentials and obtain all project roles\n\u00a0of a trust/oauth/application_credential owner.\n\nI prepared a tool to auth against keyston using ec2 credentials: https://github.com/kayrus/ec2auth\n\n* auth against keystone using trust/oauth/application_credential credentials\n* issue ec2 credentials: \"openstack ec2 credentials create\"\n* authenticate against keystone using ec2 credentials: \"ec2auth --access 7522162ced8f4e3eb9502168ef199584 --secret c558d9401a6943bbbb77a83ce910e5a5 --debug\"\n\nYou'll see that returned token contains all owner roles.", "owner_link": "https://bugs.launchpad.net/api/devel/~kay-diam", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/bug_tasks", "duplicate_of_link": null, "date_created": "2020-04-14T14:56:28.082881+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/subscriptions", "date_last_updated": "2020-06-04T20:12:54.914236+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 266, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/cves", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/attachments", "security_related": true, "latest_patch_uploaded": "2020-05-05T01:51:57.553259+00:00", "tags": ["in-stable-pike", "in-stable-queens", "in-stable-rocky", "in-stable-stein", "in-stable-train", "in-stable-ussuri"], "date_last_message": "2020-06-04T20:12:54.541165+00:00", "number_of_duplicates": 0, "message_count": 77, "users_affected_count": 1, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/users_unaffected", "users_affected_count_with_dupes": 1, "other_users_affected_count_with_dupes": 1, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/messages", "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/1872735/linked_merge_proposals", "http_etag": "\"29a970aaacfb5e235cb531e7bb37db3c59318141-8a0a5ad9745fe5144e2cb0ce0943f051a01026bb\""}, "total_comments_and_activity": 115, "related_features": {}, "information_type_data": {"PUBLIC": {"is_private": false, "name": "Public", "order": 0, "description": "Everyone can see this information.\n", "value": "PUBLIC", "description_css_class": "choice-description"}, "PRIVATESECURITY": {"is_private": true, "name": "Private Security", "order": 2, "description": "Only the security group can see this information.\n ", "value": "PRIVATESECURITY", "description_css_class": "choice-description"}, "PUBLICSECURITY": {"is_private": false, "name": "Public Security", "order": 1, "description": "Everyone can see this security related information.\n", "value": "PUBLICSECURITY", "description_css_class": "choice-description"}, "USERDATA": {"is_private": true, "name": "Private", "order": 3, "description": "Only shared with users permitted to see private user information.\n", "value": "USERDATA", "description_css_class": "choice-description"}}, "context": {"self_link": "https://bugs.launchpad.net/api/devel/keystone/+bug/1872735", "web_link": "https://bugs.launchpad.net/keystone/+bug/1872735", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/1872735", "milestone_link": null, "status": "Fix Released", "importance": "High", "assignee_link": "https://bugs.launchpad.net/api/devel/~krinkle", "bug_target_display_name": "OpenStack Identity (keystone)", "bug_target_name": "keystone", "bug_watch_link": null, "date_assigned": "2020-04-27T16:53:07.036121+00:00", "date_created": "2020-04-14T14:56:28.082881+00:00", "date_confirmed": "2020-04-15T17:45:38.198459+00:00", "date_incomplete": null, "date_in_progress": "2020-04-27T16:53:03.848148+00:00", "date_closed": "2020-05-08T16:15:04.310196+00:00", "date_left_new": "2020-04-14T21:29:42.017408+00:00", "date_triaged": "2020-04-15T17:45:38.198459+00:00", "date_fix_committed": "2020-05-08T16:15:04.310196+00:00", "date_fix_released": "2020-05-08T16:15:04.310196+00:00", "date_left_closed": "2020-04-15T17:45:38.198459+00:00", "owner_link": "https://bugs.launchpad.net/api/devel/~kay-diam", "target_link": "https://bugs.launchpad.net/api/devel/keystone", "title": "Bug #1872735 in OpenStack Identity (keystone): \"[OSSA-2020-004] EC2 and/or credential endpoints are not protected from a scoped context (CVE-2020-12689)\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/keystone/+bug/1872735/related_tasks", "is_complete": true, "http_etag": "\"4966941c5b0f17cc5281bc7dab01b64a86bb3e99-42770beb781073e038a385d74163764a492a723e\""}, "bugtask_data": {"2591966": {"delete_link": "https://bugs.launchpad.net/ossa/+bug/1872735/+delete", "bug_title": "[OSSA-2020-004] EC2 and/or credential endpoints are not protected from a scoped context (CVE-2020-12689)", "user_can_unassign": false, "importance_value": "Undecided", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary2591966", "target_is_product": true, "user_can_edit_milestone": false, "prefix": "ossa", "bugtask_path": "/ossa/+bug/1872735", "id": 2591966, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task2591966", "targetname": "OpenStack Security Advisory", "assignee_is_team": null, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": null, "status_value": "Fix Released"}, "2591943": {"delete_link": "https://bugs.launchpad.net/keystone/+bug/1872735/+delete", "bug_title": "[OSSA-2020-004] EC2 and/or credential endpoints are not protected from a scoped context (CVE-2020-12689)", "user_can_unassign": false, "importance_value": "High", "user_can_edit_importance": false, "assignee_vocabulary": "AllUserTeamsParticipation", "hide_assignee_team_selection": true, "user_can_edit_status": true, "user_can_delete": false, "row_id": "tasksummary2591943", "target_is_product": true, "user_can_edit_milestone": false, "prefix": "keystone", "bugtask_path": "/keystone/+bug/1872735", "id": 2591943, "milestone_value": null, "status_widget_items": "[]", "milestone_widget_items": "[]", "form_row_id": "task2591943", "targetname": "OpenStack Identity (keystone)", "assignee_is_team": false, "assignee_vocabulary_filters": [], "user_can_edit_assignee": false, "importance_widget_items": "[]", "assignee_value": "krinkle", "status_value": "Fix Released"}}, "subscribers_portlet_url_data": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/1872735", "web_link": "https://bugs.launchpad.net/bugs/1872735"}, "initial_comment_batch_offset": 41, "first visible_recent_comment": 36};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 58 queries/external actions issued in 1.44 seconds

    Features: {'app.maintenance_message': None, 'hard_timeout': '9000', 'js.yui_version': None, 'app.mainsite_only.canonical_url': None, 'disclosure.dsp_picker.enabled': 'on', 'baselayout.careers_link.disabled': None, 'bugs.affected_count_includes_dupes.disabled': None, 'visible_render_time': None, 'profiling.enabled': None, 'bugs.nominations.bug_supervisors_can_target': 'on'}

    r0d8de2b

    -->

</html>

