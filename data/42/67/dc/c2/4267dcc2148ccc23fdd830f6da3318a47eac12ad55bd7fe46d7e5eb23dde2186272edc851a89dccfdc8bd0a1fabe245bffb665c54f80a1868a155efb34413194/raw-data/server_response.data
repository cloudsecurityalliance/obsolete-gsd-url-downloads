<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#870111 - imagemagick: CVE-2017-13140 - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=870111&quot;&gt;870111&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:870111@bugs.debian.org">#870111</a><br>
imagemagick: CVE-2017-13140</h1>
<div class="versiongraph"><a href="version.cgi?fixed=imagemagick%2F8%3A6.9.7.4%2Bdfsg-15;absolute=0;found=imagemagick%2F8%3A6.7.7.10-5%2Bdeb9u1;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u9;found=imagemagick%2F8%3A6.9.7.4%2Bdfsg-13;found=imagemagick%2F8%3A6.7.7.10-5%2Bdeb7u14;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u8;info=1;collapse=1;package=src%3Aimagemagick"><img alt="version graph" src="version.cgi?width=2;fixed=imagemagick%2F8%3A6.9.7.4%2Bdfsg-15;found=imagemagick%2F8%3A6.7.7.10-5%2Bdeb9u1;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u9;found=imagemagick%2F8%3A6.9.7.4%2Bdfsg-13;found=imagemagick%2F8%3A6.7.7.10-5%2Bdeb7u14;found=imagemagick%2F8%3A6.8.9.9-5%2Bdeb8u8;height=2;collapse=1;package=src%3Aimagemagick;absolute=0"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?src=imagemagick">src:imagemagick</a>;
Maintainer for <a href="pkgreport.cgi?src=imagemagick">src:imagemagick</a> is <a href="pkgreport.cgi?maint=pkg-gmagick-im-team%40lists.alioth.debian.org">ImageMagick Packaging Team &lt;pkg-gmagick-im-team@lists.alioth.debian.org&gt;</a>; </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=roucaries.bastien%40gmail.com">Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</a></p>
  <p>Date: Sat, 29 Jul 2017 20:51:01 UTC</p>

<p>Severity: important</p>
<p>Tags: security, upstream</p>

<p>Found in versions imagemagick/8:6.7.7.10-5+deb9u1, imagemagick/8:6.8.9.9-5+deb8u9, imagemagick/8:6.9.7.4+dfsg-13, imagemagick/8:6.7.7.10-5+deb7u14, imagemagick/8:6.8.9.9-5+deb8u8</p>
<p>Fixed in version imagemagick/8:6.9.7.4+dfsg-15</p>

<p><strong>Done:</strong> Bastien Roucari√®s &lt;rouca@debian.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p><p>Forwarded to <a href="https://github.com/ImageMagick/ImageMagick/issues/596">https://github.com/ImageMagick/ImageMagick/issues/596</a></p>
</div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=870111;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, team@security.debian.org, ImageMagick Packaging Team &lt;pkg-gmagick-im-team@lists.alioth.debian.org&gt; -->
<!-- time:1501361464 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, team@security.debian.org, ImageMagick Packaging Team &lt;pkg-gmagick-im-team@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#870111</code>; Package <code>src:imagemagick</code>.
 (Sat, 29 Jul 2017 20:51:04 GMT) (<a href="bugreport.cgi?bug=870111;msg=2">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt; -->
<!-- time:1501361464 -->
<strong>Acknowledgement sent</strong>
to <code>Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>team@security.debian.org, ImageMagick Packaging Team &lt;pkg-gmagick-im-team@lists.alioth.debian.org&gt;</code>.
 (Sat, 29 Jul 2017 20:51:04 GMT) (<a href="bugreport.cgi?bug=870111;msg=4">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=870111;msg=5">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=5">mbox</a>, <a href="mailto:870111@bugs.debian.org?References=%3CCAE2SPAaTthxfwRV7h3_5FAe%3DQpd8hvvDVKpvZ8s9wM3kKxrOEQ%40mail.gmail.com%3E&amp;body=On%20Sat%2C%2029%20Jul%202017%2022%3A45%3A47%20%2B0200%20Bastien%20ROUCARIES%20%3Croucaries.bastien%40gmail.com%3E%20wrote%3A%0A%3E%20Source%3A%20imagemagick%0A%3E%20Version%3A%208%3A6.9.7.4%2Bdfsg-13%0A%3E%20Severity%3A%20important%0A%3E%20Tags%3A%20security%20upstream%0A%3E%20X-Debbugs-CC%3A%20team%40security.debian.org%0A%3E%20control%3A%20found%20-1%208%3A6.8.9.9-5%2Bdeb8u8%0A%3E%20control%3A%20found%20-1%208%3A6.8.9.9-5%2Bdeb8u9%0A%3E%20control%3A%20found%20-1%208%3A6.7.7.10-5%2Bdeb7u14%0A%3E%20control%3A%20found%20-1%208%3A6.7.7.10-5%2Bdeb9u1%0A%3E%20forwarded%3A%20https%3A%2F%2Fgithub.com%2FImageMagick%2FImageMagick%2Fissues%2F596%0A%3E%20%0A%3E%20It%20appears%20to%20still%20be%20an%20issue%20with%0A%3E%20https%3A%2F%2Fwww.imagemagick.org%2Fdownload%2Fbeta%2FImageMagick-6.9.9-1~beta20170721.tar.xz.%0A%3E%20%0A%3E%20If%20you%20try%20to%20read%20an%20image%20whose%20width%20exactly%20matches%0A%3E%20MAGICK_WIDTH_LIMIT%2C%20ImageMagick%20returns%20a%20%22width%20or%20height%20exceeds%0A%3E%20limit%22%20error%2C%20as%20expected.%20However%2C%20the%20next%20time%20you%20try%20to%20read%20a%0A%3E%20png%2C%20it%20gets%20permanently%20stuck%20in%20LockSemaphoreInfo%20-%20I%27m%20assuming%0A%3E%20that%20the%20first%20time%20failed%20to%20unlock%20it.%0A%3E%20%0A%3E%20I%27m%20able%20to%20reproduce%20it%20with%20this%20code%3A%0A%3E%20%0A%3E%20%23include%20%3Cstdio.h%3E%0A%3E%20%23include%20%3Cstring.h%3E%0A%3E%20%23include%20%22magick%2FMagickCore.h%22%0A%3E%20%23include%20%22magick%2Fmagick-config.h%22%0A%3E%20%0A%3E%20void%20PrintImage%28char%2A%20filename%29%20%7B%0A%3E%20ImageInfo%2A%20info%20%3D%20CloneImageInfo%28%28ImageInfo%20%2A%29%20NULL%29%3B%0A%3E%20strcpy%28info-%3Efilename%2C%20filename%29%3B%0A%3E%20SetImageInfoFile%28info%2C%20NULL%29%3B%0A%3E%20%0A%3E%20ExceptionInfo%20%2Aexception%20%3D%20AcquireExceptionInfo%28%29%3B%0A%3E%20printf%28%22Attempt%20to%20read%20%25s%5Cn%22%2C%20filename%29%3B%0A%3E%20Image%2A%20image%20%3D%20ReadImage%28info%2C%20exception%29%3B%0A%3E%20%0A%3E%20printf%28%22%25s%3A%20%25s%20%25s%5Cn%22%2C%20info-%3Efilename%2C%20exception-%3Ereason%2C%0A%3E%20exception-%3Edescription%29%3B%0A%3E%20if%20%28image%29%20%7B%0A%3E%20printf%28%22%25ix%25i%5Cn%22%2C%20image-%3Ecolumns%2C%20image-%3Erows%29%3B%0A%3E%20DestroyImage%28image%29%3B%0A%3E%20%7D%0A%3E%20DestroyExceptionInfo%28exception%29%3B%0A%3E%20DestroyImageInfo%28info%29%3B%0A%3E%20%7D%0A%3E%20%0A%3E%20int%20main%28int%20argc%2C%20char%20%2Aargv%5B%5D%29%20%7B%0A%3E%20if%20%28argc%20%3C%202%29%20%7B%0A%3E%20printf%28%22specify%20a%20filename%20to%20read%5Cn%22%29%3B%0A%3E%20return%201%3B%0A%3E%20%7D%0A%3E%20%0A%3E%20MagickCoreGenesis%28%2Aargv%2CMagickTrue%29%3B%0A%3E%20%0A%3E%20PrintImage%28argv%5B1%5D%29%3B%0A%3E%20PrintImage%28argv%5B1%5D%29%3B%0A%3E%20%0A%3E%20return%200%3B%0A%3E%20%7D%0A%3E%20%0A&amp;subject=Re%3A%20Stuck%20in%20LockSemaphoreInfo%20after%20reading%20a%20png%20with%0A%20width%3D%3DMAGICK_WIDTH_LIMIT%20%23596&amp;In-Reply-To=%3CCAE2SPAaTthxfwRV7h3_5FAe%3DQpd8hvvDVKpvZ8s9wM3kKxrOEQ%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=roucaries.bastien%40gmail.com" alt="">
<div class="header"><span class="headerfield">From:</span> Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Stuck in LockSemaphoreInfo after reading a png with
 width==MAGICK_WIDTH_LIMIT #596</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 29 Jul 2017 22:45:47 +0200</div>
</div>
<pre class="message">Source: imagemagick
Version: 8:6.9.7.4+dfsg-13
Severity: important
Tags: security upstream
X-Debbugs-CC: team@security.debian.org
control: found -1 8:6.8.9.9-5+deb8u8
control: found -1 8:6.8.9.9-5+deb8u9
control: found -1 8:6.7.7.10-5+deb7u14
control: found -1 8:6.7.7.10-5+deb9u1
forwarded: <a href="https://github.com/ImageMagick/ImageMagick/issues/596">https://github.com/ImageMagick/ImageMagick/issues/596</a>

It appears to still be an issue with
<a href="https://www.imagemagick.org/download/beta/ImageMagick-6.9.9-1~beta20170721.tar.xz">https://www.imagemagick.org/download/beta/ImageMagick-6.9.9-1~beta20170721.tar.xz</a>.

If you try to read an image whose width exactly matches
MAGICK_WIDTH_LIMIT, ImageMagick returns a &quot;width or height exceeds
limit&quot; error, as expected. However, the next time you try to read a
png, it gets permanently stuck in LockSemaphoreInfo - I&#39;m assuming
that the first time failed to unlock it.

I&#39;m able to reproduce it with this code:

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &quot;magick/MagickCore.h&quot;
#include &quot;magick/magick-config.h&quot;

void PrintImage(char* filename) {
ImageInfo* info = CloneImageInfo((ImageInfo *) NULL);
strcpy(info-&gt;filename, filename);
SetImageInfoFile(info, NULL);

ExceptionInfo *exception = AcquireExceptionInfo();
printf(&quot;Attempt to read %s\n&quot;, filename);
Image* image = ReadImage(info, exception);

printf(&quot;%s: %s %s\n&quot;, info-&gt;filename, exception-&gt;reason,
exception-&gt;description);
if (image) {
printf(&quot;%ix%i\n&quot;, image-&gt;columns, image-&gt;rows);
DestroyImage(image);
}
DestroyExceptionInfo(exception);
DestroyImageInfo(info);
}

int main(int argc, char *argv[]) {
if (argc &lt; 2) {
printf(&quot;specify a filename to read\n&quot;);
return 1;
}

MagickCoreGenesis(*argv,MagickTrue);

PrintImage(argv[1]);
PrintImage(argv[1]);

return 0;
}

by passing it the path to a png file, with MAGICK_WIDTH_LIMIT set to
the exact width of that png.


</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- command:found -->
<!-- requester: Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt; -->
<!-- request_addr: submit@bugs.debian.org -->
<!-- time:1501361464 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;
                                  ]
            };
-->
<strong>Marked as found in versions imagemagick/8:6.8.9.9-5+deb8u8.</strong>
Request was from <code>Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</code>
to <code>submit@bugs.debian.org</code>.
 (Sat, 29 Jul 2017 20:51:04 GMT) (<a href="bugreport.cgi?bug=870111;msg=7">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="8"></a>
<!-- command:found -->
<!-- requester: Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt; -->
<!-- request_addr: submit@bugs.debian.org -->
<!-- time:1501361465 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u9&#39;,
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;
                                  ]
            };
-->
<strong>Marked as found in versions imagemagick/8:6.8.9.9-5+deb8u9.</strong>
Request was from <code>Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</code>
to <code>submit@bugs.debian.org</code>.
 (Sat, 29 Jul 2017 20:51:05 GMT) (<a href="bugreport.cgi?bug=870111;msg=9">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="10"></a>
<!-- command:found -->
<!-- requester: Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt; -->
<!-- request_addr: submit@bugs.debian.org -->
<!-- time:1501361466 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;,
                                    &#39;imagemagick/8:6.7.7.10-5+deb7u14&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u9&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u9&#39;,
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;
                                  ]
            };
-->
<strong>Marked as found in versions imagemagick/8:6.7.7.10-5+deb7u14.</strong>
Request was from <code>Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</code>
to <code>submit@bugs.debian.org</code>.
 (Sat, 29 Jul 2017 20:51:06 GMT) (<a href="bugreport.cgi?bug=870111;msg=11">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=11">mbox</a>, <a href="#10">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="12"></a>
<!-- command:found -->
<!-- requester: Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt; -->
<!-- request_addr: submit@bugs.debian.org -->
<!-- time:1501361467 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.7.7.10-5+deb9u1&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u9&#39;,
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.7.7.10-5+deb7u14&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;imagemagick/8:6.9.7.4+dfsg-13&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u8&#39;,
                                    &#39;imagemagick/8:6.7.7.10-5+deb7u14&#39;,
                                    &#39;imagemagick/8:6.8.9.9-5+deb8u9&#39;
                                  ]
            };
-->
<strong>Marked as found in versions imagemagick/8:6.7.7.10-5+deb9u1.</strong>
Request was from <code>Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</code>
to <code>submit@bugs.debian.org</code>.
 (Sat, 29 Jul 2017 20:51:07 GMT) (<a href="bugreport.cgi?bug=870111;msg=13">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=13">mbox</a>, <a href="#12">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="14"></a>
<!-- command:tag -->
<!-- requester: roucaries.bastien@gmail.com -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1501365969 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security upstream pending&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security upstream&#39;
            };
-->
<strong>Added tag(s) pending.</strong>
Request was from <code>roucaries.bastien@gmail.com</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 29 Jul 2017 22:06:09 GMT) (<a href="bugreport.cgi?bug=870111;msg=15">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=15">mbox</a>, <a href="#14">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- request_addr: Bastien Roucari√®s &lt;rouca@debian.org&gt; -->
<!-- time:1501369760 -->
<strong>Reply sent</strong>
to <code>Bastien Roucari√®s &lt;rouca@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Sat, 29 Jul 2017 23:09:20 GMT) (<a href="bugreport.cgi?bug=870111;msg=17">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="18"></a>
<!-- request_addr: Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt; -->
<!-- time:1501369760 -->
<strong>Notification sent</strong>
to <code>Bastien ROUCARIES &lt;roucaries.bastien@gmail.com&gt;</code>:<br>
Bug acknowledged by developer.
 (Sat, 29 Jul 2017 23:09:20 GMT) (<a href="bugreport.cgi?bug=870111;msg=19">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="20"></a><a name="msg20"></a><a href="#20">Message #20</a> received at 870111-close@bugs.debian.org (<a href="bugreport.cgi?bug=870111;msg=20">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=20">mbox</a>, <a href="mailto:870111@bugs.debian.org?subject=Re%3A%20Bug%23870111%3A%20fixed%20in%20imagemagick%208%3A6.9.7.4%2Bdfsg-15&amp;In-Reply-To=%3CE1dbamI-0002tD-If%40fasolo.debian.org%3E&amp;References=%3CE1dbamI-0002tD-If%40fasolo.debian.org%3E&amp;body=On%20Sat%2C%2029%20Jul%202017%2023%3A04%3A10%20%2B0000%20%3D%3Futf-8%3Fq%3FBastien_Roucari%3DC3%3DA8s%3F%3D%20%3Crouca%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20imagemagick%0A%3E%20Source-Version%3A%208%3A6.9.7.4%2Bdfsg-15%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20imagemagick%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20870111%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Bastien%20Roucari%C3%A8s%20%3Crouca%40debian.org%3E%20%28supplier%20of%20updated%20imagemagick%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA512%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Sat%2C%2029%20Jul%202017%2017%3A14%3A38%20%2B0200%0A%3E%20Source%3A%20imagemagick%0A%3E%20Binary%3A%20imagemagick-6-common%20imagemagick-6-doc%20libmagickcore-6-headers%20libmagickwand-6-headers%20libmagick%2B%2B-6-headers%20libimage-magick-perl%20libmagickcore-6-arch-config%20imagemagick-6.q16%20libmagickcore-6.q16-3%20libmagickcore-6.q16-3-extra%20libmagickcore-6.q16-dev%20libmagickwand-6.q16-3%20libmagickwand-6.q16-dev%20libmagick%2B%2B-6.q16-7%20libmagick%2B%2B-6.q16-dev%20libimage-magick-q16-perl%20imagemagick-6.q16hdri%20libmagickcore-6.q16hdri-3%20libmagickcore-6.q16hdri-3-extra%20libmagickcore-6.q16hdri-dev%20libmagickwand-6.q16hdri-3%20libmagickwand-6.q16hdri-dev%20libmagick%2B%2B-6.q16hdri-7%20libmagick%2B%2B-6.q16hdri-dev%20libimage-magick-q16hdri-perl%20imagemagick-common%20imagemagick-doc%20perlmagick%20libmagickcore-dev%20libmagickwand-dev%20libmagick%2B%2B-dev%20imagemagick%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%208%3A6.9.7.4%2Bdfsg-15%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20ImageMagick%20Packaging%20Team%20%3Cpkg-gmagick-im-team%40lists.alioth.debian.org%3E%0A%3E%20Changed-By%3A%20Bastien%20Roucari%C3%A8s%20%3Crouca%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20imagemagick%20-%20image%20manipulation%20programs%20--%20binaries%0A%3E%20%20imagemagick-6-common%20-%20image%20manipulation%20programs%20--%20infrastructure%0A%3E%20%20imagemagick-6-doc%20-%20document%20files%20of%20ImageMagick%0A%3E%20%20imagemagick-6.q16%20-%20image%20manipulation%20programs%20--%20quantum%20depth%20Q16%0A%3E%20%20imagemagick-6.q16hdri%20-%20image%20manipulation%20programs%20--%20quantum%20depth%20Q16HDRI%0A%3E%20%20imagemagick-common%20-%20image%20manipulation%20programs%20--%20infrastructure%20dummy%20package%0A%3E%20%20imagemagick-doc%20-%20document%20files%20of%20ImageMagick%20--%20dummy%20package%0A%3E%20%20libimage-magick-perl%20-%20Perl%20interface%20to%20the%20ImageMagick%20graphics%20routines%0A%3E%20%20libimage-magick-q16-perl%20-%20Perl%20interface%20to%20the%20ImageMagick%20graphics%20routines%20--%20Q16%20versio%0A%3E%20%20libimage-magick-q16hdri-perl%20-%20Perl%20interface%20to%20the%20ImageMagick%20graphics%20routines%20--%20Q16HDRI%20ve%0A%3E%20%20libmagick%2B%2B-6-headers%20-%20object-oriented%20C%2B%2B%20interface%20to%20ImageMagick%20-%20header%20files%0A%3E%20%20libmagick%2B%2B-6.q16-7%20-%20C%2B%2B%20interface%20to%20ImageMagick%20--%20quantum%20depth%20Q16%0A%3E%20%20libmagick%2B%2B-6.q16-dev%20-%20C%2B%2B%20interface%20to%20ImageMagick%20-%20development%20files%20%28Q16%29%0A%3E%20%20libmagick%2B%2B-6.q16hdri-7%20-%20C%2B%2B%20interface%20to%20ImageMagick%20--%20quantum%20depth%20Q16HDRI%0A%3E%20%20libmagick%2B%2B-6.q16hdri-dev%20-%20C%2B%2B%20interface%20to%20ImageMagick%20-%20development%20files%20%28Q16HDRI%29%0A%3E%20%20libmagick%2B%2B-dev%20-%20object-oriented%20C%2B%2B%20interface%20to%20ImageMagick%20--%20dummy%20package%0A%3E%20%20libmagickcore-6-arch-config%20-%20low-level%20image%20manipulation%20library%20-%20architecture%20header%20files%0A%3E%20%20libmagickcore-6-headers%20-%20low-level%20image%20manipulation%20library%20-%20header%20files%0A%3E%20%20libmagickcore-6.q16-3%20-%20low-level%20image%20manipulation%20library%20--%20quantum%20depth%20Q16%0A%3E%20%20libmagickcore-6.q16-3-extra%20-%20low-level%20image%20manipulation%20library%20-%20extra%20codecs%20%28Q16%29%0A%3E%20%20libmagickcore-6.q16-dev%20-%20low-level%20image%20manipulation%20library%20-%20development%20files%20%28Q16%29%0A%3E%20%20libmagickcore-6.q16hdri-3%20-%20low-level%20image%20manipulation%20library%20--%20quantum%20depth%20Q16HDRI%0A%3E%20%20libmagickcore-6.q16hdri-3-extra%20-%20low-level%20image%20manipulation%20library%20-%20extra%20codecs%20%28Q16HDRI%29%0A%3E%20%20libmagickcore-6.q16hdri-dev%20-%20low-level%20image%20manipulation%20library%20-%20development%20files%20%28Q16HDRI%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=rouca%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Bastien Roucari√®s &lt;rouca@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 870111-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#870111: fixed in imagemagick 8:6.9.7.4+dfsg-15</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 29 Jul 2017 23:04:10 +0000</div>
</div>
<pre class="message">Source: imagemagick
Source-Version: 8:6.9.7.4+dfsg-15

We believe that the bug you reported is fixed in the latest version of
imagemagick, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 870111@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Bastien Roucari√®s &lt;rouca@debian.org&gt; (supplier of updated imagemagick package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 1.8
Date: Sat, 29 Jul 2017 17:14:38 +0200
Source: imagemagick
Binary: imagemagick-6-common imagemagick-6-doc libmagickcore-6-headers libmagickwand-6-headers libmagick++-6-headers libimage-magick-perl libmagickcore-6-arch-config imagemagick-6.q16 libmagickcore-6.q16-3 libmagickcore-6.q16-3-extra libmagickcore-6.q16-dev libmagickwand-6.q16-3 libmagickwand-6.q16-dev libmagick++-6.q16-7 libmagick++-6.q16-dev libimage-magick-q16-perl imagemagick-6.q16hdri libmagickcore-6.q16hdri-3 libmagickcore-6.q16hdri-3-extra libmagickcore-6.q16hdri-dev libmagickwand-6.q16hdri-3 libmagickwand-6.q16hdri-dev libmagick++-6.q16hdri-7 libmagick++-6.q16hdri-dev libimage-magick-q16hdri-perl imagemagick-common imagemagick-doc perlmagick libmagickcore-dev libmagickwand-dev libmagick++-dev imagemagick
Architecture: source
Version: 8:6.9.7.4+dfsg-15
Distribution: unstable
Urgency: high
Maintainer: ImageMagick Packaging Team &lt;pkg-gmagick-im-team@lists.alioth.debian.org&gt;
Changed-By: Bastien Roucari√®s &lt;rouca@debian.org&gt;
Description:
 imagemagick - image manipulation programs -- binaries
 imagemagick-6-common - image manipulation programs -- infrastructure
 imagemagick-6-doc - document files of ImageMagick
 imagemagick-6.q16 - image manipulation programs -- quantum depth Q16
 imagemagick-6.q16hdri - image manipulation programs -- quantum depth Q16HDRI
 imagemagick-common - image manipulation programs -- infrastructure dummy package
 imagemagick-doc - document files of ImageMagick -- dummy package
 libimage-magick-perl - Perl interface to the ImageMagick graphics routines
 libimage-magick-q16-perl - Perl interface to the ImageMagick graphics routines -- Q16 versio
 libimage-magick-q16hdri-perl - Perl interface to the ImageMagick graphics routines -- Q16HDRI ve
 libmagick++-6-headers - object-oriented C++ interface to ImageMagick - header files
 libmagick++-6.q16-7 - C++ interface to ImageMagick -- quantum depth Q16
 libmagick++-6.q16-dev - C++ interface to ImageMagick - development files (Q16)
 libmagick++-6.q16hdri-7 - C++ interface to ImageMagick -- quantum depth Q16HDRI
 libmagick++-6.q16hdri-dev - C++ interface to ImageMagick - development files (Q16HDRI)
 libmagick++-dev - object-oriented C++ interface to ImageMagick -- dummy package
 libmagickcore-6-arch-config - low-level image manipulation library - architecture header files
 libmagickcore-6-headers - low-level image manipulation library - header files
 libmagickcore-6.q16-3 - low-level image manipulation library -- quantum depth Q16
 libmagickcore-6.q16-3-extra - low-level image manipulation library - extra codecs (Q16)
 libmagickcore-6.q16-dev - low-level image manipulation library - development files (Q16)
 libmagickcore-6.q16hdri-3 - low-level image manipulation library -- quantum depth Q16HDRI
 libmagickcore-6.q16hdri-3-extra - low-level image manipulation library - extra codecs (Q16HDRI)
 libmagickcore-6.q16hdri-dev - low-level image manipulation library - development files (Q16HDRI
 libmagickcore-dev - low-level image manipulation library -- dummy package
 libmagickwand-6-headers - image manipulation library - headers files
 libmagickwand-6.q16-3 - image manipulation library -- quantum depth Q16
 libmagickwand-6.q16-dev - image manipulation library - development files (Q16)
 libmagickwand-6.q16hdri-3 - image manipulation library -- quantum depth Q16HDRI
 libmagickwand-6.q16hdri-dev - image manipulation library - development files (Q16HDRI)
 libmagickwand-dev - image manipulation library -- dummy package
 perlmagick - Perl interface to ImageMagick -- dummy package
Closes: <a href="bugreport.cgi?bug=870047">870047</a> <a href="bugreport.cgi?bug=870065">870065</a> <a href="bugreport.cgi?bug=870067">870067</a> <a href="bugreport.cgi?bug=870105">870105</a> <a href="bugreport.cgi?bug=870106">870106</a> <a href="bugreport.cgi?bug=870107">870107</a> <a href="bugreport.cgi?bug=870108">870108</a> <a href="bugreport.cgi?bug=870109">870109</a> <a href="bugreport.cgi?bug=870111">870111</a> <a href="bugreport.cgi?bug=870115">870115</a> <a href="bugreport.cgi?bug=870116">870116</a> <a href="bugreport.cgi?bug=870117">870117</a> <a href="bugreport.cgi?bug=870118">870118</a> <a href="bugreport.cgi?bug=870119">870119</a> <a href="bugreport.cgi?bug=870120">870120</a>
Changes:
 imagemagick (8:6.9.7.4+dfsg-15) unstable; urgency=high
 .
   * Bug fix: &quot;imagemagick FTBFS: coders/mat.c:1372:3&quot;,
     thanks to Adrian Bunk and Gianfranco Costamagna
     (Closes: #<a href="bugreport.cgi?bug=870047">870047</a>).
   * Security fixes:
     + <a href="https://security-tracker.debian.org/tracker/CVE-2017-11639">CVE-2017-11639</a>
       When ImageMagick processes a crafted file in convert,
       it can lead to a heap-based buffer over-read
       in the WriteCIPImage() function in coders/cip.c,
       related to the GetPixelLuma function
       in MagickCore/pixel-accessor.h.
       (Closes: #<a href="bugreport.cgi?bug=870065">870065</a>).
     + <a href="https://security-tracker.debian.org/tracker/CVE-2017-11640">CVE-2017-11640</a>
       When ImageMagick 7.0.6-1 processes a crafted file in convert, it can
       lead to an address access exception in the WritePTIFImage() function
       (Closes: #<a href="bugreport.cgi?bug=870067">870067</a>)
     + Validate png file.
       Detect corrupted png early and avoid a crash
       (Closes: #<a href="bugreport.cgi?bug=870105">870105</a>)
     + Heap buffer overflow in ReadOneMNGImage
       A crafted file will cause x_off[i] out-of-bound operation vulnerability.
       (Closes: #<a href="bugreport.cgi?bug=870106">870106</a>)
     + memory exhaustion in ReadOneJNGImage in png.c
       When identify JNG file that contains chunk data, imagemagick will
       allocate memory to store the chunk data in function ReadOneJNGImage
       Due to a lack of valition, memory is not limited for corrupted files.
       (Closes: #<a href="bugreport.cgi?bug=870107">870107</a>)
     + memory leak in ReadOneJNGImage #550
       A crafted file could trigger a memory leak
       (Closes: #<a href="bugreport.cgi?bug=870108">870108</a>)
     + out-of-bounds read with the MNG CLIP chunk.
       (Closes: #<a href="bugreport.cgi?bug=870109">870109</a>)
     + coders/png.c: Memory leak Fixed Issue 600
       (Closes: #<a href="bugreport.cgi?bug=870116">870116</a>)
     + memory leak in ReadOneJNGImage (upstream 602)
       Fix a leak triggered by a corrupted file
       (Closes: #<a href="bugreport.cgi?bug=870115">870115</a>)
     + Stuck in LockSemaphoreInfo after reading a png with width==MAGICK_WIDTH_LIMIT
       Some version of libpng need serialization for error recovery of hard lock
       Could be triggered by a corrupted file
       (Closes: #<a href="bugreport.cgi?bug=870111">870111</a>)
     + memory leak in ReadOneMNGImage #619
       A memory leak vulnerability was found in function ReadOneMNGImage,
       which allow attackers to cause a denial of service (memory leak) via
       a crafted file.
       (Closes: #<a href="bugreport.cgi?bug=870117">870117</a>)
     + memory leak in ReadOneJNGImage #618
       Triggered by a corrupted file
       (Closes: #<a href="bugreport.cgi?bug=870118">870118</a>)
     + bad free in RelinquishMagickMemory
       (Closes: #<a href="bugreport.cgi?bug=870119">870119</a>)
     + <a href="https://security-tracker.debian.org/tracker/CVE-2017-11539">CVE-2017-11539</a>: coders/png.c: Initialized quantum_info to prevent memory leakage
       (Closes: #<a href="bugreport.cgi?bug=870120">870120</a>)
Checksums-Sha1:
 e4470dc13e08044a41ae849db3ca6fb729a1f43e 5137 imagemagick_6.9.7.4+dfsg-15.dsc
 8559e418b654908ef3185d39de794abb2fc78265 248828 imagemagick_6.9.7.4+dfsg-15.debian.tar.xz
 b2062aa91e3b102960cd268ff286e8f639b1f95e 12823 imagemagick_6.9.7.4+dfsg-15_source.buildinfo
Checksums-Sha256:
 8ca618e974bafa89ea30fd2da64c3b0e90b18152342ef96d561e9922a0bd3ead 5137 imagemagick_6.9.7.4+dfsg-15.dsc
 a575c3e343a19e6f5e42cd9a9d56a676dfd2d28c7305b884f18fa73e5d1a5139 248828 imagemagick_6.9.7.4+dfsg-15.debian.tar.xz
 0f30cc857cef1b311e4776a03a63308d3c38e863b791b411c6204fbf6d98675c 12823 imagemagick_6.9.7.4+dfsg-15_source.buildinfo
Files:
 8e27fdd2bbf1babbae525b8ad888ecbd 5137 graphics optional imagemagick_6.9.7.4+dfsg-15.dsc
 6f54da3b7e01cef045f5f2158e18ba69 248828 graphics optional imagemagick_6.9.7.4+dfsg-15.debian.tar.xz
 a8068f184b323efc24f249e550ec4285 12823 graphics optional imagemagick_6.9.7.4+dfsg-15_source.buildinfo

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEXQGHuUCiRbrXsPVqADoaLapBCF8FAll9EN4ACgkQADoaLapB
CF8kEA/+LJzRSxbJtd3eYTZ6rF0LvraLAbNHgtmwAye26v+p7fKcLDtAVY0OOLx7
apTM2T67ex6w0JZg1PQTpdSAKkZlJpX4aW5hWe1FTeYnNm+m47YQoB7biBIN9ZoM
D+QGMHctt+UYKHLf/MWYJOozQQH7DZb8k2uQlJkvWDqhNpDHygRb83U6GFF+qwku
/yIeEaaSv0EDz4O3oFcc5cdKI0sMxF8NNIv2W3bvM8P4sWlkjnJaWESjhOwf+bPO
1Lqrda2HjhV79wVdv6pFf2f3fOE+4KRWjc1b8/qy9n8H65aZU1dzSdsUWLdMYbOb
G/lAbXAO59m8n64WC0PfooVRzUKCu+A+YW8nZbXFZB53fvJ5MpWre7jGHG/Lz9ja
S/d7V2oTQKOK/q+fCQiqr7Pl3KMYOUpj0dBAKJ2aRRNo3l7BuSoqLeoIMt4E9EmW
nwUZ/QMemem/jktH9JP88Xn/6/sD/IztmSDpMRG6B/+U+/bSbxY7mb7QMiUb8aam
31uVxFmqLJufjxU/xxDjDJrpJKH3QH8iX4CF1OnoSt9Ceyg8BN/a+rzhw/8I4ko6
IMKDEVUwTy1cmPpDIduS/VX+jJR1BVlRSVRe9Jmb3oFo+dGll9y1z4l6cMkH1H8X
NELGNEwv64n33N1L9BBzPHf/6QYIov9YiM/USO4gSqTwX2hu75k=
=SGwE
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="21"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1503483865 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;imagemagick: CVE-2017-13140&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;Stuck in LockSemaphoreInfo after reading a png with width==MAGICK_WIDTH_LIMIT #596&#39;
            };
-->
<strong>Changed Bug title to &#39;imagemagick: CVE-2017-13140&#39; from &#39;Stuck in LockSemaphoreInfo after reading a png with width==MAGICK_WIDTH_LIMIT #596&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 23 Aug 2017 10:24:25 GMT) (<a href="bugreport.cgi?bug=870111;msg=22">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=22">mbox</a>, <a href="#21">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="23"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1505978738 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Thu, 21 Sep 2017 07:25:38 GMT) (<a href="bugreport.cgi?bug=870111;msg=24">full text</a>, <a href="bugreport.cgi?bug=870111;mbox=yes;msg=24">mbox</a>, <a href="#23">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=870111">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:34:41 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright ¬© 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
