<!doctype html>
<html lang="en-US" class="no-js aws-lng-en_US" xmlns="http://www.w3.org/1999/xhtml" data-aws-assets="//a0.awsstatic.com" data-js-version="1.0.586" data-css-version="1.0.516" data-static-assets="//a0.awsstatic.com" prefix="og: http://ogp.me/ns#">
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <title>Improved client-side encryption: Explicit KeyIds and key commitment | AWS Security Blog</title> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <link rel="dns-prefetch" href="//a0.awsstatic.com"> 
  <link rel="alternate" type="application/rss+xml" title="AWS Security Blog » Improved client-side encryption: Explicit KeyIds and key commitment Comments Feed" href="https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/feed/"> 
  <link rel="canonical" href="https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:site_name" content="Amazon Web Services"> 
  <meta property="og:title" content="Improved client-side encryption: Explicit KeyIds and key commitment | Amazon Web Services"> 
  <meta property="og:type" content="article"> 
  <meta property="og:url" content="https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/"> 
  <meta property="og:description" content="I’m excited to announce the launch of two new features in the AWS Encryption SDK (ESDK): local KeyId filtering and key commitment. These features each enhance security for our customers, acting as additional layers of protection for your most critical data. In this post I’ll tell you how they work. Let’s dig in. The ESDK […]"> 
  <meta property="og:image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2020/09/24/aws-kms-social-1-2020.jpg"> 
  <meta property="og:image:width" content="800"> 
  <meta property="og:image:height" content="400"> 
  <meta property="og:updated_time" content="2020-09-25T13:23:08-07:00"> 
  <meta property="article:publisher" content="https://www.facebook.com/amazonwebservices"> 
  <meta property="article:section" content="AWS Key Management Service"> 
  <meta property="article:tag" content="AWS Key Management Service"> 
  <meta property="article:tag" content="Expert (400)"> 
  <meta property="article:tag" content="Security, Identity, &amp; Compliance"> 
  <meta property="article:tag" content="AWS Encryption SDK"> 
  <meta property="article:tag" content="Encryption"> 
  <meta property="article:tag" content="keyrings"> 
  <meta property="article:tag" content="multi-region"> 
  <meta property="article:tag" content="Security Blog"> 
  <meta property="article:published_time" content="2020-09-24T19:45:26-07:00"> 
  <meta property="article:modified_time" content="2020-09-25T13:23:08-07:00"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:site" content="@awscloud"> 
  <meta name="twitter:domain" content="https://aws.amazon.com/blogs/"> 
  <meta name="twitter:title" content="Improved client-side encryption: Explicit KeyIds and key commitment | Amazon Web Services"> 
  <meta name="twitter:description" content="I’m excited to announce the launch of two new features in the AWS Encryption SDK (ESDK): local KeyId filtering and key commitment. These features each enhance security for our customers, acting as additional layers of protection for your most critical data. In this post I’ll tell you how they work. Let’s dig in. The ESDK […]"> 
  <meta name="twitter:image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2020/09/24/aws-kms-social-1-2020.jpg"> 
  <link rel="icon" type="image/ico" href="//a0.awsstatic.com/main/images/site/fav/favicon.ico"> 
  <link rel="shortcut icon" type="image/ico" href="//a0.awsstatic.com/main/images/site/fav/favicon.ico"> 
  <link rel="apple-touch-icon" sizes="57x57" href="//a0.awsstatic.com/main/images/site/touch-icon-iphone-114-smile.png"> 
  <link rel="apple-touch-icon" sizes="72x72" href="//a0.awsstatic.com/main/images/site/touch-icon-ipad-144-smile.png"> 
  <link rel="apple-touch-icon" sizes="114x114" href="//a0.awsstatic.com/main/images/site/touch-icon-iphone-114-smile.png"> 
  <link rel="apple-touch-icon" sizes="144x144" href="//a0.awsstatic.com/main/images/site/touch-icon-ipad-144-smile.png"> 
  <link rel="home" type="application/rss+xml" title="RSS 2.0 Feed" href="https://aws.amazon.com/blogs/security/feed/"> 
  <meta name="robots" content="index, follow"> 
  <link rel="stylesheet" href="//a0.awsstatic.com/libra-css/css/1.0.390/style-awsm.css"> 
  <link rel="stylesheet" href="//a0.awsstatic.com/aws-blog/1.0.47/css/blog.css"> 
  <script>
    var AWS = {
      PageSettings: {
        supportedLanguages: ["ar","de","en","es","fr","id","it","jp","ko","pt","ru","th","tr","vi","cn","tw"],
        libraCSSPath: '//a0.awsstatic.com/libra-css/css/1.0.390',
        currentLanguage: 'en-US',
        blogPageTitle: "Improved client-side encryption: Explicit KeyIds and key commitment"      }
    };
    var require = {
      baseUrl: '//a0.awsstatic.com',
      packages: [
        { name: 'libra', location: 'libra/1.0.395' }
      ],
      paths: {
        'aws-blog': '//a0.awsstatic.com/aws-blog/1.0.47/js',
        'blog': '//a0.awsstatic.com/chrome/js/1.0.586/blog',
        'directories': '//a0.awsstatic.com/libra/1.0.395/directories',
        'jquery': 'jquery-amd',
        'librastandardlib': '//a0.awsstatic.com/libra/1.0.395/librastandardlib',
        "plugins": '//a0.awsstatic.com/chrome/js/1.0.586/plugins',
        "scripts": '//a0.awsstatic.com/libra/1.0.395/v1-polyfills/scripts'
      },
      deps: [ 'scripts' ],
      waitSeconds: 15
    };
  </script> 
  <script src="//a0.awsstatic.com/aws-blog/1.0.47/js/blog-head.js"></script> 
  <script src="//a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js"></script> 
  <script>
    AWS.TargetMediator = {
      supportedLanguages: AWS.PageSettings.supportedLanguages,
      pageLanguage: 'en',
      customParams: {"category0":"AWS Key Management Service","category1":"Expert (400)","category2":"Security, Identity, &amp; Compliance"}    };
  </script> 
  <script src="//a0.awsstatic.com/target/1.0.117/aws-target-mediator.js"></script> 
  <noscript> 
   <style>.js-mbox { visibility: visible; }</style> 
  </noscript> 
 </head> 
 <body class="awsm aws-blogs-page aws-blogs-page-type-single"> 
  <header id="aws-page-header" class="awsm m-page-header" role="banner"> 
   <div id="m-nav" class="m-nav" role="navigation"> 
    <div class="m-nav-header lb-clearfix" data-menu-url="https://s0.awsstatic.com/en_US/nav/v3/panel-content/desktop/index.html"> 
     <div class="m-nav-logo"> 
      <div class="lb-bg-logo aws-amazon_web_services_smile-header-desktop-en"> 
       <a href="https://aws.amazon.com/?nc2=h_lg"><span>Click here to return to Amazon Web Services homepage</span></a> 
      </div> 
     </div> 
     <div class="m-nav-secondary-links" style="min-width: 620px"> 
      <a href="https://aws.amazon.com/contact-us/?nc2=h_header">Contact Us</a> 
      <a class="lb-txt-none lb-tiny-iblock lb-txt-13 lb-txt lb-has-trigger-indicator" href="#" data-mbox-ignore="true" data-lb-popover-trigger="popover-support-selector"> Support&nbsp; <i class="icon-caret-down lb-trigger-mount"></i></a> 
      <a id="m-nav-language-selector" class="lb-tiny-iblock lb-txt lb-has-trigger-indicator" href="#" data-lb-popover-trigger="popover-language-selector" data-language="en">English&nbsp;<i class="icon-caret-down lb-trigger-mount"></i></a> 
      <a class="lb-tiny-iblock lb-txt lb-has-trigger-indicator" href="#" data-lb-popover-trigger="popover-my-account">My Account&nbsp;<i class="icon-caret-down lb-trigger-mount"></i></a> 
      <div class="m-nav-cta-btn"> 
       <div class="lb-mbox js-mbox" data-lb-comp="mbox" data-lb-comp-ignore="true" data-mbox="en_header_nav_cta"> 
        <div class="lb-data-attr-wrapper data-attr-wrapper" data-da-type="so" data-da-so-type="viewport" data-da-so-language="en" data-da-so-category="monitoring" data-da-so-name="nav-buttons" data-da-so-version="sign-up-sign-in-all" data-da-so-url="nav"> 
         <div class="data-attr-wrapper lb-tiny-iblock lb-none-pad lb-box" data-da-type="so" data-da-so-type="viewport" data-da-so-language="en" data-da-so-category="monitoring" data-da-so-name="nav-buttons" data-da-so-version="prospect-sign-in" data-da-so-url="all"> 
          <a class="lb-txt-none lb-tiny-iblock lb-txt-13 lb-txt" style="padding-top:5px; padding-right:13px;" href="https://console.aws.amazon.com/console/home?nc2=h_ct&amp;src=header-signin"> Sign In</a> 
         </div> 
         <div class="data-attr-wrapper lb-tiny-iblock lb-none-v-margin lb-btn" data-da-type="so" data-da-so-type="viewport" data-da-so-language="en" data-da-so-category="monitoring" data-da-so-name="nav-buttons" data-da-so-version="prospect-signup" data-da-so-url="all"> 
          <a class="lb-btn-p-primary" href="https://portal.aws.amazon.com/gp/aws/developer/registration/index.html?nc2=h_ct&amp;src=header_signup" data-trk-params="{&quot;trkOverrideWithQs&quot;:true}" role="button"> <span> Create an AWS Account</span> </a> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="m-nav-primary-group"> 
      <div class="m-nav-primary-links"> 
       <i class="m-nav-angle-left-icon" aria-hidden="true"></i> 
       <ul> 
        <li><a href="https://aws.amazon.com/products/?nc2=h_ql_prod" data-panel="m-nav-panel-products">Products</a></li> 
        <li><a href="https://aws.amazon.com/solutions/?nc2=h_ql_sol" data-panel="m-nav-panel-solutions">Solutions</a></li> 
        <li><a href="https://aws.amazon.com/pricing/?nc2=h_ql_pr" data-panel="m-nav-panel-pricing">Pricing</a></li> 
        <li><a href="https://docs.aws.amazon.com/index.html?nc2=h_ql_doc" data-panel="m-nav-panel-documentation">Documentation</a></li> 
        <li><a href="https://aws.amazon.com/getting-started/?nc2=h_ql_le" data-panel="m-nav-panel-learn">Learn</a></li> 
        <li><a href="https://aws.amazon.com/partners/?nc2=h_ql_pn" data-panel="m-nav-panel-partner">Partner Network</a></li> 
        <li><a href="https://aws.amazon.com/marketplace/?nc2=h_ql_mp" data-panel="m-nav-panel-marketplace">AWS Marketplace</a></li> 
        <li><a href="https://aws.amazon.com/customer-enablement/?nc2=h_ql_ce" data-panel="m-nav-panel-customer">Customer Enablement</a></li> 
        <li><a href="https://aws.amazon.com/events/?nc2=h_ql_ev" data-panel="m-nav-panel-events">Events</a></li> 
        <li><a href="https://aws.amazon.com/contact-us/?nc2=h_ql_exm" data-panel="m-nav-panel-more">Explore More </a></li> 
       </ul> 
       <div class="m-nav-icon-group"> 
        <i class="m-nav-angle-right-icon" aria-hidden="true"></i> 
        <i class="m-nav-search-icon"></i> 
       </div> 
      </div> 
      <div class="m-nav-search"> 
       <form action="https://aws.amazon.com/search/" role="search"> 
        <div class="m-typeahead" data-directory-id="typeahead-suggestions" data-lb-comp="typeahead"> 
         <input class="m-nav-search-field" placeholder="Search" autocomplete="off" spellcheck="false" dir="auto" type="text" name="searchQuery"> 
        </div> 
       </form> 
       <i class="m-nav-close-icon"></i> 
      </div> 
     </div> 
    </div> 
    <div class="lb-popover lb-popover-aui lb-popover-tiny" data-lb-comp="popover" data-id="popover-language-selector" data-action="hover" data-position="top"> 
     <div class="lb-grid lb-row lb-row-max-large lb-snap"> 
      <div class="lb-col lb-tiny-24 lb-mid-12"> 
       <ul class="lb-txt-none lb-ul lb-list-style-none lb-tiny-ul-block"> 
        <li data-language="ar"><a href="https://aws.amazon.com/ar/?nc1=h_ls">عربي</a></li> 
        <li data-language="id"><a href="https://aws.amazon.com/id/?nc1=h_ls">Bahasa Indonesia</a></li> 
        <li data-language="de"><a href="https://aws.amazon.com/de/?nc1=h_ls">Deutsch</a></li> 
        <li data-language="en"><a href="https://aws.amazon.com/?nc1=h_ls">English</a></li> 
        <li data-language="es"><a href="https://aws.amazon.com/es/?nc1=h_ls">Español</a></li> 
        <li data-language="fr"><a href="https://aws.amazon.com/fr/?nc1=h_ls">Français</a></li> 
        <li data-language="it"><a href="https://aws.amazon.com/it/?nc1=h_ls">Italiano</a></li> 
        <li data-language="pt"><a href="https://aws.amazon.com/pt/?nc1=h_ls">Português</a></li> 
       </ul> 
      </div> 
      <div class="lb-col lb-tiny-24 lb-mid-12"> 
       <ul class="lb-txt-none lb-ul lb-list-style-none lb-tiny-ul-block"> 
        <li data-language="vi"><a href="https://aws.amazon.com/vi/?nc1=f_ls">Tiếng Việt</a></li> 
        <li data-language="tr"><a href="https://aws.amazon.com/tr/?nc1=h_ls">Türkçe</a></li> 
        <li data-language="ru"><a href="https://aws.amazon.com/ru/?nc1=h_ls">Ρусский</a></li> 
        <li data-language="th"><a href="https://aws.amazon.com/th/?nc1=f_ls">ไทย</a></li> 
        <li data-language="jp"><a href="https://aws.amazon.com/jp/?nc1=h_ls">日本語</a></li> 
        <li data-language="ko"><a href="https://aws.amazon.com/ko/?nc1=h_ls">한국어</a></li> 
        <li data-language="cn"><a href="https://aws.amazon.com/cn/?nc1=h_ls">中文 (简体)</a></li> 
        <li data-language="tw"><a href="https://aws.amazon.com/tw/?nc1=h_ls">中文 (繁體)</a></li> 
       </ul> 
      </div> 
     </div> 
    </div> 
    <div class="lb-popover lb-popover-aui lb-popover-tiny" data-lb-comp="popover" data-id="popover-my-account" data-action="hover" data-position="top"> 
     <ul class="lb-txt-none lb-ul lb-list-style-none lb-tiny-ul-block"> 
      <li><a href="https://console.aws.amazon.com/?nc2=h_m_mc">AWS Management Console</a></li> 
      <li><a href="https://console.aws.amazon.com/billing/home#/account?nc2=h_m_ma">Account Settings</a></li> 
      <li><a href="https://console.aws.amazon.com/billing/home?nc2=h_m_bc">Billing &amp; Cost Management</a></li> 
      <li><a href="https://console.aws.amazon.com/iam/home?nc2=h_m_sc#security_credential">Security Credentials</a></li> 
      <li><a href="https://phd.aws.amazon.com/?nc2=h_m_sc">AWS Personal Health Dashboard</a></li> 
     </ul> 
    </div> 
    <div class="lb-popover lb-popover-aui lb-popover-tiny" data-lb-comp="popover" data-id="popover-support-selector" data-action="hover" data-position="top"> 
     <ul class="lb-txt-none lb-ul lb-list-style-none lb-tiny-ul-block"> 
      <li><a href="https://console.aws.amazon.com/support/home/?nc2=h_ql_cu">Support Center</a></li> 
      <li><a href="https://aws.amazon.com/premiumsupport/knowledge-center/?nc2=h_m_ma">Knowledge Center</a></li> 
      <li><a href="https://aws.amazon.com/premiumsupport/?nc2=h_m_bc">AWS Support Overview</a></li> 
     </ul> 
    </div> 
    <script class="tt-suggestion-tpl" type="text/x-handlebars-template">
    <div>
      <a href="{{primaryUrl}}">
        <div class="tt-title">
          {{cleanHTMLEntity title}}
        </div>
        {{#if desc}}
          <div class="tt-desc">
            {{cleanHTMLEntity desc}}
          </div>
        {{/if}}
      </a>
      <div class="tt-btn-group">
        {{#if pricingUrl}}
          <a href="{{pricingUrl}}">
            <div class="tt-btn">Pricing</div>
          </a>
        {{/if}}
        {{#if docsUrl}}
          <a href="{{docsUrl}}">
            <div class="tt-btn">Documentation</div>
          </a>
        {{/if}}
        {{#if calculatorUrl}}
          <a href="{{calculatorUrl}}">
            <div class="tt-btn">Calculator</div>
          </a>
        {{/if}}
      </div>
    </div>
  </script> 
    <script class="tt-products-head-tpl" type="text/x-handlebars-template">
    <div class="tt-header lb-txt-bold">
      <p>Products</p>
    </div>
  </script> 
    <script class="tt-keypages-head-tpl" type="text/x-handlebars-template">
    <div class="tt-header lb-txt-bold">
      <p>Related Pages</p>
    </div>
  </script> 
    <script class="tt-tutorials-head-tpl" type="text/x-handlebars-template">
    <div class="tt-header lb-txt-bold">
      <p>Tutorials</p>
    </div>
  </script> 
    <script class="tt-blogs-head-tpl" type="text/x-handlebars-template">
    <div class="tt-header lb-txt-bold">
      <p>Blogs</p>
    </div>
  </script> 
    <script class="tt-see-all-tpl" type="text/x-handlebars-template">
    <div class="tt-see-all">
      <a href="https://aws.amazon.com/search/?searchQuery={{ query }}">See more results for "{{ query }}"&lrm;</a>
    </div>
  </script> 
   </div> 
   <div id="m-nav-mobile" class="m-nav-mobile"> 
    <div id="m-nav-mobile-header" class="m-nav-mobile-header" data-menu-url="https://s0.awsstatic.com/en_US/nav/v3/panel-content/mobile/index.html"> 
     <div class="lb-bg-logo aws-amazon_web_services_smile-header-mobile-en"> 
      <a href="https://aws.amazon.com/?nc2=h_lg"><span>Click here to return to Amazon Web Services homepage</span></a> 
     </div> 
     <div class="m-nav-mobile-button-group"> 
      <i class="m-nav-mobile-button icon-search"></i> 
      <i class="m-nav-mobile-button icon-reorder"></i> 
     </div> 
    </div> 
    <div id="m-nav-mobile-search" class="m-nav-mobile-search"> 
     <form action="https://aws.amazon.com/search" role="search"> 
      <div class="m-typeahead"> 
       <input class="m-nav-search-field" placeholder="Search" autocomplete="off" spellcheck="false" dir="auto" type="text" name="searchQuery"> 
      </div> 
     </form> 
    </div> 
    <nav id="m-nav-trimdown" role="navigation"> 
     <ul class="m-nav-mobile-menu-group"> 
      <li> <a href="https://aws.amazon.com/products/?nc2=h_mo">Products</a> </li> 
      <li> <a href="https://aws.amazon.com/solutions/?nc2=h_mo">Solutions</a> </li> 
      <li> <a href="https://aws.amazon.com/pricing/?nc2=h_mo">Pricing</a> </li> 
      <li> <a href="https://aws.amazon.com/what-is-aws/?nc2=h_mo">Introduction to AWS</a> </li> 
      <li> <a href="https://aws.amazon.com/getting-started/?nc2=h_mo">Getting Started</a> </li> 
      <li> <a href="https://aws.amazon.com/documentation/?nc2=h_mo">Documentation</a> </li> 
      <li> <a href="https://aws.amazon.com/training/?nc2=h_mo">Training and Certification</a> </li> 
      <li> <a href="https://aws.amazon.com/developer/?nc2=h_mo">Developer Center</a> </li> 
      <li> <a href="https://aws.amazon.com/solutions/case-studies/?nc2=h_mo">Customer Success</a> </li> 
      <li> <a href="https://aws.amazon.com/partners/?nc2=h_mo">Partner Network</a> </li> 
      <li> <a href="https://aws.amazon.com/marketplace/?nc2=h_mo">AWS Marketplace</a> </li> 
      <li> <a href="https://console.aws.amazon.com/support/home?nc2=h_ql_cu">Support</a> </li> 
      <li> <a href="https://console.aws.amazon.com/console/home">Log into Console</a> </li> 
      <li> <a href="https://aws.amazon.com/console/mobile/">Download the Mobile App</a> </li> 
     </ul> 
    </nav> 
   </div> 
  </header> 
  <div class="awsm"> 
   <div class="lb-blog-nav" data-lb-comp="aws-blog:blog-nav"> 
    <div class="lb-row lb-row-max-xlarge lb-snap"> 
     <div class="lb-blog-nav-content"> 
      <div class="lb-blog-nav-links"> 
       <a class="lb-txt-none lb-txt" href="/blogs"> Blog Home</a> 
       <a class="lb-txt-none lb-txt lb-has-trigger-indicator" href="/blogs" data-lb-popover-trigger="blog-category" data-trk-params="{&quot;trkOverrideWithQs&quot;:true}"> Category&nbsp; <i class="icon-caret-down lb-trigger-mount"></i></a> 
       <a class="lb-txt-none lb-txt lb-has-trigger-indicator" href="/blogs" data-lb-popover-trigger="blog-editions"> Edition&nbsp; <i class="icon-caret-down lb-trigger-mount"></i></a> 
       <a class="lb-txt-none lb-txt lb-has-trigger-indicator" href="/blogs" data-lb-popover-trigger="blog-follow"> Follow&nbsp; <i class="icon-caret-down lb-trigger-mount"></i></a> 
      </div> 
      <div class="lb-blog-nav-search"> 
       <form action="https://aws.amazon.com/search" role="search"> 
        <input type="hidden" name="facet_type" value="blogs"> 
        <input type="hidden" name="sortResults" value="modification_date desc"> 
        <div class="lb-search-input"> 
         <input name="q" type="text" placeholder="Search Blogs"> 
         <div class="lb-blog-search-button"> 
          <button class="icon-search" type="submit"></button> 
         </div> 
        </div> 
       </form> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="lb-popover lb-popover-aui lb-popover-xlarge" data-lb-comp="popover" data-id="blog-category" data-action="hover" data-position="top"> 
    <div class="lb-grid lb-row lb-row-max-large lb-snap"> 
     <div class="lb-col lb-tiny-24 lb-mid-12"> 
      <div class="lb-none-pad lb-none-v-margin lb-box"> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/architecture/"> Architecture</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/aws-cloud-financial-management/"> AWS Cloud Financial Management</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/apn/"> AWS Partner Network</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/podcasts/aws-podcast/?sc_ichannel=ha&amp;sc_icampaign=acq_awsblognav&amp;sc_icontent=categorynav"> AWS Podcast</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/awsmarketplace/"> AWS Marketplace</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/aws/"> AWS News</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/big-data/"> Big Data</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/business-productivity/"> Business Productivity</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/compute/"> Compute</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/contact-center/"> Contact Center</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/containers/"> Containers</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/database/"> Database</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/desktop-and-application-streaming/"> Desktop &amp; Application Streaming</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/developer/"> Developer</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/devops/"> DevOps</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/enterprise-strategy/"> Enterprise Strategy</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/mobile/"> Front-End Web &amp; Mobile</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/gametech/"> Game Tech</a> 
      </div> 
     </div> 
     <div class="lb-col lb-tiny-24 lb-mid-12"> 
      <div class="lb-none-pad lb-none-v-margin lb-box"> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/hpc/"> HPC</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/infrastructure-and-automation/"> Infrastructure &amp; Automation</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/industries/"> Industries</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/iot/"> Internet of Things</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/machine-learning/"> Machine Learning</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/mt/"> Management &amp; Governance</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/media/"> Media</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/messaging-and-targeting/"> Messaging &amp; Targeting</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/networking-and-content-delivery/"> Networking &amp; Content Delivery</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/opensource/"> Open Source</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/publicsector/"> Public Sector</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/quantum-computing/" data-trk-params="{&quot;trkOverrideWithQs&quot;:true}"> Quantum Computing</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/robotics/"> Robotics</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/awsforsap/"> SAP</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/security/"> Security, Identity, &amp; Compliance</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/startups/"> Startups</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/storage/"> Storage</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/training-and-certification/"> Training &amp; Certification</a> 
       <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/modernizing-with-aws/"> Windows on AWS</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="lb-popover lb-popover-aui lb-popover-tiny" data-lb-comp="popover" data-id="blog-editions" data-action="hover" data-position="top"> 
    <div class="lb-none-pad lb-box"> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/cn/blogs/china/"> 中国版</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/fr/blogs/france/"> Édition Française</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/de/blogs/germany/"> Deutsche Edition</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/jp/blogs/news/"> 日本版</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/ko/blogs/korea/"> 한국 에디션</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/pt/blogs/aws-brasil/" data-trk-params="{&quot;trkOverrideWithQs&quot;:true}"> Edição em Português</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/es/blogs/aws-spanish/" data-trk-params="{&quot;trkOverrideWithQs&quot;:true}"> Edición en Español</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/blogs/"> English Edition</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/ru/blogs/rus/"> Версия на русском</a> 
     <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/id/blogs/indonesia/"> Edisi Bahasa Indonesia</a> 
    </div> 
   </div> 
   <div class="lb-popover lb-popover-aui lb-popover-tiny" data-lb-comp="popover" data-id="blog-follow" data-action="hover" data-position="top"> 
    <div class="lb-none-pad lb-box"> 
     <a class="lb-txt-none lb-txt" href="https://pages.awscloud.com/communication-preferences?sc_ichannel=ha&amp;sc_icampaign=multi_emailoptin&amp;sc_isegment=en&amp;sc_iplace=fl-nav&amp;sc_icontent=subscribe_for_updates&amp;trkCampaign=EmailOptin&amp;trk=blog"> Mailing List</a> 
    </div> 
   </div> 
  </div> 
  <div id="aws-page-content" class="aws-blog-has-related-posts lb-page-content lb-page-with-sticky-subnav blog-page" data-page-alert-target="true"> 
   <div class="aws-blog-related-posts" data-lb-comp="aws-blog:related-items" data-directory-id="blog-posts" data-related-tags="[&quot;blog-posts#category-security-identity-compliance#aws-key-management-service&quot;,&quot;blog-posts#category-learning-levels#expert-400&quot;,&quot;blog-posts#category#security-identity-compliance&quot;]" data-current-item="blog-posts#30-16109" data-order-by="SortOrderValue" data-number-of-items="8"> 
    <div class="aws-directories-container"></div> 
    <script type="text/x-handlebars-template">
    <h4>Related Posts</h4>
    <aside>
      <nav>
        <ul>
          {{#each items}}
            <li><a href="{{track_url additionalFields.link 'b_rp'}}">{{{additionalFields.title}}}</a></li>
          {{/each}}
        </ul>
      </nav>
    </aside>
  </script> 
   </div> 
   <div class="aws-blog-content lb-row lb-row-max-large lb-snap lb-gutter-mid"> 
    <main class="lb-col lb-tiny-24 lb-mid-16" role="main"> 
     <h2 class="lb-h5 blog-title"><a href="https://aws.amazon.com/blogs/security/">AWS Security Blog</a></h2> 
     <article class="blog-post" vocab="http://schema.org/" typeof="TechArticle"> 
      <meta property="inLanguage" content="en-US"> 
      <meta property="image" content="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2020/09/24/aws-kms-social-1-2020.jpg"> 
      <h1 class="lb-h2 blog-post-title" property="name headline">Improved client-side encryption: Explicit KeyIds and key commitment</h1> 
      <footer class="blog-post-meta" data-lb-comp="aws-blog:share-dialog">
        by 
       <span property="author" typeof="Person"><span property="name">Alex Tribble</span></span> | on 
       <time property="datePublished" datetime="2020-09-24T19:45:26-07:00">24 SEP 2020</time> | in 
       <span class="blog-post-categories"><a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/aws-key-management-service/" title="View all posts in AWS Key Management Service"><span property="articleSection">AWS Key Management Service</span></a>, <a href="https://aws.amazon.com/blogs/security/category/learning-levels/expert-400/" title="View all posts in Expert (400)"><span property="articleSection">Expert (400)</span></a>, <a href="https://aws.amazon.com/blogs/security/category/security-identity-compliance/" title="View all posts in Security, Identity, &amp; Compliance"><span property="articleSection">Security, Identity, &amp; Compliance</span></a></span> | 
       <a href="https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" property="url">Permalink</a> | 
       <a id="aws-comment-trigger-16109" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=16109&amp;disqus_title=Improved+client-side+encryption%3A+Explicit+KeyIds+and+key+commitment&amp;disqus_url=https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" data-lb-comp="aws-blog:commenting" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin" property="discussionUrl"><i class="icon-comment"></i> Comments</a> | 
       <a href="#" role="button" data-share-dialog-toggle><span class="span icon-share"></span>&nbsp;Share</a> 
       <div class="blog-share-dialog" data-share-dialog style="display: none;"> 
        <ul> 
         <li> <a class="lb-txt" href="https://www.facebook.com/sharer/sharer.php?u=https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" target="_blank" rel="noopener noreferrer"><span class="icon-facebook-square" aria-label="Share on Facebook"></span></a> </li> 
         <li> <a class="lb-txt" href="https://twitter.com/intent/tweet/?text=Improved%20client-side%20encryption%3A%20Explicit%20KeyIds%20and%20key%20commitment&amp;via=awscloud&amp;url=https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" target="_blank" rel="noopener noreferrer"><span class="icon-twitter-square" aria-label="Share on Twitter"></span></a> </li> 
         <li> <a class="lb-txt" href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Improved%20client-side%20encryption%3A%20Explicit%20KeyIds%20and%20key%20commitment&amp;source=Amazon%20Web%20Services&amp;summary=I%E2%80%99m%20excited%20to%20announce%20the%20launch%20of%20two%20new%20features%20in%20the%20AWS%20Encryption%20SDK%20%28ESDK%29%3A%20local%20KeyId%20filtering%20and%20key%20commitment.%20These%20features%20each%20enhance%20security%20for%20our%20customers%2C%20acting%20as%20additional%20layers%20of%20protection%20for%20your%20most%20critical%20data.%20In%20this%20post%20I%E2%80%99ll%20tell%20you%20how%20they%20work.%20Let%E2%80%99s%20dig%20in.%20The%20ESDK%20%5B%26hellip%3B%5D&amp;url=https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" target="_blank" rel="noopener noreferrer"><span class="icon-linkedin-square" aria-label="Share on LinkedIn"></span></a> </li> 
         <li> <a class="lb-txt" href="mailto:?subject=Improved%20client-side%20encryption%3A%20Explicit%20KeyIds%20and%20key%20commitment&amp;body=Improved%20client-side%20encryption%3A%20Explicit%20KeyIds%20and%20key%20commitment%0A%0Ahttps://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" target="_blank" rel="noopener noreferrer"><span class="icon-envelope-square" aria-label="Share on Email"></span></a> </li> 
         <li class="blog-share-dialog-url"><input type="text" value="https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" title="Link to Improved client-side encryption: Explicit KeyIds and key commitment" readonly data-share-dialog-url></li> 
        </ul> 
       </div> 
      </footer> 
      <section class="blog-post-content" property="articleBody"> 
       <p>I’m excited to announce the launch of two new features in the <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/introduction.html" target="_blank" rel="noopener noreferrer">AWS Encryption SDK (ESDK)</a>: local <span style="font-family: courier">KeyId</span> filtering and key commitment. These features each enhance security for our customers, acting as additional layers of protection for your most critical data. In this post I’ll tell you how they work. Let’s dig in.</p> 
       <p>The ESDK is a client-side encryption library designed to make it easy for you to implement client-side encryption in your application using industry standards and best practices. Since the security of your encryption is only as strong as the security of your key management, the ESDK integrates with the <a href="https://aws.amazon.com/kms/" target="_blank" rel="noopener noreferrer">AWS Key Management Service (AWS KMS)</a>, though the ESDK doesn’t require you to use any particular source of keys. When using AWS KMS, the ESDK wraps data keys to one or more customer master keys (CMKs) stored in AWS KMS on encrypt, and calls AWS KMS again on decrypt to unwrap the keys.</p> 
       <p>It’s important to use only CMKs you trust. If you encrypt to an untrusted CMK, someone with access to the message and that CMK could decrypt your message. It’s equally important to only use trusted CMKs on decrypt! Decrypting with an untrusted CMK could expose you to ciphertext substitution, where you could decrypt a message that was valid, but written by an untrusted actor. There are several controls you can use to prevent this. I recommend a belt-and-suspenders approach. (Technically, this post’s approach is more like a belt, suspenders, and an extra pair of pants.)</p> 
       <p>The first two controls aren’t new, but they’re important to consider. First, you should configure your application with an <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_id-based" target="_blank" rel="noopener noreferrer">AWS Identity and Access Management (IAM) policy</a> that only allows it to use specific CMKs. An IAM policy allowing <span style="font-family: courier">Decrypt</span> on <span style="font-family: courier">“Resource”:”*”</span> might be appropriate for a development or testing account, but production accounts should list out CMKs explicitly. Take a look at our <a href="https://docs.aws.amazon.com/kms/latest/developerguide/iam-policies.html#iam-policies-best-practices" target="_blank" rel="noopener noreferrer">best practices for IAM policies</a> for use with AWS KMS for more detailed guidance. Using IAM policy to control access to specific CMKs is a powerful control, because you can programmatically audit that the policy is being used across all of your accounts. To help with this, <a href="https://aws.amazon.com/config/" target="_blank" rel="noopener noreferrer">AWS Config</a> has added <a href="https://docs.aws.amazon.com/config/latest/developerguide/iam-inline-policy-blocked-kms-actions.html" target="_blank" rel="noopener noreferrer">new rules</a> and <a href="https://aws.amazon.com/security-hub/" target="_blank" rel="noopener noreferrer">AWS Security Hub</a> added <a href="https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-standards-fsbp-controls.html#fsbp-kms-1" target="_blank" rel="noopener noreferrer">new controls</a> to detect existing IAM policies that might allow broader use of CMKs than you intended. We recommend that you enable Security Hub’s Foundational Security Best Practices standard in all of your accounts and regions. This standard includes a set of vetted automated security checks that can help you assess your security posture across your AWS environment. To help you when writing new policies, the IAM policy visual editor in the AWS Management Console warns you if you are about to create a new policy that would add the <span style="font-family: courier">“Resource”:”*”</span> condition in any policy.</p> 
       <p>The second control to consider is to make sure you’re passing the <span style="font-family: courier">KeyId</span> parameter to AWS KMS on <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_Decrypt.html" target="_blank" rel="noopener noreferrer"><span style="font-family: courier">Decrypt</span></a> and <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_ReEncrypt.html" target="_blank" rel="noopener noreferrer"><span style="font-family: courier">ReEncrypt</span></a> requests. <span style="font-family: courier">KeyId</span> is optional for symmetric CMKs on these requests, since the ciphertext blob that the <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_Encrypt.html" target="_blank" rel="noopener noreferrer"><span style="font-family: courier">Encrypt</span></a> request returns includes the <span style="font-family: courier">KeyId</span> as metadata embedded in the blob. That’s quite useful—it’s easier to use, and means you can’t (permanently) lose track of the <span style="font-family: courier">KeyId</span> without also losing the ciphertext. That’s an important concern for data that you need to access over long periods of time. Data stores that would otherwise include the ciphertext and <span style="font-family: courier">KeyId</span> as separate objects get re-architected over time and the mapping between the two objects might be lost. If you explicitly pass the <span style="font-family: courier">KeyId</span> in a decrypt operation, AWS KMS will only use that <span style="font-family: courier">KeyId</span> to decrypt, and you won’t be surprised by using an untrusted CMK. As a best practice, pass <span style="font-family: courier">KeyId</span> whenever you know it. ESDK messages always include the <span style="font-family: courier">KeyId</span>; as part of this release, the ESDK will now always pass <span style="font-family: courier">KeyId</span> when making AWS KMS <a href="https://docs.aws.amazon.com/kms/latest/APIReference/API_Decrypt.html" target="_blank" rel="noopener noreferrer"><span style="font-family: courier">Decrypt</span></a> requests.</p> 
       <p>A third control to protect you from using an unexpected CMK is called local <span style="font-family: courier">KeyId</span> filtering. If you explicitly pass the <span style="font-family: courier">KeyId</span> of an untrusted CMK, you would still be open to ciphertext substitution—so you need to be sure you’re only passing <span style="font-family: courier">KeyId</span>s that you trust. The ESDK will now filter <span style="font-family: courier">KeyId</span>s locally by using a list of trusted CMKs or AWS account IDs you configure. This enforcement happens client-side, before calling AWS KMS. Let’s walk through a code sample. I’ll use Java here, but this feature is available in all of the supported languages of the ESDK.</p> 
       <p>Let’s say your app is decrypting ESDK messages read out of an <a href="https://aws.amazon.com/sqs/" target="_blank" rel="noopener noreferrer">Amazon Simple Queue Service (Amazon SQS)</a> queue. Somewhere you’ll likely have a function like this:</p> 
       <div class="hide-language"> 
        <pre><code class="lang-java">public byte[] decryptMessage(final byte[] messageBytes,
                             final Map&lt;String, String&gt; encryptionContext) {
    // The Amazon Resource Name (ARN) of your CMK.
    final String keyArn = "arn:aws:kms:us-west-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab";

    // 1. Instantiate the SDK
    AwsCrypto crypto = AwsCrypto.builder().build();
</code></pre> 
       </div> 
       <p>Now, when you create a KmsMasterKeyProvider, you’ll configure it with one or more <span style="font-family: courier">KeyIds</span> you expect to use. I’m passing a single element here for simplicity.</p> 
       <div class="hide-language"> 
        <pre><code class="lang-java">	// 2. Instantiate a KMS master key provider in Strict Mode using buildStrict()
    final KmsMasterKeyProvider keyProvider = KmsMasterKeyProvider.builder().buildStrict(keyArn); 
</code></pre> 
       </div> 
       <p>Decrypt the message as normal. The ESDK will check each encrypted data key against the list of <span style="font-family: courier">KeyId</span>s configured at creation: in the preceeding example, the single CMK in <span style="font-family: courier">keyArn</span>. The ESDK will only call AWS KMS for matching encrypted data keys; if none match, it will throw a <span style="font-family: courier">CannotUnwrapDataKeyException</span>.</p> 
       <div class="hide-language"> 
        <pre><code class="lang-java">	// 3. Decrypt the message.
    final CryptoResult&lt;byte[], KmsMasterKey&gt; decryptResult = crypto.decryptData(keyProvider, messageBytes);

    // 4. Validate the encryption context.
    //

</code></pre> 
       </div> 
       <p>(See <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/concepts.html#encryption-context" target="_blank" rel="noopener noreferrer">our documentation</a> for more information on how encryption context provides additional authentication features!)</p> 
       <div class="hide-language"> 
        <pre><code class="lang-java">	checkEncryptionContext(decryptResult, encryptionContext);

    // 5. Return the decrypted bytes.
    return decryptResult.getResult();
}
</code></pre> 
       </div> 
       <p>We recommend that everyone using the ESDK with AWS KMS adopt local <span style="font-family: courier">KeyId</span> filtering. How you do this varies by language—the <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/introduction.html" target="_blank" rel="noopener noreferrer">ESDK Developer Guide</a> provides detailed instructions and example code.</p> 
       <p>I’m especially excited to announce the second new feature of the ESDK, key commitment, which addresses a non-obvious property of modern symmetric ciphers used in the industry (including the Advanced Encryption Standard (AES)). These ciphers have the property that decrypting a single ciphertext with two different keys could give different plaintexts! Picking a pair of keys that decrypt to two <em>specific</em> messages involves trying random keys until you get the message you want, making it too expensive for most messages. However, if you’re encrypting messages of a few bytes, it might be feasible. Most authenticated encryption schemes, such as AES-GCM, don’t solve for this issue. Instead, they prevent someone who doesn’t control the keys from tampering with the ciphertext. But someone who controls both keys can craft a ciphertext that will properly authenticate under each key by using AES-GCM.</p> 
       <p>All of this means that if a sender can get two parties to use different keys, those two parties could decrypt the exact same ciphertext and get different results. That could be problematic if the message reads, for example, as “sell 1000 shares” to one party, and “buy 1000 shares” to another.</p> 
       <p>The ESDK solves this problem for you with key commitment. Key commitment means that only a single data key can decrypt a given message, and that trying to use any other data key will result in a failed authentication check and a failure to decrypt. This property allows for senders and recipients of encrypted messages to know that everyone will see the same plaintext message after decryption. If you’re interested in the technical details and cryptographic analysis of the construction used for key commitment in the AWS Encryption SDK, we are using the construction detailed in <a href="https://eprint.iacr.org/2020/1153">Shay Gueron, Key Committing AEADs, IACR ePrint 2020</a>.</p> 
       <p>Key commitment is on by default in version 2.0 of the ESDK. This is a breaking change from earlier versions. Existing customers should follow the <a href="https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/migration.html" target="_blank" rel="noopener noreferrer">ESDK migration guide</a> for their language to upgrade from 1.x versions of the ESDK currently in their environment. I recommend a thoughtful and careful migration.</p> 
       <p>AWS is always looking for feedback on ways to improve our services and tools. Security-related concerns can be reported to AWS Security at <a href="mailto:aws-security@amazon.com">aws-security@amazon.com</a>. We’re deeply grateful for security research, and we’d like to thank Thai Duong from Google’s security team for reaching out to us. I’d also like to thank my colleagues on the AWS Crypto Tools team for their collaboration, dedication, and commitment (pun intended) to continuously improving our libraries.</p> 
       <p>If you have feedback about this post, submit comments in the <strong>Comments</strong> section below. If you have questions about this post, start a new thread on the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=302" target="_blank" rel="noopener noreferrer">AWS Crypto Tools forum</a> or <a title="contact AWS Support" href="https://console.aws.amazon.com/support/home" target="_blank" rel="noopener noreferrer">contact AWS Support</a>.</p> 
       <p><strong>Want more AWS Security how-to content, news, and feature announcements? Follow us on <a title="Twitter" href="https://twitter.com/AWSsecurityinfo" target="_blank" rel="noopener noreferrer">Twitter</a>.</strong></p> 
       <footer> 
        <div class="blog-author-box"> 
         <div class="blog-author-image"> 
          <img class="aligncenter size-full wp-image-16161" src="https://d2908q01vomqb2.cloudfront.net/22d200f8670dbdb3e253a90eee5098477c95c23d/2020/09/24/Alex-Tribble-Authora.jpg" alt="Author" width="120" height="160"> 
         </div> 
         <h3 class="lb-h4">Alex Tribble</h3> 
         <p>Alex is a Principal Software Development Engineer in AWS Crypto Tools. She joined Amazon in 2008 and has spent her time building security platforms, protecting availability, and generally making things faster and cheaper. Outside of work, she, her wife, and children love to pack as much stuff into as few bikes as possible.</p> 
        </div> 
       </footer> 
       <!-- '"` --> 
      </section> 
      <footer> 
       <div class="blog-tag-list">
         TAGS: 
        <span property="keywords"><a href="https://aws.amazon.com/blogs/security/tag/aws-encryption-sdk/" rel="tag">AWS Encryption SDK</a>, <a href="https://aws.amazon.com/blogs/security/tag/encryption/" rel="tag">Encryption</a>, <a href="https://aws.amazon.com/blogs/security/tag/keyrings/" rel="tag">keyrings</a>, <a href="https://aws.amazon.com/blogs/security/tag/multi-region/" rel="tag">multi-region</a>, <a href="https://aws.amazon.com/blogs/security/tag/security-blog/" rel="tag">Security Blog</a></span> 
       </div> 
      </footer> 
      <div class="lb-row lb-collapse aws-comment-wrapper"> 
       <div class="lb-col lb-tiny-24 lb-push-0 lb-small-10 lb-small-push-7 lb-mid-10 lb-mid-push-7 lb-large-8 lb-large-push-8"> 
        <a id="aws-comment-trigger-16109" href="https://commenting.awsblogs.com/embed.html?disqus_shortname=aws-security-blog&amp;disqus_identifier=16109&amp;disqus_title=Improved+client-side+encryption%3A+Explicit+KeyIds+and+key+commitment&amp;disqus_url=https://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/" data-lb-comp="aws-blog:commenting" class="blog-btn-a blog-btn-a-large blog-btn-a-block" data-sandbox-attr="allow-forms allow-scripts allow-popups allow-same-origin"> <i class="icon-comment"></i> View Comments </a> 
       </div> 
      </div> 
      <div class="js-mbox" data-mbox="en_blog_post_comments"></div> 
     </article> 
    </main> 
    <div class="blog-sidebar lb-col lb-tiny-24 lb-mid-8"> 
     <div class="awsm"> 
      <div class="lb-box" style="padding-left:30px;"> 
       <h3 id="Resources" class="lb-txt-none lb-h3 lb-title" style="margin-top:30px;"> Resources</h3> 
       <div class="data-attr-wrapper lb-none-pad lb-none-v-margin lb-box" data-da-type="ha" data-da-channel="ha" data-da-language="en" data-da-placement="blog-sb-resources" data-da-campaign="acq_awsblogsb" data-da-content="security-resources" data-da-trk="blog_initial"> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/compliance/gdpr-center?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> General Data Protection Regulation (GDPR)</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/security?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> AWS Cloud Security</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/guardduty?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> Amazon Guard​Duty</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/macie?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> Amazon Macie</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/iam?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> AWS Identity and Access Management (IAM)</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/directoryservice?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> AWS Directory Service</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/artifact/?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> AWS Artifact</a> 
        <a class="lb-txt-none lb-txt" href="https://aws.amazon.com/compliance?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-resources"> AWS Compliance</a> 
       </div> 
       <div class="lb-grid lb-row lb-row-max-large lb-snap"> 
        <div class="lb-col lb-tiny-24 lb-mid-8"> 
         <hr class="lb-divider"> 
        </div> 
        <div class="lb-col lb-tiny-24 lb-mid-8"> 
        </div> 
        <div class="lb-col lb-tiny-24 lb-mid-8"> 
        </div> 
       </div> 
       <h3 id="Follow" class="lb-txt-none lb-h3 lb-title"> Follow</h3> 
       <div class="data-attr-wrapper lb-none-pad lb-none-v-margin lb-box" data-da-type="ha" data-da-channel="ha" data-da-language="en" data-da-placement="blog-sb-social" data-da-campaign="acq_awsblogsb" data-da-content="security-social" data-da-trk="blog_initial"> 
        <a class="lb-txt-none lb-txt" href="https://twitter.com/AWSsecurityinfo"> <i class="icon-twitter-square"></i>&nbsp;Twitter</a> 
        <a class="lb-txt-none lb-txt" href="https://www.facebook.com/amazonwebservices"> <i class="icon-facebook-square"></i>&nbsp;Facebook</a> 
        <a class="lb-txt-none lb-txt" href="https://www.linkedin.com/company/amazon-web-services/"> <i class="icon-linkedin-square"></i>&nbsp;LinkedIn</a> 
        <a class="lb-txt-none lb-txt" href="https://www.twitch.tv/aws"> <i class="icon-twitch"></i>&nbsp;Twitch</a> 
        <a class="lb-txt-none lb-txt" href="https://pages.awscloud.com/communication-preferences?sc_ichannel=ha&amp;sc_icampaign=acq_awsblogsb&amp;sc_icontent=security-social"> <i class="icon-envelope-square"></i>&nbsp;Email Updates</a> 
       </div> 
      </div> 
     </div> 
     <div class="js-mbox" data-mbox="en_blog_post_sidebar"></div> 
    </div> 
   </div> 
  </div> 
  <div class="aws-blog-next-related-article-arrow"> 
   <div class="aws-directories-container"></div> 
   <script type="text/x-handlebars-template">
    <div class="lb-article-arrow" data-next-related-item>
      <a class="lb-widget-body" href="{{track_url items.0.additionalFields.link 'b_nrp'}}">
        <div class="lb-content-area" >
                    <span class="lb-article-title">{{{items.0.additionalFields.title}}}</span>
        </div>
        <i class="icon-chevron-right"></i>
      </a>
    </div>
  </script> 
  </div> 
  <div class="awsm"> 
   <footer id="aws-page-footer" class="m-page-footer" role="contentinfo"> 
    <div data-url="https://dc.ads.linkedin.com/collect/?pid=3038&amp;fmt=gif" data-lb-comp="tracking-pixel"></div> 
    <div data-lb-comp="google-rlsa-pixel"></div> 
    <div class="data-attr-wrapper lb-none-v-margin lb-xb-grid-wrap" style="background-color:#242F3E;" data-da-type="so" data-da-so-type="viewport" data-da-so-language="en" data-da-so-category="monitoring" data-da-so-name="footer" data-da-so-version="a"> 
     <div class="lb-xb-grid lb-row-max-large lb-snap lb-tiny-xb-1 lb-small-xb-3 lb-large-xb-5"> 
      <div class="lb-xbcol"> 
       <div class="data-attr-wrapper lb-small-hide lb-btn" data-da-type="so" data-da-so-type="viewport" data-da-so-language="en" data-da-so-category="monitoring" data-da-so-name="footer_buttons" data-da-so-url="all" data-da-so-version="footer_signin-mobile-default"> 
        <a class="lb-btn-p-primary" href="https://console.aws.amazon.com/console/home?nc1=f_ct&amp;src=footer-signin-mobile" role="button"> <span> Sign In to the Console</span> </a> 
       </div> 
       <h3 id="Learn_About_AWS" class="lb-txt-none lb-txt-p-chromium lb-tiny-v-margin lb-h3 lb-title"> Learn About AWS</h3> 
       <ul class="lb-txt-p-chromium lb-ul lb-list-style-none lb-li-micro-v-margin lb-tiny-ul-block" style="margin-bottom:0px;"> 
        <li><a href="https://aws.amazon.com/what-is-aws/?nc1=f_cc" target="_blank" rel="noopener">What Is AWS?</a></li> 
        <li><a href="https://aws.amazon.com/what-is-cloud-computing/?nc1=f_cc" target="_blank" rel="noopener">What Is Cloud Computing?</a></li> 
        <li><a href="https://aws.amazon.com/diversity-inclusion/?nc1=f_cc" target="_blank" rel="noopener">AWS Inclusion, Diversity &amp; Equity</a></li> 
        <li><a href="https://aws.amazon.com/devops/what-is-devops/?nc1=f_cc" target="_blank" rel="noopener">What Is DevOps?</a></li> 
        <li><a href="https://aws.amazon.com/containers/?nc1=f_cc" target="_blank" rel="noopener">What Is a Container?</a></li> 
        <li><a href="https://aws.amazon.com/big-data/datalakes-and-analytics/what-is-a-data-lake/?nc1=f_cc" target="_blank" rel="noopener">What Is a Data Lake?</a></li> 
        <li><a href="https://aws.amazon.com/security/?nc1=f_cc" target="_blank" rel="noopener">AWS Cloud Security</a></li> 
        <li><a href="https://aws.amazon.com/new/?nc1=f_cc" target="_blank" rel="noopener">What's New</a></li> 
        <li><a href="https://aws.amazon.com/blogs/?nc1=f_cc" target="_blank" rel="noopener">Blogs</a></li> 
        <li><a href="https://press.aboutamazon.com/press-releases/aws" target="_blank" rel="noopener" title="Press Releases">Press Releases</a></li> 
       </ul> 
      </div> 
      <div class="lb-xbcol"> 
       <h3 id="Resources_for_AWS" class="lb-txt-none lb-txt-p-chromium lb-tiny-v-margin lb-h3 lb-title"> Resources for AWS</h3> 
       <ul class="lb-txt-p-chromium lb-ul lb-list-style-none lb-li-micro-v-margin lb-tiny-ul-block" style="margin-bottom:0px;"> 
        <li><a href="https://aws.amazon.com/getting-started/?nc1=f_cc" target="_blank" rel="noopener">Getting Started</a></li> 
        <li><a href="https://aws.amazon.com/training/?nc1=f_cc" target="_blank" rel="noopener">Training and Certification</a></li> 
        <li><a href="https://aws.amazon.com/solutions/?nc1=f_cc" target="_blank" rel="noopener">AWS Solutions Portfolio</a></li> 
        <li><a href="https://aws.amazon.com/architecture/?nc1=f_cc" target="_blank" rel="noopener">Architecture Center</a></li> 
        <li><a href="https://aws.amazon.com/faqs/?nc1=f_dr" target="_blank" rel="noopener">Product and Technical FAQs</a></li> 
        <li><a href="https://aws.amazon.com/resources/analyst-reports/?nc1=f_cc" target="_blank" rel="noopener">Analyst Reports</a></li> 
        <li><a href="https://aws.amazon.com/partners/?nc1=f_dr" target="_blank" rel="noopener">AWS Partner Network</a></li> 
       </ul> 
      </div> 
      <div class="lb-xbcol"> 
       <h3 id="Developers_on_AWS" class="lb-txt-none lb-txt-p-chromium lb-tiny-v-margin lb-h3 lb-title"> Developers on AWS</h3> 
       <ul class="lb-txt-p-chromium lb-ul lb-list-style-none lb-li-micro-v-margin lb-tiny-ul-block" style="margin-bottom:0px;"> 
        <li><a href="https://aws.amazon.com/developer/?nc1=f_dr" target="_blank" rel="noopener">Developer Center</a></li> 
        <li><a href="https://aws.amazon.com/developer/tools/?nc1=f_dr" target="_blank" rel="noopener">SDKs &amp; Tools</a></li> 
        <li><a href="https://aws.amazon.com/developer/language/net/?nc1=f_dr" target="_blank" rel="noopener">.NET on AWS</a></li> 
        <li><a href="https://aws.amazon.com/developer/language/python/?nc1=f_dr" target="_blank" rel="noopener">Python on AWS</a></li> 
        <li><a href="https://aws.amazon.com/developer/language/java/?nc1=f_dr" target="_blank" rel="noopener">Java on AWS</a></li> 
        <li><a href="https://aws.amazon.com/developer/language/php/?nc1=f_cc" target="_blank" rel="noopener">PHP on AWS</a></li> 
        <li><a href="https://aws.amazon.com/developer/language/javascript/?nc1=f_dr" target="_blank" rel="noopener">JavaScript on AWS</a></li> 
       </ul> 
      </div> 
      <div class="lb-xbcol"> 
       <h3 id="Help" class="lb-txt-none lb-txt-p-chromium lb-tiny-v-margin lb-h3 lb-title"> Help</h3> 
       <ul class="lb-txt-p-chromium lb-ul lb-list-style-none lb-li-micro-v-margin lb-tiny-ul-block" style="margin-bottom:0px;"> 
        <li><a href="https://aws.amazon.com/contact-us/?nc1=f_m" target="_blank" rel="noopener">Contact Us</a></li> 
        <li><a href="https://www.amazon.jobs/aws" target="_blank" rel="noopener">AWS Careers</a></li> 
        <li><a href="https://console.aws.amazon.com/support/home/?nc1=f_dr" target="_blank" rel="noopener">File a Support Ticket</a></li> 
        <li><a href="https://aws.amazon.com/premiumsupport/knowledge-center/?nc1=f_dr" target="_blank" rel="noopener">Knowledge Center</a></li> 
        <li><a href="https://aws.amazon.com/premiumsupport/?nc1=f_dr" target="_blank" rel="noopener">AWS Support Overview</a></li> 
        <li><a href="https://aws.amazon.com/legal/?nc1=f_cc" target="_blank" rel="noopener">Legal</a></li> 
       </ul> 
       <div class="lb-mbox js-mbox" data-lb-comp="mbox" data-lb-comp-ignore="true" data-mbox="en_footer-v3_addl-help"> 
       </div> 
      </div> 
      <div class="lb-xbcol"> 
       <div class="lb-mbox js-mbox" data-lb-comp="mbox" data-lb-comp-ignore="true" data-mbox="en_footer-v3_cta"> 
        <div class="data-attr-wrapper lb-tiny-hide lb-small-show lb-btn" data-da-type="so" data-da-so-type="viewport" data-da-so-language="en" data-da-so-category="monitoring" data-da-so-name="footer_buttons" data-da-so-url="all" data-da-so-version="footer_signup-default"> 
         <a class="lb-btn-p-primary" href="https://portal.aws.amazon.com/gp/aws/developer/registration/index.html?nc1=f_ct&amp;src=default" role="button"> <span> Create an AWS Account</span> </a> 
        </div> 
       </div> 
       <div class="lb-xb-grid-wrap" style="padding-left:0px; margin-top:20px;"> 
        <div class="lb-xb-grid lb-row-max-large lb-xb-equal-height lb-snap lb-gutter-collapse lb-vgutter-collapse lb-tiny-xb-auto"> 
         <div class="lb-xbcol"> 
          <a class="lb-txt-none lb-txt-p-chromium lb-none-pad lb-txt" style="padding-left:0px; padding-right:5px;" href="https://twitter.com/awscloud" target="_blank" rel="noopener" title="Twitter"> <i class="icon-twitter"></i></a> 
         </div> 
         <div class="lb-xbcol"> 
          <a class="lb-txt-none lb-txt-p-chromium lb-none-pad lb-none-v-margin lb-txt" style="padding-right:5px;" href="https://www.facebook.com/amazonwebservices" target="_blank" rel="noopener" title="Facebook"> <i class="icon-facebook"></i></a> 
         </div> 
         <div class="lb-xbcol"> 
          <a class="lb-txt-none lb-txt-p-chromium lb-none-pad lb-txt" style="padding-right:5px;" href="https://www.twitch.tv/aws" target="_blank" rel="noopener" title="Twitch"> <i class="icon-twitch"></i></a> 
         </div> 
         <div class="lb-xbcol"> 
          <a class="lb-txt-none lb-txt-p-chromium lb-none-pad lb-txt" style="padding-right:5px;" href="https://www.youtube.com/user/AmazonWebServices/Cloud/" target="_blank" rel="noopener" title="YouTube"> <i class="icon-youtube"></i></a> 
         </div> 
         <div class="lb-xbcol"> 
          <a class="lb-txt-none lb-txt-p-chromium lb-none-pad lb-txt" style="padding-right:5px;" href="https://aws.amazon.com/podcasts/" target="_blank" rel="noopener" title="Podcast"> <i class="icon-podcast"></i></a> 
         </div> 
         <div class="lb-xbcol"> 
          <a class="lb-txt-none lb-txt-p-chromium lb-none-pad lb-txt" style="padding-right:5px;" href="https://pages.awscloud.com/communication-preferences?trk=homepage" target="_blank" rel="noopener" title="Email"> <i class="icon-envelope-o"></i></a> 
         </div> 
        </div> 
       </div> 
       <div class="lb-txt-normal lb-txt-white lb-txt-14 lb-rtxt" style="color:#eaeded; margin-top:0px;"> 
        <div>
          Amazon is an Equal Opportunity Employer: 
         <i> Minority / Women / Disability / Veteran / Gender Identity / Sexual Orientation / Age.</i> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="lb-none-pad lb-none-v-margin lb-xb-grid-wrap" style="background-color:#242F3E;"> 
     <div class="lb-xb-grid lb-row-max-large lb-snap lb-tiny-xb-1"> 
      <div class="lb-xbcol"> 
       <ul class="lb-txt-p-chromium lb-tiny-iblock lb-none-v-margin lb-ul lb-list-style-none lb-li-micro-v-margin lb-tiny-ul-iblock"> 
        <li class="lb-txt-bold">Language</li> 
        <li data-language="ar"><a href="https://aws.amazon.com/ar/?nc1=h_ls">عربي</a></li> 
        <li data-language="id"><a href="https://aws.amazon.com/id/?nc1=h_ls">Bahasa Indonesia</a></li> 
        <li data-language="de"><a href="https://aws.amazon.com/de/?nc1=h_ls">Deutsch</a></li> 
        <li data-language="en"><a href="https://aws.amazon.com/?nc1=h_ls">English</a></li> 
        <li data-language="es"><a href="https://aws.amazon.com/es/?nc1=h_ls">Español</a></li> 
        <li data-language="fr"><a href="https://aws.amazon.com/fr/?nc1=h_ls">Français</a></li> 
        <li data-language="it"><a href="https://aws.amazon.com/it/?nc1=h_ls">Italiano</a></li> 
        <li data-language="pt"><a href="https://aws.amazon.com/pt/?nc1=h_ls">Português</a></li> 
        <li data-language="vi"><a href="https://aws.amazon.com/vi/?nc1=f_ls">Tiếng Việt</a></li> 
        <li data-language="tr"><a href="https://aws.amazon.com/tr/?nc1=h_ls">Türkçe</a></li> 
        <li data-language="ru"><a href="https://aws.amazon.com/ru/?nc1=h_ls">Ρусский</a></li> 
        <li data-language="th"><a href="https://aws.amazon.com/th/?nc1=f_ls">ไทย</a></li> 
        <li data-language="jp"><a href="https://aws.amazon.com/jp/?nc1=h_ls">日本語</a></li> 
        <li data-language="ko"><a href="https://aws.amazon.com/ko/?nc1=h_ls">한국어</a></li> 
        <li data-language="cn"><a href="https://aws.amazon.com/cn/?nc1=h_ls">中文 (简体)</a></li> 
        <li data-language="tw"><a href="https://aws.amazon.com/tw/?nc1=h_ls">中文 (繁體)</a></li> 
       </ul> 
      </div> 
     </div> 
    </div> 
    <div class="lb-none-pad lb-none-v-margin lb-xb-grid-wrap" style="background-color:#EAEDED; padding-top:5px;"> 
     <div class="lb-xb-grid lb-row-max-large lb-snap lb-tiny-xb-1"> 
      <div class="lb-xbcol"> 
       <ul class="lb-txt-p-squid-ink lb-none-v-margin lb-ul lb-list-style-none lb-li-none-v-margin lb-tiny-ul-iblock"> 
        <li><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a></li> 
        <li>|</li> 
        <li><a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a></li> 
        <li>|</li> 
        <li data-cookie-consent-modal="1"><a href="#"> Cookie Preferences </a></li> 
        <li>|</li> 
        <li>© 2021, Amazon Web Services, Inc. or its affiliates. All rights reserved.</li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </footer> 
  </div> 
  <script data-disqus-cookies-disabled-dialog type="text/html">
  <div class="lb-alert lb-alert-info">
    <h4 class="lb-title">Feature not available</h4>

    <p>Visit <a href="#" data-shortbread-modal="true">cookie preferences</a> and allow all cookies to enable this feature.</p>
  </div>
</script> 
  <div id="aws-page-end"></div> 
  <div id="lb-page-end"></div> 
  <script src="//a0.awsstatic.com/da/js/1.0.48/aws-da.js" async></script> 
  <script src="//a0.awsstatic.com/aws-blog/1.0.47/js/vendor/prism.js" data-default-language="markup"></script>  
 </body>
</html>