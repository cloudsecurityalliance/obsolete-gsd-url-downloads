<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#832908 - mongodb: CVE-2016-6494: world-readable .dbshell history file - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=832908&quot;&gt;832908&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:832908@bugs.debian.org">#832908</a><br>
mongodb: CVE-2016-6494: world-readable .dbshell history file</h1>
<div class="versiongraph"><a href="version.cgi?info=1;fixed=mongodb%2F1%3A2.6.12-3;fixed=2.0.6-1%2Bdeb7u1;fixed=mongodb%2F1%3A3.2.11-1;fixed=mongodb%2F1%3A2.4.10-5%2Bdeb8u1;package=mongodb-clients;collapse=1;found=mongodb%2F1%3A2.4.10-5;found=2.0.6-1;found=2.4.10-5;absolute=0"><img alt="version graph" src="version.cgi?width=2;height=2;fixed=mongodb%2F1%3A2.6.12-3;fixed=2.0.6-1%2Bdeb7u1;fixed=mongodb%2F1%3A3.2.11-1;fixed=mongodb%2F1%3A2.4.10-5%2Bdeb8u1;collapse=1;package=mongodb-clients;found=mongodb%2F1%3A2.4.10-5;found=2.0.6-1;found=2.4.10-5;absolute=0"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=mongodb-clients">mongodb-clients</a>;
Maintainer for <a href="pkgreport.cgi?package=mongodb-clients">mongodb-clients</a> is <a href="pkgreport.cgi?maint=pkg-mongodb-maintainers%40lists.alioth.debian.org">Debian MongoDB Maintainers &lt;pkg-mongodb-maintainers@lists.alioth.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=mongodb-clients">mongodb-clients</a> is <a href="pkgreport.cgi?src=mongodb">src:mongodb</a> (<a href="https://tracker.debian.org/pkg/mongodb">PTS</a>, <a href="https://buildd.debian.org/mongodb">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=mongodb">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=kpcyrd%40rxv.cc">kpcyrd &lt;kpcyrd@rxv.cc&gt;</a></p>
  <p>Date: Fri, 29 Jul 2016 14:39:06 UTC</p>

<p>Severity: <em class="severity">grave</em></p>
<p>Tags: security, upstream</p>

<p>Found in versions mongodb/1:2.4.10-5, 2.0.6-1, 2.4.10-5</p>
<p>Fixed in versions mongodb/1:2.6.12-3, 2.0.6-1+deb7u1, mongodb/1:3.2.11-1, mongodb/1:2.4.10-5+deb8u1</p>

<p><strong>Done:</strong> Apollon Oikonomopoulos &lt;apoikos@debian.org&gt;</p>

<p>Bug is archived. No further changes may be made.<p><p>Forwarded to <a href="https://jira.mongodb.org/browse/SERVER-25335">https://jira.mongodb.org/browse/SERVER-25335</a></p>
</div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=832908;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1469803150 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Fri, 29 Jul 2016 14:39:10 GMT) (<a href="bugreport.cgi?bug=832908;msg=2">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: kpcyrd &lt;kpcyrd@rxv.cc&gt; -->
<!-- time:1469803150 -->
<strong>Acknowledgement sent</strong>
to <code>kpcyrd &lt;kpcyrd@rxv.cc&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Fri, 29 Jul 2016 14:39:10 GMT) (<a href="bugreport.cgi?bug=832908;msg=4">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=5">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=5">mbox</a>, <a href="mailto:832908@bugs.debian.org?References=%3C20160729143720.GA1734%40localhost%3E&amp;subject=Re%3A%20world-readable%20.dbshell%20history%20file&amp;body=On%20Fri%2C%2029%20Jul%202016%2014%3A37%3A20%20%2B0000%20kpcyrd%20%3Ckpcyrd%40rxv.cc%3E%20wrote%3A%0A%3E%20Package%3A%20mongodb-clients%0A%3E%20Version%3A%202.4.10-5%0A%3E%20Severity%3A%20grave%0A%3E%20Tags%3A%20security%0A%3E%20%0A%3E%20During%20the%20report%20on%20redis-tools%0A%3E%20%28https%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D832460%29%2C%20lamby%40%0A%3E%20linked%20to%20a%20codesearch%20and%20the%20same%20bug%20was%20found%20in%20mongodb-clients.%0A%3E%20%0A%3E%20mongodb-clients%20stores%20its%20history%20in%20~%2F.dbshell%2C%20this%20file%20is%20created%0A%3E%20with%20permissions%200644.%20Home%20folders%20are%20world%20readable%20as%20well%20in%0A%3E%20debian%2C%20so%20any%20user%20can%20access%20other%20users%20mongodb%20history%2C%20even%20though%0A%3E%20db.auth%20commands%20don%27t%20appear%20to%20be%20logged%20like%20redis%20did.%0A%3E%20%0A%3E%20I%20filed%20a%20bug%20on%20upstream%20as%20well%3A%0A%3E%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%0A%3E%20%0A%3E%20Demo%3A%20%60cat%20%2Fhome%2F%2A%2F.dbshell%60%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20160729143720.GA1734%40localhost%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kpcyrd%40rxv.cc" alt="">
<div class="header"><span class="headerfield">From:</span> kpcyrd &lt;kpcyrd@rxv.cc&gt;</div>
<div class="header"><span class="headerfield">To:</span> submit@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> world-readable .dbshell history file</div>
<div class="header"><span class="headerfield">Date:</span> Fri, 29 Jul 2016 14:37:20 +0000</div>
</div>
<pre class="message">Package: mongodb-clients
Version: 2.4.10-5
Severity: grave
Tags: security

During the report on redis-tools
(<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=832460">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=832460</a>), lamby@
linked to a codesearch and the same bug was found in mongodb-clients.

mongodb-clients stores its history in ~/.dbshell, this file is created
with permissions 0644. Home folders are world readable as well in
debian, so any user can access other users mongodb history, even though
db.auth commands don&#39;t appear to be logged like redis did.

I filed a bug on upstream as well:
<a href="https://jira.mongodb.org/browse/SERVER-25335">https://jira.mongodb.org/browse/SERVER-25335</a>

Demo: `cat /home/*/.dbshell`



</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- command:tag -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1469813588 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security upstream&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<strong>Added tag(s) upstream.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 29 Jul 2016 17:33:08 GMT) (<a href="bugreport.cgi?bug=832908;msg=7">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="8"></a>
<!-- command:forwarded -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1469813589 -->
<!-- new_data:
$new_data = {
              &#39;forwarded&#39; =&gt; &#39;<a href="https://jira.mongodb.org/browse/SERVER-25335">https://jira.mongodb.org/browse/SERVER-25335</a>&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;forwarded&#39; =&gt; &#39;&#39;
            };
-->
<strong>Set Bug forwarded-to-address to &#39;<a href="https://jira.mongodb.org/browse/SERVER-25335">https://jira.mongodb.org/browse/SERVER-25335</a>&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 29 Jul 2016 17:33:09 GMT) (<a href="bugreport.cgi?bug=832908;msg=9">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="10"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1469813592 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;mongodb: CVE-2016-6494: world-readable .dbshell history file&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;world-readable .dbshell history file&#39;
            };
-->
<strong>Changed Bug title to &#39;mongodb: CVE-2016-6494: world-readable .dbshell history file&#39; from &#39;world-readable .dbshell history file&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 29 Jul 2016 17:33:12 GMT) (<a href="bugreport.cgi?bug=832908;msg=11">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=11">mbox</a>, <a href="#10">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="12"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1469854803 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Sat, 30 Jul 2016 05:00:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=13">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=13">mbox</a>, <a href="#12">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="14"></a>
<!-- request_addr: kpcyrd &lt;kpcyrd@rxv.cc&gt; -->
<!-- time:1469854804 -->
<strong>Acknowledgement sent</strong>
to <code>kpcyrd &lt;kpcyrd@rxv.cc&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Sat, 30 Jul 2016 05:00:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=15">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=15">mbox</a>, <a href="#14">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="16"></a><a name="msg16"></a><a href="#16">Message #16</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=16">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=16">mbox</a>, <a href="mailto:832908@bugs.debian.org?subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file&amp;In-Reply-To=%3C20160730045044.GB1734%40localhost%3E&amp;body=On%20Sat%2C%2030%20Jul%202016%2004%3A50%3A44%20%2B0000%20kpcyrd%20%3Ckpcyrd%40rxv.cc%3E%20wrote%3A%0A%3E%20So%2C%20upstream%20just%20closed%20the%20issue%20I%20created%20with%20%27Works%20as%20Designed%27%0A%3E%20blaming%20the%20default%20umask%20for%20the%20bug%20and%20that%20specifying%20file%0A%3E%20permissions%20for%20files%20created%20by%20mongodb%20is%20not%20something%20mongodb%20should%0A%3E%20do.%0A%3E%20%0A%3E%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%23comment-1342085%0A%3E%20%0A%3E%20The%20bug%20is%20locked%2C%20what%20do%20I%20do%20now%3F%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3C20160730045044.GB1734%40localhost%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kpcyrd%40rxv.cc" alt="">
<div class="header"><span class="headerfield">From:</span> kpcyrd &lt;kpcyrd@rxv.cc&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;, Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 30 Jul 2016 04:50:44 +0000</div>
</div>
<pre class="message">So, upstream just closed the issue I created with &#39;Works as Designed&#39;
blaming the default umask for the bug and that specifying file
permissions for files created by mongodb is not something mongodb should
do.

<a href="https://jira.mongodb.org/browse/SERVER-25335#comment-1342085">https://jira.mongodb.org/browse/SERVER-25335#comment-1342085</a>

The bug is locked, what do I do now?



</pre>

<div class="infmessage"><hr><p>
<a name="17"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1469858229 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Sat, 30 Jul 2016 05:57:09 GMT) (<a href="bugreport.cgi?bug=832908;msg=18">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=18">mbox</a>, <a href="#17">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="19"></a>
<!-- request_addr: László Böszörményi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1469858229 -->
<strong>Acknowledgement sent</strong>
to <code>László Böszörményi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Sat, 30 Jul 2016 05:57:09 GMT) (<a href="bugreport.cgi?bug=832908;msg=20">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=20">mbox</a>, <a href="#19">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="21"></a><a name="msg21"></a><a href="#21">Message #21</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=21">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=21">mbox</a>, <a href="mailto:832908@bugs.debian.org?In-Reply-To=%3CCAKjSHr3Kpm-4XT0HwEN%3DHPu2_r8wMpAR1s-Ya_o%2B6NiL_guOCQ%40mail.gmail.com%3E&amp;body=On%20Sat%2C%2030%20Jul%202016%2005%3A53%3A10%20%2B0000%20%3D%3FUTF-8%3FB%3FTMOhc3psw7MgQsO2c3rDtnJtw6lueWkgKEdDUyk%3D%3F%3D%20%3Cgcs%40debian.org%3E%20wrote%3A%0A%3E%20On%20Sat%2C%20Jul%2030%2C%202016%20at%204%3A50%20AM%2C%20kpcyrd%20%3Ckpcyrd%40rxv.cc%3E%20wrote%3A%0A%3E%20%3E%20So%2C%20upstream%20just%20closed%20the%20issue%20I%20created%20with%20%27Works%20as%20Designed%27%0A%3E%20%3E%20blaming%20the%20default%20umask%20for%20the%20bug%20and%20that%20specifying%20file%0A%3E%20%3E%20permissions%20for%20files%20created%20by%20mongodb%20is%20not%20something%20mongodb%20should%0A%3E%20%3E%20do.%0A%3E%20%3E%0A%3E%20%3E%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%23comment-1342085%0A%3E%20%3E%0A%3E%20%3E%20The%20bug%20is%20locked%2C%20what%20do%20I%20do%20now%3F%0A%3E%20%20You%20mean%20what%20to%20do%20with%20upstream%3F%20I%20guess%20nothing.%20Probably%20I%20can%0A%3E%20fix%20this%20myself.%0A%3E%20While%20this%20is%20a%20real%20issue%2C%20I%20somewhat%20agree%20with%20upstream.%20Being%20a%0A%3E%20system%20administrator%20for%20long%20time%2C%20I%20know%20as%20others%20should%20know%3A%0A%3E%20-%20don%27t%20run%20sensitive%20services%20on%20a%20machine%20which%20can%20be%20accessed%20by%0A%3E%20untrusted%20users%2C%0A%3E%20-%20even%20on%20your%20regular%20box%20set%20your%20%24HOME%20to%200700%20and%20your%20umask%20to%200077.%0A%3E%20In%20short%2C%20always%20expect%20the%20worst%20case%20and%20be%20prepared.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20Laszlo%2FGCS%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file&amp;References=%3C20160730045044.GB1734%40localhost%3E%0A%20%3CCAKjSHr3Kpm-4XT0HwEN%3DHPu2_r8wMpAR1s-Ya_o%2B6NiL_guOCQ%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=gcs%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> László Böszörményi (GCS) &lt;gcs@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> kpcyrd &lt;kpcyrd@rxv.cc&gt;, 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Salvatore Bonaccorso &lt;carnil@debian.org&gt;, Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 30 Jul 2016 05:53:10 +0000</div>
</div>
<pre class="message">On Sat, Jul 30, 2016 at 4:50 AM, kpcyrd &lt;kpcyrd@rxv.cc&gt; wrote:
&gt; So, upstream just closed the issue I created with &#39;Works as Designed&#39;
&gt; blaming the default umask for the bug and that specifying file
&gt; permissions for files created by mongodb is not something mongodb should
&gt; do.
&gt;
&gt; <a href="https://jira.mongodb.org/browse/SERVER-25335#comment-1342085">https://jira.mongodb.org/browse/SERVER-25335#comment-1342085</a>
&gt;
&gt; The bug is locked, what do I do now?
 You mean what to do with upstream? I guess nothing. Probably I can
fix this myself.
While this is a real issue, I somewhat agree with upstream. Being a
system administrator for long time, I know as others should know:
- don&#39;t run sensitive services on a machine which can be accessed by
untrusted users,
- even on your regular box set your $HOME to 0700 and your umask to 0077.
In short, always expect the worst case and be prepared.

Regards,
Laszlo/GCS


</pre>

<div class="infmessage"><hr><p>
<a name="22"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1469974508 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Sun, 31 Jul 2016 14:15:08 GMT) (<a href="bugreport.cgi?bug=832908;msg=23">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=23">mbox</a>, <a href="#22">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="24"></a>
<!-- request_addr: kpcyrd &lt;kpcyrd@rxv.cc&gt; -->
<!-- time:1469974508 -->
<strong>Acknowledgement sent</strong>
to <code>kpcyrd &lt;kpcyrd@rxv.cc&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Sun, 31 Jul 2016 14:15:08 GMT) (<a href="bugreport.cgi?bug=832908;msg=25">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=25">mbox</a>, <a href="#24">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="26"></a><a name="msg26"></a><a href="#26">Message #26</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=26">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=26">mbox</a>, <a href="mailto:832908@bugs.debian.org?body=On%20Sun%2C%2031%20Jul%202016%2014%3A11%3A26%20%2B0000%20kpcyrd%20%3Ckpcyrd%40rxv.cc%3E%20wrote%3A%0A%3E%20On%20Sat%2C%20Jul%2030%2C%202016%20at%2005%3A53%3A10AM%20%2B0000%2C%20L%C3%A1szl%C3%B3%20B%C3%B6sz%C3%B6rm%C3%A9nyi%20%28GCS%29%20wrote%3A%0A%3E%20%3E%20While%20this%20is%20a%20real%20issue%2C%20I%20somewhat%20agree%20with%20upstream.%20Being%20a%0A%3E%20%3E%20system%20administrator%20for%20long%20time%2C%20I%20know%20as%20others%20should%20know%3A%0A%3E%20%3E%20-%20don%27t%20run%20sensitive%20services%20on%20a%20machine%20which%20can%20be%20accessed%20by%0A%3E%20%3E%20untrusted%20users%2C%0A%3E%20%3E%20-%20even%20on%20your%20regular%20box%20set%20your%20%24HOME%20to%200700%20and%20your%20umask%20to%200077.%0A%3E%20%3E%20In%20short%2C%20always%20expect%20the%20worst%20case%20and%20be%20prepared.%0A%3E%20%0A%3E%20As%20a%20system%20administrator%2C%20I%20fully%20agree%20that%20systems%20should%20be%20setup%0A%3E%20this%20way.%20You%20might%20want%20to%20consider%20posting%20this%20here%5B1%5D%20and%20here%5B2%5D.%0A%3E%20%0A%3E%20%5B1%5D%3A%20https%3A%2F%2Fbugs.debian.org%2F398793%0A%3E%20%5B2%5D%3A%20https%3A%2F%2Fbugs.debian.org%2F782001%0A%3E%20%0A%3E%20As%20a%20software%20engineer%2C%20I%20have%20to%20disagree%20here.%20You%20shouldn%27t%20assume%0A%3E%20your%20software%20is%20running%20on%20locked-down%20environments%20only.%20If%20a%20file%0A%3E%20might%20contain%20sensitive%20data%2C%20the%20file%20permissions%20should%20be%20set%0A%3E%20accordingly%2C%20after%20all%2C%20they%20are%20setting%20file%20permissions%20correctly%20on%0A%3E%20%2Fvar%2Flib%2Fmongodb%20%28even%20though%20they%20aren%27t%20setting%20them%20on%0A%3E%20%2Fvar%2Flog%2Fmongodb%20either%29.%0A%3E%20%0A%3E%20There%20are%20multiple%20use%20cases%20that%20might%20cause%20people%20to%20configure%20o%2Bx%0A%3E%20permissions%20on%20home%20folders%20and%20it%27s%20also%20what%20default%20debian%20sets%20for%0A%3E%20home%20folders.%0A%3E%20%0A%3E%20I%20don%27t%20think%20blaming%20users%20that%20aren%27t%20unix%20wizards%20is%20the%20right%20way%20to%0A%3E%20deal%20with%20security%2C%20instead%20of%20having%20sane%20defaults%20towards%20security.%0A%3E%20The%20worst%20case%20should%20be%20the%20exception%20instead%20of%20the%20norm.%0A%3E%20%0A%3E%20If%20you%20run%20%60ls%20-la%20~%2F.%2A_history%60%20most%20developers%20seem%20to%20agree%20with%0A%3E%20this%2C%20given%20that%20permissions%20are%20set%20correctly%20regardless%20of%20the%20umask.%0A%3E%20%0A%3E%20%3E%20%3E%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%23comment-1342085%0A%3E%20%3E%20%3E%0A%3E%20%3E%20%3E%20The%20bug%20is%20locked%2C%20what%20do%20I%20do%20now%3F%0A%3E%20%3E%20%20You%20mean%20what%20to%20do%20with%20upstream%3F%20I%20guess%20nothing.%20Probably%20I%20can%0A%3E%20%3E%20fix%20this%20myself.%0A%3E%20%0A%3E%20Please%20go%20ahead.%0A%3E%20%0A%3E%20This%20would%20resolve%20CVE-2016-6494%20for%20the%20binary%20debian%20is%20distributing%2C%0A%3E%20but%20there%20are%20still%20various%20downstreams%20for%20mongodb%20on%20debian%20and%0A%3E%20MongoDB%20Inc%20themself%20that%20would%20ship%20without%20a%20patch.%0A%3E%20%0A%3E%20Thanks.%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C20160731141126.GD1734%40localhost%3E&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file&amp;References=%3C20160730045044.GB1734%40localhost%3E%0A%20%3CCAKjSHr3Kpm-4XT0HwEN%3DHPu2_r8wMpAR1s-Ya_o%2B6NiL_guOCQ%40mail.gmail.com%3E%0A%20%3C20160731141126.GD1734%40localhost%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=kpcyrd%40rxv.cc" alt="">
<div class="header"><span class="headerfield">From:</span> kpcyrd &lt;kpcyrd@rxv.cc&gt;</div>
<div class="header"><span class="headerfield">To:</span> László Böszörményi (GCS) &lt;gcs@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 832908@bugs.debian.org, Salvatore Bonaccorso &lt;carnil@debian.org&gt;,
	Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 31 Jul 2016 14:11:26 +0000</div>
</div>
<pre class="message">On Sat, Jul 30, 2016 at 05:53:10AM +0000, László Böszörményi (GCS) wrote:
&gt; While this is a real issue, I somewhat agree with upstream. Being a
&gt; system administrator for long time, I know as others should know:
&gt; - don&#39;t run sensitive services on a machine which can be accessed by
&gt; untrusted users,
&gt; - even on your regular box set your $HOME to 0700 and your umask to 0077.
&gt; In short, always expect the worst case and be prepared.

As a system administrator, I fully agree that systems should be setup
this way. You might want to consider posting this here[1] and here[2].

[1]: <a href="https://bugs.debian.org/398793">https://bugs.debian.org/398793</a>
[2]: <a href="https://bugs.debian.org/782001">https://bugs.debian.org/782001</a>

As a software engineer, I have to disagree here. You shouldn&#39;t assume
your software is running on locked-down environments only. If a file
might contain sensitive data, the file permissions should be set
accordingly, after all, they are setting file permissions correctly on
/var/lib/mongodb (even though they aren&#39;t setting them on
/var/log/mongodb either).

There are multiple use cases that might cause people to configure o+x
permissions on home folders and it&#39;s also what default debian sets for
home folders.

I don&#39;t think blaming users that aren&#39;t unix wizards is the right way to
deal with security, instead of having sane defaults towards security.
The worst case should be the exception instead of the norm.

If you run `ls -la ~/.*_history` most developers seem to agree with
this, given that permissions are set correctly regardless of the umask.

&gt; &gt; <a href="https://jira.mongodb.org/browse/SERVER-25335#comment-1342085">https://jira.mongodb.org/browse/SERVER-25335#comment-1342085</a>
&gt; &gt;
&gt; &gt; The bug is locked, what do I do now?
&gt;  You mean what to do with upstream? I guess nothing. Probably I can
&gt; fix this myself.

Please go ahead.

This would resolve <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a> for the binary debian is distributing,
but there are still various downstreams for mongodb on debian and
MongoDB Inc themself that would ship without a patch.

Thanks.



</pre>

<div class="infmessage"><hr><p>
<a name="27"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470004383 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Sun, 31 Jul 2016 22:33:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=28">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=28">mbox</a>, <a href="#27">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="29"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470004383 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Sun, 31 Jul 2016 22:33:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=30">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=30">mbox</a>, <a href="#29">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="31"></a><a name="msg31"></a><a href="#31">Message #31</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=31">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=31">mbox</a>, <a href="mailto:832908@bugs.debian.org?In-Reply-To=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E&amp;body=On%20Mon%2C%201%20Aug%202016%2000%3A31%3A51%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Hi%0A%3E%20%0A%3E%20I%27m%20member%20of%20the%20Long%20Term%20Security%20team%20in%20Debian%20and%20I%27m%20following%20this%0A%3E%20as%20I%20plan%20to%20backport%20the%20correction%20to%20wheezy.%0A%3E%20%0A%3E%20I%20have%20a%20few%20questions%3A%0A%3E%201%29%20When%20do%20you%20think%20you%20will%20have%20a%20correction%20available%20that%20I%20can%20have%20a%0A%3E%20look%20at%3F%0A%3E%202%29%20How%20do%20you%20plan%20to%20handle%20the%20%22upgrade%20case%22%20that%20is%20will%20you%20try%20to%0A%3E%20change%20the%20permission%20on%20already%20created%20history%20file%20or%20will%20you%20just%0A%3E%20handle%20the%20creation%20case%3F%0A%3E%203%29%20If%20you%20plan%20to%20handle%20the%20%22upgrade%20case%22%20will%20you%20just%20change%20it%20in%20case%0A%3E%20the%20file%20is%20world%20readable%3F%20I%20mean%20some%20may%20want%20this%20group%20readable%20for%0A%3E%20some%20reason.%0A%3E%204%29%20Or%20do%20you%20plan%20to%20just%20change%20the%20umask%20from%20the%20default%3F%0A%3E%205%29%20In%20case%20you%20just%20handle%20the%20creation%20case%20do%20you%20think%20it%20should%20be%0A%3E%20handled%20in%20upgrade%20in%20some%20way%2C%20or%20should%20we%20document%20this%20in%20the%20security%0A%3E%20advisory%3F%0A%3E%20%0A%3E%20Thanks%20in%20advance%0A%3E%20%0A%3E%20%2F%2F%20Ola%0A%3E%20%0A%3E%20%0A%3E%20--%20%0A%3E%20%20---%20Inguza%20Technology%20AB%20---%20MSc%20in%20Information%20Technology%20----%0A%3E%20%2F%20%20ola%40inguza.com%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Folkebogatan%2026%20%20%20%20%20%20%20%20%20%20%20%20%5C%0A%3E%20%7C%20%20opal%40debian.org%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20654%2068%20KARLSTAD%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%3E%20%7C%20%20http%3A%2F%2Finguza.com%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Mobile%3A%20%2B46%20%280%2970-332%201551%20%7C%0A%3E%20%5C%20%20gpg%2Ff.p.%3A%207090%20A92B%2018FE%207994%200C36%204FE4%2018A1%20B1CF%200FE5%203DD9%20%20%2F%0A%3E%20%20---------------------------------------------------------------%0A&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%20history%0A%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908@bugs.debian.org, Debian LTS &lt;debian-lts@lists.debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> kpcyrd@rxv.cc, gcs@debian.org, Salvatore Bonaccorso &lt;carnil@debian.org&gt;, 
	Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell history
 file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 1 Aug 2016 00:31:51 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=31">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi

I&#39;m member of the Long Term Security team in Debian and I&#39;m following this
as I plan to backport the correction to wheezy.

I have a few questions:
1) When do you think you will have a correction available that I can have a
look at?
2) How do you plan to handle the &quot;upgrade case&quot; that is will you try to
change the permission on already created history file or will you just
handle the creation case?
3) If you plan to handle the &quot;upgrade case&quot; will you just change it in case
the file is world readable? I mean some may want this group readable for
some reason.
4) Or do you plan to just change the umask from the default?
5) In case you just handle the creation case do you think it should be
handled in upgrade in some way, or should we document this in the security
advisory?

Thanks in advance

// Ola


-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=31">Message part 2</a> (text/html, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="32"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470023824 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Mon, 01 Aug 2016 03:57:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=33">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=33">mbox</a>, <a href="#32">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="34"></a>
<!-- request_addr: Chris Lamb &lt;lamby@debian.org&gt; -->
<!-- time:1470023824 -->
<strong>Acknowledgement sent</strong>
to <code>Chris Lamb &lt;lamby@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Mon, 01 Aug 2016 03:57:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=35">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=35">mbox</a>, <a href="#34">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="36"></a><a name="msg36"></a><a href="#36">Message #36</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=36">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=36">mbox</a>, <a href="mailto:832908@bugs.debian.org?subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%20history%0A%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;body=On%20Mon%2C%2001%20Aug%202016%2005%3A53%3A47%20%2B0200%20Chris%20Lamb%20%3Clamby%40debian.org%3E%20wrote%3A%0A%3E%20%3E%202%29%20How%20do%20you%20plan%20to%20handle%20the%20%22upgrade%20case%22%20that%20is%20will%20you%20try%20to%0A%3E%20%3E%20change%20the%20permission%20on%20already%20created%20history%20file%20or%20will%20you%20just%0A%3E%20%3E%20handle%20the%20creation%20case%3F%0A%3E%20%0A%3E%20For%20redis%2C%20what%20I%20did%20was%20set%20and%20then%20unset%20the%20umask%20%28for%20creation%29%20and%0A%3E%20chmod%282%29%20the%20file%20afterwards%20to%20%22upgrade%22%20existing%20ones.%0A%3E%20%0A%3E%20I%20don%27t%20recommend%20a%20postinst%20approach%20%28ie.%20chmod%200600%20%2Fhome%2F%2A%2F.filename%29%20for%0A%3E%20various%20reasons.%0A%3E%20%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20%0A%3E%20--%20%0A%3E%20%20%20%20%20%20%20%2C%27%27%60.%0A%3E%20%20%20%20%20%20%3A%20%3A%27%20%20%3A%20%20%20%20%20Chris%20Lamb%0A%3E%20%20%20%20%20%20%60.%20%60%27%60%20%20%20%20%20%20lamby%40debian.org%20%2F%20chris-lamb.co.uk%0A%3E%20%20%20%20%20%20%20%20%60-%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E&amp;References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=lamby%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Ola Lundqvist &lt;ola@inguza.com&gt;, 832908@bugs.debian.org,
 Debian LTS &lt;debian-lts@lists.debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> kpcyrd@rxv.cc, gcs@debian.org, Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell history
 file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 01 Aug 2016 05:53:47 +0200</div>
</div>
<pre class="message">&gt; 2) How do you plan to handle the &quot;upgrade case&quot; that is will you try to
&gt; change the permission on already created history file or will you just
&gt; handle the creation case?

For redis, what I did was set and then unset the umask (for creation) and
chmod(2) the file afterwards to &quot;upgrade&quot; existing ones.

I don&#39;t recommend a postinst approach (ie. chmod 0600 /home/*/.filename) for
various reasons.


Regards,

-- 
      ,&#39;&#39;`.
     : :&#39;  :     Chris Lamb
     `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
       `-


</pre>

<div class="infmessage"><hr><p>
<a name="37"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470089704 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Mon, 01 Aug 2016 22:15:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=38">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=38">mbox</a>, <a href="#37">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="39"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470089704 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Mon, 01 Aug 2016 22:15:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=40">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=40">mbox</a>, <a href="#39">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="41"></a><a name="msg41"></a><a href="#41">Message #41</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=41">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=41">mbox</a>, <a href="mailto:832908@bugs.debian.org?References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;body=On%20Tue%2C%202%20Aug%202016%2000%3A13%3A51%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Description%3A%20World%20readable%20dbshell%20log%20file%0A%3E%20%20This%20correction%20make%20sure%20the%20~%2F.dbshell%20log%20file%20is%20not%20world%20readable.%0A%3E%20%20.%0A%3E%20%20mongodb%20%281%3A2.0.6-1deb7u1%29%20wheezy-security%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Non-maintainer%20upload%20by%20the%20Long%20Term%20Security%20Team.%0A%3E%20%20%20%20%2A%20Make%20sure%20dbshell%20log%20file%20is%20not%20readable%20by%20others.%0A%3E%20Author%3A%20Ola%20Lundqvist%20%3Copal%40debian.org%3E%0A%3E%20Origin%3A%20other%0A%3E%20Bug%3A%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%0A%3E%20Bug-Debian%3A%20https%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D832908%0A%3E%20Forwarded%3A%20no%0A%3E%20Reviewed-By%3A%20Ola%20Lundqvist%20%3Copal%40debian.org%3E%0A%3E%20Last-Update%3A%202016-08-01%0A%3E%20%0A%3E%20Index%3A%20mongodb-2.0.6%2Fthird_party%2Flinenoise%2Flinenoise.cpp%0A%3E%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%3E%20---%20mongodb-2.0.6.orig%2Fthird_party%2Flinenoise%2Flinenoise.cpp%092012-06-04%2013%3A42%3A54.000000000%20%2B0000%0A%3E%20%2B%2B%2B%20mongodb-2.0.6%2Fthird_party%2Flinenoise%2Flinenoise.cpp%092016-08-01%2022%3A05%3A34.234826380%20%2B0000%0A%3E%20%40%40%20-104%2C11%20%2B104%2C13%20%40%40%0A%3E%20%20%0A%3E%20%20%23include%20%3Ctermios.h%3E%0A%3E%20%20%23include%20%3Cunistd.h%3E%0A%3E%20%2B%23include%20%3Cfcntl.h%3E%0A%3E%20%20%23include%20%3Cstdlib.h%3E%0A%3E%20%20%23include%20%3Cstdio.h%3E%0A%3E%20%20%23include%20%3Cerrno.h%3E%0A%3E%20%20%23include%20%3Cstring.h%3E%0A%3E%20%20%23include%20%3Cstdlib.h%3E%0A%3E%20%2B%23include%20%3Csys%2Fstat.h%3E%0A%3E%20%20%23include%20%3Csys%2Ftypes.h%3E%0A%3E%20%20%23include%20%3Csys%2Fioctl.h%3E%0A%3E%20%20%23include%20%3Cunistd.h%3E%0A%3E%20%40%40%20-799%2C6%20%2B801%2C9%20%40%40%0A%3E%20%20%2F%2A%20Save%20the%20history%20in%20the%20specified%20file.%20On%20success%200%20is%20returned%0A%3E%20%20%20%2A%20otherwise%20-1%20is%20returned.%20%2A%2F%0A%3E%20%20int%20linenoiseHistorySave%28const%20char%20%2Afilename%29%20%7B%0A%3E%20%2B%20%20%20%20mode_t%20prev_mask%20%3D%20umask%280022%29%3B%0A%3E%20%2B%20%20%20%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%2B%20%20%20%20umask%28prev_mask%20%7C%20S_IROTH%20%7C%20S_IWOTH%20%7C%20S_IXOTH%29%3B%0A%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22w%22%29%3B%0A%3E%20%20%20%20%20%20int%20j%3B%0A%3E%20%20%20%20%20%20%0A%3E%20%40%40%20-817%2C6%20%2B822%2C16%20%40%40%0A%3E%20%20%20%2A%20If%20the%20file%20exists%20and%20the%20operation%20succeeded%200%20is%20returned%2C%20otherwise%0A%3E%20%20%20%2A%20on%20error%20-1%20is%20returned.%20%2A%2F%0A%3E%20%20int%20linenoiseHistoryLoad%28const%20char%20%2Afilename%29%20%7B%0A%3E%20%2B%20%20%20%20struct%20stat%20fileStat%3B%0A%3E%20%2B%20%20%20%20if%20%28stat%28filename%2C%26fileStat%29%20%3C%200%29%20return%20-1%3B%0A%3E%20%2B%20%20%20%20if%20%28fileStat.st_mode%20%26%20S_IROTH%20%7C%7C%0A%3E%20%2B%09fileStat.st_mode%20%26%20S_IWOTH%20%7C%7C%0A%3E%20%2B%09fileStat.st_mode%20%26%20S_IXOTH%29%20%7B%0A%3E%20%2B%20%20%20%20%20%20%2F%2F%20If%20the%20file%20is%20world%20readable%2C%20writeable%20or%20executable%0A%3E%20%2B%20%20%20%20%20%20%2F%2F%20make%20sure%20it%20is%20not%20but%20keep%20all%20other%20permissions.%0A%3E%20%2B%20%20%20%20%20%20chmod%28filename%2C%20fileStat.st_mode%20%26%200777770%29%3B%0A%3E%20%2B%20%20%20%20%7D%0A%3E%20%2B%0A%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22r%22%29%3B%0A%3E%20%20%20%20%20%20char%20buf%5BLINENOISE_MAX_LINE%5D%3B%0A%3E%20%20%20%20%20%20%0A&amp;In-Reply-To=%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Ola Lundqvist &lt;ola@inguza.com&gt;, Debian LTS &lt;debian-lts@lists.debian.org&gt;, kpcyrd@rxv.cc, 
	gcs@debian.org, Salvatore Bonaccorso &lt;carnil@debian.org&gt;, Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 2 Aug 2016 00:13:51 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=41">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi all

I have prepared a preliminary patch for wheezy. I have not yet been able to
test it fully (it is building right now). It looks like attached. You may
need to modify it for later versions.

Please comment. The principles should be ok even if I may have made some
stupid copy+paste mistake. It worked fine in a little test program I made.

Hope this helps

// Ola

On Mon, Aug 1, 2016 at 5:53 AM, Chris Lamb &lt;lamby@debian.org&gt; wrote:

&gt; &gt; 2) How do you plan to handle the &quot;upgrade case&quot; that is will you try to
&gt; &gt; change the permission on already created history file or will you just
&gt; &gt; handle the creation case?
&gt;
&gt; For redis, what I did was set and then unset the umask (for creation) and
&gt; chmod(2) the file afterwards to &quot;upgrade&quot; existing ones.
&gt;
&gt; I don&#39;t recommend a postinst approach (ie. chmod 0600 /home/*/.filename)
&gt; for
&gt; various reasons.
&gt;
&gt;
&gt; Regards,
&gt;
&gt; --
&gt;       ,&#39;&#39;`.
&gt;      : :&#39;  :     Chris Lamb
&gt;      `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
&gt;        `-
&gt;



-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=41">Message part 2</a> (text/html, inline)]</pre>
<pre class="mime">[<a href="bugreport.cgi?att=2;bug=832908;filename=CVE-2016-6494.patch;msg=41">CVE-2016-6494.patch</a> (text/x-patch, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="42"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470089887 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Mon, 01 Aug 2016 22:18:07 GMT) (<a href="bugreport.cgi?bug=832908;msg=43">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=43">mbox</a>, <a href="#42">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="44"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470089887 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Mon, 01 Aug 2016 22:18:07 GMT) (<a href="bugreport.cgi?bug=832908;msg=45">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=45">mbox</a>, <a href="#44">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="46"></a><a name="msg46"></a><a href="#46">Message #46</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=46">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=46">mbox</a>, <a href="mailto:832908@bugs.debian.org?subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;In-Reply-To=%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E&amp;body=On%20Tue%2C%202%20Aug%202016%2000%3A15%3A29%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Hi%20again%0A%3E%20%0A%3E%20I%20just%20realize%20that%20we%20need%20to%20change%20back%20the%20umask%20after%20the%20file%20is%0A%3E%20created.%20I%27ll%20update%20the%20patch%20tomorrow%20and%20send%20one%20that%20I%20know%20works.%0A%3E%20%0A%3E%20%2F%2F%20Ola%0A%3E%20%0A%3E%20On%20Tue%2C%20Aug%202%2C%202016%20at%2012%3A13%20AM%2C%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20%0A%3E%20%3E%20Hi%20all%0A%3E%20%3E%0A%3E%20%3E%20I%20have%20prepared%20a%20preliminary%20patch%20for%20wheezy.%20I%20have%20not%20yet%20been%20able%0A%3E%20%3E%20to%20test%20it%20fully%20%28it%20is%20building%20right%20now%29.%20It%20looks%20like%20attached.%20You%0A%3E%20%3E%20may%20need%20to%20modify%20it%20for%20later%20versions.%0A%3E%20%3E%0A%3E%20%3E%20Please%20comment.%20The%20principles%20should%20be%20ok%20even%20if%20I%20may%20have%20made%20some%0A%3E%20%3E%20stupid%20copy%2Bpaste%20mistake.%20It%20worked%20fine%20in%20a%20little%20test%20program%20I%20made.%0A%3E%20%3E%0A%3E%20%3E%20Hope%20this%20helps%0A%3E%20%3E%0A%3E%20%3E%20%2F%2F%20Ola%0A%3E%20%3E%0A%3E%20%3E%20On%20Mon%2C%20Aug%201%2C%202016%20at%205%3A53%20AM%2C%20Chris%20Lamb%20%3Clamby%40debian.org%3E%20wrote%3A%0A%3E%20%3E%0A%3E%20%3E%3E%20%3E%202%29%20How%20do%20you%20plan%20to%20handle%20the%20%22upgrade%20case%22%20that%20is%20will%20you%20try%20to%0A%3E%20%3E%3E%20%3E%20change%20the%20permission%20on%20already%20created%20history%20file%20or%20will%20you%20just%0A%3E%20%3E%3E%20%3E%20handle%20the%20creation%20case%3F%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20For%20redis%2C%20what%20I%20did%20was%20set%20and%20then%20unset%20the%20umask%20%28for%20creation%29%20and%0A%3E%20%3E%3E%20chmod%282%29%20the%20file%20afterwards%20to%20%22upgrade%22%20existing%20ones.%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20I%20don%27t%20recommend%20a%20postinst%20approach%20%28ie.%20chmod%200600%20%2Fhome%2F%2A%2F.filename%29%0A%3E%20%3E%3E%20for%0A%3E%20%3E%3E%20various%20reasons.%0A%3E%20%3E%3E%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20Regards%2C%0A%3E%20%3E%3E%0A%3E%20%3E%3E%20--%0A%3E%20%3E%3E%20%20%20%20%20%20%20%2C%27%27%60.%0A%3E%20%3E%3E%20%20%20%20%20%20%3A%20%3A%27%20%20%3A%20%20%20%20%20Chris%20Lamb%0A%3E%20%3E%3E%20%20%20%20%20%20%60.%20%60%27%60%20%20%20%20%20%20lamby%40debian.org%20%2F%20chris-lamb.co.uk%0A%3E%20%3E%3E%20%20%20%20%20%20%20%20%60-%0A%3E%20%3E%3E%0A%3E%20%3E%0A%3E%20%3E%0A%3E%20%3E%0A%3E%20%3E%20--%0A%3E%20%3E%20%20---%20Inguza%20Technology%20AB%20---%20MSc%20in%20Information%20Technology%20----%0A%3E%20%3E%20%2F%20%20ola%40inguza.com%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Folkebogatan%2026%20%20%20%20%20%20%20%20%20%20%20%20%5C%0A%3E%20%3E%20%7C%20%20opal%40debian.org%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20654%2068%20KARLSTAD%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%3E%20%3E%20%7C%20%20http%3A%2F%2Finguza.com%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Mobile%3A%20%2B46%20%280%2970-332%201551%20%7C%0A%3E%20%3E%20%5C%20%20gpg%2Ff.p.%3A%207090%20A92B%2018FE%207994%200C36%204FE4%2018A1%20B1CF%200FE5%203DD9%20%20%2F%0A%3E%20%3E%20%20---------------------------------------------------------------%0A%3E%20%3E%0A%3E%20%3E%0A%3E%20%0A%3E%20%0A%3E%20--%20%0A%3E%20%20---%20Inguza%20Technology%20AB%20---%20MSc%20in%20Information%20Technology%20----%0A&amp;References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 832908@bugs.debian.org, Debian LTS &lt;debian-lts@lists.debian.org&gt;, kpcyrd@rxv.cc, 
	László Böszörményi &lt;gcs@debian.org&gt;, 
	Salvatore Bonaccorso &lt;carnil@debian.org&gt;, Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 2 Aug 2016 00:15:29 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=46">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi again

I just realize that we need to change back the umask after the file is
created. I&#39;ll update the patch tomorrow and send one that I know works.

// Ola

On Tue, Aug 2, 2016 at 12:13 AM, Ola Lundqvist &lt;ola@inguza.com&gt; wrote:

&gt; Hi all
&gt;
&gt; I have prepared a preliminary patch for wheezy. I have not yet been able
&gt; to test it fully (it is building right now). It looks like attached. You
&gt; may need to modify it for later versions.
&gt;
&gt; Please comment. The principles should be ok even if I may have made some
&gt; stupid copy+paste mistake. It worked fine in a little test program I made.
&gt;
&gt; Hope this helps
&gt;
&gt; // Ola
&gt;
&gt; On Mon, Aug 1, 2016 at 5:53 AM, Chris Lamb &lt;lamby@debian.org&gt; wrote:
&gt;
&gt;&gt; &gt; 2) How do you plan to handle the &quot;upgrade case&quot; that is will you try to
&gt;&gt; &gt; change the permission on already created history file or will you just
&gt;&gt; &gt; handle the creation case?
&gt;&gt;
&gt;&gt; For redis, what I did was set and then unset the umask (for creation) and
&gt;&gt; chmod(2) the file afterwards to &quot;upgrade&quot; existing ones.
&gt;&gt;
&gt;&gt; I don&#39;t recommend a postinst approach (ie. chmod 0600 /home/*/.filename)
&gt;&gt; for
&gt;&gt; various reasons.
&gt;&gt;
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt;
&gt;&gt; --
&gt;&gt;       ,&#39;&#39;`.
&gt;&gt;      : :&#39;  :     Chris Lamb
&gt;&gt;      `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
&gt;&gt;        `-
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt;  --- Inguza Technology AB --- MSc in Information Technology ----
&gt; /  ola@inguza.com                    Folkebogatan 26            \
&gt; |  opal@debian.org                   654 68 KARLSTAD            |
&gt; |  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
&gt; \  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
&gt;  ---------------------------------------------------------------
&gt;
&gt;


-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=46">Message part 2</a> (text/html, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="47"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470119223 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Tue, 02 Aug 2016 06:27:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=48">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=48">mbox</a>, <a href="#47">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="49"></a>
<!-- request_addr: Sébastien Delafond &lt;seb@debian.org&gt; -->
<!-- time:1470119223 -->
<strong>Acknowledgement sent</strong>
to <code>Sébastien Delafond &lt;seb@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Tue, 02 Aug 2016 06:27:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=50">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=50">mbox</a>, <a href="#49">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="51"></a><a name="msg51"></a><a href="#51">Message #51</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=51">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=51">mbox</a>, <a href="mailto:832908@bugs.debian.org?In-Reply-To=%3C20160802062325.GJ27262%40hz1%3E&amp;body=On%20Tue%2C%202%20Aug%202016%2008%3A23%3A26%20%2B0200%20%3D%3Futf-8%3FQ%3FS%3DC3%3DA9bastien%3F%3D%20Delafond%20%3Cseb%40debian.org%3E%20wrote%3A%0A%3E%20FWIW%2C%20the%20vendor%20has%20closed%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%0A%3E%20with%20%22Works%20as%20Designed%22.%0A%3E%20%0A%3E%20If%20someone%20wants%20to%20follow%20up%20on%20explaining%20to%20mongodb%20upstream%20why%0A%3E%20umask%20shouldn%27t%20prevent%20them%20from%20applying%20proper%20permissions%20where%0A%3E%20needed%2C%20they%27re%20welcome%20to%20do%20so.%20ssh-keygen%281%29%20would%20be%20a%20good%20example%0A%3E%20to%20point%20to.%0A%3E%20%0A%3E%20Cheers%2C%0A%3E%20%0A%3E%20--Seb%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A&amp;References=%3C20160802062325.GJ27262%40hz1%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=seb%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Sébastien Delafond &lt;seb@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 2 Aug 2016 08:23:26 +0200</div>
</div>
<pre class="message">FWIW, the vendor has closed <a href="https://jira.mongodb.org/browse/SERVER-25335">https://jira.mongodb.org/browse/SERVER-25335</a>
with &quot;Works as Designed&quot;.

If someone wants to follow up on explaining to mongodb upstream why
umask shouldn&#39;t prevent them from applying proper permissions where
needed, they&#39;re welcome to do so. ssh-keygen(1) would be a good example
to point to.

Cheers,

--Seb


</pre>

<div class="infmessage"><hr><p>
<a name="52"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470139023 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Tue, 02 Aug 2016 11:57:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=53">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=53">mbox</a>, <a href="#52">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="54"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470139023 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Tue, 02 Aug 2016 11:57:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=55">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=55">mbox</a>, <a href="#54">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="56"></a><a name="msg56"></a><a href="#56">Message #56</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=56">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=56">mbox</a>, <a href="mailto:832908@bugs.debian.org?References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E%20%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kF3ZP11r_ipMUteXHzVAOXWJcF40Pi_LUdAAkm2nuJ8g%40mail.gmail.com%3E&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;In-Reply-To=%3CCABY6%3D0kF3ZP11r_ipMUteXHzVAOXWJcF40Pi_LUdAAkm2nuJ8g%40mail.gmail.com%3E&amp;body=On%20Tue%2C%202%20Aug%202016%2013%3A53%3A53%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Description%3A%20World%20readable%20dbshell%20log%20file%0A%3E%20%20This%20correction%20make%20sure%20the%20~%2F.dbshell%20log%20file%20is%20not%20world%20readable.%0A%3E%20%20.%0A%3E%20%20mongodb%20%281%3A2.0.6-1%2Bdeb7u1%29%20wheezy-security%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Non-maintainer%20upload%20by%20the%20Long%20Term%20Security%20Team.%0A%3E%20%20%20%20%2A%20Make%20sure%20dbshell%20log%20file%20is%20not%20readable%20by%20others%0A%3E%20%20%20%20%20%20CVE-2016-6494%20%28Closes%3A%20%23832908%29.%0A%3E%20Author%3A%20Ola%20Lundqvist%20%3Copal%40debian.org%3E%0A%3E%20Origin%3A%20other%0A%3E%20Bug%3A%20https%3A%2F%2Fjira.mongodb.org%2Fbrowse%2FSERVER-25335%0A%3E%20Bug-Debian%3A%20https%3A%2F%2Fbugs.debian.org%2F832908%0A%3E%20Forwarded%3A%20no%0A%3E%20Reviewed-By%3A%20Ola%20Lundqvist%20%3Copal%40debian.org%3E%0A%3E%20Last-Update%3A%202016-08-01%0A%3E%20%0A%3E%20Index%3A%20mongodb-2.0.6%2Fthird_party%2Flinenoise%2Flinenoise.cpp%0A%3E%20%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%3E%20---%20mongodb-2.0.6.orig%2Fthird_party%2Flinenoise%2Flinenoise.cpp%092016-08-01%2022%3A10%3A07.318825853%20%2B0000%0A%3E%20%2B%2B%2B%20mongodb-2.0.6%2Fthird_party%2Flinenoise%2Flinenoise.cpp%092016-08-01%2022%3A19%3A52.706824724%20%2B0000%0A%3E%20%40%40%20-104%2C11%20%2B104%2C13%20%40%40%0A%3E%20%20%0A%3E%20%20%23include%20%3Ctermios.h%3E%0A%3E%20%20%23include%20%3Cunistd.h%3E%0A%3E%20%2B%23include%20%3Cfcntl.h%3E%0A%3E%20%20%23include%20%3Cstdlib.h%3E%0A%3E%20%20%23include%20%3Cstdio.h%3E%0A%3E%20%20%23include%20%3Cerrno.h%3E%0A%3E%20%20%23include%20%3Cstring.h%3E%0A%3E%20%20%23include%20%3Cstdlib.h%3E%0A%3E%20%2B%23include%20%3Csys%2Fstat.h%3E%0A%3E%20%20%23include%20%3Csys%2Ftypes.h%3E%0A%3E%20%20%23include%20%3Csys%2Fioctl.h%3E%0A%3E%20%20%23include%20%3Cunistd.h%3E%0A%3E%20%40%40%20-799%2C6%20%2B801%2C9%20%40%40%0A%3E%20%20%2F%2A%20Save%20the%20history%20in%20the%20specified%20file.%20On%20success%200%20is%20returned%0A%3E%20%20%20%2A%20otherwise%20-1%20is%20returned.%20%2A%2F%0A%3E%20%20int%20linenoiseHistorySave%28const%20char%20%2Afilename%29%20%7B%0A%3E%20%2B%20%20%20%20mode_t%20prev_mask%20%3D%20umask%280022%29%3B%0A%3E%20%2B%20%20%20%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%2B%20%20%20%20umask%28prev_mask%20%7C%20S_IROTH%20%7C%20S_IWOTH%20%7C%20S_IXOTH%29%3B%0A%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22w%22%29%3B%0A%3E%20%20%20%20%20%20int%20j%3B%0A%3E%20%20%20%20%20%20%0A%3E%20%40%40%20-808%2C6%20%2B813%2C7%20%40%40%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20fprintf%28fp%2C%22%25s%5Cn%22%2Chistory%5Bj%5D%29%3B%0A%3E%20%20%20%20%20%20%7D%0A%3E%20%20%20%20%20%20fclose%28fp%29%3B%0A%3E%20%2B%20%20%20%20umask%28prev_mask%29%3B%0A%3E%20%20%20%20%20%20return%200%3B%0A%3E%20%20%7D%0A%3E%20%20%0A%3E%20%40%40%20-817%2C6%20%2B823%2C16%20%40%40%0A%3E%20%20%20%2A%20If%20the%20file%20exists%20and%20the%20operation%20succeeded%200%20is%20returned%2C%20otherwise%0A%3E%20%20%20%2A%20on%20error%20-1%20is%20returned.%20%2A%2F%0A%3E%20%20int%20linenoiseHistoryLoad%28const%20char%20%2Afilename%29%20%7B%0A%3E%20%2B%20%20%20%20struct%20stat%20fileStat%3B%0A%3E%20%2B%20%20%20%20if%20%28stat%28filename%2C%26fileStat%29%20%3C%200%29%20return%20-1%3B%0A%3E%20%2B%20%20%20%20if%20%28fileStat.st_mode%20%26%20S_IROTH%20%7C%7C%0A%3E%20%2B%09fileStat.st_mode%20%26%20S_IWOTH%20%7C%7C%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Debian LTS &lt;debian-lts@lists.debian.org&gt;, kpcyrd@rxv.cc, 
	László Böszörményi &lt;gcs@debian.org&gt;, 
	Salvatore Bonaccorso &lt;carnil@debian.org&gt;, Chris Lamb &lt;lamby@debian.org&gt;, Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 2 Aug 2016 13:53:53 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=56">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi again

Here is the working patch (attached).

Hope it helps for later versions too.

// Ola

On Tue, Aug 2, 2016 at 12:15 AM, Ola Lundqvist &lt;ola@inguza.com&gt; wrote:

&gt; Hi again
&gt;
&gt; I just realize that we need to change back the umask after the file is
&gt; created. I&#39;ll update the patch tomorrow and send one that I know works.
&gt;
&gt; // Ola
&gt;
&gt; On Tue, Aug 2, 2016 at 12:13 AM, Ola Lundqvist &lt;ola@inguza.com&gt; wrote:
&gt;
&gt;&gt; Hi all
&gt;&gt;
&gt;&gt; I have prepared a preliminary patch for wheezy. I have not yet been able
&gt;&gt; to test it fully (it is building right now). It looks like attached. You
&gt;&gt; may need to modify it for later versions.
&gt;&gt;
&gt;&gt; Please comment. The principles should be ok even if I may have made some
&gt;&gt; stupid copy+paste mistake. It worked fine in a little test program I made.
&gt;&gt;
&gt;&gt; Hope this helps
&gt;&gt;
&gt;&gt; // Ola
&gt;&gt;
&gt;&gt; On Mon, Aug 1, 2016 at 5:53 AM, Chris Lamb &lt;lamby@debian.org&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; &gt; 2) How do you plan to handle the &quot;upgrade case&quot; that is will you try to
&gt;&gt;&gt; &gt; change the permission on already created history file or will you just
&gt;&gt;&gt; &gt; handle the creation case?
&gt;&gt;&gt;
&gt;&gt;&gt; For redis, what I did was set and then unset the umask (for creation) and
&gt;&gt;&gt; chmod(2) the file afterwards to &quot;upgrade&quot; existing ones.
&gt;&gt;&gt;
&gt;&gt;&gt; I don&#39;t recommend a postinst approach (ie. chmod 0600 /home/*/.filename)
&gt;&gt;&gt; for
&gt;&gt;&gt; various reasons.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt;       ,&#39;&#39;`.
&gt;&gt;&gt;      : :&#39;  :     Chris Lamb
&gt;&gt;&gt;      `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
&gt;&gt;&gt;        `-
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt;  --- Inguza Technology AB --- MSc in Information Technology ----
&gt;&gt; /  ola@inguza.com                    Folkebogatan 26            \
&gt;&gt; |  opal@debian.org                   654 68 KARLSTAD            |
&gt;&gt; |  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
&gt;&gt; \  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
&gt;&gt;  ---------------------------------------------------------------
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt;  --- Inguza Technology AB --- MSc in Information Technology ----
&gt; /  ola@inguza.com                    Folkebogatan 26            \
&gt; |  opal@debian.org                   654 68 KARLSTAD            |
&gt; |  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
&gt; \  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
&gt;  ---------------------------------------------------------------
&gt;
&gt;


-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=56">Message part 2</a> (text/html, inline)]</pre>
<pre class="mime">[<a href="bugreport.cgi?att=2;bug=832908;filename=CVE-2016-6494.patch;msg=56">CVE-2016-6494.patch</a> (text/x-patch, attachment)]</pre>

<div class="infmessage"><hr><p>
<a name="57"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470158283 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Tue, 02 Aug 2016 17:18:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=58">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=58">mbox</a>, <a href="#57">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="59"></a>
<!-- request_addr: Chris Lamb &lt;lamby@debian.org&gt; -->
<!-- time:1470158283 -->
<strong>Acknowledgement sent</strong>
to <code>Chris Lamb &lt;lamby@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Tue, 02 Aug 2016 17:18:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=60">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=60">mbox</a>, <a href="#59">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="61"></a><a name="msg61"></a><a href="#61">Message #61</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=61">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=61">mbox</a>, <a href="mailto:832908@bugs.debian.org?body=On%20Tue%2C%2002%20Aug%202016%2019%3A14%3A48%20%2B0200%20Chris%20Lamb%20%3Clamby%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20Here%20is%20the%20working%20patch%20%28attached%29.%0A%3E%20%0A%3E%20Out%20of%20interest%2C%20why%3A%0A%3E%20%0A%3E%20%2B%20%20%20%20mode_t%20prev_mask%20%3D%20umask%280022%29%3B%0A%3E%20%2B%20%20%20%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%2B%20%20%20%20umask%28prev_mask%20%7C%20S_IROTH%20%7C%20S_IWOTH%20%7C%20S_IXOTH%29%3B%0A%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22w%22%29%3B%0A%3E%20%0A%3E%20..%20over%2C%20say%3A%0A%3E%20%0A%3E%20%2B%20%20%20%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%2B%20%20%20%20mode_t%20prev_mask%20%3D%20umask%28S_IXUSR%7CS_IRWXG%7CS_IRWXO%29%3B%0A%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22w%22%29%3B%0A%3E%20%2B%20%20%20%20umask%28prev_mask%29%3B%0A%3E%20%0A%3E%20We%20don%27t%20really%20want%20to%20change%20the%20umask%20for%20the%20entire%20process.%0A%3E%20Or%20at%20least%2C%20we%20don%27t%20know%20the%20ramifications%20of%20that%20so%20better%20to%0A%3E%20keep%20it%20isolated%20to%20just%20this%20bit%3F%0A%3E%20%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20%0A%3E%20--%20%0A%3E%20%20%20%20%20%20%20%2C%27%27%60.%0A%3E%20%20%20%20%20%20%3A%20%3A%27%20%20%3A%20%20%20%20%20Chris%20Lamb%0A%3E%20%20%20%20%20%20%60.%20%60%27%60%20%20%20%20%20%20lamby%40debian.org%20%2F%20chris-lamb.co.uk%0A%3E%20%20%20%20%20%20%20%20%60-%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C1470158088.2374063.683937161.2562FD51%40webmail.messagingengine.com%3E&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%20history%0A%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kF3ZP11r_ipMUteXHzVAOXWJcF40Pi_LUdAAkm2nuJ8g%40mail.gmail.com%3E%0A%20%3C1470158088.2374063.683937161.2562FD51%40webmail.messagingengine.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=lamby%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Ola Lundqvist &lt;ola@inguza.com&gt;, 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> Debian LTS &lt;debian-lts@lists.debian.org&gt;, kpcyrd@rxv.cc,
 László Böszörményi &lt;gcs@debian.org&gt;,
 Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell history
 file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 02 Aug 2016 19:14:48 +0200</div>
</div>
<pre class="message">&gt; Here is the working patch (attached).

Out of interest, why:

+    mode_t prev_mask = umask(0022);
+    // Make sure this file is not readable by others
+    umask(prev_mask | S_IROTH | S_IWOTH | S_IXOTH);
     FILE *fp = fopen(filename,&quot;w&quot;);

.. over, say:

+    // Make sure this file is not readable by others
+    mode_t prev_mask = umask(S_IXUSR|S_IRWXG|S_IRWXO);
     FILE *fp = fopen(filename,&quot;w&quot;);
+    umask(prev_mask);

We don&#39;t really want to change the umask for the entire process.
Or at least, we don&#39;t know the ramifications of that so better to
keep it isolated to just this bit?


Regards,

-- 
      ,&#39;&#39;`.
     : :&#39;  :     Chris Lamb
     `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
       `-


</pre>

<div class="infmessage"><hr><p>
<a name="62"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470175204 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Tue, 02 Aug 2016 22:00:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=63">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=63">mbox</a>, <a href="#62">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="64"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470175204 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Tue, 02 Aug 2016 22:00:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=65">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=65">mbox</a>, <a href="#64">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="66"></a><a name="msg66"></a><a href="#66">Message #66</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=66">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=66">mbox</a>, <a href="mailto:832908@bugs.debian.org?subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;In-Reply-To=%3CCABY6%3D0kW9uENqRppjmW09DprdZDsyWpwrxB1M7EkW%3DNhtszQAg%40mail.gmail.com%3E&amp;body=On%20Tue%2C%202%20Aug%202016%2023%3A57%3A27%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Hi%20Chris%0A%3E%20%0A%3E%20The%20reason%20I%20do%20not%20simply%20set%20the%20umask%20to%20a%20fixed%20value%20is%20to%20use%20the%0A%3E%20same%20principle%20as%20upstream.%20That%20is%20honor%20the%20umask%20set%20bu%20the%20user.%20There%0A%3E%20may%20be%20reasons%20why%20group%20read%20and%2For%20write%20should%20be%20set%20for%20example.%0A%3E%20%0A%3E%20I%20agree%20with%20upstream%20that%20the%20umask%20should%20be%20honored%2C%20but%20not%20as%20strictly%0A%3E%20as%20upstream%20do.%20This%20is%20why%20I%20just%20override%20the%20%22world%20readable%22%20part%20and%0A%3E%20let%20the%20rest%20be%20controlled%20by%20the%20user.%0A%3E%20%0A%3E%20In%20the%20working%20patch%20you%20can%20see%20that%20I%20also%20set%20back%20the%20umask%20%28just%20a%0A%3E%20little%20further%20down%20in%20the%20file%29%20as%20it%20was%20to%20just%20change%20this%20specific%0A%3E%20case%20of%20logging.%0A%3E%20%0A%3E%20More%20clear%20now%3F%0A%3E%20%0A%3E%20Best%20regards%0A%3E%20%0A%3E%20%2F%2F%20Ola%0A%3E%20%0A%3E%20On%20Tue%2C%20Aug%202%2C%202016%20at%207%3A14%20PM%2C%20Chris%20Lamb%20%3Clamby%40debian.org%3E%20wrote%3A%0A%3E%20%0A%3E%20%3E%20%3E%20Here%20is%20the%20working%20patch%20%28attached%29.%0A%3E%20%3E%0A%3E%20%3E%20Out%20of%20interest%2C%20why%3A%0A%3E%20%3E%0A%3E%20%3E%20%2B%20%20%20%20mode_t%20prev_mask%20%3D%20umask%280022%29%3B%0A%3E%20%3E%20%2B%20%20%20%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%3E%20%2B%20%20%20%20umask%28prev_mask%20%7C%20S_IROTH%20%7C%20S_IWOTH%20%7C%20S_IXOTH%29%3B%0A%3E%20%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22w%22%29%3B%0A%3E%20%3E%0A%3E%20%3E%20..%20over%2C%20say%3A%0A%3E%20%3E%0A%3E%20%3E%20%2B%20%20%20%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%3E%20%2B%20%20%20%20mode_t%20prev_mask%20%3D%20umask%28S_IXUSR%7CS_IRWXG%7CS_IRWXO%29%3B%0A%3E%20%3E%20%20%20%20%20%20FILE%20%2Afp%20%3D%20fopen%28filename%2C%22w%22%29%3B%0A%3E%20%3E%20%2B%20%20%20%20umask%28prev_mask%29%3B%0A%3E%20%3E%0A%3E%20%3E%20We%20don%27t%20really%20want%20to%20change%20the%20umask%20for%20the%20entire%20process.%0A%3E%20%3E%20Or%20at%20least%2C%20we%20don%27t%20know%20the%20ramifications%20of%20that%20so%20better%20to%0A%3E%20%3E%20keep%20it%20isolated%20to%20just%20this%20bit%3F%0A%3E%20%3E%0A%3E%20%3E%0A%3E%20%3E%20Regards%2C%0A%3E%20%3E%0A%3E%20%3E%20--%0A%3E%20%3E%20%20%20%20%20%20%20%2C%27%27%60.%0A%3E%20%3E%20%20%20%20%20%20%3A%20%3A%27%20%20%3A%20%20%20%20%20Chris%20Lamb%0A%3E%20%3E%20%20%20%20%20%20%60.%20%60%27%60%20%20%20%20%20%20lamby%40debian.org%20%2F%20chris-lamb.co.uk%0A%3E%20%3E%20%20%20%20%20%20%20%20%60-%0A%3E%20%3E%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20--%20%0A%3E%20%20---%20Inguza%20Technology%20AB%20---%20MSc%20in%20Information%20Technology%20----%0A%3E%20%2F%20%20ola%40inguza.com%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Folkebogatan%2026%20%20%20%20%20%20%20%20%20%20%20%20%5C%0A%3E%20%7C%20%20opal%40debian.org%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20654%2068%20KARLSTAD%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%3E%20%7C%20%20http%3A%2F%2Finguza.com%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Mobile%3A%20%2B46%20%280%2970-332%201551%20%7C%0A%3E%20%5C%20%20gpg%2Ff.p.%3A%207090%20A92B%2018FE%207994%200C36%204FE4%2018A1%20B1CF%200FE5%203DD9%20%20%2F%0A&amp;References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kF3ZP11r_ipMUteXHzVAOXWJcF40Pi_LUdAAkm2nuJ8g%40mail.gmail.com%3E%20%3C1470158088.2374063.683937161.2562FD51%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0kW9uENqRppjmW09DprdZDsyWpwrxB1M7EkW%3DNhtszQAg%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> Ola Lundqvist &lt;ola@inguza.com&gt;, 832908@bugs.debian.org, 
	Debian LTS &lt;debian-lts@lists.debian.org&gt;, kpcyrd@rxv.cc, 
	László Böszörményi &lt;gcs@debian.org&gt;, 
	Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 2 Aug 2016 23:57:27 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=66">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi Chris

The reason I do not simply set the umask to a fixed value is to use the
same principle as upstream. That is honor the umask set bu the user. There
may be reasons why group read and/or write should be set for example.

I agree with upstream that the umask should be honored, but not as strictly
as upstream do. This is why I just override the &quot;world readable&quot; part and
let the rest be controlled by the user.

In the working patch you can see that I also set back the umask (just a
little further down in the file) as it was to just change this specific
case of logging.

More clear now?

Best regards

// Ola

On Tue, Aug 2, 2016 at 7:14 PM, Chris Lamb &lt;lamby@debian.org&gt; wrote:

&gt; &gt; Here is the working patch (attached).
&gt;
&gt; Out of interest, why:
&gt;
&gt; +    mode_t prev_mask = umask(0022);
&gt; +    // Make sure this file is not readable by others
&gt; +    umask(prev_mask | S_IROTH | S_IWOTH | S_IXOTH);
&gt;      FILE *fp = fopen(filename,&quot;w&quot;);
&gt;
&gt; .. over, say:
&gt;
&gt; +    // Make sure this file is not readable by others
&gt; +    mode_t prev_mask = umask(S_IXUSR|S_IRWXG|S_IRWXO);
&gt;      FILE *fp = fopen(filename,&quot;w&quot;);
&gt; +    umask(prev_mask);
&gt;
&gt; We don&#39;t really want to change the umask for the entire process.
&gt; Or at least, we don&#39;t know the ramifications of that so better to
&gt; keep it isolated to just this bit?
&gt;
&gt;
&gt; Regards,
&gt;
&gt; --
&gt;       ,&#39;&#39;`.
&gt;      : :&#39;  :     Chris Lamb
&gt;      `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
&gt;        `-
&gt;



-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=66">Message part 2</a> (text/html, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="67"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470175384 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Tue, 02 Aug 2016 22:03:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=68">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=68">mbox</a>, <a href="#67">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="69"></a>
<!-- request_addr: Chris Lamb &lt;lamby@debian.org&gt; -->
<!-- time:1470175384 -->
<strong>Acknowledgement sent</strong>
to <code>Chris Lamb &lt;lamby@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Tue, 02 Aug 2016 22:03:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=70">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=70">mbox</a>, <a href="#69">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="71"></a><a name="msg71"></a><a href="#71">Message #71</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=71">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=71">mbox</a>, <a href="mailto:832908@bugs.debian.org?body=On%20Wed%2C%2003%20Aug%202016%2000%3A00%3A55%20%2B0200%20Chris%20Lamb%20%3Clamby%40debian.org%3E%20wrote%3A%0A%3E%20%3E%20This%20is%20why%20I%20just%20override%20the%20%22world%20readable%22%20part%20and%0A%3E%20%3E%20let%20the%20rest%20be%20controlled%20by%20the%20user.%0A%3E%20%0A%3E%20Ah%2C%20didn%27t%20quite%20spot%20you%20are%20overriding%20just%20this%20bit.%20Worth%20a%20comment%0A%3E%20I%20think.%0A%3E%20%0A%3E%20%3E%20In%20the%20working%20patch%20you%20can%20see%20that%20I%20also%20set%20back%20the%20umask%20%28just%20a%0A%3E%20%3E%20little%20further%20down%20in%20the%20file%29%20as%20it%20was%20to%20just%20change%20this%20specific%0A%3E%20%3E%20case%20of%20logging.%0A%3E%20%0A%3E%20Well%2C%20sure%2C%20of%20course.%20%3A%29%0A%3E%20%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20%0A%3E%20--%20%0A%3E%20%20%20%20%20%20%20%2C%27%27%60.%0A%3E%20%20%20%20%20%20%3A%20%3A%27%20%20%3A%20%20%20%20%20Chris%20Lamb%0A%3E%20%20%20%20%20%20%60.%20%60%27%60%20%20%20%20%20%20lamby%40debian.org%20%2F%20chris-lamb.co.uk%0A%3E%20%20%20%20%20%20%20%20%60-%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C1470175255.3127846.684220689.12A8C7CC%40webmail.messagingengine.com%3E&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%20history%0A%20file%3A%20LTS%20update%20and%20upgrade%20handling&amp;References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kF3ZP11r_ipMUteXHzVAOXWJcF40Pi_LUdAAkm2nuJ8g%40mail.gmail.com%3E%0A%20%3C1470158088.2374063.683937161.2562FD51%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0kW9uENqRppjmW09DprdZDsyWpwrxB1M7EkW%3DNhtszQAg%40mail.gmail.com%3E%0A%20%3C1470175255.3127846.684220689.12A8C7CC%40webmail.messagingengine.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=lamby%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> 832908@bugs.debian.org, Debian LTS &lt;debian-lts@lists.debian.org&gt;,
 kpcyrd@rxv.cc, László Böszörményi
 &lt;gcs@debian.org&gt;, Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell history
 file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 03 Aug 2016 00:00:55 +0200</div>
</div>
<pre class="message">&gt; This is why I just override the &quot;world readable&quot; part and
&gt; let the rest be controlled by the user.

Ah, didn&#39;t quite spot you are overriding just this bit. Worth a comment
I think.

&gt; In the working patch you can see that I also set back the umask (just a
&gt; little further down in the file) as it was to just change this specific
&gt; case of logging.

Well, sure, of course. :)


Regards,

-- 
      ,&#39;&#39;`.
     : :&#39;  :     Chris Lamb
     `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
       `-


</pre>

<div class="infmessage"><hr><p>
<a name="72"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470175743 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Tue, 02 Aug 2016 22:09:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=73">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=73">mbox</a>, <a href="#72">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="74"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470175743 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Tue, 02 Aug 2016 22:09:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=75">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=75">mbox</a>, <a href="#74">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="76"></a><a name="msg76"></a><a href="#76">Message #76</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=76">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=76">mbox</a>, <a href="mailto:832908@bugs.debian.org?References=%3CCABY6%3D0%3DeDKzBhT8tZ7_U9XWwE_P9AE8YJwk-F_HMCwGWwte%2Brw%40mail.gmail.com%3E%0A%20%3C1470023627.982933.682182961.5886488C%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0mA_8y6hpbobNKh4SWj9qz-2S8%2BMZWz5x-8wNunwO-8FA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kLZWLpPB1%2B2oXu9COe8KezDWNGb7rGeZnR8akyGf4BjA%40mail.gmail.com%3E%0A%20%3CCABY6%3D0kF3ZP11r_ipMUteXHzVAOXWJcF40Pi_LUdAAkm2nuJ8g%40mail.gmail.com%3E%0A%20%3C1470158088.2374063.683937161.2562FD51%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0kW9uENqRppjmW09DprdZDsyWpwrxB1M7EkW%3DNhtszQAg%40mail.gmail.com%3E%20%3C1470175255.3127846.684220689.12A8C7CC%40webmail.messagingengine.com%3E%0A%20%3CCABY6%3D0nBc9wfwzDwomb%3DyQYyr4QJbdR9HqOLx7AG_zW61ZWxeg%40mail.gmail.com%3E&amp;In-Reply-To=%3CCABY6%3D0nBc9wfwzDwomb%3DyQYyr4QJbdR9HqOLx7AG_zW61ZWxeg%40mail.gmail.com%3E&amp;body=On%20Wed%2C%203%20Aug%202016%2000%3A05%3A31%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Hi%20Chris%0A%3E%20%0A%3E%20I%20had%20this%0A%3E%20%2F%2F%20Make%20sure%20this%20file%20is%20not%20readable%20by%20others%0A%3E%20%0A%3E%20But%20maybe%20it%20was%20not%20clear%20enough.%20%3A-%29%0A%3E%20%0A%3E%20%2F%2F%20Ola%0A%3E%20%0A%3E%20On%20Wed%2C%20Aug%203%2C%202016%20at%2012%3A00%20AM%2C%20Chris%20Lamb%20%3Clamby%40debian.org%3E%20wrote%3A%0A%3E%20%0A%3E%20%3E%20%3E%20This%20is%20why%20I%20just%20override%20the%20%22world%20readable%22%20part%20and%0A%3E%20%3E%20%3E%20let%20the%20rest%20be%20controlled%20by%20the%20user.%0A%3E%20%3E%0A%3E%20%3E%20Ah%2C%20didn%27t%20quite%20spot%20you%20are%20overriding%20just%20this%20bit.%20Worth%20a%20comment%0A%3E%20%3E%20I%20think.%0A%3E%20%3E%0A%3E%20%3E%20%3E%20In%20the%20working%20patch%20you%20can%20see%20that%20I%20also%20set%20back%20the%20umask%20%28just%20a%0A%3E%20%3E%20%3E%20little%20further%20down%20in%20the%20file%29%20as%20it%20was%20to%20just%20change%20this%20specific%0A%3E%20%3E%20%3E%20case%20of%20logging.%0A%3E%20%3E%0A%3E%20%3E%20Well%2C%20sure%2C%20of%20course.%20%3A%29%0A%3E%20%3E%0A%3E%20%3E%0A%3E%20%3E%20Regards%2C%0A%3E%20%3E%0A%3E%20%3E%20--%0A%3E%20%3E%20%20%20%20%20%20%20%2C%27%27%60.%0A%3E%20%3E%20%20%20%20%20%20%3A%20%3A%27%20%20%3A%20%20%20%20%20Chris%20Lamb%0A%3E%20%3E%20%20%20%20%20%20%60.%20%60%27%60%20%20%20%20%20%20lamby%40debian.org%20%2F%20chris-lamb.co.uk%0A%3E%20%3E%20%20%20%20%20%20%20%20%60-%0A%3E%20%3E%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20--%20%0A%3E%20%20---%20Inguza%20Technology%20AB%20---%20MSc%20in%20Information%20Technology%20----%0A%3E%20%2F%20%20ola%40inguza.com%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Folkebogatan%2026%20%20%20%20%20%20%20%20%20%20%20%20%5C%0A%3E%20%7C%20%20opal%40debian.org%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20654%2068%20KARLSTAD%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%3E%20%7C%20%20http%3A%2F%2Finguza.com%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Mobile%3A%20%2B46%20%280%2970-332%201551%20%7C%0A%3E%20%5C%20%20gpg%2Ff.p.%3A%207090%20A92B%2018FE%207994%200C36%204FE4%2018A1%20B1CF%200FE5%203DD9%20%20%2F%0A%3E%20%20---------------------------------------------------------------%0A&amp;subject=Re%3A%20Bug%23832908%3A%20mongodb%3A%20CVE-2016-6494%3A%20world-readable%20.dbshell%0A%20history%20file%3A%20LTS%20update%20and%20upgrade%20handling">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Chris Lamb &lt;lamby@debian.org&gt;</div>
<div class="header"><span class="headerfield">Cc:</span> Ola Lundqvist &lt;ola@inguza.com&gt;, 832908@bugs.debian.org, 
	Debian LTS &lt;debian-lts@lists.debian.org&gt;, kpcyrd@rxv.cc, 
	László Böszörményi &lt;gcs@debian.org&gt;, 
	Salvatore Bonaccorso &lt;carnil@debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Bug#832908: mongodb: CVE-2016-6494: world-readable .dbshell
 history file: LTS update and upgrade handling</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 3 Aug 2016 00:05:31 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=76">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi Chris

I had this
// Make sure this file is not readable by others

But maybe it was not clear enough. :-)

// Ola

On Wed, Aug 3, 2016 at 12:00 AM, Chris Lamb &lt;lamby@debian.org&gt; wrote:

&gt; &gt; This is why I just override the &quot;world readable&quot; part and
&gt; &gt; let the rest be controlled by the user.
&gt;
&gt; Ah, didn&#39;t quite spot you are overriding just this bit. Worth a comment
&gt; I think.
&gt;
&gt; &gt; In the working patch you can see that I also set back the umask (just a
&gt; &gt; little further down in the file) as it was to just change this specific
&gt; &gt; case of logging.
&gt;
&gt; Well, sure, of course. :)
&gt;
&gt;
&gt; Regards,
&gt;
&gt; --
&gt;       ,&#39;&#39;`.
&gt;      : :&#39;  :     Chris Lamb
&gt;      `. `&#39;`      lamby@debian.org / chris-lamb.co.uk
&gt;        `-
&gt;



-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=76">Message part 2</a> (text/html, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="77"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470259986 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Wed, 03 Aug 2016 21:33:06 GMT) (<a href="bugreport.cgi?bug=832908;msg=78">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=78">mbox</a>, <a href="#77">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="79"></a>
<!-- request_addr: Ola Lundqvist &lt;ola@inguza.com&gt; -->
<!-- time:1470259986 -->
<strong>Acknowledgement sent</strong>
to <code>Ola Lundqvist &lt;ola@inguza.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Wed, 03 Aug 2016 21:33:06 GMT) (<a href="bugreport.cgi?bug=832908;msg=80">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=80">mbox</a>, <a href="#79">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="81"></a><a name="msg81"></a><a href="#81">Message #81</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=81">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=81">mbox</a>, <a href="mailto:832908@bugs.debian.org?subject=Re%3A%20Security%20update%20of%20mongodb&amp;In-Reply-To=%3CCABY6%3D0nXe_Ssi5HCXLK9Ppo23MS6hiZDRHcj%3DWGPcc-gvXvNuQ%40mail.gmail.com%3E&amp;body=On%20Wed%2C%203%20Aug%202016%2023%3A32%3A02%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20Hi%20J%C3%A9r%C3%A9my%2C%20Laszlo%20and%20LTS%20team%0A%3E%20%0A%3E%20You%20have%20probably%20seen%20my%20latest%20emails%20about%20%22Bug%23832908%3A%20mongodb%3A%0A%3E%20CVE-2016-6494%3A%20world-readable%20.dbshell%20history%20file%3A%20LTS%20update%20and%20upgrade%0A%3E%20handling%22.%0A%3E%20%0A%3E%20I%20have%20now%20prepared%20a%20security%20update%20of%20this%20CVE-2016-6494%20and%20in%20addition%0A%3E%20to%20that%20TEMP-0833087-C5410D.%0A%3E%20%0A%3E%20For%20https%3A%2F%2Fsecurity-tracker.debian.org%2Ftracker%2FCVE-2016-6494%20you%20can%20find%0A%3E%20the%20patch%20in%20bug%20832908.%0A%3E%20%0A%3E%20For%20https%3A%2F%2Fsecurity-tracker.debian.org%2Ftracker%2FTEMP-0833087-C5410D%20I%20could%0A%3E%20not%20easily%20backport%20the%20fix%20for%20sid%20as%20the%20code%20was%20considerably%20different.%0A%3E%20So%20I%20made%20a%20simpler%20solution.%20The%20upstream%20fix%20was%20to%20mangle%20only%20the%20the%0A%3E%20sensitive%20data.%20In%20wheezy%20I%20replaced%20the%20whole%20sensitive%20string%20with%20XXX.%0A%3E%20This%20means%20that%20the%20logging%20is%20not%20that%20good%20anymore%20but%20this%20should%20not%0A%3E%20impact%20any%20application%20functionality.%20I%20do%20not%20think%20most%20people%20will%0A%3E%20notive%20this%20anyway%20so%20I%20think%20it%20is%20safe.%0A%3E%20%0A%3E%20Upstream%20fix%20looks%20something%20like%20this%20in%20the%20logs%3A%0A%3E%20Tue%20Aug%20%202%2011%3A41%3A13%20%5Bconn4%5D%20%20authenticate%3A%20%7B%20authenticate%3A%201.0%2C%20user%3A%0A%3E%20%22foo%22%2C%20nonce%3A%20%22XXXX%22%2C%20key%3A%20%22XXXX%22%20%7D%0A%3E%20%0A%3E%20My%20fix%20looks%20like%20this%3A%0A%3E%20Wed%20Aug%20%203%2021%3A18%3A52%20%5Bconn1%5D%20%20authenticate%3A%20XXXX%0A%3E%20%0A%3E%20I%20made%20the%20short-cut%20as%20I%20do%20not%20think%20it%20is%20worth%20the%20effort%20to%20do%20a%20full%0A%3E%20back-port.%0A%3E%20%0A%3E%20You%20can%20find%20the%20debdiff%20here%3A%0A%3E%20http%3A%2F%2Fapt.inguza.net%2Fwheezy-security%2Fmongodb%2Fmongodb.debdiff%0A%3E%20%0A%3E%20And%20the%20prepared%20package%20here%3A%0A%3E%20http%3A%2F%2Fapt.inguza.net%2Fwheezy-security%2Fmongodb%2F%0A%3E%20%0A%3E%20Regarding%20testing%20I%20have%20done%20a%20simple%20regression%20test%20bu%20installing%20the%0A%3E%20new%20packages%2C%20checking%20that%20the%20database%20is%20there%20and%20that%20I%20can%20access%20the%0A%3E%20server.%0A%3E%20%0A%3E%20I%20have%20also%20been%20able%20to%20reproduce%20both%20issues%20and%20been%20able%20to%20verify%20that%0A%3E%20both%20fixes%20do%20really%20solve%20the%20problem.%0A%3E%20%0A%3E%20If%20I%20do%20not%20hear%20any%20objections%20I%20will%20upload%20the%20corrected%20packages%20in%0A%3E%20four%20%284%29%20days%2C%20that%20is%20on%20Sunday%20%28maybe%20on%20monday%20after%29.%0A%3E%20%0A%3E%20Best%20regards%0A%3E%20%0A%3E%20%2F%2F%20Ola%0A%3E%20%0A%3E%20--%20%0A%3E%20%20---%20Inguza%20Technology%20AB%20---%20MSc%20in%20Information%20Technology%20----%0A%3E%20%2F%20%20ola%40inguza.com%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Folkebogatan%2026%20%20%20%20%20%20%20%20%20%20%20%20%5C%0A%3E%20%7C%20%20opal%40debian.org%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20654%2068%20KARLSTAD%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%3E%20%7C%20%20http%3A%2F%2Finguza.com%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Mobile%3A%20%2B46%20%280%2970-332%201551%20%7C%0A%3E%20%5C%20%20gpg%2Ff.p.%3A%207090%20A92B%2018FE%207994%200C36%204FE4%2018A1%20B1CF%200FE5%203DD9%20%20%2F%0A%3E%20%20---------------------------------------------------------------%0A&amp;References=%3CCABY6%3D0nXe_Ssi5HCXLK9Ppo23MS6hiZDRHcj%3DWGPcc-gvXvNuQ%40mail.gmail.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=ola%40inguza.com" alt="">
<div class="header"><span class="headerfield">From:</span> Ola Lundqvist &lt;ola@inguza.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> Jérémy Lal &lt;kapouer@melix.org&gt;, 
	&quot;Laszlo Boszormenyi (GCS)&quot; &lt;gcs@debian.org&gt;, Debian LTS &lt;debian-lts@lists.debian.org&gt;, 833087@bugs.debian.org, 
	832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Security update of mongodb</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 3 Aug 2016 23:32:02 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=832908;msg=81">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi Jérémy, Laszlo and LTS team

You have probably seen my latest emails about &quot;Bug#832908: mongodb:
<a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a>: world-readable .dbshell history file: LTS update and upgrade
handling&quot;.

I have now prepared a security update of this <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a> and in addition
to that TEMP-0833087-C5410D.

For <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">https://security-tracker.debian.org/tracker/CVE-2016-6494</a> you can find
the patch in bug 832908.

For <a href="https://security-tracker.debian.org/tracker/TEMP-0833087-C5410D">https://security-tracker.debian.org/tracker/TEMP-0833087-C5410D</a> I could
not easily backport the fix for sid as the code was considerably different.
So I made a simpler solution. The upstream fix was to mangle only the the
sensitive data. In wheezy I replaced the whole sensitive string with XXX.
This means that the logging is not that good anymore but this should not
impact any application functionality. I do not think most people will
notive this anyway so I think it is safe.

Upstream fix looks something like this in the logs:
Tue Aug  2 11:41:13 [conn4]  authenticate: { authenticate: 1.0, user:
&quot;foo&quot;, nonce: &quot;XXXX&quot;, key: &quot;XXXX&quot; }

My fix looks like this:
Wed Aug  3 21:18:52 [conn1]  authenticate: XXXX

I made the short-cut as I do not think it is worth the effort to do a full
back-port.

You can find the debdiff here:
<a href="http://apt.inguza.net/wheezy-security/mongodb/mongodb.debdiff">http://apt.inguza.net/wheezy-security/mongodb/mongodb.debdiff</a>

And the prepared package here:
<a href="http://apt.inguza.net/wheezy-security/mongodb/">http://apt.inguza.net/wheezy-security/mongodb/</a>

Regarding testing I have done a simple regression test bu installing the
new packages, checking that the database is there and that I can access the
server.

I have also been able to reproduce both issues and been able to verify that
both fixes do really solve the problem.

If I do not hear any objections I will upload the corrected packages in
four (4) days, that is on Sunday (maybe on monday after).

Best regards

// Ola

-- 
 --- Inguza Technology AB --- MSc in Information Technology ----
/  ola@inguza.com                    Folkebogatan 26            \
|  opal@debian.org                   654 68 KARLSTAD            |
|  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
\  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
 ---------------------------------------------------------------
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=832908;msg=81">Message part 2</a> (text/html, inline)]</pre>

<div class="infmessage"><hr><p>
<a name="82"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470314883 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
<code>Bug#832908</code>; Package <code>mongodb-clients</code>.
 (Thu, 04 Aug 2016 12:48:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=83">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=83">mbox</a>, <a href="#82">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="84"></a>
<!-- request_addr: Marek Skalický &lt;mskalick@redhat.com&gt; -->
<!-- time:1470314883 -->
<strong>Acknowledgement sent</strong>
to <code>Marek Skalický &lt;mskalick@redhat.com&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>.
 (Thu, 04 Aug 2016 12:48:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=85">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=85">mbox</a>, <a href="#84">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="86"></a><a name="msg86"></a><a href="#86">Message #86</a> received at 832908@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=86">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=86">mbox</a>, <a href="mailto:832908@bugs.debian.org?References=%3CCABY6%3D0nXe_Ssi5HCXLK9Ppo23MS6hiZDRHcj%3DWGPcc-gvXvNuQ%40mail.gmail.com%3E%0A%20%3C1470314742.3436.51.camel%40redhat.com%3E&amp;subject=Re%3A%20Security%20update%20of%20mongodb&amp;body=On%20Thu%2C%2004%20Aug%202016%2014%3A45%3A42%20%2B0200%20Marek%20%3D%3FISO-8859-1%3FQ%3FSkalick%3DFD%3F%3D%20%3Cmskalick%40redhat.com%3E%20wrote%3A%0A%3E%20Please%20try%20to%20persuade%20upstream%20for%20the%20fix%20in%C2%A0https%3A%2F%2Fgroups.google.co%0A%3E%20m%2Fforum%2F%23%21topic%2Fmongodb-dev%2F-QR4B7PJ9YY%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20Marek%0A%3E%20%0A%3E%20On%20Wed%2C%203%20Aug%202016%2023%3A32%3A02%20%2B0200%20Ola%20Lundqvist%20%3Cola%40inguza.com%3E%20wrote%3A%0A%3E%20%3E%20Hi%20J%C3%83%C2%A9r%C3%83%C2%A9my%2C%20Laszlo%20and%20LTS%20team%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20You%20have%20probably%20seen%20my%20latest%20emails%20about%20%22Bug%23832908%3A%20mongodb%3A%0A%3E%20%3E%20CVE-2016-6494%3A%20world-readable%20.dbshell%20history%20file%3A%20LTS%20update%20and%0A%3E%20upgrade%0A%3E%20%3E%20handling%22.%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20I%20have%20now%20prepared%20a%20security%20update%20of%20this%20CVE-2016-6494%20and%20in%0A%3E%20addition%0A%3E%20%3E%20to%20that%20TEMP-0833087-C5410D.%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20For%20https%3A%2F%2Fsecurity-tracker.debian.org%2Ftracker%2FCVE-2016-6494%20you%20can%0A%3E%20find%0A%3E%20%3E%20the%20patch%20in%20bug%20832908.%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20For%20https%3A%2F%2Fsecurity-tracker.debian.org%2Ftracker%2FTEMP-0833087-C5410D%20I%0A%3E%20could%0A%3E%20%3E%20not%20easily%20backport%20the%20fix%20for%20sid%20as%20the%20code%20was%20considerably%0A%3E%20different.%0A%3E%20%3E%20So%20I%20made%20a%20simpler%20solution.%20The%20upstream%20fix%20was%20to%20mangle%20only%20the%0A%3E%20the%0A%3E%20%3E%20sensitive%20data.%20In%20wheezy%20I%20replaced%20the%20whole%20sensitive%20string%20with%0A%3E%20XXX.%0A%3E%20%3E%20This%20means%20that%20the%20logging%20is%20not%20that%20good%20anymore%20but%20this%20should%0A%3E%20not%0A%3E%20%3E%20impact%20any%20application%20functionality.%20I%20do%20not%20think%20most%20people%20will%0A%3E%20%3E%20notive%20this%20anyway%20so%20I%20think%20it%20is%20safe.%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20Upstream%20fix%20looks%20something%20like%20this%20in%20the%20logs%3A%0A%3E%20%3E%20Tue%20Aug%C2%A0%C2%A02%2011%3A41%3A13%20%5Bconn4%5D%C2%A0%C2%A0authenticate%3A%20%7B%20authenticate%3A%201.0%2C%20user%3A%0A%3E%20%3E%20%22foo%22%2C%20nonce%3A%20%22XXXX%22%2C%20key%3A%20%22XXXX%22%20%7D%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20My%20fix%20looks%20like%20this%3A%0A%3E%20%3E%20Wed%20Aug%C2%A0%C2%A03%2021%3A18%3A52%20%5Bconn1%5D%C2%A0%C2%A0authenticate%3A%20XXXX%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20I%20made%20the%20short-cut%20as%20I%20do%20not%20think%20it%20is%20worth%20the%20effort%20to%20do%20a%0A%3E%20full%0A%3E%20%3E%20back-port.%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20You%20can%20find%20the%20debdiff%20here%3A%0A%3E%20%3E%20http%3A%2F%2Fapt.inguza.net%2Fwheezy-security%2Fmongodb%2Fmongodb.debdiff%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20And%20the%20prepared%20package%20here%3A%0A%3E%20%3E%20http%3A%2F%2Fapt.inguza.net%2Fwheezy-security%2Fmongodb%2F%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20Regarding%20testing%20I%20have%20done%20a%20simple%20regression%20test%20bu%20installing%0A%3E%20the%0A%3E%20%3E%20new%20packages%2C%20checking%20that%20the%20database%20is%20there%20and%20that%20I%20can%0A%3E%20access%20the%0A%3E%20%3E%20server.%0A%3E%20%3E%C2%A0%0A%3E%20%3E%20I%20have%20also%20been%20able%20to%20reproduce%20both%20issues%20and%20been%20able%20to%0A%3E%20verify%20that%0A&amp;In-Reply-To=%3C1470314742.3436.51.camel%40redhat.com%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=mskalick%40redhat.com" alt="">
<div class="header"><span class="headerfield">From:</span> Marek Skalický &lt;mskalick@redhat.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: Security update of mongodb</div>
<div class="header"><span class="headerfield">Date:</span> Thu, 04 Aug 2016 14:45:42 +0200</div>
</div>
<pre class="message">Please try to persuade upstream for the fix in <a href="https://groups.google.co">https://groups.google.co</a>
m/forum/#!topic/mongodb-dev/-QR4B7PJ9YY

Thanks,
Marek

On Wed, 3 Aug 2016 23:32:02 +0200 Ola Lundqvist &lt;ola@inguza.com&gt; wrote:
&gt; Hi JÃ©rÃ©my, Laszlo and LTS team
&gt; 
&gt; You have probably seen my latest emails about &quot;Bug#832908: mongodb:
&gt; <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a>: world-readable .dbshell history file: LTS update and
upgrade
&gt; handling&quot;.
&gt; 
&gt; I have now prepared a security update of this <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a> and in
addition
&gt; to that TEMP-0833087-C5410D.
&gt; 
&gt; For <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">https://security-tracker.debian.org/tracker/CVE-2016-6494</a> you can
find
&gt; the patch in bug 832908.
&gt; 
&gt; For <a href="https://security-tracker.debian.org/tracker/TEMP-0833087-C5410D">https://security-tracker.debian.org/tracker/TEMP-0833087-C5410D</a> I
could
&gt; not easily backport the fix for sid as the code was considerably
different.
&gt; So I made a simpler solution. The upstream fix was to mangle only the
the
&gt; sensitive data. In wheezy I replaced the whole sensitive string with
XXX.
&gt; This means that the logging is not that good anymore but this should
not
&gt; impact any application functionality. I do not think most people will
&gt; notive this anyway so I think it is safe.
&gt; 
&gt; Upstream fix looks something like this in the logs:
&gt; Tue Aug  2 11:41:13 [conn4]  authenticate: { authenticate: 1.0, user:
&gt; &quot;foo&quot;, nonce: &quot;XXXX&quot;, key: &quot;XXXX&quot; }
&gt; 
&gt; My fix looks like this:
&gt; Wed Aug  3 21:18:52 [conn1]  authenticate: XXXX
&gt; 
&gt; I made the short-cut as I do not think it is worth the effort to do a
full
&gt; back-port.
&gt; 
&gt; You can find the debdiff here:
&gt; <a href="http://apt.inguza.net/wheezy-security/mongodb/mongodb.debdiff">http://apt.inguza.net/wheezy-security/mongodb/mongodb.debdiff</a>
&gt; 
&gt; And the prepared package here:
&gt; <a href="http://apt.inguza.net/wheezy-security/mongodb/">http://apt.inguza.net/wheezy-security/mongodb/</a>
&gt; 
&gt; Regarding testing I have done a simple regression test bu installing
the
&gt; new packages, checking that the database is there and that I can
access the
&gt; server.
&gt; 
&gt; I have also been able to reproduce both issues and been able to
verify that
&gt; both fixes do really solve the problem.
&gt; 
&gt; If I do not hear any objections I will upload the corrected packages
in
&gt; four (4) days, that is on Sunday (maybe on monday after).
&gt; 
&gt; Best regards
&gt; 
&gt; // Ola
&gt; 
&gt; -- 
&gt;  --- Inguza Technology AB --- MSc in Information Technology ----
&gt; /  ola@inguza.com                    Folkebogatan 26            \
&gt; |  opal@debian.org                   654 68 KARLSTAD            |
&gt; |  <a href="http://inguza.com/">http://inguza.com/</a>                Mobile: +46 (0)70-332 1551 |
&gt; \  gpg/f.p.: 7090 A92B 18FE 7994 0C36 4FE4 18A1 B1CF 0FE5 3DD9  /
&gt;  ---------------------------------------------------------------


</pre>

<div class="msgreceived"><hr><p>
<a name="87"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1470664630 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;2.0.6-1&#39;,
                                    &#39;2.4.10-5&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;2.4.10-5&#39;
                                  ]
            };
-->
<strong>Marked as found in versions 2.0.6-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Mon, 08 Aug 2016 13:57:10 GMT) (<a href="bugreport.cgi?bug=832908;msg=88">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=88">mbox</a>, <a href="#87">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="89"></a>
<!-- command:fixed -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1470664630 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;2.0.6-1+deb7u1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;fixed_versions&#39; =&gt; []
            };
-->
<strong>Marked as fixed in versions 2.0.6-1+deb7u1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Mon, 08 Aug 2016 13:57:10 GMT) (<a href="bugreport.cgi?bug=832908;msg=90">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=90">mbox</a>, <a href="#89">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="91"></a>
<!-- request_addr: Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; -->
<!-- time:1470781804 -->
<strong>Reply sent</strong>
to <code>Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Tue, 09 Aug 2016 22:30:04 GMT) (<a href="bugreport.cgi?bug=832908;msg=92">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=92">mbox</a>, <a href="#91">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="93"></a>
<!-- request_addr: kpcyrd &lt;kpcyrd@rxv.cc&gt; -->
<!-- time:1470781805 -->
<strong>Notification sent</strong>
to <code>kpcyrd &lt;kpcyrd@rxv.cc&gt;</code>:<br>
Bug acknowledged by developer.
 (Tue, 09 Aug 2016 22:30:05 GMT) (<a href="bugreport.cgi?bug=832908;msg=94">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=94">mbox</a>, <a href="#93">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="95"></a><a name="msg95"></a><a href="#95">Message #95</a> received at 832908-close@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=95">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=95">mbox</a>, <a href="mailto:832908@bugs.debian.org?subject=Re%3A%20Bug%23832908%3A%20fixed%20in%20mongodb%201%3A2.6.12-3&amp;In-Reply-To=%3CE1bXFU1-0008FH-L0%40franck.debian.org%3E&amp;body=On%20Tue%2C%2009%20Aug%202016%2022%3A26%3A49%20%2B0000%20Laszlo%20Boszormenyi%20%28GCS%29%20%3Cgcs%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20mongodb%0A%3E%20Source-Version%3A%201%3A2.6.12-3%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20mongodb%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20832908%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Laszlo%20Boszormenyi%20%28GCS%29%20%3Cgcs%40debian.org%3E%20%28supplier%20of%20updated%20mongodb%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Mon%2C%2008%20Aug%202016%2021%3A56%3A32%20%2B0000%0A%3E%20Source%3A%20mongodb%0A%3E%20Binary%3A%20mongodb%20mongodb-server%20mongodb-clients%0A%3E%20Architecture%3A%20source%20amd64%0A%3E%20Version%3A%201%3A2.6.12-3%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20high%0A%3E%20Maintainer%3A%20Laszlo%20Boszormenyi%20%28GCS%29%20%3Cgcs%40debian.org%3E%0A%3E%20Changed-By%3A%20Laszlo%20Boszormenyi%20%28GCS%29%20%3Cgcs%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20mongodb%20%20%20%20-%20object%2Fdocument-oriented%20database%20%28metapackage%29%0A%3E%20%20mongodb-clients%20-%20object%2Fdocument-oriented%20database%20%28client%20apps%29%0A%3E%20%20mongodb-server%20-%20object%2Fdocument-oriented%20database%20%28server%20package%29%0A%3E%20Closes%3A%20832908%0A%3E%20Changes%3A%0A%3E%20%20mongodb%20%281%3A2.6.12-3%29%20unstable%3B%20urgency%3Dhigh%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Fix%20CVE-2016-6494%20%2C%20prevent%20group%20and%20other%20access%20to%20.dbshell%0A%3E%20%20%20%20%20%20%28closes%3A%20%23832908%29.%0A%3E%20Checksums-Sha1%3A%0A%3E%20%2015971b52c299b7c6ee59d9944d22262388b0c999%202738%20mongodb_2.6.12-3.dsc%0A%3E%20%20d19c2e03cf445e197e0bd2bc28f9b08be3309c47%2053000%20mongodb_2.6.12-3.debian.tar.xz%0A%3E%20%202859ad4ca521169e02035c52386d0d7a9ab2ce9b%201255815488%20mongodb-clients-dbgsym_2.6.12-3_amd64.deb%0A%3E%20%208fdfe5a132d4ac364a93943e8422a3a311fbea98%2047043808%20mongodb-clients_2.6.12-3_amd64.deb%0A%3E%20%203427389cd93143fa5d1ff812d60832c1746bfc84%20178246036%20mongodb-server-dbgsym_2.6.12-3_amd64.deb%0A%3E%20%201681cb59efc82a229a7359967023193a215d440f%207216400%20mongodb-server_2.6.12-3_amd64.deb%0A%3E%20%20514b73f0cffcb910e60f378a5750ba094dd72238%2016994%20mongodb_2.6.12-3_amd64.deb%0A%3E%20Checksums-Sha256%3A%0A%3E%20%20fbb0c2ef8b3c151d6e6f67cc97b2ad0501499386b5b62aa08468373ff26566b5%202738%20mongodb_2.6.12-3.dsc%0A%3E%20%20b534195da23b96936c1d702f4fac9edc516ac83737b9ec9bdce7324ac3b08c0d%2053000%20mongodb_2.6.12-3.debian.tar.xz%0A%3E%20%207017bcdadda0f32af1ee6ce1b7fada5c81a6397d997631c0c6d9fdd3d6557023%201255815488%20mongodb-clients-dbgsym_2.6.12-3_amd64.deb%0A%3E%20%20c757867ad5b391e7088d0be5c018b7b4cbef20900c59fc835e92a27faa4be0ff%2047043808%20mongodb-clients_2.6.12-3_amd64.deb%0A%3E%20%205bbf4005b5ca3be8a321d185dde5de72d1d9ca7fa90819ba64e5d62702266c21%20178246036%20mongodb-server-dbgsym_2.6.12-3_amd64.deb%0A%3E%20%202ce9e01a4747e06f3b160c9a0c52464613faf6102bb88e88d6e7808ddd676233%207216400%20mongodb-server_2.6.12-3_amd64.deb%0A&amp;References=%3CE1bXFU1-0008FH-L0%40franck.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=gcs%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#832908: fixed in mongodb 1:2.6.12-3</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 09 Aug 2016 22:26:49 +0000</div>
</div>
<pre class="message">Source: mongodb
Source-Version: 1:2.6.12-3

We believe that the bug you reported is fixed in the latest version of
mongodb, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 832908@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt; (supplier of updated mongodb package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Mon, 08 Aug 2016 21:56:32 +0000
Source: mongodb
Binary: mongodb mongodb-server mongodb-clients
Architecture: source amd64
Version: 1:2.6.12-3
Distribution: unstable
Urgency: high
Maintainer: Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;
Changed-By: Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;
Description:
 mongodb    - object/document-oriented database (metapackage)
 mongodb-clients - object/document-oriented database (client apps)
 mongodb-server - object/document-oriented database (server package)
Closes: <a href="bugreport.cgi?bug=832908">832908</a>
Changes:
 mongodb (1:2.6.12-3) unstable; urgency=high
 .
   * Fix <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a> , prevent group and other access to .dbshell
     (closes: #<a href="bugreport.cgi?bug=832908">832908</a>).
Checksums-Sha1:
 15971b52c299b7c6ee59d9944d22262388b0c999 2738 mongodb_2.6.12-3.dsc
 d19c2e03cf445e197e0bd2bc28f9b08be3309c47 53000 mongodb_2.6.12-3.debian.tar.xz
 2859ad4ca521169e02035c52386d0d7a9ab2ce9b 1255815488 mongodb-clients-dbgsym_2.6.12-3_amd64.deb
 8fdfe5a132d4ac364a93943e8422a3a311fbea98 47043808 mongodb-clients_2.6.12-3_amd64.deb
 3427389cd93143fa5d1ff812d60832c1746bfc84 178246036 mongodb-server-dbgsym_2.6.12-3_amd64.deb
 1681cb59efc82a229a7359967023193a215d440f 7216400 mongodb-server_2.6.12-3_amd64.deb
 514b73f0cffcb910e60f378a5750ba094dd72238 16994 mongodb_2.6.12-3_amd64.deb
Checksums-Sha256:
 fbb0c2ef8b3c151d6e6f67cc97b2ad0501499386b5b62aa08468373ff26566b5 2738 mongodb_2.6.12-3.dsc
 b534195da23b96936c1d702f4fac9edc516ac83737b9ec9bdce7324ac3b08c0d 53000 mongodb_2.6.12-3.debian.tar.xz
 7017bcdadda0f32af1ee6ce1b7fada5c81a6397d997631c0c6d9fdd3d6557023 1255815488 mongodb-clients-dbgsym_2.6.12-3_amd64.deb
 c757867ad5b391e7088d0be5c018b7b4cbef20900c59fc835e92a27faa4be0ff 47043808 mongodb-clients_2.6.12-3_amd64.deb
 5bbf4005b5ca3be8a321d185dde5de72d1d9ca7fa90819ba64e5d62702266c21 178246036 mongodb-server-dbgsym_2.6.12-3_amd64.deb
 2ce9e01a4747e06f3b160c9a0c52464613faf6102bb88e88d6e7808ddd676233 7216400 mongodb-server_2.6.12-3_amd64.deb
 df480f6ca6c22409bd1dc6c2120be02e9726793f94773a0fa2baf70df1aac241 16994 mongodb_2.6.12-3_amd64.deb
Files:
 bf33b695c54c99b71c92345ff5181d1e 2738 database optional mongodb_2.6.12-3.dsc
 c1bf57240f0a679bf96c0696ae4b4841 53000 database optional mongodb_2.6.12-3.debian.tar.xz
 40d2974b66c2a9b1c7859f71a660716b 1255815488 debug extra mongodb-clients-dbgsym_2.6.12-3_amd64.deb
 36a9205c8fe7c9e75df8c7a82314118f 47043808 database optional mongodb-clients_2.6.12-3_amd64.deb
 1a50e5879ebbbd7fe6ecaae0d15e0217 178246036 debug extra mongodb-server-dbgsym_2.6.12-3_amd64.deb
 3206ea83f7b1e367d935740a64a5f6ec 7216400 database optional mongodb-server_2.6.12-3_amd64.deb
 6f08aa96f355e8272ab10c906c471953 16994 database optional mongodb_2.6.12-3_amd64.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJXqf46AAoJENzjEOeGTMi/UVgQAJZdrSSYjbxjuLKbtY2O97hH
dA3NpRdiGQhq0J5MmL3h+tiyA7NqTnqssWOHtHZfmqhW422FeRTpOL/AE1L6OWmy
LyBQ/zLMVHJcIlJdzMJvY9BKBTzJegLPsdZlNJGE5xwQtHo3PxQnfsAFILJwXv1K
jmw2eTy/0hps0IVISpxWdvlaRODkuJcQbClVyrNKVI1iG/ib0CU+QcmnOk/5T1ba
fj0ZzD4pahccxLf88pUV3f2uURM2WLbqYZpTNf0k+dzXcLkW+qsEW/TZnUq4SnZT
sNkspM5yWmFHnKm8hZdRwmKqQb3FEAylDl428k088p4YhXJusils3lVh1m09xmSA
ij+UgJLx2atiNYO5lXV7Ti4/MSVpm9BdcHHjwsY/GgZ59A5+Py9HzUPUt+QEVTQF
bVZHyHAnhwV6ProayiqQirGCsndUP+HFNM3AjOQXThJbGdS5HcMin5aRWga6TiFu
s5RSp21cxZUdTB1LYLohqPeaPnW+PKAfUrvs+YqIM9p9TwFpSAgMW8J3jQCNuX4r
yHR11NZjxhXdBSLF+Kjvduxi4LPhkEn4kkeQ7A4LfHGBsy6J0CTOmJzj6hsTBwoD
uD1Zmon/nnxT2C8tjYEF6kKlmJ3+lvQ4jkBwSBopw+tVMK7zKFLtFhGFEpyOx+uU
okqsefq+mEoFkBs2GLhh
=kFkF
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="96"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1470894483 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;mongodb/1:2.6.12-3&#39;,
                                    &#39;2.0.6-1+deb7u1&#39;
                                  ],
              &#39;found_versions&#39; =&gt; [
                                    &#39;2.0.6-1&#39;,
                                    &#39;2.4.10-5&#39;,
                                    &#39;mongodb/1:2.4.10-5&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;2.0.6-1&#39;,
                                    &#39;2.4.10-5&#39;
                                  ],
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;2.0.6-1+deb7u1&#39;,
                                    &#39;mongodb/1:2.6.12-3&#39;
                                  ]
            };
-->
<strong>Marked as found in versions mongodb/1:2.4.10-5.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Thu, 11 Aug 2016 05:48:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=97">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=97">mbox</a>, <a href="#96">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="98"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1480923930 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Mon, 05 Dec 2016 07:45:30 GMT) (<a href="bugreport.cgi?bug=832908;msg=99">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=99">mbox</a>, <a href="#98">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="100"></a>
<!-- command:unarchive -->
<!-- requester: Don Armstrong &lt;don@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1481075540 -->
<!-- new_data:
$new_data = {
              &#39;unarchived&#39; =&gt; &#39;1481075540&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;unarchived&#39; =&gt; &#39;&#39;
            };
-->
<strong>Bug unarchived.</strong>
Request was from <code>Don Armstrong &lt;don@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 07 Dec 2016 01:52:20 GMT) (<a href="bugreport.cgi?bug=832908;msg=101">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=101">mbox</a>, <a href="#100">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="102"></a>
<!-- command:fixed -->
<!-- requester: Apollon Oikonomopoulos &lt;apoikos@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1481863683 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;mongodb/1:2.4.10-5&#39;,
                                    &#39;2.0.6-1&#39;,
                                    &#39;2.4.10-5&#39;
                                  ],
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;mongodb/1:2.6.12-3&#39;,
                                    &#39;2.0.6-1+deb7u1&#39;,
                                    &#39;mongodb/1:3.2.11-1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;2.0.6-1&#39;,
                                    &#39;2.4.10-5&#39;,
                                    &#39;mongodb/1:2.4.10-5&#39;
                                  ],
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;mongodb/1:2.6.12-3&#39;,
                                    &#39;2.0.6-1+deb7u1&#39;
                                  ]
            };
-->
<strong>Marked as fixed in versions mongodb/1:3.2.11-1.</strong>
Request was from <code>Apollon Oikonomopoulos &lt;apoikos@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Fri, 16 Dec 2016 04:48:03 GMT) (<a href="bugreport.cgi?bug=832908;msg=103">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=103">mbox</a>, <a href="#102">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="104"></a>
<!-- command:tag -->
<!-- requester: Apollon Oikonomopoulos &lt;apoikos@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1485632706 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;upstream security pending&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security upstream&#39;
            };
-->
<strong>Added tag(s) pending.</strong>
Request was from <code>Apollon Oikonomopoulos &lt;apoikos@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 28 Jan 2017 19:45:06 GMT) (<a href="bugreport.cgi?bug=832908;msg=105">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=105">mbox</a>, <a href="#104">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="106"></a>
<!-- request_addr: Apollon Oikonomopoulos &lt;apoikos@debian.org&gt; -->
<!-- time:1486939867 -->
<strong>Reply sent</strong>
to <code>Apollon Oikonomopoulos &lt;apoikos@debian.org&gt;</code>:<br>
You have taken responsibility.
 (Sun, 12 Feb 2017 22:51:07 GMT) (<a href="bugreport.cgi?bug=832908;msg=107">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=107">mbox</a>, <a href="#106">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="108"></a>
<!-- request_addr: kpcyrd &lt;kpcyrd@rxv.cc&gt; -->
<!-- time:1486939868 -->
<strong>Notification sent</strong>
to <code>kpcyrd &lt;kpcyrd@rxv.cc&gt;</code>:<br>
Bug acknowledged by developer.
 (Sun, 12 Feb 2017 22:51:08 GMT) (<a href="bugreport.cgi?bug=832908;msg=109">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=109">mbox</a>, <a href="#108">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="110"></a><a name="msg110"></a><a href="#110">Message #110</a> received at 832908-close@bugs.debian.org (<a href="bugreport.cgi?bug=832908;msg=110">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=110">mbox</a>, <a href="mailto:832908@bugs.debian.org?In-Reply-To=%3CE1cd2vF-000FAu-Tf%40fasolo.debian.org%3E&amp;body=On%20Sun%2C%2012%20Feb%202017%2022%3A47%3A09%20%2B0000%20Apollon%20Oikonomopoulos%20%3Capoikos%40debian.org%3E%20wrote%3A%0A%3E%20Source%3A%20mongodb%0A%3E%20Source-Version%3A%201%3A2.4.10-5%2Bdeb8u1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20mongodb%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20832908%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Apollon%20Oikonomopoulos%20%3Capoikos%40debian.org%3E%20%28supplier%20of%20updated%20mongodb%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA256%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Wed%2C%2011%20Jan%202017%2011%3A17%3A56%20%2B0200%0A%3E%20Source%3A%20mongodb%0A%3E%20Binary%3A%20mongodb%20mongodb-server%20mongodb-clients%20mongodb-dev%0A%3E%20Architecture%3A%20source%0A%3E%20Version%3A%201%3A2.4.10-5%2Bdeb8u1%0A%3E%20Distribution%3A%20jessie%0A%3E%20Urgency%3A%20medium%0A%3E%20Maintainer%3A%20Laszlo%20Boszormenyi%20%28GCS%29%20%3Cgcs%40debian.org%3E%0A%3E%20Changed-By%3A%20Apollon%20Oikonomopoulos%20%3Capoikos%40debian.org%3E%0A%3E%20Description%3A%0A%3E%20%20mongodb%20%20%20%20-%20object%2Fdocument-oriented%20database%20%28metapackage%29%0A%3E%20%20mongodb-clients%20-%20object%2Fdocument-oriented%20database%20%28client%20apps%29%0A%3E%20%20mongodb-dev%20-%20object%2Fdocument-oriented%20database%20%28development%29%0A%3E%20%20mongodb-server%20-%20object%2Fdocument-oriented%20database%20%28server%20package%29%0A%3E%20Closes%3A%20832908%20833087%0A%3E%20Changes%3A%0A%3E%20%20mongodb%20%281%3A2.4.10-5%2Bdeb8u1%29%20jessie%3B%20urgency%3Dmedium%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20Redact%20key%20and%20nonce%20from%20auth%20attempt%20logs%20%28Closes%3A%20%23833087%29%0A%3E%20%20%20%20%2A%20Backport%20patch%20for%20CVE-2016-6494%20from%202.6%20%28Closes%3A%20%23832908%29%0A%3E%20Checksums-Sha1%3A%0A%3E%20%206ed2b5928e8ed601c25fc19b3efee6dc77d9437a%202811%20mongodb_2.4.10-5%2Bdeb8u1.dsc%0A%3E%20%200105e9282795ed9d780ae5efb6586c9108f0180b%2057220%20mongodb_2.4.10-5%2Bdeb8u1.debian.tar.xz%0A%3E%20Checksums-Sha256%3A%0A%3E%20%207c5b1ec310c3167e8cb2f29b62ac625dc1f5432d0ecbe42d92d08aa496cf4a92%202811%20mongodb_2.4.10-5%2Bdeb8u1.dsc%0A%3E%20%209db03eb4de977a690e679edac9a5c0810c11fd15865b3faa203fea3c6cd12b21%2057220%20mongodb_2.4.10-5%2Bdeb8u1.debian.tar.xz%0A%3E%20Files%3A%0A%3E%20%20f8ee704885bbc85b0ac04d76123c9d43%202811%20database%20optional%20mongodb_2.4.10-5%2Bdeb8u1.dsc%0A%3E%20%2060bf0e4460a40674ecfd605f2f407381%2057220%20database%20optional%20mongodb_2.4.10-5%2Bdeb8u1.debian.tar.xz%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNATURE-----%0A%3E%20%0A%3E%20iQJHBAEBCAAxFiEEPgL9ZlYpWVIRC6uZ9RsYxyAkgiQFAliOgIMTHGFwb2lrb3NA%0A%3E%20ZGViaWFuLm9yZwAKCRD1GxjHICSCJFYFD%2FwJsjZgINOyyHkQstXNQfhtL0yLeG0s%0A&amp;subject=Re%3A%20Bug%23832908%3A%20fixed%20in%20mongodb%201%3A2.4.10-5%2Bdeb8u1&amp;References=%3CE1cd2vF-000FAu-Tf%40fasolo.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=apoikos%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Apollon Oikonomopoulos &lt;apoikos@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 832908-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#832908: fixed in mongodb 1:2.4.10-5+deb8u1</div>
<div class="header"><span class="headerfield">Date:</span> Sun, 12 Feb 2017 22:47:09 +0000</div>
</div>
<pre class="message">Source: mongodb
Source-Version: 1:2.4.10-5+deb8u1

We believe that the bug you reported is fixed in the latest version of
mongodb, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 832908@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Apollon Oikonomopoulos &lt;apoikos@debian.org&gt; (supplier of updated mongodb package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 1.8
Date: Wed, 11 Jan 2017 11:17:56 +0200
Source: mongodb
Binary: mongodb mongodb-server mongodb-clients mongodb-dev
Architecture: source
Version: 1:2.4.10-5+deb8u1
Distribution: jessie
Urgency: medium
Maintainer: Laszlo Boszormenyi (GCS) &lt;gcs@debian.org&gt;
Changed-By: Apollon Oikonomopoulos &lt;apoikos@debian.org&gt;
Description:
 mongodb    - object/document-oriented database (metapackage)
 mongodb-clients - object/document-oriented database (client apps)
 mongodb-dev - object/document-oriented database (development)
 mongodb-server - object/document-oriented database (server package)
Closes: <a href="bugreport.cgi?bug=832908">832908</a> <a href="bugreport.cgi?bug=833087">833087</a>
Changes:
 mongodb (1:2.4.10-5+deb8u1) jessie; urgency=medium
 .
   * Redact key and nonce from auth attempt logs (Closes: #<a href="bugreport.cgi?bug=833087">833087</a>)
   * Backport patch for <a href="https://security-tracker.debian.org/tracker/CVE-2016-6494">CVE-2016-6494</a> from 2.6 (Closes: #<a href="bugreport.cgi?bug=832908">832908</a>)
Checksums-Sha1:
 6ed2b5928e8ed601c25fc19b3efee6dc77d9437a 2811 mongodb_2.4.10-5+deb8u1.dsc
 0105e9282795ed9d780ae5efb6586c9108f0180b 57220 mongodb_2.4.10-5+deb8u1.debian.tar.xz
Checksums-Sha256:
 7c5b1ec310c3167e8cb2f29b62ac625dc1f5432d0ecbe42d92d08aa496cf4a92 2811 mongodb_2.4.10-5+deb8u1.dsc
 9db03eb4de977a690e679edac9a5c0810c11fd15865b3faa203fea3c6cd12b21 57220 mongodb_2.4.10-5+deb8u1.debian.tar.xz
Files:
 f8ee704885bbc85b0ac04d76123c9d43 2811 database optional mongodb_2.4.10-5+deb8u1.dsc
 60bf0e4460a40674ecfd605f2f407381 57220 database optional mongodb_2.4.10-5+deb8u1.debian.tar.xz

-----BEGIN PGP SIGNATURE-----

iQJHBAEBCAAxFiEEPgL9ZlYpWVIRC6uZ9RsYxyAkgiQFAliOgIMTHGFwb2lrb3NA
ZGViaWFuLm9yZwAKCRD1GxjHICSCJFYFD/wJsjZgINOyyHkQstXNQfhtL0yLeG0s
xNAwwP1wAuU/UFkxI77F5yWzHV257Gt5ow/VqaYELkQtftjjjwZMG6LSCcE+Vzk/
yPKGZW2kvPk/K9wrrQiyRmgNc7+IZNdgtC0L68HiH4rZGGhh/E4b1OGgxubmxuBN
Af/aFm3/Yz/kPSkrFmxPm703zYvDrJMcnZA5fCA0WWHnTzA06icqDU6CNt/GM+nB
FjnVzqmewT0NFIFQtBdpPCrJOklYvu9qym2x5zo3rkX8CxVMIIJkFrAbFpVVxMDf
OHJrWtH76sstrgh72FETXnlwM4zbh0liHPgfeN+VuIewvOX8xlNZQvtrCrGLO+UH
4kP4Gaj2NaTcofdPE6cbHsV5HT26y/GwcSmRijyvViemsXrUSEcy8jcLwYwUu3YP
XWCxUNjkRBUwZ2OsqWznZGgKg3wr6WzjuGGYAF2o1GnwyjwGp+EYsfvAFLZZ2Eup
a/IebuSFIUVYbcPz9Z3keV/gIr9zaDCk5LdzXqnjtgfuGPnhIuP6dAblTSyue4q2
ZjiGiE1vAnP50Q0ZLkLSSEwxGLIowjm9j5IoX36JPwooZZ74rCDNH1rfaSYAgaMh
SgyVI71LB60nvgP6UKW3OLtOKnCridEcluCGxzwnLkUedHhBSoGzopLCS/H4TPhS
K1R5m7Nus8AR4A==
=Fa3Z
-----END PGP SIGNATURE-----



</pre>

<div class="msgreceived"><hr><p>
<a name="111"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1511076326 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Sun, 19 Nov 2017 07:25:26 GMT) (<a href="bugreport.cgi?bug=832908;msg=112">full text</a>, <a href="bugreport.cgi?bug=832908;mbox=yes;msg=112">mbox</a>, <a href="#111">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=832908">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:32:35 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
