<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1608539 - (CVE-2020-6793) C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1608539">
<meta property="og:description"
      content="RESOLVED (ishikawa) in MailNews Core - Backend. Last updated 2020-08-08.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="--">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1608539 - (CVE-2020-6793) C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1608539&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1608539">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1608539">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/yui.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/global.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/util.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"flags\":{\"tracking\":{\"cf_status_thunderbird_94\":\"---\",\"cf_tracking_seamonkey257esr\":\"---\",\"cf_status_thunderbird_95\":\"---\",\"cf_tracking_thunderbird_95\":\"---\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_status_seamonkey257esr\":\"---\",\"cf_status_thunderbird_93\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_seamonkey253\":\"---\",\"cf_tracking_thunderbird_93\":\"---\",\"cf_status_thunderbird_esr68\":\"fixed\",\"cf_tracking_thunderbird_94\":\"---\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_status_seamonkey253\":\"---\",\"cf_status_thunderbird_73\":\"fixed\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_tracking_thunderbird_esr68\":\"+\"},\"project\":{\"cf_tracking_firefox_sumo\":\"---\"}},\"comments\":{\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"}},\"types\":[\"tracking\"]}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1608539;
  BUGZILLA.bug_title = '1608539 - (CVE-2020-6793) C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()';
  BUGZILLA.bug_summary = 'C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1608539';
  BUGZILLA.bug_keywords = 'sec-moderate, valgrind',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/field.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/comments.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1608539">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1608539"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1608539 - (CVE-2020-6793) C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="rEzue89jsSewbyaQ8lDdCR7VEpMHwkrgfbTvMNFKp6V9awiWTRdiBuYaWX4JeC5HQ4gcLOjfhaturpvQeYnouCKtBUiaOElZwVInazRskKroVykHx2BYYq5e4QBBC2ZZY7gBTMrnrt1nffhnqfaUPXkO1AIgA9I1YZa6gg2K0KPOjHJXYvRCSCyuzdxvPsTcCMqb97UBMkQJNBNP49KETDZ1qSPWkkv9Af3Xge090MpGQymRUwN6igkQBmrjp9f7">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1608539" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623482-P7bQXK1RkwZzosi4eJJREtiq3Ao6CvOH_HeSxKRIcaI">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1608539" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1608539" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1608539">Bug 1608539</a>
          <span class="edit-hide">(CVE-2020-6793)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2020-01-10 11:53 PST" data-time="1578686037">2 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2020-01-27 04:53 PST" data-time="1580129630">2 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">C-C TB mochitest+valgrind uncovered uninitialized memory access<wbr>.: |m<wbr>_headerstartpos| is not always initialized in ns<wbr>Parse<wbr>Mail<wbr>Message<wbr>State::Finalize<wbr>Headers()</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (MailNews Core :: Backend, defect)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=MailNews%20Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">MailNews Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">MailNews Core</div>
            <div class="description">Mail and news components common to Thunderbird and SeaMonkey</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=MailNews%20Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=MailNews%20Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="MailNews Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=MailNews%20Core&component=Backend#Backend" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Backend
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">MailNews Core :: Backend</div>
            <div class="description">Problems with RDF data sources and application logic.  Most likely, your problem can fit in one of the other components so this component should be rarely used.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=MailNews%20Core&amp;component=Backend&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=MailNews%20Core&amp;component=Backend&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=MailNews%20Core&amp;component=Backend"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="MailNews Core" data-component="Backend"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            All

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            All

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">
          <em>Not set</em>
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (thunderbird_esr68+ fixed, thunderbird73 fixed)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">RESOLVED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            RESOLVED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            Thunderbird 74.0

        </span>
    </div>

  
</div>

    


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">thunderbird_esr68</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_thunderbird_esr68&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_thunderbird_esr68&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">thunderbird73</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_thunderbird_73&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr68</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr68-dirty">
  <select id="cf_tracking_thunderbird_esr68" name="cf_tracking_thunderbird_esr68">
        <option value="+"
          id="v4355_cf_tracking_thunderbird_esr68" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr68-dirty">
  <select id="cf_status_thunderbird_esr68" name="cf_status_thunderbird_esr68">
        <option value="fixed"
          id="v4350_cf_status_thunderbird_esr68" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird73</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_73-dirty">
  <select id="cf_status_thunderbird_73" name="cf_status_thunderbird_73">
        <option value="fixed"
          id="v4556_cf_status_thunderbird_73" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_93-dirty">
  <select id="cf_tracking_thunderbird_93" name="cf_tracking_thunderbird_93">
        <option value="---"
          id="v5262_cf_tracking_thunderbird_93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_93-dirty">
  <select id="cf_status_thunderbird_93" name="cf_status_thunderbird_93">
        <option value="---"
          id="v5256_cf_status_thunderbird_93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_94-dirty">
  <select id="cf_tracking_thunderbird_94" name="cf_tracking_thunderbird_94">
        <option value="---"
          id="v5300_cf_tracking_thunderbird_94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_94-dirty">
  <select id="cf_status_thunderbird_94" name="cf_status_thunderbird_94">
        <option value="---"
          id="v5304_cf_status_thunderbird_94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_95-dirty">
  <select id="cf_tracking_thunderbird_95" name="cf_tracking_thunderbird_95">
        <option value="---"
          id="v5332_cf_tracking_thunderbird_95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_95-dirty">
  <select id="cf_status_thunderbird_95" name="cf_status_thunderbird_95">
        <option value="---"
          id="v5326_cf_status_thunderbird_95" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">seamonkey2.53</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_seamonkey253-dirty">
  <select id="cf_tracking_seamonkey253" name="cf_tracking_seamonkey253">
        <option value="---"
          id="v3334_cf_tracking_seamonkey253" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_seamonkey253-dirty">
  <select id="cf_status_seamonkey253" name="cf_status_seamonkey253">
        <option value="---"
          id="v3338_cf_status_seamonkey253" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">seamonkey2.57esr</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_seamonkey257esr-dirty">
  <select id="cf_tracking_seamonkey257esr" name="cf_tracking_seamonkey257esr">
        <option value="---"
          id="v3594_cf_tracking_seamonkey257esr" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_seamonkey257esr-dirty">
  <select id="cf_status_seamonkey257esr" name="cf_status_seamonkey257esr">
        <option value="---"
          id="v3588_cf_status_seamonkey257esr" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: ishikawa, Assigned: ishikawa)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_32503" ><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=32503" > <span class="fna">ishikawa</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_32503" ><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=32503" > <span class="fna">ishikawa</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-triage_owner" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            ---

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="5">5 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
          <h3 class="module-subtitle" id="module-references-subtitle">
            (Blocks 1 open bug)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list edit-show" id="field-dependson" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
        ---
        </span>
    </div>

  
</div><div class="field bug-list" id="field-blocked"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_NEW"
   title="NEW - (META) Hidden issues of xpcshell test of C-C TB (hidden because they don't get printed if the test succeeds)."
   href="/show_bug.cgi?id=1592860">1592860</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area."
   href="/show_bug.cgi?id=1609607">CVE-2020-6792</a>
      </div>

        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1608539&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1608539">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: sec-moderate, valgrind)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2020-6793

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a>, 
          <a href="/buglist.cgi?keywords=valgrind&amp;resolution=---">valgrind</a>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status_whiteboard" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">---
        </span>
    </div>

  
</div>

    

    

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_flags" style="display:none"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="This bug should be considered by thunderbird-drivers and developers as high-value and worthy of design &amp; review attention if a contributor offers a patch." for="flag_type-598">wanted-thunderbird</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-598-dirty">
      <select id="flag_type-598" name="flag_type-598"
        title="This bug should be considered by thunderbird-drivers and developers as high-value and worthy of design &amp; review attention if a contributor offers a patch."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Include a summary of changes made by this bug in the release notes." for="flag_type-893">relnote</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-893-dirty">
      <select id="flag_type-893" name="flag_type-893"
        title="Include a summary of changes made by this bug in the release notes."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (6 files, 3 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9120154">valgrind-xpctest-check.patch</a>
        </div>
        <div>
            <a href="#c0" class="attach-time activity-ref"><span class="rel-time" title="2020-01-10 11:53 PST" data-time="1578686037">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div></span>
        </div>
        <div class="attach-info">8.24 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9120154&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9120154&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9120154">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9121141">Output mentioned in comment 6</a>
        </div>
        <div>
            <a href="#c7" class="attach-time activity-ref"><span class="rel-time" title="2020-01-15 12:02 PST" data-time="1579118531">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div></span>
        </div>
        <div class="attach-info">381.76 KB,
          text/plain        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9121141&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9121143">valgrind-xpctest-check.patch (take 2)</a>
        </div>
        <div>
            <a href="#c8" class="attach-time activity-ref"><span class="rel-time" title="2020-01-15 12:06 PST" data-time="1579118784">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div></span>
        </div>
        <div class="attach-info">10.52 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9121143&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9121143&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9121143">Splinter Review</a>
    </tr>
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9121228">Output mentioned in comment 10.</a>
        </div>
        <div>
            <a href="#c11" class="attach-time activity-ref"><span class="rel-time" title="2020-01-15 22:37 PST" data-time="1579156667">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div></span>
        </div>
        <div class="attach-info">415.49 KB,
          text/plain        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9121228&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9122300">patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.</a>
        </div>
        <div>
            <a href="#c14" class="attach-time activity-ref"><span class="rel-time" title="2020-01-22 02:31 PST" data-time="1579689098">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div></span>
        </div>
        <div class="attach-info">10.81 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9122300&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9122300&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122300">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9122915">1608539-v2.patch</a>
        </div>
        <div>
            <a href="#c20" class="attach-time activity-ref"><span class="rel-time" title="2020-01-24 08:41 PST" data-time="1579884108">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_36541" ><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div></span>
        </div>
        <div class="attach-info">3.83 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9122915&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9122915&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122915">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9122925">1608539-v3.patch</a>
        </div>
        <div>
            <a href="#c22" class="attach-time activity-ref"><span class="rel-time" title="2020-01-24 09:14 PST" data-time="1579886096">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_36541" ><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div></span>
        </div>
        <div class="attach-info">3.83 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_101158" ><span class="fn">mkmelin</span>
</div>:
              <a href="#a1268518_101158"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1579886096"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9122925&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9122925&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9123029">Reformatted Kai's patch.</a>
        </div>
        <div>
            <a href="#c25" class="attach-time activity-ref"><span class="rel-time" title="2020-01-24 21:05 PST" data-time="1579928720">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div></span>
        </div>
        <div class="attach-info">4.03 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9123029&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9123029&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=9123165">1608539-v3c.patch</a>
        </div>
        <div>
            <a href="#c29" class="attach-time activity-ref"><span class="rel-time" title="2020-01-27 03:33 PST" data-time="1580124795">2 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_36541" ><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div></span>
        </div>
        <div class="attach-info">3.83 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_36541" ><span class="fn">KaiE</span>
</div>:
              <a href="#c29"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1580124795"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_101158" ><span class="fn">mkmelin</span>
</div>:
              <a href="#a1695838_101158"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1580129827"
            >
              approval-comm-beta+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_101158" ><span class="fn">mkmelin</span>
</div>:
              <a href="#a2136583_101158"
                  class="flag-name-status rel-time-title activity-ref"
                  title="2 years ago"
              data-time="1580129827"
            >
              approval-comm-esr68+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=9123165&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=9123165&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123165">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="x4BfcRwl74RCgNz7RQ5wPZic4jtO2gB6iTMkl98WWeKXfNQq">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="14585526" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" ><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-10 11:53 PST" data-time="1578686037">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1608539&amp;comment_id=14585526"
     title="1 revision">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9120154"
         class="attachment patch"
         data-id="9120154" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="valgrind-xpctest-check.patch">
      <meta itemprop="contentSize" content="8437">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9120154">
          <a class="link" href="attachment.cgi?id=9120154&amp;action=diff">
        <span id="att-9120154-description" itemprop="description">valgrind-xpctest-check.patch</span></a>
        — <a href="attachment.cgi?id=9120154&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9120154">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-0" data-comment-id="14585526" data-ismarkdown="true" ><p>The subject says it all<br>
|m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()</p>
<p>The unitinitialized reference happens at<br>
<a href="https://searchfox.org/comm-central/source/mailnews/local/src/nsParseMailbox.cpp#1223" rel="nofollow">https://searchfox.org/comm-central/source/mailnews/local/src/nsParseMailbox.cpp#1223</a></p>
<p>I found this by running xpcshell-tests under valgrind.</p>
<p>If m_headerstartpos is not properly initialized, literally anything goes.<br>
Header parsing, etc. get all screwed up.</p>
<p>The symptom of strange display of message in a message pane that shows only blank or in the middle of header, etc. could be at least partially explained by this bug. (Maybe not all the cases.)</p>
<p>I detected the issue using valgrind,  and then began dumping m_headerstartpos after I set</p>
<pre><code>export MALLOC_CHECK_=3
export MALLOC_PERTURB_=0x5A
</code></pre>
<p>in my environment. GNU libc malloc fills the uninitialized malloc&#39;ed area with 0xA5.<br>
Thus it is rather easy to find it in an otherwise normal dump.</p>
<pre><code>cf. From man mallopt.

       M_PERTURB (since glibc 2.4)
              If this parameter is set to a nonzero value, then bytes of allocated memory  (other  than  alloca‐
              tions  via calloc(3)) are initialized to the complement of the value in the least significant byte
              of value, and when allocated memory is released using free(3), the freed  bytes  are  set  to  the
              least  significant  byte  of value.  This can be useful for detecting errors where programs incor‐
              rectly rely on allocated memory being initialized to zero, or reuse values in memory that has  al‐
              ready been freed.
   ...
       MALLOC_PERTURB_
              Controls the same parameter as mallopt() M_PERTURB.

</code></pre>
<p>The tests that trigger and not trigger the symptoms in C-C portion of xpcshell-tests are as follows.<br>
This is the output from egrep &quot;(nrun-xpcshell-original.sh|a5a5a5a5)&quot; log1155-xpcshell.txt<br>
log1155-xpcshell.txt being the log output.</p>
<pre><code>+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/components/src/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/modules/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/protocols/irc/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/protocols/skype/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/chat/protocols/xmpp/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/common/saxparser/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/common/test/xpcshell
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/ldap/xpcom/tests/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/base/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/components/enterprisepolicies/tests/xpcshell
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/components/extensions/test/xpcshell
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mail/components/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/addrbook/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/base/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/compose/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/db/gloda/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/db/msgdb/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/extensions/bayesian-spam-filter/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/extensions/mdn/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/extensions/newsblog/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/imap/test/unit
 1:14.92 pid:109013 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus-&gt;value =0x0x55788019a046,m_headers.GetBuffer()=0x557880199fe0, m_envelope_pos=0x0
 2:17.25 pid:110314 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus-&gt;value =0x0x557082978326,m_headers.GetBuffer()=0x5570829782c0, m_envelope_pos=0x0
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/import/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/intl/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/jsaccount/test/unit
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/local/test/unit
 0:09.37 pid:111723 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus-&gt;value =0x0x5645cf9c8621,m_headers.GetBuffer()=0x5645cf9c85b0, m_envelope_pos=0x0
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/mime/jsmime/test
+ bash -vx /home/ishikawa/bin/nrun-xpcshell-original.sh --sequential --verbose comm/mailnews/mime/test/unit

</code></pre>
<p>I inserted the dump of m_headerstartpos using the patch in the attached file.</p>
<p>I have not fully analyzed WHEN/HOW the uninitialized access happens. But I suspect this has something to do with malformed or missing headers.<br>
I don&#39;t want to see some script kiddies sending out such messages en masse to disrupt TB users, thus setting the security flag.<br>
Once we can be sure this is of minor issue, then we can unflag it.</p>
<p>TIA</p>
</div></div><div class="change-set" id="c1"><div class="comment" data-id="14585544" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" ><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" ><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-10 12:04 PST" data-time="1578686674">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-1" data-comment-id="14585544" data-ismarkdown="true" ><p>Oh, BTW, I notice that the hash calculation touches uninitialized memory region. The last hunk in the attached diff is for investigating this.<br>
I knew that for a long time. But I let it pass since it is not unusual for some hash functions to<br>
calculate the value using 4 or 8 octets at a time, and thus if we have interesting data which has a length of not multiple of 4, we may end up<br>
accessing the last few uninitialized octets of a word: this happens in zip/unzip operation during |make mozmill| test<br>
and I have suppressed the warning from valgrind after investigation revealed that it is a non-issue.</p>
<p>However, with this uninitialized memory access issue at hand, I investigated a bit more, and I now realized that uninitialized access during hash calcluation  MAY end up generating message-ID for a message which does not have it to be attached a non-unique message ID.: that is, the message ID varies each time it is generated because of random data in uninitiailized memory. (Correct me if I am wrong here.)</p>
<p>This may happen when you import a message in an individual file and the message lacks a message ID.<br>
If you include it in multiple folders, the same message will have a different message ID in different folders. So this may not be optimal.<br>
But the practical impact of having the message with different message ID  is not that great if I am not mistaken again.</p>
<p><em>HOWEVER</em>, during investigation, I have noticed a glaring uninitialized memory creation and access in the code which I will report later. I am overwhelmed at what is going on and not sure where the problem begins, even.</p>
</div></div><div class="change-set" id="a815_32503"><div class="change" id="aa815_32503">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a815_32503"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_32503" id="a815_32503"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a815_32503"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a815_32503">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a815_32503">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-10 12:07 PST" data-time="1578686852">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - (META) Hidden issues of xpcshell test of C-C TB (hidden because they don't get printed if the test succeeds)."
   href="/show_bug.cgi?id=1592860">1592860</a></div></div></div><div class="change-set" id="c2"><div class="comment" data-id="14585558" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a815_32503"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a815_32503"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-10 12:14 PST" data-time="1578687253">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1608539&amp;comment_id=14585558"
     title="2 revisions">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-2" data-comment-id="14585558" data-ismarkdown="true" ><p>I should probably mention this in the separate bug for the hash calculation (but the problem seems to be entangled somehow)., but<br>
the dump of hash area shows this:</p>
<pre><code> 1:19.22 pid:109069 {debug} Dump:tmp_buf: totalsize = 1024
 1:19.22 pid:109069 0x00:   f  r  o  m	:     y	 @  y  .  y 00 NL  t  o	 :
 1:19.22 pid:109069 0x10:      x  @  x	.  x 00 NL  s  u  b  j	e  c  t	 :
 1:19.22 pid:109069 0x20:      d  o  w	n  l  o	 a  d	  o  n	   d  e	 m
 1:19.22 pid:109069 0x30:   a  n  d	p  r  o	 b  l  e  m 00 NL  d  a	 t
 1:19.22 pid:109069 0x40:   e  :     F	r  i  ,	    0  1     J	a  n	 2
 1:19.22 pid:109069 0x50:   0  1  0	1  2  :	 0  0	  -  0	5  0  0 00
 1:19.22 pid:109069 0x60:  NL  c  o  n	t  e  n	 t  -  t  y  p	e  :	 m
 1:19.22 pid:109069 0x70:   u  l  t  i	p  a  r	 t  /  m  i  x	e  d  ;
 1:19.22 pid:109069 0x80:   b  o  u  n	d  a  r	 y  =  &quot;  -  -	-  -  P	 a
 1:19.22 pid:109069 0x90:   r  t  0  +	&quot; 00  &quot; 00 NL a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x00:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x10:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x20:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x30:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x40:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x50:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x60:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x70:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x80:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x90:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x00:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x10:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.22 pid:109069 0x20:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x30:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x40:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x50:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x60:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x70:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x80:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x90:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x00:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x10:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x20:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x30:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x40:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x50:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x60:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x70:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x80:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0x90:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xA0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xB0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xC0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xD0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xE0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5
 1:19.23 pid:109069 0xF0:  a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5 a5

</code></pre>
<p>That is the buffer sent for header-related processing has totallength (= GetSize()) of 1024 and filled with uninitialized value and the<br>
hash is calculated over this area. Something is horribly wrong...</p>
</div></div><div class="change-set" id="c3"><div class="comment" data-id="14585584" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a815_32503"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a815_32503"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-10 12:43 PST" data-time="1578689004">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1608539&amp;comment_id=14585584"
     title="2 revisions">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-3" data-comment-id="14585584" data-ismarkdown="true" ><p>Re the tests that cause the uninitialized access of |m_headerstartpos| is as follows.<br>
I am afraid that I ran the test partially before I ran the full test and so the same error was reported twice.<br>
(Note in the following like &#39;||&#39; actually is | followed by \ and then |. I don&#39;t know what hides the \ . Is this part of HTML spec?)<br>
Edited excerpt from egrep &quot;(nrun-xpcshell-original.sh|a5a5a5a5|| Starting)&quot; log1155-xpcshell.txt</p>
<pre><code> 1:14.90 INFO comm/mailnews/imap/test/unit/test_offlinePlayback.js | Starting doOfflineOps
 1:14.92 pid:109013 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus-&gt;value =0x0x55788019a046,m_headers.GetBuffer()=0x557880199fe0, m_envelope_pos=0x0

 2:17.23 INFO comm/mailnews/imap/test/unit/test_offlinePlayback.js | Starting doOfflineOps
 2:17.25 pid:110314 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus-&gt;value =0x0x557082978326,m_headers.GetBuffer()=0x5570829782c0, m_envelope_pos=0x0

 0:07.12 INFO comm/mailnews/local/test/unit/test_movemailDownload.js | Starting streamMessages
 0:09.37 pid:111723 (debug) VALGRIND: m_headerstartpos = 0xa5a5a5a5a5a5a5a5, mozstatus-&gt;value =0x0x5645cf9c8621,m_headers.GetBuffer()=0x5645cf9c85b0, m_envelope_pos=0x0

</code></pre>
</div></div><div class="change-set" id="a56485_29811"><div class="change" id="aa56485_29811">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_29811" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/20697ca69672a5276f24a34382a1ddbd?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_29811" id="a56485_29811"><a class="email " href="/user_profile?user_id=29811" > <span class="fna">Wayne Mery (:wsmwk)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a56485_29811"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a56485_29811">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a56485_29811">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-11 03:35 PST" data-time="1578742522">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Component: Untriaged &rarr; Backend</div><div class="change">Product: Thunderbird &rarr; MailNews Core</div></div></div><div class="change-set" id="c4"><div class="comment" data-id="14589102" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a56485_29811"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-13 06:23 PST" data-time="1578925429">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-4" data-comment-id="14589102" data-ismarkdown="true" ><p>I have spent 20 minutes trying to understand this code, but it&#39;s tricky.</p>
<p>However, it seems that most variables are initialized to zero in nsParseMailMessageState::Clear(), but m_headerstartpos isn&#39;t.<br>
Can we add m_headerstartpos=0; and see if you can still reproduce the issue?</p>
</div></div><div class="change-set" id="c5"><div class="comment" data-id="14594485" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a56485_29811"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 10:20 PST" data-time="1579112434">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-5" data-comment-id="14594485" data-ismarkdown="true" ><p>(In reply to Kai Engert (:KaiE:) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c4" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment #4</a>)</p>
<blockquote>
<p>I have spent 20 minutes trying to understand this code, but it&#39;s tricky.</p>
<p>However, it seems that most variables are initialized to zero in nsParseMailMessageState::Clear(), but m_headerstartpos isn&#39;t.<br>
Can we add m_headerstartpos=0; and see if you can still reproduce the issue?</p>
</blockquote>
<p>Yes, the code is tricky. I tried understand when/why the part where the uninitialized m_headerstartpos was referenced, but have not figured out yet.</p>
<p>Let me try the bandage of setting &quot;m_headerstartpos=0&quot; and how it goes.</p>
</div></div><div class="change-set" id="c6"><div class="comment" data-id="14594653" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a56485_29811"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 11:52 PST" data-time="1579117921">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-6" data-comment-id="14594653" data-ismarkdown="true" ><p>uninitialized m_headerstartpos is gone by the initialization and it does not seem to have ill-effect on other xpcshell-tests for now.<br>
So I will watch out over mochitest in the future.</p>
<p><em>HOWEVER</em>, the issue I found regarding the strange access to uninitialized buffer area mentioned in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c2" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment 2</a> is still there.<br>
So we need more investigation. Before I file a bug on that I found this uninitialized buffer reference happens in many tests.<br>
I am attaching the output of the following command (log1157-xpcshell.txt is a local log filename).</p>
<pre><code>egrep &quot;({debug} Dump:tmp_buf: totalsize = |nrun-xpcshell-original.sh|Failed: 1| a5|a5a5a5a5|\| Starting)&quot; log1157-xpcshell.txt 
</code></pre>
<p>(Again, the double | | before |Starting| is actuall |, , then followed by another |.,</p>
<p>Basically, when TB hits the code path to print |totalsize =| in my added dump statement, the code tries to reference a buffer whose last part is filled with uninitialized octet, and if I am not mistaken, the hash is calculated on these uninitialized areas instead of the properly initialized data.<br>
I am not sure if the length passed to the routine is bogus or the buffer initialization code (that fills buffer with the header data) is bogus.</p>
<p>I have not had the time to look at the failing tests, but there must be  a pattern to the data which triggered the uninitialized buffer access problem.</p>
<p>I wish the code here is simplified. There seems to be a code that tries to add &quot;&gt;&quot; if a mail text starts a line with &quot;From&quot;, but the code tries to be clever and obscures the entire logic.: I don&#39;t mind a simple memcpy() to shift the line image to create a place to insert the &quot;&gt;&quot; at the beginning<br>
so that we have a simpler easy-to-understand code.: Clever and hard-to-understand code is written once, but future developers and debuggers need to understand whatever tricky stuff THOUSAND times. TB community today cannot afford that kind of clever code any more (!).</p>
</div></div><div class="change-set" id="c7"><div class="comment" data-id="14594662" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a56485_29811"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 12:02 PST" data-time="1579118531">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9121141"
         class="attachment"
         data-id="9121141" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="file_1608539.txt">
      <meta itemprop="contentSize" content="390923">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9121141" itemprop="contentUrl">
        <span id="att-9121141-description" itemprop="description">Output mentioned in comment 6</span></a>
        — <a href="attachment.cgi?id=9121141&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-7" data-comment-id="14594662" data-ismarkdown="true" ><p>The output mentioned in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c6" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment 6</a>.<br>
I have slightly changed the routine to dump the buffer.<br>
I will upload the changed patch after this message.</p>
</div></div><div class="change-set" id="c8"><div class="comment" data-id="14594664" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a56485_29811"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 12:06 PST" data-time="1579118784">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9121143"
         class="attachment patch"
         data-id="9121143" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="valgrind-xpctest-check.patch">
      <meta itemprop="contentSize" content="10776">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9121143">
          <a class="link" href="attachment.cgi?id=9121143&amp;action=diff">
        <span id="att-9121143-description" itemprop="description">valgrind-xpctest-check.patch (take 2)</span></a>
        — <a href="attachment.cgi?id=9121143&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9121143">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-8" data-comment-id="14594664" data-ismarkdown="true" ><p>I think instead of passing GetSize() of buffer area that stores the header data to md5-&gt;Update routine to calculate the MD5 and end up with a missing message ID, we should probably keep track of the ending position (NUL code at the end of the last header line when the headers are parsed and stored.: NEWLINE, CR LF seem to be replaced with NUL in the code) and pass the length from the m_headerstartpos to that position.<br>
However, as the forgotten initializaton of m_headestartpos shows there seem to a can of worms around  here.</p>
</div><div class="activity"><div class="change">Assignee: nobody &rarr; ishikawa</div></div></div><div class="change-set" id="c9"><div class="comment" data-id="14594666" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a56485_29811"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a56485_29811"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 12:07 PST" data-time="1579118829">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-9" data-comment-id="14594666" data-ismarkdown="true" ><p>I will file a separate bug VERY SOON NOW. If someone feels like doing that, I am fine.</p>
</div></div><div class="change-set" id="a469918_32503"><div class="change" id="aa469918_32503">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a469918_32503"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_32503" id="a469918_32503"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a469918_32503"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a469918_32503">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a469918_32503">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 22:25 PST" data-time="1579155955">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area."
   href="/show_bug.cgi?id=1609607">CVE-2020-6792</a></div></div></div><div class="change-set" id="c10"><div class="comment" data-id="14595220" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a469918_32503"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a469918_32503"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 22:35 PST" data-time="1579156532">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-10" data-comment-id="14595220" data-ismarkdown="true" ><p>I filed <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1609607" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.">bug 1609607</a> for the uninitialized buffer access.</p>
<p>Just to be complete, an addition here.<br>
The output mentioned in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c6" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment 6</a> is a bit misleading about the files that show the symptom of uninitialized buffer access.<br>
The following command identifies the files better.</p>
<pre><code>egrep &quot;(TEST_START|{debug} Dump:tmp_buf: totalsize = |nrun-xpcshell-original.sh|Failed: 1| a5|a5a5a5a5|\| Starting)&quot; log1157-xpcshell.txt 
</code></pre>
</div></div><div class="change-set" id="c11"><div class="comment" data-id="14595222" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a469918_32503"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a469918_32503"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-15 22:37 PST" data-time="1579156667">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9121228"
         class="attachment"
         data-id="9121228" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="file_1608539.txt">
      <meta itemprop="contentSize" content="425461">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=9121228" itemprop="contentUrl">
        <span id="att-9121228-description" itemprop="description">Output mentioned in comment 10.</span></a>
        — <a href="attachment.cgi?id=9121228&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-11" data-comment-id="14595222" data-ismarkdown="true" ><p>This is the output mentioned in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c10" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment 10</a>.</p>
<p>One thing I noticed is that there are two cases where the totalsize is 3072 ( = 1024 x 3) and<br>
have uninitialized area at the end.</p>
</div></div><div class="change-set" id="c12"><div class="comment" data-id="14596201" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a469918_32503"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a469918_32503"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-16 10:31 PST" data-time="1579199477">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-12" data-comment-id="14596201" data-ismarkdown="true" ><p>Kai: can you take a stab at a security severity rating for this bug from a Tbird POV</p>
</div><div class="activity"><div class="change">Flags: needinfo?(kaie)</div></div></div><div class="change-set" id="a839335_36541"><div class="change" id="aa839335_36541">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_36541" id="a839335_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a839335_36541"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a839335_36541">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a839335_36541">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-20 05:02 PST" data-time="1579525372">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(kaie)</span></div><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a></div></div></div><div class="change-set" id="c13"><div class="comment" data-id="14601616" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a839335_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-20 07:29 PST" data-time="1579534170">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-13" data-comment-id="14601616" data-ismarkdown="true" ><p>Hi, I am testing the local patch for this bug and bug  <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1609607" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.">bug 1609607</a>.<br>
I think I will bundle the patch for this bug in the patch for <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1609607" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.">bug 1609607</a> since they seem to be interwinded in a sutble way<br>
and should be applied together at once to avoid uninitialized memory access.</p>
<p>BTW, uninitialized case of m_headerstartpos seemed to happen only when m_envelope_pos was equal to 0.<br>
So this suggests that the mail (header + mainbody text) start at the beginning of a file.<br>
Setting m_headerstartpos = 0 might have been in OK in that sense.<br>
(However, I am still a bit uneasy.: I am not sure if this takes care of a possible &quot;From - &quot; line at the beginning, etc.)</p>
</div></div><div class="change-set" id="c14"><div class="comment" data-id="14604845" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a839335_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-22 02:31 PST" data-time="1579689098">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9122300"
         class="attachment patch"
         data-id="9122300" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="valgrind-xpctest-check-take-2.patch">
      <meta itemprop="contentSize" content="11066">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9122300">
          <a class="link" href="attachment.cgi?id=9122300&amp;action=diff">
        <span id="att-9122300-description" itemprop="description">patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.</span></a>
        — <a href="attachment.cgi?id=9122300&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122300">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-14" data-comment-id="14604845" data-ismarkdown="true" ><p>Here is the patch.</p>
<p>I intentionally kept the comment line very generic so as not to alert that this is related the sec-low bugs.</p>
<p>The submission to try server is<br>
<a href="https://treeherder.mozilla.org/#/jobs?repo=try-comm-central&amp;revision=a6155fa767844fad63ded1d0a57e33ee746b7f03" rel="nofollow">https://treeherder.mozilla.org/#/jobs?repo=try-comm-central&amp;revision=a6155fa767844fad63ded1d0a57e33ee746b7f03</a></p>
<p>I don&#39;t see any new problems here.<br>
(I accidentally put another patch, but it is a no brainer and should not cause any issue with the problem mentioned here.)</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9122300&amp;action=edit"
           title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length."
           class=""
        >Attachment #9122300</a> -
        Flags: review?(kaie)</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="14604907" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_176914" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/5d8a5792e976c4d61a6651fb4e71c84f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_176914" id="a839335_36541"><a class="email disabled" href="/user_profile?user_id=176914" > <span class="fna">Jorg K (CEST = GMT+2)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-22 03:15 PST" data-time="1579691739">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="14604907">Comment on <span class=""><a href="/attachment.cgi?id=9122300" name="attach_9122300" title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.">attachment 9122300</a> <a href="/attachment.cgi?id=9122300&amp;action=edit" title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.">[details]</a> <a href="/attachment.cgi?id=9122300&amp;action=diff" title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122300'>[review]</a>
patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.

Review of <span class=""><a href="/attachment.cgi?id=9122300" name="attach_9122300" title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.">attachment 9122300</a> <a href="/attachment.cgi?id=9122300&amp;action=edit" title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.">[details]</a> <a href="/attachment.cgi?id=9122300&amp;action=diff" title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122300'>[review]</a>:
-----------------------------------------------------------------

You need to run clang-format on this. I've just briefly looked at all the formal problems.

::: mailnews/local/src/nsParseMailbox.cpp
&#64;&#64; +53,5 &#64;&#64;
<span class="quote">&gt;  #include &quot;nsIOutputStream.h&quot;
&gt;  #include &quot;mozilla/Attributes.h&quot;
&gt;  #include &quot;mozilla/Logging.h&quot;
&gt;  
&gt; +#ifdef USEVALGRIND</span >

Do we want that? Is that a define provided by the Mozilla environment?

&#64;&#64; +436,5 &#64;&#64;
<span class="quote">&gt;      // at the start of each new message, update the progress bar
&gt;      UpdateProgressPercent();
&gt;      return rv;
&gt; +  } else {
&gt; +#ifdef DEBUG</span >

That can go one line up if we need the debug code at all.

&#64;&#64; +439,5 &#64;&#64;
<span class="quote">&gt; +  } else {
&gt; +#ifdef DEBUG
&gt; +    // You can uncomment the following line to trace the New Envelope handling.
&gt; +    // fflush(stdout);
&gt; +    // fprintf(stderr,&quot;{debug} StartNewEnvelope was not called in HandleLine();\n&quot;);</span >

Can we find a consistent format for the debug output, something like here:
<a rel="nofollow" href="https://searchfox.org/comm-central/search?q=seekdebug&amp;case=false&amp;regexp=false&amp;path">https://searchfox.org/comm-central/search?q=seekdebug&amp;case=false&amp;regexp=false&amp;path</a>=
Besides, this is only comment.

&#64;&#64; +566,5 &#64;&#64;
<span class="quote">&gt;    for (uint32_t i = 0; i &lt; m_customDBHeaders.Length(); i++)
&gt;      m_customDBHeaderValues[i].length = 0;
&gt;  
&gt; +  m_headerstartpos = 0;
&gt; +  </span >

Trailing space.

&#64;&#64; +592,5 &#64;&#64;
<span class="quote">&gt;  }
&gt;  
&gt;  NS_IMETHODIMP nsParseMailMessageState::SetEnvelopePos(uint64_t aEnvelopePos) {
&gt; +#ifdef DEBUG 
&gt; +  fprintf(stderr, &quot;SetEnvelopePos called. aEnvelopPos=%&quot; PRIu64 &quot;\n&quot;, aEnvelopePos);</span >

Trailing space, and see comment above.

&#64;&#64; +613,5 &#64;&#64;
<span class="quote">&gt;  }
&gt;  
&gt;  NS_IMETHODIMP nsParseMailMessageState::ParseAFolderLine(const char *line,
&gt;                                                          uint32_t lineLength) {
&gt; +#ifdef DEBUG </span >

Trailing space and see comment above.

&#64;&#64; +618,5 &#64;&#64;
<span class="quote">&gt; +  fprintf(stderr,&quot;{debug}ParseAFolderLine: lineLength=%&quot; PRIu32 &quot;\n&quot;, lineLength);
&gt; +#endif
&gt; +
&gt; +  // XXX I realize the return value of ParseAFolderLilne is completely ignored :-(
&gt; +  // We should honor the return value of ParseFolderLine(). No? </span >

Trailing space.

&#64;&#64; +626,5 &#64;&#64;
<span class="quote">&gt;  nsresult nsParseMailMessageState::ParseFolderLine(const char *line,
&gt;                                                    uint32_t lineLength) {
&gt;    nsresult rv;
&gt;  
&gt; +#ifdef DEBUG </span >

Trailing space and see comment above.

&#64;&#64; +860,5 &#64;&#64;
<span class="quote">&gt;  // We've found a new envelope to parse.
&gt;  nsresult nsParseMailMessageState::StartNewEnvelope(const char *line,
&gt;                                                     uint32_t lineLength) {
&gt; +#ifdef DEBUG
&gt; +  fprintf(stderr, &quot;{debug} StartNewEnvelope called. lineLength=%&quot; PRIu32 &quot;\n&quot;, lineLength);</span >

Please no {debug}.

&#64;&#64; +1247,5 &#64;&#64;
<span class="quote">&gt;            (nsMsgPriorityValue)((flags &amp; nsMsgMessageFlags::Priorities) &gt;&gt; 13);
&gt;        flags &amp;= ~nsMsgMessageFlags::Priorities;
&gt;      }
&gt; +#ifdef USEVALGRIND
&gt; +    fprintf(stderr,&quot;(debug) VALGRIND: &quot;);</span >

Here we have (debug).

&#64;&#64; +1411,5 &#64;&#64;
<span class="quote">&gt; +            // generation takes place also in hash table operation to
&gt; +            // compare messages to see if they match (!?)
&gt; +
&gt; +            int alloclen = ((m_headers.GetBufferPos() + 8 - 1) / 8 ) * 8; // multiple of 8
&gt; +            void * tmp_buf = (void *)PR_Malloc(alloclen);</span >

PR_Malloc already returns void*

&#64;&#64; +1420,5 &#64;&#64;
<span class="quote">&gt; +#ifdef DEBUG
&gt; +            {
&gt; +              int totalsize = m_headers.GetBufferPos();
&gt; +              int i;
&gt; +              fprintf(stderr, &quot;{debug} Dump:tmp_buf: totalsize = %&quot;</span >

{debug}</pre></div><div class="change-set" id="c16"><div class="comment" data-id="14605504" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a839335_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-22 08:39 PST" data-time="1579711187">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-16" data-comment-id="14605504" data-ismarkdown="true" ><p>I will run the clang-format locally and try to make the debug print out consistent.</p>
</div></div><div class="change-set" id="c17"><div class="comment" data-id="14605525" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_176914" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/5d8a5792e976c4d61a6651fb4e71c84f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_176914" id="a839335_36541"><a class="email disabled" href="/user_profile?user_id=176914" > <span class="fna">Jorg K (CEST = GMT+2)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-22 08:45 PST" data-time="1579711546">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-17" data-comment-id="14605525" data-ismarkdown="true" ><p>There&#39;s also debugging code in the patches in <a class="bz_bug_link
          bz_status_NEW" href="/show_bug.cgi?id=1242030" title="NEW - Consolidated patch set from bug 1122698, bug 1134527, bug 1134529, bug 1174500">bug 1242030</a>, mostly like <code>fprintf(stderr, &quot;(debug) ...</code>. Personally I&#39;d add as little debug as possible, and I&#39;m wondering what the <code>#ifdef USEVALGRIND</code> is about. As far as I can see, that&#39;s not a flag the environment supports, so there is no point adding that code.</p>
</div></div><div class="change-set" id="c18"><div class="comment" data-id="14605740" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a839335_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-22 10:02 PST" data-time="1579716167">2 years ago</span>
          </div>&bull;
<div class="change-revisions">
  <a href="/page.cgi?id=comment-revisions.html&amp;bug_id=1608539&amp;comment_id=14605740"
     title="1 revision">Edited</a>
</div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-18" data-comment-id="14605740" data-ismarkdown="true" ><p>(In reply to Jorg K (GMT+1) (PTO to 26th Jan 2020, sporadically reading bugmail) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c17" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment #17</a>)</p>
<blockquote>
<p>There&#39;s also debugging code in the patches in <a class="bz_bug_link
          bz_status_NEW" href="/show_bug.cgi?id=1242030" title="NEW - Consolidated patch set from bug 1122698, bug 1134527, bug 1134529, bug 1174500">bug 1242030</a>, mostly like <code>fprintf(stderr, &quot;(debug) ...</code>. Personally I&#39;d add as little debug as possible, and I&#39;m wondering what the <code>#ifdef USEVALGRIND</code> is about. As far as I can see, that&#39;s not a flag the environment supports, so there is no point adding that code.</p>
</blockquote>
<p>Good catch.<br>
ifdef USEVALGRIND is a cruft left over when I used valgrind-supplied library routines to check the &quot;definedness&quot; of a memory location.<br>
I no longer use it in this patch. So I am creating a new local patch in which I took it out and also changed one other |ifdef USEVALGRIND| to |ifdef DEBUG|.<br>
The patched source tree was checked by |../mach clang-flow -p ...|.</p>
<p>As for  <a class="bz_bug_link
          bz_status_NEW" href="/show_bug.cgi?id=1242030" title="NEW - Consolidated patch set from bug 1122698, bug 1134527, bug 1134529, bug 1174500">bug 1242030</a>, I have tried a bit locally to reduce the open-coded debug printf statement by creating a few macros and functions so as not to clutter up the original source code superficially, but the problem is that there are SIMPLY TWO FEW CHECKS for low-level I/O failures,<br>
I need to add the check and somehow transmits the failure status to the calling routine (and to the debugging console or human debugger) in some way or the other.: This latter dump is very important for me to analyze OSX and Windows failure because I am developing patches under linux only. Any I/O related failures that I can&#39;t reproduce under linux need to be analyzed by dumping detailed context on tryserver runs.<br>
Anyway, I will try a bit more in that angle.</p>
<p>Thank you again for your comments.</p>
</div></div><div class="change-set" id="c19"><div class="comment" data-id="14609792" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a839335_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a839335_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 08:40 PST" data-time="1579884040">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-19" data-comment-id="14609792" data-ismarkdown="true" ><p>Hello Chiaki, thanks a lot for your very helpful detective work and preparation. However, I&#39;d prefer to drop most of your patch, and use a fix that is as minimal as possible. I think most of such debugging output should usually be limited to local testing, or to times of active development, but should be avoided for production code.</p>
<p>I&#39;ve also done some testing. I&#39;ve temporarily used a local boolean variable, to track whether m_headerstartpos has already been initialized, or not, at the time we reach the delta value calculation.</p>
<p>I found an existing test in which m_headerstartpos remains uninitialized:<br>
comm/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js</p>
<p>Then I&#39;ve set m_headerstartpos=0, then I looked at the calculation of the delta value. It correctly calculated the beginning of the X-Mozilla-Status value. I conclude that the calculation code is correct, and we simply have to init m_headerstartpos=0.</p>
<p>Looking at the code that uses the delta value, it seems like past developers had already noticed some problems with that value, given their (hack) attempt to avoid very large values.</p>
<p>I suggest that we add an assertion, so we can notice in debug builds and tests if the delta has an unexpected big value.</p>
<p>I&#39;m renaming the delta variable slightly, to ensure its purpose is more obvious.</p>
<p>Only if mozStatus is non-null the current code calculates the delta value, however, if the delta value is smaller then 0xffff, it&#39;s always used to call m_newMsgHdr-&gt;SetStatusOffset(delta). That seems wrong, I suggest to only set the value if mozStatus is non-null.</p>
<p>Also, it&#39;s unclear why the code calls SetStatusOffset(), and then immediately reads the value back using GetStatusOffset(). I don&#39;t know if there&#39;s a desired side effect triggered by that, but I&#39;m guessing this was done simply for the following assertion check. I&#39;ve added a TODO comment to research this detail, and potentially remove those lines. But for now, I want to focus on the bug, and those lines cannot hurt, even if they are unnecessary.</p>
<p>Regarding the change from GetSize() to GetBufferPos(), it seems you&#39;re right, but let&#39;s move this change to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1609607" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.">bug 1609607</a>.</p>
</div></div><div class="change-set" id="a1198050_36541"><div class="change" id="aa1198050_36541">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_36541" id="a1198050_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1198050_36541"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1198050_36541">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1198050_36541">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 08:41 PST" data-time="1579884087">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9122300&amp;action=edit"
           title="patch to initialize m_headerstartpos and avoid uninitialized memory access by using correct buffer length."
           class=""
        >Attachment #9122300</a> -
        Flags: <span class="activity-deleted">review?(kaie)</span></div></div></div><div class="change-set" id="c20"><div class="comment" data-id="14609794" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a1198050_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 08:41 PST" data-time="1579884108">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9122915"
         class="attachment patch obsolete"
         data-id="9122915" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1608539-v2.patch">
      <meta itemprop="contentSize" content="3920">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9122915">
          <a class="link" href="attachment.cgi?id=9122915&amp;action=diff">
        <span id="att-9122915-description" itemprop="description">1608539-v2.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=9122915&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122915">Splinter Review</a>
      </div>
    </div></div><div class="change-set" id="c21"><div class="comment" data-id="14609801" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a1198050_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 08:47 PST" data-time="1579884471">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="14609801">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9122915" name="attach_9122915" title="1608539-v2.patch">attachment 9122915</a> <a href="/attachment.cgi?id=9122915&amp;action=edit" title="1608539-v2.patch">[details]</a> <a href="/attachment.cgi?id=9122915&amp;action=diff" title="1608539-v2.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122915'>[review]</a>
1608539-v2.patch

Chiaki, is my assumption correct, that this patch is sufficient to avoid the valgrind warning?

Magnus, this patch doesn't change the calculation. The primary fix is to provide a variable initialization. In addition, it renames a variable, it adds an assertion, it changes the &quot;if statement&quot; for using the delta value, and adds a comment.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9122915&amp;action=edit"
           title="1608539-v2.patch"
           class=""
        >Attachment #9122915</a> -
        Flags: review?(mkmelin+mozilla)</div><div class="change">
        <a href="/attachment.cgi?id=9122915&amp;action=edit"
           title="1608539-v2.patch"
           class=""
        >Attachment #9122915</a> -
        Flags: feedback?(ishikawa)</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="14609834" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a1198050_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 09:14 PST" data-time="1579886096">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9122925"
         class="attachment patch obsolete"
         data-id="9122925" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1608539-v3.patch">
      <meta itemprop="contentSize" content="3920">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9122925">
          <a class="link" href="attachment.cgi?id=9122925&amp;action=diff">
        <span id="att-9122925-description" itemprop="description">1608539-v3.patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=9122925&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9122925">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-22" data-comment-id="14609834" data-ismarkdown="true" ><p>fix typo</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9122915&amp;action=edit"
           title="1608539-v2.patch"
           class=""
        >Attachment #9122915</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=9122915&amp;action=edit"
           title="1608539-v2.patch"
           class=""
        >Attachment #9122915</a> -
        Flags: <span class="activity-deleted">review?(mkmelin+mozilla)</span></div><div class="change">
        <a href="/attachment.cgi?id=9122915&amp;action=edit"
           title="1608539-v2.patch"
           class=""
        >Attachment #9122915</a> -
        Flags: <span class="activity-deleted">feedback?(ishikawa)</span></div><div class="change">
        <a href="/attachment.cgi?id=9122925&amp;action=edit"
           title="1608539-v3.patch"
           class=""
        >Attachment #9122925</a> -
        Flags: review?(mkmelin+mozilla)</div><div class="change">
        <a href="/attachment.cgi?id=9122925&amp;action=edit"
           title="1608539-v3.patch"
           class=""
        >Attachment #9122925</a> -
        Flags: feedback?(ishikawa)</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="14610055" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a1198050_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 11:27 PST" data-time="1579894023">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-23" data-comment-id="14610055" data-ismarkdown="true" ><p>(In reply to Kai Engert (:KaiE:) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c19" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment #19</a>)</p>
<blockquote>
<p>Hello Chiaki, thanks a lot for your very helpful detective work and preparation. However, I&#39;d prefer to drop most of your patch, and use a fix that is as minimal as possible. I think most of such debugging output should usually be limited to local testing, or to times of active development, but should be avoided for production code.</p>
</blockquote>
<p>Thank you for the new patch.</p>
<p>I will take note.</p>
<blockquote>
<p>Regarding the change from GetSize() to GetBufferPos(), it seems you&#39;re right, but let&#39;s move this change to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1609607" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.">bug 1609607</a>.</p>
</blockquote>
<p>Actually, I meant to put the patch to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1609607" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: MD5 is calculated accessing uninitialized area.">bug 1609607</a> and not this one. My mistake.</p>
<p>(In reply to Kai Engert (:KaiE:) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c21" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment #21</a>)</p>
<blockquote>
<p>Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9122915" name="attach_9122915" title="1608539-v2.patch">attachment 9122915</a> <a href="/attachment.cgi?id=9122915&amp;action=edit" title="1608539-v2.patch">[details]</a> <a href="/attachment.cgi?id=9122915&amp;action=diff" title="1608539-v2.patch">[diff]</a></span> <a href="/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122915">[review]</a><br>
1608539-v2.patch</p>
<p>Chiaki, is my assumption correct, that this patch is sufficient to avoid the<br>
valgrind warning?</p>
</blockquote>
<p>I will check the valgrind run with this patch.</p>
<blockquote>
<p>Magnus, this patch doesn&#39;t change the calculation. The primary fix is to<br>
provide a variable initialization. In addition, it renames a variable, it<br>
adds an assertion, it changes the &quot;if statement&quot; for using the delta value,<br>
and adds a comment.</p>
</blockquote>
</div></div><div class="change-set" id="c24"><div class="comment" data-id="14610179" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_176914" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/5d8a5792e976c4d61a6651fb4e71c84f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_176914" id="a1198050_36541"><a class="email disabled" href="/user_profile?user_id=176914" > <span class="fna">Jorg K (CEST = GMT+2)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 13:13 PST" data-time="1579900381">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="14610179">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9122925" name="attach_9122925" title="1608539-v3.patch">attachment 9122925</a> <a href="/attachment.cgi?id=9122925&amp;action=edit" title="1608539-v3.patch">[details]</a> <a href="/attachment.cgi?id=9122925&amp;action=diff" title="1608539-v3.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122925'>[review]</a>
1608539-v3.patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=9122925" name="attach_9122925" title="1608539-v3.patch">attachment 9122925</a> <a href="/attachment.cgi?id=9122925&amp;action=edit" title="1608539-v3.patch">[details]</a> <a href="/attachment.cgi?id=9122925&amp;action=diff" title="1608539-v3.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122925'>[review]</a>:
-----------------------------------------------------------------

::: mailnews/local/src/nsParseMailbox.cpp
&#64;&#64; +1222,5 &#64;&#64;
<span class="quote">&gt;        flags &amp;= ~nsMsgMessageFlags::Priorities;
&gt;      }
&gt; +
&gt; +    deltaToMozStatus = m_headerstartpos +
&gt; +                       (mozstatus-&gt;value - m_headers.GetBuffer()) -</span >

Did clang-format indent it this way? I could be wrong but I think it would have just indented that by four spaces.</pre></div><div class="change-set" id="c25"><div class="comment" data-id="14610547" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a1198050_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-24 21:05 PST" data-time="1579928720">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9123029"
         class="attachment patch obsolete"
         data-id="9123029" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="file_1608539.txt">
      <meta itemprop="contentSize" content="4131">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9123029">
          <a class="link" href="attachment.cgi?id=9123029&amp;action=diff">
        <span id="att-9123029-description" itemprop="description">Reformatted Kai's patch.</span></a> (obsolete)
        — <a href="attachment.cgi?id=9123029&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123029">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-25" data-comment-id="14610547" data-ismarkdown="true" ><p>(In reply to Jorg K (GMT+1) (no longer working on Thunderbird) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c24" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment #24</a>)</p>
<blockquote>
<p>Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9122925" name="attach_9122925" title="1608539-v3.patch">attachment 9122925</a> <a href="/attachment.cgi?id=9122925&amp;action=edit" title="1608539-v3.patch">[details]</a> <a href="/attachment.cgi?id=9122925&amp;action=diff" title="1608539-v3.patch">[diff]</a></span> <a href="/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9122925">[review]</a><br>
...<br>
Did clang-format indent it this way? I could be wrong but I think it would<br>
have just indented that by four spaces.</p>
</blockquote>
<p>I noticed that too.</p>
<p>I am testing the attached reformatted patch on local PC.<br>
The whole valgrind run of xpcshell-test takes about 13 hours on my PC and it is into 6 hours now. So I can report the result either tonight or tomorrow morning.<br>
(I kept the indentation of Kai&#39;s comment. clang-format is too eager to fill comment.<br>
It should have a simple escape such as the paragraph starting with &quot;leading space //\n&quot; and<br>
ending with &quot;leading space//\n&quot; is untouched. |// clang-format off|, and |// clang-format on| are rather ugly. But I digress. )</p>
<p>BTW, I have submitted <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1611567" title="RESOLVED FIXED - C-C TB uninitialized memory access during xpcshell-test, comm/mailnews/base/test/unit/test_postPluginFilters.js, Uninitialised value was created by a stack allocation at ... nsMsgDatabase::SetStringPropertyByHdr(nsIMsgDBHdr*, char const*, char const*)">bug 	1611567</a>, another uninitialized memory access. I wonder if people can take a look at it.<br>
(There is yet another one from my xpcshell-test. I have yet to determine if that is a false positive or not. Probably positive one.)</p>
<p>TIA</p>
</div></div><div class="change-set" id="c26"><div class="comment" data-id="14610662" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a1198050_36541"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a1198050_36541"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-25 02:39 PST" data-time="1579948747">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-26" data-comment-id="14610662" data-ismarkdown="true" ><p>Good news. With Kai&#39;s patch (reformatted), there was no uninitialized memory access due to the bug here, it seems.<br>
I could execute more tests by enlarging timeout values for some more tests by inserting</p>
<pre><code>requesttimeoutfactor = 25

</code></pre>
<p>or similar or larger values in relevant xpcshell.ini .<br>
But that resulted in longer test elapsed time obviously since I need to run tests sequentially so as not to intermix the logs from different tests.<br>
From my log: it took almost 13 hours.</p>
<pre><code>ENDING_SEC=$(date +&quot;%s&quot;)
++ date +%s
+ ENDING_SEC=1579944658
echo &quot;It took &quot; $((ENDING_SEC - STARTING_SEC)) &quot; seconds.&quot;
+ echo &#39;It took &#39; 46823 &#39; seconds.&#39;
It took  46823  seconds.

</code></pre>
<p>It would be  nice to have a valgrind run under linux x64 from time to time.: maybe twice a month on the tryserver.</p>
</div></div><div class="change-set" id="a1268518_101158"><div class="change" id="aa1268518_101158">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_101158" id="a1268518_101158"><img src="https://secure.gravatar.com/avatar/18eb16a976feb4b40d839c5e9036bc3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_101158" id="a1268518_101158"><a class="email " href="/user_profile?user_id=101158" > <span class="fna">Magnus Melin [:mkmelin]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1268518_101158"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1268518_101158">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1268518_101158">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-25 04:15 PST" data-time="1579954555">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9122925&amp;action=edit"
           title="1608539-v3.patch"
           class=""
        >Attachment #9122925</a> -
        Flags: review?(mkmelin+mozilla) &rarr; review+</div></div></div><div class="change-set" id="a1268541_101158"><div class="change" id="aa1268541_101158">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_101158" id="a1268541_101158"><img src="https://secure.gravatar.com/avatar/18eb16a976feb4b40d839c5e9036bc3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_101158" id="a1268541_101158"><a class="email " href="/user_profile?user_id=101158" > <span class="fna">Magnus Melin [:mkmelin]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1268541_101158"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1268541_101158">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1268541_101158">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-25 04:16 PST" data-time="1579954578">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: NEW &rarr; ASSIGNED</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=valgrind&amp;resolution=---">valgrind</a></div></div></div><div class="change-set" id="c27"><div class="comment" data-id="14610718" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_176914" id="a1268541_101158"><img src="https://secure.gravatar.com/avatar/5d8a5792e976c4d61a6651fb4e71c84f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_176914" id="a1268541_101158"><a class="email disabled" href="/user_profile?user_id=176914" > <span class="fna">Jorg K (CEST = GMT+2)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-25 04:42 PST" data-time="1579956128">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="14610718">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9123029" name="attach_9123029" title="Reformatted Kai's patch.">attachment 9123029</a> <a href="/attachment.cgi?id=9123029&amp;action=edit" title="Reformatted Kai's patch.">[details]</a> <a href="/attachment.cgi?id=9123029&amp;action=diff" title="Reformatted Kai's patch.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9123029'>[review]</a>
Reformatted Kai's patch.

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=9123029" name="attach_9123029" title="Reformatted Kai's patch.">attachment 9123029</a> <a href="/attachment.cgi?id=9123029&amp;action=edit" title="Reformatted Kai's patch.">[details]</a> <a href="/attachment.cgi?id=9123029&amp;action=diff" title="Reformatted Kai's patch.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9123029'>[review]</a>:
-----------------------------------------------------------------

::: mailnews/local/src/nsParseMailbox.cpp
&#64;&#64; +1318,3 &#64;&#64;
<span class="quote">&gt;          if (!m_IgnoreXMozillaStatus) {  // imap doesn't care about
&gt;                                          // X-MozillaStatus
&gt; +          // clang-format off</span >

Please don't use clang-format off for comments!

It's bad enough we use it here and there for code, but there is no need for comments. Just let is reformat the comment, and tweak it later if it needs further tweaking.</pre></div><div class="change-set" id="c28"><div class="comment" data-id="14610880" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32503" id="a1268541_101158"><img src="https://secure.gravatar.com/avatar/72bd216fb7996e1571c307d45a70add2?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32503" id="a1268541_101158"><a class="email " href="/user_profile?user_id=32503" > <span class="fna">ISHIKAWA, Chiaki</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-25 11:33 PST" data-time="1579980839">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-28" data-comment-id="14610880" data-ismarkdown="true" ><p>(In reply to Jorg K (GMT+1) (no longer working on Thunderbird) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed" href="/show_bug.cgi?id=1608539#c27" title="RESOLVED FIXED - C-C TB mochitest+valgrind uncovered uninitialized memory access.: |m_headerstartpos| is not always initialized in nsParseMailMessageState::FinalizeHeaders()">comment #27</a>)</p>
<blockquote>
<p>Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=9123029" name="attach_9123029" title="Reformatted Kai&#39;s patch.">attachment 9123029</a> <a href="/attachment.cgi?id=9123029&amp;action=edit" title="Reformatted Kai&#39;s patch.">[details]</a> <a href="/attachment.cgi?id=9123029&amp;action=diff" title="Reformatted Kai&#39;s patch.">[diff]</a></span> <a href="/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9123029">[review]</a><br>
Reformatted Kai&#39;s patch.</p>
<h2>Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=9123029" name="attach_9123029" title="Reformatted Kai&#39;s patch.">attachment 9123029</a> <a href="/attachment.cgi?id=9123029&amp;action=edit" title="Reformatted Kai&#39;s patch.">[details]</a> <a href="/attachment.cgi?id=9123029&amp;action=diff" title="Reformatted Kai&#39;s patch.">[diff]</a></span> <a href="/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9123029">[review]</a>:</h2>
<p>::: mailnews/local/src/nsParseMailbox.cpp<br>
@@ +1318,3 @@</p>
<blockquote>
<pre><code>     if (!m_IgnoreXMozillaStatus) {  // imap doesn&#39;t care about
                                     // X-MozillaStatus
</code></pre>
<ul>
<li>
<pre><code>     // clang-format off
</code></pre>
</li>
</ul>
</blockquote>
<p>Please don&#39;t use clang-format off for comments!</p>
<p>It&#39;s bad enough we use it here and there for code, but there is no need for<br>
comments. Just let is reformat the comment, and tweak it later if it needs<br>
further tweaking.</p>
</blockquote>
<p>I can certainly revert the change re comment part.</p>
<p>However, I am a bit puzzled from the general point of workflow.</p>
<p>The way we use |../mach clang-format -p comm/directories.../... | for formatting patch is<br>
after we modify source files (or apply a patch to them) then run the clang-format and then<br>
create the patch. Correct?</p>
<p>But this means that<br>
(1)  if we run clang-format and come up with a change/patch and commit it, then<br>
(2) tweak the comment part manually later as you suggest<br>
and commit the change to the comment part later,<br>
(3) the next person who touches the file and runs clang-format  for her/his patch<br>
will mess up the  comment part modified manually in the step (2) above, does&#39;t s/he?</p>
<p>In  a big file after an extensive change, comments may be messed up from the viewpoint of<br>
clang-format.<br>
And to be frank, someone doing the gratuitous formatting as scout-like cleanup,<br>
when s/he notices the incorrect formatting of a previous patch as s/he creates a new patch<br>
for further modification, may not care about letting clang-format to<br>
fill the previous patch&#39;s comment paragraphs and mess up the intention of previous<br>
manual tweak.</p>
<p>This is not an ideal work flow IMHO.</p>
<p>Just a thought, but I find this an obnoxious problem.</p>
</div></div><div class="change-set" id="c29"><div class="comment" data-id="14613115" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1268541_101158"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a1268541_101158"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-27 03:33 PST" data-time="1580124795">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-9123165"
         class="attachment patch"
         data-id="9123165" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1608539-v3c.patch">
      <meta itemprop="contentSize" content="3921">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=9123165">
          <a class="link" href="attachment.cgi?id=9123165&amp;action=diff">
        <span id="att-9123165-description" itemprop="description">1608539-v3c.patch</span></a>
        — <a href="attachment.cgi?id=9123165&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1608539&attachment=9123165">Splinter Review</a>
      </div>
    </div>

  
    <div
        class="comment-text markdown-body "
        id="ct-29" data-comment-id="14613115" data-ismarkdown="true" ><p>Chiaki, thank you very much for confirming the patch passes valgrind.</p>
<p>This updated patch reformats all of the code, including the comment.<br>
No functional change, carrying forward r=mkmelin.</p>
</div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9122925&amp;action=edit"
           title="1608539-v3.patch"
           class=""
        >Attachment #9122925</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=9123029&amp;action=edit"
           title="Reformatted Kai's patch."
           class=""
        >Attachment #9123029</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=9122925&amp;action=edit"
           title="1608539-v3.patch"
           class=""
        >Attachment #9122925</a> -
        Flags: <span class="activity-deleted">feedback?(ishikawa)</span></div><div class="change">
        <a href="/attachment.cgi?id=9123165&amp;action=edit"
           title="1608539-v3c.patch"
           class=""
        >Attachment #9123165</a> -
        Flags: review+</div></div></div><div class="change-set" id="c30"><div class="comment" data-id="14613206" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1268541_101158"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a1268541_101158"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-27 04:53 PST" data-time="1580129630">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-30" data-comment-id="14613206" data-ismarkdown="true" ><p><a href="https://hg.mozilla.org/comm-central/rev/3420cbdab2ab5f2627d5a8535790bf65222f7928" rel="nofollow">https://hg.mozilla.org/comm-central/rev/3420cbdab2ab5f2627d5a8535790bf65222f7928</a></p>
</div><div class="activity"><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2020-01-27 04:53 PST" data-time="1580129630">2 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; Thunderbird 74.0</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="14613209" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1268541_101158"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a1268541_101158"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-27 04:57 PST" data-time="1580129827">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="14613209">Comment on <span class=""><a href="/attachment.cgi?id=9123165" name="attach_9123165" title="1608539-v3c.patch">attachment 9123165</a> <a href="/attachment.cgi?id=9123165&amp;action=edit" title="1608539-v3c.patch">[details]</a> <a href="/attachment.cgi?id=9123165&amp;action=diff" title="1608539-v3c.patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1608539&amp;attachment=9123165'>[review]</a>
1608539-v3c.patch

[Approval Request Comment]
User impact if declined: out-of-bounds memory access, random location

Asking for approval now, so I don't forget.
But let's bake for a few days on c-c, before making the approval decision.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9123165&amp;action=edit"
           title="1608539-v3c.patch"
           class=""
        >Attachment #9123165</a> -
        Flags: approval-comm-esr68?</div><div class="change">
        <a href="/attachment.cgi?id=9123165&amp;action=edit"
           title="1608539-v3c.patch"
           class=""
        >Attachment #9123165</a> -
        Flags: approval-comm-beta?</div></div></div><div class="change-set" id="a1695838_101158"><div class="change" id="aa1695838_101158">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_101158" id="a1695838_101158"><img src="https://secure.gravatar.com/avatar/18eb16a976feb4b40d839c5e9036bc3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_101158" id="a1695838_101158"><a class="email " href="/user_profile?user_id=101158" > <span class="fna">Magnus Melin [:mkmelin]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1695838_101158"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1695838_101158">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1695838_101158">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-30 02:57 PST" data-time="1580381875">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9123165&amp;action=edit"
           title="1608539-v3c.patch"
           class=""
        >Attachment #9123165</a> -
        Flags: approval-comm-beta? &rarr; approval-comm-beta+</div></div></div><div class="change-set" id="a1698237_36541"><div class="change" id="aa1698237_36541">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a1698237_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_36541" id="a1698237_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1698237_36541"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1698237_36541">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1698237_36541">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-30 03:37 PST" data-time="1580384274">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_thunderbird_esr68&amp;o1=isnotempty">status-thunderbird_esr68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_thunderbird_esr68&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_thunderbird_esr68&amp;o1=isnotempty">tracking-thunderbird_esr68</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_thunderbird_esr68&amp;o1=equals&amp;v1=%3F">?</a></div></div></div><div class="change-set" id="a1700669_578488"><div class="change" id="aa1700669_578488">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_578488" id="a1700669_578488"><img src="https://secure.gravatar.com/avatar/6822db445808be789b12cfae22d118dc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_578488" id="a1700669_578488"><a class="email " href="/user_profile?user_id=578488" > <span class="fna">Tom Ritter [:tjr] (ni? for response to CVE/sec-approval/advisories/etc)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1700669_578488"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1700669_578488">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1700669_578488">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-30 04:18 PST" data-time="1580386706">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2020-6793</div></div></div><div class="change-set" id="a1704484_1689"><div class="change" id="aa1704484_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a1704484_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a1704484_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1704484_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1704484_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a1704484_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-30 05:22 PST" data-time="1580390521">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: mail-core-security &rarr; core-security-release</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="14617566" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_63411" id="a1704484_1689"><img src="https://secure.gravatar.com/avatar/6085829a04926c21ff576e0bbd1cb417?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_63411" id="a1704484_1689"><a class="email " href="/user_profile?user_id=63411" > <span class="fna">Rob Lemley [:rjl]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-01-30 15:13 PST" data-time="1580426018">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-32" data-comment-id="14617566" data-ismarkdown="true" ><p>Thunderbird 73.0b2:<br>
<a href="https://hg.mozilla.org/releases/comm-beta/rev/432f80bf179a1c0d7d5996ed879397cfa263918d" rel="nofollow">https://hg.mozilla.org/releases/comm-beta/rev/432f80bf179a1c0d7d5996ed879397cfa263918d</a></p>
</div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_thunderbird_73&amp;o1=isnotempty">status-thunderbird73</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_thunderbird_73&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a2136583_101158"><div class="change" id="aa2136583_101158">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_101158" id="a2136583_101158"><img src="https://secure.gravatar.com/avatar/18eb16a976feb4b40d839c5e9036bc3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_101158" id="a2136583_101158"><a class="email " href="/user_profile?user_id=101158" > <span class="fna">Magnus Melin [:mkmelin]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2136583_101158"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2136583_101158">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a2136583_101158">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-02-04 05:23 PST" data-time="1580822620">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=9123165&amp;action=edit"
           title="1608539-v3c.patch"
           class=""
        >Attachment #9123165</a> -
        Flags: approval-comm-esr68? &rarr; approval-comm-esr68+</div></div></div><div class="change-set" id="c33"><div class="comment" data-id="14624566" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a2136583_101158"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_36541" id="a2136583_101158"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-02-05 05:36 PST" data-time="1580909806">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-33" data-comment-id="14624566" data-ismarkdown="true" ><p>Rob, can you please land into comm-esr68? Thanks.</p>
</div><div class="activity"><div class="change">Flags: needinfo?(rob)</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="14625766" data-no="34"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_63411" id="a2136583_101158"><img src="https://secure.gravatar.com/avatar/6085829a04926c21ff576e0bbd1cb417?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_63411" id="a2136583_101158"><a class="email " href="/user_profile?user_id=63411" > <span class="fna">Rob Lemley [:rjl]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-02-05 18:29 PST" data-time="1580956165">2 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-34" data-comment-id="14625766" data-ismarkdown="true" ><p>comm-esr68:<br>
<a href="https://hg.mozilla.org/releases/comm-esr68/rev/1437b560776b" rel="nofollow">https://hg.mozilla.org/releases/comm-esr68/rev/1437b560776b</a></p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(rob)</span></div></div></div><div class="change-set" id="a2270235_63411"><div class="change" id="aa2270235_63411">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_63411" id="a2270235_63411"><img src="https://secure.gravatar.com/avatar/6085829a04926c21ff576e0bbd1cb417?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_63411" id="a2270235_63411"><a class="email " href="/user_profile?user_id=63411" > <span class="fna">Rob Lemley [:rjl]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2270235_63411"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2270235_63411">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a2270235_63411">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-02-05 18:31 PST" data-time="1580956272">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_thunderbird_esr68&amp;o1=isnotempty">status-thunderbird_esr68</a>:
          <a href="/buglist.cgi?f1=cf_status_thunderbird_esr68&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_thunderbird_esr68&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a2315859_36541"><div class="change" id="aa2315859_36541">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_36541" id="a2315859_36541"><img src="https://secure.gravatar.com/avatar/d11b5b0a468ed960df1fde3c304d3580?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_36541" id="a2315859_36541"><a class="email " href="/user_profile?user_id=36541" > <span class="fna">Kai Engert (:KaiE:)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2315859_36541"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2315859_36541">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a2315859_36541">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-02-06 07:11 PST" data-time="1581001896">2 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_thunderbird_esr68&amp;o1=isnotempty">tracking-thunderbird_esr68</a>:
          <a href="/buglist.cgi?f1=cf_tracking_thunderbird_esr68&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_thunderbird_esr68&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="a18218601_1689"><div class="change" id="aa18218601_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a18218601_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a18218601_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a18218601_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a18218601_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1608539#a18218601_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2020-08-08 09:37 PDT" data-time="1596904638">1 year ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1608539&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>