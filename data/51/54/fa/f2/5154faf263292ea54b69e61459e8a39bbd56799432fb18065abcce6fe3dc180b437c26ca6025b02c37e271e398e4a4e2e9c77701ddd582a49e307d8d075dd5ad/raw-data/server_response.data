<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title>jasper: memory allocation failure in jas_malloc (jas_malloc.c) | agostino&#039;s blog</title>
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="https://blogs.gentoo.org/ago/wp-content/themes/kde-breathe/style.css" />
<link rel="pingback" href="https://blogs.gentoo.org/ago/xmlrpc.php" />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="agostino&#039;s blog &raquo; Feed" href="https://blogs.gentoo.org/ago/feed/" />
<link rel="alternate" type="application/rss+xml" title="agostino&#039;s blog &raquo; Comments Feed" href="https://blogs.gentoo.org/ago/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="agostino&#039;s blog &raquo; jasper: memory allocation failure in jas_malloc (jas_malloc.c) Comments Feed" href="https://blogs.gentoo.org/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/blogs.gentoo.org\/ago\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.4.1"}};
			/*! This file is auto-generated */
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='openid-css'  href='https://blogs.gentoo.org/ago/wp-content/plugins/openid/f/openid.css?ver=519' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='https://blogs.gentoo.org/ago/wp-includes/css/dist/block-library/style.min.css?ver=5.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='toc-screen-css'  href='https://blogs.gentoo.org/ago/wp-content/plugins/table-of-contents-plus/screen.min.css?ver=2002' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='https://blogs.gentoo.org/ago/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.1' type='text/css' media='all' />
<link rel='stylesheet' id='easy_table_style-css'  href='https://blogs.gentoo.org/ago/wp-content/plugins/easy-table/themes/default/style.css?ver=1.8' type='text/css' media='all' />
<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'></script>
<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-content/plugins/openid/f/openid.js?ver=519'></script>
<link rel='https://api.w.org/' href='https://blogs.gentoo.org/ago/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://blogs.gentoo.org/ago/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://blogs.gentoo.org/ago/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='jasper: NULL pointer dereference in jp2_colr_destroy (jp2_cod.c)' href='https://blogs.gentoo.org/ago/2016/10/18/jasper-null-pointer-dereference-in-jp2_colr_destroy-jp2_cod-c/' />
<link rel='next' title='jasper: two NULL pointer dereference in bmp_getdata (bmp_dec.c) (Incomplete fix for CVE-2016-8690)' href='https://blogs.gentoo.org/ago/2016/10/18/jasper-two-null-pointer-dereference-in-bmp_getdata-bmp_dec-c-incomplete-fix-for-cve-2016-8690/' />
<meta name="generator" content="WordPress 5.4.1" />
<link rel="canonical" href="https://blogs.gentoo.org/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/" />
<link rel='shortlink' href='https://blogs.gentoo.org/ago/?p=756' />
<link rel="alternate" type="application/json+oembed" href="https://blogs.gentoo.org/ago/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.gentoo.org%2Fago%2F2016%2F10%2F18%2Fjasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://blogs.gentoo.org/ago/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.gentoo.org%2Fago%2F2016%2F10%2F18%2Fjasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c%2F&#038;format=xml" />
            <link rel="alternate" media="only screen and (max-width: 640px)" href="https://blogs.gentoo.org/ago/#article/756" />

	<!-- Clean Archives Reloaded v3.2.0 | http://www.viper007bond.com/wordpress-plugins/clean-archives-reloaded/ -->
	<style type="text/css">.car-collapse .car-yearmonth { cursor: s-resize; } </style>
	<script type="text/javascript">
		/* <![CDATA[ */
			jQuery(document).ready(function() {
				jQuery('.car-collapse').find('.car-monthlisting').hide();
				jQuery('.car-collapse').find('.car-monthlisting:first').show();
				jQuery('.car-collapse').find('.car-yearmonth').click(function() {
					jQuery(this).next('ul').slideToggle('fast');
				});
				jQuery('.car-collapse').find('.car-toggler').click(function() {
					if ( 'Expand All' == jQuery(this).text() ) {
						jQuery(this).parent('.car-container').find('.car-monthlisting').show();
						jQuery(this).text('Collapse All');
					}
					else {
						jQuery(this).parent('.car-container').find('.car-monthlisting').hide();
						jQuery(this).text('Expand All');
					}
					return false;
				});
			});
		/* ]]> */
	</script>

		<style type="text/css" id="wp-custom-css">
			/*
Welcome to Custom CSS!

To learn how this works, see http://wp.me/PEmnE-Bt
*/
#access li:hover &gt; a,
#access ul ul :hover &gt; a {
	color: red;
}		</style>
		</head>

<body class="post-template-default single single-post postid-756 single-format-standard">
<div id="wrapper" class="hfeed">
	<div id="header">
            <div class="plasma-left" ></div>
            <div class="plasma-center" >
		<div id="masthead">
			<div id="branding" role="banner">
				<div id="site-title">
					<span>
						<a href="https://blogs.gentoo.org/ago/" title="agostino&#039;s blog" rel="home">agostino&#039;s blog</a>
					</span>
				</div>
				<div id="site-description">my fuzzer always find something more than your&#8230;</div>

										<img src="https://blogs.gentoo.org/ago/files/2015/06/cropped-modificato2.png" width="882" height="165" alt="" /> 
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu-header"><ul id="menu-top-menu" class="menu"><li id="menu-item-285" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-285"><a href="https://blogs.gentoo.org/ago/agostino_sarubbo/">About me</a></li>
<li id="menu-item-286" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-286"><a href="https://blogs.gentoo.org/ago/contact/">Contact</a></li>
<li id="menu-item-287" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-287"><a href="https://blogs.gentoo.org/ago/advisories/">Advisories</a></li>
</ul></div>			</div><!-- #access -->
		</div><!-- #masthead -->
            </div><!-- #plasma-center -->
            <div class="plasma-right" ></div>
	    <div class="plasma-left-bottom" ></div>
            <div class="plasma-bottom" ></div>
            <div class="plasma-right-bottom" ></div>
            <div class="clear" ></div>
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">


				<div id="nav-above" class="navigation">
					<div class="nav-previous"><a href="https://blogs.gentoo.org/ago/2016/10/18/jasper-null-pointer-dereference-in-jp2_colr_destroy-jp2_cod-c/" rel="prev"><span class="meta-nav">&larr;</span> jasper: NULL pointer dereference in jp2_colr_destroy (jp2_cod.c)</a></div>
					<div class="nav-next"><a href="https://blogs.gentoo.org/ago/2016/10/18/jasper-two-null-pointer-dereference-in-bmp_getdata-bmp_dec-c-incomplete-fix-for-cve-2016-8690/" rel="next">jasper: two NULL pointer dereference in bmp_getdata (bmp_dec.c) (Incomplete fix for CVE-2016-8690) <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-above -->
                            <div class="plasma-left-top"></div>
                            <div class="plasma-top"></div>
                            <div class="plasma-right-top"></div>
                            <div class="plasma-post-center" >

				<div id="post-756" class="post-756 post type-post status-publish format-standard hentry category-advisories category-security">
					<h1 class="entry-title">jasper: memory allocation failure in jas_malloc (jas_malloc.c)</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://blogs.gentoo.org/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/" title="4:39 pm" rel="bookmark"><span class="entry-date">October 18, 2016</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="https://blogs.gentoo.org/ago/author/ago/" title="View all posts by ago">ago</a></span>					</div><!-- .entry-meta -->

					<div class="entry-content">
						<p><strong>Description</strong>:<br />
<a href="http://www.ece.uvic.ca/~frodo/jasper/">jasper</a> is an open-source initiative to provide a free software-based reference implementation of the codec specified in the JPEG-2000 Part-1 standard.</p>
<p>Another round of fuzzing on an updated version (1.900.5) revealed a memory allocation failure.</p>
<p>The complete ASan output:</p>
<pre><font size="2"># imginfo -f $FILE
THE BMP FORMAT IS NOT FULLY SUPPORTED!                                                                                                                                                                                                                                         
THAT IS, THE JASPER SOFTWARE CANNOT DECODE ALL TYPES OF BMP DATA.                                                                                                                                                                                                              
IF YOU HAVE ANY PROBLEMS, PLEASE TRY CONVERTING YOUR IMAGE DATA                                                                                                                                                                                                                
TO THE PNM FORMAT, AND USING THIS FORMAT INSTEAD.                                                                                                                                                                                                                              
==18943==ERROR: AddressSanitizer failed to allocate 0x1000002000 (68719484928) bytes of LargeMmapAllocator (error code: 12)                                                                                                                                                    
==18943==Process memory map follows:                                                                                                                                                                                                                                           
        0x000000400000-0x000000520000   /usr/bin/imginfo                                                                                                                                                                                                                       
        0x00000071f000-0x000000720000   /usr/bin/imginfo                                                                                                                                                                                                                       
        0x000000720000-0x000000724000   /usr/bin/imginfo                                                                                                                                                                                                                       
        0x000000724000-0x0000013a6000                                                                                                                                                                                                                                          
        0x00007fff7000-0x00008fff7000                                                                                                                                                                                                                                          
        0x00008fff7000-0x02008fff7000                                                                                                                                                                                                                                          
        0x02008fff7000-0x10007fff8000                                                                                                                                                                                                                                          
        0x600000000000-0x602000000000                                                                                                                                                                                                                                          
        0x602000000000-0x602000010000                                                                                                                                                                                                                                          
        0x602000010000-0x603000000000                                                                                                                                                                                                                                          
        0x603000000000-0x603000010000                                                                                                                                                                                                                                          
        0x603000010000-0x604000000000                                                                                                                                                                                                                                          
        0x604000000000-0x604000010000                                                                                                                                                                                                                                          
        0x604000010000-0x606000000000                                                                                                                                                                                                                                          
        0x606000000000-0x606000010000                                                                                                                                                                                                                                          
        0x606000010000-0x60b000000000                                                                                                                                                                                                                                          
        0x60b000000000-0x60b000010000                                                                                                                                                                                                                                          
        0x60b000010000-0x619000000000                                                                                                                                                                                                                                          
        0x619000000000-0x619000020000                                                                                                                                                                                                                                          
        0x619000020000-0x625000000000                                                                                                                                                                                                                                          
        0x625000000000-0x625000020000                                                                                                                                                                                                                                          
        0x625000020000-0x640000000000                                                                                                                                                                                                                                          
        0x640000000000-0x640000003000                                                                                                                                                                                                                                          
        0x7f4f00738000-0x7f4f03593000                                                                                                                                                                                                                                          
        0x7f4f03593000-0x7f4f035fc000   /usr/lib64/libjpeg.so.62.2.0                                                                                                                                                                                                           
        0x7f4f035fc000-0x7f4f037fb000   /usr/lib64/libjpeg.so.62.2.0                                                                                                                                                                                                           
        0x7f4f037fb000-0x7f4f037fc000   /usr/lib64/libjpeg.so.62.2.0                                                                                                                                                                                                           
        0x7f4f037fc000-0x7f4f037fd000   /usr/lib64/libjpeg.so.62.2.0                                                                                                                                                                                                           
        0x7f4f037fd000-0x7f4f03990000   /lib64/libc-2.22.so                                                                                                                                                                                                                    
        0x7f4f03990000-0x7f4f03b90000   /lib64/libc-2.22.so                                                                                                                                                                                                                    
        0x7f4f03b90000-0x7f4f03b94000   /lib64/libc-2.22.so                                                                                                                                                                                                                    
        0x7f4f03b94000-0x7f4f03b96000   /lib64/libc-2.22.so                                                                                                                                                                                                                    
        0x7f4f03b96000-0x7f4f03b9a000                                                                                                                                                                                                                                          
        0x7f4f03b9a000-0x7f4f03bb0000   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.9.3/libgcc_s.so.1                                                                                                                                                                                 
        0x7f4f03bb0000-0x7f4f03daf000   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.9.3/libgcc_s.so.1                                                                                                                                                                                 
        0x7f4f03daf000-0x7f4f03db0000   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.9.3/libgcc_s.so.1                                                                                                                                                                                 
        0x7f4f03db0000-0x7f4f03db1000   /usr/lib64/gcc/x86_64-pc-linux-gnu/4.9.3/libgcc_s.so.1                                                                                                                                                                                 
        0x7f4f03db1000-0x7f4f03db3000   /lib64/libdl-2.22.so
        0x7f4f03db3000-0x7f4f03fb3000   /lib64/libdl-2.22.so
        0x7f4f03fb3000-0x7f4f03fb4000   /lib64/libdl-2.22.so
        0x7f4f03fb4000-0x7f4f03fb5000   /lib64/libdl-2.22.so
        0x7f4f03fb5000-0x7f4f03fbb000   /lib64/librt-2.22.so
        0x7f4f03fbb000-0x7f4f041bb000   /lib64/librt-2.22.so
        0x7f4f041bb000-0x7f4f041bc000   /lib64/librt-2.22.so
        0x7f4f041bc000-0x7f4f041bd000   /lib64/librt-2.22.so
        0x7f4f041bd000-0x7f4f041d4000   /lib64/libpthread-2.22.so
        0x7f4f041d4000-0x7f4f043d3000   /lib64/libpthread-2.22.so
        0x7f4f043d3000-0x7f4f043d4000   /lib64/libpthread-2.22.so
        0x7f4f043d4000-0x7f4f043d5000   /lib64/libpthread-2.22.so
        0x7f4f043d5000-0x7f4f043d9000
        0x7f4f043d9000-0x7f4f044d6000   /lib64/libm-2.22.so
        0x7f4f044d6000-0x7f4f046d5000   /lib64/libm-2.22.so
        0x7f4f046d5000-0x7f4f046d6000   /lib64/libm-2.22.so
        0x7f4f046d6000-0x7f4f046d7000   /lib64/libm-2.22.so
        0x7f4f046d7000-0x7f4f04891000   /usr/lib64/libjasper.so.1.0.0
        0x7f4f04891000-0x7f4f04a90000   /usr/lib64/libjasper.so.1.0.0
        0x7f4f04a90000-0x7f4f04a94000   /usr/lib64/libjasper.so.1.0.0
        0x7f4f04a94000-0x7f4f04aa3000   /usr/lib64/libjasper.so.1.0.0
        0x7f4f04aa3000-0x7f4f04aac000
        0x7f4f04aac000-0x7f4f04ace000   /lib64/ld-2.22.so
        0x7f4f04c67000-0x7f4f04cc2000
        0x7f4f04cc2000-0x7f4f04ccd000
        0x7f4f04ccd000-0x7f4f04cce000   /lib64/ld-2.22.so
        0x7f4f04cce000-0x7f4f04ccf000   /lib64/ld-2.22.so
        0x7f4f04ccf000-0x7f4f04cd0000
        0x7ffeaeaca000-0x7ffeaeaeb000   [stack]
        0x7ffeaeb8a000-0x7ffeaeb8c000   [vvar]
        0x7ffeaeb8c000-0x7ffeaeb8e000   [vdso]
        0xffffffffff600000-0xffffffffff601000   [vsyscall]
==18943==End of process memory map.
==18943==AddressSanitizer CHECK failed: /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/sanitizer_common/sanitizer_common.cc:183 "((0 &amp;&amp; "unable to mmap")) != (0)" (0x0, 0x0)
    #0 0x4c9ccd in AsanCheckFailed /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/asan/asan_rtl.cc:67
    #1 0x4d0803 in __sanitizer::CheckFailed(char const*, int, char const*, unsigned long long, unsigned long long) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/sanitizer_common/sanitizer_common.cc:159
    #2 0x4d09f1 in __sanitizer::ReportMmapFailureAndDie(unsigned long, char const*, char const*, int, bool) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/sanitizer_common/sanitizer_common.cc:183
    #3 0x4d9a2a in __sanitizer::MmapOrDie(unsigned long, char const*, bool) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/sanitizer_common/sanitizer_posix.cc:122
    #4 0x421dbf in __sanitizer::LargeMmapAllocator::Allocate(__sanitizer::AllocatorStats*, unsigned long, unsigned long) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/asan/../sanitizer_common/sanitizer_allocator.h:1033
    #5 0x421dbf in __sanitizer::CombinedAllocator&lt;__sanitizer::SizeClassAllocator64&lt;105553116266496ul, 4398046511104ul, 0ul, __sanitizer::SizeClassMap, __asan::AsanMapUnmapCallback&gt;, __sanitizer::SizeClassAllocatorLocalCache&lt;__sanitizer::SizeClassAllocator64&lt;105553116266496ul, 4398046511104ul, 0ul, __sanitizer::SizeClassMap, __asan::AsanMapUnmapCallback&gt; &gt;, __sanitizer::LargeMmapAllocator &gt;::Allocate(__sanitizer::SizeClassAllocatorLocalCache&lt;__sanitizer::SizeClassAllocator64&lt;105553116266496ul, 4398046511104ul, 0ul, __sanitizer::SizeClassMap, __asan::AsanMapUnmapCallback&gt; &gt;*, unsigned long, unsigned long, bool, bool) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/asan/../sanitizer_common/sanitizer_allocator.h:1302
    #6 0x421dbf in __asan::Allocator::Allocate(unsigned long, unsigned long, __sanitizer::BufferedStackTrace*, __asan::AllocType, bool) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/asan/asan_allocator.cc:368
    #7 0x421dbf in __asan::asan_malloc(unsigned long, __sanitizer::BufferedStackTrace*) /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/asan/asan_allocator.cc:718
    #8 0x4c0391 in malloc /var/tmp/portage/sys-devel/llvm-3.8.1-r2/work/llvm-3.8.1.src/projects/compiler-rt/lib/asan/asan_malloc_linux.cc:53
    #9 0x7f4f0474e170 in jas_malloc /tmp/portage/media-libs/jasper-1.900.5/work/jasper-1.900.5/src/libjasper/base/jas_malloc.c:117:9
    #10 0x7f4f0474e170 in jas_alloc2 /tmp/portage/media-libs/jasper-1.900.5/work/jasper-1.900.5/src/libjasper/base/jas_malloc.c:141
    #11 0x7f4f04764b4f in bmp_getinfo /tmp/portage/media-libs/jasper-1.900.5/work/jasper-1.900.5/src/libjasper/bmp/bmp_dec.c:297:25
    #12 0x7f4f04764b4f in bmp_decode /tmp/portage/media-libs/jasper-1.900.5/work/jasper-1.900.5/src/libjasper/bmp/bmp_dec.c:132
    #13 0x7f4f0470ef39 in jas_image_decode /tmp/portage/media-libs/jasper-1.900.5/work/jasper-1.900.5/src/libjasper/base/jas_image.c:380:16
    #14 0x4f1686 in main /tmp/portage/media-libs/jasper-1.900.5/work/jasper-1.900.5/src/appl/imginfo.c:188:16
    #15 0x7f4f0381d61f in __libc_start_main /var/tmp/portage/sys-libs/glibc-2.22-r4/work/glibc-2.22/csu/libc-start.c:289
    #16 0x418e68 in _init (/usr/bin/imginfo+0x418e68)
</font></pre>
<p><strong>Affected version:</strong><br />
1.900.5</p>
<p><strong>Fixed version:</strong><br />
1.900.11</p>
<p><strong>Commit fix:</strong><br />
<a href="https://github.com/mdadams/jasper/commit/65536647d380571d1a9a6c91fa03775fb5bbd256">https://github.com/mdadams/jasper/commit/65536647d380571d1a9a6c91fa03775fb5bbd256</a></p>
<p><strong>Credit:</strong><br />
This bug was discovered by Agostino Sarubbo of Gentoo.</p>
<p><strong>CVE:</strong><br />
CVE-2016-8886</p>
<p><strong>Timeline:</strong><br />
2016-10-17: bug discovered<br />
2016-10-17: bug reported to upstream<br />
2016-10-18: blog post about the issue<br />
2016-10-22: upstream released a patch and 1.900.11<br />
2016-10-23: CVE assigned</p>
<p><strong>Note:</strong><br />
This bug was found with <a href="http://lcamtuf.coredump.cx/afl">American Fuzzy Lop</a>.</p>
<p><strong>Permalink:</strong></p>
<blockquote data-secret="SIBNOy5P1w" class="wp-embedded-content"><p><a href="http://blogs.gentoo.org/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/">jasper: memory allocation failure in jas_malloc (jas_malloc.c)</a></p></blockquote>
<p><iframe class="wp-embedded-content" sandbox="allow-scripts" security="restricted" style="position: absolute; clip: rect(1px, 1px, 1px, 1px);" src="http://blogs.gentoo.org/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/embed/#?secret=SIBNOy5P1w" data-secret="SIBNOy5P1w" width="600" height="338" title="&#8220;jasper: memory allocation failure in jas_malloc (jas_malloc.c)&#8221; &#8212; agostino&#039;s blog" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
						This entry was posted in <a href="https://blogs.gentoo.org/ago/category/advisories/" rel="category tag">advisories</a>, <a href="https://blogs.gentoo.org/ago/category/security/" rel="category tag">security</a>. Bookmark the <a href="https://blogs.gentoo.org/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/" title="Permalink to jasper: memory allocation failure in jas_malloc (jas_malloc.c)" rel="bookmark">permalink</a>.											</div><!-- .entry-utility -->
				</div><!-- #post-## -->
                     </div><!-- plasma-post-center -->
                     <div class="plasma-left-bottom" ></div>
                     <div class="plasma-bottom" ></div>
                     <div class="plasma-right-bottom" ></div>

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="https://blogs.gentoo.org/ago/2016/10/18/jasper-null-pointer-dereference-in-jp2_colr_destroy-jp2_cod-c/" rel="prev"><span class="meta-nav">&larr;</span> jasper: NULL pointer dereference in jp2_colr_destroy (jp2_cod.c)</a></div>
					<div class="nav-next"><a href="https://blogs.gentoo.org/ago/2016/10/18/jasper-two-null-pointer-dereference-in-bmp_getdata-bmp_dec-c-incomplete-fix-for-cve-2016-8690/" rel="next">jasper: two NULL pointer dereference in bmp_getdata (bmp_dec.c) (Incomplete fix for CVE-2016-8690) <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

                            <div class="plasma-left-top"></div>
                            <div class="plasma-top"></div>
                            <div class="plasma-right-top"></div>
                            <div class="plasma-post-center" >
				
			<div id="comments">




	<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/ago/2016/10/18/jasper-memory-allocation-failure-in-jas_malloc-jas_malloc-c/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://blogs.gentoo.org/ago/wp-comments-post.php" method="post" id="commentform" class="comment-form"><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='756' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="2fbb15ccae" /></p>		<span id="openid_comment">
			<label>
				<input type="checkbox" id="login_with_openid" name="login_with_openid" checked="checked" />
				Authenticate this comment using <span class="openid_link">OpenID</span>.			</label>
		</span>
		<script type="text/javascript">jQuery(function(){ add_openid_to_comment_form('https://blogs.gentoo.org/ago/index.php', 'ce29c63e06') })</script>
		<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="226"/></p></form>	</div><!-- #respond -->
	<p class="akismet_comment_form_privacy_notice">This site uses Akismet to reduce spam. <a href="https://akismet.com/privacy/" target="_blank" rel="nofollow noopener">Learn how your comment data is processed</a>.</p>
</div><!-- #comments -->
                     </div><!-- plasma-post-center -->
                     <div class="plasma-left-bottom" ></div>
                     <div class="plasma-bottom" ></div>
                     <div class="plasma-right-bottom" ></div>


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
                    <div class="plasma-left-top"></div>
                    <div class="plasma-top"></div>
                    <div class="plasma-right-top"></div>
                    <div class="plasma-side-center">
			<ul class="xoxo">

<li id="search-2" class="widget-container widget_search"><form role="search" method="get" id="searchform" class="searchform" action="https://blogs.gentoo.org/ago/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></li>		<li id="recent-posts-2" class="widget-container widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
											<li>
					<a href="https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/">gentoo tinderbox</a>
									</li>
											<li>
					<a href="https://blogs.gentoo.org/ago/2020/04/19/re2c-heap-overflow-in-scannerfill-scanner-cc/">re2c: heap overflow in Scanner::fill (scanner.cc)</a>
									</li>
											<li>
					<a href="https://blogs.gentoo.org/ago/2020/04/16/why-i-stopped-fuzzing-research/">Why I stopped fuzzing research</a>
									</li>
											<li>
					<a href="https://blogs.gentoo.org/ago/2019/03/20/install-gentoo-in-less-than-one-minute/">Install Gentoo in less than one minute</a>
									</li>
											<li>
					<a href="https://blogs.gentoo.org/ago/2017/10/24/binutils-invalid-memory-read-in-find_abstract_instance_name-dwarf2-c/">binutils: invalid memory read in find_abstract_instance_name (dwarf2.c)</a>
									</li>
					</ul>
		</li><li id="recent-comments-2" class="widget-container widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">strongcourage</span> on <a href="https://blogs.gentoo.org/ago/2020/04/16/why-i-stopped-fuzzing-research/#comment-181437">Why I stopped fuzzing research</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.graphicsmagick.org/' rel='external nofollow ugc' class='url'>Bob Friesenhahn</a></span> on <a href="https://blogs.gentoo.org/ago/2020/04/16/why-i-stopped-fuzzing-research/#comment-181419">Why I stopped fuzzing research</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://placeholderapi.wordpress.com/2020/04/18/gentoo-dev-why-i-stopped-fuzzing-research-https-blogs-gentoo-or/' rel='external nofollow ugc' class='url'>#gentoo dev: Why I stopped fuzzing research https://blogs.gentoo.or&#8230; | Dr. Roy Schestowitz (罗伊)</a></span> on <a href="https://blogs.gentoo.org/ago/2020/04/16/why-i-stopped-fuzzing-research/#comment-181400">Why I stopped fuzzing research</a></li><li class="recentcomments"><span class="comment-author-link">Ulya</span> on <a href="https://blogs.gentoo.org/ago/2020/04/16/why-i-stopped-fuzzing-research/#comment-181396">Why I stopped fuzzing research</a></li><li class="recentcomments"><span class="comment-author-link">ago</span> on <a href="https://blogs.gentoo.org/ago/2019/03/20/install-gentoo-in-less-than-one-minute/#comment-178429">Install Gentoo in less than one minute</a></li></ul></li><li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
				<li><a href='https://blogs.gentoo.org/ago/2020/07/'>July 2020</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2020/04/'>April 2020</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2019/03/'>March 2019</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/10/'>October 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/09/'>September 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/08/'>August 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/07/'>July 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/06/'>June 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/05/'>May 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/04/'>April 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/03/'>March 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/02/'>February 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2017/01/'>January 2017</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/12/'>December 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/11/'>November 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/10/'>October 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/09/'>September 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/08/'>August 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/07/'>July 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2016/02/'>February 2016</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2015/07/'>July 2015</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2013/08/'>August 2013</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2013/06/'>June 2013</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2013/05/'>May 2013</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2013/01/'>January 2013</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2012/12/'>December 2012</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2012/11/'>November 2012</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2012/10/'>October 2012</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2012/08/'>August 2012</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2012/07/'>July 2012</a></li>
	<li><a href='https://blogs.gentoo.org/ago/2012/06/'>June 2012</a></li>
		</ul>
			</li><li id="categories-2" class="widget-container widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
				<li class="cat-item cat-item-12"><a href="https://blogs.gentoo.org/ago/category/advisories/">advisories</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://blogs.gentoo.org/ago/category/arch-testing/">arch testing</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://blogs.gentoo.org/ago/category/gentoo/">gentoo</a>
</li>
	<li class="cat-item cat-item-10"><a href="https://blogs.gentoo.org/ago/category/security/">security</a>
</li>
		</ul>
			</li><li id="meta-2" class="widget-container widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="https://blogs.gentoo.org/ago/wp-login.php">Log in</a></li>
			<li><a href="https://blogs.gentoo.org/ago/feed/">Entries feed</a></li>
			<li><a href="https://blogs.gentoo.org/ago/comments/feed/">Comments feed</a></li>
			<li><a href="https://wordpress.org/">WordPress.org</a></li>			</ul>
			</li>			</ul>
                    </div><!-- plasam-center -->
                    <div class="plasma-left-bottom" ></div>
                    <div class="plasma-bottom" ></div>
                    <div class="plasma-right-bottom" ></div>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
 
            <div class="plasma-left-top"></div>
            <div class="plasma-top"></div>
            <div class="plasma-right-top"></div>
            <div class="plasma-left"></div>
            <div class="plasma-center" >
                <div id="colophon">
			<div id="site-info">
				<a href="https://blogs.gentoo.org/ago/" title="agostino&#039;s blog" rel="home">
					agostino&#039;s blog				</a>
                                Original theme twentyten, modified by csslayer. Better experience in firefox and webkit.
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/"
						title="Semantic Personal Publishing Platform" rel="generator">
					Proudly powered by WordPress.				</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
            </div><!-- plasma-post-center -->
            <div class="plasma-right" ></div>
	</div><!-- #footer -->

</div><!-- #wrapper -->

<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-includes/js/comment-reply.min.js?ver=5.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var tocplus = {"visibility_show":"show","visibility_hide":"hide","width":"Auto"};
/* ]]> */
</script>
<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-content/plugins/table-of-contents-plus/front.min.js?ver=2002'></script>
<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-content/plugins/wp-syntax/js/wp-syntax.js?ver=1.1'></script>
<script type='text/javascript' src='https://blogs.gentoo.org/ago/wp-includes/js/wp-embed.min.js?ver=5.4.1'></script>
<script async="async" type='text/javascript' src='https://blogs.gentoo.org/ago/wp-content/plugins/akismet/_inc/form.js?ver=4.1.5'></script>
</body>
</html>
