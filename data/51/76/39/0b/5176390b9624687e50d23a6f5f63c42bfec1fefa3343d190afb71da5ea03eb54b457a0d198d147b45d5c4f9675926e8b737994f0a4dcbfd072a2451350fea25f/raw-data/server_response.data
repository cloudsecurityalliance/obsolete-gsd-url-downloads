<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1428947 - (CVE-2018-5129) OOB Write in CopyPlane within ImageContainer.cpp">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1428947">
<meta property="og:description"
      content="RESOLVED (u480271) in Core - Graphics: Layers. Last updated 2020-03-17.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="P2">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1428947 - (CVE-2018-5129) OOB Write in CopyPlane within ImageContainer.cpp</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1428947&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1428947">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1428947">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/yui.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/global.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/util.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox58\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr52\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox60\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox59\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_status_firefox60\":\"fixed\",\"cf_status_firefox59\":\"fixed\",\"cf_tracking_firefox94\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_status_firefox58\":\"wontfix\",\"cf_tracking_firefox93\":\"---\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_tracking_firefox60\":\"+\",\"cf_status_firefox_esr52\":\"fixed\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_firefox94\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_tracking_firefox58\":\"-\",\"cf_tracking_firefox59\":\"+\",\"cf_tracking_firefox95\":\"---\",\"cf_status_firefox_esr91\":\"---\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_tracking_firefox_esr52\":\"59+\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_status_firefox95\":\"---\"},\"project\":{\"cf_root_cause\":\"---\",\"cf_fission_milestone\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_a11y_review_project_flag\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1428947;
  BUGZILLA.bug_title = '1428947 - (CVE-2018-5129) OOB Write in CopyPlane within ImageContainer.cpp';
  BUGZILLA.bug_summary = 'OOB Write in CopyPlane within ImageContainer.cpp';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1428947';
  BUGZILLA.bug_keywords = 'csectype-bounds, sec-high',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/field.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/comments.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1428947">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1428947"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1428947 - (CVE-2018-5129) OOB Write in CopyPlane within ImageContainer.cpp">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="J89vC6SXNjB8bAHjwMikmJ1WO2ZJ6HKRRugCv3j9WJjSN6sK4bLC6M25C9ii3T4D8nyfJCdvT2GfsybHfkiFNHuBcviura3QICMOoP7nOPo0xV5XymDt6GKvdEqvorCgASguC1dB0gRfUoMXQEbund7K0gAzuSNeq6slaGUuRqAbZlMoX2OMQs5cPFonJqD0d2AVPO5dzIf1FL88T1tRXRakqYwkfuOR39HpUGYQgcUW11U0FtZCeLs6USir42mS">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1428947" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623281-Y3t2iaQS28afBnwYO0YotHu4ZT2z5C05EyOI2ZR04AI">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1428947" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1428947" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1428947">Bug 1428947</a>
          <span class="edit-hide">(CVE-2018-5129)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2018-01-08 18:02 PST" data-time="1515463377">4 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2018-02-19 01:56 PST" data-time="1519034169">4 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">OOB Write in Copy<wbr>Plane within Image<wbr>Container<wbr>.cpp</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            OOB Write in CopyPlane within ImageContainer.cpp

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: Graphics: Layers, defect, P2)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=Graphics%3A%20Layers#Graphics%3A%20Layers" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Graphics: Layers
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: Graphics: Layers</div>
            <div class="description">The graphics subsystem that implements hardware-accelerated (and software) composition of layers of content.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=Graphics%3A%20Layers&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=Graphics%3A%20Layers&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=Graphics%3A%20Layers"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="Graphics: Layers"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">P2
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;resolution&quot;:&quot;FIXED&quot;,&quot;target_milestone&quot;:&quot;mozilla60&quot;,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr52&quot;:&quot;59+&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;cf_tracking_firefox59&quot;:&quot;+&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;status&quot;:&quot;RESOLVED&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_tracking_firefox58&quot;:&quot;-&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;flags&quot;:[{&quot;status&quot;:&quot;+&quot;,&quot;name&quot;:&quot;sec-bounty&quot;},{&quot;name&quot;:&quot;qe-verify&quot;,&quot;status&quot;:&quot;-&quot;}],&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox60&quot;:&quot;fixed&quot;,&quot;keywords&quot;:[&quot;csectype-bounds&quot;,&quot;sec-high&quot;],&quot;cf_status_firefox59&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;dupe_of&quot;:null,&quot;id&quot;:1428947,&quot;cf_status_firefox58&quot;:&quot;wontfix&quot;,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;priority&quot;:&quot;P2&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr52&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox60&quot;:&quot;+&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">RESOLVED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            RESOLVED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla60

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr52</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=equals&amp;v1=59%2B">59+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox58</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox58&amp;o1=equals&amp;v1=-">-</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox58&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox59</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox59&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox59&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox60</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox60&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox60&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr52</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr52-dirty">
  <select id="cf_tracking_firefox_esr52" name="cf_tracking_firefox_esr52">
        <option value="59+"
          id="v3586_cf_tracking_firefox_esr52" selected
        >59+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr52-dirty">
  <select id="cf_status_firefox_esr52" name="cf_status_firefox_esr52">
        <option value="fixed"
          id="v3137_cf_status_firefox_esr52" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox58</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox58-dirty">
  <select id="cf_tracking_firefox58" name="cf_tracking_firefox58">
        <option value="-"
          id="v3454_cf_tracking_firefox58" selected
        >-
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox58-dirty">
  <select id="cf_status_firefox58" name="cf_status_firefox58">
        <option value="wontfix"
          id="v3447_cf_status_firefox58" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox59</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox59-dirty">
  <select id="cf_tracking_firefox59" name="cf_tracking_firefox59">
        <option value="+"
          id="v3502_cf_tracking_firefox59" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox59-dirty">
  <select id="cf_status_firefox59" name="cf_status_firefox59">
        <option value="fixed"
          id="v3510_cf_status_firefox59" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox60</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox60-dirty">
  <select id="cf_tracking_firefox60" name="cf_tracking_firefox60">
        <option value="+"
          id="v3558_cf_tracking_firefox60" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox60-dirty">
  <select id="cf_status_firefox60" name="cf_status_firefox60">
        <option value="fixed"
          id="v3566_cf_status_firefox60" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: pauljt, Assigned: u480271)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_480271" ><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_434339" ><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">pauljt</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_279663" ><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=279663" > <span class="fna">jimm</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="28">28 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list edit-show" id="field-dependson" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-see_also"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - integer overflow in createImageBitmap() overload accepting ArrayBuffer and ArrayBufferView arguments (pwn2own 2017)"
   href="/show_bug.cgi?id=1348168">CVE-2017-5428</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WONTFIX"
   href="/show_bug.cgi?id=1414547">1414547</a>
      </div>

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: csectype-bounds, sec-high, Whiteboard: [original repoter is bzdllx&#64;gmail.com][post-critsmash-triage][adv-main59+][adv-esr52.7+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2018-5129

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-bounds&amp;resolution=---">csectype-bounds</a>, 
          <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[original repoter is bzdllx&#64;gmail.com][post-critsmash-triage][adv-main59+][adv-esr52.7+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a5411829_1689"
            class="rel-time-title activity-ref"
            title="4 years ago"
        data-time="1516092976"
      >sec-bounty</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag-1704034">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1704034-dirty">
      <select id="flag-1704034" name="flag-1704034"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
            <option value="+" selected>+</option>
      </select>
    </td>


  </tr>
          </tbody>
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_452604" ><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">mwobensmith</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a4548971_452604"
            class="rel-time-title activity-ref"
            title="4 years ago"
        data-time="1520012348"
      >qe-verify</a>
    </td>

    <td class="flag-value">-
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_452604" ><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">mwobensmith</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag-1724240">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1724240-dirty">
      <select id="flag-1724240" name="flag-1724240"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
            <option value="-" selected>-</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (3 files, 5 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class="
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8940914">oobwrite.html</a>
        </div>
        <div>
            <a href="#c1" class="attach-time activity-ref"><span class="rel-time" title="2018-01-08 18:21 PST" data-time="1515464468">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_434339" ><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div></span>
        </div>
        <div class="attach-info">1.81 KB,
          text/html        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8940914&amp;action=edit">Details</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8942572">Use source buffer width rather than stride.</a>
        </div>
        <div>
            <a href="#c13" class="attach-time activity-ref"><span class="rel-time" title="2018-01-14 20:45 PST" data-time="1515991520">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_463180" ><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div></span>
        </div>
        <div class="attach-info">3.17 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_480271" ><span class="fn">u480271</span>
</div>:
              <a href="#a2433989_480271"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1515991520"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_512198" ><span class="fn">jya</span>
</div>:
              <a href="#c27"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1517905915"
            >
              review-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8942572&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8942572&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8942572">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8949238">Check plane width &amp; stride constraints. r?mattwoodrow</a>
        </div>
        <div>
            <a href="#c35" class="attach-time activity-ref"><span class="rel-time" title="2018-02-07 16:11 PST" data-time="1518048671">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_480271" ><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div></span>
        </div>
        <div class="attach-info">4.01 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8949238&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8949238&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949238">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8949244">Check plane width &amp; stride constraints. r?mattwoodrow</a>
        </div>
        <div>
            <a href="#c37" class="attach-time activity-ref"><span class="rel-time" title="2018-02-07 16:18 PST" data-time="1518049089">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_480271" ><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div></span>
        </div>
        <div class="attach-info">4.00 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_380838" ><span class="fn">mattwoodrow</span>
</div>:
              <a href="#c38"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518049089"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8949244&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8949244&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949244">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8949264">Check plane width &amp; stride constraints. r=mattwoodrow</a>
        </div>
        <div>
            <a href="#c39" class="attach-time activity-ref"><span class="rel-time" title="2018-02-07 19:15 PST" data-time="1518059751">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_480271" ><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div></span>
        </div>
        <div class="attach-info">3.69 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_480271" ><span class="fn">u480271</span>
</div>:
              <a href="#c39"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518059751"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8949264&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8949264&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949264">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8949272">Check plane width &amp; stride constraints. r=mattwoodrow</a>
        </div>
        <div>
            <a href="#c41" class="attach-time activity-ref"><span class="rel-time" title="2018-02-07 20:18 PST" data-time="1518063538">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_480271" ><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div></span>
        </div>
        <div class="attach-info">3.69 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_480271" ><span class="fn">u480271</span>
</div>:
              <a href="#c41"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518063538"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8949272&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8949272&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949272">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8950113">Check plane width &amp; stride constraints. r=mattwoodrow</a>
        </div>
        <div>
            <a href="#c43" class="attach-time activity-ref"><span class="rel-time" title="2018-02-11 15:31 PST" data-time="1518391890">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_480271" ><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div></span>
        </div>
        <div class="attach-info">3.82 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_480271" ><span class="fn">u480271</span>
</div>:
              <a href="#c43"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518391890"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_538805" ><span class="fn">ritu</span>
</div>:
              <a href="#c53"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518668067"
            >
              approval-mozilla-beta+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#a3027014_280903"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518394184"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8950113&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8950113&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8950113">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8951132">ESR 52 - Check plane width &amp; stride constraints.</a>
        </div>
        <div>
            <a href="#c50" class="attach-time activity-ref"><span class="rel-time" title="2018-02-14 20:07 PST" data-time="1518667620">4 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_480271" ><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div></span>
        </div>
        <div class="attach-info">3.74 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_480271" ><span class="fn">u480271</span>
</div>:
              <a href="#c50"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518667620"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_538805" ><span class="fn">ritu</span>
</div>:
              <a href="#c54"
                  class="flag-name-status rel-time-title activity-ref"
                  title="4 years ago"
              data-time="1518668279"
            >
              approval-mozilla-esr52+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8951132&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8951132&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8951132">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="kMIfjWXG5gQX2IrKyy5sJZisNGJfLT0bysCJTWdPLJYXEhJD">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="12953793" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" ><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" ><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 18:02 PST" data-time="1515463377">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-0" data-comment-id="12953793">Received a vuln report via email from a friend. I've not confirmed (on paternity leave) but someone should check this. Bug sounds hard to exploit, but reporter want to check with us before blogging about it just in case.


--VIA EMAIL BELOW ------

In the process of creating a full writeup / exploit for the Pwn2Own 2017 bug (<a rel="nofollow" href="https://www.mozilla.org/en-US/security/advisories/mfsa2017-08/">https://www.mozilla.org/en-US/security/advisories/mfsa2017-08/</a>) I believe have come across another bug. I am unsure whether the Chaitin team who discovered the Integer Overflow overlooked the vulnerable code, chose to ignore it, reported it alongside their Integer Overflow, or someone else found it subsequently and reported it but I haven't yet found any indication of this being the case.

What's the bug?
The vulnerable function is `CopyPlane` within ImageContainer.cpp (<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.cpp#539">https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.cpp#539</a>). The issue here is that the signed 32-bit integer `width` used in the 'Slow Path' of the copy (or when aSkip is anything other than 0) is unchecked. This means that in the case of Firefox 52 a specially crafted Layout can achieve a very simple out of bounds write purely by setting the width value of a layout object to more than the calculated height. (Inside the poc.zip folder I have provided the oobwrite.html file for a simple demonstration of what i mean).

What's the impact?
After a bit of research and scouring through the current Firefox source, I have come to the conclusion that it is _very_ difficult to actually trigger this vulnerable function however it is not impossible. The function `CopyPlane` is referenced only within the `RecyclingPlanarYCbCrImage::CopyData`. The `CopyData` function is then referenced 9 times outside of ImageContainer however, 1 is mitigated by the fact that you removed the overloaded constructor for ImageBitmap objects in Firefox 52. I haven't had a chance to go through and attempt to trigger the bug via the remaining 8 references but i have the suspicion it could be very difficult to trigger from any other code path. For this reason i understand the impact is low but i think it is definitely worth looking at! 

I have actually included this out of bounds write within my writeup but - because I realised the bug may not have been reported / discovered prior to now i thought it would be best to let you know and make sure it got fixed or marked as wont-fix before i go and publish the details publicly.</pre></div><div class="change-set" id="a104_434339"><div class="change" id="aa104_434339">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a104_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_434339" id="a104_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a104_434339"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a104_434339">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a104_434339">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 18:04 PST" data-time="1515463481">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">See Also:  &rarr; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - integer overflow in createImageBitmap() overload accepting ArrayBuffer and ArrayBufferView arguments (pwn2own 2017)"
   href="/show_bug.cgi?id=1348168">CVE-2017-5428</a></div></div></div><div class="change-set" id="c1"><div class="comment" data-id="12953809" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a104_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a104_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 18:21 PST" data-time="1515464468">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8940914"
         class="attachment"
         data-id="8940914" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="oobwrite.html">
      <meta itemprop="contentSize" content="1856">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8940914" itemprop="contentUrl">
        <span id="att-8940914-description" itemprop="description">oobwrite.html</span></a>
        — <a href="attachment.cgi?id=8940914&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-1" data-comment-id="12953809">PoC. Needs canvas.imagebitmap_extensions.enabled set to true.</pre></div><div class="change-set" id="c2"><div class="comment" data-id="12953815" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a104_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a104_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 18:24 PST" data-time="1515464685">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="12953815">So note that while the PoC requires imagebitmap_extensions enabled, the vulnerable function exists in FF for a long time, is just hard to hit. So that's really the question here: can you trigger this exploit this using some other way?</pre></div><div class="change-set" id="c3"><div class="comment" data-id="12953838" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a104_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a104_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 18:41 PST" data-time="1515465694">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="12953838">I'm not sure if this is strictly related but FYI it shows up in the analysis from 1279569.</pre></div><div class="change-set" id="c4"><div class="comment" data-id="12953871" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_515575" id="a104_434339"><img src="https://secure.gravatar.com/avatar/91fe89bb30a0d2b5671d37d930d22b1d?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_515575" id="a104_434339"><a class="email " href="/user_profile?user_id=515575" > <span class="fna">Gerald Squelart [:gerald] (he/him)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 19:26 PST" data-time="1515468394">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="12953871">Thanks Paul &amp; friend.

I had a quick look at the path going through MediaData.cpp, and that one seemed possibly safe thanks to the validation at:
<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/MediaData.cpp#308">https://searchfox.org/mozilla-central/source/dom/media/MediaData.cpp#308</a>

But this should be verified, and there are other paths using CopyPlane.
Blake, could you (or someone on the media team) please have a look?</pre><div class="activity"><div class="change">Flags: needinfo?(bwu)</div></div></div><div class="change-set" id="c5"><div class="comment" data-id="12953894" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a104_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a104_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 19:43 PST" data-time="1515469417">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="12953894">(In reply to Gerald Squelart [:gerald] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c4">comment #4</a>)
<span class="quote">&gt; Thanks Paul &amp; friend.
&gt; 
&gt; I had a quick look at the path going through MediaData.cpp, and that one
&gt; seemed possibly safe thanks to the validation at:
&gt; <a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/MediaData.cpp#308">https://searchfox.org/mozilla-central/source/dom/media/MediaData.cpp#308</a></span >

Note that these checks only check overflow - it doesn't validate that the width is actually the size of the buffer. 

<span class="quote">&gt; But this should be verified, and there are other paths using CopyPlane.
&gt; Blake, could you (or someone on the media team) please have a look?</span >

For reference for ever is joining this thread the issue is here:
<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.cpp#552">https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.cpp#552</a>

If width isn't what we expect, we write out of bounds.</pre></div><div class="change-set" id="c6"><div class="comment" data-id="12953926" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_609525" id="a104_434339"><img src="https://secure.gravatar.com/avatar/8ab21b7517699284b13b51c407b35f46?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_609525" id="a104_434339"><a class="email " href="/user_profile?user_id=609525" > <span class="fna">bzdllx</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-08 20:24 PST" data-time="1515471899">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="12953926">Hey all, 

I have taken a look at the ValidateBufferAndPicture in terms of validating / preventing the bug and have realised that it only prevents the following situations:
1. the Planes (destination buffers) from becoming out of sync for whatever reason, maybe a realloc or an accidental free or something unexpected. (117-123)
2. the width and height becoming negative (good check to have) or being zero. (126-130)
3. the `ValidatePlane` function then ensures that the width and height are less than 16384 AND the width * height is less than 8192 * 4608 AND that the stride is &gt; 0. (131-136)
4. the xLimit &amp; yLimit for the aPicture do not have any sort of Integer Overflow / Underflow in their width or height compared to their value (Im assuming to prevent one from referencing out of bound pixels or whatever when rendering) (138-148)

Based on those 4, it is still possible that the height can be set to 1/4 of the width (for example). Then, because the Plane ( destination buffer ) is allocated based on the calculation: mData.mCbCrStride * mData.mCbCrSize.height * 2 + mData.mYStride * mData.mYSize.height, the width can just be 2 * the height and it will iterate past the end of the destination buffer. 

I think it might be good to mention also that the vulnerable function is also called from within ChromiumCDMParent. Firstly the IPC function RecvDecodedData (<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/gmp/ChromiumCDMParent.cpp#686">https://searchfox.org/mozilla-central/source/dom/media/gmp/ChromiumCDMParent.cpp#686</a>) takes the untrusted input and passes it to CreateVideoFrame (<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/gmp/ChromiumCDMParent.cpp#783">https://searchfox.org/mozilla-central/source/dom/media/gmp/ChromiumCDMParent.cpp#783</a>) which will then pass the untrusted data down the line to our CopyData / CopyPlane allowing us to crash the Parent GMP process / escape the sandbox.</pre></div><div class="change-set" id="a49464_368570"><div class="change" id="aa49464_368570">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_368570" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/9e7272cd8191f064be3b2b7dcd6a8903?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_368570" id="a49464_368570"><a class="email disabled" href="/user_profile?user_id=368570" > <span class="fna">Christoph Diehl [:posidron]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a49464_368570"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a49464_368570">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a49464_368570">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-09 07:47 PST" data-time="1515512841">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">See Also:  &rarr; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WONTFIX"
   href="/show_bug.cgi?id=1414547">1414547</a></div></div></div><div class="change-set" id="c7"><div class="comment" data-id="12960179" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_488943" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/e91146b5c7a88a0733fcdc577f1c1e7e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_488943" id="a49464_368570"><a class="email " href="/user_profile?user_id=488943" > <span class="fna">Blake Wu [:bwu][:blakewu]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-10 18:26 PST" data-time="1515637616">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="12960179">Ni John to help check this bug.</pre><div class="activity"><div class="change">Flags: needinfo?(bwu) &rarr; needinfo?(jolin)</div></div></div><div class="change-set" id="c8"><div class="comment" data-id="12960563" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a49464_368570"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-11 00:47 PST" data-time="1515660429">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="12960563">Unfortunately, ValidateBufferAndPicture() can only guarantee the region to copy (aPicture) lies within the source buffer (aBuffer) by checking the plane info because the actual source buffer length is not available in the YCbCrBuffer structure. Unless that information is provided, the caller should be responsible for the correctness of plane info.

Currently there are 8 callers to VideoData::CreateAndCopyData() that fills the info. All seems fine, and no validation is done in any of them. AFAICT, only ChromiumCDMParent::CreateVideoFrame() is able to do it for others receive raw pointers and cannot get the buffer length.

[1] <a rel="nofollow" href="https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla9VideoData17CreateAndCopyDataERKNS_9VideoInfoEPNS_6layers14ImageContainerElRKNS_5media8TimeUnitESA_RKNS0_11YCbCrBufferEbSA_RKNS_3gfx12IntRectTypedINSE_12UnknownUnitsEEEPNS4_15KnowsCompositorE&amp;redirect=false">https://searchfox.org/mozilla-central/search?q=symbol:_ZN7mozilla9VideoData17CreateAndCopyDataERKNS_9VideoInfoEPNS_6layers14ImageContainerElRKNS_5media8TimeUnitESA_RKNS0_11YCbCrBufferEbSA_RKNS_3gfx12IntRectTypedINSE_12UnknownUnitsEEEPNS4_15KnowsCompositorE&amp;redirect=false</a></pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jolin)</span></div></div></div><div class="change-set" id="c9"><div class="comment" data-id="12960581" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a49464_368570"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-11 00:56 PST" data-time="1515660992">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="12960581">(In reply to bzdllx from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c6">comment #6</a>)
<span class="quote">&gt; 
&gt; Based on those 4, it is still possible that the height can be set to 1/4 of
&gt; the width (for example). Then, because the Plane ( destination buffer ) is
&gt; allocated based on the calculation: mData.mCbCrStride *
&gt; mData.mCbCrSize.height * 2 + mData.mYStride * mData.mYSize.height, the width
&gt; can just be 2 * the height and it will iterate past the end of the
&gt; destination buffer. 
&gt; </span >

 bzdllx, could you please elaborate? I don't quite get your concern here. The destination buffer length is Y plane length + Cb + Cr where each plane is stride * height bytes long. It has nothing to do with the propotion of width to height.</pre></div><div class="change-set" id="c10"><div class="comment" data-id="12960791" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a49464_368570"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-11 02:30 PST" data-time="1515666659">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="12960791">It seems 2 layers of protections are needed:
1. Examine the info inside aData before buffer allocation in RecyclingPlanarYCbCrImage::CopyData() to make sure it's safe to copy image data.
2. (For Paul's PoC) check the plane layout and reject invalid ImageBitmap creation.</pre></div><div class="change-set" id="c11"><div class="comment" data-id="12960952" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_609525" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/8ab21b7517699284b13b51c407b35f46?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_609525" id="a49464_368570"><a class="email " href="/user_profile?user_id=609525" > <span class="fna">bzdllx</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-11 04:06 PST" data-time="1515672390">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="12960952">(In reply to John Lin [:jolin][:jhlin] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c9">comment #9</a>)
<span class="quote">&gt; (In reply to bzdllx from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c6">comment #6</a>)
&gt; &gt; 
&gt; &gt; Based on those 4, it is still possible that the height can be set to 1/4 of
&gt; &gt; the width (for example). Then, because the Plane ( destination buffer ) is
&gt; &gt; allocated based on the calculation: mData.mCbCrStride *
&gt; &gt; mData.mCbCrSize.height * 2 + mData.mYStride * mData.mYSize.height, the width
&gt; &gt; can just be 2 * the height and it will iterate past the end of the
&gt; &gt; destination buffer. 
&gt; &gt; 
&gt; 
&gt;  bzdllx, could you please elaborate? I don't quite get your concern here.
&gt; The destination buffer length is Y plane length + Cb + Cr where each plane
&gt; is stride * height bytes long. It has nothing to do with the propotion of
&gt; width to height.</span >

Sure! So my main concern is actually highlighted by your comment - &quot;It has nothing to do with the proportion of width to height.&quot; The issue I see here is actually best viewed from a 'How would I fix it' standpoint. Currently, the destination buffer is calculated with the Stride and Height from the Cb / Cr / Y Layout objects. However, when it comes to the vulnerable 'Slow path' within the `CopyPlane` function, the nested for-loop copy is based on `width * height`, not `height * stride`. So the 'fixed' approach to the 'Slow Path' copy would either be to copy based on `height * stride` or, when allocating the buffer in `CopyData`, somehow integrate the width property in the equation so the size is calculated based on that instead of the stride. 

As an example of what i mean - If you take a look at the PoC Paul attached (crashes in FF52), you will see that the uLayout.width property is actually double the size of the yLayout.height property. If we do the maths for the destination buffer allocation with the numbers included in my PoC the resulting destination buffer is allocated as follows: 
 = 1 * 1 * 2 + 1024 * 1
 = 1026 bytes

Then, if we use the current 'Slow Path' copy of that `CopyPlane` function with our uLayout.width property set to 2048. We will enter the top for-loop with a height of 1 and then iterate our width 2048 times, allowing us to overrun the 1026 destination buffer. 

In terms of a trigger / crashing the latest version of Firefox, a specially crafted video file would definitely be able to trigger the aforementioned vulnerable 'Slow Copy' code. Would take a fair amount of effort however it would by no means be impossible.</pre></div><div class="change-set" id="c12"><div class="comment" data-id="12963571" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a49464_368570"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a49464_368570"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-12 00:33 PST" data-time="1515746004">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="12963571">(In reply to bzdllx from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c11">comment #11</a>)
<span class="quote">&gt; (In reply to John Lin [:jolin][:jhlin] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c9">comment #9</a>)
&gt; 
&gt; Sure! So my main concern is actually highlighted by your comment - &quot;It has
&gt; nothing to do with the proportion of width to height.&quot; The issue I see here
&gt; is actually best viewed from a 'How would I fix it' standpoint. Currently,
&gt; the destination buffer is calculated with the Stride and Height from the Cb
&gt; / Cr / Y Layout objects. However, when it comes to the vulnerable 'Slow
&gt; path' within the `CopyPlane` function, the nested for-loop copy is based on
&gt; `width * height`, not `height * stride`. So the 'fixed' approach to the
&gt; 'Slow Path' copy would either be to copy based on `height * stride` or, when
&gt; allocating the buffer in `CopyData`, somehow integrate the width property in
&gt; the equation so the size is calculated based on that instead of the stride. </span >
&gt;

 Agreed. I think we should take the 2nd approach for it also saves some memory when the source buffer has padding (strike &gt; width), or is semi-planar (stride &gt;= 2 * width) or interleaved (stride &gt;= 3 * width)

 BTW, it seems there are other problems in CopyData():
  - mData is modified [1] even when copy fails
  - incorrect mData.*Skip values. (Should all be 0 because destination buffer is planar)

[1] <a rel="nofollow" href="https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.cpp#565">https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.cpp#565</a></pre></div><div class="change-set" id="a283451_463180"><div class="change" id="aa283451_463180">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_463180" id="a283451_463180"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a283451_463180"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a283451_463180">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a283451_463180">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-12 00:47 PST" data-time="1515746828">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Assignee: nobody &rarr; jolin</div></div></div><div class="change-set" id="c13"><div class="comment" data-id="12969295" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a283451_463180"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-14 20:45 PST" data-time="1515991520">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8942572"
         class="attachment patch obsolete"
         data-id="8942572" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="bug1428947.patch">
      <meta itemprop="contentSize" content="3244">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8942572">
          <a class="link" href="attachment.cgi?id=8942572&amp;action=diff">
        <span id="att-8942572-description" itemprop="description">Use source buffer width rather than stride.</span></a> (obsolete)
        — <a href="attachment.cgi?id=8942572&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8942572">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8942572&amp;action=edit"
           title="Use source buffer width rather than stride."
           class=""
        >Attachment #8942572</a> -
        Flags: review?(jmuizelaar)</div></div></div><div class="change-set" id="c14"><div class="comment" data-id="12971462" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_428608" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/1f41f3ef916e1c1fc9401cf3212a6708?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_428608" id="a283451_463180"><a class="email " href="/user_profile?user_id=428608" > <span class="fna">Frederik Braun [:freddy] - vacation (back Nov 1st)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-16 00:56 PST" data-time="1516092976">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="12971462">The security rating is a guess. Please someone feel free to rate again.</pre><div class="activity"><div class="change">Flags: sec-bounty?</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-bounds&amp;resolution=---">csectype-bounds</a>, 
          
            <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a></div><div class="change">Whiteboard: [original repoter is bzdllx&#64;gmail.com]</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="12981060" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_609525" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/8ab21b7517699284b13b51c407b35f46?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_609525" id="a283451_463180"><a class="email " href="/user_profile?user_id=609525" > <span class="fna">bzdllx</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-18 20:35 PST" data-time="1516336522">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="12981060">(In reply to John Lin [:jolin][:jhlin] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c13">comment #13</a>)
<span class="quote">&gt; Created <span class="bz_obsolete"><a href="/attachment.cgi?id=8942572" name="attach_8942572" title="Use source buffer width rather than stride.">attachment 8942572</a> <a href="/attachment.cgi?id=8942572&amp;action=edit" title="Use source buffer width rather than stride.">[details]</a> <a href="/attachment.cgi?id=8942572&amp;action=diff" title="Use source buffer width rather than stride.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8942572'>[review]</a>
&gt; Use source buffer width rather than stride.</span >

Hi John,

I've reviewed the patch you've created and only have one question - I noticed that on lines 587 &amp; 591 you have set the Stride for `mY` and `mCbCr` equal to the width before passing them to `CopyPlane`. `CopyPlane` then performs the 'Slow' copy the same as before however now, the `aDst` buffer is using `+=width` instead of `+=stride`. Is there a reason why you couldn't keep the original `+=stride` for the `aDst` buffer as well seeing as you are setting the Stride equal to the width prior to the function call anyway? I'm asking purely to better my understanding :) 

I will make the changes in my build of FF52 and test them to make sure I can't write OOB! 

Thanks.</pre></div><div class="change-set" id="c16"><div class="comment" data-id="12981316" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a283451_463180"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-19 01:29 PST" data-time="1516354149">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="12981316">(In reply to bzdllx from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c15">comment #15</a>)
<span class="quote">&gt; (In reply to John Lin [:jolin][:jhlin] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c13">comment #13</a>)
&gt; &gt; Created <span class="bz_obsolete"><a href="/attachment.cgi?id=8942572" name="attach_8942572" title="Use source buffer width rather than stride.">attachment 8942572</a> <a href="/attachment.cgi?id=8942572&amp;action=edit" title="Use source buffer width rather than stride.">[details]</a> <a href="/attachment.cgi?id=8942572&amp;action=diff" title="Use source buffer width rather than stride.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8942572'>[review]</a>
&gt; &gt; Use source buffer width rather than stride.
&gt; 
&gt; Hi John,
&gt; 
&gt; I've reviewed the patch you've created and only have one question - I
&gt; noticed that on lines 587 &amp; 591 you have set the Stride for `mY` and `mCbCr`
&gt; equal to the width before passing them to `CopyPlane`. `CopyPlane` then
&gt; performs the 'Slow' copy the same as before however now, the `aDst` buffer
&gt; is using `+=width` instead of `+=stride`. Is there a reason why you couldn't
&gt; keep the original `+=stride` for the `aDst` buffer as well seeing as you are
&gt; setting the Stride equal to the width prior to the function call anyway? I'm
&gt; asking purely to better my understanding :) </span >

 aStride in CopyPlane() is the stride of source (aData.m*Stride in CopyData()); Before calling CopyPlane() it’s the destination plane strides (mData.m*Stride) which were modified.

 Maybe we could rename aData to aSource, or change CopyPlane() parameters to include both source and destination strides like libyuv::CopyPlane(), to make it easier to read.

<span class="quote">&gt; 
&gt; I will make the changes in my build of FF52 and test them to make sure I
&gt; can't write OOB! 
&gt; 
&gt; Thanks.</span >

Thanks for giving it a try.</pre></div><div class="change-set" id="c17"><div class="comment" data-id="12999830" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a283451_463180"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-01-27 22:26 PST" data-time="1517120796">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="12999830">My guess is that this bug needs a new owner (FYI Jeff when you get to reviewing this). Feel free to correct me if I'm wrong here.</pre><div class="activity"><div class="change">Assignee: jhlin.cs88g &rarr; nobody</div></div></div><div class="change-set" id="c18"><div class="comment" data-id="13012845" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_609525" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/8ab21b7517699284b13b51c407b35f46?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_609525" id="a283451_463180"><a class="email " href="/user_profile?user_id=609525" > <span class="fna">bzdllx</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-01 15:37 PST" data-time="1517528229">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="13012845">Hey all,

I have applied the patch created by John and tested it against FF52. I know you guys have your own testing process but i used the 'oobwrite.html' file to count the number of crashes / 50 runs on both an unpatched and patched version. 

Results:
 - The unpatched version resulted in 36 crashes and 14 without.
 - The patched version resulted in 50 without. (Woo!)

I will double check every path here to be absolutely certain but i think the ability to write OOB has been removed with the changes.

Not sure who the new owner will be but it looks like you guys just need to test and then merge in :)</pre></div><div class="change-set" id="c19"><div class="comment" data-id="13018226" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a283451_463180"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-04 22:41 PST" data-time="1517812864">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="13018226">I'm concerned about the lack of movement on this bug. I know we have a difficult situation on our hands -  but <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c6">comment 6</a> worries me - as far as I can tell, the comment is correct.  IIUC, we take data from IPC in ChromiumCDMParent::RecvDecodedShmem, pass it to VideoData::CreateAndCopyData which calls the vulnerable Copydata/Copyplace. 

Corrent me if I'm wrong here, but this would appear to be a serious sandbox escape (especially if it can be used to escape the GMP process which would seem likely). Upgrading criticality as a prudential measure.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a> &rarr; <a href="/buglist.cgi?keywords=sec-critical&amp;resolution=---">sec-critical</a></div></div></div><div class="change-set" id="c20"><div class="comment" data-id="13019167" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_443088" id="a283451_463180"><img src="https://secure.gravatar.com/avatar/c511186c5469f5f88538c42f94c71a65?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_443088" id="a283451_463180"><a class="email disabled" href="/user_profile?user_id=443088" > <span class="fna">Anthony Jones (:ajones, :kentuckyfriedtakahe, :k17e)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 08:58 PST" data-time="1517849936">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="13019167">Ralph - can you follow up with Jeff for review and find a new owner to land the patch?</pre><div class="activity"><div class="change">Flags: needinfo?(giles)</div></div></div><div class="change-set" id="a2389233_456486"><div class="change" id="aa2389233_456486">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_456486" id="a2389233_456486"><img src="https://secure.gravatar.com/avatar/afff8630fb0a0c0a44853cd700ac0a4d?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_456486" id="a2389233_456486"><a class="email " href="/user_profile?user_id=456486" > <span class="fna">Milan Sreckovic [:milan] (needinfo for best results)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2389233_456486"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2389233_456486">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2389233_456486">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 09:43 PST" data-time="1517852610">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8942572&amp;action=edit"
           title="Use source buffer width rather than stride."
           class=""
        >Attachment #8942572</a> -
        Flags: review?(jmuizelaar) &rarr; review?(sotaro.ikeda.g)</div></div></div><div class="change-set" id="c21"><div class="comment" data-id="13019932" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_170965" id="a2389233_456486"><img src="https://secure.gravatar.com/avatar/b13b00660f5b6351c2fbafb414f7a180?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_170965" id="a2389233_456486"><a class="email " href="/user_profile?user_id=170965" > <span class="fna">Ralph Giles (:rillian)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 12:46 PST" data-time="1517863589">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="13019932">Dan, can you please take over getting this landed. As a sec-critical you'll need to ask for approval, prepare backports to beta if necessary and be ready to land on all branches at once.</pre><div class="activity"><div class="change">Assignee: nobody &rarr; dglastonbury</div><div class="change">Flags: <span class="activity-deleted">needinfo?(giles)</span></div></div></div><div class="change-set" id="a2400220_170965"><div class="change" id="aa2400220_170965">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_170965" id="a2400220_170965"><img src="https://secure.gravatar.com/avatar/b13b00660f5b6351c2fbafb414f7a180?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_170965" id="a2400220_170965"><a class="email " href="/user_profile?user_id=170965" > <span class="fna">Ralph Giles (:rillian)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2400220_170965"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2400220_170965">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2400220_170965">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 12:46 PST" data-time="1517863597">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Priority: -- &rarr; P2</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="13020521" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2400220_170965"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2400220_170965"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 16:14 PST" data-time="1517876086">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="13020521">Hi, I'm taking over landing this patch. From #c19, am I to determine that the patches aren't ready to land yet?</pre><div class="activity"><div class="change">Flags: needinfo?(ptheriault)</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="13020598" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2400220_170965"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a2400220_170965"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 16:52 PST" data-time="1517878369">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="13020598">(In reply to Dan Glastonbury :kamidphish from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c22">comment #22</a>)
<span class="quote">&gt; Hi, I'm taking over landing this patch. From #c19, am I to determine that
&gt; the patches aren't ready to land yet?</span >

No,  sorry for confusing things. As far as I can tell, the patch here does seem to fix the underlying issue here. My understanding of the state of the bug is that the patch needs to be reviewed, to make sure that it does actually fix the issue, and that this is the best place to add validation etc. 

I was only commenting on the criticality in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c19">comment 19</a> as to me this seems like a bug which is both web exploitable (via a maliciously crafted video) and also one could lead to code execution in the parent (based on looking at the code path in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c6">comment 6</a>). We don't have a PoC for either of these (the original PoC is based on the pref'd off createImageBitmap function) but in the end it doesn't really matter whether this is sec-high or sec-critical, it needs to be fixed asap.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(ptheriault)</span></div></div></div><div class="change-set" id="a2433989_480271"><div class="change" id="aa2433989_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2433989_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2433989_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2433989_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2433989_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2433989_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 22:09 PST" data-time="1517897366">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8942572&amp;action=edit"
           title="Use source buffer width rather than stride."
           class=""
        >Attachment #8942572</a> -
        Flags: review?(sotaro.ikeda.g) &rarr; review+</div></div></div><div class="change-set" id="c24"><div class="comment" data-id="13020873" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2433989_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2433989_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 22:20 PST" data-time="1517898026">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="13020873">I reviewed the code and the changes made by :jhlin should fix the OOB memory write in CopyPlanes.  I looked at the code path via the CDM and the parameters are validated, although I believe it's possible to craft an IPDL message that causes an OOB memory read, since the image parameters aren't checked against the size of aData received in `ChromiumCDMParent::RecvDecodedData()`.

What I can't comment on is that :jhlin changed an assumption of `RecyclingPlanarYCbCrImage`, so I'm going to NI? :mattwoodrow to get an answer on whether it is OK that Y, Cb, Cr image planes have mWidth = mStride.</pre></div><div class="change-set" id="a2434708_480271"><div class="change" id="aa2434708_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2434708_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2434708_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2434708_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2434708_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2434708_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-05 22:21 PST" data-time="1517898085">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(matt.woodrow)</div></div></div><div class="change-set" id="c25"><div class="comment" data-id="13020959" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_512198" id="a2434708_480271"><img src="https://secure.gravatar.com/avatar/6be4974bfc86cb50db580e5d5e7e78cb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_512198" id="a2434708_480271"><a class="email " href="/user_profile?user_id=512198" > <span class="fna">Jean-Yves Avenard [:jya]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 00:16 PST" data-time="1517905003">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="13020959">I believe the original description is invalid and in particular a way to reproduce it.

It is not possible to generate a YCbCrImage using a specially crafted layout: the code path to access libyuv is never reached.

The only producers of YCbCrImage objects are media decoders, and of those decoders only the VPXDecoder, FFmpegVideoDecoder and TheoraDecoder can produce such objects.

Why this is important, is that it's not possible for a decoder to produce an image whose width is big enough that it would generate an overflow later.
When we demux webm (vp8/vp9) and Theora (ogg) media content, the validity of such content is checked by the demuxer using:
<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/VideoUtils.cpp#176">https://searchfox.org/mozilla-central/source/dom/media/VideoUtils.cpp#176</a>
the value of PlanarYCbCrImage::MAX_DIMENSIONS is set <a rel="nofollow" href="https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.h#825">https://searchfox.org/mozilla-central/source/gfx/layers/ImageContainer.h#825</a>
that's 16384 pixels wide

Other decoders use:
<a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/MediaData.cpp#106">https://searchfox.org/mozilla-central/source/dom/media/MediaData.cpp#106</a>
which checks that neither the width nor the height would be greater than 16384 pixels wide.

This bug is non-existent as such, and we would be attempting to fix a problem that doesn't exist at the expense of slowing down everything else.

In a YCbCrImage a stride typically is 16 bytes aligned due to the hardware code that generated it, and libyuv makes use of SSE accelerated code when the stride have such alignment.
If we made the stride == width, libyuv would then have to use a slow C code path.

When playing a 60fps video, slowing down what is already a heavy process will have a great impact.

I would close this bug as invalid</pre></div><div class="change-set" id="c26"><div class="comment" data-id="13020979" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_512198" id="a2434708_480271"><img src="https://secure.gravatar.com/avatar/6be4974bfc86cb50db580e5d5e7e78cb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_512198" id="a2434708_480271"><a class="email " href="/user_profile?user_id=512198" > <span class="fna">Jean-Yves Avenard [:jya]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 00:31 PST" data-time="1517905864">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="13020979">(In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c23">comment #23</a>)
<span class="quote">&gt; the code path in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c6">comment 6</a>). We don't have a PoC for either of these (the
&gt; original PoC is based on the pref'd off createImageBitmap function) but in
&gt; the end it doesn't really matter whether this is sec-high or sec-critical,
&gt; it needs to be fixed asap.</span >

then fix createImageBitmap to prevent creating such images... It would be a one-liner.

Do not touch a low-level routine that is called in a critical path.</pre></div><div class="change-set" id="c27"><div class="comment" data-id="13020981" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_512198" id="a2434708_480271"><img src="https://secure.gravatar.com/avatar/6be4974bfc86cb50db580e5d5e7e78cb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_512198" id="a2434708_480271"><a class="email " href="/user_profile?user_id=512198" > <span class="fna">Jean-Yves Avenard [:jya]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 00:31 PST" data-time="1517905915">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="13020981">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8942572" name="attach_8942572" title="Use source buffer width rather than stride.">attachment 8942572</a> <a href="/attachment.cgi?id=8942572&amp;action=edit" title="Use source buffer width rather than stride.">[details]</a> <a href="/attachment.cgi?id=8942572&amp;action=diff" title="Use source buffer width rather than stride.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8942572'>[review]</a>
Use source buffer width rather than stride.

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8942572" name="attach_8942572" title="Use source buffer width rather than stride.">attachment 8942572</a> <a href="/attachment.cgi?id=8942572&amp;action=edit" title="Use source buffer width rather than stride.">[details]</a> <a href="/attachment.cgi?id=8942572&amp;action=diff" title="Use source buffer width rather than stride.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8942572'>[review]</a>:
-----------------------------------------------------------------

the fix will do what it's supposed to do.
However, this is the wrong approach.

Fix the call site instead</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8942572&amp;action=edit"
           title="Use source buffer width rather than stride."
           class=""
        >Attachment #8942572</a> -
        Flags: review-</div></div></div><div class="change-set" id="c28"><div class="comment" data-id="13022580" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_380838" id="a2434708_480271"><img src="https://secure.gravatar.com/avatar/a3445a601e1943464cf1ee9117fe1fb4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_380838" id="a2434708_480271"><a class="email " href="/user_profile?user_id=380838" > <span class="fna">Matt Woodrow (:mattwoodrow)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 12:41 PST" data-time="1517949702">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="13022580">It seems like the fundamental issue here is that stride &lt; width. The stride is the number of bytes per row, and should always be greater or equal than the width * bytes-per-pixel.

We're allocating the destination buffer based on stride (as you'd expect, we don't want to bother trying to compact things), and then copying all the valid bytes into it (using the width).

That seems like expected behaviour, unfortunately the PoC testcase is passing a completely garbage stride, and nobody bothers to check.

We should just add some validation for the untrusted callers (createImageBitmap, and ChromiumCDMParent::RecvDecodedShmem) to ensure that the stride actually covers all bytes of the width, and the extents of the planes are within the buffer provided.

We could run this validation unconditionally in debug builds, so that we'd catch broken decoders, and just run it for the untrusted callers in opt builds.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(matt.woodrow)</span></div></div></div><div class="change-set" id="c29"><div class="comment" data-id="13023277" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2434708_480271"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a2434708_480271"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 17:16 PST" data-time="1517966166">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="13023277">(In reply to Matt Woodrow (:mattwoodrow) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c28">comment #28</a>)
<span class="quote">&gt; It seems like the fundamental issue here is that stride &lt; width. The stride
&gt; is the number of bytes per row, and should always be greater or equal than
&gt; the width * bytes-per-pixel.</span >

So why not check this? Is it too much of a performance cost? The basic issue here seems to be a difference in the allocation in CopyPlane vs the loop in CopyData. The size of the buffer is based on height and stride, and the loop in CopyData is based on height and width. I don't know enough about video formats to understand why there is a difference here, but the naive solution would seem to be to make the buffer allocation and the CopyData function use the same calculation(i.e. both take width into account, or neither).

But taking a step back: here we have a dangerous low-level function which has undocumented assumptions which has lead to a number of security issues. I'm struggling to understand why it's not better to fix this in the calling functions, rather than add check to the dangerous low-level function. Performance I guess, but I'm worried we haven't addressed all the issues. I'm pretty certain that the Sandboxing issue in ChromiumCDMParent needs to be fixed, but I'm unclear about other issues. Let me try to outline the issues that I see, so we can be sure we have resolved everything here. 

1. createImageBitmap 
This was the original PoC. I don't much care about this - its pref'd off, and known to be really broken. We should add the validation here I guess, but it's not a priority, since there is a lot more fixing that is needed before we would consider re-enabling this. (and as far as I know we don't plan to do this any time soon). 

2. Video decoding leading to CopyPlane 
So in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a>, jya seems pretty sure that _all_ of the video decoding paths to this issue are safe due to validation. To be honest I'm not convinced - mainly because in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a> he is talking about checking the maximum size, and that's not the point of the bug. This is NOT an overflow bug - it's a data validation issue leading to out-of-bounds write. This is complex code and I trust his knowledge better than mine, but I'm not sure if we are doing the correct validation here. I'm looking more into this (I don't completely understand <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a> yet).

3. The sandbox escape issue  
ChromiumCDMParent seems to me to pretty clearly be a sandbox escape. An attacker who has compromised the GMP sandbox could send arbitrary IPC messages to ChromiumCDMParent::RecvDecodedData or ChromiumCDMParent::RecvDecodedShmem. (PS Matt, why did you only mention RecvDecodedShmem? Aren't both of these functions a concern? I also wonder if these IPC message can ONLY be called from GMP, or can a regular child process also invoke these IPC calls? Either way, we need some validation here to avoid the sandbox escape. 

4. Other call sites
Is MediaEngineRemoteVideoSource::DeliverFrame[1] another call site? Are there others that we haven't discussed above? I haven't done an audit because I assumed we would fix the vulnerable function.
[1] <a rel="nofollow" href="https://searchfox.org/mozilla-central/source/dom/media/webrtc/MediaEngineRemoteVideoSource.cpp#553">https://searchfox.org/mozilla-central/source/dom/media/webrtc/MediaEngineRemoteVideoSource.cpp#553</a>

5. Correctness issues
At the end of <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c12">comment 12</a>, several correctness issues were highlighted. Are these valid issues that need fixing, or is <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c12">comment 12</a> incorrect?

I think that's everything. IF we are going down the route of fix the callsites, then someone needs to an audit to make sure we have got all the callers. Personally I'd rather that we just fix the dangerous function (if possible).</pre></div><div class="change-set" id="a2502933_434339"><div class="change" id="aa2502933_434339">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2502933_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_434339" id="a2502933_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2502933_434339"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2502933_434339">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2502933_434339">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 17:18 PST" data-time="1517966310">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: needinfo?(matt.woodrow)</div><div class="change">Flags: needinfo?(jyavenard)</div></div></div><div class="change-set" id="c30"><div class="comment" data-id="13023286" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2502933_434339"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a2502933_434339"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 17:22 PST" data-time="1517966567">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="13023286">Correction: paragraph two, sentence two - I mean I'm struggling to understand why we dont fix CopyPlane/CopyData instead the calling functions.</pre></div><div class="change-set" id="c31"><div class="comment" data-id="13023515" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_463180" id="a2502933_434339"><img src="https://secure.gravatar.com/avatar/855d38d1a17261e7b1e4783a9f1cce1a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_463180" id="a2502933_434339"><a class="email " href="/user_profile?user_id=463180" > <span class="fna">John Lin [:jhlin][:jolin]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-06 22:20 PST" data-time="1517984420">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="13023515">(In reply to Jean-Yves Avenard [:jya] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment #25</a>)
<span class="quote">&gt; 
&gt; In a YCbCrImage a stride typically is 16 bytes aligned due to the hardware
&gt; code that generated it, and libyuv makes use of SSE accelerated code when
&gt; the stride have such alignment.
&gt; If we made the stride == width, libyuv would then have to use a slow C code
&gt; path.
&gt; 
&gt; When playing a 60fps video, slowing down what is already a heavy process
&gt; will have a great impact.</span >

My understanding was that libyuv::CopyPlane() uses row width, not stride, to choose copy routine [1].  And when the width is not SIMD aligned, it still makes use of SIMD accelerated code as much as it can, so only the end of the row will be copied using memcpy().

[1] <a rel="nofollow" href="https://searchfox.org/mozilla-central/source/media/libvpx/libvpx/third_party/libyuv/source/planar_functions.cc#51">https://searchfox.org/mozilla-central/source/media/libvpx/libvpx/third_party/libyuv/source/planar_functions.cc#51</a></pre></div><div class="change-set" id="a2562008_170965"><div class="change" id="aa2562008_170965">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_170965" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/b13b00660f5b6351c2fbafb414f7a180?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_170965" id="a2562008_170965"><a class="email " href="/user_profile?user_id=170965" > <span class="fna">Ralph Giles (:rillian)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2562008_170965"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2562008_170965">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2562008_170965">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 09:43 PST" data-time="1518025385">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox58&amp;o1=isnotempty">status-firefox58</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox58&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox59&amp;o1=isnotempty">status-firefox59</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox59&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox60&amp;o1=isnotempty">status-firefox60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox60&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox58&amp;o1=isnotempty">tracking-firefox58</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox58&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox59&amp;o1=isnotempty">tracking-firefox59</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox59&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox60&amp;o1=isnotempty">tracking-firefox60</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox60&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">Target Milestone: --- &rarr; mozilla60</div><div class="change">Version: unspecified &rarr; Trunk</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="13026008" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_380838" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/a3445a601e1943464cf1ee9117fe1fb4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_380838" id="a2562008_170965"><a class="email " href="/user_profile?user_id=380838" > <span class="fna">Matt Woodrow (:mattwoodrow)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 13:53 PST" data-time="1518040392">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="13026008">(In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c30">comment #30</a>)
<span class="quote">&gt; Correction: paragraph two, sentence two - I mean I'm struggling to
&gt; understand why we dont fix CopyPlane/CopyData instead the calling functions.</span >

I think the behaviour of CopyPlane is what we want, so I'd aruge that it isn't broken.

We should definitely add a runtime assertion that detects that exploitable case (width &gt; stride), so that we crash safely if it happens.

It's really up to the callers to detect it normally though, since only they know what the right rejection behaviour is.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(matt.woodrow)</span></div></div></div><div class="change-set" id="c33"><div class="comment" data-id="13026090" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a2562008_170965"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 14:15 PST" data-time="1518041718">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="13026090">(In reply to Matt Woodrow (:mattwoodrow) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c32">comment #32</a>)
<span class="quote">&gt; (In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c30">comment #30</a>)
&gt; &gt; Correction: paragraph two, sentence two - I mean I'm struggling to
&gt; &gt; understand why we dont fix CopyPlane/CopyData instead the calling functions.
&gt; 
&gt; I think the behaviour of CopyPlane is what we want, so I'd aruge that it
&gt; isn't broken.</span >

Are you saying that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c12">comment 12</a> is wrong then? Or are you talking in a general sense?

<span class="quote">&gt; 
&gt; We should definitely add a runtime assertion that detects that exploitable
&gt; case (width &gt; stride), so that we crash safely if it happens.</span >

Do you mean add a runtime assertion to release builds to crash safely in this case? Or to debug builds? Its not much use adding it to debug builds unless we are actually fuzzing to try to hit these cases.</pre></div><div class="change-set" id="c34"><div class="comment" data-id="13026124" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_380838" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/a3445a601e1943464cf1ee9117fe1fb4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_380838" id="a2562008_170965"><a class="email " href="/user_profile?user_id=380838" > <span class="fna">Matt Woodrow (:mattwoodrow)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 14:30 PST" data-time="1518042614">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="13026124">(In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c33">comment #33</a>)
 
<span class="quote">&gt; Are you saying that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c12">comment 12</a> is wrong then? Or are you talking in a
&gt; general sense?</span >

For the general case, having stride and width specified separately lets us have each row start at an aligned address even for odd numbered widths. We don't want to allocate our destination based on the width, since it'll undo this alignment and potentially give worse performance.

The other bugs mentioned there seem valid, and in the case where copying is converting from interleaved to planar, we probably want to recompute the stride to be something sane for the destination format.


<span class="quote">&gt; Do you mean add a runtime assertion to release builds to crash safely in
&gt; this case? Or to debug builds? Its not much use adding it to debug builds
&gt; unless we are actually fuzzing to try to hit these cases.</span >

Right, I meant a release assertion as a last line of defense.</pre></div><div class="change-set" id="c35"><div class="comment" data-id="13026359" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2562008_170965"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 16:11 PST" data-time="1518048671">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8949238"
         class="attachment patch obsolete"
         data-id="8949238" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="Bug-1428947---Check-plane-width--stride-constraint.patch">
      <meta itemprop="contentSize" content="4105">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8949238">
          <a class="link" href="attachment.cgi?id=8949238&amp;action=diff">
        <span id="att-8949238-description" itemprop="description">Check plane width &amp; stride constraints. r?mattwoodrow</span></a> (obsolete)
        — <a href="attachment.cgi?id=8949238&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949238">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-35" data-comment-id="13026359">MozReview-Commit-ID: HEcMG4JoEl3</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949238&amp;action=edit"
           title="Check plane width &amp; stride constraints. r?mattwoodrow"
           class=""
        >Attachment #8949238</a> -
        Flags: review?(matt.woodrow)</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="13026377" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2562008_170965"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 16:15 PST" data-time="1518048959">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="13026377">I'm in agreement with :mattwoodrow about the required behaviour for `CopyPlane`. I've added a MOZ_ASSERT_RELEASE to `CopyPlane` and add a check for `width &lt; stride` in `MediaData::ValidatePlane`.

The problem with the `createImageBitmap` code is that there is *no* validation of the values in `ChannelPixelLayout` received from JS. Is this API supposed to be generally accessible? ie. Is it planned that the pref gate be removed?</pre></div><div class="change-set" id="c37"><div class="comment" data-id="13026380" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2562008_170965"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2562008_170965"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 16:18 PST" data-time="1518049089">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8949244"
         class="attachment patch obsolete"
         data-id="8949244" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="Bug-1428947---Check-plane-width--stride-constraint.patch">
      <meta itemprop="contentSize" content="4091">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8949244">
          <a class="link" href="attachment.cgi?id=8949244&amp;action=diff">
        <span id="att-8949244-description" itemprop="description">Check plane width &amp; stride constraints. r?mattwoodrow</span></a> (obsolete)
        — <a href="attachment.cgi?id=8949244&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949244">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-37" data-comment-id="13026380">MozReview-Commit-ID: HEcMG4JoEl3</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949244&amp;action=edit"
           title="Check plane width &amp; stride constraints. r?mattwoodrow"
           class=""
        >Attachment #8949244</a> -
        Flags: review?(matt.woodrow)</div></div></div><div class="change-set" id="a2585714_480271"><div class="change" id="aa2585714_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2585714_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2585714_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2585714_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2585714_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2585714_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 16:18 PST" data-time="1518049091">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949238&amp;action=edit"
           title="Check plane width &amp; stride constraints. r?mattwoodrow"
           class=""
        >Attachment #8949238</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8949238&amp;action=edit"
           title="Check plane width &amp; stride constraints. r?mattwoodrow"
           class=""
        >Attachment #8949238</a> -
        Flags: <span class="activity-deleted">review?(matt.woodrow)</span></div></div></div><div class="change-set" id="c38"><div class="comment" data-id="13026496" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_380838" id="a2585714_480271"><img src="https://secure.gravatar.com/avatar/a3445a601e1943464cf1ee9117fe1fb4?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_380838" id="a2585714_480271"><a class="email " href="/user_profile?user_id=380838" > <span class="fna">Matt Woodrow (:mattwoodrow)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 17:05 PST" data-time="1518051930">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="13026496">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8949244" name="attach_8949244" title="Check plane width &amp; stride constraints. r?mattwoodrow">attachment 8949244</a> <a href="/attachment.cgi?id=8949244&amp;action=edit" title="Check plane width &amp; stride constraints. r?mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8949244&amp;action=diff" title="Check plane width &amp; stride constraints. r?mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8949244'>[review]</a>
Check plane width &amp; stride constraints. r?mattwoodrow

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8949244" name="attach_8949244" title="Check plane width &amp; stride constraints. r?mattwoodrow">attachment 8949244</a> <a href="/attachment.cgi?id=8949244&amp;action=edit" title="Check plane width &amp; stride constraints. r?mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8949244&amp;action=diff" title="Check plane width &amp; stride constraints. r?mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8949244'>[review]</a>:
-----------------------------------------------------------------

::: gfx/layers/ImageContainer.cpp
&#64;&#64; +595,5 &#64;&#64;
<span class="quote">&gt; +  CopyPlane(mData.mYChannel,
&gt; +            aData.mYChannel,
&gt; +            mData.mYSize,
&gt; +            mData.mYStride,
&gt; +            mData.mYSkip);</span >

Don't we want aData.mYSkip here (the skip for the source), since mData.mYSkip is always 0?</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949244&amp;action=edit"
           title="Check plane width &amp; stride constraints. r?mattwoodrow"
           class=""
        >Attachment #8949244</a> -
        Flags: review?(matt.woodrow) &rarr; review+</div></div></div><div class="change-set" id="c39"><div class="comment" data-id="13026654" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2585714_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2585714_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 19:15 PST" data-time="1518059751">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8949264"
         class="attachment patch obsolete"
         data-id="8949264" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="Bug-1428947---Check-plane-width--stride-constraint.patch">
      <meta itemprop="contentSize" content="3783">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8949264">
          <a class="link" href="attachment.cgi?id=8949264&amp;action=diff">
        <span id="att-8949264-description" itemprop="description">Check plane width &amp; stride constraints. r=mattwoodrow</span></a> (obsolete)
        — <a href="attachment.cgi?id=8949264&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949264">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-39" data-comment-id="13026654">MozReview-Commit-ID: HEcMG4JoEl3</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949264&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8949264</a> -
        Flags: review+</div></div></div><div class="change-set" id="a2596376_480271"><div class="change" id="aa2596376_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2596376_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2596376_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2596376_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2596376_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2596376_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 19:15 PST" data-time="1518059753">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949244&amp;action=edit"
           title="Check plane width &amp; stride constraints. r?mattwoodrow"
           class=""
        >Attachment #8949244</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="13026655" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2596376_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2596376_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 19:16 PST" data-time="1518059807">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-40" data-comment-id="13026655">(In reply to Matt Woodrow (:mattwoodrow) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c38">comment #38</a>)
<span class="quote">&gt; Don't we want aData.mYSkip here (the skip for the source), since
&gt; mData.mYSkip is always 0?</span >

Correct, I messed up.</pre></div><div class="change-set" id="c41"><div class="comment" data-id="13026705" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2596376_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2596376_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 20:18 PST" data-time="1518063538">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8949272"
         class="attachment patch obsolete"
         data-id="8949272" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="Bug-1428947---Check-plane-width--stride-constraint.patch">
      <meta itemprop="contentSize" content="3782">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8949272">
          <a class="link" href="attachment.cgi?id=8949272&amp;action=diff">
        <span id="att-8949272-description" itemprop="description">Check plane width &amp; stride constraints. r=mattwoodrow</span></a> (obsolete)
        — <a href="attachment.cgi?id=8949272&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8949272">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-41" data-comment-id="13026705">MozReview-Commit-ID: HEcMG4JoEl3</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949272&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8949272</a> -
        Flags: review+</div></div></div><div class="change-set" id="a2600162_480271"><div class="change" id="aa2600162_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2600162_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2600162_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2600162_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2600162_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2600162_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-07 20:18 PST" data-time="1518063539">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949264&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8949264</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="a2640094_580382"><div class="change" id="aa2640094_580382">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a2640094_580382"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_580382" id="a2640094_580382"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2640094_580382"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2640094_580382">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2640094_580382">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-08 07:24 PST" data-time="1518103471">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox58&amp;o1=isnotempty">status-firefox58</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox58&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox58&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox58&amp;o1=isnotempty">tracking-firefox58</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox58&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox58&amp;o1=equals&amp;v1=-">-</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox59&amp;o1=isnotempty">tracking-firefox59</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox59&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox59&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox60&amp;o1=isnotempty">tracking-firefox60</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox60&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox60&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="c42"><div class="comment" data-id="13029583" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2640094_580382"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a2640094_580382"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-08 19:58 PST" data-time="1518148709">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="13029583">(In reply to Matt Woodrow (:mattwoodrow) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c34">comment #34</a>)
<span class="quote">&gt; (In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c33">comment #33</a>)
&gt;  
&gt; &gt; Are you saying that <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c12">comment 12</a> is wrong then? Or are you talking in a
&gt; &gt; general sense?
&gt; 
&gt; For the general case, having stride and width specified separately lets us
&gt; have each row start at an aligned address even for odd numbered widths. We
&gt; don't want to allocate our destination based on the width, since it'll undo
&gt; this alignment and potentially give worse performance.
&gt; 
&gt; The other bugs mentioned there seem valid, and in the case where copying is
&gt; converting from interleaved to planar, we probably want to recompute the
&gt; stride to be something sane for the destination format.
&gt; 
&gt; 
&gt; &gt; Do you mean add a runtime assertion to release builds to crash safely in
&gt; &gt; this case? Or to debug builds? Its not much use adding it to debug builds
&gt; &gt; unless we are actually fuzzing to try to hit these cases.
&gt; 
&gt; Right, I meant a release assertion as a last line of defense.</span >

Ah great, this approach works for me - thanks!</pre></div><div class="change-set" id="c43"><div class="comment" data-id="13033809" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2640094_580382"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2640094_580382"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 15:31 PST" data-time="1518391890">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8950113"
         class="attachment patch"
         data-id="8950113" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="Bug-1428947---Check-plane-width--stride-constraint.patch">
      <meta itemprop="contentSize" content="3911">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8950113">
          <a class="link" href="attachment.cgi?id=8950113&amp;action=diff">
        <span id="att-8950113-description" itemprop="description">Check plane width &amp; stride constraints. r=mattwoodrow</span></a>
        — <a href="attachment.cgi?id=8950113&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8950113">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-43" data-comment-id="13033809">MozReview-Commit-ID: HEcMG4JoEl3</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8950113&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8950113</a> -
        Flags: review+</div></div></div><div class="change-set" id="a2928515_480271"><div class="change" id="aa2928515_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2928515_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2928515_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2928515_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2928515_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2928515_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 15:31 PST" data-time="1518391892">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8949272&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8949272</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c44"><div class="comment" data-id="13033813" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2928515_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2928515_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 15:36 PST" data-time="1518392197">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="13033813">try - <a rel="nofollow" href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=ed1e7cbb99544761f2beafea18415948a613a447">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=ed1e7cbb99544761f2beafea18415948a613a447</a></pre></div><div class="change-set" id="a2929390_480271"><div class="change" id="aa2929390_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2929390_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2929390_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2929390_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2929390_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2929390_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 15:46 PST" data-time="1518392767">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></div></div></div><div class="change-set" id="a2929743_480271"><div class="change" id="aa2929743_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2929743_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a2929743_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2929743_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2929743_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a2929743_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 15:52 PST" data-time="1518393120">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></span></div></div></div><div class="change-set" id="c45"><div class="comment" data-id="13033831" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2929743_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2929743_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 16:09 PST" data-time="1518394184">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="13033831">Comment on <span class=""><a href="/attachment.cgi?id=8950113" name="attach_8950113" title="Check plane width &amp; stride constraints. r=mattwoodrow">attachment 8950113</a> <a href="/attachment.cgi?id=8950113&amp;action=edit" title="Check plane width &amp; stride constraints. r=mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8950113&amp;action=diff" title="Check plane width &amp; stride constraints. r=mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8950113'>[review]</a>
Check plane width &amp; stride constraints. r=mattwoodrow

[Security approval request comment]
How easily could an exploit be constructed based on the patch?

    This bug, before patch, is dangerous if the imagebitmap extensions are
    enabled, but that requires a pref to be enabled by a user.

    The other code paths to CopyPlane are protected by check
    MediaData::ValidatePlane, which was tighted to assert width &lt; stride. To
    exploit this would require video decoders to return incorrect values,
    which is unlikely, or crafting an incorrect IPDL message from CDM.

    :mattwoodrow suggest this patch could be re-classified as sec-low

Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?

    The comment hints at an issue with width &amp; stride but it's not obvious how
    to trigger the behaviour.

Which older supported branches are affected by this flaw? 
 
    57, 58, 59, 60

If not all supported branches, which bug introduced the flaw?

Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?

    No, but the code affected code hasn't changed since 2012.

How likely is this patch to cause regressions; how much testing does it need?
 
    Low, the code is tested by the existing media/video mochitests.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8950113&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8950113</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c46"><div class="comment" data-id="13033857" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a2929743_480271"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a2929743_480271"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-11 16:59 PST" data-time="1518397152">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="13033857">(In reply to Dan Glastonbury :kamidphish from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c45">comment #45</a>)
<span class="quote">&gt; Comment on <span class=""><a href="/attachment.cgi?id=8950113" name="attach_8950113" title="Check plane width &amp; stride constraints. r=mattwoodrow">attachment 8950113</a> <a href="/attachment.cgi?id=8950113&amp;action=edit" title="Check plane width &amp; stride constraints. r=mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8950113&amp;action=diff" title="Check plane width &amp; stride constraints. r=mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8950113'>[review]</a>
&gt; Check plane width &amp; stride constraints. r=mattwoodrow
&gt; 
&gt; [Security approval request comment]
&gt; How easily could an exploit be constructed based on the patch?
&gt; 
&gt;     This bug, before patch, is dangerous if the imagebitmap extensions are
&gt;     enabled, but that requires a pref to be enabled by a user.
&gt; 
&gt;     The other code paths to CopyPlane are protected by check
&gt;     MediaData::ValidatePlane, which was tighted to assert width &lt; stride. To
&gt;     exploit this would require video decoders to return incorrect values,
&gt;     which is unlikely, or crafting an incorrect IPDL message from CDM.
&gt; 
&gt;     :mattwoodrow suggest this patch could be re-classified as sec-low</span >

I don't think this is sec-low. It might not be sec-critical - as I said above, I was changing the criticality because it looked exploitable from the web, even without imagebitmap. I'm not sure if this bug was exploitable or not via video or webrtc paths (at least <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a> doesn't convince me it safe).  But even assuming this bug was ONLY exploitable via a malformed IPC message, we typically rate these sorts of sandbox escape bugs sec-high, and this one being exploitable from the CDM is rare (and hence more valuable to an attacker). 

My gut feel here is bug is probably only sec-high, due to the sandbox escape, and the difficulty of exploitation via video paths (if thats even possible). At the end of the day it doesn't really matter. Its clearly a bug and we have a fix available.</pre></div><div class="change-set" id="c47"><div class="comment" data-id="13035320" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a2929743_480271"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a2929743_480271"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-12 01:34 PST" data-time="1518428049">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="13035320">(In reply to Dan Glastonbury :kamidphish from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c45">comment #45</a>)
<span class="quote">&gt; Which older supported branches are affected by this flaw? 
&gt;  
&gt;     57, 58, 59, 60
&gt; 
&gt; If not all supported branches, which bug introduced the flaw?
&gt; 
&gt; Do you have backports for the affected branches? If not, how different, hard
&gt; to create, and risky will they be?
&gt; 
&gt;     No, but the code affected code hasn't changed since 2012.
&gt; </span >
If the code hasn't changed since 2012 how come 52 is not affected?</pre><div class="activity"><div class="change">Flags: needinfo?(dglastonbury)</div></div></div><div class="change-set" id="c48"><div class="comment" data-id="13037884" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a2929743_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a2929743_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-12 18:09 PST" data-time="1518487755">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-48" data-comment-id="13037884">(In reply to Julien Cristau [:jcristau] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c47">comment #47</a>)
<span class="quote">&gt; If the code hasn't changed since 2012 how come 52 is not affected?</span >

You're right, 52 is affected. Why does 58 get a &quot;won't fix&quot;?</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=isnotempty">status-firefox-esr52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_thunderbird_esr52&amp;o1=isnotempty">status-thunderbird_esr52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_thunderbird_esr52&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">Flags: <span class="activity-deleted">needinfo?(dglastonbury)</span></div></div></div><div class="change-set" id="c49"><div class="comment" data-id="13037923" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a2929743_480271"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a2929743_480271"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-12 18:52 PST" data-time="1518490365">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-49" data-comment-id="13037923">
<span class="quote">&gt; You're right, 52 is affected. Why does 58 get a &quot;won't fix&quot;?</span >

Because we already shipped 58 and lack a time machine.

sec-approval+ for trunk (60). Please nominate a patch for beta (59) as well.

I'm not sure this is a sec-critical really if this is disabled by a pref by default for users but I'll give the sec-approval anyway.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=isnotempty">tracking-firefox-esr52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=equals&amp;v1=59%2B">59+</a></div></div></div><div class="change-set" id="a3027014_280903"><div class="change" id="aa3027014_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a3027014_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a3027014_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3027014_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3027014_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a3027014_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-12 18:53 PST" data-time="1518490391">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8950113&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8950113</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="a3188252_480271"><div class="change" id="aa3188252_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3188252_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3188252_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a3188252_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-14 15:40 PST" data-time="1518651629">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8942572&amp;action=edit"
           title="Use source buffer width rather than stride."
           class=""
        >Attachment #8942572</a> -
        Attachment is obsolete: true</div></div></div><div class="change-set" id="c50"><div class="comment" data-id="13043687" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-14 20:07 PST" data-time="1518667620">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8951132"
         class="attachment patch"
         data-id="8951132" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="Bug-1428947---ESR-52---Check-plane-width--stride-c.patch">
      <meta itemprop="contentSize" content="3833">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8951132">
          <a class="link" href="attachment.cgi?id=8951132&amp;action=diff">
        <span id="att-8951132-description" itemprop="description">ESR 52 - Check plane width &amp; stride constraints.</span></a>
        — <a href="attachment.cgi?id=8951132&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1428947&attachment=8951132">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-50" data-comment-id="13043687">MozReview-Commit-ID: 328ETwMdVnq</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8951132&amp;action=edit"
           title="ESR 52 - Check plane width &amp; stride constraints."
           class=""
        >Attachment #8951132</a> -
        Flags: review+</div></div></div><div class="change-set" id="c51"><div class="comment" data-id="13043699" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-14 20:14 PST" data-time="1518668067">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="13043699">Comment on <span class=""><a href="/attachment.cgi?id=8950113" name="attach_8950113" title="Check plane width &amp; stride constraints. r=mattwoodrow">attachment 8950113</a> <a href="/attachment.cgi?id=8950113&amp;action=edit" title="Check plane width &amp; stride constraints. r=mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8950113&amp;action=diff" title="Check plane width &amp; stride constraints. r=mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8950113'>[review]</a>
Check plane width &amp; stride constraints. r=mattwoodrow

Approval Request Comment
[Feature/Bug causing the regression]: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947">Bug 1428947</a>
[User impact if declined]: If a user has canvas.imagebitmap_extensions.enabled set, incorrectly specifying image parameters can lead to OOB write.
[Is this code covered by automated tests?]: Correct behaviour, yes, Incorrect behaviour, no. (because it asserts)
[Has the fix been verified in Nightly?]: Yes 
[Needs manual test from QE? If yes, steps to reproduce]: No
[List of other uplifts needed for the feature/fix]: No
[Is the change risky?]: No
[Why is the change risky/not risky?]: Small, easily code reviewed change.
[String changes made/needed]: None</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8950113&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8950113</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c52"><div class="comment" data-id="13043700" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-14 20:17 PST" data-time="1518668279">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="13043700">Comment on <span class=""><a href="/attachment.cgi?id=8951132" name="attach_8951132" title="ESR 52 - Check plane width &amp; stride constraints.">attachment 8951132</a> <a href="/attachment.cgi?id=8951132&amp;action=edit" title="ESR 52 - Check plane width &amp; stride constraints.">[details]</a> <a href="/attachment.cgi?id=8951132&amp;action=diff" title="ESR 52 - Check plane width &amp; stride constraints.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8951132'>[review]</a>
ESR 52 - Check plane width &amp; stride constraints.

[Approval Request Comment]
This is a sec:{high,crit} bug.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8951132&amp;action=edit"
           title="ESR 52 - Check plane width &amp; stride constraints."
           class=""
        >Attachment #8951132</a> -
        Flags: approval-mozilla-esr52?</div></div></div><div class="change-set" id="c53"><div class="comment" data-id="13043776" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_538805" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-14 21:33 PST" data-time="1518672799">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-53" data-comment-id="13043776">Comment on <span class=""><a href="/attachment.cgi?id=8950113" name="attach_8950113" title="Check plane width &amp; stride constraints. r=mattwoodrow">attachment 8950113</a> <a href="/attachment.cgi?id=8950113&amp;action=edit" title="Check plane width &amp; stride constraints. r=mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8950113&amp;action=diff" title="Check plane width &amp; stride constraints. r=mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8950113'>[review]</a>
Check plane width &amp; stride constraints. r=mattwoodrow

Sec-crit, Beta59+</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8950113&amp;action=edit"
           title="Check plane width &amp; stride constraints. r=mattwoodrow"
           class=""
        >Attachment #8950113</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="c54"><div class="comment" data-id="13043777" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_538805" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-14 21:33 PST" data-time="1518672827">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="13043777">Comment on <span class=""><a href="/attachment.cgi?id=8951132" name="attach_8951132" title="ESR 52 - Check plane width &amp; stride constraints.">attachment 8951132</a> <a href="/attachment.cgi?id=8951132&amp;action=edit" title="ESR 52 - Check plane width &amp; stride constraints.">[details]</a> <a href="/attachment.cgi?id=8951132&amp;action=diff" title="ESR 52 - Check plane width &amp; stride constraints.">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8951132'>[review]</a>
ESR 52 - Check plane width &amp; stride constraints.

sec-crit, ESR52+</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8951132&amp;action=edit"
           title="ESR 52 - Check plane width &amp; stride constraints."
           class=""
        >Attachment #8951132</a> -
        Flags: approval-mozilla-esr52? &rarr; approval-mozilla-esr52+</div></div></div><div class="change-set" id="c55"><div class="comment" data-id="13044294" data-no="55"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a3188252_480271"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a3188252_480271"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-15 03:17 PST" data-time="1518693433">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="13044294"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-beta/rev/bcf52fbf8445">https://hg.mozilla.org/releases/mozilla-beta/rev/bcf52fbf8445</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox59&amp;o1=isnotempty">status-firefox59</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox59&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox59&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c56"><div class="comment" data-id="13044700" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a3188252_480271"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-15 06:49 PST" data-time="1518706195">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-56" data-comment-id="13044700">Did you also push this to trunk?</pre><div class="activity"><div class="change">Flags: needinfo?(dglastonbury)</div></div></div><div class="change-set" id="c57"><div class="comment" data-id="13051680" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a3188252_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_480271" id="a3188252_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-18 17:36 PST" data-time="1519004165">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-57" data-comment-id="13051680">I thought this had to be coordinated any would all be checked in together.

Pushing to trunk.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dglastonbury)</span></div></div></div><div class="change-set" id="a3542629_480271"><div class="change" id="aa3542629_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a3542629_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a3542629_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3542629_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3542629_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a3542629_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-18 18:06 PST" data-time="1519006006">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></div></div></div><div class="change-set" id="c58"><div class="comment" data-id="13052165" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_258347" id="a3542629_480271"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_258347" id="a3542629_480271"><a class="email " href="/user_profile?user_id=258347" > <span class="fna">Sebastian Hengst [:aryx] (needinfo on intermittent or backout)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-19 01:56 PST" data-time="1519034169">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-58" data-comment-id="13052165"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/5c26e5d346800ba720f32d0a8f1a872c34f31184">https://hg.mozilla.org/integration/mozilla-inbound/rev/5c26e5d346800ba720f32d0a8f1a872c34f31184</a>
<a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/5c26e5d34680">https://hg.mozilla.org/mozilla-central/rev/5c26e5d34680</a></pre><div class="activity"><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2018-02-19 01:56 PST" data-time="1519034169">4 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox60&amp;o1=isnotempty">status-firefox60</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox60&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox60&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Keywords: <span class="activity-deleted"><a href="/buglist.cgi?keywords=checkin-needed&amp;resolution=---">checkin-needed</a></span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="c59"><div class="comment" data-id="13056012" data-no="59"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-59" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a3542629_480271"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a3542629_480271"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-20 13:25 PST" data-time="1519161919">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-59" data-comment-id="13056012"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-esr52/rev/456913d7e8b5">https://hg.mozilla.org/releases/mozilla-esr52/rev/456913d7e8b5</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=isnotempty">status-firefox-esr52</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_thunderbird_esr52&amp;o1=isnotempty">status-thunderbird_esr52</a>:
          <a href="/buglist.cgi?f1=cf_status_thunderbird_esr52&amp;o1=equals&amp;v1=affected">affected</a> &rarr; ---</div></div></div><div class="change-set" id="a3706457_1689"><div class="change" id="aa3706457_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a3706457_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a3706457_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3706457_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3706457_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a3706457_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-20 15:37 PST" data-time="1519169834">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: gfx-core-security &rarr; core-security-release</div></div></div><div class="change-set" id="a3878790_1689"><div class="change" id="aa3878790_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a3878790_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a3878790_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3878790_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3878790_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a3878790_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-02-22 15:29 PST" data-time="1519342167">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">sec-bounty?</span></div><div class="change">Flags: sec-bounty+</div><div class="change">Flags: needinfo?(dveditz)</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-critical&amp;resolution=---">sec-critical</a> &rarr; <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a></div></div></div><div class="change-set" id="a4432092_512198"><div class="change" id="aa4432092_512198">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_512198" id="a4432092_512198"><img src="https://secure.gravatar.com/avatar/6be4974bfc86cb50db580e5d5e7e78cb?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_512198" id="a4432092_512198"><a class="email " href="/user_profile?user_id=512198" > <span class="fna">Jean-Yves Avenard [:jya]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4432092_512198"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4432092_512198">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a4432092_512198">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-01 01:11 PST" data-time="1519895469">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jyavenard)</span></div></div></div><div class="change-set" id="a4548971_452604"><div class="change" id="aa4548971_452604">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452604" id="a4548971_452604"><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_452604" id="a4548971_452604"><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">Matt Wobensmith [:mwobensmith][:matt:]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4548971_452604"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4548971_452604">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a4548971_452604">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-02 09:39 PST" data-time="1520012348">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify-</div><div class="change">Whiteboard: [original repoter is bzdllx&#64;gmail.com] &rarr; [original repoter is bzdllx&#64;gmail.com][post-critsmash-triage]</div></div></div><div class="change-set" id="c61"><div class="comment" data-id="13109863" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-61" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a4548971_452604"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a4548971_452604"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-06 16:41 PST" data-time="1520383271">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-61" data-comment-id="13109863">Premature bounty marking, restoring nomination.</pre><div class="activity"><div class="change">Flags: sec-bounty+ &rarr; sec-bounty?</div></div></div><div class="change-set" id="a4920250_1689"><div class="change" id="aa4920250_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a4920250_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a4920250_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a4920250_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a4920250_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a4920250_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-06 16:47 PST" data-time="1520383627">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dveditz)</span></div></div></div><div class="change-set" id="c62"><div class="comment" data-id="13109884" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-62" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a4920250_1689"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a4920250_1689"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-06 16:50 PST" data-time="1520383803">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-62" data-comment-id="13109884">(In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c46">comment #46</a>)
<span class="quote">&gt; (In reply to Dan Glastonbury :kamidphish from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c45">comment #45</a>)
&gt; &gt; Comment on <span class=""><a href="/attachment.cgi?id=8950113" name="attach_8950113" title="Check plane width &amp; stride constraints. r=mattwoodrow">attachment 8950113</a> <a href="/attachment.cgi?id=8950113&amp;action=edit" title="Check plane width &amp; stride constraints. r=mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8950113&amp;action=diff" title="Check plane width &amp; stride constraints. r=mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8950113'>[review]</a>
&gt; &gt; Check plane width &amp; stride constraints. r=mattwoodrow
&gt; &gt; 
&gt; &gt; [Security approval request comment]
&gt; &gt; How easily could an exploit be constructed based on the patch?
&gt; &gt; 
&gt; &gt;     This bug, before patch, is dangerous if the imagebitmap extensions are
&gt; &gt;     enabled, but that requires a pref to be enabled by a user.
&gt; &gt; 
&gt; &gt;     The other code paths to CopyPlane are protected by check
&gt; &gt;     MediaData::ValidatePlane, which was tighted to assert width &lt; stride. To
&gt; &gt;     exploit this would require video decoders to return incorrect values,
&gt; &gt;     which is unlikely, or crafting an incorrect IPDL message from CDM.
&gt; &gt; 
&gt; &gt;     :mattwoodrow suggest this patch could be re-classified as sec-low
&gt; 
&gt; I don't think this is sec-low. It might not be sec-critical - as I said
&gt; above, I was changing the criticality because it looked exploitable from the
&gt; web, even without imagebitmap.</span >

I'm confused. The devs here says that it isn't exploitable if canvas.imagebitmap_extensions.enabled isn't set and that is not set by default for users. How would this be a sec-critical then?

<span class="quote">&gt; I'm not sure if this bug was exploitable or
&gt; not via video or webrtc paths (at least <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a> doesn't convince me it
&gt; safe).</span >

Do we have any evidence that it is exploitable that way?

<span class="quote">&gt; But even assuming this bug was ONLY exploitable via a malformed IPC
&gt; message, we typically rate these sorts of sandbox escape bugs sec-high, and
&gt; this one being exploitable from the CDM is rare (and hence more valuable to
&gt; an attacker). </span >

 But it is still pref'd off by default, right?
 
<span class="quote">&gt; My gut feel here is bug is probably only sec-high, due to the sandbox
&gt; escape, and the difficulty of exploitation via video paths (if thats even
&gt; possible). At the end of the day it doesn't really matter. Its clearly a bug
&gt; and we have a fix available.</span >

 Well, it matters for things like advisories and bounties. We don't award bounties on sec-low bugs and we don't write advisories for things that are disabled by default. 

I'd love a definitive answer from the devs since we're shipping Firefox 59 in a week and I have to figure out if this bug is rated correctly and if it needs a security advisory or not.</pre><div class="activity"><div class="change">Flags: needinfo?(dglastonbury)</div></div></div><div class="change-set" id="c63"><div class="comment" data-id="13109973" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-63" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a4920250_1689"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a4920250_1689"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-06 17:54 PST" data-time="1520387683">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-63" data-comment-id="13109973">(In reply to Al Billings [:abillings] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c62">comment #62</a>)
<span class="quote">&gt; (In reply to Paul Theriault [:pauljt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c46">comment #46</a>)
&gt; &gt; (In reply to Dan Glastonbury :kamidphish from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c45">comment #45</a>)
&gt; &gt; &gt; Comment on <span class=""><a href="/attachment.cgi?id=8950113" name="attach_8950113" title="Check plane width &amp; stride constraints. r=mattwoodrow">attachment 8950113</a> <a href="/attachment.cgi?id=8950113&amp;action=edit" title="Check plane width &amp; stride constraints. r=mattwoodrow">[details]</a> <a href="/attachment.cgi?id=8950113&amp;action=diff" title="Check plane width &amp; stride constraints. r=mattwoodrow">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1428947&amp;attachment=8950113'>[review]</a>
&gt; &gt; &gt; Check plane width &amp; stride constraints. r=mattwoodrow
&gt; &gt; &gt; 
&gt; &gt; &gt; [Security approval request comment]
&gt; &gt; &gt; How easily could an exploit be constructed based on the patch?
&gt; &gt; &gt; 
&gt; &gt; &gt;     This bug, before patch, is dangerous if the imagebitmap extensions are
&gt; &gt; &gt;     enabled, but that requires a pref to be enabled by a user.
&gt; &gt; &gt; 
&gt; &gt; &gt;     The other code paths to CopyPlane are protected by check
&gt; &gt; &gt;     MediaData::ValidatePlane, which was tighted to assert width &lt; stride. To
&gt; &gt; &gt;     exploit this would require video decoders to return incorrect values,
&gt; &gt; &gt;     which is unlikely, or crafting an incorrect IPDL message from CDM.
&gt; &gt; &gt; 
&gt; &gt; &gt;     :mattwoodrow suggest this patch could be re-classified as sec-low
&gt; &gt; 
&gt; &gt; I don't think this is sec-low. It might not be sec-critical - as I said
&gt; &gt; above, I was changing the criticality because it looked exploitable from the
&gt; &gt; web, even without imagebitmap.
&gt; 
&gt; I'm confused. The devs here says that it isn't exploitable if
&gt; canvas.imagebitmap_extensions.enabled isn't set and that is not set by
&gt; default for users. How would this be a sec-critical then?</span >

Because the vulnerable code in question, highlighted in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c0">comment 0</a>, is reachable by many code paths. The 4 main ones are:
 - The createImageBitmap thing, which we dont really care about
 - Via a malformed video (but jya thinks this is actually impossible but I didnt know that when I rated it)
 - possibly via webrtc  (I dont think this was inviestigated but the fix will fix this case if it was vulnerable)
 - via a malformed IPC message from the GMP sandbox (requires an additional exploit to get code exec in sandbox first)

ONLY the last one has been confirmed to be an issue. I'll be honest, I'm not convinced that _all_ other paths are safe, but it doesn't really matter, its easier just to fix it. 

<span class="quote">&gt; 
&gt; &gt; I'm not sure if this bug was exploitable or
&gt; &gt; not via video or webrtc paths (at least <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a> doesn't convince me it
&gt; &gt; safe).
&gt; 
&gt; Do we have any evidence that it is exploitable that way?</span >

Only from code review. The only one Im sure about is the sandbox escape But it IS clear that this function is unsafe, and the only comment which address this is <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - OOB Write in CopyPlane within ImageContainer.cpp"
   href="/show_bug.cgi?id=1428947#c25">comment 25</a>, but that seem to miss the point of the vulnerability.  

<span class="quote">&gt; 
&gt; &gt; But even assuming this bug was ONLY exploitable via a malformed IPC
&gt; &gt; message, we typically rate these sorts of sandbox escape bugs sec-high, and
&gt; &gt; this one being exploitable from the CDM is rare (and hence more valuable to
&gt; &gt; an attacker). 
&gt; 
&gt;  But it is still pref'd off by default, right?</span >

The pref only affect the createImageBitmap vector. The sandbox escape is valid regardless.

<span class="quote">&gt;  
&gt; &gt; My gut feel here is bug is probably only sec-high, due to the sandbox
&gt; &gt; escape, and the difficulty of exploitation via video paths (if thats even
&gt; &gt; possible). At the end of the day it doesn't really matter. Its clearly a bug
&gt; &gt; and we have a fix available.
&gt; 
&gt;  Well, it matters for things like advisories and bounties. We don't award
&gt; bounties on sec-low bugs and we don't write advisories for things that are
&gt; disabled by default. 
&gt; 
&gt; I'd love a definitive answer from the devs since we're shipping Firefox 59
&gt; in a week and I have to figure out if this bug is rated correctly and if it
&gt; needs a security advisory or not.</span >

The sandbox escape is definitely valid. jya thinks the video path is not exploitable and In not sure anyone looked at the webrtc path. So assuming there ISNT a web exploitable vector here (we dont have proof of one in any case), I would suggest that you rate this bug based on the sandbox escape, which I think is the main issue here.</pre></div><div class="change-set" id="c64"><div class="comment" data-id="13110008" data-no="64"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-64" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_434339" id="a4920250_1689"><img src="https://secure.gravatar.com/avatar/9a0a16bc1cb5b0144e373deb8e357804?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_434339" id="a4920250_1689"><a class="email disabled" href="/user_profile?user_id=434339" > <span class="fna">Paul Theriault [:pauljt] (no longer reading bugmail)</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-06 18:25 PST" data-time="1520389556">4 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-64" data-comment-id="13110008">PS Al if you need a description for advisory,  I'd suggest:

A lack of parameter validation on IPC messages results in a potential out-of-bounds write. This could potentially allow for sandbox escape via memory corruption in the parent process.</pre></div><div class="change-set" id="a5008450_280903"><div class="change" id="aa5008450_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5008450_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a5008450_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5008450_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5008450_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a5008450_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-07 17:17 PST" data-time="1520471827">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [original repoter is bzdllx&#64;gmail.com][post-critsmash-triage] &rarr; [original repoter is bzdllx&#64;gmail.com][post-critsmash-triage][adv-main59+][adv-esr52.7+]</div></div></div><div class="change-set" id="a5074278_280903"><div class="change" id="aa5074278_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5074278_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a5074278_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5074278_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5074278_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a5074278_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-08 11:34 PST" data-time="1520537655">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2018-5129</div></div></div><div class="change-set" id="a5109329_480271"><div class="change" id="aa5109329_480271">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_480271" id="a5109329_480271"><img src="https://secure.gravatar.com/avatar/0d3b27247d1f73c7eb3fd5eeddeddfbf?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_480271" id="a5109329_480271"><a class="email disabled" href="/user_profile?user_id=480271" > <span class="fna">u480271</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5109329_480271"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5109329_480271">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a5109329_480271">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-08 21:18 PST" data-time="1520572706">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dglastonbury)</span></div></div></div><div class="change-set" id="a5411829_1689"><div class="change" id="aa5411829_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a5411829_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a5411829_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5411829_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5411829_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a5411829_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-03-12 10:20 PDT" data-time="1520875206">4 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty? &rarr; sec-bounty+</div></div></div><div class="change-set" id="a17538418_1689"><div class="change" id="aa17538418_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a17538418_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a17538418_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17538418_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17538418_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1428947#a17538418_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2018-07-30 18:49 PDT" data-time="1533001795">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1428947&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>