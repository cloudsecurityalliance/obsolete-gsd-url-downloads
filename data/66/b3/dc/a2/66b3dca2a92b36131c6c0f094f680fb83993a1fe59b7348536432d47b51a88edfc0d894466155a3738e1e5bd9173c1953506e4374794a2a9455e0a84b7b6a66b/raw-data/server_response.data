<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 1407393002: ImageBitmap: Change two enum uses. -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '35439bf0c70de387ebf258d6757e53fb';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/1407393002%252526ust%25253D1608714616389242%252526usg%25253DAFQjCNFUeaATUQ79y_PxDEoL9YR_ygbqEQ%26service%3Dah">Sign out</a>

</div>
<div class="counter">(338)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-1407393002">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/1407393002/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            1407393002</a>:
    ImageBitmap: Change two enum uses.  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            5 years, 2 months ago by <a href="/user/jbroman" onMouseOver="M_showUserInfoPopup(this)">jbroman</a>
          </div>
          <div><b>Modified:</b><br/>
            5 years, 2 months ago
          </div>
          <div><b>Reviewers:</b><br/>
            <span class='approval'><a href="/user/xidachen" onMouseOver="M_showUserInfoPopup(this)">xidachen</a></span>, <span class='approval'><a href="/user/Justin%20Novosad" onMouseOver="M_showUserInfoPopup(this)">Justin Novosad</a></span>
          </div>
          
          <div><b>CC:</b><br/>
            blink-reviews, blink-reviews-platform-graphics_chromium.org, Rik, chromium-reviews, danakj, dshwang, drott+blinkwatch_chromium.org, krit, f(malita), pdr+graphicswatchlist_chromium.org, rwlbuis, Stephen Chennney, vmpstr+blinkwatch_chromium.org
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/src.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/pending/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=chromium">
              chromium
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - c14d891d44f0afff64e56ed7c9702df1d807b1ee"
               href="/search?repo_guid=c14d891d44f0afff64e56ed7c9702df1d807b1ee">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">ImageBitmap: Change two enum uses.

An earlier CL (<a href="https://codereview.chromium.org/1382883002/">https://codereview.chromium.org/1382883002/</a>) made two changes
which seem to have unintended effects on behaviour.

1. The ImageBitmap constructor asserts that its data is opaque (whereas
previously it took the default NonOpaque opacity mode), but if this is so
it should have a comment justifying it.

2. UnacceleratedImageBufferSurface is clearings the SkSurface if it was
told _not_ to initialize image pixels, which seems like an inversion of the
intended condition.

BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=543515">543515</a>, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=544691">544691</a>
Committed: <a href="https://crrev.com/1998d1cc5f2985cdeac94d3e669b0e7901a77bbb">https://crrev.com/1998d1cc5f2985cdeac94d3e669b0e7901a77bbb</a>
Cr-Commit-Position: refs/heads/master@{#354880}
  </div>




  <h3>
    <a id="ps-1-pointer"
       href="/1407393002/#ps1"
       onclick="M_toggleSectionForPS('1407393002', '1')"
       class="toggled-section opentriangle">
      Patch Set 1
      
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 7
      
    </div>
  

  <div id="ps-1"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 5 years, 2 months ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue1407393002_1.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/1407393002/1"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+2 lines, -2 lines</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1407393002/patch/1/10001">
            third_party/WebKit/Source/core/frame/ImageBitmap.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -1 line</td>
        
        <td style="white-space: nowrap">
          <b>
            6 comments
            
            
          </b>
        </td>
        <td>
          <a href="/download/issue1407393002_1_10001.diff"
             title="Download patch for third_party/WebKit/Source/core/frame/ImageBitmap.cpp">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1407393002/patch/1/10002">
            third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1407393002/diff/1/third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+1 line, -1 line</td>
        
        <td style="white-space: nowrap">
          <b>
            1 comment
            
            
          </b>
        </td>
        <td>
          <a href="/download/issue1407393002_1_10002.diff"
             title="Download patch for third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 1;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 18 (3 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 18)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 18)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(18)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(18)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    generated"
           style="display: none"
           id="generated-msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          jbroman@chromium.org changed reviewers: + junov@chromium.org, xidachen@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-17 02:59:54 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            ><a href="mailto:jbroman@chromium.org">jbroman@chromium.org</a> changed reviewers:
+ <a href="mailto:junov@chromium.org">junov@chromium.org</a>, <a href="mailto:xidachen@chromium.org">xidachen@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          This looks like a couple of simple mistakes. What do you think? I tried to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-17 02:59:54 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            >This looks like a couple of simple mistakes. What do you think?

I tried to add a layout test to cover the opaque case, but it does something
else wrong and I haven&#39;t put time in to debug it. This is probably a trivial
enough fix to land without, but for posterity here it was
(<a href="https://gist.github.com/jeremyroman/9f9cbd38b1bd9b0482ee" rel="nofollow">https://gist.github.com/jeremyroman/9f9cbd38b1bd9b0482ee</a>).</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>xidachen</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right): https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101 third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque, DoNotInitializeImagePixels); This part is ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-18 14:08:48 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            ><a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right):

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt;
buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
DoNotInitializeImagePixels);
This part is tricky. It was set to be Opaque on purpose. Because in the
constructor of &quot;UnacceleratedImageBufferSurface&quot; class, the following line:

m_surface = adoptRef(SkSurface::NewRaster(info, Opaque == opacityMode ? 0 :
&amp;disableLCDProps));

takes long time when it is NonOpaque, but takes almost no time when it is set to
Opaque. My opinion on this implementation is that the buffer will be filled in
by the source data later, so it doesn&#39;t matter whether it is opaque or
non-opaque at the buffer allocation step. However, this could be wrong.

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/p...</a>
File
third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp
(right):

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp#newcode49" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/p...</a>
third_party/WebKit/Source/platform/graphics/UnacceleratedImageBufferSurface.cpp:49:
if (initializationMode == InitializeImagePixels) {
Correct. Thank you for catching this. I believe this regression is also likely
caused by this mistake.
<a href="https://code.google.com/p/chromium/issues/detail?id=543515&amp;q=xidachen%40chromium.org&amp;colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified" rel="nofollow">https://code.google.com/p/chromium/issues/detail?id=543515&amp;q=xidachen%40chrom...</a>

I have verified that canvas.drawImage() eventually calls this method, so this
change should fix the above regression.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right): https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101 third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque, DoNotInitializeImagePixels); On 2015/10/18 at ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-18 15:44:14 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            ><a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right):

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt;
buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
DoNotInitializeImagePixels);
On 2015/10/18 at 14:08:48, xidachen wrote:
&gt; This part is tricky. It was set to be Opaque on purpose. Because in the
constructor of &quot;UnacceleratedImageBufferSurface&quot; class, the following line:
&gt; 
&gt; m_surface = adoptRef(SkSurface::NewRaster(info, Opaque == opacityMode ? 0 :
&amp;disableLCDProps));
&gt; 
&gt; takes long time when it is NonOpaque, but takes almost no time when it is set
to Opaque. My opinion on this implementation is that the buffer will be filled
in by the source data later, so it doesn&#39;t matter whether it is opaque or
non-opaque at the buffer allocation step. However, this could be wrong.

I&#39;d like Justin&#39;s opinion, but it seems to me that this causes the image to have
kOpaque_AlphaType in its SkImageInfo, which shouldn&#39;t apply to images that
aren&#39;t opaque.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>xidachen</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          I think it may need a bit more time to debug this issue. https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp File ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-18 15:44:53 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >I think it may need a bit more time to debug this issue.

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right):

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt;
buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
DoNotInitializeImagePixels);
Hmmm, I just found something very strange. With the change that you have in the
&quot;UnacceleratedImageBufferSurface&quot;, it won&#39;t pass your layout test even if I
change this line to be:

OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
InitializeImagePixels);</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right): https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101 third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque, DoNotInitializeImagePixels); On 2015/10/18 at ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-18 15:48:00 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            ><a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right):

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt;
buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
DoNotInitializeImagePixels);
On 2015/10/18 at 15:44:52, xidachen wrote:
&gt; Hmmm, I just found something very strange. With the change that you have in
the &quot;UnacceleratedImageBufferSurface&quot;, it won&#39;t pass your layout test even if I
change this line to be:
&gt; 
&gt; OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
InitializeImagePixels);

Yeah, something fishy is going on (or I&#39;m misunderstanding the ImageData API). I
spent about 30 min on Friday trying to figure out what was going on and why I
got very very wrong values, but I haven&#39;t dug any deeper.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>xidachen</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          We can spend more time on the ImageData API, but I think we may need ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-18 15:55:56 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            >We can spend more time on the ImageData API, but I think we may need to correct
the mistake I made in the &quot;UnacceleratedImageBuffer&quot; first, I am concerned that
other people who use it will be misled by my mistake.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          Description was changed from ========== ImageBitmap: Change two enum uses. An earlier CL (https://codereview.chromium.org/1382883002/) made ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 18:55:12 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            >Description was changed from

==========
ImageBitmap: Change two enum uses.

An earlier CL (<a href="https://codereview.chromium.org/1382883002/" rel="nofollow">https://codereview.chromium.org/1382883002/</a>) made two changes
which seem to have unintended effects on behaviour.

1. The ImageBitmap constructor asserts that its data is opaque (whereas
previously it took the default NonOpaque opacity mode), but if this is so
it should have a comment justifying it.

2. UnacceleratedImageBufferSurface is clearings the SkSurface if it was
told _not_ to initialize image pixels, which seems like an inversion of the
intended condition.
==========

to

==========
ImageBitmap: Change two enum uses.

An earlier CL (<a href="https://codereview.chromium.org/1382883002/" rel="nofollow">https://codereview.chromium.org/1382883002/</a>) made two changes
which seem to have unintended effects on behaviour.

1. The ImageBitmap constructor asserts that its data is opaque (whereas
previously it took the default NonOpaque opacity mode), but if this is so
it should have a comment justifying it.

2. UnacceleratedImageBufferSurface is clearings the SkSurface if it was
told _not_ to initialize image pixels, which seems like an inversion of the
intended condition.

BUG=543515,544691
==========</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          Added references to bugs xidachen believes to be related.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 18:55:24 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            >Added references to bugs xidachen believes to be related.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>xidachen</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          lgtm Thanks for fixing it.
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 18:57:50 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            >lgtm

Thanks for fixing it.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Justin Novosad</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          lgtm https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right): https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101 third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque, DoNotInitializeImagePixels); I agree ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 19:13:20 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-10"
            >lgtm

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right):

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt;
buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
DoNotInitializeImagePixels);
I agree that the image buffer should be marked as non-opaque.  This will result
in the newImageSnapshot that is taken below to be marked as non-opaque, which is
conservatively accurate.

<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode106" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
third_party/WebKit/Source/core/frame/ImageBitmap.cpp:106:
buffer-&gt;putByteArray(Premultiplied, data-&gt;data()-&gt;data(), data-&gt;size(), srcRect,
IntPoint(std::min(0, -cropRect.x()), std::min(0, -cropRect.y())));
This operation is an over-write. If it covers buffer entirely, we should not
need to intialize the pixels, and I think that is supposed to always be the
case.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Justin Novosad</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          On 2015/10/18 14:08:48, xidachen wrote: &gt; This part is tricky. It was set to be ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 19:15:36 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-11"
            >On 2015/10/18 14:08:48, xidachen wrote:
&gt; This part is tricky. It was set to be Opaque on purpose. Because in the
&gt; constructor of &quot;UnacceleratedImageBufferSurface&quot; class, the following line:
&gt; 
&gt; m_surface = adoptRef(SkSurface::NewRaster(info, Opaque == opacityMode ? 0 :
&gt; &amp;disableLCDProps));
&gt; 
That is inconsequential because we will never draw text to this buffer. We just
push image data onto it</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Justin Novosad</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          On 2015/10/18 15:44:14, jbroman wrote: &gt; I&#39;d like Justin&#39;s opinion, but it seems to me ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 19:16:28 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-12"
            >On 2015/10/18 15:44:14, jbroman wrote:
&gt; I&#39;d like Justin&#39;s opinion, but it seems to me that this causes the image to
have
&gt; kOpaque_AlphaType in its SkImageInfo, which shouldn&#39;t apply to images that
&gt; aren&#39;t opaque.

Exactly.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>Justin Novosad</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          On 2015/10/18 15:48:00, jbroman wrote: &gt; https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp &gt; File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right): &gt; &gt; https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101 &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 19:17:15 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-13"
            >On 2015/10/18 15:48:00, jbroman wrote:
&gt;
<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
&gt; File third_party/WebKit/Source/core/frame/ImageBitmap.cpp (right):
&gt; 
&gt;
<a href="https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/core/frame/ImageBitmap.cpp#newcode101" rel="nofollow">https://codereview.chromium.org/1407393002/diff/1/third_party/WebKit/Source/c...</a>
&gt; third_party/WebKit/Source/core/frame/ImageBitmap.cpp:101: OwnPtr&lt;ImageBuffer&gt;
&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
&gt; DoNotInitializeImagePixels);
&gt; On 2015/10/18 at 15:44:52, xidachen wrote:
&gt; &gt; Hmmm, I just found something very strange. With the change that you have in
&gt; the &quot;UnacceleratedImageBufferSurface&quot;, it won&#39;t pass your layout test even if
I
&gt; change this line to be:
&gt; &gt; 
&gt; &gt; OwnPtr&lt;ImageBuffer&gt; buffer = ImageBuffer::create(data-&gt;size(), NonOpaque,
&gt; InitializeImagePixels);
&gt; 
&gt; Yeah, something fishy is going on (or I&#39;m misunderstanding the ImageData API).
I
&gt; spent about 30 min on Friday trying to figure out what was going on and why I
&gt; got very very wrong values, but I haven&#39;t dug any deeper.

What layout test are we talking about?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>jbroman</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          The CQ bit was checked by jbroman@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 19:33:23 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-14"
            >The CQ bit was checked by <a href="mailto:jbroman@chromium.org">jbroman@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1407393002/1 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1407393002/1
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 19:36:56 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-15"
            >CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1407393002/1" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1407393002/1</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1407393002/1" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1407393002/1</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          Committed patchset #1 (id:1)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 21:59:28 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-16"
            >Committed patchset #1 (id:1)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-17">
                          Patchset 1 (id:??) landed as https://crrev.com/1998d1cc5f2985cdeac94d3e669b0e7901a77bbb Cr-Commit-Position: refs/heads/master@{#354880}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 2 months ago
		(2015-10-19 22:00:34 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             >
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-17"
            >Patchset 1 (id:??) landed as
<a href="https://crrev.com/1998d1cc5f2985cdeac94d3e669b0e7901a77bbb" rel="nofollow">https://crrev.com/1998d1cc5f2985cdeac94d3e669b0e7901a77bbb</a>
Cr-Commit-Position: refs/heads/master@{#354880}</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 18)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 18)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(18)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(18)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 18;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 1407393002;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 1407393002: ImageBitmap: Change two enum uses.
     (Closed) </b><br/>
      Created 5 years, 2 months ago by jbroman<br/>
      Modified 5 years, 2 months ago<br/>
      Reviewers: Justin Novosad, xidachen<br/>
      Base URL: https://chromium.googlesource.com/chromium/src.git@master<br/>
      Comments: 7
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
