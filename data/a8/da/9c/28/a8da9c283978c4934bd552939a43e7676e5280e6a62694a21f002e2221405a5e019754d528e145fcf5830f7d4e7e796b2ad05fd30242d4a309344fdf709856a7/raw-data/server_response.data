<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1255270 - (CVE-2016-2830) Favicon request doesn't timeout, or close when related window is closed">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1255270">
<meta property="og:description"
      content="VERIFIED (gijskruitbosch+bugs) in Firefox - Tabbed Browser. Last updated 2017-03-29.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="--">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1255270 - (CVE-2016-2830) Favicon request doesn't timeout, or close when related window is closed</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1255270&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1255270">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1255270">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/yui.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/global.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/util.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_tracking_firefox49\":\"+\",\"cf_status_firefox93\":\"---\",\"cf_tracking_firefox48\":\"+\",\"cf_status_firefox50\":\"verified\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_tracking_firefox47\":\"+\",\"cf_status_firefox_esr45\":\"verified\",\"cf_status_firefox47\":\"wontfix\",\"cf_status_firefox_esr91\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox94\":\"---\",\"cf_status_firefox49\":\"verified\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_status_firefox95\":\"---\",\"cf_status_firefox48\":\"verified\",\"cf_tracking_firefox95\":\"---\",\"cf_tracking_firefox94\":\"---\",\"cf_tracking_firefox_esr45\":\"48+\",\"cf_tracking_firefox93\":\"---\",\"cf_status_firefox46\":\"wontfix\"},\"project\":{\"cf_fission_milestone\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_a11y_review_project_flag\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_root_cause\":\"---\"}},\"comments\":{\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr45\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox47\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox48\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox49\":{\"?\":\"[Tracking Requested - why for this release]:\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1255270;
  BUGZILLA.bug_title = '1255270 - (CVE-2016-2830) Favicon request doesn\'t timeout, or close when related window is closed';
  BUGZILLA.bug_summary = 'Favicon request doesn\'t timeout, or close when related window is closed';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1255270';
  BUGZILLA.bug_keywords = 'privacy, sec-high',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/field.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/comments.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1255270">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1255270"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1255270 - (CVE-2016-2830) Favicon request doesn't timeout, or close when related window is closed">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="FGhW6vMwiylV5ryjdmxQYO2kT9fqqKk1WRAWMaQAbNDuRI7qCYbc3S7qiCYqNp3k2cSbsbjdeh2cfqgyFElmr8jgCycDsfR8AmecrM071AemWGrr5bLeo0dUga7mVgHudBjU6d9DoP48UYQHAgspGyFwdGdJXFlJLcTobVvMXbutFYgiNTvhza15PNVgx7thOYkMQ4ObuPT1yiEtPgkwNGRcMpjgz4sT4efNl82NxzLLFkFo1g9sy2ymsCgxsszx">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1255270" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635622943-ZiVUyzK_RVxNO49JDAyOR5KaMQ4aUwKsf96r7zQWYi4">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1255270" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1255270" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1255270">Bug 1255270</a>
          <span class="edit-hide">(CVE-2016-2830)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2016-03-09 20:01 PST" data-time="1457582494">6 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2016-05-24 08:21 PDT" data-time="1464103308">6 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">Favicon request doesn't timeout, or close when related window is closed</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            Favicon request doesn't timeout, or close when related window is closed

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Firefox :: Tabbed Browser, defect)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Firefox" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Firefox
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Firefox</div>
            <div class="description">For bugs in  Firefox Desktop, the Mozilla Foundation's web browser. For Firefox user interface issues in menus, bookmarks, location bar, and preferences. Many Firefox bugs will either be filed here or in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Core">Core</a> product. Bugs for developer tools (F12) should be filed in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=DevTools">DevTools</a> product.  (<a href="https://wiki.mozilla.org/Modules/All#Firefox">more info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Firefox&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Firefox"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Firefox"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Firefox&component=Tabbed%20Browser#Tabbed%20Browser" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Tabbed Browser
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Firefox :: Tabbed Browser</div>
            <div class="description">For problems in the browser tab features or problems with the  widget itself.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Firefox&amp;component=Tabbed%20Browser&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Firefox&amp;component=Tabbed%20Browser&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Firefox&amp;component=Tabbed%20Browser"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Firefox" data-component="Tabbed Browser"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-version"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            45 Branch

        </span>
    </div>

  
</div>

    <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Unspecified

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">
          <em>Not set</em>
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            major

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;cf_tracking_firefox49&quot;:&quot;+&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_status_firefox50&quot;:&quot;verified&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;priority&quot;:&quot;--&quot;,&quot;cf_status_firefox_esr45&quot;:&quot;verified&quot;,&quot;cf_tracking_firefox47&quot;:&quot;+&quot;,&quot;cf_status_firefox49&quot;:&quot;verified&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;flags&quot;:[{&quot;status&quot;:&quot;+&quot;,&quot;name&quot;:&quot;sec-bounty&quot;}],&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr45&quot;:&quot;48+&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;id&quot;:1255270,&quot;target_milestone&quot;:&quot;Firefox 49&quot;,&quot;keywords&quot;:[&quot;privacy&quot;,&quot;sec-high&quot;],&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;status&quot;:&quot;VERIFIED&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_firefox48&quot;:&quot;+&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox47&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_status_firefox46&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;dupe_of&quot;:null,&quot;cf_status_firefox48&quot;:&quot;verified&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">VERIFIED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            VERIFIED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            Firefox 49

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox46</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox47</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox48</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox48&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox49</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox49&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr45</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=48%2B">48+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox50</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=verified">verified</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox46</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox46-dirty">
  <select id="cf_status_firefox46" name="cf_status_firefox46">
        <option value="wontfix"
          id="v2563_cf_status_firefox46" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox47</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox47-dirty">
  <select id="cf_tracking_firefox47" name="cf_tracking_firefox47">
        <option value="+"
          id="v2603_cf_tracking_firefox47" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox47-dirty">
  <select id="cf_status_firefox47" name="cf_status_firefox47">
        <option value="wontfix"
          id="v2611_cf_status_firefox47" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox48</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox48-dirty">
  <select id="cf_tracking_firefox48" name="cf_tracking_firefox48">
        <option value="+"
          id="v2669_cf_tracking_firefox48" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox48-dirty">
  <select id="cf_status_firefox48" name="cf_status_firefox48">
        <option value="verified"
          id="v2678_cf_status_firefox48" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox49</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox49-dirty">
  <select id="cf_tracking_firefox49" name="cf_tracking_firefox49">
        <option value="+"
          id="v2778_cf_tracking_firefox49" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox49-dirty">
  <select id="cf_status_firefox49" name="cf_status_firefox49">
        <option value="verified"
          id="v2787_cf_status_firefox49" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr45</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr45-dirty">
  <select id="cf_tracking_firefox_esr45" name="cf_tracking_firefox_esr45">
        <option value="48+"
          id="v2581_cf_tracking_firefox_esr45" selected
        >48+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr45-dirty">
  <select id="cf_status_firefox_esr45" name="cf_status_firefox_esr45">
        <option value="verified"
          id="v2549_cf_status_firefox_esr45" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox50</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox50-dirty">
  <select id="cf_status_firefox50" name="cf_status_firefox50">
        <option value="verified"
          id="v2842_cf_status_firefox50" selected
        >verified
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: toni.huttunen, Assigned: Gijs)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_159069" ><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=159069" > <span class="fna">Gijs</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_562712" ><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=562712" > <span class="fna">toni.huttunen</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_219124" ><img src="https://secure.gravatar.com/avatar/d949a35ad3900bd0ee47938b23a0cbee?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=219124" > <span class="fna">dao</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="18">18 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WORKSFORME - Crash in mozilla::places::AsyncFetchAndSetIconForPage::start"
   href="/show_bug.cgi?id=1276636">1276636</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Error: When cancelling a request for chrome://branding/content/icon32.png because the chrome window went away"
   href="/show_bug.cgi?id=1279650">1279650</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list" id="field-blocked"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - delayed CSRF attack from the closed page"
   href="/show_bug.cgi?id=1255267">1255267</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed (1255270 is not fixed yet)"
   href="/show_bug.cgi?id=1279208">1279208</a>, <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout or close when related window is closed (1255270 is not fixed yet) on Windows due to WindowsPreviewPreTab.jsm"
   href="/show_bug.cgi?id=1283067">1283067</a>
      </div>

        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1255270&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1255270">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates" id="-help-link" class="help">Duplicates:
        </a>
    </div>


  
    <div class="value">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - delayed CSRF attack from the closed page"
   href="/show_bug.cgi?id=1255267">1255267</a>
      </div>

    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-see_also"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - delayed CSRF attack from the closed page"
   href="/show_bug.cgi?id=1255267">1255267</a>
      </div>

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: privacy, sec-high, Whiteboard: [adv-main48+][adv-esr45.3+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2016-2830

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=privacy&amp;resolution=---">privacy</a>, 
          <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[adv-main48+][adv-esr45.3+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_280903" ><a class="email " href="/user_profile?user_id=280903" > <span class="fna">abillings</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a5836914_280903"
            class="rel-time-title activity-ref"
            title="6 years ago"
        data-time="1457649053"
      >sec-bounty</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_280903" ><a class="email " href="/user_profile?user_id=280903" > <span class="fna">abillings</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag-1357954">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1357954-dirty">
      <select id="flag-1357954" name="flag-1357954"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
            <option value="+" selected>+</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="This bug must be fixed for Firefox Sync 1.7" for="flag_type-708">blocking-fx-sync1.7</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-708-dirty">
      <select id="flag_type-708" name="flag_type-708"
        title="This bug must be fixed for Firefox Sync 1.7"
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (5 files, 4 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8751377">Patch v1</a>
        </div>
        <div>
            <a href="#c22" class="attach-time activity-ref"><span class="rel-time" title="2016-05-11 10:27 PDT" data-time="1462987632">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">25.34 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8751377&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8751377&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8751377">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8751378">Patch v1.1</a>
        </div>
        <div>
            <a href="#c25" class="attach-time activity-ref"><span class="rel-time" title="2016-05-11 10:37 PDT" data-time="1462988260">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">24.66 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8751378&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8751378&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8751378">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8753406">Patch v1.2</a>
        </div>
        <div>
            <a href="#c28" class="attach-time activity-ref"><span class="rel-time" title="2016-05-17 09:33 PDT" data-time="1463502835">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">25.34 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_240353" ><span class="fn">mak</span>
</div>:
              <a href="#c30"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1463502835"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#a6180287_280903"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1463744859"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8753406&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8753406&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8753406">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8755371">Patch for aurora</a>
        </div>
        <div>
            <a href="#c36" class="attach-time activity-ref"><span class="rel-time" title="2016-05-23 03:32 PDT" data-time="1463999578">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">45.47 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_159069" ><span class="fn">Gijs</span>
</div>:
              <a href="#c36"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1463999578"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8755371&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8755371&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755371">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8755372">Patch for beta</a>
        </div>
        <div>
            <a href="#c37" class="attach-time activity-ref"><span class="rel-time" title="2016-05-23 03:33 PDT" data-time="1463999621">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">45.47 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_159069" ><span class="fn">Gijs</span>
</div>:
              <a href="#c37"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1463999621"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8755372&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8755372&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755372">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8755377">Tests for landing later</a>
        </div>
        <div>
            <a href="#c39" class="attach-time activity-ref"><span class="rel-time" title="2016-05-23 03:52 PDT" data-time="1464000721">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">5.52 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_159069" ><span class="fn">Gijs</span>
</div>:
              <a href="#c39"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464000721"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8755377&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8755377&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755377">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8755626">Patch for aurora</a>
        </div>
        <div>
            <a href="#c42" class="attach-time activity-ref"><span class="rel-time" title="2016-05-23 22:54 PDT" data-time="1464069240">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">45.95 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_159069" ><span class="fn">Gijs</span>
</div>:
              <a href="#c42"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464069240"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_538805" ><span class="fn">ritu</span>
</div>:
              <a href="#a6569027_538805"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464069240"
            >
              approval-mozilla-aurora+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8755626&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8755626&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755626">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8755627">Patch for beta</a>
        </div>
        <div>
            <a href="#c43" class="attach-time activity-ref"><span class="rel-time" title="2016-05-23 22:55 PDT" data-time="1464069346">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">45.95 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_159069" ><span class="fn">Gijs</span>
</div>:
              <a href="#c43"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464069346"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_538805" ><span class="fn">ritu</span>
</div>:
              <a href="#c45"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464069346"
            >
              approval-mozilla-beta+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8755627&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8755627&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755627">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8756301">Patch for ESR 45</a>
        </div>
        <div>
            <a href="#c49" class="attach-time activity-ref"><span class="rel-time" title="2016-05-25 12:28 PDT" data-time="1464204488">6 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_159069" ><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div></span>
        </div>
        <div class="attach-info">46.07 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_159069" ><span class="fn">Gijs</span>
</div>:
              <a href="#c49"
                  class="flag-name-status rel-time-title activity-ref"
                  title="6 years ago"
              data-time="1464204488"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8756301&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8756301&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8756301">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="J06b55Q3cupaO7SaiVVVuNzUJM8e9qtKhpbhHkrW5OPyylfe">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="11234341" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" ><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" ><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-09 20:01 PST" data-time="1457582494">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-0" data-comment-id="11234341">User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:45.0) Gecko/20100101 Firefox/45.0
Build ID: 20160303134406

Steps to reproduce:

The Firefox does background request to load favicon.ico from the current web page. Unexpectedly, the connection is not terminated when the website window is closed which gives an server owner an ability to send data regularly to the browser and figure out when the transmission fails indicating the browser close. 

It is also possible to measure pings using ACKs. Theoretically, could it be possible to recognize mobile device geological position from a small list of alternative positions based on ping flow? Remember that the pinging is possible as long as browser is on.


Actual results:

No timeout on favicon connections.


Expected results:

Timeout on favicon connections.</pre></div><div class="change-set" id="a62_562712"><div class="change" id="aa62_562712">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a62_562712"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_562712" id="a62_562712"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a62_562712"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a62_562712">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a62_562712">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-09 20:02 PST" data-time="1457582556">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Severity: normal &rarr; major</div><div class="change">See Also:  &rarr; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - delayed CSRF attack from the closed page"
   href="/show_bug.cgi?id=1255267">1255267</a></div></div></div><div class="change-set" id="c1"><div class="comment" data-id="11234353" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a62_562712"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a62_562712"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-09 20:05 PST" data-time="1457582725">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="11234353">Also Tor Browser is affected. 'New Identity' feature triggers browser restart which will not kill the connection.</pre></div><div class="change-set" id="a1290_562712"><div class="change" id="aa1290_562712">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a1290_562712"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_562712" id="a1290_562712"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1290_562712"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1290_562712">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a1290_562712">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-09 20:23 PST" data-time="1457583784">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Summary: Favicon connection does not timeout &rarr; Browser open time leakage</div></div></div><div class="change-set" id="a21851_159069"><div class="change" id="aa21851_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a21851_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a21851_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a21851_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a21851_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a21851_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-10 02:05 PST" data-time="1457604345">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Component: Untriaged &rarr; Tabbed Browser</div></div></div><div class="change-set" id="a66559_280903"><div class="change" id="aa66559_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a66559_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a66559_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a66559_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a66559_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a66559_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-10 14:30 PST" data-time="1457649053">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty?</div></div></div><div class="change-set" id="a481012_452604"><div class="change" id="aa481012_452604">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452604" id="a481012_452604"><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_452604" id="a481012_452604"><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">Matt Wobensmith [:mwobensmith][:matt:]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a481012_452604"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a481012_452604">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a481012_452604">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 10:38 PDT" data-time="1458063506">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: firefox-core-security &rarr; core-security</div><div class="change">Component: Tabbed Browser &rarr; ImageLib</div><div class="change">Product: Firefox &rarr; Core</div></div></div><div class="change-set" id="a481052_406194"><div class="change" id="aa481052_406194">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a481052_406194"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_406194" id="a481052_406194"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a481052_406194"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a481052_406194">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a481052_406194">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 10:39 PDT" data-time="1458063546">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=privacy&amp;resolution=---">privacy</a></div></div></div><div class="change-set" id="c2"><div class="comment" data-id="11249175" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a481052_406194"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a481052_406194"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 13:07 PDT" data-time="1458072467">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="11249175">ImageLib doesn't make network requests. Maybe this is a networking bug but I think Gijs was right to blame it on the front-end which makes the favicon request. Maybe it needs to be put into the document's LoadGroup, or goverened under some other window-closing-event-watching mechanism.


<span class="quote">&gt; It is also possible to measure pings using ACKs. Theoretically, could it be possible to
&gt; recognize mobile device geological position from a small list of alternative positions
&gt; based on ping flow? Remember that the pinging is possible as long as browser is on.</span >

Could you expand on what you mean here? Is this an extension (practical use) of this same bug or are you describing a different issue?</pre><div class="activity"><div class="change">Group: core-security &rarr; firefox-core-security</div><div class="change">Component: ImageLib &rarr; Tabbed Browser</div><div class="change">Flags: needinfo?(toni.huttunen)</div><div class="change">Product: Core &rarr; Firefox</div><div class="change">Summary: Browser open time leakage &rarr; Favicon request doesn't timeout, or close when related window is closed</div></div></div><div class="change-set" id="c3"><div class="comment" data-id="11249205" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a481052_406194"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a481052_406194"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 13:16 PDT" data-time="1458073014">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="11249205">(In reply to Daniel Veditz [:dveditz] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c2">comment #2</a>)
<span class="quote">&gt; ImageLib doesn't make network requests. Maybe this is a networking bug but I
&gt; think Gijs was right to blame it on the front-end which makes the favicon
&gt; request. Maybe it needs to be put into the document's LoadGroup,</span >

This is hard, especially under e10s. We could conceivably load it in-content and then message a data URI (or maybe a blob URI if those work x-process, not sure) to the parent, but that doesn't sound like much fun for perf, either. Even then though, I don't think we can easily add it under the document's load group.

As it is, in this case the image load as happens in the XUL &lt;image&gt; element should get stopped when the image stops being displayed or its src attribute changes - one of which is pretty much guaranteed to happen when you load a different URL. That we don't disconnect might be either a XUL or an imagelib/networking issue - not sure who calls the shots for that load, but we can't currently do much about it beyond what already happens from the frontend. Seth might still be a good person to ask how this is 'supposed' to work, so I'm pinging him. :-)

<span class="quote">&gt; or
&gt; goverened under some other window-closing-event-watching mechanism.</span >

This is theoretically possible but seems much more error-prone.</pre><div class="activity"><div class="change">Flags: needinfo?(seth)</div></div></div><div class="change-set" id="c4"><div class="comment" data-id="11249217" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a481052_406194"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a481052_406194"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 13:21 PDT" data-time="1458073273">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="11249217">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c3">comment #3</a>)
<span class="quote">&gt; the image stops being displayed or its src attribute
&gt; changes - one of which is pretty much guaranteed to happen when you load a
&gt; different URL.</span >

To be slightly more specific, AIUI there are two cases here:

1) you close the tab. The tab and all its content, including the favicon XUL &lt;image&gt;, get removed from the DOM, and (I should expect...) GC'd.
2) you navigate elsewhere. We remove the image attribute from the tab, or set it to some other URL, which through XBL inheritance ends up modifying the src attribute on the XUL &lt;image&gt;. I think this, too, should cancel/abort the load of the initial image that we load.</pre></div><div class="change-set" id="a492803_1689"><div class="change" id="aa492803_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a492803_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a492803_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a492803_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a492803_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a492803_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 13:54 PDT" data-time="1458075297">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - delayed CSRF attack from the closed page"
   href="/show_bug.cgi?id=1255267">1255267</a></div></div></div><div class="change-set" id="c5"><div class="comment" data-id="11249602" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a492803_1689"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a492803_1689"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-03-15 15:03 PDT" data-time="1458079391">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="11249602">(In reply to Daniel Veditz [:dveditz] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c2">comment #2</a>)
<span class="quote">&gt; ImageLib doesn't make network requests. Maybe this is a networking bug but I
&gt; think Gijs was right to blame it on the front-end which makes the favicon
&gt; request. Maybe it needs to be put into the document's LoadGroup, or
&gt; goverened under some other window-closing-event-watching mechanism.
&gt; 
&gt; 
&gt; &gt; It is also possible to measure pings using ACKs. Theoretically, could it be possible to
&gt; &gt; recognize mobile device geological position from a small list of alternative positions
&gt; &gt; based on ping flow? Remember that the pinging is possible as long as browser is on.
&gt; 
&gt; Could you expand on what you mean here? Is this an extension (practical use)
&gt; of this same bug or are you describing a different issue?</span >
You are right that it could be a separate issue. I made it here because this bug makes it more practical. So, I saw it as practical use of this bug on the mobile environment. After page visit your device could be theoretically tracked by monitoring timeline of gsm latency which changes based on obstacles and distances to the active mobile tower. If you see that it should be more than remark I can fill a new bug. In any case, I don't see any reasonable fix for it so I think the solution is WONTFIX.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(toni.huttunen)</span></div></div></div><div class="change-set" id="c6"><div class="comment" data-id="11317019" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a492803_1689"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a492803_1689"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-11 14:24 PDT" data-time="1460409895">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="11317019">Is there any more progress to brief us on yet?</pre></div><div class="change-set" id="c7"><div class="comment" data-id="11319782" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a492803_1689"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a492803_1689"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-12 10:54 PDT" data-time="1460483657">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="11319782">Jet, can you assign someone to take a look at this since it has been sitting for three weeks with no response to ni?</pre><div class="activity"><div class="change">Flags: needinfo?(bugs)</div></div></div><div class="change-set" id="a2901285_1689"><div class="change" id="aa2901285_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a2901285_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2901285_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2901285_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a2901285_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-12 10:56 PDT" data-time="1460483779">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: UNCONFIRMED &rarr; NEW</div><div class="change">Ever confirmed: true</div><div class="change">Flags: needinfo?(seth) &rarr; needinfo?(bugs)</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-high&amp;resolution=---">sec-high</a></div></div></div><div class="change-set" id="c8"><div class="comment" data-id="11328375" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452036" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/6cf6a8d04179da2ab0f6dbc88dc5fe7b?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_452036" id="a2901285_1689"><a class="email " href="/user_profile?user_id=452036" > <span class="fna">Seth Fowler [:seth] [:s2h]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-14 17:30 PDT" data-time="1460680239">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="11328375">This is definitely not an ImageLib bug, and I don't think there's any behavior specific to XUL images here, either. Have we verified that the connection is not being kept alive by the favicon service? Because that's what I'd expect. Here's the entry point for loading a favicon:

<a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/nsFaviconService.cpp#210">https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/nsFaviconService.cpp#210</a>

I'm not really familiar with the favicon-related code in the frontend. Gijs, does this diagnosis seem correct to you?

If so, we should probably add a timeout for loading favicons, even if we continue to receive data. That's something that network folks would know more about than I would.</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs)</div><div class="change">Flags: <span class="activity-deleted">needinfo?(bugs)</span></div></div></div><div class="change-set" id="c9"><div class="comment" data-id="11329140" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 02:26 PDT" data-time="1460712388">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="11329140">(In reply to Seth Fowler [:seth] [:s2h] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c8">comment #8</a>)
<span class="quote">&gt; This is definitely not an ImageLib bug, and I don't think there's any
&gt; behavior specific to XUL images here, either. Have we verified that the
&gt; connection is not being kept alive by the favicon service? Because that's
&gt; what I'd expect. Here's the entry point for loading a favicon:
&gt; 
&gt; <a rel="nofollow" href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/">https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/</a>
&gt; nsFaviconService.cpp#210
&gt; 
&gt; I'm not really familiar with the favicon-related code in the frontend. Gijs,
&gt; does this diagnosis seem correct to you?</span >

Hm, it could be. I struggled to reproduce with the attached testcase a few days ago, but I probably did something wrong...

<span class="quote">&gt; If so, we should probably add a timeout for loading favicons, even if we
&gt; continue to receive data. That's something that network folks would know
&gt; more about than I would.</span >

This is places code, so I'm forwarding this to Marco (sorry, Marco).</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs) &rarr; needinfo?(mak77)</div></div></div><div class="change-set" id="c10"><div class="comment" data-id="11329882" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a2901285_1689"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 07:14 PDT" data-time="1460729654">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="11329882">Hi Gijs, 
I would like to hear that you or someone else can reproduce. 

Here are steps that could help:

favicon.html:
- 1. set wait value for a bit less, for example use line: var wait = i*2; It's easier to test with higher request interval than what the default value is (1 min). 
- 2. set target address favicon(&quot;<a rel="nofollow" href="http://example.com:1337">http://example.com:1337</a> to point to your server
redir.py:
- 1. start server: python redir.py 
- 2. ensure connection and redirection works and you can make request using your browser: <a rel="nofollow" href="http://example.com:1337/?wait=3&amp;url=http://google.com">http://example.com:1337/?wait=3&amp;url=http://google.com</a>

Logout from google service (so we can prove the request can be done at the later time). After that, open favicon.html with your browser and wait 10 sec delay until it redirects to google. Now, login to your google account and view your search history. You should see search requests like CSRF-hack&lt;number&gt; when the attack success. Before that, you may see a lot of traffic on the python service, like multiple requests are connecting and disconnecting. You should see csrf attacks when page is closen, socket errors when browser is closen, and when you kill your python service and restart it you see reconnections.</pre></div><div class="change-set" id="c11"><div class="comment" data-id="11329936" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a2901285_1689"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 07:37 PDT" data-time="1460731025">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="11329936">This is where the browser passes info to the favicon service:
<a rel="nofollow" href="http://mxr.mozilla.org/mozilla-central/source/browser/base/content/tabbrowser.xml#885">http://mxr.mozilla.org/mozilla-central/source/browser/base/content/tabbrowser.xml#885</a>
The favicons service loads the icon asynchronously and then stores it in the db:
<a rel="nofollow" href="http://mxr.mozilla.org/mozilla-central/source/toolkit/components/places/AsyncFaviconHelpers.cpp#538">http://mxr.mozilla.org/mozilla-central/source/toolkit/components/places/AsyncFaviconHelpers.cpp#538</a>

Off-hand I don't know if there's any silver bullet in netwerk allowing to set a timeout on a channel, but in the worst case I suppose we may just check elapsed time in OnDataAvailable.
Do we agree the timeout solution would be enough to solve this? In the end it would disallow abusing a very long open connection, so it seems it may do.

Though, are we sure favicons are the only thing we load in background? Cause otherwise it may be better to evaluate a more general approach/solution.
Some of the things that came to my mind (downloads, RSS) are added by the user, so unlikely to be exploitable just by visiting a page... Anything else that comes to your mind?</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mak77)</span></div></div></div><div class="change-set" id="c12"><div class="comment" data-id="11329966" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 07:46 PDT" data-time="1460731579">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="11329966">(In reply to Toni Huttunen from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c10">comment #10</a>)
<span class="quote">&gt; Now, login to your google account and
&gt; view your search history.</span >

I don't have search history enabled, for the obvious security- and privacy-related reasons, so I cannot follow these steps.

I also don't understand why the testcase is so complex - the point of this particular bug is that the connection outlasts the tab, and as long as the python script accurately indicates whether the connection is alive that can be proved without the requests to google, no?

So I instead tried to use an empty HTML page that just used the relevant favicon, load it, then close the tab (but not the browser), and rely on the console output from redir.py - but that kept erroring out with raw python &quot;client disconnected&quot; errors.

The CSRF thing doesn't really make sense to me. If your steps involve logging out of google before ever opening the page with the favicon, how do the requests end up in a logged-in account's search history? That seems like a completely orthogonal CSRF issue with Google, that you could also reproduce if you made those requests via e.g. &lt;img&gt; elements on the original page, no? What am I missing?</pre><div class="activity"><div class="change">Flags: needinfo?(toni.huttunen)</div></div></div><div class="change-set" id="c13"><div class="comment" data-id="11329988" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 07:53 PDT" data-time="1460732015">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="11329988">(In reply to Marco Bonardo [::mak] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c11">comment #11</a>)
<span class="quote">&gt; This is where the browser passes info to the favicon service:
&gt; <a rel="nofollow" href="http://mxr.mozilla.org/mozilla-central/source/browser/base/content/">http://mxr.mozilla.org/mozilla-central/source/browser/base/content/</a>
&gt; tabbrowser.xml#885
&gt; The favicons service loads the icon asynchronously and then stores it in the
&gt; db:
&gt; <a rel="nofollow" href="http://mxr.mozilla.org/mozilla-central/source/toolkit/components/places/">http://mxr.mozilla.org/mozilla-central/source/toolkit/components/places/</a>
&gt; AsyncFaviconHelpers.cpp#538
&gt; 
&gt; Off-hand I don't know if there's any silver bullet in netwerk allowing to
&gt; set a timeout on a channel, but in the worst case I suppose we may just
&gt; check elapsed time in OnDataAvailable.</span >

We could start our own one-shot nsITimer and keep a reference to the channel and abort it when the timer expires? That seems simplest if netwerk doesn't have a more general way of doing this.

<span class="quote">&gt; Do we agree the timeout solution would be enough to solve this? In the end
&gt; it would disallow abusing a very long open connection, so it seems it may do.</span >

Well, either that or make the favicon service return something that we can use to kill off the request when the tab or window goes away, or when setIcon is called again. That would require keeping track of all of that per-browser window, though, which is annoying. Then there's <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - Allow specifying a principal on XUL image elements and use that principal to do the image load (and maybe also a referrer policy?)"
   href="/show_bug.cgi?id=1166891">bug 1166891</a> as well...

The more I think about it the more I feel like it would make more sense for us to fetch the favicon from docshell-land and use a message to pass a blob/data thing to the parent process. It would fix a lot of the issues we have with favicons as it is (and probably get us new, as-yet-unknown ones instead...). What do you think?

<span class="quote">&gt; Though, are we sure favicons are the only thing we load in background? Cause
&gt; otherwise it may be better to evaluate a more general approach/solution.
&gt; Some of the things that came to my mind (downloads, RSS) are added by the
&gt; user, so unlikely to be exploitable just by visiting a page... Anything else
&gt; that comes to your mind?</span >

Not really... most other things would be in-document and get nuked as part of the document's load group going away, I'd think.

Though don't service workers generally allow pages to do requests after they have been shut down? Maybe we explicitly disallow off-domain http redirects for those? I don't know...</pre><div class="activity"><div class="change">Flags: needinfo?(mak77)</div></div></div><div class="change-set" id="c14"><div class="comment" data-id="11330029" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a2901285_1689"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 08:09 PDT" data-time="1460732987">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="11330029">The (new) requests end up to the logged-in account because you do the login later. The point is that you can attack to page which has no active session currently but later has.

Also, I'm not sure if the timeout is the only issue. Even if you add timeout to a single favicon request it seems like they are queued(?) and only dozen(?) of them are active at the same time. You can just fill the queue and make more requests (even they do timeout)</pre></div><div class="change-set" id="c15"><div class="comment" data-id="11330056" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a2901285_1689"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 08:18 PDT" data-time="1460733480">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="11330056">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c13">comment #13</a>)
<span class="quote">&gt; We could start our own one-shot nsITimer and keep a reference to the channel
&gt; and abort it when the timer expires? That seems simplest if netwerk doesn't
&gt; have a more general way of doing this.</span >

yes, that's possible.

<span class="quote">&gt; &gt; Do we agree the timeout solution would be enough to solve this? In the end
&gt; &gt; it would disallow abusing a very long open connection, so it seems it may do.
&gt; 
&gt; Well, either that or make the favicon service return something that we can
&gt; use to kill off the request when the tab or window goes away, or when
&gt; setIcon is called again.</span >

It's also feasible from the favicons service api I think. But yes, it requires some bookkeeping to keep around the cancelable object. May not be so bad though, if the API just returns an object with a cancel() method and we store it in a property of the parent browser.

<span class="quote">&gt; The more I think about it the more I feel like it would make more sense for
&gt; us to fetch the favicon from docshell-land and use a message to pass a
&gt; blob/data thing to the parent process. It would fix a lot of the issues we
&gt; have with favicons as it is (and probably get us new, as-yet-unknown ones
&gt; instead...). What do you think?</span >

The favicon service already supports setting favicon data before a call to SetAndFetchFaviconForPage (through replaceFaviconData or replaceFaviconDataFromDataURL) and in such a case it will use the handed data instead of fetching it from the network.
The problem is that when we ask the favicon service to store an icon, it first go checking if we already have a non expired favicon for that page url, and, if so, we just ignore the request and keep using the icon we already have. Icons expire according to cache rules, IIRC after 7 days.
If we move the loading out of the service, we'll need an API to ask if it wants an updated icon or not. We could add an ignoreExpired argument to getFaviconURLForPage for that.
Another problem is that the content process will have to ask the parent process if it should load the icon, wait for the answer, load the icon, then pass it back to the parent that will store it... it starts being complex.

<span class="quote">&gt; Not really... most other things would be in-document and get nuked as part
&gt; of the document's load group going away, I'd think.</span >

but we can't pass through the loadGroup cause it's in the in-content process, while we are in the chrome process, right?</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mak77)</span></div></div></div><div class="change-set" id="c16"><div class="comment" data-id="11330103" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 08:33 PDT" data-time="1460734437">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="11330103">(In reply to Toni Huttunen from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c14">comment #14</a>)
<span class="quote">&gt; Also, I'm not sure if the timeout is the only issue. Even if you add timeout
&gt; to a single favicon request it seems like they are queued(?) and only
&gt; dozen(?) of them are active at the same time. You can just fill the queue
&gt; and make more requests (even they do timeout)</span >

How do you make more requests when the page has been closed / navigated away from? That's the attack vector you're describing here, right? When the page is not running, it shouldn't be possible to trigger new favicon requests... As long as the timeout relates to when they got added to the queue, instead of when they start actually requesting data from the network, a timeout would work.</pre></div><div class="change-set" id="c17"><div class="comment" data-id="11330133" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a2901285_1689"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 08:50 PDT" data-time="1460735422">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="11330133">Yeah. Timeout will work if it relates to time when it was added to the queue and not when the actual transmission begins.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(toni.huttunen)</span></div></div></div><div class="change-set" id="c18"><div class="comment" data-id="11330163" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-15 09:06 PDT" data-time="1460736411">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="11330163">(In reply to Marco Bonardo [::mak] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c15">comment #15</a>)
<span class="quote">&gt; It's also feasible from the favicons service api I think. But yes, it
&gt; requires some bookkeeping to keep around the cancelable object. May not be
&gt; so bad though, if the API just returns an object with a cancel() method and
&gt; we store it in a property of the parent browser.</span >

Right, I'm just worried we'll mess up the bookkeeping some way. It sounds error-prone.

Thinking about this more... what we really want is for the favicon request to be associated with the (inner) window of the content going away. We can't do that directly because the load group lives in the content process and the favicon requests live in the parent.

However... we can keep track of inner content windows going away using the dom-window-destroyed observer notification. If we associate the setIcon and the favicon service requests with an inner window ID, and we send an event/message/notification/whatever to the parent process when that inner window ID goes away, we can kill off all the requests associated with the window in the favicon service (which I assume is running in the parent...).

Does that sound better, or am I missing something else? Should probably run this by smaug/bz or someone like that as well to see how evil it is to depend on dom-window-destroyed for this... but from a quick test it seems like that could work?</pre><div class="activity"><div class="change">Flags: needinfo?(mak77)</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="11334316" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a2901285_1689"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-04-18 07:58 PDT" data-time="1460991532">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="11334316">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c18">comment #18</a>)
<span class="quote">&gt; However... we can keep track of inner content windows going away using the
&gt; dom-window-destroyed observer notification. If we associate the setIcon and
&gt; the favicon service requests with an inner window ID, and we send an
&gt; event/message/notification/whatever to the parent process when that inner
&gt; window ID goes away, we can kill off all the requests associated with the
&gt; window in the favicon service (which I assume is running in the parent...).
&gt; 
&gt; Does that sound better, or am I missing something else? Should probably run
&gt; this by smaug/bz or someone like that as well to see how evil it is to
&gt; depend on dom-window-destroyed for this... but from a quick test it seems
&gt; like that could work?</span >

I think it's the safest approach. And we could still have a more general timeout in the favicons service, as a second shield, since regardless we don't want a network fetch to live forever and add-ons may not do the right thing.
I filed <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a> to add an optional cancelable to setAndFetchFaviconForPage API, that can be public since it's a simple API change that doesn't expose any danger. I'll start looking into that to ensure it's feasible.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mak77)</span></div></div></div><div class="change-set" id="c20"><div class="comment" data-id="11384311" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a2901285_1689"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-05 02:57 PDT" data-time="1462442250">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="11384311"><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a> landed on inbound, so this should now be actionable.</pre></div><div class="change-set" id="c21"><div class="comment" data-id="11384477" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-05 04:50 PDT" data-time="1462449056">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="11384477">(In reply to Marco Bonardo [::mak] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c20">comment #20</a>)
<span class="quote">&gt; <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a> landed on inbound, so this should now be actionable.</span >

I'll look at this next week.</pre><div class="activity"><div class="change">Assignee: nobody &rarr; gijskruitbosch+bugs</div><div class="change">Status: NEW &rarr; ASSIGNED</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="11400895" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-11 10:27 PDT" data-time="1462987632">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8751377"
         class="attachment patch obsolete"
         data-id="8751377" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="favicon-timeout-fixes.txt">
      <meta itemprop="contentSize" content="25952">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8751377">
          <a class="link" href="attachment.cgi?id=8751377&amp;action=diff">
        <span id="att-8751377-description" itemprop="description">Patch v1</span></a> (obsolete)
        — <a href="attachment.cgi?id=8751377&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8751377">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-22" data-comment-id="11400895">Bigger than I thought it was going to be, but here we go. Specific sub-parts:

1) I created a JSM to do the management of this stuff;
2) I removed direct references to the favicon service from tabbrowser.xml to make that file even slightly smaller...
3) I evicted a bunch of dead refs to the favicon service in feedwriter. We use a &lt;select&gt; dropdown now so we never need icons there anymore, so let's just dump the code.
4) I wrote an automated test;
5) then I realized that the work from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a> missed out the case of the continuous redirect, so I had to add support in there that kills off the redirect if the request has been cancelled by the time the request got sent.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8751377&amp;action=edit"
           title="Patch v1"
           class=""
        >Attachment #8751377</a> -
        Flags: review?(mak77)</div></div></div><div class="change-set" id="c23"><div class="comment" data-id="11400905" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-11 10:30 PDT" data-time="1462987804">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="11400905">How do we feel about the sec-high and backports here (this is like a pre-emptive discussion related to eventual sec-approval)? I think this patch is much too big to backport to ESR. I don't know if we can do a much simpler thing, as it's going to depend on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a> either way, which was also not small. But I also have to say that I don't understand why this is rated sec-high...</pre><div class="activity"><div class="change">Flags: needinfo?(dveditz)</div></div></div><div class="change-set" id="c24"><div class="comment" data-id="11400913" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-11 10:33 PDT" data-time="1462987988">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="11400913">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8751377" name="attach_8751377" title="Patch v1">attachment 8751377</a> <a href="/attachment.cgi?id=8751377&amp;action=edit" title="Patch v1">[details]</a> <a href="/attachment.cgi?id=8751377&amp;action=diff" title="Patch v1">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8751377'>[review]</a>
Patch v1

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8751377" name="attach_8751377" title="Patch v1">attachment 8751377</a> <a href="/attachment.cgi?id=8751377&amp;action=edit" title="Patch v1">[details]</a> <a href="/attachment.cgi?id=8751377&amp;action=diff" title="Patch v1">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8751377'>[review]</a>:
-----------------------------------------------------------------

::: browser/base/content/tabbrowser.xml
&#64;&#64; +857,5 &#64;&#64;
<span class="quote">&gt;            &lt;![CDATA[
&gt;              let browser = this.getBrowserForTab(aTab);
&gt;              browser.mIconURL = aURI instanceof Ci.nsIURI ? aURI.spec : aURI;
&gt;  
&gt; +            if (aURI &amp;&amp; window.FaviconManager) {</span >

FWIW, not entirely sure we need this check as to whether the service / manager exists. Why do we check for mFaviconService here?

::: toolkit/components/places/FaviconManager.jsm
&#64;&#64; +20,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +let gWindowToRequestInfoMap = new Map();
&gt; +
&gt; +// Should be const, but isn't because of tests.
&gt; +let FAVICON_REQUEST_TIMEOUT = 60 * 1000;</span >

Self-nit: this can be const after all based on the test I ended up writing.

::: toolkit/components/places/tests/browser/infini-favicon.sjs
&#64;&#64; +1,1 &#64;&#64;
<span class="quote">&gt; +const DELAY_MS = 5000;</span >

Self-nit: this is now dead.

::: toolkit/content/browser-content.js
&#64;&#64; +1186,5 &#64;&#64;
<span class="quote">&gt;    sendAsyncMessage(&quot;MozApplicationManifest&quot;, info);
&gt;  }, false);
&gt;  
&gt; +if (&quot;mozIAsyncFavicons&quot; in Ci) {
&gt; +  Cu.import(&quot;resource://gre/modules/FaviconManager.jsm&quot;);</span >

This should be what's going on in browser-child.js and that should be enough.</pre></div><div class="change-set" id="c25"><div class="comment" data-id="11400927" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a2901285_1689"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-11 10:37 PDT" data-time="1462988260">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8751378"
         class="attachment patch obsolete"
         data-id="8751378" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="favicon-timeout-fixes.txt">
      <meta itemprop="contentSize" content="25255">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8751378">
          <a class="link" href="attachment.cgi?id=8751378&amp;action=diff">
        <span id="att-8751378-description" itemprop="description">Patch v1.1</span></a> (obsolete)
        — <a href="attachment.cgi?id=8751378&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8751378">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8751377&amp;action=edit"
           title="Patch v1"
           class=""
        >Attachment #8751377</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8751377&amp;action=edit"
           title="Patch v1"
           class=""
        >Attachment #8751377</a> -
        Flags: <span class="activity-deleted">review?(mak77)</span></div><div class="change">
        <a href="/attachment.cgi?id=8751378&amp;action=edit"
           title="Patch v1.1"
           class=""
        >Attachment #8751378</a> -
        Flags: review?(mak77)</div></div></div><div class="change-set" id="c26"><div class="comment" data-id="11407044" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a2901285_1689"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a2901285_1689"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-13 06:14 PDT" data-time="1463145243">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="11407044">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8751378" name="attach_8751378" title="Patch v1.1">attachment 8751378</a> <a href="/attachment.cgi?id=8751378&amp;action=edit" title="Patch v1.1">[details]</a> <a href="/attachment.cgi?id=8751378&amp;action=diff" title="Patch v1.1">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8751378'>[review]</a>
Patch v1.1

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8751378" name="attach_8751378" title="Patch v1.1">attachment 8751378</a> <a href="/attachment.cgi?id=8751378&amp;action=edit" title="Patch v1.1">[details]</a> <a href="/attachment.cgi?id=8751378&amp;action=diff" title="Patch v1.1">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8751378'>[review]</a>:
-----------------------------------------------------------------

The approach is OK, but I have a slightly different vision of how I'd spread this code, that I think in the end would bring to a smaller footprint.
First, I'd move this to browser, it doesn't look in the right place under toolkit/places.
Then, I think some of the code is too abstract for what it's doing, sure in the future we may need to split functions to methods, switch on messages and so on, but for now all of that is pointless, and we should try to not code too much for a future that may never come.

::: browser/base/content/tabbrowser.xml
&#64;&#64; +940,5 &#64;&#64;
<span class="quote">&gt;        &lt;method name=&quot;isFailedIcon&quot;&gt;
&gt;          &lt;parameter name=&quot;aURI&quot;/&gt;
&gt;          &lt;body&gt;
&gt;            &lt;![CDATA[
&gt; +            if (window.FaviconManager) {</span >

yeah I don't know why we do this check. Maybe it's a leftover from XUL Fennec.

&#64;&#64; +945,3 &#64;&#64;
<span class="quote">&gt;                if (!(aURI instanceof Ci.nsIURI))
&gt;                  aURI = makeURI(aURI);
&gt; +              return FaviconManager.isFailedFavicon(aURI);</span >

This abstraction is not really needed, just use PlacesUtils.favicons.isFailedFavicon(aURI)

::: toolkit/components/places/FaviconHelpers.cpp
&#64;&#64; +512,5 &#64;&#64;
<span class="quote">&gt;  )
&gt;  {
&gt; +  // If we've canceled and send NS_BINDING_ABORTED, onStartRequest and
&gt; +  // friends will still be called on oldChannel, and onStartRequest will
&gt; +  // call Cancel() on the request and return early.</span >

doesn't sound very readable, I had to re-read it thrice before understanding what you meant. worth some rewording.
Basically in case of cancel we vetoed the redirect and handle cancel on the original channel.

::: toolkit/components/places/FaviconManager.jsm
&#64;&#64; +1,4 &#64;&#64;
<span class="quote">&gt; +// -*- indent-tabs-mode: nil; js-indent-level: 2 -*-
&gt; +// This Source Code Form is subject to the terms of the Mozilla Public
&gt; +// License, v. 2.0. If a copy of the MPL was not distributed with this
&gt; +// file, You can obtain one at <a rel="nofollow" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</span >

Considering what this is doing and the fact it's managing browsers, I'd rather put this either into browser/components/places/ or in browser/modules. Toolkit Places is more for the raw APIs to add, edit, remove stuff. This is more browser-related code, that could also only be useful to Firefox.
Also, considering the only API is exposes is load() the FaviconManager names sounds exaggerated. Maybe FaviconLoader or FaviconLoadManager.

I could also suggest another alternative, just expose a loadFavicon from PlacesUIUtils and hide the implementation in an internal FaviconLoadManager object in the PlacesUIUtils global object.

&#64;&#64; +13,5 &#64;&#64;
<span class="quote">&gt; +Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);
&gt; +Cu.import(&quot;resource://gre/modules/Timer.jsm&quot;);
&gt; +
&gt; +XPCOMUtils.defineLazyServiceGetter(this, &quot;faviconSvc&quot;,
&gt; +  &quot;&#64;mozilla.org/browser/favicon-service;1&quot;, &quot;nsIFaviconService&quot;);</span >

I'd prefer if you could use PlacesUtils.favicons instead.

&#64;&#64; +17,5 &#64;&#64;
<span class="quote">&gt; +  &quot;&#64;mozilla.org/browser/favicon-service;1&quot;, &quot;nsIFaviconService&quot;);
&gt; +XPCOMUtils.defineLazyModuleGetter(this, &quot;PrivateBrowsingUtils&quot;,
&gt; +  &quot;resource://gre/modules/PrivateBrowsingUtils.jsm&quot;);
&gt; +
&gt; +let gWindowToRequestInfoMap = new Map();</span >

is &quot;Info&quot; really needed here? the name looks long enough even without it ;)

&#64;&#64; +31,5 &#64;&#64;
<span class="quote">&gt; +        // Only care about the toplevel window being unloaded, and only when it's not
&gt; +        // about:blank being unloaded in favour of something else.
&gt; +        if (ev.target.defaultView == ev.target.defaultView.top &amp;&amp;
&gt; +            ev.target.documentURI != &quot;about:blank&quot;) {
&gt; +          this.onUnload(ev.target.defaultView);</span >

For readability please fully name event argument and let doc = event.target; let win = doc.defaultView;

&#64;&#64; +42,5 &#64;&#64;
<span class="quote">&gt; +   * Handle inner-window-destroyed notifications that happened in the child process.
&gt; +   */
&gt; +  receiveMessage(msg) {
&gt; +    switch (msg.name) {
&gt; +      case &quot;FaviconManager::inner-window-destroyed&quot;:</span >

This is over engineered, please just inline a function in addMessageListener and invoke onInnerDestroyed from there.

&#64;&#64; +65,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +  /**
&gt; +   * Actually cancel the request, and clear the timeout for cancelling it.
&gt; +   */
&gt; +  _cancelRequest({request, uri, innerWindowID, timerID}, reason) {</span >

Please better separate the external API and the implementation details, it doesn't make sense to have fake internal methods in the main exposed object, that one should only expose a clean API (that so far looks like being load and isFailedFavicon). implementation details should not be exposed outside of the module.

&#64;&#64; +83,5 &#64;&#64;
<span class="quote">&gt; +      for (let i = 0; i &lt; windowRequestInfos.length; i++) {
&gt; +        let requestInfo = windowRequestInfos[i];
&gt; +        if (requestInfo.innerWindowID == innerID) {
&gt; +          windowRequestInfos.splice(i, 1);
&gt; +          i--;</span >

it's a bit error prone to modify the array you are walking...
Maybe you could use .filter to build a new array, and set it back into windowRequestInfos?

&#64;&#64; +108,5 &#64;&#64;
<span class="quote">&gt; +  },
&gt; +
&gt; +  _registerWindow(win) {
&gt; +    gWindowToRequestInfoMap.set(win, []);
&gt; +    win.addEventListener(&quot;unload&quot;, this, true);</span >

off-hand, the whole handleEvent code seems over-engineered for just this, it could be directly inlined as a function here. Also _registerWindow has just one caller, so it could be inlined in load, as well.

&#64;&#64; +156,5 &#64;&#64;
<span class="quote">&gt; +    let win = browser.ownerDocument.defaultView;
&gt; +    let loadType = PrivateBrowsingUtils.isWindowPrivate(win)
&gt; +      ? faviconSvc.FAVICON_LOAD_PRIVATE
&gt; +      : faviconSvc.FAVICON_LOAD_NON_PRIVATE;
&gt; +    let callback = this._getCallback(win, innerWindowID);</span >

s/get/make/ it should be clear we are generating a callback, not just getting it from somewhere else.
Maybe _makeUnregisterCallback?

&#64;&#64; +203,5 &#64;&#64;
<span class="quote">&gt; +
&gt; +Services.obs.addObserver(FaviconManager, &quot;inner-window-destroyed&quot;, false);
&gt; +if (!gInContentProcess) {
&gt; +  Services.ppmm.addMessageListener(&quot;FaviconManager::inner-window-destroyed&quot;, FaviconManager);
&gt; +}</span >

in the main process looks like we need to do these only after the first load() call, so these could be moved there, behind an _initialized check.
the content process part would be better directly inlined in browser-child, imo.

::: toolkit/components/places/tests/browser/browser_favicon_timeouts.js
&#64;&#64; +1,1 &#64;&#64;
<span class="quote">&gt; +&quot;use strict&quot;;</span >

I'd also move the test files to browser

&#64;&#64; +38,5 &#64;&#64;
<span class="quote">&gt; +      onDataAvailable() {},
&gt; +      QueryInterface: XPCOMUtils.generateQI([Ci.nsIHttpActivityObserver, Ci.nsIStreamListener, Ci.nsIRequestObserver]),
&gt; +    };
&gt; +  });
&gt; +  let distributor = Cc[&quot;&#64;mozilla.org/network/http-activity-distributor;1&quot;].getService(Ci.nsIHttpActivityDistributor);</span >

Some of the test code could be re indented to be kind with our legacy 80 chars width limit

::: toolkit/content/browser-child.js
&#64;&#64; +12,5 &#64;&#64;
<span class="quote">&gt;  Cu.import(&quot;resource://gre/modules/RemoteAddonsChild.jsm&quot;);
&gt;  Cu.import(&quot;resource://gre/modules/Timer.jsm&quot;);
&gt; +if (&quot;mozIAsyncFavicons&quot; in Ci) {
&gt; +  Cu.import(&quot;resource://gre/modules/FaviconManager.jsm&quot;);
&gt; +}</span >

I'd rather directly put the code here (at the bottom of the file) to forward the message, we don't need the whole module, just a few rows.
A small comment explaining its need would also be nice</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8751378&amp;action=edit"
           title="Patch v1.1"
           class=""
        >Attachment #8751378</a> -
        Flags: <span class="activity-deleted">review?(mak77)</span></div></div></div><div class="change-set" id="a5836914_280903"><div class="change" id="aa5836914_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a5836914_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5836914_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5836914_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a5836914_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-16 10:23 PDT" data-time="1463419408">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty? &rarr; sec-bounty+</div></div></div><div class="change-set" id="c27"><div class="comment" data-id="11414894" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a5836914_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-17 07:27 PDT" data-time="1463495267">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="11414894">(In reply to Marco Bonardo [::mak] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c26">comment #26</a>)
<span class="quote">&gt; &#64;&#64; +17,5 &#64;&#64;
&gt; &gt; +  &quot;&#64;mozilla.org/browser/favicon-service;1&quot;, &quot;nsIFaviconService&quot;);
&gt; &gt; +XPCOMUtils.defineLazyModuleGetter(this, &quot;PrivateBrowsingUtils&quot;,
&gt; &gt; +  &quot;resource://gre/modules/PrivateBrowsingUtils.jsm&quot;);
&gt; &gt; +
&gt; &gt; +let gWindowToRequestInfoMap = new Map();
&gt; 
&gt; is &quot;Info&quot; really needed here? the name looks long enough even without it ;)</span >

Request objects are a thing, and these aren't requests. Maybe &quot;gLoadAttemptMap&quot; instead, or something?

<span class="quote">&gt; &#64;&#64; +42,5 &#64;&#64;
&gt; &gt; +   * Handle inner-window-destroyed notifications that happened in the child process.
&gt; &gt; +   */
&gt; &gt; +  receiveMessage(msg) {
&gt; &gt; +    switch (msg.name) {
&gt; &gt; +      case &quot;FaviconManager::inner-window-destroyed&quot;:
&gt; 
&gt; This is over engineered, please just inline a function in addMessageListener
&gt; and invoke onInnerDestroyed from there.</span >

This is fine... in the past, I've done this and then other reviewers tell me that we should always use objects over functions. It would be nice if we settled on code style for something like that. :-\

<span class="quote">&gt; &#64;&#64; +65,5 &#64;&#64;
&gt; &gt; +
&gt; &gt; +  /**
&gt; &gt; +   * Actually cancel the request, and clear the timeout for cancelling it.
&gt; &gt; +   */
&gt; &gt; +  _cancelRequest({request, uri, innerWindowID, timerID}, reason) {
&gt; 
&gt; Please better separate the external API and the implementation details, it
&gt; doesn't make sense to have fake internal methods in the main exposed object,
&gt; that one should only expose a clean API (that so far looks like being load
&gt; and isFailedFavicon). implementation details should not be exposed outside
&gt; of the module.</span >

I can do this, but you're aware that due to how Cu.import works, implementation details are always available anyway, even if you &quot;hide&quot; them in a separate object?

<span class="quote">&gt; &#64;&#64; +203,5 &#64;&#64;
&gt; &gt; +
&gt; &gt; +Services.obs.addObserver(FaviconManager, &quot;inner-window-destroyed&quot;, false);
&gt; &gt; +if (!gInContentProcess) {
&gt; &gt; +  Services.ppmm.addMessageListener(&quot;FaviconManager::inner-window-destroyed&quot;, FaviconManager);
&gt; &gt; +}
&gt; 
&gt; in the main process looks like we need to do these only after the first
&gt; load() call, so these could be moved there, behind an _initialized check.</span >

We load the module lazily in the main process, so this won't actually make a difference - we load the module in order to call load, only at the point where we do actually call load().

The load call is in the parent process, and the child process doesn't know when this happens, and so it just needs to know about inner-window-destroyed all the time, AIUI. So I don't think it's worth separating this out.

<span class="quote">&gt; the content process part would be better directly inlined in browser-child,
&gt; imo.</span >

The content process part is adding an observer. If we did this in browser-child, we'd end up with 1 observer for every tab - that's an inefficient pattern I've been trying to get rid of (<a class="bz_bug_link
          bz_status_UNCONFIRMED"
   title="UNCONFIRMED - [e10s][meta] built-in framescripts register observers for each tab"
   href="/show_bug.cgi?id=1195386">bug 1195386</a>). I can look at putting it in the content process script we have in browser/ (we don't have one in toolkit, I think).</pre></div><div class="change-set" id="c28"><div class="comment" data-id="11415270" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a5836914_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-17 09:33 PDT" data-time="1463502835">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8753406"
         class="attachment patch"
         data-id="8753406" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="favicon-requests.txt">
      <meta itemprop="contentSize" content="25953">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8753406">
          <a class="link" href="attachment.cgi?id=8753406&amp;action=diff">
        <span id="att-8753406-description" itemprop="description">Patch v1.2</span></a>
        — <a href="attachment.cgi?id=8753406&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8753406">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8751378&amp;action=edit"
           title="Patch v1.1"
           class=""
        >Attachment #8751378</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8753406&amp;action=edit"
           title="Patch v1.2"
           class=""
        >Attachment #8753406</a> -
        Flags: review?(mak77)</div></div></div><div class="change-set" id="c29"><div class="comment" data-id="11425012" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a5836914_280903"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 02:35 PDT" data-time="1463736934">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="11425012">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c27">comment #27</a>)
<span class="quote">&gt; This is fine... in the past, I've done this and then other reviewers tell me
&gt; that we should always use objects over functions. It would be nice if we
&gt; settled on code style for something like that. :-\</span >

I honestly don't see a reason for such requests. If the code starts growing, then it makes sense to move to an object, but over-complicating current code for the sake of &quot;possible&quot; future code grow is a no-go, imo. It depends on the gain, as usual.

<span class="quote">&gt; I can do this, but you're aware that due to how Cu.import works,
&gt; implementation details are always available anyway, even if you &quot;hide&quot; them
&gt; in a separate object?</span >

It is mostly a matter of presenting a cleaner API to non-malicious consumers and making things less bug prone (make clearer what should be used and what not and that if you need access to an internal detail, maybe you are doing it wrong)</pre></div><div class="change-set" id="c30"><div class="comment" data-id="11425178" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a5836914_280903"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 04:05 PDT" data-time="1463742328">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="11425178">Comment on <span class=""><a href="/attachment.cgi?id=8753406" name="attach_8753406" title="Patch v1.2">attachment 8753406</a> <a href="/attachment.cgi?id=8753406&amp;action=edit" title="Patch v1.2">[details]</a> <a href="/attachment.cgi?id=8753406&amp;action=diff" title="Patch v1.2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8753406'>[review]</a>
Patch v1.2

Review of <span class=""><a href="/attachment.cgi?id=8753406" name="attach_8753406" title="Patch v1.2">attachment 8753406</a> <a href="/attachment.cgi?id=8753406&amp;action=edit" title="Patch v1.2">[details]</a> <a href="/attachment.cgi?id=8753406&amp;action=diff" title="Patch v1.2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8753406'>[review]</a>:
-----------------------------------------------------------------

::: browser/components/places/PlacesUIUtils.jsm
&#64;&#64; +148,5 &#64;&#64;
<span class="quote">&gt; +   * away) but that will be a no-op in such cases.
&gt; +   */
&gt; +  _makeCompletionCallback(win, id) {
&gt; +    return {
&gt; +      onComplete(uri) {</span >

you don't need to return an object, since nsIFaviconDataCallback has the function decorator. Just return a function.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753406&amp;action=edit"
           title="Patch v1.2"
           class=""
        >Attachment #8753406</a> -
        Flags: review?(mak77) &rarr; review+</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="11425192" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a5836914_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 04:16 PDT" data-time="1463743010">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="11425192">(In reply to Marco Bonardo [::mak] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c30">comment #30</a>)
<span class="quote">&gt; Comment on <span class=""><a href="/attachment.cgi?id=8753406" name="attach_8753406" title="Patch v1.2">attachment 8753406</a> <a href="/attachment.cgi?id=8753406&amp;action=edit" title="Patch v1.2">[details]</a> <a href="/attachment.cgi?id=8753406&amp;action=diff" title="Patch v1.2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8753406'>[review]</a>
&gt; Patch v1.2
&gt; 
&gt; Review of <span class=""><a href="/attachment.cgi?id=8753406" name="attach_8753406" title="Patch v1.2">attachment 8753406</a> <a href="/attachment.cgi?id=8753406&amp;action=edit" title="Patch v1.2">[details]</a> <a href="/attachment.cgi?id=8753406&amp;action=diff" title="Patch v1.2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8753406'>[review]</a>:
&gt; -----------------------------------------------------------------
&gt; 
&gt; ::: browser/components/places/PlacesUIUtils.jsm
&gt; &#64;&#64; +148,5 &#64;&#64;
&gt; &gt; +   * away) but that will be a no-op in such cases.
&gt; &gt; +   */
&gt; &gt; +  _makeCompletionCallback(win, id) {
&gt; &gt; +    return {
&gt; &gt; +      onComplete(uri) {
&gt; 
&gt; you don't need to return an object, since nsIFaviconDataCallback has the
&gt; function decorator. Just return a function.</span >

I do. I'm assigning something onto the callback object, and I'm using it with |this| in the function itself. The &quot;something&quot; is the request object which is the result of a call that takes this callback object as an argument, so it doesn't exist yet when the callback is created, so I can't pass it then... so this seemed the easiest thing to do. Is that OK or do you have another suggestion?</pre><div class="activity"><div class="change">Flags: needinfo?(mak77)</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="11425194" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_240353" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/0d674a646529b0795088d7a8075fbaea?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_240353" id="a5836914_280903"><a class="email " href="/user_profile?user_id=240353" > <span class="fna">Marco Bonardo [:mak]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 04:21 PDT" data-time="1463743270">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="11425194">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c31">comment #31</a>)
<span class="quote">&gt; I do. I'm assigning something onto the callback object, and I'm using it
&gt; with |this| in the function itself. The &quot;something&quot; is the request object
&gt; which is the result of a call that takes this callback object as an
&gt; argument, so it doesn't exist yet when the callback is created, so I can't
&gt; pass it then... so this seemed the easiest thing to do. Is that OK or do you
&gt; have another suggestion?</span >

oh sorry, I didn't connect the 2 things. It's fine then.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mak77)</span></div></div></div><div class="change-set" id="c33"><div class="comment" data-id="11425233" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a5836914_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 04:47 PDT" data-time="1463744859">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="11425233">Comment on <span class=""><a href="/attachment.cgi?id=8753406" name="attach_8753406" title="Patch v1.2">attachment 8753406</a> <a href="/attachment.cgi?id=8753406&amp;action=edit" title="Patch v1.2">[details]</a> <a href="/attachment.cgi?id=8753406&amp;action=diff" title="Patch v1.2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8753406'>[review]</a>
Patch v1.2

[Security approval request comment]
How easily could an exploit be constructed based on the patch?
The patch is big and has some unrelated refactoring, but it shouldn't be rocket science to see what we're fixing.

Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Yes, there's a test, so that kind of makes it obvious. Without that, it's a little less obvious, but if we uplift this together with <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a> then it should still be fairly clear.

Which older supported branches are affected by this flaw?
All.

Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Not yet. They will be a little bit tricky, because we'll also need to backport <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a>, which is also not small. On the other hand, I don't think the favicon helpers have changed toooo drastically over the last few versions.

How likely is this patch to cause regressions; how much testing does it need?
In theory it could break favicon loading in some circumstances. It should get some testing, but equally it shouldn't have a terrible impact, either. The sec bug itself has an automated test.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753406&amp;action=edit"
           title="Patch v1.2"
           class=""
        >Attachment #8753406</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c34"><div class="comment" data-id="11425234" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a5836914_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 04:48 PDT" data-time="1463744920">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="11425234">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c33">comment #33</a>)
<span class="quote">&gt; Comment on <span class=""><a href="/attachment.cgi?id=8753406" name="attach_8753406" title="Patch v1.2">attachment 8753406</a> <a href="/attachment.cgi?id=8753406&amp;action=edit" title="Patch v1.2">[details]</a> <a href="/attachment.cgi?id=8753406&amp;action=diff" title="Patch v1.2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8753406'>[review]</a>
&gt; Patch v1.2
&gt; 
&gt; [Security approval request comment]</span >
FWIW, see also <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c23">comment #23</a>...</pre></div><div class="change-set" id="c35"><div class="comment" data-id="11426013" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5836914_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a5836914_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 09:46 PDT" data-time="1463762768">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-35" data-comment-id="11426013">We can skip backporting to ESR45 if this is too hairy.

That said, I don't want us checking in a test until we ship this publicly. So this has sec-approval+ for the main patch but without the test. If possible, we want this on Aurora (at least) and Beta.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=isnotempty">status-firefox46</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox46&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=isnotempty">status-firefox48</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=isnotempty">status-firefox49</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=isnotempty">tracking-firefox47</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox48&amp;o1=isnotempty">tracking-firefox48</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox48&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox49&amp;o1=isnotempty">tracking-firefox49</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox49&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=isnotempty">tracking-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=%3F">?</a></div></div></div><div class="change-set" id="a6180287_280903"><div class="change" id="aa6180287_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a6180287_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6180287_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6180287_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a6180287_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-20 09:46 PDT" data-time="1463762781">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8753406&amp;action=edit"
           title="Patch v1.2"
           class=""
        >Attachment #8753406</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="11429692" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 03:32 PDT" data-time="1463999578">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8755371"
         class="attachment patch obsolete"
         data-id="8755371" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="aurora.txt">
      <meta itemprop="contentSize" content="46559">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8755371">
          <a class="link" href="attachment.cgi?id=8755371&amp;action=diff">
        <span id="att-8755371-description" itemprop="description">Patch for aurora</span></a> (obsolete)
        — <a href="attachment.cgi?id=8755371&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755371">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-36" data-comment-id="11429692">NB: this patch file is an hg export result of two changesets (the fix here and the one from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - SetAndFetchFaviconForPage should return a cancelable object to allow aborting the fetch"
   href="/show_bug.cgi?id=1265420">bug 1265420</a>). I tested &quot;hg import&quot; - ing such a cset, and I believe it should work. Let me know if there are issues.

Approval Request Comment
[Feature/regressing bug #]: n/a
[User impact if declined]: sec-high issue with favicon loads lasting longer than their corresponding tabs.
[Describe test coverage new/current, TreeHerder]: limited coverage. Some of the existing code has coverage, the new things we're doing likely does not.
[Risks and why]: low enough that shipping this on aurora shouldn't be an issue. Beta... it's a bit late, but hopefully there shouldn't be major issues.
[String/UUID change made/needed]: no string changes.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755371&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755371</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8755371&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755371</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="11429693" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 03:33 PDT" data-time="1463999621">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8755372"
         class="attachment patch obsolete"
         data-id="8755372" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="beta.txt">
      <meta itemprop="contentSize" content="46559">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8755372">
          <a class="link" href="attachment.cgi?id=8755372&amp;action=diff">
        <span id="att-8755372-description" itemprop="description">Patch for beta</span></a> (obsolete)
        — <a href="attachment.cgi?id=8755372&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755372">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-37" data-comment-id="11429693">Approval Request Comment --&gt; <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c36">comment #36</a>.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755372&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755372</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8755372&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755372</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c38"><div class="comment" data-id="11429704" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 03:38 PDT" data-time="1463999890">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="11429704">(I have a tree ready to push to inbound/fx-team, but everything is closed. :-( )</pre></div><div class="change-set" id="c39"><div class="comment" data-id="11429724" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 03:52 PDT" data-time="1464000721">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8755377"
         class="attachment patch"
         data-id="8755377" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="tests.txt">
      <meta itemprop="contentSize" content="5650">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8755377">
          <a class="link" href="attachment.cgi?id=8755377&amp;action=diff">
        <span id="att-8755377-description" itemprop="description">Tests for landing later</span></a>
        — <a href="attachment.cgi?id=8755377&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755377">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755377&amp;action=edit"
           title="Tests for landing later"
           class=""
        >Attachment #8755377</a> -
        Flags: review+</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="11430525" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 09:34 PDT" data-time="1464021285">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-40" data-comment-id="11430525">Landed:

<a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/6e2a4ab6ed341f0250422d8f9ba9f4a206cfc527">https://hg.mozilla.org/integration/mozilla-inbound/rev/6e2a4ab6ed341f0250422d8f9ba9f4a206cfc527</a>

and backed out:

<a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/602500597e5f">https://hg.mozilla.org/integration/mozilla-inbound/rev/602500597e5f</a>

for leaking the world. :-(</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs)</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="11431254" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 20:28 PDT" data-time="1464060489">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="11431254">Relanded on fx-team: <a rel="nofollow" href="https://hg.mozilla.org/integration/fx-team/rev/3ff4077f9e4bf923322c95fb7226bc0e9090f898">https://hg.mozilla.org/integration/fx-team/rev/3ff4077f9e4bf923322c95fb7226bc0e9090f898</a></pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(gijskruitbosch+bugs)</span></div></div></div><div class="change-set" id="c42"><div class="comment" data-id="11431668" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6180287_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6180287_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 22:54 PDT" data-time="1464069240">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8755626"
         class="attachment patch"
         data-id="8755626" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="aurora.txt">
      <meta itemprop="contentSize" content="47052">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8755626">
          <a class="link" href="attachment.cgi?id=8755626&amp;action=diff">
        <span id="att-8755626-description" itemprop="description">Patch for aurora</span></a>
        — <a href="attachment.cgi?id=8755626&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755626">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755371&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755371</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8755371&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755371</a> -
        Flags: <span class="activity-deleted">approval-mozilla-aurora?</span></div><div class="change">
        <a href="/attachment.cgi?id=8755626&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755626</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8755626&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755626</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="a6486786_159069"><div class="change" id="aa6486786_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6486786_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a6486786_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6486786_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6486786_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a6486786_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 22:54 PDT" data-time="1464069280">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755626&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755626</a> -
        Attachment description: Patch for aurora (combined with bug 1227116 &rarr; Patch for aurora</div></div></div><div class="change-set" id="c43"><div class="comment" data-id="11431672" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6486786_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6486786_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-23 22:55 PDT" data-time="1464069346">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8755627"
         class="attachment patch"
         data-id="8755627" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="beta.txt">
      <meta itemprop="contentSize" content="47052">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8755627">
          <a class="link" href="attachment.cgi?id=8755627&amp;action=diff">
        <span id="att-8755627-description" itemprop="description">Patch for beta</span></a>
        — <a href="attachment.cgi?id=8755627&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8755627">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755372&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755372</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8755372&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755372</a> -
        Flags: <span class="activity-deleted">approval-mozilla-beta?</span></div><div class="change">
        <a href="/attachment.cgi?id=8755627&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755627</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8755627&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755627</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c44"><div class="comment" data-id="11431858" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_308534" id="a6486786_159069"><img src="https://secure.gravatar.com/avatar/bb55b2a8c34fd29f570ca139f13d46b8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_308534" id="a6486786_159069"><a class="email " href="/user_profile?user_id=308534" > <span class="fna">Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 00:18 PDT" data-time="1464074285">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="11431858"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/3ff4077f9e4b">https://hg.mozilla.org/mozilla-central/rev/3ff4077f9e4b</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=isnotempty">status-firefox49</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Target Milestone: --- &rarr; Firefox 49</div></div></div><div class="change-set" id="a6520814_159069"><div class="change" id="aa6520814_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6520814_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a6520814_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6520814_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6520814_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a6520814_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 08:21 PDT" data-time="1464103308">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2016-05-24 08:21 PDT" data-time="1464103308">6 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="c45"><div class="comment" data-id="11435147" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a6520814_159069"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_538805" id="a6520814_159069"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 21:44 PDT" data-time="1464151466">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="11435147">Comment on <span class=""><a href="/attachment.cgi?id=8755627" name="attach_8755627" title="Patch for beta">attachment 8755627</a> <a href="/attachment.cgi?id=8755627&amp;action=edit" title="Patch for beta">[details]</a> <a href="/attachment.cgi?id=8755627&amp;action=diff" title="Patch for beta">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8755627'>[review]</a>
Patch for beta

Sec-high, Beta47+</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755627&amp;action=edit"
           title="Patch for beta"
           class=""
        >Attachment #8755627</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="a6569004_538805"><div class="change" id="aa6569004_538805">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a6569004_538805"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_538805" id="a6569004_538805"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6569004_538805"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6569004_538805">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a6569004_538805">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 21:44 PDT" data-time="1464151498">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=isnotempty">tracking-firefox47</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox47&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=isnotempty">tracking-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=-">-</a></div></div></div><div class="change-set" id="a6569027_538805"><div class="change" id="aa6569027_538805">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a6569027_538805"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_538805" id="a6569027_538805"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6569027_538805"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6569027_538805">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a6569027_538805">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-24 21:45 PDT" data-time="1464151521">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8755626&amp;action=edit"
           title="Patch for aurora"
           class=""
        >Attachment #8755626</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c46"><div class="comment" data-id="11435634" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_308534" id="a6569027_538805"><img src="https://secure.gravatar.com/avatar/bb55b2a8c34fd29f570ca139f13d46b8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_308534" id="a6569027_538805"><a class="email " href="/user_profile?user_id=308534" > <span class="fna">Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 00:20 PDT" data-time="1464160831">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="11435634"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-aurora/rev/14079be66b19">https://hg.mozilla.org/releases/mozilla-aurora/rev/14079be66b19</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=isnotempty">status-firefox48</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c47"><div class="comment" data-id="11435669" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_308534" id="a6569027_538805"><img src="https://secure.gravatar.com/avatar/bb55b2a8c34fd29f570ca139f13d46b8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_308534" id="a6569027_538805"><a class="email " href="/user_profile?user_id=308534" > <span class="fna">Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 00:40 PDT" data-time="1464162023">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="11435669"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-beta/rev/cbabb4769b50">https://hg.mozilla.org/releases/mozilla-beta/rev/cbabb4769b50</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c48"><div class="comment" data-id="11436111" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349211" id="a6569027_538805"><img src="https://secure.gravatar.com/avatar/34a87f79fc3dd6985e4a1af2b4870a19?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349211" id="a6569027_538805"><a class="email " href="/user_profile?user_id=349211" > <span class="fna">Georg Koppen</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 06:09 PDT" data-time="1464181768">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-48" data-comment-id="11436111">(In reply to Al Billings [:abillings] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c35">comment #35</a>)
<span class="quote">&gt; We can skip backporting to ESR45 if this is too hairy.</span >

Gijs, did you (or anybody else) look into whether this is actually too hairy? For obvious reasons we'd like to have this fix on ESR 45 as well (and the sec-high rating would support this). If that is not happening we would probably bite the bullet, though, trying to backport that patch ourselves. But if we could avoid adding yet another patch to our pile that would be strictly preferable. :)</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs)</div></div></div><div class="change-set" id="c49"><div class="comment" data-id="11436835" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6569027_538805"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6569027_538805"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 12:28 PDT" data-time="1464204488">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8756301"
         class="attachment patch"
         data-id="8756301" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="esr45.txt">
      <meta itemprop="contentSize" content="47179">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8756301">
          <a class="link" href="attachment.cgi?id=8756301&amp;action=diff">
        <span id="att-8756301-description" itemprop="description">Patch for ESR 45</span></a>
        — <a href="attachment.cgi?id=8756301&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1255270&attachment=8756301">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-49" data-comment-id="11436835">[Approval Request Comment]
If this is not a sec:{high,crit} bug, please state case for ESR consideration: sec-high
User impact if declined: ditto
Fix Landed on Version: 49, uplifted to 47 and 48
Risk to taking this patch (and alternatives if risky): relatively large patch, certainly for ESR. I would feel better about it if it had had slightly more baking time on Nightly and aurora/beta. I don't know how the release cadence for ESR works, exactly, and if there is schedule space to do this. There is some automated test coverage, and I did some casual manual testing of this patch against ESR, so it's unlikely to break catastrophically, but there we are.
String or UUID changes made by this patch: Changes interface. No UUID change in the patch because we stopped doing that on m-c at the time of 47. Unclear whether you'd want me to change the UUID or rewrite the patch to not include a breaking interface change (ie adding a second method rather than modifying an existing one; this would be an extensive change and would weaken the impact of the patch to the point where e.g. add-ons might compromise its security benefit, and it would break compatibility of add-ons that rely on the new return value of the method we're changing on 49, when installed on 45). Note also that while we changed an interface in this patchset, the change is only breaking for CPP consumers. JS consumers should not be affected unless they depended on the (formerly nonexistent) return value being, well, nonexistent, which seems extremely unlikely. There are no comm-central CPP consumers other than the ones from mozilla-central, which the patch fixes. Binary add-ons were deprecated well before 45. IMO, considering all of the above, rewriting the patch is not a good idea. I'm open to rev'ing the UUID, but I haven't done that in this patch - it would be a trivial change, though. Please let me know what you want.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(gijskruitbosch+bugs)</span></div><div class="change">
        <a href="/attachment.cgi?id=8756301&amp;action=edit"
           title="Patch for ESR 45"
           class=""
        >Attachment #8756301</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8756301&amp;action=edit"
           title="Patch for ESR 45"
           class=""
        >Attachment #8756301</a> -
        Flags: approval-mozilla-esr45?</div></div></div><div class="change-set" id="c50"><div class="comment" data-id="11436837" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a6569027_538805"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a6569027_538805"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-25 12:29 PDT" data-time="1464204577">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-50" data-comment-id="11436837">Toni, could you also verify that the fix on Nightly works against your testcase?</pre><div class="activity"><div class="change">Flags: needinfo?(toni.huttunen)</div></div></div><div class="change-set" id="a6718903_1689"><div class="change" id="aa6718903_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a6718903_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a6718903_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a6718903_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a6718903_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a6718903_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-26 15:23 PDT" data-time="1464301397">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: firefox-core-security &rarr; core-security-release</div></div></div><div class="change-set" id="a7028306_159069"><div class="change" id="aa7028306_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7028306_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a7028306_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7028306_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7028306_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a7028306_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-30 05:20 PDT" data-time="1464610800">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED WORKSFORME - Crash in mozilla::places::AsyncFetchAndSetIconForPage::start"
   href="/show_bug.cgi?id=1276636">1276636</a></div></div></div><div class="change-set" id="a7140635_280903"><div class="change" id="aa7140635_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7140635_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a7140635_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7140635_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7140635_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a7140635_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-31 12:32 PDT" data-time="1464723129">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [adv-main47+]</div></div></div><div class="change-set" id="a7148768_280903"><div class="change" id="aa7148768_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7148768_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a7148768_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7148768_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7148768_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a7148768_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-05-31 14:47 PDT" data-time="1464731262">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2016-2830</div></div></div><div class="change-set" id="c51"><div class="comment" data-id="11456117" data-no="51"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a7148768_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a7148768_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-01 13:55 PDT" data-time="1464814538">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="11456117">We are going to build on ESR tonight or tomorrow morning; already a day or two later than we should have. We try to build in some time for QE to test it. I know it would be best to have this in ESR45 but am leaning against it.</pre></div><div class="change-set" id="c52"><div class="comment" data-id="11456137" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a7148768_280903"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a7148768_280903"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-01 14:02 PDT" data-time="1464814948">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="11456137">After talking with Dan a bit more we are going to hold off on this till ESR 45.3.0. But we should take it early in that cycle and do some testing.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=wontfix">wontfix</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=isnotempty">tracking-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=-">-</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=48%2B">48+</a></div></div></div><div class="change-set" id="a7295102_1689"><div class="change" id="aa7295102_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a7295102_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a7295102_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7295102_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7295102_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a7295102_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-02 07:26 PDT" data-time="1464877596">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dveditz)</span></div></div></div><div class="change-set" id="a7326696_280903"><div class="change" id="aa7326696_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a7326696_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7326696_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7326696_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a7326696_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-02 16:13 PDT" data-time="1464909190">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Duplicate of this bug: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - delayed CSRF attack from the closed page"
   href="/show_bug.cgi?id=1255267">1255267</a></div></div></div><div class="change-set" id="c54"><div class="comment" data-id="11464239" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a7326696_280903"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-05 10:48 PDT" data-time="1465148891">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="11464239">(In reply to :Gijs Kruitbosch (gone until June 6) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c50">comment #50</a>)
<span class="quote">&gt; Toni, could you also verify that the fix on Nightly works against your
&gt; testcase?</span >

I retested this bug today and it appears to be still vulnerable. At least, I don't see any difference in behaviour. Favicon requests are still spawning even 10 min after page close. I'm using Firefox Nightly 49.0a1 (2016-06-05) (&quot;Nightly is up to date&quot;). Am I testing right version?</pre><div class="activity"><div class="change">Flags: needinfo?(toni.huttunen) &rarr; needinfo?(gijskruitbosch+bugs)</div></div></div><div class="change-set" id="c55"><div class="comment" data-id="11465059" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a7326696_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-06 00:19 PDT" data-time="1465197563">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="11465059">(In reply to Toni Huttunen from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c54">comment #54</a>)
<span class="quote">&gt; (In reply to :Gijs Kruitbosch (gone until June 6) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c50">comment #50</a>)
&gt; &gt; Toni, could you also verify that the fix on Nightly works against your
&gt; &gt; testcase?
&gt; 
&gt; I retested this bug today and it appears to be still vulnerable. At least, I
&gt; don't see any difference in behaviour. Favicon requests are still spawning
&gt; even 10 min after page close.</span >

Can you elaborate on how you tested this and how I can reproduce this despite the errors I'm seeing with the python script? (<a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c12">comment #12</a>) ?

<span class="quote">&gt; I'm using Firefox Nightly 49.0a1 (2016-06-05)
&gt; (&quot;Nightly is up to date&quot;). Am I testing right version?</span >

Yes.</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs) &rarr; needinfo?(toni.huttunen)</div></div></div><div class="change-set" id="c56"><div class="comment" data-id="11473393" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_562712" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/aee4f8847a1032462c4a1eeb59ee9c0e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_562712" id="a7326696_280903"><a class="email " href="/user_profile?user_id=562712" > <span class="fna">Toni Huttunen</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-08 11:25 PDT" data-time="1465410321">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-56" data-comment-id="11473393">$ unzip delayCSRF.zip
$ nano favicon.html
    modify:
        var wait = i*5;  // var wait = i*60;
        favicon(&quot;<a rel="nofollow" href="http://YOUR_SERVER_ADDRESS:1337/wait">http://YOUR_SERVER_ADDRESS:1337/wait</a>=&quot;...
$ python redir.py

After that, open favicon.html file with your browser. You will see a lot of broken pipe errors but they are not fatal. If server closes/crashes for some reason, just relaunch it. Wait until browser has redirected from favicon.html to google.com (10s).


Follow server messages and you should see messages like:
  GET /wait=270&amp;url=<a rel="nofollow" href="https://www.google.com/search?q=CSRF-hack0.22463369489286722?i=42&amp;t=1465409287404">https://www.google.com/search?q=CSRF-hack0.22463369489286722?i=42&amp;t=1465409287404</a></pre><div class="activity"><div class="change">Flags: needinfo?(toni.huttunen) &rarr; needinfo?(gijskruitbosch+bugs)</div></div></div><div class="change-set" id="c57"><div class="comment" data-id="11475277" data-no="57"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-57" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a7326696_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-57"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-57" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c57">Comment 57</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-09 05:15 PDT" data-time="1465474506">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-57">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-57" data-comment-id="11475277">(In reply to Toni Huttunen from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c56">comment #56</a>)
<span class="quote">&gt; $ unzip delayCSRF.zip
&gt; $ nano favicon.html
&gt;     modify:
&gt;         var wait = i*5;  // var wait = i*60;
&gt;         favicon(&quot;<a rel="nofollow" href="http://YOUR_SERVER_ADDRESS:1337/wait">http://YOUR_SERVER_ADDRESS:1337/wait</a>=&quot;...
&gt; $ python redir.py
&gt; 
&gt; After that, open favicon.html file with your browser. You will see a lot of
&gt; broken pipe errors but they are not fatal. If server closes/crashes for some
&gt; reason, just relaunch it. Wait until browser has redirected from
&gt; favicon.html to google.com (10s).
&gt; 
&gt; 
&gt; Follow server messages and you should see messages like:
&gt;   GET
&gt; /wait=270&amp;url=<a rel="nofollow" href="https://www.google.com/search?q=CSRF-hack0">https://www.google.com/search?q=CSRF-hack0</a>.
&gt; 22463369489286722?i=42&amp;t=1465409287404</span >

Thank you for bearing with me. This turned out to be quite... annoying... because the server does end up quitting or hanging a lot. I found two issues with the patch:

1) the unload handler gets triggered by content windows unloading because it's checking |win| rather than |eventWin|. So the toplevel browser window in our map (browser windows -&gt; requests) gets removed, and we stop being able to cancel requests in there. I *think* this is specific to non-e10s, but I'm not sure. Even so, see (2)!

2) even with that addressed, and when I can see that we're successfully cancelling all 1000-odd requests that are triggered this way, I see some odd behaviour in the server logs. It's hard to be sure about what's happening because the python server becomes very sad about all the requests we cancel early, and quits (by itself). When I restart it, several requests still come in. Then the server hangs / produces no more logging. Ctrl-C doesn't quit the server successfully, I have to go pkill it. When I do that and re-start the server, *more requests* come in. So what I *think* is happening is that TCP connections and request data is queued, and not &quot;unqueued&quot; when we call cancel on them, and then we end up cancelling them immediately as they're being sent. That's a bit stupid, of course...

It *seems* I can wallpaper over (2) by cancelling the previous requests for a content window as soon as we queue a new one, because the requests get queued on the next turn of the event loop, and the loop in the browser code is tight, and so the next request is made before the next turn of the event loop. This is probably a good idea anyway, but I'm concerned about the behaviour there - it would still just be a wallpaper, and adding a setTimeout to the testcase (favicon.html) in how quickly we add new favicon requests would probably break that.

Digging deeper, I *think* it's because the code here:

<a rel="nofollow" href="http://searchfox.org/mozilla-central/source/toolkit/components/places/FaviconHelpers.cpp#418-444">http://searchfox.org/mozilla-central/source/toolkit/components/places/FaviconHelpers.cpp#418-444</a>

creates the channel, but doesn't store it anywhere. When we call Cancel(), the request hasn't started yet, so onStartRequest hasn't fired yet ( <a rel="nofollow" href="http://searchfox.org/mozilla-central/source/toolkit/components/places/FaviconHelpers.cpp#461-465">http://searchfox.org/mozilla-central/source/toolkit/components/places/FaviconHelpers.cpp#461-465</a> ) and that stores the request, so we don't end up canceling it until onStartRequest fires. All the queueing (which has come up in earlier comments) is internal to the HTTP/network stack, so we can't control it directly - I'm fairly sure it's just to do with the number of simultaneous requests we allow to happen to a single domain. In any case, I'm going to see if we can just store the channel we create as soon as asyncopen succeeds and if that also makes this behaviour go away (in addition to the wallpaper).

Marco, any comments on the above? Separately: new bug or do you want to keep this in here?</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs) &rarr; needinfo?(mak77)</div></div></div><div class="change-set" id="c58"><div class="comment" data-id="11475300" data-no="58"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-58" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a7326696_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-58"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-58" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c58">Comment 58</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-09 05:26 PDT" data-time="1465475189">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-58">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-58" data-comment-id="11475300">(In reply to :Gijs Kruitbosch from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c57">comment #57</a>)
<span class="quote">&gt; I'm going to see if we can just store the channel we create as soon as
&gt; asyncopen succeeds and if that also makes this behaviour go away (in
&gt; addition to the wallpaper).</span >

This does seem to work. I think we should just use a new bug for the followup fixes; repeating the same bug number would be shooting ourselves in the foot in terms of exposing what we're fixing and that it's not fixed in 47, in case we don't do a point release (not my call). I'll clone in a second.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mak77)</span></div></div></div><div class="change-set" id="c59"><div class="comment" data-id="11475302" data-no="59"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-59" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7326696_280903"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a7326696_280903"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-59"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-59" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c59">Comment 59</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-09 05:27 PDT" data-time="1465475221">6 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-59">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-59" data-comment-id="11475302">Comment on <span class=""><a href="/attachment.cgi?id=8756301" name="attach_8756301" title="Patch for ESR 45">attachment 8756301</a> <a href="/attachment.cgi?id=8756301&amp;action=edit" title="Patch for ESR 45">[details]</a> <a href="/attachment.cgi?id=8756301&amp;action=diff" title="Patch for ESR 45">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1255270&amp;attachment=8756301'>[review]</a>
Patch for ESR 45

No point putting this on ESR if it's not fixed properly.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8756301&amp;action=edit"
           title="Patch for ESR 45"
           class=""
        >Attachment #8756301</a> -
        Flags: <span class="activity-deleted">approval-mozilla-esr45?</span></div></div></div><div class="change-set" id="a7892848_159069"><div class="change" id="aa7892848_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7892848_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a7892848_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a7892848_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a7892848_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a7892848_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-09 05:29 PDT" data-time="1465475342">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed (1255270 is not fixed yet)"
   href="/show_bug.cgi?id=1279208">1279208</a></div></div></div><div class="change-set" id="c60"><div class="comment" data-id="11505231" data-no="60"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-60" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_538805" id="a7892848_159069"><img src="https://secure.gravatar.com/avatar/9bd092443d615af36b31b04e81ad7806?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_538805" id="a7892848_159069"><a class="email disabled" href="/user_profile?user_id=538805" > <span class="fna">Ritu Kothari (:ritu) (Inactive, please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-60"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-60" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c60">Comment 60</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-27 10:55 PDT" data-time="1467050122">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-60">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-60" data-comment-id="11505231">Hi Gijs, this caught my attention as a potential fix to uplift in esr45.3.0. Is a proper fix ready for uplift now? We still have ~2 weeks that can be used to uplift sec-high/sec-crits on the ESR branch. Please let me know. Thanks!</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs)</div></div></div><div class="change-set" id="c61"><div class="comment" data-id="11506120" data-no="61"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-61" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7892848_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a7892848_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-61"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-61" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c61">Comment 61</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-27 15:45 PDT" data-time="1467067543">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-61">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-61" data-comment-id="11506120">(In reply to Ritu Kothari (:ritu) from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c60">comment #60</a>)
<span class="quote">&gt; Hi Gijs, this caught my attention as a potential fix to uplift in esr45.3.0.
&gt; Is a proper fix ready for uplift now? We still have ~2 weeks that can be
&gt; used to uplift sec-high/sec-crits on the ESR branch. Please let me know.
&gt; Thanks!</span >

There's a proper fix on <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed (1255270 is not fixed yet)"
   href="/show_bug.cgi?id=1279208">bug 1279208</a> that I've rebased to esr45 already, but it really really needs QA sign-off / a check that it works before I'm going to request approval. If you can ping folks to make that happen that would be very helpful.</pre><div class="activity"><div class="change">Flags: needinfo?(gijskruitbosch+bugs) &rarr; needinfo?(rkothari)</div></div></div><div class="change-set" id="c62"><div class="comment" data-id="11506127" data-no="62"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-62" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a7892848_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a7892848_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-62"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-62" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c62">Comment 62</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-27 15:47 PDT" data-time="1467067663">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-62">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-62" data-comment-id="11506127">bugmail reading in oldest-to-newest order isn't always a good idea. Just saw QA verified in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed (1255270 is not fixed yet)"
   href="/show_bug.cgi?id=1279208">bug 1279208</a>.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(rkothari)</span></div></div></div><div class="change-set" id="a9617063_159069"><div class="change" id="aa9617063_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a9617063_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a9617063_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a9617063_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a9617063_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a9617063_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-29 04:25 PDT" data-time="1467199557">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout or close when related window is closed (1255270 is not fixed yet) on Windows due to WindowsPreviewPreTab.jsm"
   href="/show_bug.cgi?id=1283067">1283067</a></div></div></div><div class="change-set" id="c63"><div class="comment" data-id="11554666" data-no="63"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-63" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a9617063_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a9617063_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-63"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-63" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c63">Comment 63</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-18 04:31 PDT" data-time="1468841487">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-63">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-63" data-comment-id="11554666">Uplifted in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed (1255270 is not fixed yet)"
   href="/show_bug.cgi?id=1279208">bug 1279208</a>. Waiting for esr verification there.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=isnotempty">status-firefox47</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox47&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=isnotempty">status-firefox48</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox48&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=isnotempty">status-firefox49</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox49&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=isnotempty">status-firefox50</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox50&amp;o1=equals&amp;v1=verified">verified</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c64"><div class="comment" data-id="11561405" data-no="64"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-64" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a9617063_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a9617063_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-64"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-64" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c64">Comment 64</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-20 03:22 PDT" data-time="1469010175">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-64">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-64" data-comment-id="11561405">Verified in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed (1255270 is not fixed yet)"
   href="/show_bug.cgi?id=1279208">bug 1279208</a> for esr as well.</pre><div class="activity"><div class="change">Status: RESOLVED &rarr; VERIFIED</div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=verified">verified</a></div></div></div><div class="change-set" id="c65"><div class="comment" data-id="11573867" data-no="65"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-65" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a9617063_159069"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a9617063_159069"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-65"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-65" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c65">Comment 65</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-25 14:58 PDT" data-time="1469483905">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-65">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-65" data-comment-id="11573867">Toni, can you verify this as well?</pre><div class="activity"><div class="change">Flags: needinfo?(toni.huttunen)</div><div class="change">Whiteboard: [adv-main47+] &rarr; [adv-main48+][adv-esr45.3+]</div></div></div><div class="change-set" id="c66"><div class="comment" data-id="11574838" data-no="66"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-66" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a9617063_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_159069" id="a9617063_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-66"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-66" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c66">Comment 66</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-26 02:29 PDT" data-time="1469525379">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-66">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-66" data-comment-id="11574838">(In reply to Al Billings [:abillings] from <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout, or close when related window is closed"
   href="/show_bug.cgi?id=1255270#c65">comment #65</a>)
<span class="quote">&gt; Toni, can you verify this as well?</span >

Toni verified in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - Favicon request doesn't timeout or close when related window is closed (1255270 is not fixed yet) on Windows due to WindowsPreviewPreTab.jsm"
   href="/show_bug.cgi?id=1283067">bug 1283067</a> that this is fixed in nightly, and qa verified beta, aurora and esr (after rebasing hiccups on esr and beta).</pre></div><div class="change-set" id="c67"><div class="comment" data-id="11577152" data-no="67"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-67" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a9617063_159069"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a9617063_159069"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-67"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-67" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#c67">Comment 67</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-07-26 15:36 PDT" data-time="1469572587">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-67">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-67" data-comment-id="11577152">Thanks!</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(toni.huttunen)</span></div></div></div><div class="change-set" id="a13667749_159069"><div class="change" id="aa13667749_159069">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_159069" id="a13667749_159069"><img src="https://secure.gravatar.com/avatar/66445733c06687eafa2978764675104f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_159069" id="a13667749_159069"><a class="email " href="/user_profile?user_id=159069" > <span class="fna">:Gijs (he/him)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a13667749_159069"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a13667749_159069">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a13667749_159069">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-08-15 01:37 PDT" data-time="1471250243">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Error: When cancelling a request for chrome://branding/content/icon32.png because the chrome window went away"
   href="/show_bug.cgi?id=1279650">1279650</a></div></div></div><div class="change-set" id="a17007832_1689"><div class="change" id="aa17007832_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a17007832_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a17007832_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a17007832_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a17007832_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1255270#a17007832_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-09-22 17:25 PDT" data-time="1474590326">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1255270&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>