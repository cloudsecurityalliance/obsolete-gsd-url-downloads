<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    
    
      
    
    
      Issue 1437523005: Custom buttons should only handle accelerators when focused. -
    
    Code Review
  </title>
  <link rel="icon" href="/static/favicon.ico" />
  <link type="text/css" rel="stylesheet"
  href="/static/styles.css?v=408576698
" />
  <script type="text/javascript" src="/static/autocomplete/lib/jquery.js"></script>
  <script type="text/javascript"
    src="/static/script.js?v=408576698
"></script>
   <!-- head block to insert js/css for forms processing -->
   
   <!-- /head -->
</head>
<body onunload="M_unloadPage();">

<!-- Begin help window -->
<script type="text/javascript"><!--
var xsrfToken = '90effb4d35f727fe4ec2f6e1a85cc7aa';
var helpDisplayed = false;
document.onclick = M_clickCommon;
var media_url = "/static/";
var base_url = "/";
// -->
</script>
<div id="help" style="display: none;">

<div style="font-size: medium; text-align: center;">Keyboard Shortcuts</div>
<hr />
<table class="shortcuts">
  <tr valign="top">
    <td>
      <table>
        <tr>
          <td></td><th>File</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to issue</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to file after / before current file</td>
        </tr>
        <tr>
          <td><span>J</span> / <span>K</span> <b>:</b></td><td>jump to next file with a comment after / before current file</td>
        </tr>
        <tr>
          <td></td><th>Side-by-side diff</th>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>toggle intra-line diffs</td>
        </tr>
        <tr>
          <td><span>e</span> <b>:</b></td><td>expand all comments</td>
        </tr>
        <tr>
          <td><span>c</span> <b>:</b></td><td>collapse all comments</td>
        </tr>
        <tr>
          <td><span>s</span> <b>:</b></td><td>toggle showing all comments</td>
        </tr>
        <tr>
          <td><span>n</span> / <span>p</span> <b>:</b></td><td>next / previous diff chunk or comment</td>
        </tr>
        <tr>
          <td><span>N</span> / <span>P</span> <b>:</b></td><td>next / previous comment</td>
        </tr>
        <tr>
          <td><span>&lt;Up&gt;</span> / <span>&lt;Down&gt;</span> <b>:</b></td><td>next / previous line</td>
        </tr>
      </table>
    </td>
    <td>
      <table>
        <tr>
          <td></td><th>Issue</th>
        </tr>
        <tr>
          <td><span>u</span> <b>:</b></td><td>up to list of issues</td>
        </tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to patch after / before current patch</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current patch in side-by-side view</td>
        </tr>
        <tr>
          <td><span>i</span> <b>:</b></td><td>open current patch in unified diff view</td>
        </tr>
        <tr><td>&nbsp;</td></tr>
          <tr><td></td><th>Issue List</th></tr>
        <tr>
          <td><span>j</span> / <span>k</span> <b>:</b></td><td>jump to issue after / before current issue</td>
        </tr>
        <tr>
          <td><span>o</span> / <span>&lt;Enter&gt;</span> <b>:</b></td><td>open current issue</td>
        </tr>
      </table>
    </td>
  </tr>

</table>
</div>
<!-- End help window -->

<div align="right">

<div style="float:left; font-size:x-large"><img style="vertical-align:middle" src="/static/chromium-24.png" /> Chromium Code Reviews</div>




<b>chromiumcodereview-hr@appspot.gserviceaccount.com (chromiumcodereview-hr)</b>
|

<span style="color:red">Please choose your nickname with</span>
<a class="novisit" href="/settings">Settings</a>
|


<a class="novisit" target="_blank"
   href="http://code.google.com/p/rietveld/wiki/CodeReviewHelp">Help</a>

|
<a class="novisit" href="http://www.chromium.org/">Chromium Project</a>
|
<a class="novisit" href="https://chromium-review.googlesource.com/dashboard/self?polygerrit=1">Gerrit Changes</a>
|

<a class="novisit" href="https://codereview.chromium.org/_ah/logout?continue=https://accounts.google.com/Logout%3Fcontinue%3Dhttps://uc.appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://google.com/url%25253Fsa%25253DD%252526q%25253Dhttps://codereview.chromium.org/1437523005%252526ust%25253D1608726339856037%252526usg%25253DAFQjCNFMnXfzHH5HdFpg3tP6d8JejAAONg%26service%3Dah">Sign out</a>

</div>
<div class="counter">(73)</div>
<br />
<div class="mainmenu">
  
  <a href="/" class="active">Issues</a>
  <a href="/search">Search</a>

</div>
<div class="mainmenu2">
  
  
    &nbsp;&nbsp;&nbsp;
    <a href="/mine">My Issues</a>
    |
    <a href="/starred">Starred</a>
    &nbsp;&nbsp;&nbsp;
    <a href="/all?closed=0">Open</a>
    |
    <a href="/all?closed=1">Closed</a>
    |
    <a href="/all">All</a>
  

</div>

<div>

  <h2>
    <span id="issue-star-1437523005">
  
    
      <img src="/static/star-dark.gif" width="15" height="15" border="0">
    
  
</span>

    Issue <a href="/1437523005/"
               onmouseover="M_showPopUp(this, 'popup-issue');">
            1437523005</a>:
    Custom buttons should only handle accelerators when focused.  (Closed) 
  </h2>

  <table class="issue-details" border="0" width="100%">
    <tr valign="top">

      <td class="meta" width="20%">
        <div class="issue_details_sidebar">
          <div><b>Created:</b><br/>
            5 years, 1 month ago by <a href="/user/meacer" onMouseOver="M_showUserInfoPopup(this)">meacer</a>
          </div>
          <div><b>Modified:</b><br/>
            5 years, 1 month ago
          </div>
          <div><b>Reviewers:</b><br/>
            <span class='approval'><a href="/user/msw" onMouseOver="M_showUserInfoPopup(this)">msw</a></span>, <span class='approval'><a href="/user/sky" onMouseOver="M_showUserInfoPopup(this)">sky</a></span>
          </div>
          
          <div><b>CC:</b><br/>
            chromium-reviews, tfarina
          </div>
          
          
          <div><b>Base URL:</b><br/>
            
            https://chromium.googlesource.com/chromium/src.git@master
            
          </div>
          
          
          <div><b>Target Ref:</b><br/>
            refs/pending/heads/master
          </div>
          
          
          <div><b>Project:</b><br/>
            <a href="/search?project=chromium">
              chromium
            </a>
          </div>
          
          <div><b>Visibility:</b><br/>
            
                Public.
            
          </div>
          
          <div><a title="Find reviews for the same repository ID - c14d891d44f0afff64e56ed7c9702df1d807b1ee"
               href="/search?repo_guid=c14d891d44f0afff64e56ed7c9702df1d807b1ee">
            <b>More Reviews</b></a>
          </div>
          
        </div>
      </td>

      <td style="padding-left: .8em; padding-right: .8em;" width="80%">
        




  <h3><a id="issue-description-pointer"
     href="javascript:M_toggleSection('issue-description')"
     class="toggled-section opentriangle">
    Description</a></h3>
  <div id="issue-description">Custom buttons should only handle accelerators when focused.

BUG=<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=541415">541415</a>
Committed: <a href="https://crrev.com/297ae873b471a46929ea39697b121c0b411434ee">https://crrev.com/297ae873b471a46929ea39697b121c0b411434ee</a>
Cr-Commit-Position: refs/heads/master@{#360130}
  </div>




  <h3>
    <a id="ps-1-pointer"
       href="/1437523005/#ps1"
       onclick="M_toggleSectionForPS('1437523005', '1')"
       class="toggled-section ">
      Patch Set 1
      
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 4
      
    </div>
  

  <div id="ps-1"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-20001-pointer"
       href="/1437523005/#ps20001"
       onclick="M_toggleSectionForPS('1437523005', '20001')"
       class="toggled-section ">
      Patch Set 2
      : msw comments
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 4
      
    </div>
  

  <div id="ps-20001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-40001-pointer"
       href="/1437523005/#ps40001"
       onclick="M_toggleSectionForPS('1437523005', '40001')"
       class="toggled-section ">
      Patch Set 3
      : msw comments
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 3
      
    </div>
  

  <div id="ps-40001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-60001-pointer"
       href="/1437523005/#ps60001"
       onclick="M_toggleSectionForPS('1437523005', '60001')"
       class="toggled-section ">
      Patch Set 4
      : sky comments
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-60001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-80001-pointer"
       href="/1437523005/#ps80001"
       onclick="M_toggleSectionForPS('1437523005', '80001')"
       class="toggled-section ">
      Patch Set 5
      : Rebase &amp; style
      <span class="anchor">#</span>
    </a>
  </h3>

  
    <div>
      <i>Total comments:</i> 2
      
    </div>
  

  <div id="ps-80001"
  
       style="display:none">
  
  </div>
  

  <h3>
    <a id="ps-100001-pointer"
       href="/1437523005/#ps100001"
       onclick="M_toggleSectionForPS('1437523005', '100001')"
       class="toggled-section opentriangle">
      Patch Set 6
      : Add comment
      <span class="anchor">#</span>
    </a>
  </h3>

  

  <div id="ps-100001"
  
       style="">
    
<div class="issue-list">

  <div class="pagination">
    <div style="float: left;">
      <i>Created:</i> 5 years, 1 month ago
    </div>
    <div style="float: right;">
      
        Download
          <a href="/download/issue1437523005_100001.diff"
            title="Patchset in text format">[raw]</a>
          <a href="/tarball/1437523005/100001"
            title="Tarball containing the original and patched files">[tar.bz2]</a>
      
    </div>
    <div style="clear:both;"></div>
  </div>

  <table id="queues" style="clear:both;">
    <tr align="left">
      <th colspan="2"></th>
      <th>Unified diffs</th>
      <th>Side-by-side diffs</th>
      <th>Delta from patch set</th>
      <th colspan="3">Stats <font style='font-weight: normal'>(<i>+76 lines, -3 lines</i>)</font></th>
      <th>Patch</th>
    </tr>

    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1437523005/patch/100001/110002">
            ui/views/controls/button/custom_button.h
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1437523005/diff/100001/ui/views/controls/button/custom_button.h">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1437523005/diff2/1:100001/ui/views/controls/button/custom_button.h"
             title="Delta from patch set 1">1</a>
        
          <a href="/1437523005/diff2/20001:100001/ui/views/controls/button/custom_button.h"
             title="Delta from patch set 2">2</a>
        
          <a href="/1437523005/diff2/40001:100001/ui/views/controls/button/custom_button.h"
             title="Delta from patch set 3">3</a>
        
        </td>
        
          <td style="white-space: nowrap">1 chunk</td>
          <td style="white-space: nowrap">+5 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1437523005_100001_110002.diff"
             title="Download patch for ui/views/controls/button/custom_button.h">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1437523005/patch/100001/110001">
            ui/views/controls/button/custom_button.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1437523005/diff/100001/ui/views/controls/button/custom_button.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1437523005/diff2/1:100001/ui/views/controls/button/custom_button.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1437523005/diff2/20001:100001/ui/views/controls/button/custom_button.cc"
             title="Delta from patch set 2">2</a>
        
          <a href="/1437523005/diff2/40001:100001/ui/views/controls/button/custom_button.cc"
             title="Delta from patch set 3">3</a>
        
          <a href="/1437523005/diff2/60001:100001/ui/views/controls/button/custom_button.cc"
             title="Delta from patch set 4">4</a>
        
          <a href="/1437523005/diff2/80001:100001/ui/views/controls/button/custom_button.cc"
             title="Delta from patch set 5">5</a>
        
        </td>
        
          <td style="white-space: nowrap">2 chunks</td>
          <td style="white-space: nowrap">+17 lines, -0 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1437523005_100001_110001.diff"
             title="Download patch for ui/views/controls/button/custom_button.cc">
            Download
          </a>
        </td>
      </tr>
    
      <tr name="patch">
        <td class="first" width="14"><img src="/static/closedtriangle.gif"
    style="visibility: hidden;" width="12" height="9" /></td>
        <td style="white-space: nowrap">M</td>
        <td>
          <a class="noul"
             href="/1437523005/patch/100001/110003">
            ui/views/controls/button/custom_button_unittest.cc
          </a>
        </td>
        <td>
          <a class="noul"
             href="/1437523005/diff/100001/ui/views/controls/button/custom_button_unittest.cc">
            View
          </a>
        </td>
        <td style="white-space: nowrap">
        
          <a href="/1437523005/diff2/1:100001/ui/views/controls/button/custom_button_unittest.cc"
             title="Delta from patch set 1">1</a>
        
          <a href="/1437523005/diff2/20001:100001/ui/views/controls/button/custom_button_unittest.cc"
             title="Delta from patch set 2">2</a>
        
          <a href="/1437523005/diff2/40001:100001/ui/views/controls/button/custom_button_unittest.cc"
             title="Delta from patch set 3">3</a>
        
          <a href="/1437523005/diff2/60001:100001/ui/views/controls/button/custom_button_unittest.cc"
             title="Delta from patch set 4">4</a>
        
        </td>
        
          <td style="white-space: nowrap">4 chunks</td>
          <td style="white-space: nowrap">+54 lines, -3 lines</td>
        
        <td style="white-space: nowrap">
          
            0 comments
            
            
          
        </td>
        <td>
          <a href="/download/issue1437523005_100001_110003.diff"
             title="Download patch for ui/views/controls/button/custom_button_unittest.cc">
            Download
          </a>
        </td>
      </tr>
    
  </table>

  
  
</div>

  
  </div>
  
    <script language="JavaScript" type="text/javascript">
         <!--
         var lastPSId = 100001;
         // -->
       </script>
  




  <h3>
    <a id="messages-pointer"
       href="javascript:M_toggleSection('messages')"
       class="toggled-section opentriangle">
      Messages
    </a>
  </h3>

  
    <div><i>
    Total messages: 23 (4 generated)
    </i></div>
  

  <div id="messages">
    <div style="margin-bottom: .5em;">
      <a href="javascript:M_expandAllVisibleComments('cl', 23)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 23)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(23)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(23)">
        Hide Generated Messages</a>
      
    </div>

    
      <div class="message    generated"
           style="display: none"
           id="generated-msg1"
           name="0">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(0)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-0">
                          meacer@chromium.org changed reviewers: + msw@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-10 19:47:57 UTC)
                <a href="#msg1">#1</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-0"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-0"
            ><a href="mailto:meacer@chromium.org">meacer@chromium.org</a> changed reviewers:
+ <a href="mailto:msw@chromium.org">msw@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg2"
           name="1">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(1)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-1">
                          
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-10 19:47:57 UTC)
                <a href="#msg2">#2</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-1"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-1"
            ></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg3"
           name="2">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(2)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>msw</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-2">
                          https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc File ui/views/controls/button/custom_button.cc (right): https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc#newcode254 ui/views/controls/button/custom_button.cc:254: if (!HasFocus()) This isn&#39;t quite right... you want to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-10 22:48:34 UTC)
                <a href="#msg3">#3</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-2"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-2"
            ><a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
File ui/views/controls/button/custom_button.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
ui/views/controls/button/custom_button.cc:254: if (!HasFocus())
This isn&#39;t quite right... you want to check if !GetWidget()-&gt;IsActive()
The accelerator key should work even if another control is focused.
(ie. Edit Bookmark; focus the &#39;Name&#39; textfield; hit [Enter] to &quot;Save&quot;)
Maybe also bail or continue if GetWidget() is null for tests, etc.

<a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
File ui/views/controls/button/custom_button_unittest.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button_unittest.cc#newcode208" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
ui/views/controls/button/custom_button_unittest.cc:208: // Shouldn&#39;t handle
accelerators when not focused.
Update the test for the behavior I explained in my other comment.
It should be an interactive_ui_test, since it depends on activation.
(or maybe use a TestWidget subclass with an |active| flag/accessors)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg4"
           name="3">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(3)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-3">
                          https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc File ui/views/controls/button/custom_button.cc (right): https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc#newcode254 ui/views/controls/button/custom_button.cc:254: if (!HasFocus()) On 2015/11/10 22:48:34, msw wrote: &gt; This ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-11 00:33:00 UTC)
                <a href="#msg4">#4</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-3"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-3"
            ><a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
File ui/views/controls/button/custom_button.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
ui/views/controls/button/custom_button.cc:254: if (!HasFocus())
On 2015/11/10 22:48:34, msw wrote:
&gt; This isn&#39;t quite right... you want to check if !GetWidget()-&gt;IsActive()
&gt; The accelerator key should work even if another control is focused.
&gt; (ie. Edit Bookmark; focus the &#39;Name&#39; textfield; hit [Enter] to &quot;Save&quot;)
&gt; Maybe also bail or continue if GetWidget() is null for tests, etc.

Done.

<a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
File ui/views/controls/button/custom_button_unittest.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/custom_button_unittest.cc#newcode208" rel="nofollow">https://codereview.chromium.org/1437523005/diff/1/ui/views/controls/button/cu...</a>
ui/views/controls/button/custom_button_unittest.cc:208: // Shouldn&#39;t handle
accelerators when not focused.
On 2015/11/10 22:48:34, msw wrote:
&gt; Update the test for the behavior I explained in my other comment.
&gt; It should be an interactive_ui_test, since it depends on activation.
&gt; (or maybe use a TestWidget subclass with an |active| flag/accessors)

Added TestWidget class here.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg5"
           name="4">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(4)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>msw</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-4">
                          lgtm with a nit https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc File ui/views/controls/button/custom_button_unittest.cc (right): https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc#newcode102 ui/views/controls/button/custom_button_unittest.cc:102: scoped_ptr&lt;TestWidget&gt; widget_; Hmm, I worry ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-11 00:55:43 UTC)
                <a href="#msg5">#5</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-4"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-4"
            >lgtm with a nit

<a href="https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button_unittest.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc#newcode102" rel="nofollow">https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button_unittest.cc:102: scoped_ptr&lt;TestWidget&gt;
widget_;
Hmm, I worry slightly about making this a TestWidget, in case any other button
code tested here relies on the IsActive() state of its Widget, which is now
clamped to |false| by default. But nothing in a unit test should actually rely
on widget activation state (without a helper like this), so this is fine.

<a href="https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc#newcode222" rel="nofollow">https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button_unittest.cc:222:
button()-&gt;AcceleratorPressed(ui::Accelerator(ui::VKEY_RETURN, ui::EF_NONE));
nit: EXPECT_FALSE(widget()-&gt;IsActive()) just before this.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg6"
           name="5">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(5)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-5">
                          meacer@chromium.org changed reviewers: + sky@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-11 01:00:47 UTC)
                <a href="#msg6">#6</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-5"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-5"
            ><a href="mailto:meacer@chromium.org">meacer@chromium.org</a> changed reviewers:
+ <a href="mailto:sky@chromium.org">sky@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg7"
           name="6">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(6)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-6">
                          +sky as owner https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc File ui/views/controls/button/custom_button_unittest.cc (right): https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc#newcode102 ui/views/controls/button/custom_button_unittest.cc:102: scoped_ptr&lt;TestWidget&gt; widget_; On 2015/11/11 00:55:43, msw ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-11 01:00:47 UTC)
                <a href="#msg7">#7</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-6"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-6"
            >+sky as owner

<a href="https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button_unittest.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc#newcode102" rel="nofollow">https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button_unittest.cc:102: scoped_ptr&lt;TestWidget&gt;
widget_;
On 2015/11/11 00:55:43, msw wrote:
&gt; Hmm, I worry slightly about making this a TestWidget, in case any other button
&gt; code tested here relies on the IsActive() state of its Widget, which is now
&gt; clamped to |false| by default. But nothing in a unit test should actually rely
&gt; on widget activation state (without a helper like this), so this is fine.

Acknowledged.

<a href="https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/button/custom_button_unittest.cc#newcode222" rel="nofollow">https://codereview.chromium.org/1437523005/diff/20001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button_unittest.cc:222:
button()-&gt;AcceleratorPressed(ui::Accelerator(ui::VKEY_RETURN, ui::EF_NONE));
On 2015/11/11 00:55:43, msw wrote:
&gt; nit: EXPECT_FALSE(widget()-&gt;IsActive()) just before this.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg8"
           name="7">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(7)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>sky</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-7">
                          https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc File ui/views/controls/button/custom_button.cc (right): https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254 ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp; !GetWidget()-&gt;IsActive()) Actually, how is the button ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-11 18:54:01 UTC)
                <a href="#msg8">#8</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-7"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-7"
            ><a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp;
!GetWidget()-&gt;IsActive())
Actually, how is the button getting the accelerator if the widget isn&#39;t active?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg9"
           name="8">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(8)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-8">
                          https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc File ui/views/controls/button/custom_button.cc (right): https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254 ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp; !GetWidget()-&gt;IsActive()) On 2015/11/11 18:54:01, sky wrote: ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-12 00:37:32 UTC)
                <a href="#msg9">#9</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-8"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-8"
            ><a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp;
!GetWidget()-&gt;IsActive())
On 2015/11/11 18:54:01, sky wrote:
&gt; Actually, how is the button getting the accelerator if the widget isn&#39;t
active?

One of the failing tests has this scenario:
ConstrainedWindowViewTest::ClosesOnEscape tries to close the dialog, but the
widget is not active when the keypress is sent.

Not sure if this is desired behavior. Should I go around and fix the tests by
explicitly activating the widgets?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg10"
           name="9">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(9)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>msw</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-9">
                          On 2015/11/12 00:37:32, Mustafa Emre Acer wrote: &gt; https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc &gt; File ui/views/controls/button/custom_button.cc (right): &gt; &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-12 00:45:44 UTC)
                <a href="#msg10">#10</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-9"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-9"
            >On 2015/11/12 00:37:32, Mustafa Emre Acer wrote:
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; File ui/views/controls/button/custom_button.cc (right):
&gt; 
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp;
&gt; !GetWidget()-&gt;IsActive())
&gt; On 2015/11/11 18:54:01, sky wrote:
&gt; &gt; Actually, how is the button getting the accelerator if the widget isn&#39;t
&gt; active?
&gt; 
&gt; One of the failing tests has this scenario:
&gt; ConstrainedWindowViewTest::ClosesOnEscape tries to close the dialog, but the
&gt; widget is not active when the keypress is sent.
&gt; 
&gt; Not sure if this is desired behavior. Should I go around and fix the tests by
&gt; explicitly activating the widgets?

I think Scott is wondering how the underlying production code tries to have an
accelerator be handled within an inactive widget.
As for the failing test, perhaps make the default activation true, or only use
TestWidget in your specific test fixture.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg11"
           name="10">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(10)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-10">
                          On 2015/11/12 00:45:44, msw wrote: &gt; On 2015/11/12 00:37:32, Mustafa Emre Acer wrote: &gt; &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-12 21:11:40 UTC)
                <a href="#msg11">#11</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-10"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-10"
            >On 2015/11/12 00:45:44, msw wrote:
&gt; On 2015/11/12 00:37:32, Mustafa Emre Acer wrote:
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; File ui/views/controls/button/custom_button.cc (right):
&gt; &gt; 
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp;
&gt; &gt; !GetWidget()-&gt;IsActive())
&gt; &gt; On 2015/11/11 18:54:01, sky wrote:
&gt; &gt; &gt; Actually, how is the button getting the accelerator if the widget isn&#39;t
&gt; &gt; active?
&gt; &gt; 
&gt; &gt; One of the failing tests has this scenario:
&gt; &gt; ConstrainedWindowViewTest::ClosesOnEscape tries to close the dialog, but the
&gt; &gt; widget is not active when the keypress is sent.
&gt; &gt; 
&gt; &gt; Not sure if this is desired behavior. Should I go around and fix the tests
by
&gt; &gt; explicitly activating the widgets?
&gt; 
&gt; I think Scott is wondering how the underlying production code tries to have an
&gt; accelerator be handled within an inactive widget.
&gt; As for the failing test, perhaps make the default activation true, or only use
&gt; TestWidget in your specific test fixture.

Thanks for pointing this out. Looks like this fix isn&#39;t correct because the
newly created login window isn&#39;t set as active in the first place. That means
this fix breaks handling of all accelerators (e.g. ESC doesn&#39;t close the dialog
anymore), since IsActive() for the dialog is always false.

Not being very familiar with the UI code, I don&#39;t know if we expect the newly
created window to be activated too. I dug into focusing and activating code a
bit, and it looks like only top level windows can be activated, which the newly
created modal login dialog is not. Should it be activated?

As for accelerator handling, CustomButton defers CanHandleAccelerators to View
which doesn&#39;t check for activity status. That seems to be low level code which I
assume works correctly, or should it check for the widget being active?</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg12"
           name="11">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(11)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>msw</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-11">
                          On 2015/11/12 21:11:40, Mustafa Emre Acer wrote: &gt; On 2015/11/12 00:45:44, msw wrote: &gt; &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-12 21:20:09 UTC)
                <a href="#msg12">#12</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-11"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-11"
            >On 2015/11/12 21:11:40, Mustafa Emre Acer wrote:
&gt; On 2015/11/12 00:45:44, msw wrote:
&gt; &gt; On 2015/11/12 00:37:32, Mustafa Emre Acer wrote:
&gt; &gt; &gt;
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; &gt; File ui/views/controls/button/custom_button.cc (right):
&gt; &gt; &gt; 
&gt; &gt; &gt;
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; &gt; ui/views/controls/button/custom_button.cc:254: if (GetWidget() &amp;&amp;
&gt; &gt; &gt; !GetWidget()-&gt;IsActive())
&gt; &gt; &gt; On 2015/11/11 18:54:01, sky wrote:
&gt; &gt; &gt; &gt; Actually, how is the button getting the accelerator if the widget isn&#39;t
&gt; &gt; &gt; active?
&gt; &gt; &gt; 
&gt; &gt; &gt; One of the failing tests has this scenario:
&gt; &gt; &gt; ConstrainedWindowViewTest::ClosesOnEscape tries to close the dialog, but
the
&gt; &gt; &gt; widget is not active when the keypress is sent.
&gt; &gt; &gt; 
&gt; &gt; &gt; Not sure if this is desired behavior. Should I go around and fix the tests
&gt; by
&gt; &gt; &gt; explicitly activating the widgets?
&gt; &gt; 
&gt; &gt; I think Scott is wondering how the underlying production code tries to have
an
&gt; &gt; accelerator be handled within an inactive widget.
&gt; &gt; As for the failing test, perhaps make the default activation true, or only
use
&gt; &gt; TestWidget in your specific test fixture.
&gt; 
&gt; Thanks for pointing this out. Looks like this fix isn&#39;t correct because the
&gt; newly created login window isn&#39;t set as active in the first place. That means
&gt; this fix breaks handling of all accelerators (e.g. ESC doesn&#39;t close the
dialog
&gt; anymore), since IsActive() for the dialog is always false.
&gt; 
&gt; Not being very familiar with the UI code, I don&#39;t know if we expect the newly
&gt; created window to be activated too. I dug into focusing and activating code a
&gt; bit, and it looks like only top level windows can be activated, which the
newly
&gt; created modal login dialog is not. Should it be activated?
&gt; 
&gt; As for accelerator handling, CustomButton defers CanHandleAccelerators to View
&gt; which doesn&#39;t check for activity status. That seems to be low level code which
I
&gt; assume works correctly, or should it check for the widget being active?

Scott may have a better suggestion and would know if there&#39;s something more
fundamentally wrong with the state of affairs. My naive suggestion is to test if
focus is on a descendant of the button&#39;s widget, but that seems like a hacky
workaround. It&#39;d be nice to also test if the top-level window of the button (ie.
the dialog&#39;s parent?) is active, but I&#39;m not sure that&#39;s entirely feasible...
I&#39;ll ask Scott to weigh in.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg13"
           name="12">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(12)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>sky</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-12">
                          I was thinking we should block this at the accelerator dispatching level. By which I ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-12 23:42:57 UTC)
                <a href="#msg13">#13</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-12"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-12"
            >I was thinking we should block this at the accelerator dispatching level. By
which I don&#39;t call accelerators on inactive widgets. But that could likely break
things. So, LGTM

<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button_unittest.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button_unittest.cc:56: bool IsActive() const
override { return active_; }
nit: generally we prefix overrides with what class they are overriding. See
custom_button.h for an example of what I mean.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg14"
           name="13">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(13)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-13">
                          On 2015/11/12 23:42:57, sky wrote: &gt; I was thinking we should block this at the ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-12 23:51:47 UTC)
                <a href="#msg14">#14</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-13"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-13"
            >On 2015/11/12 23:42:57, sky wrote:
&gt; I was thinking we should block this at the accelerator dispatching level. By
&gt; which I don&#39;t call accelerators on inactive widgets. But that could likely
break
&gt; things. So, LGTM
&gt; 
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; File ui/views/controls/button/custom_button_unittest.cc (right):
&gt; 
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; ui/views/controls/button/custom_button_unittest.cc:56: bool IsActive() const
&gt; override { return active_; }
&gt; nit: generally we prefix overrides with what class they are overriding. See
&gt; custom_button.h for an example of what I mean.

Sorry, maybe I wasn&#39;t clear: the CL isn&#39;t correct because it disables all
accelerators on the login dialog and other modal dialogs. This is because the
login dialog isn&#39;t marked as inactive even when it&#39;s displayed and in focus, so
esc, enter keys etc. don&#39;t work at all.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg15"
           name="14">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(14)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>sky</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-14">
                          On 2015/11/12 23:51:47, Mustafa Emre Acer wrote: &gt; On 2015/11/12 23:42:57, sky wrote: &gt; &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-13 01:07:45 UTC)
                <a href="#msg15">#15</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-14"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-14"
            >On 2015/11/12 23:51:47, Mustafa Emre Acer wrote:
&gt; On 2015/11/12 23:42:57, sky wrote:
&gt; &gt; I was thinking we should block this at the accelerator dispatching level. By
&gt; &gt; which I don&#39;t call accelerators on inactive widgets. But that could likely
&gt; break
&gt; &gt; things. So, LGTM
&gt; &gt; 
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; File ui/views/controls/button/custom_button_unittest.cc (right):
&gt; &gt; 
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; ui/views/controls/button/custom_button_unittest.cc:56: bool IsActive() const
&gt; &gt; override { return active_; }
&gt; &gt; nit: generally we prefix overrides with what class they are overriding. See
&gt; &gt; custom_button.h for an example of what I mean.
&gt; 
&gt; Sorry, maybe I wasn&#39;t clear: the CL isn&#39;t correct because it disables all
&gt; accelerators on the login dialog and other modal dialogs. This is because the
&gt; login dialog isn&#39;t marked as inactive even when it&#39;s displayed and in focus,
so
&gt; esc, enter keys etc. don&#39;t work at all.

Ugh! That&#39;s because it&#39;s a child widget, which are never &#39;active&#39;. I think
you&#39;ll need to check the top level widget too, eg:

I think you want something like

if ((InChildWidget() &amp;&amp; !FocusInChildWidget()) || (!InChildWidget() &amp;&amp;
!GetWidget()-&gt;IsActive())
  return;

InChildWidget is GetWidget() &amp;&amp; GetWidget()-&gt;GetTopLevelWidget() != GetWidget()
for FocusInChildWidget you have to go to focusmanager and see if the focused
view is contained in the rootview of the widget.

Or make active status work correctly. The problem is from the systems
perspective the top level widget is the active one, and making that inactive
likely has problems.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg16"
           name="15">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(15)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-15">
                          On 2015/11/13 01:07:45, sky wrote: &gt; On 2015/11/12 23:51:47, Mustafa Emre Acer wrote: &gt; &gt; ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-16 21:07:36 UTC)
                <a href="#msg16">#16</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-15"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-15"
            >On 2015/11/13 01:07:45, sky wrote:
&gt; On 2015/11/12 23:51:47, Mustafa Emre Acer wrote:
&gt; &gt; On 2015/11/12 23:42:57, sky wrote:
&gt; &gt; &gt; I was thinking we should block this at the accelerator dispatching level.
By
&gt; &gt; &gt; which I don&#39;t call accelerators on inactive widgets. But that could likely
&gt; &gt; break
&gt; &gt; &gt; things. So, LGTM
&gt; &gt; &gt; 
&gt; &gt; &gt;
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; &gt; File ui/views/controls/button/custom_button_unittest.cc (right):
&gt; &gt; &gt; 
&gt; &gt; &gt;
&gt; &gt;
&gt;
<a href="https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/button/custom_button_unittest.cc#newcode56" rel="nofollow">https://codereview.chromium.org/1437523005/diff/40001/ui/views/controls/butto...</a>
&gt; &gt; &gt; ui/views/controls/button/custom_button_unittest.cc:56: bool IsActive()
const
&gt; &gt; &gt; override { return active_; }
&gt; &gt; &gt; nit: generally we prefix overrides with what class they are overriding.
See
&gt; &gt; &gt; custom_button.h for an example of what I mean.
&gt; &gt; 
&gt; &gt; Sorry, maybe I wasn&#39;t clear: the CL isn&#39;t correct because it disables all
&gt; &gt; accelerators on the login dialog and other modal dialogs. This is because
the
&gt; &gt; login dialog isn&#39;t marked as inactive even when it&#39;s displayed and in focus,
&gt; so
&gt; &gt; esc, enter keys etc. don&#39;t work at all.
&gt; 
&gt; Ugh! That&#39;s because it&#39;s a child widget, which are never &#39;active&#39;. I think
&gt; you&#39;ll need to check the top level widget too, eg:
&gt; 
&gt; I think you want something like
&gt; 
&gt; if ((InChildWidget() &amp;&amp; !FocusInChildWidget()) || (!InChildWidget() &amp;&amp;
&gt; !GetWidget()-&gt;IsActive())
&gt;   return;
&gt; 
&gt; InChildWidget is GetWidget() &amp;&amp; GetWidget()-&gt;GetTopLevelWidget() !=
GetWidget()
&gt; for FocusInChildWidget you have to go to focusmanager and see if the focused
&gt; view is contained in the rootview of the widget.

I went with this approach. Can you please take another look?

&gt; 
&gt; Or make active status work correctly. The problem is from the systems
&gt; perspective the top level widget is the active one, and making that inactive
&gt; likely has problems.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message  approval  "
           
           id="msg17"
           name="16">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(16)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>sky</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-16">
                          LGTM https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc File ui/views/controls/button/custom_button.cc (right): https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc#newcode254 ui/views/controls/button/custom_button.cc:254: if ((IsChildWidget() &amp;&amp; !FocusInChildWidget()) || This is subtle ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 14:22:39 UTC)
                <a href="#msg17">#17</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-16"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-16"
            >LGTM

<a href="https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button.cc:254: if ((IsChildWidget() &amp;&amp;
!FocusInChildWidget()) ||
This is subtle enough that it is worth a comment.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg18"
           name="17">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(17)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-17">
                          Thanks. https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc File ui/views/controls/button/custom_button.cc (right): https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc#newcode254 ui/views/controls/button/custom_button.cc:254: if ((IsChildWidget() &amp;&amp; !FocusInChildWidget()) || On 2015/11/17 14:22:39, ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 18:56:26 UTC)
                <a href="#msg18">#18</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-17"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-17"
            >Thanks.

<a href="https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc" rel="nofollow">https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/butto...</a>
File ui/views/controls/button/custom_button.cc (right):

<a href="https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/button/custom_button.cc#newcode254" rel="nofollow">https://codereview.chromium.org/1437523005/diff/80001/ui/views/controls/butto...</a>
ui/views/controls/button/custom_button.cc:254: if ((IsChildWidget() &amp;&amp;
!FocusInChildWidget()) ||
On 2015/11/17 14:22:39, sky wrote:
&gt; This is subtle enough that it is worth a comment.

Done.</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg19"
           name="18">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(18)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-18">
                          The CQ bit was checked by meacer@chromium.org
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 18:56:29 UTC)
                <a href="#msg19">#19</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-18"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-18"
            >The CQ bit was checked by <a href="mailto:meacer@chromium.org">meacer@chromium.org</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    generated"
           style="display: none"
           id="generated-msg20"
           name="19">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(19)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>meacer</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-19">
                          The patchset sent to the CQ was uploaded after l-g-t-m from msw@chromium.org, sky@chromium.org Link to ...
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 18:56:30 UTC)
                <a href="#msg20">#20</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-19"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-19"
            >The patchset sent to the CQ was uploaded after l-g-t-m from <a href="mailto:msw@chromium.org">msw@chromium.org</a>,
<a href="mailto:sky@chromium.org">sky@chromium.org</a>
Link to the patchset: <a href="https://codereview.chromium.org/1437523005/#ps100001" rel="nofollow">https://codereview.chromium.org/1437523005/#ps100001</a>
(title: &quot;Add comment&quot;)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message    "
           
           id="msg21"
           name="20">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(20)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-20">
                          CQ is trying da patch. Follow status at https://chromium-cq-status.appspot.com/patch-status/1437523005/100001 View timeline at https://chromium-cq-status.appspot.com/patch-timeline/1437523005/100001
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 18:56:51 UTC)
                <a href="#msg21">#21</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-20"
             style="display: none;">
          <div class="message-body">
            
            <pre name="cl-message-20"
            >CQ is trying da patch. Follow status at
 <a href="https://chromium-cq-status.appspot.com/patch-status/1437523005/100001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-status/1437523005/100001</a>
View timeline at
 <a href="https://chromium-cq-status.appspot.com/patch-timeline/1437523005/100001" rel="nofollow">https://chromium-cq-status.appspot.com/patch-timeline/1437523005/100001</a></pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg22"
           name="21">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(21)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden;"
                           class="extra"
                           id="cl-preview-21">
                          Committed patchset #6 (id:100001)
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 19:43:33 UTC)
                <a href="#msg22">#22</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-21"
             style="display: none;">
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-21"
            >Committed patchset #6 (id:100001)</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    
      <div class="message issue_was_closed   "
           
           id="msg23"
           name="22">
        <div class="header">
          <table border="0" width="100%" cellspacing="0" cellpadding="0">
            <tr class="comment_title"
                onclick="M_switchChangelistComment(22)">
              <td style="padding-left: 5px; white-space: nowrap;">
                <b>commit-bot: I haz the power</b>
              </td>
              <td width="100%" style="overflow:hidden;">
                <table style="table-layout:fixed; white-space: nowrap;"
                       width="100%">
                  <tr>
                    <td>
                      <span style="white-space: nowrap; overflow: hidden; display: none;"
                           class="extra"
                           id="cl-preview-22">
                          Patchset 6 (id:??) landed as https://crrev.com/297ae873b471a46929ea39697b121c0b411434ee Cr-Commit-Position: refs/heads/master@{#360130}
                      </span>
                    </td>
                  </tr>
                </table>
              </td>
              <td align="right"
                  style="white-space: nowrap; padding-right: 5px; padding-left: 3px;">
                5 years, 1 month ago
		(2015-11-17 19:44:19 UTC)
                <a href="#msg23">#23</a>
              </td>
            </tr>
          </table>
        </div>

        <div id="cl-comment-22"
             >
          <div class="message-body">
            
              <span class="extra-note">
                Message was sent while issue was closed.
              </span>
            
            <pre name="cl-message-22"
            >Patchset 6 (id:??) landed as
<a href="https://crrev.com/297ae873b471a46929ea39697b121c0b411434ee" rel="nofollow">https://crrev.com/297ae873b471a46929ea39697b121c0b411434ee</a>
Cr-Commit-Position: refs/heads/master@{#360130}</pre>
          </div>
          <div class="message-footer"></div>
        </div>

      </div>
    

    <div>
      <a href="javascript:M_expandAllVisibleComments('cl', 23)">
        Expand Messages</a>
      |
      <a href="javascript:M_collapseAllVisibleComments('cl', 23)">
        Collapse Messages</a>
      
      |
      <a href="javascript:M_showGeneratedComments(23)">
        Show Generated Messages</a>
      |
      <a href="javascript:M_hideGeneratedComments(23)">
        Hide Generated Messages</a>
      
    </div>

  </div>

<script language="JavaScript" type="text/javascript">
<!--
var lastMsgID = 23;
// -->
</script>




<script language="JavaScript" type="text/javascript">
  <!--
    document.onkeydown = M_changelistKeyDown;
    var dashboardState = new M_DashboardState(window, 'patch', 'M_CLPatchMarker');
    var issueId = 1437523005;
    M_toggleIssueOverviewByAnchor();
  // -->
</script>



      </td>
    </tr>
  </table>

</div>

  
    <div class="popup" id="popup-issue">
      <b>Issue 1437523005: Custom buttons should only handle accelerators when focused.
     (Closed) </b><br/>
      Created 5 years, 1 month ago by meacer<br/>
      Modified 5 years, 1 month ago<br/>
      Reviewers: msw, sky<br/>
      Base URL: https://chromium.googlesource.com/chromium/src.git@master<br/>
      Comments: 13
      
    </div>
  


<p></p>
<div style="float: left;">
  <a target="_blank" href="http://code.google.com/appengine/"><img border="0"
   src="/static/appengine-noborder-120x30.gif"
   alt="Powered by Google App Engine" /></a>
</div>

<div class="extra" style="font-size: 9pt; float: right; text-align: right;">
  <div style="margin-top: .3em;">This is Rietveld <a href='http://code.google.com/p/rietveld/source/list'>408576698
</a></div>
</div>


<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55762617-11', {
    'allowLinker': true,
    'siteSpeedSampleRate': 100
  });
  ga('require', 'linker');
  ga('linker:autoLink',
     ['chromiumcodereview.appspot.com', 'codereview.chromium.org'] );
  ga('send', 'pageview');

  // CRDX Feedback button.
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

  crdx('setFeedbackButtonLink',
      'https://bugs.chromium.org/p/chromium/issues/entry?cc=andybons@chromium.org&components=Infra%3ECodereview%3ERietveld&labels=Infra-DX');
</script>


</body>
</html>
