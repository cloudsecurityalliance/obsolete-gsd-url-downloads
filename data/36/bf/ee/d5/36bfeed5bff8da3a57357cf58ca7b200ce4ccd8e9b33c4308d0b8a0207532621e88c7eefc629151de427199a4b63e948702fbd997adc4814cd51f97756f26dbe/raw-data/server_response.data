<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1334933 - (CVE-2017-5400) targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1334933">
<meta property="og:description"
      content="RESOLVED (jdemooij) in Core - JavaScript Engine: JIT. Last updated 2019-02-27.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="--">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1334933 - (CVE-2017-5400) targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1334933&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1334933">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1334933">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/yui.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/global.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/util.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"comments\":{\"cf_tracking_firefox_esr45\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox54\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox52\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox53\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"}},\"types\":[\"tracking\"],\"flags\":{\"project\":{\"cf_a11y_review_project_flag\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_fission_milestone\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_root_cause\":\"---\"},\"tracking\":{\"cf_status_firefox53\":\"fixed\",\"cf_tracking_firefox95\":\"---\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_tracking_firefox94\":\"---\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_status_firefox51\":\"wontfix\",\"cf_status_firefox93\":\"---\",\"cf_status_firefox95\":\"---\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_firefox52\":\"fixed\",\"cf_tracking_firefox53\":\"+\",\"cf_tracking_firefox93\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_status_firefox_esr45\":\"fixed\",\"cf_status_firefox54\":\"fixed\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_tracking_firefox_esr45\":\"52+\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_status_firefox_esr91\":\"---\",\"cf_status_firefox_esr52\":\"fixed\",\"cf_tracking_firefox54\":\"+\",\"cf_tracking_firefox52\":\"+\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_status_firefox94\":\"---\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1334933;
  BUGZILLA.bug_title = '1334933 - (CVE-2017-5400) targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP';
  BUGZILLA.bug_summary = 'targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1334933';
  BUGZILLA.bug_keywords = 'csectype-priv-escalation, sec-critical',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/field.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/comments.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1334933">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1334933"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1334933 - (CVE-2017-5400) targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="KfReER2PtEgUHZWYVi5LBGoMdU40Jr7TJHxUBQi5pEkYYklFgx39Hw36uMssJAMWhqIAbIvMEoCzQtWQlHOtyfXQkERJvNqYJZr0eajvZpDLdOnKDM2Ftc7GqTi3D3CHcJJ3v4lspx1rDV1rqis0eeLZ1hv9FBJEwmoTfdPIXKgLiTQLXK9nAF3Nok7xeswJ9ncQIizHjbZ18SYoxTGElIO6AQGbEIjMw95YikHXTqlkPiw5L8PXH1NvsCaA2mIw">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1334933" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635623114-fZi1qaq_EA71ocBWyNUaPN8RKAfx8KSMQKY8WcZbonQ">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1334933" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1334933" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1334933">Bug 1334933</a>
          <span class="edit-hide">(CVE-2017-5400)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2017-01-29 15:34 PST" data-time="1485732874">5 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2017-02-05 13:00 PST" data-time="1486328445">5 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">targeted ASM<wbr>.JS JIT-Spray allows bypassing ASLR and DEP</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: JavaScript Engine: JIT, defect)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">JavaScript Engine: JIT
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: JavaScript Engine: JIT</div>
            <div class="description">JavaScript engine's JIT compilers</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=JavaScript%20Engine%3A%20JIT&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=JavaScript%20Engine%3A%20JIT&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=JavaScript%20Engine%3A%20JIT"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="JavaScript Engine: JIT"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-version" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            Trunk

        </span>
    </div>

  
</div>

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            x86

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Windows

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">
          <em>Not set</em>
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;target_milestone&quot;:&quot;mozilla54&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox54&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox_esr45&quot;:&quot;52+&quot;,&quot;cf_status_firefox_esr45&quot;:&quot;fixed&quot;,&quot;status&quot;:&quot;RESOLVED&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;flags&quot;:[{&quot;name&quot;:&quot;sec-bounty&quot;,&quot;status&quot;:&quot;+&quot;}],&quot;keywords&quot;:[&quot;csectype-priv-escalation&quot;,&quot;sec-critical&quot;],&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_tracking_firefox54&quot;:&quot;+&quot;,&quot;cf_tracking_firefox52&quot;:&quot;+&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr52&quot;:&quot;fixed&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;dupe_of&quot;:null,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox53&quot;:&quot;fixed&quot;,&quot;priority&quot;:&quot;--&quot;,&quot;cf_status_firefox51&quot;:&quot;wontfix&quot;,&quot;id&quot;:1334933,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox52&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_tracking_firefox53&quot;:&quot;+&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">RESOLVED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            RESOLVED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla54

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr45</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=52%2B">52+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox51</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox52</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr52</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox53</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox53&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox54</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox54&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox54&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr45</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr45-dirty">
  <select id="cf_tracking_firefox_esr45" name="cf_tracking_firefox_esr45">
        <option value="52+"
          id="v2857_cf_tracking_firefox_esr45" selected
        >52+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr45-dirty">
  <select id="cf_status_firefox_esr45" name="cf_status_firefox_esr45">
        <option value="fixed"
          id="v2548_cf_status_firefox_esr45" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox51</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox51-dirty">
  <select id="cf_status_firefox51" name="cf_status_firefox51">
        <option value="wontfix"
          id="v2910_cf_status_firefox51" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox52</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox52-dirty">
  <select id="cf_tracking_firefox52" name="cf_tracking_firefox52">
        <option value="+"
          id="v2960_cf_tracking_firefox52" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox52-dirty">
  <select id="cf_status_firefox52" name="cf_status_firefox52">
        <option value="fixed"
          id="v2968_cf_status_firefox52" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr52</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr52-dirty">
  <select id="cf_status_firefox_esr52" name="cf_status_firefox_esr52">
        <option value="fixed"
          id="v3137_cf_status_firefox_esr52" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox53</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox53-dirty">
  <select id="cf_tracking_firefox53" name="cf_tracking_firefox53">
        <option value="+"
          id="v2998_cf_tracking_firefox53" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox53-dirty">
  <select id="cf_status_firefox53" name="cf_status_firefox53">
        <option value="fixed"
          id="v3006_cf_status_firefox53" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox54</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox54-dirty">
  <select id="cf_tracking_firefox54" name="cf_tracking_firefox54">
        <option value="+"
          id="v3038_cf_tracking_firefox54" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox54-dirty">
  <select id="cf_status_firefox54" name="cf_status_firefox54">
        <option value="fixed"
          id="v3046_cf_status_firefox54" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: Rh01, Assigned: jandem)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_375297" ><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=375297" > <span class="fna">jandem</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_585744" ><img src="https://secure.gravatar.com/avatar/92d58fb93f269f366289206017bb1e3a?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=585744" > <span class="fna">Rh01</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_607698" ><img src="https://secure.gravatar.com/avatar/629d9cacc1e7a36371e4583cc5739cf4?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=607698" > <span class="fna">sdetar</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="27">27 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
          <h3 class="module-subtitle" id="module-references-subtitle">
            (Depends on 1 open bug)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list" id="field-dependson"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_NEW"
   title="NEW - Crash at startup due to low datasize limits since bug #1334933"
   href="/show_bug.cgi?id=1347139">1347139</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 2.5 - 2.76% kraken (linux64) regression on push 380a46afcf858c4990b3f334da54246dfc2f1156 (Sat Feb 4 2017)"
   href="/show_bug.cgi?id=1337010">1337010</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Intermittent esr45 TestTArray.exe | test failed with return code 4294967295"
   href="/show_bug.cgi?id=1339122">1339122</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED INVALID - Long GC pauses in Speedometer"
   href="/show_bug.cgi?id=1339593">1339593</a>
      </div>

        </span>
    </div>

  
</div><div class="field bug-list" id="field-blocked"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
            <div class="bug-list">
        <span class="bug-type-label iconic" title="defect"
              aria-label="defect" data-type="defect">
          <span class="icon" aria-hidden="true"></span>
        </span><a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Hang at RtlpLookupDynamicFunctionEntry when stackwalking in Win64 builds"
   href="/show_bug.cgi?id=1323460">1323460</a>, <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED INVALID - Remove unneeded stackwalk lock code added in Gecko profiler hang bug 1263595"
   href="/show_bug.cgi?id=1336877">1336877</a>
      </div>

        </span>
    </div>

  
</div><div class="field" id="field-dependencytree"
>
    <div class="name">
    </div>


  
    <div class=" container">
        <span id="field-value-dependencytree">
        Dependency <a href="/showdependencytree.cgi?id=1334933&amp;hide_resolved=1">tree</a>
        / <a href="/showdependencygraph.cgi?id=1334933">graph</a>
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: csectype-priv-escalation, sec-critical, Whiteboard: [post-critsmash-triage][adv-main52+][adv-esr45.8+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2017-5400

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=csectype-priv-escalation&amp;resolution=---">csectype-priv-escalation</a>, 
          <a href="/buglist.cgi?keywords=sec-critical&amp;resolution=---">sec-critical</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[post-critsmash-triage][adv-main52+][adv-esr45.8+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#a3092264_1689"
            class="rel-time-title activity-ref"
            title="5 years ago"
        data-time="1488410882"
      >sec-bounty</a>
    </td>

    <td class="flag-value">+
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_1689" ><a class="email " href="/user_profile?user_id=1689" > <span class="fna">dveditz</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag-1538058">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-1538058-dirty">
      <select id="flag-1538058" name="flag-1538058"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
            <option value="+" selected>+</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag_type-864">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-864-dirty">
      <select id="flag_type-864" name="flag_type-864"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (7 files, 2 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8832859">Patch</a>
        </div>
        <div>
            <a href="#c11" class="attach-time activity-ref"><span class="rel-time" title="2017-02-02 06:01 PST" data-time="1486044060">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">53.98 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8832859&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8832859&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8832859">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8832935">Patch v2</a>
        </div>
        <div>
            <a href="#c14" class="attach-time activity-ref"><span class="rel-time" title="2017-02-02 08:34 PST" data-time="1486053248">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">54.21 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_347312" ><span class="fn">luke</span>
</div>:
              <a href="#c15"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486053248"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_280903" ><span class="fn">abillings</span>
</div>:
              <a href="#a425625_280903"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486062036"
            >
              sec-approval+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8832935&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8832935&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8832935">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8833250">Part 2 - Change the limit on 32-bit</a>
        </div>
        <div>
            <a href="#c26" class="attach-time activity-ref"><span class="rel-time" title="2017-02-03 01:49 PST" data-time="1486115384">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">4.23 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_347312" ><span class="fn">luke</span>
</div>:
              <a href="#c27"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486115384"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8833250&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8833250&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833250">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8833679">Part 3 - Randomize on non-Windows too</a>
        </div>
        <div>
            <a href="#c30" class="attach-time activity-ref"><span class="rel-time" title="2017-02-04 07:41 PST" data-time="1486222898">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.64 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_347312" ><span class="fn">luke</span>
</div>:
              <a href="#a493210_347312"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486222898"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8833679&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8833679&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833679">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8833871">Part 4 - Fix randomization on Linux 32-bit</a>
        </div>
        <div>
            <a href="#c34" class="attach-time activity-ref"><span class="rel-time" title="2017-02-05 23:16 PST" data-time="1486365379">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.62 KB,
          patch        </div>
      </td>
      <td>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8833871&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8833871&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833871">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8833872">Part 4 - Fix randomization on Linux 32-bit</a>
        </div>
        <div>
            <a href="#c35" class="attach-time activity-ref"><span class="rel-time" title="2017-02-05 23:21 PST" data-time="1486365719">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">1.62 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_347312" ><span class="fn">luke</span>
</div>:
              <a href="#a669278_347312"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486365719"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8833872&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8833872&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833872">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8834879">Patch for Aurora</a>
        </div>
        <div>
            <a href="#c39" class="attach-time activity-ref"><span class="rel-time" title="2017-02-08 05:14 PST" data-time="1486559651">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">60.14 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_375297" ><span class="fn">jandem</span>
</div>:
              <a href="#c39"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486559651"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_580382" ><span class="fn">jcristau</span>
</div>:
              <a href="#c42"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486559651"
            >
              approval-mozilla-aurora+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8834879&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8834879&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8834879">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8834880">Patch for Beta</a>
        </div>
        <div>
            <a href="#c40" class="attach-time activity-ref"><span class="rel-time" title="2017-02-08 05:15 PST" data-time="1486559713">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">60.02 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_375297" ><span class="fn">jandem</span>
</div>:
              <a href="#c40"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486559713"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_580382" ><span class="fn">jcristau</span>
</div>:
              <a href="#c46"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486559713"
            >
              approval-mozilla-beta+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8834880&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8834880&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8834880">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8834890">Patch for ESR45</a>
        </div>
        <div>
            <a href="#c41" class="attach-time activity-ref"><span class="rel-time" title="2017-02-08 05:45 PST" data-time="1486561522">5 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_375297" ><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div></span>
        </div>
        <div class="attach-info">55.61 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_375297" ><span class="fn">jandem</span>
</div>:
              <a href="#c41"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486561522"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_506302" ><span class="fn">gchang</span>
</div>:
              <a href="#c49"
                  class="flag-name-status rel-time-title activity-ref"
                  title="5 years ago"
              data-time="1486561522"
            >
              approval-mozilla-esr45+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8834890&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8834890&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8834890">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="EXD2ynPkpfkUiMG7re1D3fnJV1SlDPkGgmz0qo94iysQvtBL">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="12019781" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_585744" ><img src="https://secure.gravatar.com/avatar/92d58fb93f269f366289206017bb1e3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_585744" ><a class="email " href="/user_profile?user_id=585744" > <span class="fna">Rh0</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-29 15:34 PST" data-time="1485732874">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8831573"
         class="attachment"
         data-id="8831573" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="ASM_JS_jit_spray_nop_sled_release_nightly.html">
      <meta itemprop="contentSize" content="5167">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8831573" itemprop="contentUrl">
        <span id="att-8831573-description" itemprop="description">ASM.JS JIT-Spray (Nop-Sled) against 51.0.1 and Nightly</span></a>
        — <a href="attachment.cgi?id=8831573&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-0" data-comment-id="12019781">Dear Mozilla Team,

The mitigations made against <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - lack of executable-code quota allows full bypass of ASLR and DEP"
   href="/show_bug.cgi?id=1325200">bug 1325200</a> can be circumvented, and hence, ASM.JS
JIT-Spray in combination with heap spray still allows to fully bypass ASLR and
DEP in 32-bit Firefox on Windows. An attacker can directly jump to his controlled
machine code without resorting to memory-disclosures/info-leaks and code reuse,
when exploiting a memory corruption vulnerability.

As stated in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c52">comment #52</a> of <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - lack of executable-code quota allows full bypass of ASLR and DEP"
   href="/show_bug.cgi?id=1325200">bug 1325200</a>, the attacker first occupies many memory
regions to decrease the entropy of possible 64KB aligned base addresses and then
forces the creation of max. allowed ASM.JS code regions. As shown in the PoC,
his controlled machine code lands at predictable addresses. (Can you reproduce?)

I think the best mitigations are 1) random nop insertion and 2) constant
blinding of four-byte constants:

1) Inserting different-sized nop-like instructions (such as &quot;lea esp, [esp]&quot; and
&quot;nop dword [REG32 + OFFSET]&quot;) at random locations into the stream of machine code
instructions decreases the possiblilty to hit a sprayed nop sled. Therefore, each
JIT module should have different random nops. Even if the attacker hits a nop
sled, the instruction stream may &quot;re-synchronize&quot; and his payload becomes
unusable.

2) If four-byte constants are blinded only two(/one)-byte constants can be used to
hide attacker-controlled machine instructions. However, in combination with 1) I
doubt that an attacker can do anything meaningful with
that.

Of course both mitigations may have an unacceptable performance overhead :/.
Still, I hope this helps.

If you need more information, please let me know.

Best,
    Rh0


P.S.:
If requested I can provide a PoC with more code execution (.e.g.:
WinExec(&quot;cmd&quot;)) soon.</pre></div><div class="change-set" id="a16_585744"><div class="change" id="aa16_585744">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_585744" id="a16_585744"><img src="https://secure.gravatar.com/avatar/92d58fb93f269f366289206017bb1e3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_585744" id="a16_585744"><a class="email " href="/user_profile?user_id=585744" > <span class="fna">Rh0</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a16_585744"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a16_585744">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a16_585744">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-29 15:34 PST" data-time="1485732890">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Summary: targeted ASM.JS JIT-Spray allows bypassing ASLR AND DEP &rarr; targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP</div></div></div><div class="change-set" id="a175730_1689"><div class="change" id="aa175730_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a175730_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a175730_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a175730_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a175730_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a175730_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-31 16:23 PST" data-time="1485908604">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: core-security &rarr; javascript-core-security</div></div></div><div class="change-set" id="a177188_1689"><div class="change" id="aa177188_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a177188_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a177188_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a177188_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a177188_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-31 16:47 PST" data-time="1485910062">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Status: UNCONFIRMED &rarr; NEW</div><div class="change">Ever confirmed: true</div><div class="change">Keywords: <a href="/buglist.cgi?keywords=csectype-priv-escalation&amp;resolution=---">csectype-priv-escalation</a>, 
          
            <a href="/buglist.cgi?keywords=sec-critical&amp;resolution=---">sec-critical</a></div></div></div><div class="change-set" id="c1"><div class="comment" data-id="12026632" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_1689" id="a177188_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-31 16:54 PST" data-time="1485910452">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="12026632">Jandem: now can we fix the other parts of Rh0's original bug? Would be super nice to get this fixed in 52 so we aren't easily hacked at Pwn2Own.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=isnotempty">status-firefox52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=isnotempty">status-firefox53</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox54&amp;o1=isnotempty">status-firefox54</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox54&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=isnotempty">tracking-firefox52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox52&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox53&amp;o1=isnotempty">tracking-firefox53</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox53&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox54&amp;o1=isnotempty">tracking-firefox54</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox54&amp;o1=equals&amp;v1=%2B">+</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=isnotempty">tracking-firefox-esr45</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr45&amp;o1=equals&amp;v1=52%2B">52+</a></div><div class="change">Flags: needinfo?(jdemooij)</div></div></div><div class="change-set" id="c2"><div class="comment" data-id="12026668" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_347312" id="a177188_1689"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-01-31 17:09 PST" data-time="1485911373">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="12026668">Trying to understand the technique being described here: is it the case that the malloc() performed by the 'new ArrayBuffer(0x100000)' is allocating in a predictable pattern that then allows one to fill up the heap with non-executable memory and then free up a few holes at predictable addresses (that subsequently get filled by executable allocations)?</pre></div><div class="change-set" id="c3"><div class="comment" data-id="12027044" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 00:28 PST" data-time="1485937731">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="12027044">(In reply to Daniel Veditz [:dveditz] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c1">comment #1</a>)
<span class="quote">&gt; Would be super nice to get this fixed in 52 so we aren't easily hacked at Pwn2Own.</span >

Pwn2Own will use 64-bit builds I hope? 32-bit with its tiny address space is easier to heap-spray/exploit.

I'll be working on these bugs this week, or at least find owners for them.</pre></div><div class="change-set" id="c4"><div class="comment" data-id="12027094" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 01:16 PST" data-time="1485940594">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="12027094">(In reply to Luke Wagner [:luke] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c2">comment #2</a>)
<span class="quote">&gt; Trying to understand the technique being described here: is it the case that
&gt; the malloc() performed by the 'new ArrayBuffer(0x100000)' is allocating in a
&gt; predictable pattern that then allows one to fill up the heap with
&gt; non-executable memory and then free up a few holes at predictable addresses
&gt; (that subsequently get filled by executable allocations)?</span >

It's just allocating a ton of memory so code allocations after that are not randomized properly and start to be predictable.

Regarding VirtualAlloc randomization, here are things we need to improve:

(1) Instead of trying once and then doing a non-randomized VirtualAlloc, we could try 5 times or so.

(2) Instead of using only the [64 MiB - 1GiB) range on 32-bit, we should consider using the full address space. I tried this locally and it makes most of our randomized allocations succeed on this PoC. There's a comment in ComputeRandomAllocationAddress saying:

     * x86: V8 comments say that keeping addresses in the [64MiB, 1GiB) range
     * tries to avoid system default DLL mapping space. In the end, we get 13
     * bits of randomness in our selection.

We need input from a Windows expert, but restricting ourselves to 1 GB on Win32 seems very restrictive.

(3) After that, to prevent these heap sprays, maybe we could fail code allocations on Win32 if we're using more than X % (90%?) of our address space. Not sure if there are APIs for this that are useful (we care about 64K chunks, not necessarily free pages).

dmajor, since you're familiar with Windows, thoughts on (2) and (3)?</pre><div class="activity"><div class="change">Flags: needinfo?(dmajor)</div></div></div><div class="change-set" id="c5"><div class="comment" data-id="12027098" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 01:19 PST" data-time="1485940759">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="12027098">Spinning the NOP insertion and constant blinding mitigations mentioned in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c0">comment 0</a> off to pre-existing <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED"
   href="/show_bug.cgi?id=1333005">bug 1333005</a>.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jdemooij)</span></div></div></div><div class="change-set" id="c6"><div class="comment" data-id="12027563" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a177188_1689"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 05:11 PST" data-time="1485954666">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="12027563">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c3">comment #3</a>)
<span class="quote">&gt; Pwn2Own will use 64-bit builds I hope? 32-bit with its tiny address space is
&gt; easier to heap-spray/exploit.</span >

Given that we're still not proactively shipping Win64 builds, I wouldn't fault them for testing 32-bit builds still.</pre></div><div class="change-set" id="c7"><div class="comment" data-id="12028642" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_347312" id="a177188_1689"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 10:13 PST" data-time="1485972824">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="12028642">After some discussion with jandem and dveditz, it seems like a fundamental problem is, as <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c2">comment 2</a> was asking, we're still able to put executable code at predictable addresses due to the completely predictable allocation of *non* executable memory.  So before jumping all the way to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED"
   href="/show_bug.cgi?id=1333005">bug 1333005</a>, I think our first step (which should fix this bug) should be to ensure that JIT code is never forced into a predictable address.

One strategy to ensure this is: reserve a contiguous range of MaxCodeBytesPerProcess up front (once per process, when JS engine is first initialized, at a fully random address since the address space is fresh) and then only allocate JIT code out of this range.  This would have multiple side benefits: avoiding the need to call RtlAddFunctionTable() at runtime on Windows (which currently has profiler deadlock issues), making platforms more similar, making all x64 jumps/calls &quot;near&quot;, etc.</pre></div><div class="change-set" id="c8"><div class="comment" data-id="12029309" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 13:10 PST" data-time="1485983432">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-8" data-comment-id="12029309">The plan is to have a bitvector with a bit for each page, then when we allocate X pages we look for X consecutive free bits (starting at a random location to get ASLR-like behavior), if we find some we toggle these bits and change the protection of the pages. When we free pages we just change the protection to PROT_NONE and clear the corresponding bits.</pre><div class="activity"><div class="change">Assignee: nobody &rarr; jdemooij</div><div class="change">Status: NEW &rarr; ASSIGNED</div><div class="change">Flags: <span class="activity-deleted">needinfo?(dmajor)</span></div></div></div><div class="change-set" id="c9"><div class="comment" data-id="12029434" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_477892" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_477892" id="a177188_1689"><a class="email " href="/user_profile?user_id=477892" > <span class="fna">(Away)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 13:42 PST" data-time="1485985347">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="12029434">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c4">comment #4</a>)
<span class="quote">&gt; Regarding VirtualAlloc randomization, here are things we need to improve:
&gt; 
&gt; (1) Instead of trying once and then doing a non-randomized VirtualAlloc, we
&gt; could try 5 times or so.
&gt; 
&gt; (2) Instead of using only the [64 MiB - 1GiB) range on 32-bit, we should
&gt; consider using the full address space. I tried this locally and it makes
&gt; most of our randomized allocations succeed on this PoC. There's a comment in
&gt; ComputeRandomAllocationAddress saying:
&gt; 
&gt;      * x86: V8 comments say that keeping addresses in the [64MiB, 1GiB) range
&gt;      * tries to avoid system default DLL mapping space. In the end, we get 13
&gt;      * bits of randomness in our selection.
&gt; 
&gt; We need input from a Windows expert, but restricting ourselves to 1 GB on
&gt; Win32 seems very restrictive.</span >

From a quick look at the loaded modules on a random VM, I see most libraries in the 6Cxxxxxx to 7xxxxxxx range, even across restarts. It should be fine to increase to 1.5 GiB on pure-Win32 and also include the 2-4 GiB range on WoW64. (We should do a more thorough test across multiple Windows versions and bitness if we go down this route, but that's straightforward.)

Even covering the entire address space probably wouldn't be the worst thing in the world, as long as we increase the attempts in (1).

<span class="quote">&gt; (3) After that, to prevent these heap sprays, maybe we could fail code
&gt; allocations on Win32 if we're using more than X % (90%?) of our address
&gt; space. Not sure if there are APIs for this that are useful (we care about
&gt; 64K chunks, not necessarily free pages).</span >

I looked at those APIs some time ago in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Collect about:memory reports for OOM analysis"
   href="/show_bug.cgi?id=1007534#c13">bug 1007534 comment 13</a>. You could check ullAvailVirtual from GlobalMemoryStatusEx (since it will be counting at 64K granularity anyway). Is 5-7ms too slow?</pre></div><div class="change-set" id="c10"><div class="comment" data-id="12030513" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-01 22:16 PST" data-time="1486016203">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="12030513">(In reply to David Major [:dmajor] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c9">comment #9</a>)
<span class="quote">&gt; Even covering the entire address space probably wouldn't be the worst thing
&gt; in the world, as long as we increase the attempts in (1).</span >

Yeah. If we can get away with pre-allocation, there will only be a single large VirtualAlloc at process startup, so we could just try that at 10 different random addresses or so (and the virtual address space will be mostly empty still at that point). I think for now we can keep the ComputeRandomAllocationAddress function as-is and if everything works out we could do a follow-up patch to change it to use the entire address space on 32-bit.

<span class="quote">&gt; I looked at those APIs some time ago in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Collect about:memory reports for OOM analysis"
   href="/show_bug.cgi?id=1007534#c13">bug 1007534 comment 13</a>. You could
&gt; check ullAvailVirtual from GlobalMemoryStatusEx (since it will be counting
&gt; at 64K granularity anyway). Is 5-7ms too slow?</span >

Thanks. Hopefully we don't need this, if pre-allocating works :)</pre></div><div class="change-set" id="c11"><div class="comment" data-id="12031375" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 06:01 PST" data-time="1486044060">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8832859"
         class="attachment patch obsolete"
         data-id="8832859" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch.patch">
      <meta itemprop="contentSize" content="55272">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8832859">
          <a class="link" href="attachment.cgi?id=8832859&amp;action=diff">
        <span id="att-8832859-description" itemprop="description">Patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8832859&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8832859">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-11" data-comment-id="12031375">This patch works nicely. We reserve a MaxCodeBytesPerProcess region on startup, then we commit/decommit random pages from that based on a bitset.

I added some logging on Mac and I tested this with VMMap on Win32 + Win64 and everything looks reasonable: pages are allocated randomly and we decommit them correctly.

The patch is pretty large because it moves some code around (I removed ExecutableAllocator{Win,Posix}.cpp and merged them with the new ProcessExecutableMemory.cpp file to make it easier to change this code. Sorry about that.

I also cleaned up some ExecutableAllocator code and interfaces. I removed the W^X #define as we're probably not going to turn that off anytime soon.

Overall this patch is a nice refactoring/cleanup I think, and if this sticks there will be more code to remove: the Win64 profiler lock, jump tables on x64, etc.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8832859&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8832859</a> -
        Flags: review?(luke)</div></div></div><div class="change-set" id="c12"><div class="comment" data-id="12031489" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 06:29 PST" data-time="1486045769">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="12031489">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8832859" name="attach_8832859" title="Patch">attachment 8832859</a> <a href="/attachment.cgi?id=8832859&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8832859&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832859'>[review]</a>
Patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8832859" name="attach_8832859" title="Patch">attachment 8832859</a> <a href="/attachment.cgi?id=8832859&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8832859&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832859'>[review]</a>:
-----------------------------------------------------------------

::: js/src/jit/ProcessExecutableMemory.cpp
&#64;&#64; +315,5 &#64;&#64;
<span class="quote">&gt; +    static const size_t NumWords = NumBits / BitsPerWord;
&gt; +
&gt; +    mozilla::Array&lt;WordType, NumWords&gt; words_;
&gt; +
&gt; +    WordType indexToWord(uint32_t index) const {</span >

I just noticed this one (and the places where it's used) should use uint32_t or size_t instead of WordType (it doesn't matter as it's the same type but still).</pre></div><div class="change-set" id="c13"><div class="comment" data-id="12031708" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_347312" id="a177188_1689"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 07:30 PST" data-time="1486049434">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="12031708">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8832859" name="attach_8832859" title="Patch">attachment 8832859</a> <a href="/attachment.cgi?id=8832859&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8832859&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832859'>[review]</a>
Patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8832859" name="attach_8832859" title="Patch">attachment 8832859</a> <a href="/attachment.cgi?id=8832859&amp;action=edit" title="Patch">[details]</a> <a href="/attachment.cgi?id=8832859&amp;action=diff" title="Patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832859'>[review]</a>:
-----------------------------------------------------------------

Looks really good, one question:

::: js/src/jit/ProcessExecutableMemory.cpp
&#64;&#64; +244,5 &#64;&#64;
<span class="quote">&gt; +static void
&gt; +CommitPages(void* addr, size_t bytes, ProtectionSetting protection)
&gt; +{
&gt; +    if (!VirtualAlloc(addr, bytes, MEM_COMMIT, ProtectionSettingToFlags(protection)))
&gt; +        MOZ_CRASH();</span >

nit: might be good to include an informative string here and in DecommitPages for crash reporting

&#64;&#64; +410,5 &#64;&#64;
<span class="quote">&gt; +    MOZ_MUST_USE bool init() {
&gt; +        pages_.init();
&gt; +
&gt; +        MOZ_RELEASE_ASSERT(!initialized());
&gt; +        MOZ_RELEASE_ASSERT(PageSize == gc::SystemPageSize());</span >

I'm pretty sure there are some second-tier platforms for which this will fail.  I also think it's possible to configure a Windows system to use larger pages so surely there are a handful of users that do this.  Probably we should use gc::SystemPageSize().

&#64;&#64; +476,5 &#64;&#64;
<span class="quote">&gt; +        // Start at a random location, for less predictable addresses. It also
&gt; +        // makes it more likely we will land on a free page.
&gt; +        size_t page = seed % MaxCodePages;
&gt; +
&gt; +        // ExecutableAllocator usually allocates 64K chunks. Make sure such</span >

Is there a way we could have a symbolic constant in ProcessExecutableAllocator that links this code here and the uses in ExecutableAllocator?  And if our effective quanta is 64K, then maybe maybe we can use *that* as our PageSize and MOZ_RELEASE_ASSERT(gc::SystemPageSize() &lt;= PageSize) (allowing us to keep a static constant MaxCodePages).</pre></div><div class="change-set" id="c14"><div class="comment" data-id="12031990" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 08:34 PST" data-time="1486053248">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8832935"
         class="attachment patch"
         data-id="8832935" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch.patch">
      <meta itemprop="contentSize" content="55509">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8832935">
          <a class="link" href="attachment.cgi?id=8832935&amp;action=diff">
        <span id="att-8832935-description" itemprop="description">Patch v2</span></a>
        — <a href="attachment.cgi?id=8832935&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8832935">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-14" data-comment-id="12031990">Good points. I updated the patch to use ExecutableCodePageSize (= 64K) chunk sizes and I changed ExecutableAllocator to use that value as well.

I didn't do this initially because of asm.js/wasm allocations that can be much smaller than 64K, but the plan is to move them to ExecutableAllocator soon so this will no longer be an issue then.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8832859&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8832859</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8832859&amp;action=edit"
           title="Patch"
           class=""
        >Attachment #8832859</a> -
        Flags: <span class="activity-deleted">review?(luke)</span></div><div class="change">
        <a href="/attachment.cgi?id=8832935&amp;action=edit"
           title="Patch v2"
           class=""
        >Attachment #8832935</a> -
        Flags: review?(luke)</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="12032399" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_347312" id="a177188_1689"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 10:33 PST" data-time="1486060420">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="12032399">Comment on <span class=""><a href="/attachment.cgi?id=8832935" name="attach_8832935" title="Patch v2">attachment 8832935</a> <a href="/attachment.cgi?id=8832935&amp;action=edit" title="Patch v2">[details]</a> <a href="/attachment.cgi?id=8832935&amp;action=diff" title="Patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832935'>[review]</a>
Patch v2

Review of <span class=""><a href="/attachment.cgi?id=8832935" name="attach_8832935" title="Patch v2">attachment 8832935</a> <a href="/attachment.cgi?id=8832935&amp;action=edit" title="Patch v2">[details]</a> <a href="/attachment.cgi?id=8832935&amp;action=diff" title="Patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832935'>[review]</a>:
-----------------------------------------------------------------

Very nice!</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8832935&amp;action=edit"
           title="Patch v2"
           class=""
        >Attachment #8832935</a> -
        Flags: review?(luke) &rarr; review+</div></div></div><div class="change-set" id="c16"><div class="comment" data-id="12032530" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 11:00 PST" data-time="1486062036">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-16" data-comment-id="12032530">Comment on <span class=""><a href="/attachment.cgi?id=8832935" name="attach_8832935" title="Patch v2">attachment 8832935</a> <a href="/attachment.cgi?id=8832935&amp;action=edit" title="Patch v2">[details]</a> <a href="/attachment.cgi?id=8832935&amp;action=diff" title="Patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8832935'>[review]</a>
Patch v2

[Security approval request comment]
<span class="quote">&gt; How easily could an exploit be constructed based on the patch?</span >
Not easily.

<span class="quote">&gt; Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?</span >
No.

<span class="quote">&gt; Which older supported branches are affected by this flaw?</span >
All.

<span class="quote">&gt; Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?</span >
Should apply or not that hard to backport.

<span class="quote">&gt; How likely is this patch to cause regressions; how much testing does it need?</span >
It adds a new custom allocator for JIT pages, so there's definitely some risk. If it's stable on Nightly (with regular JS fuzzing) for a few days I don't expect serious problems though.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8832935&amp;action=edit"
           title="Patch v2"
           class=""
        >Attachment #8832935</a> -
        Flags: sec-approval?</div></div></div><div class="change-set" id="c17"><div class="comment" data-id="12032802" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_477892" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_477892" id="a177188_1689"><a class="email " href="/user_profile?user_id=477892" > <span class="fna">(Away)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 12:27 PST" data-time="1486067248">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="12032802">Please advise the Uptime folks about the address space usage here, if you haven't already.</pre></div><div class="change-set" id="c18"><div class="comment" data-id="12032956" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 13:11 PST" data-time="1486069893">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="12032956">erahm, njn: we will reserve (per process) a region of memory that's 144 MB on 32-bit platforms (we could shrink this a bit if really needed) and 640 MB on 64-bit platforms. JIT code allocations will then use *only* pages in that part of the address space. 

This fixes the security issue here where a heap spray is used to trick Windows into using predictable addresses for JIT code. It could prevent certain UAF bugs as well (because this memory is never available for anything else). It will also have a number of other benefits: it should avoid the profiler deadlocks on Win64 because we only call RtlAddFunctionTable at startup, we will be able to use near jumps on x64, and it makes us behave more consistently across platforms.</pre></div><div class="change-set" id="c19"><div class="comment" data-id="12033682" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_334849" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_334849" id="a177188_1689"><a class="email " href="/user_profile?user_id=334849" > <span class="fna">Nicholas Nethercote [inactive]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 17:56 PST" data-time="1486086968">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="12033682">640 MB on 64-bit is fine, address space is plentiful there.

144 MB on 32-bit is less fine. Many users only have 2 GiB of address space, that's 7% of it, and virtual OOMs are common. Please reduce the size if you can.</pre></div><div class="change-set" id="c20"><div class="comment" data-id="12033707" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_477892" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_477892" id="a177188_1689"><a class="email " href="/user_profile?user_id=477892" > <span class="fna">(Away)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 18:17 PST" data-time="1486088273">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="12033707">Do we have a sense of how much total JIT code 32-bit users have when they OOM? If they frequently approach 144MB anyway, then this isn't really worse, just moving the allocation up-front. But if the actual number is lower, then yeah, that 144MB reservation could be taking away from other things.</pre></div><div class="change-set" id="c21"><div class="comment" data-id="12033947" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_347312" id="a177188_1689"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 21:14 PST" data-time="1486098849">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="12033947">njn: while virtual OOMs are certainly a problem on 32-bit, I had assumed that the problem here was fragmentation which shrinking the space by 7% with 1 big allocation wouldn't really hurt.  Is that the case or do we also see virtual OOMs where the entire 2gb is allocated?

Anyhow, I expect we could reduce it somewhat, though, without hurting.</pre></div><div class="change-set" id="c22"><div class="comment" data-id="12033974" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_334849" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_334849" id="a177188_1689"><a class="email " href="/user_profile?user_id=334849" > <span class="fna">Nicholas Nethercote [inactive]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-02 21:29 PST" data-time="1486099747">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="12033974">(In reply to Luke Wagner [:luke] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c21">comment #21</a>)
<span class="quote">&gt; njn: while virtual OOMs are certainly a problem on 32-bit, I had assumed
&gt; that the problem here was fragmentation which shrinking the space by 7% with
&gt; 1 big allocation wouldn't really hurt.  Is that the case or do we also see
&gt; virtual OOMs where the entire 2gb is allocated?</span >

A single big 144 MiB allocation is certainly better than a lot of smaller ones that add up to 144 MiB. But. Typically, virtual OOMs start becoming a risk once the amount of total virtual memory available drops to 200 MiB or so. Any reduction just leaves less headroom.</pre></div><div class="change-set" id="c23"><div class="comment" data-id="12034259" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 00:44 PST" data-time="1486111475">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="12034259">(In reply to Nicholas Nethercote [:njn] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c19">comment #19</a>)
<span class="quote">&gt; 144 MB on 32-bit is less fine. Many users only have 2 GiB of address space,
&gt; that's 7% of it, and virtual OOMs are common.</span >

Do we know how many of our users are still using Firefox 32-bit *on 32-bit Windows*, especially after we drop XP/Vista support? I know this will have to be backported to releases that support XP..

<span class="quote">&gt; Please reduce the size if you can.</span >

We can try to reduce it from 144 to 128 MB or so, maybe more if we notice a spike in OOM crashes. Unfortunately capping our JIT code memory also has risks, it behaves similar to an OOM. We did get topcrashes on beta a few weeks ago from users hitting this. We now stop JIT compilation if we approach Limit - 16MB, that helped so I feel better about reducing this number, but it's still not great.

e10s-multi will also help a lot, unfortunately that will arrive just a few releases too late for most users :/</pre></div><div class="change-set" id="c24"><div class="comment" data-id="12034318" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_428608" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/1f41f3ef916e1c1fc9401cf3212a6708?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_428608" id="a177188_1689"><a class="email " href="/user_profile?user_id=428608" > <span class="fna">Frederik Braun [:freddy] - vacation (back Nov 1st)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 01:06 PST" data-time="1486112788">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="12034318">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c23">comment #23</a>)
<span class="quote">&gt; (In reply to Nicholas Nethercote [:njn] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c19">comment #19</a>)
&gt; &gt; 144 MB on 32-bit is less fine. Many users only have 2 GiB of address space,
&gt; &gt; that's 7% of it, and virtual OOMs are common.
&gt; 
&gt; Do we know how many of our users are still using Firefox 32-bit *on 32-bit
&gt; Windows*, especially after we drop XP/Vista support? I know this will have
&gt; to be backported to releases that support XP..
&gt; </span >

Yes, we do! The Firefox Hardware Report September has statistics on the Firefox and the OS architecture.
See <a rel="nofollow" href="https://metrics.mozilla.com/firefox-hardware-report/#goto-os-and-architecture">https://metrics.mozilla.com/firefox-hardware-report/#goto-os-and-architecture</a>

In terms of release timing (e.g., in connection with e10s-multi) we need to remember pwn2own:

(In reply to Daniel Veditz [:dveditz] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c1">comment #1</a>)
<span class="quote">&gt; Jandem: now can we fix the other parts of Rh0's original bug? Would be super
&gt; nice to get this fixed in 52 so we aren't easily hacked at Pwn2Own.</span ></pre></div><div class="change-set" id="c25"><div class="comment" data-id="12034333" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 01:16 PST" data-time="1486113373">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="12034333">(In reply to Frederik Braun [:freddyb] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c24">comment #24</a>)
<span class="quote">&gt; Yes, we do! The Firefox Hardware Report September has statistics on the
&gt; Firefox and the OS architecture.
&gt; See
&gt; <a rel="nofollow" href="https://metrics.mozilla.com/firefox-hardware-report/#goto-os-and-architecture">https://metrics.mozilla.com/firefox-hardware-report/#goto-os-and-architecture</a></span >

According to the &quot;OS by architecture&quot; graph there, 32-bit declined from 34.20% to 32.27% between April and September last year. Let's say ~30% now. That's still quite a lot of users unfortunately (about half of them is likely XP/Vista, but still).

<span class="quote">&gt; In terms of release timing (e.g., in connection with e10s-multi) we need to
&gt; remember pwn2own:</span >

Yeah, though pwn2own will use 64-bit Firefox so the bug reported here is not an issue there (or at least way more difficult/time-consuming). We should still get this in Firefox 52 though.</pre></div><div class="change-set" id="c26"><div class="comment" data-id="12034380" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a177188_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 01:49 PST" data-time="1486115384">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8833250"
         class="attachment patch"
         data-id="8833250" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch.patch">
      <meta itemprop="contentSize" content="4335">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8833250">
          <a class="link" href="attachment.cgi?id=8833250&amp;action=diff">
        <span id="att-8833250-description" itemprop="description">Part 2 - Change the limit on 32-bit</span></a>
        — <a href="attachment.cgi?id=8833250&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833250">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-26" data-comment-id="12034380">This patch reduces the limit from 144 to 128 MiB on 32-bit.

The patch also tweaks the preserve-code mechanism a bit to discard code more eagerly if we are approaching this limit.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833250&amp;action=edit"
           title="Part 2 - Change the limit on 32-bit"
           class=""
        >Attachment #8833250</a> -
        Flags: review?(luke)</div></div></div><div class="change-set" id="c27"><div class="comment" data-id="12035245" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a177188_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_347312" id="a177188_1689"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 07:54 PST" data-time="1486137274">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="12035245">Comment on <span class=""><a href="/attachment.cgi?id=8833250" name="attach_8833250" title="Part 2 - Change the limit on 32-bit">attachment 8833250</a> <a href="/attachment.cgi?id=8833250&amp;action=edit" title="Part 2 - Change the limit on 32-bit">[details]</a> <a href="/attachment.cgi?id=8833250&amp;action=diff" title="Part 2 - Change the limit on 32-bit">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8833250'>[review]</a>
Part 2 - Change the limit on 32-bit

Review of <span class=""><a href="/attachment.cgi?id=8833250" name="attach_8833250" title="Part 2 - Change the limit on 32-bit">attachment 8833250</a> <a href="/attachment.cgi?id=8833250&amp;action=edit" title="Part 2 - Change the limit on 32-bit">[details]</a> <a href="/attachment.cgi?id=8833250&amp;action=diff" title="Part 2 - Change the limit on 32-bit">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8833250'>[review]</a>:
-----------------------------------------------------------------

Good idea!</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833250&amp;action=edit"
           title="Part 2 - Change the limit on 32-bit"
           class=""
        >Attachment #8833250</a> -
        Flags: review?(luke) &rarr; review+</div></div></div><div class="change-set" id="c28"><div class="comment" data-id="12037684" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a177188_1689"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a177188_1689"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 13:47 PST" data-time="1486158469">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="12037684">sec-approval+ for trunk. We'll want patches made and nominated for Auror, Beta, and ESR45 as well.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=isnotempty">status-firefox51</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox51&amp;o1=equals&amp;v1=wontfix">wontfix</a></div></div></div><div class="change-set" id="a425625_280903"><div class="change" id="aa425625_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a425625_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a425625_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a425625_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a425625_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a425625_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-03 13:48 PST" data-time="1486158499">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8832935&amp;action=edit"
           title="Patch v2"
           class=""
        >Attachment #8832935</a> -
        Flags: sec-approval? &rarr; sec-approval+</div></div></div><div class="change-set" id="c29"><div class="comment" data-id="12038523" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a425625_280903"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a425625_280903"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-04 02:06 PST" data-time="1486202802">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-29" data-comment-id="12038523"><a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/380a46afcf858c4990b3f334da54246dfc2f1156">https://hg.mozilla.org/integration/mozilla-inbound/rev/380a46afcf858c4990b3f334da54246dfc2f1156</a>

I'll attach branch patches next week.</pre><div class="activity"><div class="change">Flags: needinfo?(jdemooij)</div></div></div><div class="change-set" id="a472442_375297"><div class="change" id="aa472442_375297">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a472442_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_375297" id="a472442_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a472442_375297"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a472442_375297">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a472442_375297">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-04 02:48 PST" data-time="1486205316">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Hang at RtlpLookupDynamicFunctionEntry when stackwalking in Win64 builds"
   href="/show_bug.cgi?id=1323460">1323460</a></div></div></div><div class="change-set" id="c30"><div class="comment" data-id="12038742" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a472442_375297"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a472442_375297"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-04 07:41 PST" data-time="1486222898">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8833679"
         class="attachment patch"
         data-id="8833679" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch.patch">
      <meta itemprop="contentSize" content="1678">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8833679">
          <a class="link" href="attachment.cgi?id=8833679&amp;action=diff">
        <span id="att-8833679-description" itemprop="description">Part 3 - Randomize on non-Windows too</span></a>
        — <a href="attachment.cgi?id=8833679&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833679">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-30" data-comment-id="12038742">On non-Windows platforms we have always used mmap without randomization. Here's a patch to generate a random address and pass that as hint to mmap.

I tested this on OS X and on x64 mmap was always able to use the addresses we generate with this patch (because huge address space). On 32-bit we succeed most of the time. It doesn't really matter: if the address is not available the OS will pick a different one.

V8 has somewhat similar code for this FWIW.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833679&amp;action=edit"
           title="Part 3 - Randomize on non-Windows too"
           class=""
        >Attachment #8833679</a> -
        Flags: review?(luke)</div></div></div><div class="change-set" id="a493210_347312"><div class="change" id="aa493210_347312">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a493210_347312"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_347312" id="a493210_347312"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a493210_347312"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a493210_347312">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a493210_347312">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-04 08:34 PST" data-time="1486226084">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833679&amp;action=edit"
           title="Part 3 - Randomize on non-Windows too"
           class=""
        >Attachment #8833679</a> -
        Flags: review?(luke) &rarr; review+</div></div></div><div class="change-set" id="c31"><div class="comment" data-id="12039044" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_135518" id="a493210_347312"><img src="https://secure.gravatar.com/avatar/2b6c1ba0915a97a81d59ca1e101e6d74?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_135518" id="a493210_347312"><a class="email " href="/user_profile?user_id=135518" > <span class="fna">Phil Ringnalda (:philor)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-04 17:12 PST" data-time="1486257133">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="12039044"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/380a46afcf85">https://hg.mozilla.org/mozilla-central/rev/380a46afcf85</a></pre><div class="activity"><div class="change">Status: ASSIGNED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2017-02-04 17:12 PST" data-time="1486257133">5 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox54&amp;o1=isnotempty">status-firefox54</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox54&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox54&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla54</div></div></div><div class="change-set" id="c32"><div class="comment" data-id="12039128" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a493210_347312"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a493210_347312"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-04 23:47 PST" data-time="1486280855">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="12039128">Part 3:

<a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/e58878766438f80b01d3e3cb9f48aaab373b2923">https://hg.mozilla.org/integration/mozilla-inbound/rev/e58878766438f80b01d3e3cb9f48aaab373b2923</a></pre><div class="activity"><div class="change">Status: RESOLVED &rarr; REOPENED</div><div class="change">Resolution: FIXED &rarr; ---</div></div></div><div class="change-set" id="c33"><div class="comment" data-id="12039616" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_135518" id="a493210_347312"><img src="https://secure.gravatar.com/avatar/2b6c1ba0915a97a81d59ca1e101e6d74?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_135518" id="a493210_347312"><a class="email " href="/user_profile?user_id=135518" > <span class="fna">Phil Ringnalda (:philor)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-05 13:00 PST" data-time="1486328445">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="12039616"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/e58878766438">https://hg.mozilla.org/mozilla-central/rev/e58878766438</a></pre><div class="activity"><div class="change">Status: REOPENED &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2017-02-04 17:12 PST" data-time="1486257133">5 years ago</span> &rarr; <span class="rel-time" title="2017-02-05 13:00 PST" data-time="1486328445">5 years ago</span></div><div class="change">Resolution: --- &rarr; FIXED</div></div></div><div class="change-set" id="a619748_430528"><div class="change" id="aa619748_430528">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_430528" id="a619748_430528"><img src="https://secure.gravatar.com/avatar/fce12300b80ca98151e9331523d6a2dc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_430528" id="a619748_430528"><a class="email " href="/user_profile?user_id=430528" > <span class="fna">Chris Peterson [:cpeterson]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a619748_430528"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a619748_430528">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a619748_430528">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-05 19:43 PST" data-time="1486352622">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Blocks: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED INVALID - Remove unneeded stackwalk lock code added in Gecko profiler hang bug 1263595"
   href="/show_bug.cgi?id=1336877">1336877</a></div></div></div><div class="change-set" id="c34"><div class="comment" data-id="12040461" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a619748_430528"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a619748_430528"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-05 23:16 PST" data-time="1486365379">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8833871"
         class="attachment patch obsolete"
         data-id="8833871" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch.patch">
      <meta itemprop="contentSize" content="1660">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8833871">
          <a class="link" href="attachment.cgi?id=8833871&amp;action=diff">
        <span id="att-8833871-description" itemprop="description">Part 4 - Fix randomization on Linux 32-bit</span></a> (obsolete)
        — <a href="attachment.cgi?id=8833871&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833871">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-34" data-comment-id="12040461">We're seeing some new Linux32 jit-test intermittents, a regression from part 3 I think.

We pass a random address to mmap as hint, but we actually need to be more careful on Linux to not use memory that we later need for stack pages. This patch changes ComputeRandomAllocationAddress on posix to use range [512MiB, 2.5GiB) on 32-bit. 

This matches the V8 code and I can no longer reproduce the crashes locally (I got 1 crash in ~2000 runs of a particular jit-test, with this patch I got no failures after 100,000 runs).

Posting this here as we'll need to uplift it with the other ones.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833871&amp;action=edit"
           title="Part 4 - Fix randomization on Linux 32-bit"
           class=""
        >Attachment #8833871</a> -
        Flags: review?(luke)</div></div></div><div class="change-set" id="c35"><div class="comment" data-id="12040467" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a619748_430528"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a619748_430528"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-05 23:21 PST" data-time="1486365719">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8833872"
         class="attachment patch"
         data-id="8833872" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch.patch">
      <meta itemprop="contentSize" content="1660">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8833872">
          <a class="link" href="attachment.cgi?id=8833872&amp;action=diff">
        <span id="att-8833872-description" itemprop="description">Part 4 - Fix randomization on Linux 32-bit</span></a>
        — <a href="attachment.cgi?id=8833872&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8833872">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-35" data-comment-id="12040467">It's actually [512MiB, 1.5GiB). It's too early still :/</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833871&amp;action=edit"
           title="Part 4 - Fix randomization on Linux 32-bit"
           class=""
        >Attachment #8833871</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8833871&amp;action=edit"
           title="Part 4 - Fix randomization on Linux 32-bit"
           class=""
        >Attachment #8833871</a> -
        Flags: <span class="activity-deleted">review?(luke)</span></div><div class="change">
        <a href="/attachment.cgi?id=8833872&amp;action=edit"
           title="Part 4 - Fix randomization on Linux 32-bit"
           class=""
        >Attachment #8833872</a> -
        Flags: review?(luke)</div></div></div><div class="change-set" id="a663011_324370"><div class="change" id="aa663011_324370">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_324370" id="a663011_324370"><img src="https://secure.gravatar.com/avatar/3936e910765d9f86af52fab5c1b4e417?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_324370" id="a663011_324370"><a class="email " href="/user_profile?user_id=324370" > <span class="fna">Joel Maher ( :jmaher ) (UTC -0800)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a663011_324370"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a663011_324370">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a663011_324370">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-06 07:44 PST" data-time="1486395885">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - 2.5 - 2.76% kraken (linux64) regression on push 380a46afcf858c4990b3f334da54246dfc2f1156 (Sat Feb 4 2017)"
   href="/show_bug.cgi?id=1337010">1337010</a></div></div></div><div class="change-set" id="a669278_347312"><div class="change" id="aa669278_347312">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_347312" id="a669278_347312"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_347312" id="a669278_347312"><a class="email " href="/user_profile?user_id=347312" > <span class="fna">Luke Wagner [:luke]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a669278_347312"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a669278_347312">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a669278_347312">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-06 09:29 PST" data-time="1486402152">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8833872&amp;action=edit"
           title="Part 4 - Fix randomization on Linux 32-bit"
           class=""
        >Attachment #8833872</a> -
        Flags: review?(luke) &rarr; review+</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="12041937" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a669278_347312"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a669278_347312"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-06 09:36 PST" data-time="1486402591">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="12041937">Part 4:

<a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/bdcc4eac811b48900cc8f977619a598f31efcfe3">https://hg.mozilla.org/integration/mozilla-inbound/rev/bdcc4eac811b48900cc8f977619a598f31efcfe3</a></pre></div><div class="change-set" id="a680728_1689"><div class="change" id="aa680728_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a680728_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a680728_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a680728_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a680728_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-06 12:40 PST" data-time="1486413602">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: javascript-core-security &rarr; core-security-release</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="12044877" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_277293" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/8378311bf1bd5e9eddc7896a07688876?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_277293" id="a680728_1689"><a class="email disabled" href="/user_profile?user_id=277293" > <span class="fna">Carsten Book [:Tomcat]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-07 05:15 PST" data-time="1486473319">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-37" data-comment-id="12044877"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/bdcc4eac811b">https://hg.mozilla.org/mozilla-central/rev/bdcc4eac811b</a></pre></div><div class="change-set" id="c38"><div class="comment" data-id="12046762" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a680728_1689"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-07 13:37 PST" data-time="1486503429">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="12046762">This missed the beta 4 build but if you come up with a branch patch, it could still make the beta 5 build on Thursday.</pre></div><div class="change-set" id="c39"><div class="comment" data-id="12048834" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a680728_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-08 05:14 PST" data-time="1486559651">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8834879"
         class="attachment patch"
         data-id="8834879" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch-aurora.patch">
      <meta itemprop="contentSize" content="61585">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8834879">
          <a class="link" href="attachment.cgi?id=8834879&amp;action=diff">
        <span id="att-8834879-description" itemprop="description">Patch for Aurora</span></a>
        — <a href="attachment.cgi?id=8834879&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8834879">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-39" data-comment-id="12048834">Contains the patches here + <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - 64-bit browser runs out of memory loading a Wasm module on a computer with 128GB of RAM, and there is no callstack"
   href="/show_bug.cgi?id=1337561">bug 1337561</a>.

Approval Request Comment
[Feature/Bug causing the regression]: NA
[User impact if declined]: Security bug.
[Is this code covered by automated tests?]: Yes.
[Has the fix been verified in Nightly?]: Yes.
[Needs manual test from QE? If yes, steps to reproduce]: No.
[List of other uplifts needed for the feature/fix]: None.
[Is the change risky?]: There's some risk.
[Why is the change risky/not risky?]: There's a risk of an increase in OOM crashes on 32-bit as we now reserve a block of memory for JIT code.
[String changes made/needed]: None.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8834879&amp;action=edit"
           title="Patch for Aurora"
           class=""
        >Attachment #8834879</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8834879&amp;action=edit"
           title="Patch for Aurora"
           class=""
        >Attachment #8834879</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="c40"><div class="comment" data-id="12048835" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a680728_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-08 05:15 PST" data-time="1486559713">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8834880"
         class="attachment patch"
         data-id="8834880" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch-beta.patch">
      <meta itemprop="contentSize" content="61461">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8834880">
          <a class="link" href="attachment.cgi?id=8834880&amp;action=diff">
        <span id="att-8834880-description" itemprop="description">Patch for Beta</span></a>
        — <a href="attachment.cgi?id=8834880&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8834880">Splinter Review</a>
      </div>
    </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8834880&amp;action=edit"
           title="Patch for Beta"
           class=""
        >Attachment #8834880</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8834880&amp;action=edit"
           title="Patch for Beta"
           class=""
        >Attachment #8834880</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="12048931" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a680728_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-08 05:45 PST" data-time="1486561522">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8834890"
         class="attachment patch"
         data-id="8834890" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="patch-esr45.patch">
      <meta itemprop="contentSize" content="56942">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8834890">
          <a class="link" href="attachment.cgi?id=8834890&amp;action=diff">
        <span id="att-8834890-description" itemprop="description">Patch for ESR45</span></a>
        — <a href="attachment.cgi?id=8834890&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1334933&attachment=8834890">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-41" data-comment-id="12048931">I also removed the nonWritableJitCode option as ESR45 predates W^X and nobody is going to enable that option there.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(jdemooij)</span></div><div class="change">
        <a href="/attachment.cgi?id=8834890&amp;action=edit"
           title="Patch for ESR45"
           class=""
        >Attachment #8834890</a> -
        Flags: review+</div><div class="change">
        <a href="/attachment.cgi?id=8834890&amp;action=edit"
           title="Patch for ESR45"
           class=""
        >Attachment #8834890</a> -
        Flags: approval-mozilla-esr45?</div></div></div><div class="change-set" id="c42"><div class="comment" data-id="12049635" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a680728_1689"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-08 08:49 PST" data-time="1486572579">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="12049635">Comment on <span class=""><a href="/attachment.cgi?id=8834879" name="attach_8834879" title="Patch for Aurora">attachment 8834879</a> <a href="/attachment.cgi?id=8834879&amp;action=edit" title="Patch for Aurora">[details]</a> <a href="/attachment.cgi?id=8834879&amp;action=diff" title="Patch for Aurora">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8834879'>[review]</a>
Patch for Aurora

reserve a contiguous region for jit code, aurora53</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8834879&amp;action=edit"
           title="Patch for Aurora"
           class=""
        >Attachment #8834879</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c43"><div class="comment" data-id="12050163" data-no="43"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a680728_1689"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-08 10:57 PST" data-time="1486580262">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="12050163"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-aurora/rev/cc9701b48cd9">https://hg.mozilla.org/releases/mozilla-aurora/rev/cc9701b48cd9</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=isnotempty">status-firefox53</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox53&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c44"><div class="comment" data-id="12053082" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_406194" id="a680728_1689"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 06:20 PST" data-time="1486650058">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="12053082">Interestingly, it looks like there was a noticeable improvement in MEMORY_VSIZE_MAX_CONTIGUOUS on the Nightly that this landed in: <a rel="nofollow" href="https://groups.google.com/forum/#!topic/mozilla.dev.telemetry-alerts/CxxcrxL5v7c">https://groups.google.com/forum/#!topic/mozilla.dev.telemetry-alerts/CxxcrxL5v7c</a>

Specifically, the patch from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c31">comment 31</a>. Maybe it cleaned up some fragmentation issues we were having?</pre></div><div class="change-set" id="c45"><div class="comment" data-id="12053173" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_375297" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/709c5feed942bf99f098bb24aa1cc86f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_375297" id="a680728_1689"><a class="email " href="/user_profile?user_id=375297" > <span class="fna">Jan de Mooij [:jandem]</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 06:47 PST" data-time="1486651657">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="12053173">(In reply to Andrew McCreight [:mccr8] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c44">comment #44</a>)
<span class="quote">&gt; Interestingly, it looks like there was a noticeable improvement in
&gt; MEMORY_VSIZE_MAX_CONTIGUOUS on the Nightly that this landed in:
&gt; <a rel="nofollow" href="https://groups.google.com/forum/#!topic/mozilla.dev.telemetry-alerts/">https://groups.google.com/forum/#!topic/mozilla.dev.telemetry-alerts/</a>
&gt; CxxcrxL5v7c
&gt; 
&gt; Specifically, the patch from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c31">comment 31</a>. Maybe it cleaned up some
&gt; fragmentation issues we were having?</span >

Interesting. It makes sense, I think: we used to allocate JIT code in 64K pools (most of the time) and we used a random allocation address for *all of these* allocations, see ComputeRandomAllocationAddress:

<a rel="nofollow" href="http://searchfox.org/mozilla-central/rev/afcf40f3eafd895611a839017730debb58a342a6/js/src/jit/ProcessExecutableMemory.cpp#40-66,262">http://searchfox.org/mozilla-central/rev/afcf40f3eafd895611a839017730debb58a342a6/js/src/jit/ProcessExecutableMemory.cpp#40-66,262</a>

Due to this randomization, you don't need many allocations to fragment the address space pretty quickly.

The patch there reserve a single 128 MB region per process on 32-bit, which probably uses more virtual address space but it's contiguous so it no longer places stuff at random locations.</pre></div><div class="change-set" id="c46"><div class="comment" data-id="12053410" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_580382" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/15b9b3783e4671cd882bff1316df14c9?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_580382" id="a680728_1689"><a class="email " href="/user_profile?user_id=580382" > <span class="fna">Julien Cristau [:jcristau]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 07:42 PST" data-time="1486654959">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="12053410">Comment on <span class=""><a href="/attachment.cgi?id=8834880" name="attach_8834880" title="Patch for Beta">attachment 8834880</a> <a href="/attachment.cgi?id=8834880&amp;action=edit" title="Patch for Beta">[details]</a> <a href="/attachment.cgi?id=8834880&amp;action=diff" title="Patch for Beta">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8834880'>[review]</a>
Patch for Beta

reserve memory range for executable code to prevent aslr bypass, beta52+</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8834880&amp;action=edit"
           title="Patch for Beta"
           class=""
        >Attachment #8834880</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta+</div></div></div><div class="change-set" id="c47"><div class="comment" data-id="12053902" data-no="47"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a680728_1689"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 09:42 PST" data-time="1486662172">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="12053902"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-beta/rev/6b35bbf96b67">https://hg.mozilla.org/releases/mozilla-beta/rev/6b35bbf96b67</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=isnotempty">status-firefox52</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox52&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c48"><div class="comment" data-id="12055471" data-no="48"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-48" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_334849" id="a680728_1689"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_334849" id="a680728_1689"><a class="email " href="/user_profile?user_id=334849" > <span class="fna">Nicholas Nethercote [inactive]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-48"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-48" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c48">Comment 48</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 17:42 PST" data-time="1486690932">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-48">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-48" data-comment-id="12055471">(In reply to Andrew McCreight [:mccr8] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c44">comment #44</a>)
<span class="quote">&gt; Interestingly, it looks like there was a noticeable improvement in
&gt; MEMORY_VSIZE_MAX_CONTIGUOUS on the Nightly that this landed in:
&gt; <a rel="nofollow" href="https://groups.google.com/forum/#!topic/mozilla.dev.telemetry-alerts/">https://groups.google.com/forum/#!topic/mozilla.dev.telemetry-alerts/</a>
&gt; CxxcrxL5v7c
&gt; 
&gt; Specifically, the patch from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c31">comment 31</a>. Maybe it cleaned up some
&gt; fragmentation issues we were having?</span >

Hopefully that's the case. I find the graph showing the telemetry change very hard to interpret.</pre></div><div class="change-set" id="c49"><div class="comment" data-id="12055935" data-no="49"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-49" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_506302" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/58cce0c47d9c6efb7d83bc34b9d79816?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_506302" id="a680728_1689"><a class="email disabled" href="/user_profile?user_id=506302" > <span class="fna">Gerry Chang [:gchang]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-49"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-49" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c49">Comment 49</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-09 23:02 PST" data-time="1486710164">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-49">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-49" data-comment-id="12055935">Comment on <span class=""><a href="/attachment.cgi?id=8834890" name="attach_8834890" title="Patch for ESR45">attachment 8834890</a> <a href="/attachment.cgi?id=8834890&amp;action=edit" title="Patch for ESR45">[details]</a> <a href="/attachment.cgi?id=8834890&amp;action=diff" title="Patch for ESR45">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8834890'>[review]</a>
Patch for ESR45

Fix a sec-critical. ESR45+.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8834890&amp;action=edit"
           title="Patch for ESR45"
           class=""
        >Attachment #8834890</a> -
        Flags: approval-mozilla-esr45? &rarr; approval-mozilla-esr45+</div></div></div><div class="change-set" id="c50"><div class="comment" data-id="12056966" data-no="50"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-50" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_406194" id="a680728_1689"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-50"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-50" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c50">Comment 50</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-10 07:31 PST" data-time="1486740701">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-50">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-50" data-comment-id="12056966">(In reply to Nicholas Nethercote [:njn] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c48">comment #48</a>)
<span class="quote">&gt; Hopefully that's the case. I find the graph showing the telemetry change
&gt; very hard to interpret.</span >

Prior to the change, 46% of the values were at the max value or larger (which looks like it is about 16MB). After the change, 53% are.</pre></div><div class="change-set" id="c51"><div class="comment" data-id="12058557" data-no="51"
       data-tags="uplift">
    
    <table class="layout-table change-head " id="ch-51" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a680728_1689"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a680728_1689"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-51"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-51" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c51">Comment 51</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-10 15:06 PST" data-time="1486768017">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-51">
        <td colspan="2" class="comment-tags"><span class="comment-tag">uplift</span>
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-51" data-comment-id="12058557"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-esr45/rev/347c10e4d6d1">https://hg.mozilla.org/releases/mozilla-esr45/rev/347c10e4d6d1</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=isnotempty">status-firefox-esr45</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr45&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=isnotempty">status-firefox-esr52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=isnotempty">tracking-firefox-esr52</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=equals&amp;v1=%3F">?</a></div></div></div><div class="change-set" id="a1274660_75935"><div class="change" id="aa1274660_75935">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1274660_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_75935" id="a1274660_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1274660_75935"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1274660_75935">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a1274660_75935">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-13 09:38 PST" data-time="1487007534">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Intermittent esr45 TestTArray.exe | test failed with return code 4294967295"
   href="/show_bug.cgi?id=1339122">1339122</a></div></div></div><div class="change-set" id="c52"><div class="comment" data-id="12066175" data-no="52"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-52" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1274660_75935"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a1274660_75935"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-52"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-52" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c52">Comment 52</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-14 08:28 PST" data-time="1487089717">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-52">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-52" data-comment-id="12066175"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-esr52/rev/6b35bbf96b67">https://hg.mozilla.org/releases/mozilla-esr52/rev/6b35bbf96b67</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=isnotempty">status-firefox-esr52</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr52&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="a1375437_39966"><div class="change" id="aa1375437_39966">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_39966" id="a1375437_39966"><img src="https://secure.gravatar.com/avatar/7ba0f00f24191ccef0d14185bd7ca4ca?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_39966" id="a1375437_39966"><a class="email " href="/user_profile?user_id=39966" > <span class="fna">Olli Pettay [:smaug]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1375437_39966"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1375437_39966">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a1375437_39966">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-14 13:38 PST" data-time="1487108311">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED INVALID - Long GC pauses in Speedometer"
   href="/show_bug.cgi?id=1339593">1339593</a></div></div></div><div class="change-set" id="a2238800_455785"><div class="change" id="aa2238800_455785">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_455785" id="a2238800_455785"><img src="https://secure.gravatar.com/avatar/f8267efedda3c2e24d5829ef3a9d124e?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_455785" id="a2238800_455785"><a class="email " href="/user_profile?user_id=455785" > <span class="fna">Kamil Jozwiak [:kjozwiak]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2238800_455785"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2238800_455785">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a2238800_455785">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-24 13:27 PST" data-time="1487971674">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: qe-verify+</div><div class="change">Whiteboard: [post-critsmash-triage]</div></div></div><div class="change-set" id="a2595417_280903"><div class="change" id="aa2595417_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a2595417_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a2595417_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2595417_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2595417_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a2595417_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-02-28 16:31 PST" data-time="1488328291">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=isnotempty">tracking-firefox-esr52</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox_esr52&amp;o1=equals&amp;v1=%3F">?</a> &rarr; ---</div><div class="change">Whiteboard: [post-critsmash-triage] &rarr; [post-critsmash-triage][adv-main52+][adv-esr45.8+]</div></div></div><div class="change-set" id="c53"><div class="comment" data-id="12106952" data-no="53"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-53" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_585744" id="a2595417_280903"><img src="https://secure.gravatar.com/avatar/92d58fb93f269f366289206017bb1e3a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_585744" id="a2595417_280903"><a class="email " href="/user_profile?user_id=585744" > <span class="fna">Rh0</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-53"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-53" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c53">Comment 53</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-01 08:05 PST" data-time="1488384350">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-53">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8842455"
         class="attachment"
         data-id="8842455" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="ASM_JS_jit_spray_WinExec_cmd_51.0.1.html">
      <meta itemprop="contentSize" content="9310">
      <meta itemprop="encodingFormat" content="text/html">
      <div class="label">
        Attached file
          <a class="link" href="attachment.cgi?id=8842455" itemprop="contentUrl">
        <span id="att-8842455-description" itemprop="description">complete PoC: ASM.JS JIT-Spray (WinExec_cmd) against 51.0.1</span></a>
        — <a href="attachment.cgi?id=8842455&amp;action=edit" itemprop="url">Details</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-53" data-comment-id="12106952">For the sake of completeness here is a complete Proof of Concept against <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933">bug 1334933</a> which circumvents the fix introduced in <a class="bz_bug_link
          bz_status_VERIFIED bz_closed"
   title="VERIFIED FIXED - lack of executable-code quota allows full bypass of ASLR and DEP"
   href="/show_bug.cgi?id=1325200">bug 1325200</a>. It may be used to execute arbitrary code (i.e.: WinExec('cmd.exe')), thereby bypassing ASLR and DEP without info-leaks and code-reuse, only needing control of EIP.

Best,
  Rh0</pre></div><div class="change-set" id="a2666696_280903"><div class="change" id="aa2666696_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a2666696_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a2666696_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2666696_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2666696_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a2666696_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-01 12:19 PST" data-time="1488399570">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2017-5400</div></div></div><div class="change-set" id="a2678008_280903"><div class="change" id="aa2678008_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a2678008_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a2678008_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a2678008_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a2678008_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a2678008_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-01 15:28 PST" data-time="1488410882">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty?</div></div></div><div class="change-set" id="a3092264_1689"><div class="change" id="aa3092264_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a3092264_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a3092264_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3092264_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3092264_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a3092264_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-06 10:32 PST" data-time="1488825138">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Flags: sec-bounty? &rarr; sec-bounty+</div></div></div><div class="change-set" id="c54"><div class="comment" data-id="12126230" data-no="54"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-54" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_372329" id="a3092264_1689"><img src="https://secure.gravatar.com/avatar/6baa085e4124d4ad5828c59fb36833f1?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_372329" id="a3092264_1689"><a class="email " href="/user_profile?user_id=372329" > <span class="fna">Landry Breuil (:gaston)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-54"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-54" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c54">Comment 54</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-08 07:05 PST" data-time="1488985517">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-54">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-54" data-comment-id="12126230">(In reply to Jan de Mooij [:jandem] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - targeted ASM.JS JIT-Spray allows bypassing ASLR and DEP"
   href="/show_bug.cgi?id=1334933#c41">comment #41</a>)
<span class="quote">&gt; Created <span class=""><a href="/attachment.cgi?id=8834890" name="attach_8834890" title="Patch for ESR45">attachment 8834890</a> <a href="/attachment.cgi?id=8834890&amp;action=edit" title="Patch for ESR45">[details]</a> <a href="/attachment.cgi?id=8834890&amp;action=diff" title="Patch for ESR45">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1334933&amp;attachment=8834890'>[review]</a>
&gt; Patch for ESR45
&gt; 
&gt; I also removed the nonWritableJitCode option as ESR45 predates W^X and
&gt; nobody is going to enable that option there.</span >

Fwiw (and as discussed with :jandem on IRC), this broke the build of TB 45.8.0 on OpenBSD where this triggers the W^X protection when precompiling startup cache - before that, we were using a patch from #1215479 to enforce nonWritableJitCode (cf <a rel="nofollow" href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/ports/mail/mozilla-thunderbird/patches/Attic/patch-mozilla_js_src_jit_ExecutableAllocator_cpp?rev=1.1&amp;content-type=text/x-cvsweb-markup">http://cvsweb.openbsd.org/cgi-bin/cvsweb/ports/mail/mozilla-thunderbird/patches/Attic/patch-mozilla_js_src_jit_ExecutableAllocator_cpp?rev=1.1&amp;content-type=text/x-cvsweb-markup</a>):

xpcshell(53926): mmap W^X violation

Testing a build with the tor-browser patch from <a rel="nofollow" href="https://trac.torproject.org/projects/tor/ticket/21514">https://trac.torproject.org/projects/tor/ticket/21514</a> - should fix the issue, i'm going to update TB to 52.0 soon anyway.</pre></div><div class="change-set" id="c55"><div class="comment" data-id="12129011" data-no="55"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-55" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_372329" id="a3092264_1689"><img src="https://secure.gravatar.com/avatar/6baa085e4124d4ad5828c59fb36833f1?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_372329" id="a3092264_1689"><a class="email " href="/user_profile?user_id=372329" > <span class="fna">Landry Breuil (:gaston)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-55"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-55" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c55">Comment 55</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-08 23:13 PST" data-time="1489043606">5 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-55">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-55" data-comment-id="12129011">The patch from tor-browser repo allows me to produce a working TB 45.8.0 install on OpenBSD, not hitting the W^X mmap protection anymore.</pre></div><div class="change-set" id="a3764306_372329"><div class="change" id="aa3764306_372329">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_372329" id="a3764306_372329"><img src="https://secure.gravatar.com/avatar/6baa085e4124d4ad5828c59fb36833f1?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_372329" id="a3764306_372329"><a class="email " href="/user_profile?user_id=372329" > <span class="fna">Landry Breuil (:gaston)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a3764306_372329"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a3764306_372329">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a3764306_372329">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2017-03-14 06:13 PDT" data-time="1489497180">5 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - Crash at startup due to low datasize limits since bug #1334933"
   href="/show_bug.cgi?id=1347139">1347139</a></div></div></div><div class="change-set" id="a63757859_1689"><div class="change" id="aa63757859_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a63757859_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a63757859_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a63757859_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a63757859_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a63757859_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-02-06 14:05 PST" data-time="1549490733">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div class="change-set" id="a64744039_551038"><div class="change" id="aa64744039_551038">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_551038" id="a64744039_551038"><img src="https://secure.gravatar.com/avatar/3f37d196e9a988f53ff9f4ba3126e586?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_551038" id="a64744039_551038"><a class="email disabled" href="/user_profile?user_id=551038" > <span class="fna">ovidiu boca[:Ovidiu]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a64744039_551038"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a64744039_551038">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#a64744039_551038">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-02-18 00:01 PST" data-time="1550476913">3 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [post-critsmash-triage][adv-main52+][adv-esr45.8+] &rarr; [post-critsmash-triage][adv-main52+][adv-esr45.8+][qa-triaged]</div></div></div><div class="change-set" id="c56"><div class="comment" data-id="13949419" data-no="56"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-56" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_556562" id="a64744039_551038"><img src="https://secure.gravatar.com/avatar/4a8f1f26abba2742e493c6d53ce648da?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_556562" id="a64744039_551038"><a class="email " href="/user_profile?user_id=556562" > <span class="fna">Adrian Florinescu [:aflorinescu]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-56"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-56" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1334933#c56">Comment 56</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2019-02-26 07:34 PST" data-time="1551195240">3 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-56">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div
        class="comment-text markdown-body "
        id="ct-56" data-comment-id="13949419" data-ismarkdown="true" ><p>Removing the qe+ flag due to the fact that the qe request is a little old and also due to the fact that the issue would pose a technical challenge to reproduce and verify anyways.<br>
Please re-add the qe+ flag if you think that effort should still be directed into verifying this fix by QA and please provide additional breakdown details regarding how to reproduce and verify the fix.</p>
</div><div class="activity"><div class="change">Flags: <span class="activity-deleted">qe-verify+</span></div><div class="change">Whiteboard: [post-critsmash-triage][adv-main52+][adv-esr45.8+][qa-triaged] &rarr; [post-critsmash-triage][adv-main52+][adv-esr45.8+]</div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1334933&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>