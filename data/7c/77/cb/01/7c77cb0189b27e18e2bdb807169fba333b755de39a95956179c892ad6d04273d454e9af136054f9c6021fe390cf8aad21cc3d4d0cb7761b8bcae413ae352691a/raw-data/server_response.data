<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>809681f310663288e83587089abb7715c68f6924 - platform/libcore - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/libcore/%2B/809681f310663288e83587089abb7715c68f6924">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="/platform/libcore/">libcore</a> / <span class="Breadcrumbs-crumb">809681f310663288e83587089abb7715c68f6924</span></div><div class="u-monospace Metadata"><table><tr><th class="Metadata-title">commit</th><td>809681f310663288e83587089abb7715c68f6924</td><td><span>[<a href="/platform/libcore/+log/809681f310663288e83587089abb7715c68f6924">log</a>]</span> <span>[<a href="/platform/libcore/+archive/809681f310663288e83587089abb7715c68f6924.tar.gz">tgz</a>]</span></td></tr><tr><th class="Metadata-title">author</th><td>Przemyslaw Szczepaniak &lt;pszczepaniak@google.com&gt;</td><td>Mon Aug 07 10:39:37 2017 +0100</td></tr><tr><th class="Metadata-title">committer</th><td>android-build-team Robot &lt;android-build-team-robot@google.com&gt;</td><td>Tue Aug 22 23:23:42 2017 +0000</td></tr><tr><th class="Metadata-title">tree</th><td><a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/">6bd291b664451761e1c7f06d1dc327b179209474</a></td></tr><tr><th class="Metadata-title">parent</th><td><a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924%5E">8924c3d52f89a77d8f1067b85be8e69230638e3a</a> <span>[<a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924%5E%21/">diff</a>]</span></td></tr></table></div><pre class="u-pre u-monospace MetadataMessage">Disable File.getCanonicalPath caches.

File.getCanonicalPath has to always return accurate
results in all cases, not doing so has potential
security implications. Caches may have stale data
if underlaying files were modified by another process
or code that&#39;s not aware of cannonical path cache.

Test: vogar ojluni/src/main/java/java/io/FileSystem.java
Bug: 62301183
Change-Id: <a href="https://android-review.googlesource.com/#/q/I76b0ca606405a958ebbc57a8a6c08deb53ea1dfc">I76b0ca606405a958ebbc57a8a6c08deb53ea1dfc</a>
(cherry picked from commit caed7373b2ed858c864a0c108cffd65d051534f7)
(cherry picked from commit fef885586207ca90b7e7b717017075a7afaa3974)
</pre><ul class="DiffTree"><li><a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/libart/src/main/java/java/lang/AndroidHardcodedSystemProperties.java">libart/src/main/java/java/lang/AndroidHardcodedSystemProperties.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924%5E%21/#F0">diff</a>]</span></li><li><a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/luni/src/test/java/libcore/java/io/FileTest.java">luni/src/test/java/libcore/java/io/FileTest.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924%5E%21/#F1">diff</a>]</span></li><li><a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/ojluni/src/main/java/java/io/FileSystem.java">ojluni/src/main/java/java/io/FileSystem.java</a><span class="DiffTree-action DiffTree-action--modify">[<a href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924%5E%21/#F2">diff</a>]</span></li></ul><div class="DiffSummary">3 files changed</div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 6bd291b664451761e1c7f06d1dc327b179209474</div><ol class="FileList"><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/Android.mk">Android.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - CleanSpec.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/CleanSpec.mk">CleanSpec.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Docs.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/Docs.mk">Docs.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - JavaLibrary.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/JavaLibrary.mk">JavaLibrary.mk</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - LICENSE"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/LICENSE">LICENSE</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NOTICE"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/NOTICE">NOTICE</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - NativeCode.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/NativeCode.mk">NativeCode.mk</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - benchmarks/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/benchmarks/">benchmarks/</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - check-ojluni-files"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/check-ojluni-files">check-ojluni-files</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - dalvik/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/dalvik/">dalvik/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - dom/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/dom/">dom/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - expectations/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/expectations/">expectations/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - harmony-tests/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/harmony-tests/">harmony-tests/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - include/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/include/">include/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - java_tests_blacklist"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/java_tests_blacklist">java_tests_blacklist</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - json/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/json/">json/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - jsr166-tests/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/jsr166-tests/">jsr166-tests/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - known_oj_tags.txt"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/known_oj_tags.txt">known_oj_tags.txt</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - libart/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/libart/">libart/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - luni/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/luni/">luni/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - non_openjdk_java_files.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/non_openjdk_java_files.mk">non_openjdk_java_files.mk</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - ojluni/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/ojluni/">ojluni/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - openjdk_java_files.mk"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/openjdk_java_files.mk">openjdk_java_files.mk</a></li><li class="FileList-item FileList-item--executableFile" title="Executable file - run-libcore-tests"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/run-libcore-tests">run-libcore-tests</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - support/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/support/">support/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - test-rules/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/test-rules/">test-rules/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tools/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/tools/">tools/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tzdata/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/tzdata/">tzdata/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - xml/"><a class="FileList-itemLink" href="/platform/libcore/+/809681f310663288e83587089abb7715c68f6924/xml/">xml/</a></li></ol></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>